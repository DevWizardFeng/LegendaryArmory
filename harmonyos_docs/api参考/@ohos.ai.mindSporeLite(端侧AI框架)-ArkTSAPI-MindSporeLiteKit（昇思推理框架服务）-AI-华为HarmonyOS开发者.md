<h1 _ngcontent-ajs-c119="" class="doc-title ng-star-inserted" title="@ohos.ai.mindSporeLite (端侧AI框架)"> @ohos.ai.mindSporeLite (端侧AI框架) </h1>

<div _ngcontent-ajs-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;"> <div><p>MindSpore Lite是一个轻量化、高性能的端侧AI引擎，提供了标准的模型推理和训练接口，内置通用硬件高性能算子库，支持Neural Network Runtime Kit使能AI专用芯片加速推理，助力打造全场景智能应用。</p> <p>本模块主要介绍MindSpore Lite AI引擎支持模型端侧推理/训练的相关能力。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li><p>本模块首批接口从API version 10开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。示例代码使用模型均为MindSpore端侧模型。</p>  </li><li><p>本模块接口仅可在Stage模型下使用。</p>  </li></ul>  </div></div></div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;"><h2 id="导入模块" device-type="phone,2in1,tablet,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { mindSporeLite } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MindSporeLiteKit'</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 851px;"><h2 id="mindsporeliteloadmodelfromfile" device-type="phone,2in1,tablet,tv">mindSporeLite.loadModelFromFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mindsporeliteloadmodelfromfile" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>loadModelFromFile(model: string, callback: Callback&lt;Model&gt;): void</p> <p>从完整路径加载输入模型，用于CPU推理。使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">model</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">模型的完整输入路径。字符串长度限制跟随文件系统。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#model">Model</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回模型对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> modelFile : <span class="hljs-built_in">string</span> = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li>mindSporeLite.<span class="hljs-title function_">loadModelFromFile</span>(modelFile, <span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel : mindSporeLite.Model</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> modelInputs : mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  <span class="hljs-keyword">if</span> (modelInputs == <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MS_LITE_ERR: getInputs failed.'</span>)</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>);</li><li>  }</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 944px;"><h2 id="mindsporeliteloadmodelfromfile-1" device-type="phone,2in1,tablet,tv">mindSporeLite.loadModelFromFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mindsporeliteloadmodelfromfile-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>loadModelFromFile(model: string, context: Context, callback: Callback&lt;Model&gt;): void</p> <p>从完整路径加载输入模型用于推理。使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">model</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">模型的完整输入路径。字符串长度限制跟随文件系统。</td> </tr> <tr><td class="cellrowborder" width="25%">context</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#context">Context</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">运行环境的配置信息。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#model">Model</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回模型对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: mindSporeLite.<span class="hljs-property">Context</span> = {};</li><li>context.<span class="hljs-property">target</span> = [<span class="hljs-string">'cpu'</span>];</li><li><span class="hljs-keyword">let</span> modelFile : <span class="hljs-built_in">string</span> = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li>mindSporeLite.<span class="hljs-title function_">loadModelFromFile</span>(modelFile, context, <span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel : mindSporeLite.Model</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> modelInputs : mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  <span class="hljs-keyword">if</span> (modelInputs == <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MS_LITE_ERR: getInputs failed.'</span>)</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>);</li><li>  }</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1046px;"><h2 id="mindsporeliteloadmodelfromfile-2" device-type="phone,2in1,tablet,tv">mindSporeLite.loadModelFromFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mindsporeliteloadmodelfromfile-2" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>loadModelFromFile(model: string, context?: Context): Promise&lt;Model&gt;</p> <p>从完整路径加载输入模型用于推理。使用Promise异步函数。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">model</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">模型的完整输入路径。字符串长度限制跟随文件系统。</td> </tr> <tr><td class="cellrowborder" width="25%">context</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#context">Context</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">运行环境的配置信息。默认使用CpuDevice初始化。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#model">Model</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回Model对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li>mindSporeLite.<span class="hljs-title function_">loadModelFromFile</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel : mindSporeLite.Model</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> modelInputs : mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  <span class="hljs-keyword">if</span> (modelInputs == <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MS_LITE_ERR: getInputs failed.'</span>)</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>);</li><li>  }</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 971px;"><h2 id="mindsporeliteloadmodelfrombuffer" device-type="phone,2in1,tablet,tv">mindSporeLite.loadModelFromBuffer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mindsporeliteloadmodelfrombuffer" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>loadModelFromBuffer(model: ArrayBuffer, callback: Callback&lt;Model&gt;): void</p> <p>从内存加载输入模型，用于CPU推理。使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">model</td> <td class="cellrowborder" width="25%">ArrayBuffer</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">包含模型的内存。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#model">Model</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回模型对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'xxx.ms'</span>;</li><li><span class="hljs-keyword">let</span> globalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>globalContext.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">buffer: <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> modelBuffer = buffer.<span class="hljs-property">buffer</span>;</li><li>  mindSporeLite.<span class="hljs-title function_">loadModelFromBuffer</span>(modelBuffer, <span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel: mindSporeLite.Model</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">modelInputs</span>: mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'MS_LITE_LOG: '</span> + modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>);</li><li>  })</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getRawFileContent promise error is "</span> + error);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1064px;"><h2 id="mindsporeliteloadmodelfrombuffer-1" device-type="phone,2in1,tablet,tv">mindSporeLite.loadModelFromBuffer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mindsporeliteloadmodelfrombuffer-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>loadModelFromBuffer(model: ArrayBuffer, context: Context, callback: Callback&lt;Model&gt;): void</p> <p>从内存加载输入模型用于推理。使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">model</td> <td class="cellrowborder" width="25%">ArrayBuffer</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">包含模型的内存。</td> </tr> <tr><td class="cellrowborder" width="25%">context</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#context">Context</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">运行环境的配置信息。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#model">Model</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回模型对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'xxx.ms'</span>;</li><li><span class="hljs-keyword">let</span> globalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>globalContext.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">buffer: <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> modelBuffer = buffer.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: mindSporeLite.<span class="hljs-property">Context</span> = {};</li><li>  context.<span class="hljs-property">target</span> = [<span class="hljs-string">'cpu'</span>];</li><li>  mindSporeLite.<span class="hljs-title function_">loadModelFromBuffer</span>(modelBuffer, context, <span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel: mindSporeLite.Model</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">modelInputs</span>: mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'MS_LITE_LOG: '</span> + modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>);</li><li>  })</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getRawFileContent promise error is "</span> + error);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1166px;"><h2 id="mindsporeliteloadmodelfrombuffer-2" device-type="phone,2in1,tablet,tv">mindSporeLite.loadModelFromBuffer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mindsporeliteloadmodelfrombuffer-2" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>loadModelFromBuffer(model: ArrayBuffer, context?: Context): Promise&lt;Model&gt;</p> <p>从内存加载输入模型用于推理。使用Promise异步函数。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">model</td> <td class="cellrowborder" width="25%">ArrayBuffer</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">包含模型的内存。</td> </tr> <tr><td class="cellrowborder" width="25%">context</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#context">Context</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">运行环境的配置信息。默认使用CpuDevice初始化。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#model">Model</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回Model对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'xxx.ms'</span>;</li><li><span class="hljs-keyword">let</span> globalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>globalContext.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">buffer: <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> modelBuffer = buffer.<span class="hljs-property">buffer</span>;</li><li>  mindSporeLite.<span class="hljs-title function_">loadModelFromBuffer</span>(modelBuffer).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel: mindSporeLite.Model</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">modelInputs</span>: mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'MS_LITE_LOG: '</span> + modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>);</li><li>  })</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getRawFileContent promise error is "</span> + error);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 899px;"><h2 id="mindsporeliteloadmodelfromfd" device-type="phone,2in1,tablet,tv">mindSporeLite.loadModelFromFd<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mindsporeliteloadmodelfromfd" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>loadModelFromFd(model: number, callback: Callback&lt;Model&gt;): void</p> <p>从文件描述符加载输入模型，用于CPU推理。使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">model</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">模型的文件描述符。跟随文件系统返回fd值传入。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#model">Model</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回模型对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li><span class="hljs-keyword">let</span> file = fileIo.<span class="hljs-title function_">openSync</span>(modelFile, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>);</li><li>mindSporeLite.<span class="hljs-title function_">loadModelFromFd</span>(file.<span class="hljs-property">fd</span>, <span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel : mindSporeLite.Model</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> modelInputs : mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  <span class="hljs-keyword">if</span> (modelInputs == <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MS_LITE_ERR: getInputs failed.'</span>)</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>);</li><li>  }</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 992px;"><h2 id="mindsporeliteloadmodelfromfd-1" device-type="phone,2in1,tablet,tv">mindSporeLite.loadModelFromFd<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mindsporeliteloadmodelfromfd-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>loadModelFromFd(model: number, context: Context, callback: Callback&lt;Model&gt;): void</p> <p>从文件描述符加载输入模型用于推理。使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">model</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">模型的文件描述符。跟随文件系统返回fd值传入。</td> </tr> <tr><td class="cellrowborder" width="25%">context</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#context">Context</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">运行环境的配置信息。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#model">Model</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回模型对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li><span class="hljs-keyword">let</span> context : mindSporeLite.<span class="hljs-property">Context</span> = {};</li><li>context.<span class="hljs-property">target</span> = [<span class="hljs-string">'cpu'</span>];</li><li><span class="hljs-keyword">let</span> file = fileIo.<span class="hljs-title function_">openSync</span>(modelFile, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>);</li><li>mindSporeLite.<span class="hljs-title function_">loadModelFromFd</span>(file.<span class="hljs-property">fd</span>, context, <span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel : mindSporeLite.Model</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> modelInputs : mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  <span class="hljs-keyword">if</span> (modelInputs == <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MS_LITE_ERR: getInputs failed.'</span>)</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>);</li><li>  }</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1094px;"><h2 id="mindsporeliteloadmodelfromfd-2" device-type="phone,2in1,tablet,tv">mindSporeLite.loadModelFromFd<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mindsporeliteloadmodelfromfd-2" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>loadModelFromFd(model: number, context?: Context): Promise&lt;Model&gt;</p> <p>从文件描述符加载输入模型用于推理。使用Promise异步函数。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">model</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">模型的文件描述符。跟随文件系统返回fd值传入。</td> </tr> <tr><td class="cellrowborder" width="25%">context</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#context">Context</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">运行环境的配置信息。默认使用CpuDevice初始化。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#model">Model</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回Model对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li><span class="hljs-keyword">let</span> file = fileIo.<span class="hljs-title function_">openSync</span>(modelFile, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>);</li><li>mindSporeLite.<span class="hljs-title function_">loadModelFromFd</span>(file.<span class="hljs-property">fd</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel: mindSporeLite.Model</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">modelInputs</span>: mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  <span class="hljs-keyword">if</span> (modelInputs == <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MS_LITE_ERR: getInputs failed.'</span>)</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>);</li><li>  }</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1115px;"><h2 id="mindsporeliteloadtrainmodelfromfile12" device-type="phone,2in1,tablet,tv">mindSporeLite.loadTrainModelFromFile<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mindsporeliteloadtrainmodelfromfile12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>loadTrainModelFromFile(model: string, trainCfg?: TrainCfg, context?: Context): Promise&lt;Model&gt;</p> <p>根据路径加载训练模型文件。使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">model</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">模型的完整输入路径。字符串长度限制跟随文件系统。</td> </tr> <tr><td class="cellrowborder" width="25%">trainCfg</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#traincfg12">TrainCfg</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">模型训练配置。默认值为TrainCfg各属性默认值。</td> </tr> <tr><td class="cellrowborder" width="25%">context</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#context">Context</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">运行环境的配置信息。默认使用CpuDevice初始化。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#model">Model</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回Model对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li>mindSporeLite.<span class="hljs-title function_">loadTrainModelFromFile</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel : mindSporeLite.Model</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> modelInputs : mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  <span class="hljs-keyword">if</span> (modelInputs == <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MS_LITE_ERR: getInputs failed.'</span>)</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>);</li><li>  }</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1211px;"><h2 id="mindsporeliteloadtrainmodelfrombuffer12" device-type="phone,2in1,tablet,tv">mindSporeLite.loadTrainModelFromBuffer<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mindsporeliteloadtrainmodelfrombuffer12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>loadTrainModelFromBuffer(model: ArrayBuffer, trainCfg?: TrainCfg, context?: Context): Promise&lt;Model&gt;</p> <p>从内存缓冲区加载训练模型。使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">model</td> <td class="cellrowborder" width="25%">ArrayBuffer</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">包含训练模型的内存。</td> </tr> <tr><td class="cellrowborder" width="25%">trainCfg</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#traincfg12">TrainCfg</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">模型训练配置。默认值为TrainCfg各属性默认值。</td> </tr> <tr><td class="cellrowborder" width="25%">context</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#context">Context</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">运行环境的配置信息。默认使用CpuDevice初始化。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#model">Model</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回Model对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'xxx.ms'</span>;</li><li><span class="hljs-keyword">let</span> globalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>globalContext.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">buffer: <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> modelBuffer = buffer.<span class="hljs-property">buffer</span>;</li><li>  mindSporeLite.<span class="hljs-title function_">loadTrainModelFromBuffer</span>(modelBuffer).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel: mindSporeLite.Model</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"MSLITE trainMode: "</span>, mindSporeLiteModel.<span class="hljs-property">trainMode</span>);</li><li>  })</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getRawFileContent promise error is "</span> + error);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1043px;"><h2 id="mindsporeliteloadtrainmodelfromfd12" device-type="phone,2in1,tablet,tv">mindSporeLite.loadTrainModelFromFd<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mindsporeliteloadtrainmodelfromfd12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>loadTrainModelFromFd(model: number, trainCfg?: TrainCfg, context?: Context): Promise&lt;Model&gt;</p> <p>从文件描述符加载训练模型文件。使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">model</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">训练模型的文件描述符。跟随文件系统返回fd值传入。</td> </tr> <tr><td class="cellrowborder" width="25%">trainCfg</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#traincfg12">TrainCfg</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">模型训练配置。默认值为TrainCfg各属性默认值。</td> </tr> <tr><td class="cellrowborder" width="25%">context</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#context">Context</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">运行环境的配置信息。默认使用CpuDevice初始化。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#model">Model</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回Model对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li><span class="hljs-keyword">let</span> file = fileIo.<span class="hljs-title function_">openSync</span>(modelFile, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_ONLY</span>);</li><li>mindSporeLite.<span class="hljs-title function_">loadTrainModelFromFd</span>(file.<span class="hljs-property">fd</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel: mindSporeLite.Model</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"MSLITE trainMode: "</span>, mindSporeLiteModel.<span class="hljs-property">trainMode</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 682px;"><h2 id="mindsporelitegetallnnrtdevicedescriptions12" device-type="phone,2in1,tablet,tv">mindSporeLite.getAllNNRTDeviceDescriptions<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mindsporelitegetallnnrtdevicedescriptions12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getAllNNRTDeviceDescriptions() : NNRTDeviceDescription[]</p> <p>获取NNRt中的所有设备描述。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#nnrtdevicedescription12">NNRTDeviceDescription</a>[]</td> <td class="cellrowborder" width="50%">NNRt设备描述信息数组。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> allDevices = mindSporeLite.<span class="hljs-title function_">getAllNNRTDeviceDescriptions</span>();</li><li><span class="hljs-keyword">if</span> (allDevices == <span class="hljs-literal">null</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MS_LITE_LOG: getAllNNRTDeviceDescriptions is NULL.'</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 896px;"><h2 id="context" device-type="phone,2in1,tablet,tv">Context<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="context" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>定义运行环境的配置信息。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">target</td> <td class="cellrowborder" width="20%">string[]</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">配置目标后端。可选'cpu'，'nnrt'，默认'cpu'。</td> </tr> <tr><td class="cellrowborder" width="20%">cpu</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#cpudevice">CpuDevice</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">CPU后端设备选项。只有当target包含'cpu'时，才能设置此属性。默认值为CpuDevice各属性默认值。</td> </tr> <tr><td class="cellrowborder" width="20%">nnrt</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#nnrtdevice">NNRTDevice</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">NNRt后端设备选项。只有当target包含'nnrt'时，才能设置此属性。默认值为NNRTDevice各属性默认值。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: mindSporeLite.<span class="hljs-property">Context</span> = {};</li><li>context.<span class="hljs-property">target</span> = [<span class="hljs-string">'cpu'</span>,<span class="hljs-string">'nnrt'</span>];</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1349px;"><h2 id="cpudevice" device-type="phone,2in1,tablet,tv">CpuDevice<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cpudevice" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>CPU后端设备选项。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">threadNum</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">设置运行时的线程数，默认值：2。</td> </tr> <tr><td class="cellrowborder" width="20%">threadAffinityMode</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#threadaffinitymode">ThreadAffinityMode</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">设置运行时的CPU绑核策略模式，默认值为不绑核：mindSporeLite.ThreadAffinityMode.NO_AFFINITIES。</td> </tr> <tr><td class="cellrowborder" width="20%">threadAffinityCoreList</td> <td class="cellrowborder" width="20%">number[]</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">设置运行时的CPU绑核列表，设置绑核策略模式后使能，当绑核策略模式为mindSporeLite.ThreadAffinityMode.NO_AFFINITIES时，绑核列表为空。列表中的数字代表核的序号。默认值：[]。</td> </tr> <tr><td class="cellrowborder" width="20%">precisionMode</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">设置是否使能<strong>Float16推理模式</strong>，设置为'preferred_fp16'代表使能半精度推理，其余设置情况均为不支持，默认设置'enforce_fp32'表示不使能半精度推理。</td> </tr>  </tbody></table></div> </div> <p><strong>Float16推理模式</strong>： Float16又称半精度，它使用16比特表示一个数。Float16推理模式表示推理的时候用半精度进行推理。</p> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: mindSporeLite.<span class="hljs-property">Context</span> = {};</li><li>context.<span class="hljs-property">cpu</span> = {};</li><li>context.<span class="hljs-property">target</span> = [<span class="hljs-string">'cpu'</span>];</li><li>context.<span class="hljs-property">cpu</span>.<span class="hljs-property">threadNum</span> = <span class="hljs-number">2</span>;</li><li>context.<span class="hljs-property">cpu</span>.<span class="hljs-property">threadAffinityMode</span> = <span class="hljs-number">0</span>;</li><li>context.<span class="hljs-property">cpu</span>.<span class="hljs-property">precisionMode</span> = <span class="hljs-string">'preferred_fp16'</span>;</li><li>context.<span class="hljs-property">cpu</span>.<span class="hljs-property">threadAffinityCoreList</span> = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>];</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 423px;"><h2 id="threadaffinitymode" device-type="phone,2in1,tablet,tv">ThreadAffinityMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="threadaffinitymode" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>设置运行时的CPU绑核策略模式，有效值为0-2，0为默认不绑核，1为绑大核，2为绑中核。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">NO_AFFINITIES</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">不绑核。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">BIG_CORES_FIRST</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">绑大核优先。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">LITTLE_CORES_FIRST</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">绑中核优先。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 660px;"><h2 id="nnrtdevice" device-type="phone,2in1,tablet,tv">NNRTDevice<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nnrtdevice" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>Neural Network Runtime表示神经网络运行时，简称NNRt。作为中间桥梁，连通上层 AI 推理框架和底层加速芯片，实现 AI 模型的跨芯片推理计算。MindSpore Lite 可配置NNRt后端。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">deviceID<sup>12+</sup></td> <td class="cellrowborder" width="20%">bigint</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">NNRt设备ID。默认值为0。</td> </tr> <tr><td class="cellrowborder" width="20%">performanceMode<sup>12+</sup></td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#performancemode12">PerformanceMode</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">NNRt设备的工作性能模式。默认值为PERFORMANCE_NONE。</td> </tr> <tr><td class="cellrowborder" width="20%">priority<sup>12+</sup></td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#priority12">Priority</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">NNRt推理任务优先级。默认值为PRIORITY_MEDIUM。</td> </tr> <tr><td class="cellrowborder" width="20%">extensions<sup>12+</sup></td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#extension12">Extension</a>[]</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">NNRt设备的扩展配置。默认为空。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 513px;"><h2 id="performancemode12" device-type="phone,2in1,tablet,tv">PerformanceMode<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="performancemode12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>NNRt设备的工作性能模式枚举。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">PERFORMANCE_NONE</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">无特殊设置。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">PERFORMANCE_LOW</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">低功耗模式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">PERFORMANCE_MEDIUM</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">功耗-性能均衡模式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">PERFORMANCE_HIGH</td> <td class="cellrowborder" width="33.33333333333333%">3</td> <td class="cellrowborder" width="33.33333333333333%">高性能模式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">PERFORMANCE_EXTREME</td> <td class="cellrowborder" width="33.33333333333333%">4</td> <td class="cellrowborder" width="33.33333333333333%">极致性能模式。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 468px;"><h2 id="priority12" device-type="phone,2in1,tablet,tv">Priority<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="priority12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>NNRt推理任务优先级枚举。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">PRIORITY_NONE</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">无优先级偏好。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">PRIORITY_LOW</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">低优先级任务。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">PRIORITY_MEDIUM</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">中优先级任务。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">PRIORITY_HIGH</td> <td class="cellrowborder" width="33.33333333333333%">3</td> <td class="cellrowborder" width="33.33333333333333%">高优先级任务。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 378px;"><h2 id="extension12" device-type="phone,2in1,tablet,tv">Extension<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="extension12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>定义NNRt设备的扩展信息。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">name<sup>12+</sup></td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">扩展名称。</td> </tr> <tr><td class="cellrowborder" width="20%">value<sup>12+</sup></td> <td class="cellrowborder" width="20%">ArrayBuffer</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">包含扩展的内存。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 230px;"><h2 id="nnrtdevicedescription12" device-type="phone,2in1,tablet,tv">NNRTDeviceDescription<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nnrtdevicedescription12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>NNRt设备信息描述，包含设备ID，设备名称等信息。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 826px;"><h3 id="deviceid12" device-type="phone,2in1,tablet,tv" class="firsth2">deviceID<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deviceid12" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>deviceID() : bigint</p> <p>获取NNRt设备ID。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">bigint</td> <td class="cellrowborder" width="50%">NNRt设备ID。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: mindSporeLite.<span class="hljs-property">Context</span> = {};</li><li>context.<span class="hljs-property">target</span> = [<span class="hljs-string">"nnrt"</span>];</li><li>context.<span class="hljs-property">nnrt</span> = {};</li><li><span class="hljs-keyword">let</span> allDevices = mindSporeLite.<span class="hljs-title function_">getAllNNRTDeviceDescriptions</span>();</li><li><span class="hljs-keyword">if</span> (allDevices == <span class="hljs-literal">null</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAllNNRTDeviceDescriptions is NULL.'</span>);</li><li>} <span class="hljs-keyword">else</span> {</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-attr">i</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>; i &lt; allDevices.<span class="hljs-property">length</span>; i++) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(allDevices[i].<span class="hljs-title function_">deviceID</span>().<span class="hljs-title function_">toString</span>());</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 842px;"><h3 id="devicetype12" device-type="phone,2in1,tablet,tv">deviceType<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="devicetype12" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>deviceType() : NNRTDeviceType</p> <p>获取NNRt设备类型。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#nnrtdevicetype12">NNRTDeviceType</a></td> <td class="cellrowborder" width="50%">NNRt设备类型。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: mindSporeLite.<span class="hljs-property">Context</span> = {};</li><li>context.<span class="hljs-property">target</span> = [<span class="hljs-string">"nnrt"</span>];</li><li>context.<span class="hljs-property">nnrt</span> = {};</li><li><span class="hljs-keyword">let</span> allDevices = mindSporeLite.<span class="hljs-title function_">getAllNNRTDeviceDescriptions</span>();</li><li><span class="hljs-keyword">if</span> (allDevices == <span class="hljs-literal">null</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAllNNRTDeviceDescriptions is NULL.'</span>);</li><li>} <span class="hljs-keyword">else</span> {</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-attr">i</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>; i &lt; allDevices.<span class="hljs-property">length</span>; i++) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(allDevices[i].<span class="hljs-title function_">deviceType</span>().<span class="hljs-title function_">toString</span>());</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 842px;"><h3 id="devicename12" device-type="phone,2in1,tablet,tv">deviceName<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="devicename12" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>deviceName() : string</p> <p>获取NNRt设备名称。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">string</td> <td class="cellrowborder" width="50%">NNRt设备名称。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: mindSporeLite.<span class="hljs-property">Context</span> = {};</li><li>context.<span class="hljs-property">target</span> = [<span class="hljs-string">"nnrt"</span>];</li><li>context.<span class="hljs-property">nnrt</span> = {};</li><li><span class="hljs-keyword">let</span> allDevices = mindSporeLite.<span class="hljs-title function_">getAllNNRTDeviceDescriptions</span>();</li><li><span class="hljs-keyword">if</span> (allDevices == <span class="hljs-literal">null</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAllNNRTDeviceDescriptions is NULL.'</span>);</li><li>} <span class="hljs-keyword">else</span> {</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-attr">i</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>; i &lt; allDevices.<span class="hljs-property">length</span>; i++) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(allDevices[i].<span class="hljs-title function_">deviceName</span>().<span class="hljs-title function_">toString</span>());</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 468px;"><h2 id="nnrtdevicetype12" device-type="phone,2in1,tablet,tv">NNRTDeviceType<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nnrtdevicetype12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>NNRt设备类型枚举。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.29.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.29.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">NNRTDEVICE_OTHERS</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">设备类型不属于以下3种，则属于其它。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NNRTDEVICE_CPU</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">CPU设备。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NNRTDEVICE_GPU</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">GPU设备。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NNRTDEVICE_ACCELERATOR</td> <td class="cellrowborder" width="33.33333333333333%">3</td> <td class="cellrowborder" width="33.33333333333333%">特定的加速设备。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 707px;"><h2 id="traincfg12" device-type="phone,2in1,tablet,tv">TrainCfg<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="traincfg12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>端侧训练相关参数的配置文件。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.30.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.30.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.30.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.30.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">lossName<sup>12+</sup></td> <td class="cellrowborder" width="20%">string[]</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">损失函数的名称列表。默认值为["loss_fct", "_loss_fn", "SigmoidCrossEntropy"]。</td> </tr> <tr><td class="cellrowborder" width="20%">optimizationLevel<sup>12+</sup></td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#optimizationlevel12">OptimizationLevel</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">端侧训练的网络优化等级。默认值为O0。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cfg</span>: mindSporeLite.<span class="hljs-property">TrainCfg</span> = {};</li><li>cfg.<span class="hljs-property">lossName</span> = [<span class="hljs-string">"loss_fct"</span>, <span class="hljs-string">"_loss_fn"</span>, <span class="hljs-string">"SigmoidCrossEntropy"</span>];</li><li>cfg.<span class="hljs-property">optimizationLevel</span> = mindSporeLite.<span class="hljs-property">OptimizationLevel</span>.<span class="hljs-property">O0</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 516px;"><h2 id="optimizationlevel12" device-type="phone,2in1,tablet,tv">OptimizationLevel<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="optimizationlevel12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>端侧训练的网络优化等级枚举。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.31.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.31.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.31.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">O0</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">无优化等级。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">O2</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">将网络转换为float16，保持批量归一化层和损失函数为float32。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">O3</td> <td class="cellrowborder" width="33.33333333333333%">3</td> <td class="cellrowborder" width="33.33333333333333%">将网络转换为float16，包括批量归一化层。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">AUTO</td> <td class="cellrowborder" width="33.33333333333333%">4</td> <td class="cellrowborder" width="33.33333333333333%">根据设备选择优化等级。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 423px;"><h2 id="quantizationtype12" device-type="phone,2in1,tablet,tv">QuantizationType<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="quantizationtype12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>量化类型信息，有效值为0-2。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.32.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.32.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.32.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">NO_QUANT</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">不做量化。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">WEIGHT_QUANT</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">权重量化。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">FULL_QUANT</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">全量化。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 254px;"><h2 id="model" device-type="phone,2in1,tablet,tv">Model<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="model" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>模型实例。描述Model对象的属性和方法。</p> <p>下例API示例中都需先使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#mindsporeliteloadmodelfromfile">loadModelFromFile()</a>、<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#mindsporeliteloadmodelfrombuffer">loadModelFromBuffer()</a>、<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#mindsporeliteloadmodelfromfd">loadModelFromFd()</a>中的任一方法获取到Model实例，再通过此实例调用对应方法。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 522px;"><h3 id="属性" device-type="phone,2in1,tablet,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.34.3.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.34.3.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.34.3.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.34.3.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.34.3.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">learningRate<sup>12+</sup></td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">训练模型的学习率。默认值从加载的模型中读取。</td> </tr> <tr><td class="cellrowborder" width="20%">trainMode<sup>12+</sup></td> <td class="cellrowborder" width="20%">boolean</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">模型是否为训练模式。true表示训练模式，false表示非训练模式。如果是训练模型，trainMode默认是true；如果是推理模型，trainMode默认是false。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 794px;"><h3 id="getinputs" device-type="phone,2in1,tablet,tv">getInputs<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getinputs" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getInputs(): MSTensor[]</p> <p>获取模型的输入用于推理。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#mstensor">MSTensor</a>[]</td> <td class="cellrowborder" width="50%">返回MSTensor对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li>mindSporeLite.<span class="hljs-title function_">loadModelFromFile</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel : mindSporeLite.Model</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> modelInputs : mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  <span class="hljs-keyword">if</span> (modelInputs == <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MS_LITE_ERR: getInputs failed.'</span>)</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>);</li><li>  }</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1179px;"><h3 id="predict" device-type="phone,2in1,tablet,tv">predict<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="predict" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>predict(inputs: MSTensor[], callback: Callback&lt;MSTensor[]&gt;): void</p> <p>执行推理模型。使用callback异步回调。需要确保调用时模型对象不被资源回收。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.36.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">inputs</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#mstensor">MSTensor</a>[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">模型的输入列表。MSTensor对象。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#mstensor">MSTensor</a>[]&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回MSTensor对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> inputName = <span class="hljs-string">'input_data.bin'</span>;</li><li><span class="hljs-keyword">let</span> globalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>globalContext.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(inputName).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (buffer : <span class="hljs-title class_">Uint8Array</span>) =&gt; {</li><li>  <span class="hljs-keyword">let</span> inputBuffer = buffer.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">let</span> modelFile : <span class="hljs-built_in">string</span> = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li>  <span class="hljs-keyword">let</span> mindSporeLiteModel : mindSporeLite.<span class="hljs-property">Model</span> = <span class="hljs-keyword">await</span> mindSporeLite.<span class="hljs-title function_">loadModelFromFile</span>(modelFile);</li><li>  <span class="hljs-keyword">let</span> modelInputs : mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>
</li><li>  modelInputs[<span class="hljs-number">0</span>].<span class="hljs-title function_">setData</span>(inputBuffer);</li><li>  mindSporeLiteModel.<span class="hljs-title function_">predict</span>(modelInputs, <span class="hljs-function">(<span class="hljs-params">mindSporeLiteTensor : mindSporeLite.MSTensor[]</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> output = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(mindSporeLiteTensor[<span class="hljs-number">0</span>].<span class="hljs-title function_">getData</span>());</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; output.<span class="hljs-property">length</span>; i++) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'MS_LITE_LOG: '</span> + output[i].<span class="hljs-title function_">toString</span>());</li><li>    }</li><li>  })</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getRawFileContent promise error is "</span> + error);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1257px;"><h3 id="predict-1" device-type="phone,2in1,tablet,tv">predict<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="predict-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>predict(inputs: MSTensor[]): Promise&lt;MSTensor[]&gt;</p> <p>执行推理模型，返回推理结果。使用Promise异步回调。需要确保调用时模型对象不被资源回收。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.37.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">inputs</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#mstensor">MSTensor</a>[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">模型的输入列表。MSTensor对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#mstensor">MSTensor</a>[]&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回MSTensor对象列表。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> inputName = <span class="hljs-string">'input_data.bin'</span>;</li><li><span class="hljs-keyword">let</span> globalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>globalContext.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(inputName).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (buffer : <span class="hljs-title class_">Uint8Array</span>) =&gt; {</li><li>  <span class="hljs-keyword">let</span> inputBuffer = buffer.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li>  <span class="hljs-keyword">let</span> mindSporeLiteModel : mindSporeLite.<span class="hljs-property">Model</span> = <span class="hljs-keyword">await</span> mindSporeLite.<span class="hljs-title function_">loadModelFromFile</span>(modelFile);</li><li>  <span class="hljs-keyword">let</span> modelInputs : mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  modelInputs[<span class="hljs-number">0</span>].<span class="hljs-title function_">setData</span>(inputBuffer);</li><li>  mindSporeLiteModel.<span class="hljs-title function_">predict</span>(modelInputs).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteTensor : mindSporeLite.MSTensor[]</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> output = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(mindSporeLiteTensor[<span class="hljs-number">0</span>].<span class="hljs-title function_">getData</span>());</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; output.<span class="hljs-property">length</span>; i++) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(output[i].<span class="hljs-title function_">toString</span>());</li><li>    }</li><li>  })</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getRawFileContent promise error is "</span> + error);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 942px;"><h3 id="resize" device-type="phone,2in1,tablet,tv">resize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resize" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>resize(inputs: MSTensor[], dims: Array&lt;Array&lt;number&gt;&gt;): boolean</p> <p>重新设置张量大小。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">inputs</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#mstensor">MSTensor</a>[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">模型的输入列表。</td> </tr> <tr><td class="cellrowborder" width="25%">dims</td> <td class="cellrowborder" width="25%">Array&lt;Array&lt;number&gt;&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">需要修改的目标张量大小。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回是否设置成功的结果。true表示重新设置张量大小成功；false表示重新设置张量大小失败。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li>mindSporeLite.<span class="hljs-title function_">loadModelFromFile</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel : mindSporeLite.Model</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> modelInputs : mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  <span class="hljs-keyword">let</span> new_dim = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>([<span class="hljs-number">1</span>,<span class="hljs-number">32</span>,<span class="hljs-number">32</span>,<span class="hljs-number">1</span>]);</li><li>  mindSporeLiteModel.<span class="hljs-title function_">resize</span>(modelInputs, new_dim);</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 969px;"><h3 id="runstep12" device-type="phone,2in1,tablet,tv">runStep<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="runstep12" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>runStep(inputs: MSTensor[]): boolean</p> <p>单步训练模型，仅用于端侧训练。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">inputs</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#mstensor">MSTensor</a>[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">模型的输入列表。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回单步训练模型是否成功的结果。true表示单步训练模型成功，false表示单步训练模型失败。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li>mindSporeLite.<span class="hljs-title function_">loadTrainModelFromFile</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel: mindSporeLite.Model</span>) =&gt;</span> {</li><li>  mindSporeLiteModel.<span class="hljs-property">trainMode</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-keyword">const</span> modelInputs = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  <span class="hljs-keyword">let</span> ret = mindSporeLiteModel.<span class="hljs-title function_">runStep</span>(modelInputs);</li><li>  <span class="hljs-keyword">if</span> (ret == <span class="hljs-literal">false</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MS_LITE_LOG: runStep failed.'</span>)</li><li>  }</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1106px;"><h3 id="getweights12" device-type="phone,2in1,tablet,tv">getWeights<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getweights12" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getWeights(): MSTensor[]</p> <p>获取模型的所有权重，仅用于端侧训练。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#mstensor">MSTensor</a>[]</td> <td class="cellrowborder" width="50%">返回模型的权重张量。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'xxx.ms'</span>;</li><li><span class="hljs-keyword">let</span> globalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>globalContext.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">modelBuffer : <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>  mindSporeLite.<span class="hljs-title function_">loadTrainModelFromBuffer</span>(modelBuffer.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>)).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel: mindSporeLite.Model</span>) =&gt;</span> {</li><li>    mindSporeLiteModel.<span class="hljs-property">trainMode</span> = <span class="hljs-literal">true</span>;</li><li>    <span class="hljs-keyword">const</span> weights = mindSporeLiteModel.<span class="hljs-title function_">getWeights</span>();</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; weights.<span class="hljs-property">length</span>; i++) {</li><li>      <span class="hljs-keyword">let</span> printStr = weights[i].<span class="hljs-property">name</span> + <span class="hljs-string">", "</span>;</li><li>      printStr += weights[i].<span class="hljs-property">shape</span> + <span class="hljs-string">", "</span>;</li><li>      printStr += weights[i].<span class="hljs-property">dtype</span> + <span class="hljs-string">", "</span>;</li><li>      printStr += weights[i].<span class="hljs-property">dataSize</span> + <span class="hljs-string">", "</span>;</li><li>      printStr += weights[i].<span class="hljs-title function_">getData</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"MS_LITE weights: "</span>, printStr);</li><li>    }</li><li>  })</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getRawFileContent promise error is "</span> + error);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1185px;"><h3 id="updateweights12" device-type="phone,2in1,tablet,tv">updateWeights<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="updateweights12" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>updateWeights(weights: MSTensor[]): boolean</p> <p>更新模型的权重，仅用于端侧训练。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">weights</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#mstensor">MSTensor</a>[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">权重张量列表。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回是否更新权重成功的结果。true表示更新权重成功，false表示更新权重失败。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'xxx.ms'</span>;</li><li><span class="hljs-keyword">let</span> globalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>globalContext.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">modelBuffer : <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>  mindSporeLite.<span class="hljs-title function_">loadTrainModelFromBuffer</span>(modelBuffer.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>)).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel: mindSporeLite.Model</span>) =&gt;</span> {</li><li>    mindSporeLiteModel.<span class="hljs-property">trainMode</span> = <span class="hljs-literal">true</span>;</li><li>    <span class="hljs-keyword">const</span> weights = mindSporeLiteModel.<span class="hljs-title function_">getWeights</span>();</li><li>    <span class="hljs-keyword">let</span> ret = mindSporeLiteModel.<span class="hljs-title function_">updateWeights</span>(weights);</li><li>    <span class="hljs-keyword">if</span> (ret == <span class="hljs-literal">false</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MS_LITE_LOG: updateWeights failed.'</span>)</li><li>    }</li><li>  })</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getRawFileContent promise error is "</span> + error);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1299px;"><h3 id="setupvirtualbatch12" device-type="phone,2in1,tablet,tv">setupVirtualBatch<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setupvirtualbatch12" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>setupVirtualBatch(virtualBatchMultiplier: number, lr: number, momentum: number): boolean</p> <p>设置虚拟批次用于训练，仅用于端侧训练。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">virtualBatchMultiplier</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">虚拟批次乘法器，当设置值小于1时，表示禁用虚拟batch。</td> </tr> <tr><td class="cellrowborder" width="25%">lr</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">学习率。</td> </tr> <tr><td class="cellrowborder" width="25%">momentum</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">动量。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回是否设置虚拟批次成功的结果。true表示设置虚拟批次成功，false表示设置虚拟批次失败。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'xxx.ms'</span>;</li><li><span class="hljs-keyword">let</span> globalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>globalContext.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">modelBuffer : <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>  mindSporeLite.<span class="hljs-title function_">loadTrainModelFromBuffer</span>(modelBuffer.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>)).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel: mindSporeLite.Model</span>) =&gt;</span> {</li><li>    mindSporeLiteModel.<span class="hljs-property">trainMode</span> = <span class="hljs-literal">true</span>;</li><li>    <span class="hljs-keyword">let</span> ret = mindSporeLiteModel.<span class="hljs-title function_">setupVirtualBatch</span>(<span class="hljs-number">2</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">1</span>);</li><li>    <span class="hljs-keyword">if</span> (ret == <span class="hljs-literal">false</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MS_LITE setupVirtualBatch failed.'</span>)</li><li>    }</li><li>  })</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getRawFileContent promise error is "</span> + error);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1296px;"><h3 id="exportmodel12" device-type="phone,2in1,tablet,tv">exportModel<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="exportmodel12" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>exportModel(modelFile: string, quantizationType?: QuantizationType, exportInferenceOnly?: boolean, outputTensorName?: string[]): boolean</p> <p>导出训练模型，仅用于端侧训练。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.43.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">modelFile</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">导出模型的文件路径。字符串长度限制跟随文件系统。</td> </tr> <tr><td class="cellrowborder" width="25%">quantizationType</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#quantizationtype12">QuantizationType</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">量化类型，默认为NO_QUANT。</td> </tr> <tr><td class="cellrowborder" width="25%">exportInferenceOnly</td> <td class="cellrowborder" width="25%">boolean</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">是否只导出推理模型。true表示只导出推理模型，false表示导出训练和推理两个模型。默认为true。</td> </tr> <tr><td class="cellrowborder" width="25%">outputTensorName</td> <td class="cellrowborder" width="25%">string[]</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">设置导出模型的输出张量的名称。默认为空字符串数组，表示全量导出。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.43.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回是否导出训练模型成功的结果。true表示导出训练模型成功，false表示导出训练模型失败。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li><span class="hljs-keyword">let</span> newPath = <span class="hljs-string">'/newpath/to'</span>;</li><li>mindSporeLite.<span class="hljs-title function_">loadTrainModelFromFile</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel: mindSporeLite.Model</span>) =&gt;</span> {</li><li>  mindSporeLiteModel.<span class="hljs-property">trainMode</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-keyword">let</span> ret = mindSporeLiteModel.<span class="hljs-title function_">exportModel</span>(newPath + <span class="hljs-string">"/new_model.ms"</span>, mindSporeLite.<span class="hljs-property">QuantizationType</span>.<span class="hljs-property">NO_QUANT</span>, <span class="hljs-literal">true</span>);</li><li>  <span class="hljs-keyword">if</span> (ret == <span class="hljs-literal">false</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MS_LITE exportModel failed.'</span>)</li><li>  }</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1416px;"><h3 id="exportweightscollaboratewithmicro12" device-type="phone,2in1,tablet,tv">exportWeightsCollaborateWithMicro<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="exportweightscollaboratewithmicro12" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>exportWeightsCollaborateWithMicro(weightFile: string, isInference?: boolean, enableFp16?: boolean, changeableWeightsName?: string[]): boolean</p> <p>导出供<strong>micro推理</strong>使用的模型权重，仅用于端侧训练。</p> <p><strong>micro推理</strong>：MindSpore Lite针对MCUs（MicroControllerUnits）部署硬件后端，提供了一种超轻量Micro AI部署解决方案，离线阶段直接将模型生成轻量化代码，不再需要在线解析模型和图编译。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">weightFile</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">权重文件路径。字符串长度限制跟随文件系统。</td> </tr> <tr><td class="cellrowborder" width="25%">isInference</td> <td class="cellrowborder" width="25%">boolean</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">是否从推理模型中导出权重。true表示从推理模型中导出权重，目前只支持true，默认为true。</td> </tr> <tr><td class="cellrowborder" width="25%">enableFp16</td> <td class="cellrowborder" width="25%">boolean</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">浮点权重是否以float16格式保存。true表示以float16格式保存，false表示不以float16格式保存。默认为false。</td> </tr> <tr><td class="cellrowborder" width="25%">changeableWeightsName</td> <td class="cellrowborder" width="25%">string[]</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">设置可变权重的名称。默认为空字符串数组。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.44.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.44.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回是否导出供micro推理使用的模型权重成功的结果。true表示导出供micro推理使用的模型权重成功，false表示导出供micro推理使用的模型权重失败。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li><span class="hljs-keyword">let</span> microWeight = <span class="hljs-string">'/path/to/xxx.bin'</span>;</li><li>mindSporeLite.<span class="hljs-title function_">loadTrainModelFromFile</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel: mindSporeLite.Model</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> ret = mindSporeLiteModel.<span class="hljs-title function_">exportWeightsCollaborateWithMicro</span>(microWeight);</li><li>  <span class="hljs-keyword">if</span> (ret == <span class="hljs-literal">false</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'MSLITE exportWeightsCollaborateWithMicro failed.'</span>)</li><li>  }</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 230px;"><h2 id="mstensor" device-type="phone,2in1,tablet,tv">MSTensor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mstensor" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>模型张量实例。描述MSTensor对象的属性和方法。它与数组和矩阵非常相似，是MindSpore Lite网络运算中的基本数据结构。</p> <p>下例API示例中都需先使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#getinputs">getInputs()</a>获取到MSTensor实例，再通过此实例调用对应方法。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 911px;"><h3 id="属性-1" device-type="phone,2in1,tablet,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.46.3.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.46.3.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.46.3.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.46.3.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.46.3.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">name</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">张量的名称。</td> </tr> <tr><td class="cellrowborder" width="20%">shape</td> <td class="cellrowborder" width="20%">number[]</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">张量的维度数组。</td> </tr> <tr><td class="cellrowborder" width="20%">elementNum</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">张量的维度数组的长度。</td> </tr> <tr><td class="cellrowborder" width="20%">dataSize</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">张量的数据的长度。</td> </tr> <tr><td class="cellrowborder" width="20%">dtype</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#datatype">DataType</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">张量的数据类型。</td> </tr> <tr><td class="cellrowborder" width="20%">format</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-mindsporelite#format">Format</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">张量的数据排布方式。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li>mindSporeLite.<span class="hljs-title function_">loadModelFromFile</span>(modelFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteModel : mindSporeLite.Model</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> modelInputs : mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">shape</span>.<span class="hljs-title function_">toString</span>());</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">elementNum</span>.<span class="hljs-title function_">toString</span>());</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">dtype</span>.<span class="hljs-title function_">toString</span>());</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">format</span>.<span class="hljs-title function_">toString</span>());</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(modelInputs[<span class="hljs-number">0</span>].<span class="hljs-property">dataSize</span>.<span class="hljs-title function_">toString</span>());</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1082px;"><h3 id="getdata" device-type="phone,2in1,tablet,tv">getData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdata" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getData(): ArrayBuffer</p> <p>获取张量的数据。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.47.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.47.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">ArrayBuffer</td> <td class="cellrowborder" width="50%">返回张量的数据指针。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> inputName = <span class="hljs-string">'input_data.bin'</span>;</li><li><span class="hljs-keyword">let</span> globalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>globalContext.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(inputName).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (buffer : <span class="hljs-title class_">Uint8Array</span>) =&gt; {</li><li>  <span class="hljs-keyword">let</span> inputBuffer = buffer.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li>  <span class="hljs-keyword">let</span> mindSporeLiteModel : mindSporeLite.<span class="hljs-property">Model</span> = <span class="hljs-keyword">await</span> mindSporeLite.<span class="hljs-title function_">loadModelFromFile</span>(modelFile);</li><li>  <span class="hljs-keyword">let</span> modelInputs : mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  modelInputs[<span class="hljs-number">0</span>].<span class="hljs-title function_">setData</span>(inputBuffer);</li><li>  mindSporeLiteModel.<span class="hljs-title function_">predict</span>(modelInputs).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mindSporeLiteTensor : mindSporeLite.MSTensor[]</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> output = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(mindSporeLiteTensor[<span class="hljs-number">0</span>].<span class="hljs-title function_">getData</span>());</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; output.<span class="hljs-property">length</span>; i++) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(output[i].<span class="hljs-title function_">toString</span>());</li><li>    }</li><li>  })</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getRawFileContent promise error is "</span> + error);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 918px;"><h3 id="setdata" device-type="phone,2in1,tablet,tv">setData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setdata" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>setData(inputArray: ArrayBuffer): void</p> <p>设置张量的数据。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">inputArray</td> <td class="cellrowborder" width="25%">ArrayBuffer</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">张量的输入数据缓冲区。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ajs-c106="" class="highlight-div"><div _ngcontent-ajs-c106="" class="highlight-div-header"><div _ngcontent-ajs-c106="" class="highlight-div-header-left"><div _ngcontent-ajs-c106="" class="handle-button expand-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ajs-c106="" class="highlight-div-header-right"><div _ngcontent-ajs-c106="" class="handle-button ai-button"></div><div _ngcontent-ajs-c106="" class="handle-button line-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ajs-c106="" class="handle-button theme-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ajs-c106="" class="handle-button copy-button"><div _ngcontent-ajs-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ajs-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> inputName = <span class="hljs-string">'input_data.bin'</span>;</li><li><span class="hljs-keyword">let</span> globalContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>globalContext.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(inputName).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (buffer : <span class="hljs-title class_">Uint8Array</span>) =&gt; {</li><li>  <span class="hljs-keyword">let</span> inputBuffer = buffer.<span class="hljs-property">buffer</span>;</li><li>  <span class="hljs-keyword">let</span> modelFile = <span class="hljs-string">'/path/to/xxx.ms'</span>;</li><li>  <span class="hljs-keyword">let</span> mindSporeLiteModel : mindSporeLite.<span class="hljs-property">Model</span> = <span class="hljs-keyword">await</span> mindSporeLite.<span class="hljs-title function_">loadModelFromFile</span>(modelFile);</li><li>  <span class="hljs-keyword">let</span> modelInputs : mindSporeLite.<span class="hljs-property">MSTensor</span>[] = mindSporeLiteModel.<span class="hljs-title function_">getInputs</span>();</li><li>  modelInputs[<span class="hljs-number">0</span>].<span class="hljs-title function_">setData</span>(inputBuffer);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getRawFileContent promise error is "</span> + error);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 828px;"><h2 id="datatype" device-type="phone,2in1,tablet,tv">DataType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="datatype" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>张量的数据类型。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.49.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.49.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.49.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">TYPE_UNKNOWN</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">未知类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NUMBER_TYPE_INT8</td> <td class="cellrowborder" width="33.33333333333333%">32</td> <td class="cellrowborder" width="33.33333333333333%">保持Int8的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NUMBER_TYPE_INT16</td> <td class="cellrowborder" width="33.33333333333333%">33</td> <td class="cellrowborder" width="33.33333333333333%">保持Int16的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NUMBER_TYPE_INT32</td> <td class="cellrowborder" width="33.33333333333333%">34</td> <td class="cellrowborder" width="33.33333333333333%">保持Int32的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NUMBER_TYPE_INT64</td> <td class="cellrowborder" width="33.33333333333333%">35</td> <td class="cellrowborder" width="33.33333333333333%">保持Int64的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NUMBER_TYPE_UINT8</td> <td class="cellrowborder" width="33.33333333333333%">37</td> <td class="cellrowborder" width="33.33333333333333%">保持UInt8的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NUMBER_TYPE_UINT16</td> <td class="cellrowborder" width="33.33333333333333%">38</td> <td class="cellrowborder" width="33.33333333333333%">保持UInt16的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NUMBER_TYPE_UINT32</td> <td class="cellrowborder" width="33.33333333333333%">39</td> <td class="cellrowborder" width="33.33333333333333%">保持UInt32的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NUMBER_TYPE_UINT64</td> <td class="cellrowborder" width="33.33333333333333%">40</td> <td class="cellrowborder" width="33.33333333333333%">保持UInt64的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NUMBER_TYPE_FLOAT16</td> <td class="cellrowborder" width="33.33333333333333%">42</td> <td class="cellrowborder" width="33.33333333333333%">保持Float16的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NUMBER_TYPE_FLOAT32</td> <td class="cellrowborder" width="33.33333333333333%">43</td> <td class="cellrowborder" width="33.33333333333333%">保持Float32的类型。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NUMBER_TYPE_FLOAT64</td> <td class="cellrowborder" width="33.33333333333333%">44</td> <td class="cellrowborder" width="33.33333333333333%">保持Float64的类型。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 603px;"><h2 id="format" device-type="phone,2in1,tablet,tv">Format<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="format" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>张量的数据排布方式。</p> <p><strong>系统能力：</strong> SystemCapability.AI.MindSporeLite</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.50.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.50.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.50.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">DEFAULT_FORMAT</td> <td class="cellrowborder" width="33.33333333333333%">-1</td> <td class="cellrowborder" width="33.33333333333333%">未知数据排布方式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NCHW</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">数据排布方式为NCHW。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NHWC</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">数据排布方式为NHWC。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">NHWC4</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">数据排布方式为NHWC4。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">HWKC</td> <td class="cellrowborder" width="33.33333333333333%">3</td> <td class="cellrowborder" width="33.33333333333333%">数据排布方式为HWKC。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">HWCK</td> <td class="cellrowborder" width="33.33333333333333%">4</td> <td class="cellrowborder" width="33.33333333333333%">数据排布方式为HWCK。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">KCHW</td> <td class="cellrowborder" width="33.33333333333333%">5</td> <td class="cellrowborder" width="33.33333333333333%">数据排布方式为KCHW。</td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>