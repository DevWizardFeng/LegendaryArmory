<h1 _ngcontent-aia-c119="" class="doc-title ng-star-inserted" title="@ohos.app.ability.wantAgent (WantAgent模块)"> @ohos.app.ability.wantAgent (WantAgent模块) </h1>

<div _ngcontent-aia-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>WantAgent模块封装了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a>对象，允许应用程序在未来的某个时间点触发WantAgent实例执行指定操作（如启动Ability、发送公共事件等）。</p>    <p>该模块提供了创建WantAgent实例、获取WantAgent实例所属应用的包名、获取WantAgent实例所属应用的UID、主动触发WantAgent实例、判断两个WantAgent实例是否相等等功能。WantAgent的一个典型应用场景是通知处理。例如，当用户点击通知时，会触发WantAgent的<a href="/consumer/cn/doc/harmonyos-references/js-apis-app-ability-wantagent#wantagenttrigger">trigger</a>接口，并拉起目标应用。具体使用请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/notification-with-wantagent" target="_blank">通知模块</a>。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 9开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagentgetwantagent" device-type="phone,2in1,tablet,wearable,tv">wantAgent.getWantAgent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentgetwantagent" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getWantAgent(info: WantAgentInfo, callback: AsyncCallback&lt;WantAgent&gt;): void</p>     <p>创建WantAgent，使用callback异步回调。创建成功返回WantAgent对象，创建失败返回空值。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">info</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-wantagent-wantagentinfo">WantAgentInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示创建WantAgent所需的配置信息，包括目标UIAbility、操作类型、请求码等。三方应用在WantAgentInfo中只能设置本应用的UIAbility。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;WantAgent&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当创建WantAgent成功，err中code为0，data为创建的WantAgent；否则err会返回对应的错误码和错误信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000007</td>         <td class="cellrowborder" width="50%">Service busy. There are concurrent tasks. Try again later.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000151</td>         <td class="cellrowborder" width="50%">Invalid wantAgent object.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// wantAgent对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentData</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-comment">// WantAgentInfo对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentInfo</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'deviceId'</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'action1'</span>,</li><li>      <span class="hljs-attr">entities</span>: [<span class="hljs-string">'entity1'</span>],</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-string">'MIMETYPE'</span>,</li><li>      <span class="hljs-attr">uri</span>: <span class="hljs-string">'key={true,true,false}'</span>,</li><li>      <span class="hljs-attr">parameters</span>:</li><li>      {</li><li>        <span class="hljs-attr">mykey0</span>: <span class="hljs-number">2222</span>,</li><li>        <span class="hljs-attr">mykey1</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],</li><li>        <span class="hljs-attr">mykey2</span>: <span class="hljs-string">'[1, 2, 3]'</span>,</li><li>        <span class="hljs-attr">mykey3</span>: <span class="hljs-string">'ssssssssssssssssssssssssss'</span>,</li><li>        <span class="hljs-attr">mykey4</span>: [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>],</li><li>        <span class="hljs-attr">mykey5</span>: [<span class="hljs-string">'qqqqq'</span>, <span class="hljs-string">'wwwwww'</span>, <span class="hljs-string">'aaaaaaaaaaaaaaaaa'</span>],</li><li>        <span class="hljs-attr">mykey6</span>: <span class="hljs-literal">true</span>,</li><li>      }</li><li>    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span></li><li>  ],</li><li>  <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li><span class="hljs-comment">// getWantAgent回调</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getWantAgentCallback</span>(<span class="hljs-params">err: BusinessError, data: WantAgent</span>) {</li><li>  <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, code: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.message)}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    wantAgentData = data;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo, getWantAgentCallback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagentgetwantagent-1" device-type="phone,2in1,tablet,wearable,tv">wantAgent.getWantAgent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentgetwantagent-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getWantAgent(info: WantAgentInfo): Promise&lt;WantAgent&gt;</p>     <p>创建WantAgent。使用Promise异步回调。创建成功返回WantAgent对象，创建失败返回空值。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">info</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-wantagent-wantagentinfo">WantAgentInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示创建WantAgent所需的配置信息，包括目标UIAbility、操作类型、请求码等。三方应用在WantAgentInfo中只能设置本应用的UIAbility。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-app-ability-wantagent#wantagent">WantAgent</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回创建的WantAgent。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000007</td>         <td class="cellrowborder" width="50%">Service busy. There are concurrent tasks. Try again later.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000151</td>         <td class="cellrowborder" width="50%">Invalid wantAgent object.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentData</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-comment">// WantAgentInfo对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentInfo</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'deviceId'</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'action1'</span>,</li><li>      <span class="hljs-attr">entities</span>: [<span class="hljs-string">'entity1'</span>],</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-string">'MIMETYPE'</span>,</li><li>      <span class="hljs-attr">uri</span>: <span class="hljs-string">'key={true,true,false}'</span>,</li><li>      <span class="hljs-attr">parameters</span>:</li><li>      {</li><li>        <span class="hljs-attr">mykey0</span>: <span class="hljs-number">2222</span>,</li><li>        <span class="hljs-attr">mykey1</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],</li><li>        <span class="hljs-attr">mykey2</span>: <span class="hljs-string">'[1, 2, 3]'</span>,</li><li>        <span class="hljs-attr">mykey3</span>: <span class="hljs-string">'ssssssssssssssssssssssssss'</span>,</li><li>        <span class="hljs-attr">mykey4</span>: [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>],</li><li>        <span class="hljs-attr">mykey5</span>: [<span class="hljs-string">'qqqqq'</span>, <span class="hljs-string">'wwwwww'</span>, <span class="hljs-string">'aaaaaaaaaaaaaaaaa'</span>],</li><li>        <span class="hljs-attr">mykey6</span>: <span class="hljs-literal">true</span>,</li><li>      }</li><li>    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span></li><li>  ],</li><li>  <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    wantAgentData = data;</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, code: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.message)}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed! <span class="hljs-subst">${err.code}</span> <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagentgetbundlename" device-type="phone,2in1,tablet,wearable,tv">wantAgent.getBundleName<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentgetbundlename" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getBundleName(agent: WantAgent, callback: AsyncCallback&lt;string&gt;): void</p>     <p>获取WantAgent实例所属应用的包名，使用callback异步回调。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">agent</td>         <td class="cellrowborder" width="25%">WantAgent</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WantAgent对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取包名成功，err为undefined，data为创建的WantAgent；否则err会返回对应的错误码和错误信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000007</td>         <td class="cellrowborder" width="50%">Service busy. There are concurrent tasks. Try again later.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000151</td>         <td class="cellrowborder" width="50%">Invalid wantAgent object.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// wantAgent对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentData</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-comment">// WantAgentInfo对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentInfo</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'deviceId'</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'action1'</span>,</li><li>      <span class="hljs-attr">entities</span>: [<span class="hljs-string">'entity1'</span>],</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-string">'MIMETYPE'</span>,</li><li>      <span class="hljs-attr">uri</span>: <span class="hljs-string">'key={true,true,false}'</span>,</li><li>      <span class="hljs-attr">parameters</span>:</li><li>      {</li><li>        <span class="hljs-attr">mykey0</span>: <span class="hljs-number">2222</span>,</li><li>        <span class="hljs-attr">mykey1</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],</li><li>        <span class="hljs-attr">mykey2</span>: <span class="hljs-string">'[1, 2, 3]'</span>,</li><li>        <span class="hljs-attr">mykey3</span>: <span class="hljs-string">'ssssssssssssssssssssssssss'</span>,</li><li>        <span class="hljs-attr">mykey4</span>: [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>],</li><li>        <span class="hljs-attr">mykey5</span>: [<span class="hljs-string">'qqqqq'</span>, <span class="hljs-string">'wwwwww'</span>, <span class="hljs-string">'aaaaaaaaaaaaaaaaa'</span>],</li><li>        <span class="hljs-attr">mykey6</span>: <span class="hljs-literal">true</span>,</li><li>      }</li><li>    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span></li><li>  ],</li><li>  <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li><span class="hljs-comment">// getWantAgent回调</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getWantAgentCallback</span>(<span class="hljs-params">err: BusinessError, data: WantAgent</span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, code: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.message)}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    wantAgentData = data;</li><li>  }</li><li>  <span class="hljs-comment">// getBundleName回调</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">getBundleNameCallback</span> = (<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">string</span></span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getBundleName failed! <span class="hljs-subst">${err.code}</span> <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getBundleName ok! <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    wantAgent.<span class="hljs-title function_">getBundleName</span>(wantAgentData, getBundleNameCallback);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getBundleName failed! <span class="hljs-subst">${err.code}</span> <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo, getWantAgentCallback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed! <span class="hljs-subst">${err.code}</span> <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagentgetbundlename-1" device-type="phone,2in1,tablet,wearable,tv">wantAgent.getBundleName<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentgetbundlename-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getBundleName(agent: WantAgent): Promise&lt;string&gt;</p>     <p>获取WantAgent实例所属应用的包名。使用Promise异步回调。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">agent</td>         <td class="cellrowborder" width="25%">WantAgent</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WantAgent对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回获取WantAgent实例的包名。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000007</td>         <td class="cellrowborder" width="50%">Service busy. There are concurrent tasks. Try again later.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000151</td>         <td class="cellrowborder" width="50%">Invalid wantAgent object.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// wantAgent对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentData</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-comment">// WantAgentInfo对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentInfo</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'deviceId'</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'action1'</span>,</li><li>      <span class="hljs-attr">entities</span>: [<span class="hljs-string">'entity1'</span>],</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-string">'MIMETYPE'</span>,</li><li>      <span class="hljs-attr">uri</span>: <span class="hljs-string">'key={true,true,false}'</span>,</li><li>      <span class="hljs-attr">parameters</span>:</li><li>      {</li><li>        <span class="hljs-attr">mykey0</span>: <span class="hljs-number">2222</span>,</li><li>        <span class="hljs-attr">mykey1</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],</li><li>        <span class="hljs-attr">mykey2</span>: <span class="hljs-string">'[1, 2, 3]'</span>,</li><li>        <span class="hljs-attr">mykey3</span>: <span class="hljs-string">'ssssssssssssssssssssssssss'</span>,</li><li>        <span class="hljs-attr">mykey4</span>: [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>],</li><li>        <span class="hljs-attr">mykey5</span>: [<span class="hljs-string">'qqqqq'</span>, <span class="hljs-string">'wwwwww'</span>, <span class="hljs-string">'aaaaaaaaaaaaaaaaa'</span>],</li><li>        <span class="hljs-attr">mykey6</span>: <span class="hljs-literal">true</span>,</li><li>      }</li><li>    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span></li><li>  ],</li><li>  <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>:[wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li><span class="hljs-comment">// getWantAgent回调</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getWantAgentCallback</span>(<span class="hljs-params">err: BusinessError, data: WantAgent</span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, code: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.message)}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    wantAgentData = data;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    wantAgent.<span class="hljs-title function_">getBundleName</span>(wantAgentData).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>)=&gt;</span>{</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getBundleName ok! <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>)=&gt;</span>{</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getBundleName failed! <span class="hljs-subst">${err.code}</span> <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span>(err){</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getBundleName failed! <span class="hljs-subst">${err.code}</span> <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo, getWantAgentCallback);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed! <span class="hljs-subst">${err.code}</span> <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagentgetuid" device-type="phone,2in1,tablet,wearable,tv">wantAgent.getUid<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentgetuid" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getUid(agent: WantAgent, callback: AsyncCallback&lt;number&gt;): void</p>     <p>获取WantAgent实例所属应用的UID，使用callback异步回调。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">agent</td>         <td class="cellrowborder" width="25%">WantAgent</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WantAgent对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">获取WantAgent实例所属应用的UID的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000007</td>         <td class="cellrowborder" width="50%">Service busy. There are concurrent tasks. Try again later.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000151</td>         <td class="cellrowborder" width="50%">Invalid wantAgent object.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// wantAgent对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentData</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-comment">// WantAgentInfo对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentInfo</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'deviceId'</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'action1'</span>,</li><li>      <span class="hljs-attr">entities</span>: [<span class="hljs-string">'entity1'</span>],</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-string">'MIMETYPE'</span>,</li><li>      <span class="hljs-attr">uri</span>: <span class="hljs-string">'key={true,true,false}'</span>,</li><li>      <span class="hljs-attr">parameters</span>:</li><li>      {</li><li>        <span class="hljs-attr">mykey0</span>: <span class="hljs-number">2222</span>,</li><li>        <span class="hljs-attr">mykey1</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],</li><li>        <span class="hljs-attr">mykey2</span>: <span class="hljs-string">'[1, 2, 3]'</span>,</li><li>        <span class="hljs-attr">mykey3</span>: <span class="hljs-string">'ssssssssssssssssssssssssss'</span>,</li><li>        <span class="hljs-attr">mykey4</span>: [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>],</li><li>        <span class="hljs-attr">mykey5</span>: [<span class="hljs-string">'qqqqq'</span>, <span class="hljs-string">'wwwwww'</span>, <span class="hljs-string">'aaaaaaaaaaaaaaaaa'</span>],</li><li>        <span class="hljs-attr">mykey6</span>: <span class="hljs-literal">true</span>,</li><li>      }</li><li>    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span></li><li>  ],</li><li>  <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li><span class="hljs-comment">// getWantAgent回调</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getWantAgentCallback</span>(<span class="hljs-params">err: BusinessError, data: WantAgent</span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    wantAgentData = data;</li><li>  }</li><li>  <span class="hljs-comment">// getUid回调</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">getUidCallback</span> = (<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">number</span></span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getUid failed, err code: <span class="hljs-subst">${err.code}</span>, err msg: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getUid ok, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>.`</span>);</li><li>    }</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    wantAgent.<span class="hljs-title function_">getUid</span>(wantAgentData, getUidCallback);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>    <span class="hljs-keyword">let</span> msg = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getUid failed, err code: <span class="hljs-subst">${code}</span>, err msg: <span class="hljs-subst">${msg}</span>.`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo, getWantAgentCallback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> msg = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, err code: <span class="hljs-subst">${code}</span>, err msg: <span class="hljs-subst">${msg}</span>.`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagentgetuid-1" device-type="phone,2in1,tablet,wearable,tv">wantAgent.getUid<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentgetuid-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getUid(agent: WantAgent): Promise&lt;number&gt;</p>     <p>获取WantAgent实例所属应用的UID。使用Promise异步回调。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">agent</td>         <td class="cellrowborder" width="25%">WantAgent</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WantAgent对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回获取WantAgent实例所属应用的UID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000007</td>         <td class="cellrowborder" width="50%">Service busy. There are concurrent tasks. Try again later.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000151</td>         <td class="cellrowborder" width="50%">Invalid wantAgent object.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// wantAgent对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentData</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-comment">// WantAgentInfo对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentInfo</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'deviceId'</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'action1'</span>,</li><li>      <span class="hljs-attr">entities</span>: [<span class="hljs-string">'entity1'</span>],</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-string">'MIMETYPE'</span>,</li><li>      <span class="hljs-attr">uri</span>: <span class="hljs-string">'key={true,true,false}'</span>,</li><li>      <span class="hljs-attr">parameters</span>:</li><li>      {</li><li>        <span class="hljs-attr">mykey0</span>: <span class="hljs-number">2222</span>,</li><li>        <span class="hljs-attr">mykey1</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],</li><li>        <span class="hljs-attr">mykey2</span>: <span class="hljs-string">'[1, 2, 3]'</span>,</li><li>        <span class="hljs-attr">mykey3</span>: <span class="hljs-string">'ssssssssssssssssssssssssss'</span>,</li><li>        <span class="hljs-attr">mykey4</span>: [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>],</li><li>        <span class="hljs-attr">mykey5</span>: [<span class="hljs-string">'qqqqq'</span>, <span class="hljs-string">'wwwwww'</span>, <span class="hljs-string">'aaaaaaaaaaaaaaaaa'</span>],</li><li>        <span class="hljs-attr">mykey6</span>: <span class="hljs-literal">true</span>,</li><li>      }</li><li>    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span></li><li>  ],</li><li>  <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li><span class="hljs-comment">// getWantAgent回调</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getWantAgentCallback</span>(<span class="hljs-params">err: BusinessError, data: WantAgent</span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, err code: <span class="hljs-subst">${err.code}</span>, err msg: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    wantAgentData = data;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    wantAgent.<span class="hljs-title function_">getUid</span>(wantAgentData).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getUid ok, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>.`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getUid failed, err code: <span class="hljs-subst">${err.code}</span>, err msg: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>    <span class="hljs-keyword">let</span> msg = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getUid failed, err code: <span class="hljs-subst">${code}</span>, err msg: <span class="hljs-subst">${msg}</span>.`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo, getWantAgentCallback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> msg = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, err code: <span class="hljs-subst">${code}</span>, err msg: <span class="hljs-subst">${msg}</span>.`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagentcancel" device-type="phone,2in1,tablet,wearable,tv">wantAgent.cancel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentcancel" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cancel(agent: WantAgent, callback: AsyncCallback&lt;void&gt;): void</p>     <p>取消WantAgent实例，使用callback异步回调。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">agent</td>         <td class="cellrowborder" width="25%">WantAgent</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WantAgent对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消WantAgent实例的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000007</td>         <td class="cellrowborder" width="50%">Service busy. There are concurrent tasks. Try again later.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000151</td>         <td class="cellrowborder" width="50%">Invalid wantAgent object.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// wantAgent对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentData</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-comment">// WantAgentInfo对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentInfo</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'deviceId'</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'action1'</span>,</li><li>      <span class="hljs-attr">entities</span>: [<span class="hljs-string">'entity1'</span>],</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-string">'MIMETYPE'</span>,</li><li>      <span class="hljs-attr">uri</span>: <span class="hljs-string">'key={true,true,false}'</span>,</li><li>      <span class="hljs-attr">parameters</span>:</li><li>      {</li><li>        <span class="hljs-attr">mykey0</span>: <span class="hljs-number">2222</span>,</li><li>        <span class="hljs-attr">mykey1</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],</li><li>        <span class="hljs-attr">mykey2</span>: <span class="hljs-string">'[1, 2, 3]'</span>,</li><li>        <span class="hljs-attr">mykey3</span>: <span class="hljs-string">'ssssssssssssssssssssssssss'</span>,</li><li>        <span class="hljs-attr">mykey4</span>: [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>],</li><li>        <span class="hljs-attr">mykey5</span>: [<span class="hljs-string">'qqqqq'</span>, <span class="hljs-string">'wwwwww'</span>, <span class="hljs-string">'aaaaaaaaaaaaaaaaa'</span>],</li><li>        <span class="hljs-attr">mykey6</span>: <span class="hljs-literal">true</span>,</li><li>      }</li><li>    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span></li><li>  ],</li><li>  <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li><span class="hljs-comment">// getWantAgent回调</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getWantAgentCallback</span>(<span class="hljs-params">err: BusinessError, data: WantAgent</span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, err code: <span class="hljs-subst">${err.code}</span>, err msg: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    wantAgentData = data;</li><li>  }</li><li>  <span class="hljs-comment">// cancel回调</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">cancelCallback</span> = (<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">void</span></span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`cancel failed, err code: <span class="hljs-subst">${err.code}</span>, err msg: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`cancel sucecss.`</span>);</li><li>    }</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    wantAgent.<span class="hljs-title function_">cancel</span>(wantAgentData, cancelCallback);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>    <span class="hljs-keyword">let</span> msg = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`cancel failed, err code: <span class="hljs-subst">${code}</span>, err msg: <span class="hljs-subst">${msg}</span>.`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo, getWantAgentCallback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> msg = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, err code: <span class="hljs-subst">${code}</span>, err msg: <span class="hljs-subst">${msg}</span>.`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagentcancel-1" device-type="phone,2in1,tablet,wearable,tv">wantAgent.cancel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentcancel-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cancel(agent: WantAgent): Promise&lt;void&gt;</p>     <p>取消WantAgent实例。使用Promise异步回调。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">agent</td>         <td class="cellrowborder" width="25%">WantAgent</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WantAgent对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000007</td>         <td class="cellrowborder" width="50%">Service busy. There are concurrent tasks. Try again later.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000151</td>         <td class="cellrowborder" width="50%">Invalid wantAgent object.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// wantAgent对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentData</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-comment">// WantAgentInfo对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentInfo</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'deviceId'</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'action1'</span>,</li><li>      <span class="hljs-attr">entities</span>: [<span class="hljs-string">'entity1'</span>],</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-string">'MIMETYPE'</span>,</li><li>      <span class="hljs-attr">uri</span>: <span class="hljs-string">'key={true,true,false}'</span>,</li><li>      <span class="hljs-attr">parameters</span>:</li><li>      {</li><li>        <span class="hljs-attr">mykey0</span>: <span class="hljs-number">2222</span>,</li><li>        <span class="hljs-attr">mykey1</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],</li><li>        <span class="hljs-attr">mykey2</span>: <span class="hljs-string">'[1, 2, 3]'</span>,</li><li>        <span class="hljs-attr">mykey3</span>: <span class="hljs-string">'ssssssssssssssssssssssssss'</span>,</li><li>        <span class="hljs-attr">mykey4</span>: [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>],</li><li>        <span class="hljs-attr">mykey5</span>: [<span class="hljs-string">'qqqqq'</span>, <span class="hljs-string">'wwwwww'</span>, <span class="hljs-string">'aaaaaaaaaaaaaaaaa'</span>],</li><li>        <span class="hljs-attr">mykey6</span>: <span class="hljs-literal">true</span>,</li><li>      }</li><li>    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span></li><li>  ],</li><li>  <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li><span class="hljs-comment">// getWantAgent回调</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getWantAgentCallback</span>(<span class="hljs-params">err: BusinessError, data: WantAgent</span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, err code: <span class="hljs-subst">${err.code}</span>, err msg: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    wantAgentData = data;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    wantAgent.<span class="hljs-title function_">cancel</span>(wantAgentData).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'cancel success.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`cancel failed, err code: <span class="hljs-subst">${err.code}</span>, err msg: <span class="hljs-subst">${err.message}</span>.`</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>    <span class="hljs-keyword">let</span> msg = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`cancel failed, err code: <span class="hljs-subst">${code}</span>, err msg: <span class="hljs-subst">${msg}</span>.`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo, getWantAgentCallback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> msg = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, err code: <span class="hljs-subst">${code}</span>, err msg: <span class="hljs-subst">${msg}</span>.`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagenttrigger" device-type="phone,2in1,tablet,wearable,tv">wantAgent.trigger<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagenttrigger" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>trigger(agent: WantAgent, triggerInfo: TriggerInfo, callback?: AsyncCallback&lt;CompleteData&gt;): void</p>     <p>触发WantAgent实例，执行指定的操作（启动Ability、发送公共事件等）。使用callback异步回调。</p>     <p>这里所执行的操作类型，是在创建WantAgent实例时通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-wantagent-wantagentinfo">WantAgentInfo</a>参数中的actionType属性指定的。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">agent</td>         <td class="cellrowborder" width="25%">WantAgent</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WantAgent对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">triggerInfo</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-wantagent-triggerinfo">TriggerInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示触发WantAgent实例时携带的信息，如自定义的extraInfos。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-app-ability-wantagent#completedata">CompleteData</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">主动激发WantAgent实例的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">//wantAgent对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentData</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-comment">// triggerInfo</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">triggerInfo</span>: wantAgent.<span class="hljs-property">TriggerInfo</span> = {</li><li>  <span class="hljs-attr">code</span>: <span class="hljs-number">0</span> <span class="hljs-comment">//自定义结果码</span></li><li>};</li><li><span class="hljs-comment">//WantAgentInfo对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentInfo</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'deviceId'</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'action1'</span>,</li><li>      <span class="hljs-attr">entities</span>: [<span class="hljs-string">'entity1'</span>],</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-string">'MIMETYPE'</span>,</li><li>      <span class="hljs-attr">uri</span>: <span class="hljs-string">'key={true,true,false}'</span>,</li><li>      <span class="hljs-attr">parameters</span>:</li><li>      {</li><li>        <span class="hljs-attr">mykey0</span>: <span class="hljs-number">2222</span>,</li><li>        <span class="hljs-attr">mykey1</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],</li><li>        <span class="hljs-attr">mykey2</span>: <span class="hljs-string">'[1, 2, 3]'</span>,</li><li>        <span class="hljs-attr">mykey3</span>: <span class="hljs-string">'ssssssssssssssssssssssssss'</span>,</li><li>        <span class="hljs-attr">mykey4</span>: [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>],</li><li>        <span class="hljs-attr">mykey5</span>: [<span class="hljs-string">'qqqqq'</span>, <span class="hljs-string">'wwwwww'</span>, <span class="hljs-string">'aaaaaaaaaaaaaaaaa'</span>],</li><li>        <span class="hljs-attr">mykey6</span>: <span class="hljs-literal">true</span>,</li><li>      }</li><li>    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span></li><li>  ],</li><li>  <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li><span class="hljs-comment">//getWantAgent回调</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getWantAgentCallback</span>(<span class="hljs-params">err: BusinessError, data: WantAgent</span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getWantAgent failed, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    wantAgentData = data;</li><li>  }</li><li>  <span class="hljs-comment">//trigger回调</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">triggerCallback</span> = (<span class="hljs-params">err: BusinessError, data: wantAgent.CompleteData</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`trigger failed, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`trigger success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    wantAgent.<span class="hljs-title function_">trigger</span>(wantAgentData, triggerInfo, triggerCallback);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>    <span class="hljs-keyword">let</span> msg = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`trigger failed, code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${msg}</span>.`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo, getWantAgentCallback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> code = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> msg = (err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, code: <span class="hljs-subst">${code}</span>, message: <span class="hljs-subst">${msg}</span>.`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagentequal" device-type="phone,2in1,tablet,wearable,tv">wantAgent.equal<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentequal" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>equal(agent: WantAgent, otherAgent: WantAgent, callback: AsyncCallback&lt;boolean&gt;): void</p>     <p>判断两个WantAgent实例是否相等，使用callback异步回调，以此来确定是否是来自同一应用的相同操作。</p>     <p>当两个WantAgent实例由当前用户下的同一应用使用相同的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-wantagent-wantagentinfo">WantAgentInfo</a>信息创建，并且实例未被<a href="/consumer/cn/doc/harmonyos-references/js-apis-app-ability-wantagent#wantagentcancel">cancel</a>取消，这两个实例相等。在通知（携带WantAgent实例）场景，通知更新时会比较2个通知中的WantAgent实例，不相等时会把旧通知的WantAgent实例删除。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">agent</td>         <td class="cellrowborder" width="25%">WantAgent</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WantAgent对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">otherAgent</td>         <td class="cellrowborder" width="25%">WantAgent</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WantAgent对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">判断两个WantAgent实例是否相等的回调方法。返回true表示两个WantAgent实例相等，false表示两个WantAgent实例不相等。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">//wantAgent对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgent1</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgent2</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-comment">//WantAgentInfo对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentInfo</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'deviceId'</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'action1'</span>,</li><li>      <span class="hljs-attr">entities</span>: [<span class="hljs-string">'entity1'</span>],</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-string">'MIMETYPE'</span>,</li><li>      <span class="hljs-attr">uri</span>: <span class="hljs-string">'key={true,true,false}'</span>,</li><li>      <span class="hljs-attr">parameters</span>:</li><li>      {</li><li>        <span class="hljs-attr">mykey0</span>: <span class="hljs-number">2222</span>,</li><li>        <span class="hljs-attr">mykey1</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],</li><li>        <span class="hljs-attr">mykey2</span>: <span class="hljs-string">'[1, 2, 3]'</span>,</li><li>        <span class="hljs-attr">mykey3</span>: <span class="hljs-string">'ssssssssssssssssssssssssss'</span>,</li><li>        <span class="hljs-attr">mykey4</span>: [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>],</li><li>        <span class="hljs-attr">mykey5</span>: [<span class="hljs-string">'qqqqq'</span>, <span class="hljs-string">'wwwwww'</span>, <span class="hljs-string">'aaaaaaaaaaaaaaaaa'</span>],</li><li>        <span class="hljs-attr">mykey6</span>: <span class="hljs-literal">true</span>,</li><li>      }</li><li>    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span></li><li>  ],</li><li>  <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li><span class="hljs-comment">//getWantAgent回调</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getWantAgentCallback</span>(<span class="hljs-params">err: BusinessError, data: WantAgent</span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, code: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.message)}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    wantAgent1 = data;</li><li>    wantAgent2 = data;</li><li>  }</li><li>  <span class="hljs-comment">//equal回调</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">equalCallback</span> = (<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">boolean</span></span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`equal failed! <span class="hljs-subst">${err.code}</span> <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`equal ok! <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    wantAgent.<span class="hljs-title function_">equal</span>(wantAgent1, wantAgent2, equalCallback);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`equal failed! <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).code}</span> <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo, getWantAgentCallback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed! <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).code}</span> <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagentequal-1" device-type="phone,2in1,tablet,wearable,tv">wantAgent.equal<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentequal-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>equal(agent: WantAgent, otherAgent: WantAgent): Promise&lt;boolean&gt;</p>     <p>判断两个WantAgent实例是否相等，使用Promise异步回调，以此来确定是否是来自同一应用的相同操作。</p>     <p>当两个WantAgent实例由当前用户下的同一应用使用相同的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-wantagent-wantagentinfo">WantAgentInfo</a>信息创建，并且实例未被<a href="/consumer/cn/doc/harmonyos-references/js-apis-app-ability-wantagent#wantagentcancel">cancel</a>取消，这两个实例相等。在通知（携带WantAgent实例）场景，通知更新时会比较2个通知中的WantAgent实例，不相等时会把就旧通知的WantAgent实例删除。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">agent</td>         <td class="cellrowborder" width="25%">WantAgent</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WantAgent对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">otherAgent</td>         <td class="cellrowborder" width="25%">WantAgent</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WantAgent对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回获取判断两个WantAgent实例是否相等的结果。返回true表示两个WantAgent实例相等，false表示两个WantAgent实例不相等。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">//wantAgent对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgent1</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgent2</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-comment">//WantAgentInfo对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentInfo</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'deviceId'</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'action1'</span>,</li><li>      <span class="hljs-attr">entities</span>: [<span class="hljs-string">'entity1'</span>],</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-string">'MIMETYPE'</span>,</li><li>      <span class="hljs-attr">uri</span>: <span class="hljs-string">'key={true,true,false}'</span>,</li><li>      <span class="hljs-attr">parameters</span>:</li><li>      {</li><li>        <span class="hljs-attr">mykey0</span>: <span class="hljs-number">2222</span>,</li><li>        <span class="hljs-attr">mykey1</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],</li><li>        <span class="hljs-attr">mykey2</span>: <span class="hljs-string">'[1, 2, 3]'</span>,</li><li>        <span class="hljs-attr">mykey3</span>: <span class="hljs-string">'ssssssssssssssssssssssssss'</span>,</li><li>        <span class="hljs-attr">mykey4</span>: [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>],</li><li>        <span class="hljs-attr">mykey5</span>: [<span class="hljs-string">'qqqqq'</span>, <span class="hljs-string">'wwwwww'</span>, <span class="hljs-string">'aaaaaaaaaaaaaaaaa'</span>],</li><li>        <span class="hljs-attr">mykey6</span>: <span class="hljs-literal">true</span>,</li><li>      }</li><li>    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span></li><li>  ],</li><li>  <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li><span class="hljs-comment">//getWantAgent回调</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getWantAgentCallback</span>(<span class="hljs-params">err: BusinessError, data: WantAgent</span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, code: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.message)}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    wantAgent1 = data;</li><li>    wantAgent2 = data;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    wantAgent.<span class="hljs-title function_">equal</span>(wantAgent1, wantAgent2).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`equal ok! <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`equal failed! <span class="hljs-subst">${err.code}</span> <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`equal failed! <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).code}</span> <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo, getWantAgentCallback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed! <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).code}</span> <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagentgetoperationtype" device-type="phone,2in1,tablet,wearable,tv">wantAgent.getOperationType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentgetoperationtype" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getOperationType(agent: WantAgent, callback: AsyncCallback&lt;number&gt;): void</p>     <p>获取一个WantAgent实例的<a href="/consumer/cn/doc/harmonyos-references/js-apis-app-ability-wantagent#operationtype">OperationType</a>信息，使用callback异步回调。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">agent</td>         <td class="cellrowborder" width="25%">WantAgent</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WantAgent对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">获取一个WantAgent的OperationType信息的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000007</td>         <td class="cellrowborder" width="50%">Service busy. There are concurrent tasks. Try again later.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000015</td>         <td class="cellrowborder" width="50%">Service timeout.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000151</td>         <td class="cellrowborder" width="50%">Invalid wantAgent object.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">//wantAgent对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentData</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-comment">//WantAgentInfo对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentInfo</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'deviceId'</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'action1'</span>,</li><li>      <span class="hljs-attr">entities</span>: [<span class="hljs-string">'entity1'</span>],</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-string">'MIMETYPE'</span>,</li><li>      <span class="hljs-attr">uri</span>: <span class="hljs-string">'key={true,true,false}'</span>,</li><li>      <span class="hljs-attr">parameters</span>:</li><li>      {</li><li>        <span class="hljs-attr">mykey0</span>: <span class="hljs-number">2222</span>,</li><li>        <span class="hljs-attr">mykey1</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],</li><li>        <span class="hljs-attr">mykey2</span>: <span class="hljs-string">'[1, 2, 3]'</span>,</li><li>        <span class="hljs-attr">mykey3</span>: <span class="hljs-string">'ssssssssssssssssssssssssss'</span>,</li><li>        <span class="hljs-attr">mykey4</span>: [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>],</li><li>        <span class="hljs-attr">mykey5</span>: [<span class="hljs-string">'qqqqq'</span>, <span class="hljs-string">'wwwwww'</span>, <span class="hljs-string">'aaaaaaaaaaaaaaaaa'</span>],</li><li>        <span class="hljs-attr">mykey6</span>: <span class="hljs-literal">true</span>,</li><li>      }</li><li>    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span></li><li>  ],</li><li>  <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li><span class="hljs-comment">//getWantAgent回调</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getWantAgentCallback</span>(<span class="hljs-params">err: BusinessError, data: WantAgent</span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, code: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.message)}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    wantAgentData = data;</li><li>  }</li><li>  <span class="hljs-comment">//getOperationTypeCallback回调</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">getOperationTypeCallback</span> = (<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">number</span></span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getOperationType failed! <span class="hljs-subst">${err.code}</span> <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getOperationType ok! <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    wantAgent.<span class="hljs-title function_">getOperationType</span>(wantAgentData, getOperationTypeCallback);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getOperationTypeCallback failed! <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).code}</span> <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo, getWantAgentCallback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed! <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).code}</span> <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagentgetoperationtype-1" device-type="phone,2in1,tablet,wearable,tv">wantAgent.getOperationType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentgetoperationtype-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getOperationType(agent: WantAgent): Promise&lt;number&gt;</p>     <p>获取一个WantAgent实例的<a href="/consumer/cn/doc/harmonyos-references/js-apis-app-ability-wantagent#operationtype">OperationType</a>信息。使用Promise异步回调。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">agent</td>         <td class="cellrowborder" width="25%">WantAgent</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WantAgent对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回OperationType的结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000007</td>         <td class="cellrowborder" width="50%">Service busy. There are concurrent tasks. Try again later.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000015</td>         <td class="cellrowborder" width="50%">Service timeout.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000151</td>         <td class="cellrowborder" width="50%">Invalid wantAgent object.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-aia-c106="" class="highlight-div"><div _ngcontent-aia-c106="" class="highlight-div-header"><div _ngcontent-aia-c106="" class="highlight-div-header-left"><div _ngcontent-aia-c106="" class="handle-button expand-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-aia-c106="" class="highlight-div-header-right"><div _ngcontent-aia-c106="" class="handle-button ai-button"></div><div _ngcontent-aia-c106="" class="handle-button line-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-aia-c106="" class="handle-button theme-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-aia-c106="" class="handle-button copy-button"><div _ngcontent-aia-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-aia-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { wantAgent, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">//wantAgent对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentData</span>: <span class="hljs-title class_">WantAgent</span>;</li><li><span class="hljs-comment">//WantAgentInfo对象</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantAgentInfo</span>: wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">'deviceId'</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'action1'</span>,</li><li>      <span class="hljs-attr">entities</span>: [<span class="hljs-string">'entity1'</span>],</li><li>      <span class="hljs-attr">type</span>: <span class="hljs-string">'MIMETYPE'</span>,</li><li>      <span class="hljs-attr">uri</span>: <span class="hljs-string">'key={true,true,false}'</span>,</li><li>      <span class="hljs-attr">parameters</span>:</li><li>      {</li><li>        <span class="hljs-attr">mykey0</span>: <span class="hljs-number">2222</span>,</li><li>        <span class="hljs-attr">mykey1</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],</li><li>        <span class="hljs-attr">mykey2</span>: <span class="hljs-string">'[1, 2, 3]'</span>,</li><li>        <span class="hljs-attr">mykey3</span>: <span class="hljs-string">'ssssssssssssssssssssssssss'</span>,</li><li>        <span class="hljs-attr">mykey4</span>: [<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>],</li><li>        <span class="hljs-attr">mykey5</span>: [<span class="hljs-string">'qqqqq'</span>, <span class="hljs-string">'wwwwww'</span>, <span class="hljs-string">'aaaaaaaaaaaaaaaaa'</span>],</li><li>        <span class="hljs-attr">mykey6</span>: <span class="hljs-literal">true</span>,</li><li>      }</li><li>    } <span class="hljs-keyword">as</span> <span class="hljs-title class_">Want</span></li><li>  ],</li><li>  <span class="hljs-attr">actionType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li><span class="hljs-comment">//getWantAgent回调</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getWantAgentCallback</span>(<span class="hljs-params">err: BusinessError, data: WantAgent</span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed, code: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.code)}</span>, message: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err.message)}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    wantAgentData = data;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    wantAgent.<span class="hljs-title function_">getOperationType</span>(wantAgentData).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getOperationType ok! <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getOperationType failed! <span class="hljs-subst">${err.code}</span> <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getOperationType failed! <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).code}</span> <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo, getWantAgentCallback);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getWantAgent failed! <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).code}</span> <span class="hljs-subst">${(err <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="wantagentflags" device-type="phone,2in1,tablet,wearable,tv">WantAgentFlags<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentflags" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示WantAgent行为控制标志，用于配置WantAgent的创建和触发行为。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">ONE_TIME_FLAG</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">WantAgent仅能使用一次，trigger触发后自动cancel取消。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">NO_BUILD_FLAG</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">如果描述WantAgent对象不存在，则不创建它，直接返回null。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CANCEL_PRESENT_FLAG</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">在生成一个新的WantAgent对象前取消已存在的一个WantAgent对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">UPDATE_PRESENT_FLAG</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">使用新的WantAgent的额外数据替换已存在的WantAgent中的额外数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CONSTANT_FLAG</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">WantAgent是不可变的。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">REPLACE_ELEMENT</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">当前Want中的element属性可被WantAgent.trigger()中Want的element属性取代。当前版本暂不支持。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">REPLACE_ACTION</td>         <td class="cellrowborder" width="33.33333333333333%">6</td>         <td class="cellrowborder" width="33.33333333333333%">当前Want中的action属性可被WantAgent.trigger()中Want的action属性取代。当前版本暂不支持。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">REPLACE_URI</td>         <td class="cellrowborder" width="33.33333333333333%">7</td>         <td class="cellrowborder" width="33.33333333333333%">当前Want中的uri属性可被WantAgent.trigger()中Want的uri属性取代。当前版本暂不支持。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">REPLACE_ENTITIES</td>         <td class="cellrowborder" width="33.33333333333333%">8</td>         <td class="cellrowborder" width="33.33333333333333%">当前Want中的entities属性可被WantAgent.trigger()中Want的entities属性取代。当前版本暂不支持。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">REPLACE_BUNDLE</td>         <td class="cellrowborder" width="33.33333333333333%">9</td>         <td class="cellrowborder" width="33.33333333333333%">当前Want中的bundleName属性可被WantAgent.trigger()中Want的bundleName属性取代。当前版本暂不支持。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="operationtype" device-type="phone,2in1,tablet,wearable,tv">OperationType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="operationtype" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示WantAgent支持的操作类型。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">UNKNOWN_TYPE</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">不识别的类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">START_ABILITY</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">开启一个有页面的Ability。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">START_ABILITIES</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">开启多个有页面的Ability。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">START_SERVICE</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">开启一个无页面的Ability（仅在FA模型下生效）。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SEND_COMMON_EVENT</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">发送一个公共事件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="completedata" device-type="phone,2in1,tablet,wearable,tv">CompleteData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="completedata" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示主动触发WantAgent返回的数据。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">info</td>         <td class="cellrowborder" width="20%">WantAgent</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">触发的wantAgent。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">want</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">触发wantAgent时实际使用的want信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">finalCode</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">触发wantAgent的返回码。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">finalData</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">触发wantAgent的返回数据。返回"canceled"时表示触发失败，WantAgent实例已经被取消。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">extraInfo</td>         <td class="cellrowborder" width="20%">Record&lt;string, Object&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">额外数据。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="triggerinfo" device-type="phone,2in1,tablet,wearable,tv">TriggerInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="triggerinfo" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type TriggerInfo = _TriggerInfo</p>     <p>TriggerInfo对象。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-wantagent-triggerinfo">_TriggerInfo</a></td>         <td class="cellrowborder" width="50%">TriggerInfo对象。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="wantagentinfo" device-type="phone,2in1,tablet,wearable,tv">WantAgentInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagentinfo" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type WantAgentInfo = _WantAgentInfo</p>     <p>WantAgentInfo对象。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-wantagent-wantagentinfo">_WantAgentInfo</a></td>         <td class="cellrowborder" width="50%">WantAgentInfo对象。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="wantagent" device-type="phone,2in1,tablet,wearable,tv">WantAgent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="wantagent" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type WantAgent = object</p>     <p>WantAgent对象。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">object</td>         <td class="cellrowborder" width="50%">WantAgent对象。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>