<h1 _ngcontent-dje-c119="" class="doc-title ng-star-inserted" title="@ohos.arkui.StateManagement (状态管理)"> @ohos.arkui.StateManagement (状态管理) </h1>

<div _ngcontent-dje-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>状态管理模块提供了应用程序的数据存储能力、持久化数据管理能力、UIAbility数据存储能力和应用程序需要的环境状态、工具。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 12开始支持，后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <p>本文中T和S的含义如下：</p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.4.1.3.1.1" width="50%">类型</th>        <th align="left" class="cellrowborder" id="mcps1.3.4.1.3.1.2" width="50%">说明</th>       </tr><tr>        <td class="cellrowborder" width="50%">T</td>        <td class="cellrowborder" width="50%">Class，number，boolean，string和这些类型的数组形式。</td>       </tr>       <tr>        <td class="cellrowborder" width="50%">S</td>        <td class="cellrowborder" width="50%">number，boolean，string。</td>       </tr>           </tbody></table></div>    </div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppStorageV2</span>, <span class="hljs-title class_">PersistenceV2</span>, <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="appstoragev2" device-type="phone,2in1,tablet,wearable,tv">AppStorageV2<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="appstoragev2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>AppStorageV2具体UI使用说明，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-appstoragev2" target="_blank">AppStorageV2(应用全局的UI状态存储)</a>。</p>    </div>    <div class="tiledSection">     <h3 id="connect" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">connect<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="connect" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static connect&lt;T extends object&gt;(</p>     <p>type: TypeConstructorWithArgs&lt;T&gt;,</p>     <p>keyOrDefaultCreator?: string | StorageDefaultCreator&lt;T&gt;,</p>     <p>defaultCreator?: StorageDefaultCreator&lt;T&gt;</p>     <p>): T | undefined</p>     <p>将键值对数据储存在应用内存中。如果给定的key已经存在于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-appstoragev2" target="_blank">AppStorageV2</a>中，返回对应的值；否则，通过获取默认值的构造器构造默认值，并返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#typeconstructorwithargst">TypeConstructorWithArgs&lt;T&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的类型，若未指定key，则使用type的name作为key。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">keyOrDefaultCreator</td>         <td class="cellrowborder" width="25%">string | <a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#storagedefaultcreatort">StorageDefaultCreator&lt;T&gt;</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指定的key，或者是获取默认值的构造器。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">defaultCreator</td>         <td class="cellrowborder" width="25%">StorageDefaultCreator&lt;T&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">获取默认值的构造器。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>1、若未指定key，使用第二个参数作为默认构造器；否则使用第三个参数作为默认构造器（第二个参数非法也使用第三个参数作为默认构造器）。</p>       <p>2、确保数据已经存储在AppStorageV2中，可省略默认构造器，获取存储的数据；否则必须指定默认构造器，不指定将导致应用异常。</p>       <p>3、同一个key，connect不同类型的数据会导致应用异常，应用需要确保类型匹配。</p>       <p>4、key建议使用有意义的值，长度不超过255，使用非法字符或空字符的行为是未定义的。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.14.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.14.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T | undefined</td>         <td class="cellrowborder" width="50%">创建或获取AppStorageV2数据成功时，返回数据；否则返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppStorageV2</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">SampleClass</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">p</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>}</li><li>
</li><li><span class="hljs-comment">// 将key为SampleClass、value为new SampleClass()对象的键值对存储到内存中，并赋值给as1</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">as1</span>: <span class="hljs-title class_">SampleClass</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-title class_">AppStorageV2</span>.<span class="hljs-title function_">connect</span>(<span class="hljs-title class_">SampleClass</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SampleClass</span>());</li><li>
</li><li><span class="hljs-comment">// 将key为key_as2、value为new SampleClass()对象的键值对存储到内存中，并赋值给as2</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">as2</span>: <span class="hljs-title class_">SampleClass</span> = <span class="hljs-title class_">AppStorageV2</span>.<span class="hljs-title function_">connect</span>(<span class="hljs-title class_">SampleClass</span>, <span class="hljs-string">'key_as2'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SampleClass</span>())!;</li><li>
</li><li><span class="hljs-comment">// key为SampleClass已经在AppStorageV2中，将key为SampleClass的值返回给as3</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">as3</span>: <span class="hljs-title class_">SampleClass</span> = <span class="hljs-title class_">AppStorageV2</span>.<span class="hljs-title function_">connect</span>(<span class="hljs-title class_">SampleClass</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">SampleClass</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="remove" device-type="phone,2in1,tablet,wearable,tv">remove<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="remove" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static remove&lt;T&gt;(keyOrType: string | TypeConstructorWithArgs&lt;T&gt;): void</p>     <p>将指定的键值对数据从<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-appstoragev2" target="_blank">AppStorageV2</a>里面删除。如果指定的键值不存在于AppStorageV2中，将删除失败。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keyOrType</td>         <td class="cellrowborder" width="25%">string | TypeConstructorWithArgs&lt;T&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要删除的key；如果指定的是type类型，删除的key为type的name。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>删除AppStorageV2中不存在的key会报警告。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 假设AppStorageV2中存在key为key_as2的键，从AppStorageV2中删除该键值对数据</span></li><li><span class="hljs-title class_">AppStorageV2</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'key_as2'</span>);</li><li>
</li><li><span class="hljs-comment">// 假设AppStorageV2中存在key为SampleClass的键，从AppStorageV2中删除该键值对数据</span></li><li><span class="hljs-title class_">AppStorageV2</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-title class_">SampleClass</span>);</li><li>
</li><li><span class="hljs-comment">// 假设AppStorageV2中不存在key为key_as1的键，报警告</span></li><li><span class="hljs-title class_">AppStorageV2</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'key_as1'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="keys" device-type="phone,2in1,tablet,wearable,tv">keys<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="keys" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static keys(): Array&lt;string&gt;</p>     <p>获取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-appstoragev2" target="_blank">AppStorageV2</a>中的所有key。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="50%">所有AppStorageV2中的key。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>key在Array中的顺序是无序的，与key插入到AppStorageV2中的顺序无关。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 假设AppStorageV2中存在两个key（key_as1、key_as2），返回[key_as1、key_as2]赋值给keys</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">keys</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-title class_">AppStorageV2</span>.<span class="hljs-title function_">keys</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="persistencev2" device-type="phone,2in1,tablet,wearable,tv">PersistenceV2<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="persistencev2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#appstoragev2">AppStorageV2</a>，PersistenceV2具体UI使用说明，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-persistencev2" target="_blank">PersistenceV2(持久化存储UI状态)</a>。</p>    </div>    <div class="tiledSection">     <h3 id="globalconnect18" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">globalConnect<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="globalconnect18" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static globalConnect&lt;T extends object&gt;(type: ConnectOptions&lt;T&gt;): T | undefined</p>     <p>将键值对数据储存在应用磁盘中。如果给定的key已经存在于<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-persistencev2" target="_blank">PersistenceV2</a>中，返回对应的值；否则，会通过获取默认值的构造器构造默认值，并返回。如果globalConnect的是@ObservedV2对象，该对象@Trace属性的变化，会触发整个关联对象的自动刷新；非@Trace属性变化则不会，如有必要，可调用PersistenceV2.save接口手动存储。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#connectoptions18">ConnectOptions&lt;T&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">传入的connect参数，详细说明见ConnectOptions参数说明。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T | undefined</td>         <td class="cellrowborder" width="50%">创建或获取数据成功时，返回数据；否则返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>1、若未指定key，使用第二个参数作为默认构造器；否则使用第三个参数作为默认构造器（第二个参数非法也使用第三个参数作为默认构造器）。</p>       <p>2、确保数据已经存储在PersistenceV2中，可省略默认构造器，获取存储的数据；否则必须指定默认构造器，不指定将导致应用异常。</p>       <p>3、同一个key，globalConnect不同类型的数据会导致应用异常，应用需要确保类型匹配。</p>       <p>4、key建议使用有意义的值，可由字母、数字、下划线组成，长度不超过255，使用非法字符或空字符的行为是未定义的。</p>       <p>5、关联<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-observed-and-objectlink" target="_blank">@Observed</a>对象时，因为该类型的name属性未定义，需要指定key或者自定义name属性。</p>       <p>6、数据的存储路径为应用级别，不同module使用相同的key和相同的加密分区进行globalConnect，存储的数据副本应用仅有一份。</p>       <p>7、globalConnect使用同一个key但设置了不同的加密级别，数据为第一个使用globalConnect的加密级别，并且PersistenceV2中的数据也会存入最先使用key的加密级别。</p>       <p>8、connect和globalConnect不建议混用，因为数据副本路径不同，如果混用，则key不可以一样，否则会crash。</p>       <p>9、EL5加密要想生效，需要开发者在module.json中配置字段ohos.permission.PROTECT_SCREEN_LOCK_DATA，使用说明见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions" target="_blank">声明权限</a>。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <p>仅供开发者了解globalConnect用法，完整使用需开发者自己写出@Entry组件。</p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PersistenceV2</span>, <span class="hljs-title class_">Type</span>, <span class="hljs-title class_">ConnectOptions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { contextConstant } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">SampleChild</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">childId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">groupId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Sample</span> {</li><li>  <span class="hljs-comment">// 对于复杂对象需要@Type修饰，确保序列化成功</span></li><li>  <span class="hljs-meta">@Type</span>(<span class="hljs-title class_">SampleChild</span>)</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">father</span>: <span class="hljs-title class_">SampleChild</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SampleChild</span>();</li><li>}</li><li>
</li><li><span class="hljs-comment">// key不传入尝试用为type的name作为key，加密参数不传入默认加密等级为EL2</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">p</span>: <span class="hljs-title class_">Sample</span> = <span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">globalConnect</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">Sample</span>, <span class="hljs-attr">defaultCreator</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sample</span>() })!;</li><li>
</li><li><span class="hljs-comment">// 使用key:global1连接，传入加密等级为EL1</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">p1</span>: <span class="hljs-title class_">Sample</span> = <span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">globalConnect</span>({</li><li>  <span class="hljs-attr">type</span>: <span class="hljs-title class_">Sample</span>,</li><li>  <span class="hljs-attr">key</span>: <span class="hljs-string">'global1'</span>,</li><li>  <span class="hljs-attr">defaultCreator</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sample</span>(),</li><li>  <span class="hljs-attr">areaMode</span>: contextConstant.<span class="hljs-property">AreaMode</span>.<span class="hljs-property">EL1</span></li><li>})!;</li><li>
</li><li><span class="hljs-comment">// 使用key:global2连接，使用构造函数形式，加密参数不传入默认加密等级为EL2</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">p2</span>: <span class="hljs-title class_">Sample</span> = <span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">globalConnect</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">Sample</span>, <span class="hljs-attr">key</span>: <span class="hljs-string">'global2'</span>, <span class="hljs-attr">defaultCreator</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sample</span>() })!;</li><li>
</li><li><span class="hljs-comment">// 使用key:global3连接，直接写加密数值，范围只能在0-4，否则运行会crash,例如加密设置为EL3</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">p3</span>: <span class="hljs-title class_">Sample</span> = <span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">globalConnect</span>({</li><li>  <span class="hljs-attr">type</span>: <span class="hljs-title class_">Sample</span>,</li><li>  <span class="hljs-attr">key</span>: <span class="hljs-string">'global3'</span>,</li><li>  <span class="hljs-attr">defaultCreator</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sample</span>(),</li><li>  <span class="hljs-attr">areaMode</span>: <span class="hljs-number">3</span></li><li>})!;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="save" device-type="phone,2in1,tablet,wearable,tv">save<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="save" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static save&lt;T&gt;(keyOrType: string | TypeConstructorWithArgs&lt;T&gt;): void</p>     <p>将指定的键值对数据持久化一次。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keyOrType</td>         <td class="cellrowborder" width="25%">string | TypeConstructorWithArgs&lt;T&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要持久化的key；如果指定的是type类型，持久化的key为type的name。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于非<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-observedv2-and-trace" target="_blank">@Trace</a>的数据改变不会触发<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-persistencev2" target="_blank">PersistenceV2</a>的自动持久化，如有必要，可调用该接口持久化对应key的数据。</p>       <p>手动持久化当前内存中不处于connect状态的key是无意义的。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">SampleClass</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">p</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>}</li><li>
</li><li><span class="hljs-comment">// 假设PersistenceV2中存在key为key_as2的键，持久化该键值对数据</span></li><li><span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">save</span>(<span class="hljs-string">'key_as2'</span>);</li><li>
</li><li><span class="hljs-comment">// 假设PersistenceV2中存在key为SampleClass的键，持久化该键值对数据</span></li><li><span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">save</span>(<span class="hljs-title class_">SampleClass</span>);</li><li>
</li><li><span class="hljs-comment">// 假设PersistenceV2中不存在key为key_as1的键，无意义的操作</span></li><li><span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">save</span>(<span class="hljs-string">'key_as1'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="notifyonerror" device-type="phone,2in1,tablet,wearable,tv">notifyOnError<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="notifyonerror" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static notifyOnError(callback: PersistenceErrorCallback | undefined): void</p>     <p>在持久化失败时调用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">PersistenceErrorCallback | undefined</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">持久化失败时调用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 持久化失败时调用</span></li><li><span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">notifyOnError</span>(<span class="hljs-function">(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, reason: <span class="hljs-built_in">string</span>, msg: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error key: <span class="hljs-subst">${key}</span>, reason: <span class="hljs-subst">${reason}</span>, message: <span class="hljs-subst">${msg}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="connectoptions18" device-type="phone,2in1,tablet,wearable,tv">ConnectOptions<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="connectoptions18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>globalConnect参数类型。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">type</td>         <td class="cellrowborder" width="20%">TypeConstructorWithArgs&lt;T&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">指定的类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">key</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">传入的key，不传则使用type的名字作为key。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">defaultCreator</td>         <td class="cellrowborder" width="20%">StorageDefaultCreator&lt;T&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">默认数据的构造器，建议传递，如果globalConnect是第一次连接key，不传会报错。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">areaMode</td>         <td class="cellrowborder" width="20%">contextConstant.AreaMode</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">加密级别：EL1-EL5，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/application-context-stage#获取和修改加密分区" target="_blank">加密级别</a>，对应数值：0-4，不传时默认为EL2，不同加密级别对应不同的加密分区，即不同的存储路径，传入的加密等级数值不在0-4会直接运行crash。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="uiutils" device-type="phone,2in1,tablet,wearable,tv">UIUtils<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="uiutils" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>UIUtils提供一些方法，用于处理状态管理相关的数据转换。</p>    </div>    <div class="tiledSection">     <h3 id="gettarget" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">getTarget<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gettarget" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static getTarget&lt;T extends object&gt;(source: T): T</p>     <p>从状态管理框架包裹的代理对象中获取原始对象。详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-gettarget" target="_blank">getTarget接口：获取状态管理框架代理前的原始对象</a>。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">source</td>         <td class="cellrowborder" width="25%">T</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">数据源对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">数据源对象去除状态管理框架所加代理后的原始对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">NonObservedClass</span> {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Tom'</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">nonObservedClass</span>: <span class="hljs-title class_">NonObservedClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NonObservedClass</span>();</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">someClass</span>: <span class="hljs-title class_">NonObservedClass</span> = nonObservedClass;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`this.someClass === nonObservedClass: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.someClass === nonObservedClass}</span>`</span>) <span class="hljs-comment">// false</span></li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`UIUtils.getTarget(this.someClass) === nonObservedClass: <span class="hljs-subst">${UIUtils.getTarget(<span class="hljs-variable language_">this</span>.someClass) ===</span></span></li><li><span class="hljs-string">        nonObservedClass}</span>`) <span class="hljs-comment">// true</span></li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="makeobserved" device-type="phone,2in1,tablet,wearable,tv">makeObserved<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="makeobserved" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static makeObserved&lt;T extends object&gt;(source: T): T</p>     <p>将普通不可观察数据变为可观察数据。详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-makeobserved" target="_blank">makeObserved接口：将非观察数据变为可观察数据</a>。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">source</td>         <td class="cellrowborder" width="25%">T</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>数据源对象。支持非@Observed和@ObservedV2装饰的class，JSON.parse返回的Object和@Sendable修饰的class。</p>          <p>支持Array、Map、Set和Date。</p>          <p>支持collection.Array, collection.Set和collection.Map。</p>          <p>具体使用规则，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-makeobserved" target="_blank">makeObserved接口：将非观察数据变为可观察数据</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">可观察的数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">NonObservedClass</span> {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Tom'</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">observedClass</span>: <span class="hljs-title class_">NonObservedClass</span> = <span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">makeObserved</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">NonObservedClass</span>());</li><li>  <span class="hljs-attr">nonObservedClass</span>: <span class="hljs-title class_">NonObservedClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NonObservedClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`observedClass: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.observedClass.name}</span>`</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Jane'</span>; <span class="hljs-comment">// 刷新</span></li><li>        })</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`observedClass: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.nonObservedClass.name}</span>`</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">nonObservedClass</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Jane'</span>; <span class="hljs-comment">// 不刷新</span></li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="enablev2compatibility19" device-type="phone,2in1,tablet,wearable,tv">enableV2Compatibility<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enablev2compatibility19" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static enableV2Compatibility&lt;T extends object&gt;(source: T): T</p>     <p>使V1的状态变量能够在@ComponentV2中观察，主要应用于状态管理V1、V2混用场景。详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-v1-v2-mixusage" target="_blank">状态管理V1V2混用文档</a>。</p>     <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">source</td>         <td class="cellrowborder" width="25%">T</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">数据源，仅支持V1状态数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">如果数据源是V1的状态数据，则返回能够在@ComponentV2中观察的数据。否则返回数据源本身。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Observed</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ObservedClass</span> {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Tom'</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">CompV1</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">observedClass</span>: <span class="hljs-title class_">ObservedClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObservedClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`@State observedClass: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.observedClass.name}</span>`</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'State'</span>; <span class="hljs-comment">// 刷新</span></li><li>        })</li><li>      <span class="hljs-comment">// 将V1的状态变量使能V2的观察能力</span></li><li>      <span class="hljs-title class_">CompV2</span>({ <span class="hljs-attr">observedClass</span>: <span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">enableV2Compatibility</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>) })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">CompV2</span> {</li><li>  <span class="hljs-meta">@Param</span> <span class="hljs-attr">observedClass</span>: <span class="hljs-title class_">ObservedClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObservedClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// V1状态变量在使能V2观察能力后，可以在V2观察第一层的变化</span></li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`@Param observedClass: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.observedClass.name}</span>`</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Param'</span>; <span class="hljs-comment">// 刷新</span></li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="makev1observed19" device-type="phone,2in1,tablet,wearable,tv">makeV1Observed<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="makev1observed19" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static makeV1Observed&lt;T extends object&gt;(source: T): T</p>     <p>将不可观察的对象包装成状态管理V1可观察的对象，其能力等同于@Observed，可初始化@ObjectLink。</p>     <p>该接口可搭配<a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#enablev2compatibility19">enableV2Compatibility</a>应用于状态管理V1和V2混用场景，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-v1-v2-mixusage" target="_blank">状态管理V1V2混用文档</a>。</p>     <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">source</td>         <td class="cellrowborder" width="25%">T</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>数据源。支持普通class、Array、Map、Set、Date类型。</p>          <p>不支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-arkts-collections">collections类型</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable" target="_blank">@Sendable</a>修饰的class。</p>          <p>不支持undefined和null。不支持状态管理V2的数据和<a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#makeobserved">makeObserved</a>的返回值。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">对于支持的入参类型，返回状态管理V1的观察数据。对于不支持的入参类型，返回数据源对象本身。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer</span> {</li><li>  <span class="hljs-attr">outerValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'outer'</span>;</li><li>  <span class="hljs-attr">inner</span>: <span class="hljs-title class_">Inner</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">inner: Inner</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">inner</span> = inner;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner</span> {</li><li>  <span class="hljs-attr">interValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'inner'</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">outer</span>: <span class="hljs-title class_">Outer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer</span>(<span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">makeV1Observed</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner</span>()));</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// makeV1Observed的返回值可初始化@ObjectLink</span></li><li>      <span class="hljs-title class_">Child</span>({ <span class="hljs-attr">inner</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">outer</span>.<span class="hljs-property">inner</span> })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Child</span> {</li><li>  <span class="hljs-meta">@ObjectLink</span> <span class="hljs-attr">inner</span>: <span class="hljs-title class_">Inner</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.inner.interValue}</span>`</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">inner</span>.<span class="hljs-property">interValue</span> += <span class="hljs-string">'!'</span>;</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="makebinding20" device-type="phone,2in1,tablet,wearable,tv">makeBinding<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="makebinding20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static makeBinding&lt;T&gt;(getter: GetterCallback&lt;T&gt;): Binding&lt;T&gt;</p>     <p>创建只读的单向数据绑定实例，用于构建@Builder函数中参数类型为Binding的对应实参。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">getter</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#gettercallback20">GetterCallback&lt;T&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">获取值的回调函数，每次访问值都会重新执行函数，获取最新值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#bindingt20">Binding&lt;T&gt;</a></td>         <td class="cellrowborder" width="50%">仅包含一个value属性，用于获取当前绑定的值。只能读取值，不能直接修改。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Binding</span>, <span class="hljs-title class_">MutableBinding</span>, <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomButton</span>(<span class="hljs-params">num1: Binding&lt;<span class="hljs-built_in">number</span>&gt;</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">`Custom Button: <span class="hljs-subst">${num1.value}</span>`</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// num1.value += 1; 会报错，Binding类型不支持修改</span></li><li>      })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">CompV2</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>;</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number2</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'parent component'</span>)</li><li>
</li><li>      <span class="hljs-title class_">CustomButton</span>(</li><li>        <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">         * 创建只读绑定实例</span></li><li><span class="hljs-comment">         * <span class="hljs-doctag">@param</span> <span class="hljs-variable">getter</span> - 返回this.number1的函数</span></li><li><span class="hljs-comment">         * <span class="hljs-doctag">@returns</span> 只读的Binding&lt;number&gt;对象</span></li><li><span class="hljs-comment">         *</span></li><li><span class="hljs-comment">         * 特点：</span></li><li><span class="hljs-comment">         * 1. 每次访问.value时重新计算</span></li><li><span class="hljs-comment">         * 2. 不能直接修改值</span></li><li><span class="hljs-comment">         */</span></li><li>        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-built_in">number</span>&gt;(</li><li>          <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">number1</span> <span class="hljs-comment">// GetterCallback</span></li><li>        )</li><li>      )</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="makebinding20-1" device-type="phone,2in1,tablet,wearable,tv">makeBinding<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="makebinding20-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static makeBinding&lt;T&gt;(getter: GetterCallback&lt;T&gt;, setter: SetterCallback&lt;T&gt;): MutableBinding&lt;T&gt;</p>     <p>创建可修改的双向数据绑定实例，用于构建@Builder函数中参数类型为MutableBinding的对应实参。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">getter</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#gettercallback20">GetterCallback&lt;T&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">获取值的回调函数，每次访问值都会重新执行函数，获取最新值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">setter</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#settercallback20">SetterCallback&lt;T&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">定义如何更新值，当.value被修改时自动调用此函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#mutablebindingt20">MutableBinding&lt;T&gt;</a></td>         <td class="cellrowborder" width="50%">包含一个value属性，支持通过.value读取和修改数据，设置值时会检查类型是否匹配泛型T。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Binding</span>, <span class="hljs-title class_">MutableBinding</span>, <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomButton</span>(<span class="hljs-params">num2: MutableBinding&lt;<span class="hljs-built_in">number</span>&gt;</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">`Custom Button: <span class="hljs-subst">${num2.value}</span>`</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// MutableBinding类型支持修改</span></li><li>        num2.<span class="hljs-property">value</span> += <span class="hljs-number">1</span>;</li><li>      })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">CompV2</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>;</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number2</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'parent component'</span>)</li><li>
</li><li>      <span class="hljs-title class_">CustomButton</span>(</li><li>        <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">         * 创建可变绑定</span></li><li><span class="hljs-comment">         * <span class="hljs-doctag">@param</span> <span class="hljs-variable">getter</span> - 返回this.number2的函数</span></li><li><span class="hljs-comment">         * <span class="hljs-doctag">@param</span> <span class="hljs-variable">setter</span> - 当绑定值修改时调用的回调</span></li><li><span class="hljs-comment">         * <span class="hljs-doctag">@returns</span> 可变的MutableBinding&lt;number&gt;对象</span></li><li><span class="hljs-comment">         *</span></li><li><span class="hljs-comment">         * 特点：</span></li><li><span class="hljs-comment">         * 1. 支持读取和写入操作</span></li><li><span class="hljs-comment">         * 2. 修改.value时会自动调用setter回调</span></li><li><span class="hljs-comment">         */</span></li><li>        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-built_in">number</span>&gt;(</li><li>          <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">number2</span>, <span class="hljs-comment">// GetterCallback</span></li><li>          <span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">number2</span> = val;</li><li>          }) <span class="hljs-comment">// SetterCallback</span></li><li>      )</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="addmonitor20" device-type="phone,2in1,tablet,wearable,tv">addMonitor<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="addmonitor20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static addMonitor(target: object, path: string | string[], monitorCallback: MonitorCallback, options?: MonitorOptions): void</p>     <p>给状态管理V2的状态变量动态添加监听方法，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-addmonitor-clearmonitor" target="_blank">addMonitor/clearMonitor</a>。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">target</td>         <td class="cellrowborder" width="25%">object</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>目标对象，仅支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-componentv2" target="_blank">@ComponentV2</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-observedv2-and-trace" target="_blank">@ObservedV2</a>实例。</p>          <p>对于不支持的类型，会抛出运行时错误，错误码见表格。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">path</td>         <td class="cellrowborder" width="25%">string | string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>添加监听的变量名路径。可指定一个路径或者传入string数组用于一次性指定多个监听的变量路径。</p>          <p>仅支持string和string数组，对于不支持的类型，会抛出运行时错误，错误码见表格。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">monitorCallback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#monitorcallback20">MonitorCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>给对应的状态变量注册的监听函数，即path路径对应的状态变量改变时，会回调对应的函数。</p>          <p>对于不支持的类型，会抛出运行时错误，错误码见表格。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#monitoroptions20">MonitorOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">监听函数的配置项，具体可见<a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#monitoroptions20">MonitorOptions</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-statemanagement">状态管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">130000</td>         <td class="cellrowborder" width="50%">The target is not a custom component instance or V2 class instance.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">130001</td>         <td class="cellrowborder" width="50%">The path is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">130002</td>         <td class="cellrowborder" width="50%">monitorCallback is not a function or an anonymous function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>下面的示例：</p>     <ol>      <li>在ObservedClass的构造方法里，添加对name属性的同步监听回调onChange。</li>      <li>点击Text组件，将name改为Jack和Jane，触发两次onChange回调，打印日志如下。</li>     </ol>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-vbnet" data-highlighted="yes"><ol class="linenums"><li>ObservedClass <span class="hljs-keyword">property</span> name change <span class="hljs-keyword">from</span> Tom <span class="hljs-keyword">to</span> Jack</li><li>ObservedClass <span class="hljs-keyword">property</span> name change <span class="hljs-keyword">from</span> Jack <span class="hljs-keyword">to</span> Jane</li></ol></pre></div></div>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ObservedClass</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Tom'</span>;</li><li>
</li><li>  <span class="hljs-title function_">onChange</span>(<span class="hljs-params">mon: IMonitor</span>) {</li><li>    mon.<span class="hljs-property">dirty</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">path: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`ObservedClass property <span class="hljs-subst">${path}</span> change from <span class="hljs-subst">${mon.value(path)?.before}</span> to <span class="hljs-subst">${mon.value(path)?.now}</span>`</span>);</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 给当前ObservedClass的实例this添加对属性name的监听回调this.onChange，且当前监听回调是同步监听</span></li><li>    <span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">addMonitor</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-string">'name'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onChange</span>, { <span class="hljs-attr">isSynchronous</span>: <span class="hljs-literal">true</span> });</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">observedClass</span>: <span class="hljs-title class_">ObservedClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObservedClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`name: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.observedClass.name}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Jack'</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Jane'</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="clearmonitor20" device-type="phone,2in1,tablet,wearable,tv">clearMonitor<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearmonitor20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static clearMonitor(target: object, path: string | string[], monitorCallback?: MonitorCallback): void</p>     <p>删除通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#addmonitor20">addMonitor</a>给状态管理V2的状态变量添加的监听方法，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-addmonitor-clearmonitor" target="_blank">addMonitor/clearMonitor</a>。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">target</td>         <td class="cellrowborder" width="25%">object</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>目标对象，仅支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-componentv2" target="_blank">@ComponentV2</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-new-observedv2-and-trace" target="_blank">@ObservedV2</a>实例。</p>          <p>对于不支持的类型，会抛出运行时错误，错误码见表格。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">path</td>         <td class="cellrowborder" width="25%">string | string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>删除监听的变量名路径。可指定一个路径或者传入string数组用于一次性指定删除多个状态变量的监听函数。</p>          <p>仅支持string和数组，对于不支持的类型，会抛出运行时错误，错误码见表格。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">monitorCallback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#monitorcallback20">MonitorCallback</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>指定被删除的监听函数。</p>          <p>当开发者不传此参数时，将删除path对应变量注册的所有监听函数。</p>          <p>对于不支持的类型，会抛出运行时错误，错误码见表格。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-statemanagement">状态管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">130000</td>         <td class="cellrowborder" width="50%">The target is not a custom component instance or V2 class instance.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">130001</td>         <td class="cellrowborder" width="50%">The path is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">130002</td>         <td class="cellrowborder" width="50%">monitorCallback is not a function or an anonymous function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>在下面的示例中：</p>     <ol>      <li>在ObservedClass的构造方法中，添加对age属性的同步监听回调onChange。</li>      <li>点击Text组件，触发age自增，onChange的监听回调函数被触发。打印日志如下。</li>     </ol>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-vbnet" data-highlighted="yes"><ol class="linenums"><li>ObservedClass <span class="hljs-keyword">property</span> age change <span class="hljs-keyword">from</span> <span class="hljs-number">10</span> <span class="hljs-keyword">to</span> <span class="hljs-number">11</span></li></ol></pre></div></div>     <ol>      <li>点击clear monitor，删除age的监听函数onChange。</li>      <li>再次点击Text组件，触发age自增，onChange不会被触发。</li>     </ol>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ObservedClass</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>
</li><li>  <span class="hljs-title function_">onChange</span>(<span class="hljs-params">mon: IMonitor</span>) {</li><li>    mon.<span class="hljs-property">dirty</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">path: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`ObservedClass property <span class="hljs-subst">${path}</span> change from <span class="hljs-subst">${mon.value(path)?.before}</span> to <span class="hljs-subst">${mon.value(path)?.now}</span>`</span>);</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 给当前ObservedClass的实例this添加对属性name的监听回调this.onChange，且当前监听回调是同步监听</span></li><li>    <span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">addMonitor</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-string">'age'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onChange</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">observedClass</span>: <span class="hljs-title class_">ObservedClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObservedClass</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`age: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.observedClass.age}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 点击触发age++，触发onChange回调</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>.<span class="hljs-property">age</span>++;</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'clear monitor'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 点击clearMonitor，删除this.observedClass中age的监听函数onChange</span></li><li>          <span class="hljs-comment">// 再次点击触发age++，没有触发监听函数onChange</span></li><li>          <span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">clearMonitor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>, <span class="hljs-string">'age'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>.<span class="hljs-property">onChange</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="monitoroptions20" device-type="phone,2in1,tablet,wearable,tv">MonitorOptions<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="monitoroptions20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#addmonitor20">addMonitor</a>的可选参数，用于配置回调类型。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">isSynchronous</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">配置当前回调函数否是为同步回调。true为同步回调。默认值为false，即异步回调。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="monitorcallback20" device-type="phone,2in1,tablet,wearable,tv">MonitorCallback<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="monitorcallback20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type MonitorCallback = (monitorValue: IMonitor) =&gt; void</p>     <p>参数为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-state-management-watch-monitor#imonitor12">IMonitor</a>类型的监听回调函数。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">monitorValue</td>         <td class="cellrowborder" width="25%">IMonitor</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数传入的变化信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="storagedefaultcreatort" device-type="phone,2in1,tablet,wearable,tv">StorageDefaultCreator&lt;T&gt;<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="storagedefaultcreatort" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type StorageDefaultCreator&lt;T&gt; = () =&gt; T</p>     <p>返回默认构造器的函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">默认构造器执行得到的返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PersistenceV2</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">SampleClass</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">FatherSampleClass</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">sampleClass</span>: <span class="hljs-title class_">SampleClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SampleClass</span>();</li><li>}</li><li>
</li><li><span class="hljs-comment">// 将key为SampleClass、value为new SampleClass()对象的键值对持久化，并赋值给source</span></li><li><span class="hljs-comment">// StorageDefaultCreator 指的是 () =&gt; new FatherSampleClass()</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">source</span>: <span class="hljs-title class_">FatherSampleClass</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">connect</span>(<span class="hljs-title class_">FatherSampleClass</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FatherSampleClass</span>());</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">SampleComp</span> {</li><li>  <span class="hljs-attr">data</span>: <span class="hljs-title class_">FatherSampleClass</span> | <span class="hljs-literal">undefined</span> = source;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.data?.sampleClass.id}</span>`</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="typeconstructorwithargst" device-type="phone,2in1,tablet,wearable,tv">TypeConstructorWithArgs&lt;T&gt;<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="typeconstructorwithargst" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>含有任意入参的类构造器。</p>    </div>    <div class="tiledSection">     <h3 id="new" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">new<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="new" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>new(...args: any): T</p>     <p>创建并返回一个指定类型T的实例。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">...args</td>         <td class="cellrowborder" width="25%">any</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">函数入参。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">T类型的实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PersistenceV2</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li>  <span class="hljs-comment">// TypeConstructorWithArgs 指的是 SampleClass</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">SampleClass</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">FatherSampleClass</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">sampleClass</span>: <span class="hljs-title class_">SampleClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SampleClass</span>();</li><li>}</li><li>
</li><li><span class="hljs-comment">// 将key为SampleClass、value为new SampleClass()对象的键值对持久化，并赋值给source</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">source</span>: <span class="hljs-title class_">FatherSampleClass</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">connect</span>(<span class="hljs-title class_">FatherSampleClass</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FatherSampleClass</span>());</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">SampleComp</span> {</li><li>  <span class="hljs-attr">data</span>: <span class="hljs-title class_">FatherSampleClass</span> | <span class="hljs-literal">undefined</span> = source;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.data?.sampleClass.id}</span>`</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="persistenceerrorcallback" device-type="phone,2in1,tablet,wearable,tv">PersistenceErrorCallback<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="persistenceerrorcallback" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type PersistenceErrorCallback = (key: string, reason: 'quota' | 'serialization' | 'unknown', message: string) =&gt; void</p>     <p>持久化失败时返回错误原因的回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">出错的键值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">reason</td>         <td class="cellrowborder" width="25%">'quota' | 'serialization' | 'unknown'</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">出错的原因类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">message</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">出错的更多消息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PersistenceV2</span>, <span class="hljs-title class_">Type</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">SampleChild</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Sample</span> {</li><li>  <span class="hljs-comment">// 对于复杂对象需要@Type修饰，确保序列化成功</span></li><li>  <span class="hljs-meta">@Type</span>(<span class="hljs-title class_">SampleChild</span>)</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">sampleChild</span>: <span class="hljs-title class_">SampleChild</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SampleChild</span>();</li><li>}</li><li>
</li><li><span class="hljs-comment">// 接受序列化失败的回调</span></li><li><span class="hljs-comment">// PersistenceErrorCallback 指的是 (key: string, reason: string, msg: string) =&gt; {console.error(`error key: ${key}, reason: ${reason}, message: ${msg}`);}</span></li><li><span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">notifyOnError</span>(<span class="hljs-function">(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, reason: <span class="hljs-built_in">string</span>, msg: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error key: <span class="hljs-subst">${key}</span>, reason: <span class="hljs-subst">${reason}</span>, message: <span class="hljs-subst">${msg}</span>`</span>);</li><li>});</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-comment">// 在PersistenceV2中创建一个key为Sample的键值对（如果存在，则返回PersistenceV2中的数据），并且和data关联</span></li><li>  <span class="hljs-comment">// 对于需要换connect对象的data属性，需要加@Local修饰（不建议对属性换connect的对象）</span></li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">Sample</span> = <span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">connect</span>(<span class="hljs-title class_">Sample</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sample</span>())!;</li><li>  <span class="hljs-attr">pageStack</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Index add 1 to data.id: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.data.sampleChild.id}</span>`</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">sampleChild</span>.<span class="hljs-property">id</span>++;</li><li>      })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="typeconstructort" device-type="phone,2in1,tablet,wearable,tv">TypeConstructor&lt;T&gt;<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="typeconstructort" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>类构造函数。</p>    </div>    <div class="tiledSection">     <h3 id="new-1" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">new<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="new-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>new(): T</p>     <p>创建并返回一个指定类型T的实例。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">T类型的实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PersistenceV2</span>, <span class="hljs-title class_">Type</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">SampleChild</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Sample</span> {</li><li>  <span class="hljs-comment">// 对于复杂对象需要@Type修饰，确保序列化成功</span></li><li>  <span class="hljs-comment">// TypeConstructor 指的是 SampleChild</span></li><li>  <span class="hljs-meta">@Type</span>(<span class="hljs-title class_">SampleChild</span>)</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">sampleChild</span>: <span class="hljs-title class_">SampleChild</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SampleChild</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">data</span>: <span class="hljs-title class_">Sample</span> = <span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">connect</span>(<span class="hljs-title class_">Sample</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sample</span>())!;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Index add 1 to data.id: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.data.sampleChild.id}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">sampleChild</span>.<span class="hljs-property">id</span>++;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="typedecorator" device-type="phone,2in1,tablet,wearable,tv">TypeDecorator<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="typedecorator" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type TypeDecorator = &lt;T&gt;(type: TypeConstructor&lt;T&gt;) =&gt; PropertyDecorator</p>     <p>属性装饰器。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-statemanagement#typeconstructort">TypeConstructor&lt;T&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">标记类属性的类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">PropertyDecorator</td>         <td class="cellrowborder" width="50%">属性装饰器。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PersistenceV2</span>, <span class="hljs-title class_">Type</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">SampleChild</span> {</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@ObservedV2</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Sample</span> {</li><li>  <span class="hljs-comment">// 对于复杂对象需要@Type修饰，确保序列化成功</span></li><li>  <span class="hljs-comment">// TypeDecorator 指的是 @Type</span></li><li>  <span class="hljs-meta">@Type</span>(<span class="hljs-title class_">SampleChild</span>)</li><li>  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">sampleChild</span>: <span class="hljs-title class_">SampleChild</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SampleChild</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">data</span>: <span class="hljs-title class_">Sample</span> = <span class="hljs-title class_">PersistenceV2</span>.<span class="hljs-title function_">connect</span>(<span class="hljs-title class_">Sample</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sample</span>())!;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`Index add 1 to data.id: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.data.sampleChild.id}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">sampleChild</span>.<span class="hljs-property">id</span>++;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="gettercallback20" device-type="phone,2in1,tablet,wearable,tv">GetterCallback<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gettercallback20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type GetterCallback&lt;T&gt; = () =&gt; T</p>     <p>获取值的回调方法。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">T类型的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Binding</span>, <span class="hljs-title class_">MutableBinding</span>, <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomButton</span>(<span class="hljs-params">num1: Binding&lt;<span class="hljs-built_in">number</span>&gt;</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">`Custom Button: <span class="hljs-subst">${num1.value}</span>`</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// num1.value += 1; 会报错，Binding类型不支持修改</span></li><li>      })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">CompV2</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>;</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number2</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'parent component'</span>)</li><li>
</li><li>      <span class="hljs-title class_">CustomButton</span>(</li><li>        <span class="hljs-comment">// 对于UIUtils.makeBinding函数的第一个参数需要传入GetterCallback</span></li><li>        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-built_in">number</span>&gt;(</li><li>          <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">number1</span> <span class="hljs-comment">// GetterCallback</span></li><li>        )</li><li>      )</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="settercallback20" device-type="phone,2in1,tablet,wearable,tv">SetterCallback<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="settercallback20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type SetterCallback&lt;T&gt; = (newValue: T) =&gt; void</p>     <p>设置值的回调方法。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">newValue</td>         <td class="cellrowborder" width="25%">T</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">类型为T的参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Binding</span>, <span class="hljs-title class_">MutableBinding</span>, <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomButton</span>(<span class="hljs-params">num2: MutableBinding&lt;<span class="hljs-built_in">number</span>&gt;</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">`Custom Button: <span class="hljs-subst">${num2.value}</span>`</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// MutableBinding支持可变，可以修改num2.value</span></li><li>        num2.<span class="hljs-property">value</span> += <span class="hljs-number">1</span>;</li><li>      })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">CompV2</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>;</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number2</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'parent component'</span>)</li><li>
</li><li>      <span class="hljs-title class_">CustomButton</span>(</li><li>        <span class="hljs-comment">// 对于UIUtils.makeBinding函数的第二个参数需要传入SetterCallback</span></li><li>        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-built_in">number</span>&gt;(</li><li>          <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">number2</span>, <span class="hljs-comment">// GetterCallback</span></li><li>          <span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">number2</span> = val;</li><li>          }) <span class="hljs-comment">// SetterCallback 必须提供，否则触发时会造成运行时错误</span></li><li>      )</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="bindingt20" device-type="phone,2in1,tablet,wearable,tv">Binding&lt;T&gt;<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="bindingt20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>只读数据绑定的泛型类，可以绑定任意类型的数据。</p>    </div>    <div class="tiledSection">     <h3 id="value20" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">value<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="value20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get value(): T</p>     <p>提供get访问器，用于获取绑定的值。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回值类型为泛型参数T，与Binding&lt;T&gt;定义的类型一致。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Binding</span>, <span class="hljs-title class_">MutableBinding</span>, <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomButton</span>(<span class="hljs-params">num1: Binding&lt;<span class="hljs-built_in">number</span>&gt;</span>) {</li><li>  <span class="hljs-comment">// CustomButton的第一个参数为Binding，一个只读数据绑定的泛型类</span></li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-comment">// num1.value Binding类可以使用绑定的值</span></li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">`Custom Button: <span class="hljs-subst">${num1.value}</span>`</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// num1.value += 1; 会报错，只读数据绑定的泛型类不能修改值</span></li><li>      })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">CompV2</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>;</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number2</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'parent component'</span>)</li><li>
</li><li>      <span class="hljs-title class_">CustomButton</span>(</li><li>        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-built_in">number</span>&gt;(</li><li>          <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">number1</span> <span class="hljs-comment">// GetterCallback</span></li><li>        )</li><li>      )</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="mutablebindingt20" device-type="phone,2in1,tablet,wearable,tv">MutableBinding&lt;T&gt;<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="mutablebindingt20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>可变数据绑定的泛型类，允许对绑定值进行读写操作，提供完整的get和set访问器。</p>    </div>    <div class="tiledSection">     <h3 id="value20-1" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">value<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="value20-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>set value(newValue: T)</p>     <p>提供set访问器，用于设置当前绑定值的值。构造MutableBinding类实例时必须提供set访问器，否则触发set访问器会造成运行时错误。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">newValue</td>         <td class="cellrowborder" width="25%">T</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参数类型为泛型参数T，与MutableBinding&lt;T&gt;定义的类型一致。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="value20-2" device-type="phone,2in1,tablet,wearable,tv">value<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="value20-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get value(): T</p>     <p>提供get访问器，用于获取当前绑定值。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">T</td>         <td class="cellrowborder" width="50%">返回值类型为泛型参数T，与Binding&lt;T&gt;定义的类型一致。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-dje-c106="" class="highlight-div"><div _ngcontent-dje-c106="" class="highlight-div-header"><div _ngcontent-dje-c106="" class="highlight-div-header-left"><div _ngcontent-dje-c106="" class="handle-button expand-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dje-c106="" class="highlight-div-header-right"><div _ngcontent-dje-c106="" class="handle-button ai-button"></div><div _ngcontent-dje-c106="" class="handle-button line-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dje-c106="" class="handle-button theme-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dje-c106="" class="handle-button copy-button"><div _ngcontent-dje-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dje-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Binding</span>, <span class="hljs-title class_">MutableBinding</span>, <span class="hljs-title class_">UIUtils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomButton</span>(<span class="hljs-params">num2: MutableBinding&lt;<span class="hljs-built_in">number</span>&gt;</span>) {</li><li>  <span class="hljs-comment">// CustomButton的第二个参数为MutableBinding，一个可变数据绑定的泛型类</span></li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Button</span>(<span class="hljs-string">`Custom Button: <span class="hljs-subst">${num2.value}</span>`</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// 可变数据绑定的泛型类可以修改绑定的值</span></li><li>        num2.<span class="hljs-property">value</span> += <span class="hljs-number">1</span>;</li><li>      })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@ComponentV2</span></li><li>struct <span class="hljs-title class_">CompV2</span> {</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>;</li><li>  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number2</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'parent component'</span>)</li><li>
</li><li>      <span class="hljs-title class_">CustomButton</span>(</li><li>        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-built_in">number</span>&gt;(</li><li>          <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">number2</span>, <span class="hljs-comment">// GetterCallback</span></li><li>          <span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">number2</span> = val;</li><li>          }) <span class="hljs-comment">// SetterCallback 必须提供，否则触发时会造成运行时错误</span></li><li>      )</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>