<h1 _ngcontent-tvo-c119="" class="doc-title ng-star-inserted" title="@ohos.arkui.drawableDescriptor (DrawableDescriptor)"> @ohos.arkui.drawableDescriptor (DrawableDescriptor) </h1>

<div _ngcontent-tvo-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本模块提供分层图标合成（包括前景，背景，蒙版），动图播放与控制，基础图像处理的能力。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>        <p>本模块首批接口从API version 10开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p></li>       <li>        <p>示例效果请以真机运行为准，当前DevEco Studio预览器不支持。</p></li>      </ul>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> {</li><li>  <span class="hljs-title class_">DrawableDescriptor</span>,</li><li>  <span class="hljs-title class_">LayeredDrawableDescriptor</span>,</li><li>  <span class="hljs-title class_">AnimatedDrawableDescriptor</span>,</li><li>  <span class="hljs-title class_">AnimationOptions</span>,</li><li>  <span class="hljs-title class_">AnimationController</span></li><li>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="drawabledescriptorloadedresult21" device-type="phone,2in1,tablet,wearable,tv">DrawableDescriptorLoadedResult<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="drawabledescriptorloadedresult21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>传入的图片资源或地址的加载结果。</p>     <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">imageWidth</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>图片的宽度。</p>          <p>单位：px</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">imageHeight</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>图片的高度。</p>          <p>单位：px</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnimatedDrawableDescriptor</span>, <span class="hljs-title class_">AnimationOptions</span>, <span class="hljs-title class_">DrawableDescriptor</span>, <span class="hljs-title class_">DrawableDescriptorLoadedResult</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: <span class="hljs-title class_">AnimationOptions</span> = { <span class="hljs-attr">duration</span>: <span class="hljs-number">2000</span>, <span class="hljs-attr">iterations</span>: <span class="hljs-number">1</span> };</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">drawable</span>: <span class="hljs-title class_">DrawableDescriptor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.gif'</span>), options)</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 可以提前手动加载动图资源到内存中。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">DrawableDescriptorLoadedResult</span> = drawable.<span class="hljs-title function_">loadSync</span>()</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`load result = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>)</li><li>} <span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"load failed"</span>)</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="drawabledescriptor" device-type="phone,2in1,tablet,wearable,tv">DrawableDescriptor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="drawabledescriptor" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>父类对象提供可重写的方法，包含：获取<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>能力，图片资源加载能力。</p>    </div>    <div class="tiledSection">     <h3 id="getpixelmap" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">getPixelMap<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getpixelmap" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPixelMap(): image.PixelMap</p>     <p>获取pixelMap。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">image.PixelMap</a></td>         <td class="cellrowborder" width="50%">PixelMap</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DrawableDescriptor</span>, <span class="hljs-title class_">LayeredDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span></li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span></li><li>
</li><li><span class="hljs-keyword">let</span> resManager = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>;</li><li><span class="hljs-comment">// $r('app.media.app_icon')需要替换为开发者所需的图像资源文件。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">pixmap</span>: <span class="hljs-title class_">DrawableDescriptor</span> = (resManager?.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.icon'</span>)</li><li>  .<span class="hljs-property">id</span>)) <span class="hljs-keyword">as</span> <span class="hljs-title class_">DrawableDescriptor</span>; <span class="hljs-comment">// 当传入资源id或name为普通图片时，生成DrawableDescriptor对象。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">pixmapNew</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = pixmap?.<span class="hljs-title function_">getPixelMap</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="loadsync21" device-type="phone,2in1,tablet,wearable,tv">loadSync<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="loadsync21" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>loadSync(): DrawableDescriptorLoadedResult</p>     <p>发起图片资源的同步加载，并返回加载结果。</p>     <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#drawabledescriptorloadedresult21">DrawableDescriptorLoadedResult</a></td>         <td class="cellrowborder" width="50%">图片资源的加载结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drawable-descriptor">DrawableDescriptor错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">111001</td>         <td class="cellrowborder" width="50%">resource loading failed.</td>        </tr>             </tbody></table></div>     </div>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnimatedDrawableDescriptor</span>, <span class="hljs-title class_">DrawableDescriptor</span>, <span class="hljs-title class_">DrawableDescriptorLoadedResult</span>, <span class="hljs-title class_">AnimationOptions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: <span class="hljs-title class_">AnimationOptions</span> = { <span class="hljs-attr">duration</span>: <span class="hljs-number">2000</span>, <span class="hljs-attr">iterations</span>: <span class="hljs-number">1</span> };</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">drawable</span>: <span class="hljs-title class_">DrawableDescriptor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.gif'</span>), options)</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 可以提前手动加载动图资源到内存中</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">DrawableDescriptorLoadedResult</span> = drawable.<span class="hljs-title function_">loadSync</span>()</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`load result = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>)</li><li>} <span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"load failed"</span>)</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="load21" device-type="phone,2in1,tablet,wearable,tv">load<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="load21" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>load(): Promise&lt;DrawableDescriptorLoadedResult&gt;</p>     <p>发起图片资源的异步加载，并返回加载结果。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#drawabledescriptorloadedresult21">DrawableDescriptorLoadedResult</a>&gt;</td>         <td class="cellrowborder" width="50%">图片资源的加载结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-drawable-descriptor">DrawableDescriptor错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">111001</td>         <td class="cellrowborder" width="50%">resource loading failed.</td>        </tr>             </tbody></table></div>     </div>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> {</li><li>  <span class="hljs-title class_">AnimatedDrawableDescriptor</span>,</li><li>  <span class="hljs-title class_">DrawableDescriptor</span>,</li><li>  <span class="hljs-title class_">DrawableDescriptorLoadedResult</span>,</li><li>  <span class="hljs-title class_">AnimationOptions</span></li><li>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: <span class="hljs-title class_">AnimationOptions</span> = { <span class="hljs-attr">duration</span>: <span class="hljs-number">2000</span>, <span class="hljs-attr">iterations</span>: <span class="hljs-number">1</span> };</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">drawable</span>: <span class="hljs-title class_">DrawableDescriptor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.gif'</span>), options)</li><li>drawable.<span class="hljs-title function_">load</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: DrawableDescriptorLoadedResult</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`load result = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>)</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`load failed`</span>)</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="pixelmapdrawabledescriptor12" device-type="phone,2in1,tablet,wearable,tv">PixelMapDrawableDescriptor<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pixelmapdrawabledescriptor12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>支持通过传入pixelMap创建PixelMapDrawableDescriptor对象。继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#drawabledescriptor">DrawableDescriptor</a>。</p>    </div>    <div class="tiledSection">     <h3 id="constructor12" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(src?: image.PixelMap)</p>     <p>PixelMapDrawableDescriptor的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">src</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">image.PixelMap</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">PixelMap类型参数，存储 PixelMap 图片数据。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="layereddrawabledescriptor" device-type="phone,2in1,tablet,wearable,tv">LayeredDrawableDescriptor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="layereddrawabledescriptor" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>当传入资源id或name为包含前景和背景资源的json文件时，生成LayeredDrawableDescriptor对象。继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#drawabledescriptor">DrawableDescriptor</a>。</p>     <p>drawable.json位于项目工程entry/src/main/resources/base/media目录下。定义请参考：</p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"layered-image"</span><span class="hljs-punctuation">:</span></li><li>  <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"background"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"$media:background"</span><span class="hljs-punctuation">,</span></li><li>    <span class="hljs-attr">"foreground"</span> <span class="hljs-punctuation">:</span> <span class="hljs-string">"$media:foreground"</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>     <p><strong>示例：</strong></p>     <p>使用json文件创建LayeredDrawableDescriptor，示例代码如下。</p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DrawableDescriptor</span>, <span class="hljs-title class_">LayeredDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> resManager = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>;</li><li>  <span class="hljs-comment">// $r('app.media.drawable')需要替换为开发者所需的图像资源文件。</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">layeredDrawableDescriptor</span>: <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span> =</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">resManager</span>?.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.drawable'</span>).<span class="hljs-property">id</span>);</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Image</span>((<span class="hljs-variable language_">this</span>.<span class="hljs-property">layeredDrawableDescriptor</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>) ?</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">layeredDrawableDescriptor</span> : <span class="hljs-literal">undefined</span>)</li><li>        <span class="hljs-title class_">Image</span>((<span class="hljs-variable language_">this</span>.<span class="hljs-property">layeredDrawableDescriptor</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>) ?</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">layeredDrawableDescriptor</span>?.<span class="hljs-title function_">getForeground</span>()?.<span class="hljs-title function_">getPixelMap</span>() : <span class="hljs-literal">undefined</span>)</li><li>      }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'50%'</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'50%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>使用PixelMapDrawableDescriptor创建LayeredDrawableDescriptor，示例代码如下。</p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DrawableDescriptor</span>, <span class="hljs-title class_">LayeredDrawableDescriptor</span>, <span class="hljs-title class_">PixelMapDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">fore1</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">back1</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">foregroundDraw</span>: <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">backgroundDraw</span>: <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">maskDraw</span>: <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">maskPixel</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">draw</span>: <span class="hljs-title class_">LayeredDrawableDescriptor</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// $r('app.media.foreground')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fore1</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.foreground'</span>));</li><li>    <span class="hljs-comment">// $r('app.media.background')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">back1</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.background'</span>));</li><li>    <span class="hljs-comment">// $r('app.media.ohos_icon_mask')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maskPixel</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.ohos_icon_mask'</span>));</li><li>    <span class="hljs-comment">// 使用PixelMapDrawableDescriptor创建LayeredDrawableDescriptor。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">foregroundDraw</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PixelMapDrawableDescriptor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fore1</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">backgroundDraw</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PixelMapDrawableDescriptor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">back1</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maskDraw</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PixelMapDrawableDescriptor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">maskPixel</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">draw</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">foregroundDraw</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">backgroundDraw</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">maskDraw</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">draw</span>)</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">300</span>)</li><li>      }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">"100%"</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Pink</span>)</li><li>  }</li><li>  <span class="hljs-comment">// 根据资源，通过图片框架获取pixelMap。</span></li><li>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getPixmapFromMedia</span>(<span class="hljs-params">resource: Resource</span>) {</li><li>    <span class="hljs-keyword">let</span> unit8Array = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>?.<span class="hljs-title function_">getMediaContent</span>(resource.<span class="hljs-property">id</span>);</li><li>    <span class="hljs-keyword">let</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(unit8Array?.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, unit8Array.<span class="hljs-property">buffer</span>.<span class="hljs-property">byteLength</span>));</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">createPixelMap</span>: image.<span class="hljs-property">PixelMap</span> = <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">createPixelMap</span>({</li><li>      <span class="hljs-attr">desiredPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">BGRA_8888</span></li><li>    });</li><li>    <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">release</span>();</li><li>    <span class="hljs-keyword">return</span> createPixelMap;</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="constructor12-1" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor12-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(foreground?: DrawableDescriptor, background?: DrawableDescriptor, mask?: DrawableDescriptor)</p>     <p>LayeredDrawableDescriptor的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">foreground</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#drawabledescriptor">DrawableDescriptor</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">分层图标的前景图片选项。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">background</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#drawabledescriptor">DrawableDescriptor</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">分层图标的背景图片选项。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">mask</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#drawabledescriptor">DrawableDescriptor</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">分层图标的遮罩选项。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="getforeground" device-type="phone,2in1,tablet,wearable,tv">getForeground<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getforeground" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getForeground(): DrawableDescriptor</p>     <p>获取前景的DrawableDescriptor对象。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#drawabledescriptor">DrawableDescriptor</a></td>         <td class="cellrowborder" width="50%">DrawableDescriptor对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DrawableDescriptor</span>, <span class="hljs-title class_">LayeredDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">drawableDescriptor</span>: <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getForeground</span>(): <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span> {</li><li>    <span class="hljs-keyword">let</span> resManager = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>;</li><li>    <span class="hljs-comment">// $r('app.media.drawable')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">drawable</span>: <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span> = resManager?.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.drawable'</span>).<span class="hljs-property">id</span>);</li><li>    <span class="hljs-keyword">if</span> (!drawable) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (drawable <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>) {</li><li>      <span class="hljs-keyword">let</span> layeredDrawableDescriptor = (drawable <span class="hljs-keyword">as</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>).<span class="hljs-title function_">getForeground</span>();</li><li>      <span class="hljs-keyword">return</span> layeredDrawableDescriptor;</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">drawableDescriptor</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getForeground</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">RelativeContainer</span>() {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">drawableDescriptor</span>) {</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">drawableDescriptor</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>          .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Green</span>);</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getbackground" device-type="phone,2in1,tablet,wearable,tv">getBackground<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getbackground" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getBackground(): DrawableDescriptor</p>     <p>获取背景的DrawableDescriptor对象。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#drawabledescriptor">DrawableDescriptor</a></td>         <td class="cellrowborder" width="50%">DrawableDescriptor对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DrawableDescriptor</span>, <span class="hljs-title class_">LayeredDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">drawableDescriptor</span>: <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getBackground</span>(): <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span> {</li><li>    <span class="hljs-keyword">let</span> resManager = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>;</li><li>    <span class="hljs-comment">// $r('app.media.drawable')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">drawable</span>: <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span> = resManager?.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.drawable'</span>).<span class="hljs-property">id</span>);</li><li>    <span class="hljs-keyword">if</span> (!drawable) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;</li><li>    }</li><li>    <span class="hljs-keyword">let</span> layeredDrawableDescriptor = (drawable <span class="hljs-keyword">as</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>).<span class="hljs-title function_">getBackground</span>();</li><li>    <span class="hljs-keyword">return</span> layeredDrawableDescriptor;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">drawableDescriptor</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getBackground</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">RelativeContainer</span>() {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">drawableDescriptor</span>) {</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">drawableDescriptor</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getmask" device-type="phone,2in1,tablet,wearable,tv">getMask<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getmask" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getMask(): DrawableDescriptor</p>     <p>获取蒙版的DrawableDescriptor对象。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#drawabledescriptor">DrawableDescriptor</a></td>         <td class="cellrowborder" width="50%">DrawableDescriptor对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DrawableDescriptor</span>, <span class="hljs-title class_">LayeredDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">drawableDescriptor</span>: <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getMask</span>(): <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span> {</li><li>    <span class="hljs-keyword">let</span> resManager = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>;</li><li>    <span class="hljs-comment">// $r('app.media.drawable')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">drawable</span>: <span class="hljs-title class_">DrawableDescriptor</span> | <span class="hljs-literal">undefined</span> = resManager?.<span class="hljs-title function_">getDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.drawable'</span>).<span class="hljs-property">id</span>);</li><li>    <span class="hljs-keyword">if</span> (!drawable) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;</li><li>    }</li><li>    <span class="hljs-keyword">let</span> layeredDrawableDescriptor = (drawable <span class="hljs-keyword">as</span> <span class="hljs-title class_">LayeredDrawableDescriptor</span>).<span class="hljs-title function_">getMask</span>();</li><li>    <span class="hljs-keyword">return</span> layeredDrawableDescriptor;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">drawableDescriptor</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getMask</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">RelativeContainer</span>() {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">drawableDescriptor</span>) {</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">drawableDescriptor</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getmaskclippath" device-type="phone,2in1,tablet,wearable,tv">getMaskClipPath<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getmaskclippath" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static getMaskClipPath(): string</p>     <p>LayeredDrawableDescriptor的静态方法，获取系统内置的裁切路径参数。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回裁切路径的命令字符串。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DrawableDescriptor</span>, <span class="hljs-title class_">LayeredDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-comment">// $r('app.media.icon')需要替换为开发者所需的图像资源文件。</span></li><li>        <span class="hljs-title class_">Image</span>($r(<span class="hljs-string">'app.media.icon'</span>))</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'200px'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'200px'</span>)</li><li>          .<span class="hljs-title function_">clipShape</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Path</span>({<span class="hljs-attr">commands</span>:<span class="hljs-title class_">LayeredDrawableDescriptor</span>.<span class="hljs-title function_">getMaskClipPath</span>()}))</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">`获取系统内置的裁剪路径参数：`</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-number">800</span>)</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title class_">LayeredDrawableDescriptor</span>.<span class="hljs-title function_">getMaskClipPath</span>()))</li><li>          .<span class="hljs-title function_">padding</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">20</span> })</li><li>      }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="animationoptions12" device-type="phone,2in1,tablet,wearable,tv">AnimationOptions<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="animationoptions12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>动画播放参数。包括播放时延，迭代次数，单帧播放时间，是否自动播放。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">duration</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置图片数组播放总时间。</p>          <p>PixelMap数组的默认值是每张图片播放1秒。本地图片或者应用资源的默认值是图片资源中携带的播放时延。</p>          <p>单位：毫秒</p>          <p>取值范围：[0, +∞)</p>          <p>设置负数取默认值。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">iterations</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置图片数组播放次数。</p>          <p>值为-1时表示无限播放，值为0时表示不播放，值大于0时表示有限的播放次数。</p>          <p>默认值为1。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">frameDurations<sup>21+</sup></td>         <td class="cellrowborder" width="20%">Array&lt;number&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置动图中的单帧播放时间。不设置则按照总时间播放。</p>          <p>设置的优先级高于duration，即同时设置了duration和frameDurations时，duration不生效。</p>          <p>当设置的frameDurations长度与图片的数量不一致时，按照总时间播放。</p>          <p>单位：毫秒</p>          <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">autoPlay<sup>21+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置动图是否自动播放。</p>          <p>true表示自动播放，false表示不自动播放。</p>          <p>默认值为true。</p>          <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnimationOptions</span>, <span class="hljs-title class_">AnimatedDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Example</span> {</li><li>  <span class="hljs-attr">pixelMaps</span>: <span class="hljs-title class_">Array</span>&lt;image.<span class="hljs-property">PixelMap</span>&gt; = [];</li><li>  <span class="hljs-comment">// 设置了4张图，同时设置4张图的duration。</span></li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">AnimationOptions</span> = {</li><li>    <span class="hljs-attr">duration</span>: <span class="hljs-number">2000</span>,</li><li>    <span class="hljs-attr">iterations</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">frameDurations</span>: [<span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>, <span class="hljs-number">50</span>],</li><li>    <span class="hljs-attr">autoPlay</span>: <span class="hljs-literal">true</span></li><li>  };</li><li>  <span class="hljs-meta">@State</span> animated?: <span class="hljs-title class_">DrawableDescriptor</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// $r('app.media.png1')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMaps</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.png1'</span>)));</li><li>     <span class="hljs-comment">// $r('app.media.png2')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMaps</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.png2'</span>)));</li><li>     <span class="hljs-comment">// $r('app.media.png3')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMaps</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.png3'</span>)));</li><li>     <span class="hljs-comment">// $r('app.media.png4')需要替换为开发者所需的图像资源文件。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMaps</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPixmapFromMedia</span>($r(<span class="hljs-string">'app.media.png4'</span>)));</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelMaps</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>      }</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">getPixmapFromMedia</span>(<span class="hljs-params">resource: Resource</span>) {</li><li>    <span class="hljs-keyword">let</span> unit8Array = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>?.<span class="hljs-title function_">getMediaContentSync</span>(resource.<span class="hljs-property">id</span>);</li><li>    <span class="hljs-keyword">let</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(unit8Array?.<span class="hljs-property">buffer</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, unit8Array.<span class="hljs-property">buffer</span>.<span class="hljs-property">byteLength</span>));</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">pixelMap</span>: image.<span class="hljs-property">PixelMap</span> = imageSource.<span class="hljs-title function_">createPixelMapSync</span>({</li><li>      <span class="hljs-attr">desiredPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span></li><li>    });</li><li>    imageSource.<span class="hljs-title function_">release</span>();</li><li>    <span class="hljs-keyword">return</span> pixelMap;</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="animateddrawabledescriptor12" device-type="phone,2in1,tablet,wearable,tv">AnimatedDrawableDescriptor<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="animateddrawabledescriptor12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image">Image</a>组件播放PixelMap数组或动图资源时传入AnimatedDrawableDescriptor对象，该对象继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#drawabledescriptor">DrawableDescriptor</a>。</p>    </div>    <div class="tiledSection">     <h3 id="constructor12-2" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor12-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(pixelMaps: Array&lt;image.PixelMap&gt;, options?: AnimationOptions)</p>     <p>AnimatedDrawableDescriptor的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">pixelMaps</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">image.PixelMap</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">PixelMap 数组类型参数，存储 PixelMap 图片数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#animationoptions12">AnimationOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">动画控制选项。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="constructor21" device-type="phone,2in1,tablet,wearable,tv">constructor<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor21" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(src: ResourceStr | Array&lt;image.PixelMap&gt;, options?: AnimationOptions)</p>     <p>AnimatedDrawableDescriptor的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">src</td>         <td class="cellrowborder" width="25%">ResourceStr | Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">image.PixelMap</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>动图资源地址或者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>对象构成的的数组。</p>          <p>ResourceStr当前支持的范围：应用资源Resource，沙箱路径（file://&lt;bundleName&gt;/&lt;sandboxPath&gt;），BASE64字符串。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#animationoptions12">AnimationOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">动画控制参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnimationOptions</span>, <span class="hljs-title class_">AnimatedDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Example</span> {</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">AnimationOptions</span> = { <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">iterations</span>: -<span class="hljs-number">1</span>, <span class="hljs-attr">autoPlay</span>: <span class="hljs-literal">false</span> };</li><li>  <span class="hljs-comment">// 支持传入file://xx沙箱路径和应用资源Resource。</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">animated1</span>: <span class="hljs-title class_">AnimatedDrawableDescriptor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.gif'</span>), <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>);</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">animated2</span>: <span class="hljs-title class_">AnimatedDrawableDescriptor</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> files = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">filesDir</span></li><li>    <span class="hljs-keyword">let</span> originPath = files + <span class="hljs-string">"/flower.gif"</span></li><li>    <span class="hljs-keyword">let</span> resultPath = fileUri.<span class="hljs-title function_">getUriFromPath</span>(originPath)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">animated2</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>(resultPath, { <span class="hljs-attr">iterations</span>: -<span class="hljs-number">1</span> })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animated1</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animated2</span>).<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>).<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getanimationcontroller21" device-type="phone,2in1,tablet,wearable,tv">getAnimationController<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getanimationcontroller21" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAnimationController(id?: string): AnimationController | undefined</p>     <p>获取动画控制器。</p>     <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>组件的id。</p>          <p>当<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image">Image</a>组件与AnimatedDrawableDescriptor确保1比1持有（仅传入一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image">Image</a>组件）时，id非必填；</p>          <p>若同一AnimatedDrawableDescriptor需绑定多个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image">Image</a>组件，则必须设置唯一id以准确获取对应组件的动画控制器（唯一性由开发者保证）。</p>          <p>此规则基于动画系统设计原则：动画数据可多组件共享，但各组件动画独立运行，AnimationController与组件严格1比1持有关系（一个组件一个AnimationController对象）。</p>          <p>另外，<a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#animateddrawabledescriptor12">AnimatedDrawableDescriptor</a>支持不可见时自动暂停播放功能，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-component-visible-area-change-event#onvisibleareachange">onVisibleAreaChange</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-arkui-drawabledescriptor#animationcontroller21">AnimationController</a> | undefined</td>         <td class="cellrowborder" width="50%">动画控制器对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image">Image</a>组件与AnimatedDrawableDescriptor保持1比1持有关系，示例代码如下。</p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnimationOptions</span>, <span class="hljs-title class_">AnimatedDrawableDescriptor</span>, <span class="hljs-title class_">AnimationController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Example</span> {</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">AnimationOptions</span> = { <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">iterations</span>: -<span class="hljs-number">1</span>, <span class="hljs-attr">autoPlay</span>: <span class="hljs-literal">false</span> };</li><li>  <span class="hljs-comment">// $r('app.media.gif')需要替换为开发者所需的图像资源文件。</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">animated</span>: <span class="hljs-title class_">AnimatedDrawableDescriptor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.gif'</span>), <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>);</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">borderColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>        .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"start"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> controller = <span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>.<span class="hljs-title function_">getAnimationController</span>()</li><li>          controller?.<span class="hljs-title function_">start</span>()</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"stop"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> controller = <span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>.<span class="hljs-title function_">getAnimationController</span>()</li><li>          controller?.<span class="hljs-title function_">stop</span>()</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-image">Image</a>组件与AnimatedDrawableDescriptor保持1比N持有关系，示例代码如下。</p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnimationOptions</span>, <span class="hljs-title class_">AnimatedDrawableDescriptor</span>, <span class="hljs-title class_">AnimationController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Example</span> {</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">AnimationOptions</span> = { <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">iterations</span>: -<span class="hljs-number">1</span>, <span class="hljs-attr">autoPlay</span>: <span class="hljs-literal">false</span> };</li><li>  <span class="hljs-comment">// $r('app.media.gif')需要替换为开发者所需的图像资源文件。</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">animated</span>: <span class="hljs-title class_">AnimatedDrawableDescriptor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.gif'</span>), <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>);</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">borderColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>        .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">"Component1"</span>)</li><li>      <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">borderColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Red</span>)</li><li>        .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"start"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> controller = <span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>.<span class="hljs-title function_">getAnimationController</span>(<span class="hljs-string">"Component1"</span>)</li><li>          controller?.<span class="hljs-title function_">start</span>()</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"stop"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> controller = <span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>.<span class="hljs-title function_">getAnimationController</span>(<span class="hljs-string">"Component1"</span>)</li><li>          controller?.<span class="hljs-title function_">stop</span>()</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="animationcontroller21" device-type="phone,2in1,tablet,wearable,tv">AnimationController<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="animationcontroller21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>动画控制器对象。包含控制动画播放、恢复、暂停、停止和状态查询等方法。</p>    </div>    <div class="tiledSection">     <h3 id="start21" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">start<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="start21" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start(): void</p>     <p>从首帧开始播放。</p>     <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>示例：</strong></p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnimationOptions</span>, <span class="hljs-title class_">AnimatedDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Example</span> {</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">AnimationOptions</span> = { <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">iterations</span>: -<span class="hljs-number">1</span>, <span class="hljs-attr">autoPlay</span>: <span class="hljs-literal">false</span> };</li><li>  <span class="hljs-comment">// $r('app.media.gif')需要替换为开发者所需的图像资源文件。</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">animated</span>: <span class="hljs-title class_">AnimatedDrawableDescriptor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.gif'</span>), <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>);</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> controller = <span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>.<span class="hljs-title function_">getAnimationController</span>()</li><li>          <span class="hljs-comment">// 可以通过start启动动图播放。</span></li><li>          controller?.<span class="hljs-title function_">start</span>()</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="stop21" device-type="phone,2in1,tablet,wearable,tv">stop<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop21" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(): void</p>     <p>停止动图的播放并回到首帧。</p>     <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>示例：</strong></p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnimationOptions</span>, <span class="hljs-title class_">AnimatedDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Example</span> {</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">AnimationOptions</span> = { <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">iterations</span>: -<span class="hljs-number">1</span> };</li><li>  <span class="hljs-comment">// $r('app.media.gif')需要替换为开发者所需的图像资源文件。</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">animated</span>: <span class="hljs-title class_">AnimatedDrawableDescriptor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.gif'</span>), <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>);</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> controller = <span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>.<span class="hljs-title function_">getAnimationController</span>()</li><li>          <span class="hljs-comment">// 可以在动图播放时，通过stop停下播放并回到动图的首帧。</span></li><li>          controller?.<span class="hljs-title function_">stop</span>()</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="resume21" device-type="phone,2in1,tablet,wearable,tv">resume<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resume21" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>resume(): void</p>     <p>在当前帧恢复播放动图。</p>     <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>示例：</strong></p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnimationOptions</span>, <span class="hljs-title class_">AnimatedDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Example</span> {</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">AnimationOptions</span> = { <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">iterations</span>: -<span class="hljs-number">1</span> };</li><li>  <span class="hljs-comment">// $r('app.media.gif')需要替换为开发者所需的图像资源文件。</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">animated</span>: <span class="hljs-title class_">AnimatedDrawableDescriptor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.gif'</span>), <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>);</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> controller = <span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>.<span class="hljs-title function_">getAnimationController</span>()</li><li>          <span class="hljs-comment">// 可以在动图暂停或停止时从当前帧开始播放。</span></li><li>          controller?.<span class="hljs-title function_">resume</span>()</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="pause21" device-type="phone,2in1,tablet,wearable,tv">pause<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pause21" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pause(): void</p>     <p>暂停动图的播放，保持在当前帧。</p>     <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>示例：</strong></p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnimationOptions</span>, <span class="hljs-title class_">AnimatedDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Example</span> {</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">AnimationOptions</span> = { <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">iterations</span>: -<span class="hljs-number">1</span> };</li><li>  <span class="hljs-comment">// $r('app.media.gif')需要替换为开发者所需的图像资源文件。</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">animated</span>: <span class="hljs-title class_">AnimatedDrawableDescriptor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.gif'</span>), <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>);</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> controller = <span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>.<span class="hljs-title function_">getAnimationController</span>()</li><li>          <span class="hljs-comment">// 可以在动图播放时，暂停播放并保持在当前帧。</span></li><li>          controller?.<span class="hljs-title function_">pause</span>()</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getstatus21" device-type="phone,2in1,tablet,wearable,tv">getStatus<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getstatus21" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getStatus(): AnimationStatus</p>     <p>获取当前动图播放的状态。</p>     <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-appendix-enums#animationstatus">AnimationStatus</a></td>         <td class="cellrowborder" width="50%">动图的播放状态。包含4种状态：初始态、播放态、暂停态、停止态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tvo-c106="" class="highlight-div"><div _ngcontent-tvo-c106="" class="highlight-div-header"><div _ngcontent-tvo-c106="" class="highlight-div-header-left"><div _ngcontent-tvo-c106="" class="handle-button expand-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tvo-c106="" class="highlight-div-header-right"><div _ngcontent-tvo-c106="" class="handle-button ai-button"></div><div _ngcontent-tvo-c106="" class="handle-button line-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tvo-c106="" class="handle-button theme-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tvo-c106="" class="handle-button copy-button"><div _ngcontent-tvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AnimationOptions</span>, <span class="hljs-title class_">AnimatedDrawableDescriptor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Example</span> {</li><li>  <span class="hljs-attr">options</span>: <span class="hljs-title class_">AnimationOptions</span> = { <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attr">iterations</span>: -<span class="hljs-number">1</span> };</li><li>  <span class="hljs-comment">// $r('app.media.gif')需要替换为开发者所需的图像资源文件。</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">animated</span>: <span class="hljs-title class_">AnimatedDrawableDescriptor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnimatedDrawableDescriptor</span>($r(<span class="hljs-string">'app.media.gif'</span>), <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>);</li><li>
</li><li>  <span class="hljs-title function_">statusToString</span>(<span class="hljs-attr">status</span>: <span class="hljs-title class_">AnimationStatus</span>): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-keyword">switch</span> (status) {</li><li>      <span class="hljs-keyword">case</span> <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Initial</span>:</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-string">"Initial"</span></li><li>      <span class="hljs-keyword">case</span> <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Running</span>:</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-string">"Running"</span></li><li>      <span class="hljs-keyword">case</span> <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Paused</span>:</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-string">"Paused"</span></li><li>      <span class="hljs-keyword">case</span> <span class="hljs-title class_">AnimationStatus</span>.<span class="hljs-property">Stopped</span>:</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-string">"Stopped"</span></li><li>      <span class="hljs-attr">default</span>:</li><li>        <span class="hljs-keyword">return</span> <span class="hljs-string">"Error"</span></li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> controller = <span class="hljs-variable language_">this</span>.<span class="hljs-property">animated</span>.<span class="hljs-title function_">getAnimationController</span>()</li><li>          <span class="hljs-comment">// 获取当前动画的状态。</span></li><li>          <span class="hljs-keyword">let</span> status = controller?.<span class="hljs-title function_">getStatus</span>()</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`animation status = <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.statusToString(status)}</span>`</span>)</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>