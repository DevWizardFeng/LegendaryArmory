<h1 _ngcontent-kdy-c119="" class="doc-title ng-star-inserted" title="@ohos.backgroundTaskManager (后台任务管理)"> @ohos.backgroundTaskManager (后台任务管理) </h1>

<div _ngcontent-kdy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供后台任务管理能力。</p> <p>当应用或业务模块处于后台（无可见界面）时，如果有需要继续执行或者后续执行的业务，可基于业务类型，申请短时任务延迟挂起（Suspend）或者长时任务避免进入挂起状态。</p> <p>应用有不可中断且短时间能完成的任务时（如，用户在文件管理器上点击垃圾文件清理，若清理未完成时退到后台，文件管理器需要申请短时任务完成清理），可以使用短时任务机制。</p> <p>应用中存在用户能够直观感受到的且需要一直在后台运行的业务时（如，后台播放音乐），可以使用长时任务机制。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li><p>从API Version 9 开始，该接口不再维护，推荐使用新接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resourceschedule-backgroundtaskmanager">@ohos.resourceschedule.backgroundTaskManager (后台任务管理)</a>。</p>  </li><li><p>本模块首批接口从API version 7开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>  </li></ul>  </div></div></div>  <div class="tiledSection"><h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-kdy-c106="" class="highlight-div"><div _ngcontent-kdy-c106="" class="highlight-div-header"><div _ngcontent-kdy-c106="" class="highlight-div-header-left"><div _ngcontent-kdy-c106="" class="handle-button expand-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdy-c106="" class="highlight-div-header-right"><div _ngcontent-kdy-c106="" class="handle-button ai-button"></div><div _ngcontent-kdy-c106="" class="handle-button line-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdy-c106="" class="handle-button theme-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdy-c106="" class="handle-button copy-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> backgroundTaskManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.backgroundTaskManager'</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="backgroundtaskmanagerrequestsuspenddelaydeprecated" device-type="phone,2in1,tablet,wearable,tv">backgroundTaskManager.requestSuspendDelay<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backgroundtaskmanagerrequestsuspenddelaydeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>requestSuspendDelay(reason: string, callback: Callback&lt;void&gt;): DelaySuspendInfo</p> <p>后台应用申请延迟挂起。</p> <p>延迟挂起时间一般情况下默认值为3分钟，低电量（依据系统低电量广播）时默认值为1分钟。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 7开始支持，从API version 9开始废弃。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resourceschedule-backgroundtaskmanager#backgroundtaskmanagerrequestsuspenddelay">backgroundTaskManager.requestSuspendDelay</a>替代。</p>  </div></div></div> <p><strong>系统能力:</strong> SystemCapability.ResourceSchedule.BackgroundTaskManager.TransientTask</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">reason</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">延迟挂起申请的原因。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">延迟即将超时的回调函数，一般在超时前6秒通过此回调通知应用。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-backgroundtaskmanager#delaysuspendinfodeprecated">DelaySuspendInfo</a></td> <td class="cellrowborder" width="50%">返回延迟挂起信息。</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-kdy-c106="" class="highlight-div"><div _ngcontent-kdy-c106="" class="highlight-div-header"><div _ngcontent-kdy-c106="" class="highlight-div-header-left"><div _ngcontent-kdy-c106="" class="handle-button expand-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdy-c106="" class="highlight-div-header-right"><div _ngcontent-kdy-c106="" class="handle-button ai-button"></div><div _ngcontent-kdy-c106="" class="handle-button line-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdy-c106="" class="handle-button theme-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdy-c106="" class="handle-button copy-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> backgroundTaskManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.backgroundTaskManager'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-comment">// 设置延迟任务挂起的原因</span></li><li><span class="hljs-keyword">let</span> myReason = <span class="hljs-string">'test requestSuspendDelay'</span>;</li><li><span class="hljs-comment">// 申请延迟任务</span></li><li><span class="hljs-keyword">let</span> delayInfo = backgroundTaskManager.<span class="hljs-title function_">requestSuspendDelay</span>(myReason, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Request suspension delay will time out."</span>);</li><li>})</li><li><span class="hljs-comment">// 打印延迟任务信息</span></li><li><span class="hljs-keyword">let</span> id = delayInfo.<span class="hljs-property">requestId</span>;</li><li><span class="hljs-keyword">let</span> time = delayInfo.<span class="hljs-property">actualDelayTime</span>;</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The requestId is: "</span> + id);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The actualDelayTime is: "</span> + time);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="backgroundtaskmanagergetremainingdelaytimedeprecated" device-type="phone,2in1,tablet,wearable,tv">backgroundTaskManager.getRemainingDelayTime<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backgroundtaskmanagergetremainingdelaytimedeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getRemainingDelayTime(requestId: number, callback: AsyncCallback&lt;number&gt;): void</p> <p>获取应用程序进入挂起状态前的剩余时间，使用callback形式返回。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 7开始支持，从API version 9开始废弃。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resourceschedule-backgroundtaskmanager#backgroundtaskmanagergetremainingdelaytime">backgroundTaskManager.getRemainingDelayTime</a>替代。</p>  </div></div></div> <p><strong>系统能力:</strong> SystemCapability.ResourceSchedule.BackgroundTaskManager.TransientTask</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">requestId</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">延迟挂起的请求ID。这个值通过调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-backgroundtaskmanager#backgroundtaskmanagerrequestsuspenddelaydeprecated">requestSuspendDelay</a>方法获取。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">指定的callback回调方法。用于返回应用程序进入挂起状态之前的剩余时间，以毫秒为单位。</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-kdy-c106="" class="highlight-div"><div _ngcontent-kdy-c106="" class="highlight-div-header"><div _ngcontent-kdy-c106="" class="highlight-div-header-left"><div _ngcontent-kdy-c106="" class="handle-button expand-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdy-c106="" class="highlight-div-header-right"><div _ngcontent-kdy-c106="" class="handle-button ai-button"></div><div _ngcontent-kdy-c106="" class="handle-button line-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdy-c106="" class="handle-button theme-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdy-c106="" class="handle-button copy-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> backgroundTaskManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.backgroundTaskManager'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> delayInfo = backgroundTaskManager.<span class="hljs-title function_">requestSuspendDelay</span>(<span class="hljs-string">"test"</span>, <span class="hljs-function">() =&gt;</span> {});</li><li>backgroundTaskManager.<span class="hljs-title function_">getRemainingDelayTime</span>(delayInfo.<span class="hljs-property">requestId</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, res: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span>(err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'callback =&gt; Operation getRemainingDelayTime failed. Cause: '</span> + err.<span class="hljs-property">code</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'callback =&gt; Operation getRemainingDelayTime succeeded. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(res));</li><li>    }</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="backgroundtaskmanagergetremainingdelaytimedeprecated-1" device-type="phone,2in1,tablet,wearable,tv">backgroundTaskManager.getRemainingDelayTime<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backgroundtaskmanagergetremainingdelaytimedeprecated-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getRemainingDelayTime(requestId: number): Promise&lt;number&gt;</p> <p>获取应用程序进入挂起状态前的剩余时间，使用Promise形式返回。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 7开始支持，从API version 9开始废弃。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resourceschedule-backgroundtaskmanager#backgroundtaskmanagergetremainingdelaytime-1">backgroundTaskManager.getRemainingDelayTime</a>替代。</p>  </div></div></div> <p><strong>系统能力:</strong> SystemCapability.ResourceSchedule.BackgroundTaskManager.TransientTask</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">requestId</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">延迟挂起的请求ID。这个值通过调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-backgroundtaskmanager#backgroundtaskmanagerrequestsuspenddelaydeprecated">requestSuspendDelay</a>方法获取。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;number&gt;</td> <td class="cellrowborder" width="50%">指定的Promise回调方法。返回应用程序进入挂起状态之前的剩余时间，以毫秒为单位。</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-kdy-c106="" class="highlight-div"><div _ngcontent-kdy-c106="" class="highlight-div-header"><div _ngcontent-kdy-c106="" class="highlight-div-header-left"><div _ngcontent-kdy-c106="" class="handle-button expand-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdy-c106="" class="highlight-div-header-right"><div _ngcontent-kdy-c106="" class="handle-button ai-button"></div><div _ngcontent-kdy-c106="" class="handle-button line-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdy-c106="" class="handle-button theme-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdy-c106="" class="handle-button copy-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> backgroundTaskManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.backgroundTaskManager'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> delayInfo = backgroundTaskManager.<span class="hljs-title function_">requestSuspendDelay</span>(<span class="hljs-string">"test"</span>, <span class="hljs-function">() =&gt;</span> {});</li><li>    backgroundTaskManager.<span class="hljs-title function_">getRemainingDelayTime</span>(delayInfo.<span class="hljs-property">requestId</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res:<span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'promise =&gt; Operation getRemainingDelayTime succeeded. Data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(res));</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err : BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'promise =&gt; Operation getRemainingDelayTime failed. Cause: '</span> + err.<span class="hljs-property">code</span>);</li><li>})</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="backgroundtaskmanagercancelsuspenddelaydeprecated" device-type="phone,2in1,tablet,wearable,tv">backgroundTaskManager.cancelSuspendDelay<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backgroundtaskmanagercancelsuspenddelaydeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cancelSuspendDelay(requestId: number): void</p> <p>取消延迟挂起。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 7开始支持，从API version 9开始废弃。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resourceschedule-backgroundtaskmanager#backgroundtaskmanagercancelsuspenddelay">backgroundTaskManager.cancelSuspendDelay</a>替代。</p>  </div></div></div> <p><strong>系统能力:</strong> SystemCapability.ResourceSchedule.BackgroundTaskManager.TransientTask</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">requestId</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">延迟挂起的请求ID。这个值通过调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-backgroundtaskmanager#backgroundtaskmanagerrequestsuspenddelaydeprecated">requestSuspendDelay</a>方法获取。</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-kdy-c106="" class="highlight-div"><div _ngcontent-kdy-c106="" class="highlight-div-header"><div _ngcontent-kdy-c106="" class="highlight-div-header-left"><div _ngcontent-kdy-c106="" class="handle-button expand-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdy-c106="" class="highlight-div-header-right"><div _ngcontent-kdy-c106="" class="handle-button ai-button"></div><div _ngcontent-kdy-c106="" class="handle-button line-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdy-c106="" class="handle-button theme-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdy-c106="" class="handle-button copy-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> delayInfo = backgroundTaskManager.<span class="hljs-title function_">requestSuspendDelay</span>(<span class="hljs-string">"test"</span>, <span class="hljs-function">() =&gt;</span> {});</li><li>backgroundTaskManager.<span class="hljs-title function_">cancelSuspendDelay</span>(delayInfo.<span class="hljs-property">requestId</span>);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="backgroundtaskmanagerstartbackgroundrunningdeprecated" device-type="phone,2in1,tablet,wearable,tv">backgroundTaskManager.startBackgroundRunning<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backgroundtaskmanagerstartbackgroundrunningdeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startBackgroundRunning(context: Context, bgMode: BackgroundMode, wantAgent: WantAgent, callback: AsyncCallback&lt;void&gt;): void</p> <p>向系统申请长时任务，使用callback形式返回结果。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 8开始支持，从API version 9开始废弃。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resourceschedule-backgroundtaskmanager#backgroundtaskmanagerstartbackgroundrunning">backgroundTaskManager.startBackgroundRunning</a>替代。</p>  </div></div></div> <p><strong>需要权限:</strong> ohos.permission.KEEP_BACKGROUND_RUNNING</p> <p><strong>系统能力:</strong> SystemCapability.ResourceSchedule.BackgroundTaskManager.ContinuousTask</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">context</td> <td class="cellrowborder" width="25%">Context</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>应用运行的上下文。</p> <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p> <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="25%">bgMode</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-backgroundtaskmanager#backgroundmodedeprecated">BackgroundMode</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">向系统申请的后台模式。</td> </tr> <tr><td class="cellrowborder" width="25%">wantAgent</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-wantagent">WantAgent</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">通知参数，用于指定长时任务通知点击后跳转的界面。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">callback形式返回启动长时任务的结果。</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <p>FA模型示例：</p> <div _ngcontent-kdy-c106="" class="highlight-div"><div _ngcontent-kdy-c106="" class="highlight-div-header"><div _ngcontent-kdy-c106="" class="highlight-div-header-left"><div _ngcontent-kdy-c106="" class="handle-button expand-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdy-c106="" class="highlight-div-header-right"><div _ngcontent-kdy-c106="" class="handle-button ai-button"></div><div _ngcontent-kdy-c106="" class="handle-button line-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdy-c106="" class="handle-button theme-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdy-c106="" class="handle-button copy-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> backgroundTaskManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.backgroundTaskManager'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> wantAgent, { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.wantAgent'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">callback</span>(<span class="hljs-params">err: BusinessError, data: <span class="hljs-keyword">void</span></span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Operation startBackgroundRunning failed Cause: "</span> + err);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Operation startBackgroundRunning succeeded"</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> wantAgentInfo : wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">"com.example.myapplication"</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"EntryAbility"</span></li><li>    }</li><li>  ],</li><li>  <span class="hljs-attr">operationType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li>wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">wantAgentObj : WantAgent</span>) =&gt;</span> {</li><li>  backgroundTaskManager.<span class="hljs-title function_">startBackgroundRunning</span>(featureAbility.<span class="hljs-title function_">getContext</span>(),</li><li>    backgroundTaskManager.<span class="hljs-property">BackgroundMode</span>.<span class="hljs-property">LOCATION</span>, wantAgentObj, callback)</li><li>});</li></ol></pre></div></div> <p>Stage模型示例：</p> <div _ngcontent-kdy-c106="" class="highlight-div"><div _ngcontent-kdy-c106="" class="highlight-div-header"><div _ngcontent-kdy-c106="" class="highlight-div-header-left"><div _ngcontent-kdy-c106="" class="handle-button expand-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdy-c106="" class="highlight-div-header-right"><div _ngcontent-kdy-c106="" class="handle-button ai-button"></div><div _ngcontent-kdy-c106="" class="handle-button line-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdy-c106="" class="handle-button theme-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdy-c106="" class="handle-button copy-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">UIAbility</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.UIAbility'</span>;</li><li><span class="hljs-keyword">import</span> backgroundTaskManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.backgroundTaskManager'</span>;</li><li><span class="hljs-keyword">import</span> wantAgent, { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.wantAgent'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">Want</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.Want'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">AbilityConstant</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.AbilityConstant'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">callback</span>(<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">void</span></span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Operation startBackgroundRunning failed Cause: "</span> + err);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Operation startBackgroundRunning succeeded"</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-keyword">let</span> wantAgentInfo : wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>      <span class="hljs-attr">wants</span>: [</li><li>        {</li><li>          <span class="hljs-attr">bundleName</span>: <span class="hljs-string">"com.example.myapplication"</span>,</li><li>          <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"EntryAbility"</span></li><li>        }</li><li>      ],</li><li>      <span class="hljs-attr">operationType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>      <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>    };</li><li>
</li><li>    wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">wantAgentObj : WantAgent</span>) =&gt;</span> {</li><li>      backgroundTaskManager.<span class="hljs-title function_">startBackgroundRunning</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>,</li><li>        backgroundTaskManager.<span class="hljs-property">BackgroundMode</span>.<span class="hljs-property">LOCATION</span>, wantAgentObj, callback)</li><li>    });</li><li>  }</li><li>};</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="backgroundtaskmanagerstartbackgroundrunningdeprecated-1" device-type="phone,2in1,tablet,wearable,tv">backgroundTaskManager.startBackgroundRunning<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backgroundtaskmanagerstartbackgroundrunningdeprecated-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startBackgroundRunning(context: Context, bgMode: BackgroundMode, wantAgent: WantAgent): Promise&lt;void&gt;</p> <p>向系统申请长时任务，使用promise形式返回结果。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 8开始支持，从API version 9开始废弃。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resourceschedule-backgroundtaskmanager#backgroundtaskmanagerstartbackgroundrunning-1">backgroundTaskManager.startBackgroundRunning</a>替代。</p>  </div></div></div> <p><strong>需要权限:</strong> ohos.permission.KEEP_BACKGROUND_RUNNING</p> <p><strong>系统能力:</strong> SystemCapability.ResourceSchedule.BackgroundTaskManager.ContinuousTask</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">context</td> <td class="cellrowborder" width="25%">Context</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>应用运行的上下文。</p> <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p> <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="25%">bgMode</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-backgroundtaskmanager#backgroundmodedeprecated">BackgroundMode</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">向系统申请的后台模式。</td> </tr> <tr><td class="cellrowborder" width="25%">wantAgent</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-wantagent">WantAgent</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">通知参数，用于指定长时任务通知点击跳转的界面。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">使用Promise形式返回结果。</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <p>FA模型示例（需使用js代码开发）：</p> <div _ngcontent-kdy-c106="" class="highlight-div"><div _ngcontent-kdy-c106="" class="highlight-div-header"><div _ngcontent-kdy-c106="" class="highlight-div-header-left"><div _ngcontent-kdy-c106="" class="handle-button expand-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdy-c106="" class="highlight-div-header-right"><div _ngcontent-kdy-c106="" class="handle-button ai-button"></div><div _ngcontent-kdy-c106="" class="handle-button line-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdy-c106="" class="handle-button theme-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdy-c106="" class="handle-button copy-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> backgroundTaskManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.backgroundTaskManager'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> wantAgent, { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.wantAgent'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> wantAgentInfo : wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>  <span class="hljs-attr">wants</span>: [</li><li>    {</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">"com.example.myapplication"</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"EntryAbility"</span></li><li>    }</li><li>  ],</li><li>  <span class="hljs-attr">operationType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>  <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>};</li><li>
</li><li>wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">wantAgentObj: WantAgent</span>) =&gt;</span> {</li><li>  backgroundTaskManager.<span class="hljs-title function_">startBackgroundRunning</span>(featureAbility.<span class="hljs-title function_">getContext</span>(),</li><li>    backgroundTaskManager.<span class="hljs-property">BackgroundMode</span>.<span class="hljs-property">LOCATION</span>, wantAgentObj).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Operation startBackgroundRunning succeeded"</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Operation startBackgroundRunning failed Cause: "</span> + err);</li><li>  });</li><li>});</li></ol></pre></div></div> <p>Stage模型示例：</p> <div _ngcontent-kdy-c106="" class="highlight-div"><div _ngcontent-kdy-c106="" class="highlight-div-header"><div _ngcontent-kdy-c106="" class="highlight-div-header-left"><div _ngcontent-kdy-c106="" class="handle-button expand-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdy-c106="" class="highlight-div-header-right"><div _ngcontent-kdy-c106="" class="handle-button ai-button"></div><div _ngcontent-kdy-c106="" class="handle-button line-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdy-c106="" class="handle-button theme-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdy-c106="" class="handle-button copy-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">UIAbility</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.UIAbility'</span>;</li><li><span class="hljs-keyword">import</span> backgroundTaskManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.backgroundTaskManager'</span>;</li><li><span class="hljs-keyword">import</span> wantAgent, { <span class="hljs-title class_">WantAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.wantAgent'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">Want</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.Want'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">AbilityConstant</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.AbilityConstant'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-keyword">let</span> wantAgentInfo : wantAgent.<span class="hljs-property">WantAgentInfo</span> = {</li><li>      <span class="hljs-attr">wants</span>: [</li><li>        {</li><li>          <span class="hljs-attr">bundleName</span>: <span class="hljs-string">"com.example.myapplication"</span>,</li><li>          <span class="hljs-attr">abilityName</span>: <span class="hljs-string">"EntryAbility"</span></li><li>        }</li><li>      ],</li><li>      <span class="hljs-comment">// 点击通知后，动作类型</span></li><li>      <span class="hljs-attr">operationType</span>: wantAgent.<span class="hljs-property">OperationType</span>.<span class="hljs-property">START_ABILITY</span>,</li><li>      <span class="hljs-attr">requestCode</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-comment">// 点击通知后，动作执行属性</span></li><li>      <span class="hljs-attr">wantAgentFlags</span>: [wantAgent.<span class="hljs-property">WantAgentFlags</span>.<span class="hljs-property">UPDATE_PRESENT_FLAG</span>]</li><li>    };</li><li>
</li><li>    wantAgent.<span class="hljs-title function_">getWantAgent</span>(wantAgentInfo).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">wantAgentObj : WantAgent</span>) =&gt;</span> {</li><li>      backgroundTaskManager.<span class="hljs-title function_">startBackgroundRunning</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>,</li><li>        backgroundTaskManager.<span class="hljs-property">BackgroundMode</span>.<span class="hljs-property">LOCATION</span>, wantAgentObj).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Operation startBackgroundRunning succeeded"</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Operation startBackgroundRunning failed Cause: "</span> + err);</li><li>      });</li><li>    });</li><li>  }</li><li>};</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="backgroundtaskmanagerstopbackgroundrunningdeprecated" device-type="phone,2in1,tablet,wearable,tv">backgroundTaskManager.stopBackgroundRunning<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backgroundtaskmanagerstopbackgroundrunningdeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stopBackgroundRunning(context: Context, callback: AsyncCallback&lt;void&gt;): void</p> <p>向系统申请取消长时任务，使用callback形式返回结果。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 8开始支持，从API version 9开始废弃。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resourceschedule-backgroundtaskmanager#backgroundtaskmanagerstopbackgroundrunning">backgroundTaskManager.stopBackgroundRunning</a>替代。</p>  </div></div></div> <p><strong>系统能力:</strong> SystemCapability.ResourceSchedule.BackgroundTaskManager.ContinuousTask</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">context</td> <td class="cellrowborder" width="25%">Context</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>应用运行的上下文。</p> <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p> <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p> </td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">callback形式返回启动长时任务的结果。</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <p>FA模型示例（需使用js代码开发）：</p> <div _ngcontent-kdy-c106="" class="highlight-div"><div _ngcontent-kdy-c106="" class="highlight-div-header"><div _ngcontent-kdy-c106="" class="highlight-div-header-left"><div _ngcontent-kdy-c106="" class="handle-button expand-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdy-c106="" class="highlight-div-header-right"><div _ngcontent-kdy-c106="" class="handle-button ai-button"></div><div _ngcontent-kdy-c106="" class="handle-button line-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdy-c106="" class="handle-button theme-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdy-c106="" class="handle-button copy-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> backgroundTaskManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.backgroundTaskManager'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">callback</span>(<span class="hljs-params">err: BusinessError, data: <span class="hljs-keyword">void</span></span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Operation stopBackgroundRunning failed Cause: "</span> + err);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Operation stopBackgroundRunning succeeded"</span>);</li><li>  }</li><li>}</li><li>
</li><li>backgroundTaskManager.<span class="hljs-title function_">stopBackgroundRunning</span>(featureAbility.<span class="hljs-title function_">getContext</span>(), callback);</li></ol></pre></div></div> <p>Stage模型示例：</p> <div _ngcontent-kdy-c106="" class="highlight-div"><div _ngcontent-kdy-c106="" class="highlight-div-header"><div _ngcontent-kdy-c106="" class="highlight-div-header-left"><div _ngcontent-kdy-c106="" class="handle-button expand-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdy-c106="" class="highlight-div-header-right"><div _ngcontent-kdy-c106="" class="handle-button ai-button"></div><div _ngcontent-kdy-c106="" class="handle-button line-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdy-c106="" class="handle-button theme-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdy-c106="" class="handle-button copy-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">UIAbility</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.UIAbility'</span>;</li><li><span class="hljs-keyword">import</span> backgroundTaskManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.backgroundTaskManager'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">Want</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.Want'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">AbilityConstant</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.AbilityConstant'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">callback</span>(<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">void</span></span>) {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Operation stopBackgroundRunning failed Cause: "</span> + err);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Operation stopBackgroundRunning succeeded"</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    backgroundTaskManager.<span class="hljs-title function_">stopBackgroundRunning</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, callback);</li><li>  }</li><li>};</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="backgroundtaskmanagerstopbackgroundrunningdeprecated-1" device-type="phone,2in1,tablet,wearable,tv">backgroundTaskManager.stopBackgroundRunning<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backgroundtaskmanagerstopbackgroundrunningdeprecated-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stopBackgroundRunning(context: Context): Promise&lt;void&gt;</p> <p>向系统申请取消长时任务，使用promise形式返回结果。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 8开始支持，从API version 9开始废弃。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resourceschedule-backgroundtaskmanager#backgroundtaskmanagerstopbackgroundrunning-1">backgroundTaskManager.stopBackgroundRunning</a>替代。</p>  </div></div></div> <p><strong>系统能力:</strong> SystemCapability.ResourceSchedule.BackgroundTaskManager.ContinuousTask</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">context</td> <td class="cellrowborder" width="25%">Context</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>应用运行的上下文。</p> <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p> <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">使用Promise形式返回结果。</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <p>FA模型示例：</p> <div _ngcontent-kdy-c106="" class="highlight-div"><div _ngcontent-kdy-c106="" class="highlight-div-header"><div _ngcontent-kdy-c106="" class="highlight-div-header-left"><div _ngcontent-kdy-c106="" class="handle-button expand-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdy-c106="" class="highlight-div-header-right"><div _ngcontent-kdy-c106="" class="handle-button ai-button"></div><div _ngcontent-kdy-c106="" class="handle-button line-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdy-c106="" class="handle-button theme-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdy-c106="" class="handle-button copy-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> backgroundTaskManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.backgroundTaskManager'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-comment">// 取消长时任务</span></li><li>backgroundTaskManager.<span class="hljs-title function_">stopBackgroundRunning</span>(featureAbility.<span class="hljs-title function_">getContext</span>()).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Operation stopBackgroundRunning succeeded"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Operation stopBackgroundRunning failed Cause: "</span> + err);</li><li>});</li></ol></pre></div></div> <p>Stage模型示例：</p> <div _ngcontent-kdy-c106="" class="highlight-div"><div _ngcontent-kdy-c106="" class="highlight-div-header"><div _ngcontent-kdy-c106="" class="highlight-div-header-left"><div _ngcontent-kdy-c106="" class="handle-button expand-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kdy-c106="" class="highlight-div-header-right"><div _ngcontent-kdy-c106="" class="handle-button ai-button"></div><div _ngcontent-kdy-c106="" class="handle-button line-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kdy-c106="" class="handle-button theme-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kdy-c106="" class="handle-button copy-button"><div _ngcontent-kdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">UIAbility</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.UIAbility'</span>;</li><li><span class="hljs-keyword">import</span> backgroundTaskManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.backgroundTaskManager'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">Want</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.Want'</span>;</li><li><span class="hljs-keyword">import</span> <span class="hljs-title class_">AbilityConstant</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.AbilityConstant'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-comment">// 取消长时任务</span></li><li>    backgroundTaskManager.<span class="hljs-title function_">stopBackgroundRunning</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Operation stopBackgroundRunning succeeded"</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Operation stopBackgroundRunning failed Cause: "</span> + err);</li><li>    });</li><li>  }</li><li>};</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="delaysuspendinfodeprecated" device-type="phone,2in1,tablet,wearable,tv">DelaySuspendInfo<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delaysuspendinfodeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>延迟挂起信息。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 7开始支持，从API version 9开始废弃。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resourceschedule-backgroundtaskmanager#delaysuspendinfo">DelaySuspendInfo</a>替代。</p>  </div></div></div> <p><strong>系统能力:</strong> SystemCapability.ResourceSchedule.BackgroundTaskManager.TransientTask</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">requestId</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">延迟挂起的请求ID。</td> </tr> <tr><td class="cellrowborder" width="20%">actualDelayTime</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%"><p>应用的实际挂起延迟时间，以毫秒为单位。</p> <p>一般情况下默认值为180000，低电量（依据系统低电量广播）时默认值为60000。</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="backgroundmodedeprecated" device-type="phone,2in1,tablet,wearable,tv">BackgroundMode<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backgroundmodedeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>长时任务类型。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从API version 8开始支持，从API version 9开始废弃。建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resourceschedule-backgroundtaskmanager#backgroundmode">BackgroundMode</a>替代。</p>  </div></div></div> <p><strong>系统能力:</strong> SystemCapability.ResourceSchedule.BackgroundTaskManager.ContinuousTask</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.5.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">DATA_TRANSFER</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">数据传输。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">AUDIO_PLAYBACK</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">音频播放。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">AUDIO_RECORDING</td> <td class="cellrowborder" width="33.33333333333333%">3</td> <td class="cellrowborder" width="33.33333333333333%">录音。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">LOCATION</td> <td class="cellrowborder" width="33.33333333333333%">4</td> <td class="cellrowborder" width="33.33333333333333%">定位导航。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">BLUETOOTH_INTERACTION</td> <td class="cellrowborder" width="33.33333333333333%">5</td> <td class="cellrowborder" width="33.33333333333333%">蓝牙相关。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">MULTI_DEVICE_CONNECTION</td> <td class="cellrowborder" width="33.33333333333333%">6</td> <td class="cellrowborder" width="33.33333333333333%">多设备互联。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">TASK_KEEPING</td> <td class="cellrowborder" width="33.33333333333333%">9</td> <td class="cellrowborder" width="33.33333333333333%">计算任务（仅在特定设备生效）。</td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>