<h1 _ngcontent-wmb-c119="" class="doc-title ng-star-inserted" title="@ohos.data.dataShare (数据共享)"> @ohos.data.dataShare (数据共享) </h1>

<div _ngcontent-wmb-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p><strong>DataShare</strong>用于应用管理其自身数据，同时支持同个设备上不同应用间的数据共享。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>        <p>本模块首批接口从API version 9开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p></li>       <li>        <p>本模块接口仅可在Stage模型下使用。</p></li>      </ul>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dataShare } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="datasharecreatedataproxyhandle20" device-type="phone,2in1,tablet,wearable,tv">dataShare.createDataProxyHandle<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="datasharecreatedataproxyhandle20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createDataProxyHandle(): Promise&lt;DataProxyHandle&gt;</p>     <p>创建DataProxyHandle实例。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxyhandle20">DataProxyHandle</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回DataProxyHandle实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-datashare">数据共享错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15700000</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: The service is not ready or is being restarted abnormally.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {</li><li>    dataShare.<span class="hljs-title function_">createDataProxyHandle</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">dataProxyHandle</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"createDataProxyHandle succeed"</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createDataProxyHandle error: code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  };</li><li>};</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="changetype20" device-type="phone,2in1,tablet,wearable,tv">ChangeType<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="changetype20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>数据变更类型枚举。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">INSERT</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">表示数据添加。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DELETE</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">表示数据删除。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">UPDATE</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">表示数据更新。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="proxydata20" device-type="phone,2in1,tablet,wearable,tv">ProxyData<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="proxydata20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>共享配置的数据结构。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">uri</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">共享配置的全局唯一标识。固定格式为"datashareproxy://{bundleName}/{path}"，其中bundleName为配置发布方应用的bundleName，path可随意填写，但同一应用内不允许重复。字符串长度不超过256个字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">value</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-valuesbucket#valuetype">ValueType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">共享配置的值。不填则为空字符串。字符串长度不超过4096个字节。当首次发布共享配置时，如果未填写，将默认设置为空字符串。在更新共享配置时，如果未填写，共享配置的值将不会被更新。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">allowList</td>         <td class="cellrowborder" width="20%">string[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">允许订阅和读取共享配置的应用程序列表。不填则为空的字符串数组。数组最大长度为256，超过256的部分不生效。数组中每个元素为应用的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/common_problem_of_application#什么是appidentifier" target="_blank">appIdentifier</a>，单个appIdentifier最大长度128字节，超过128字节的appIdentifier不会生效。当首次发布共享配置时，如果未填写，将默认为空的允许列表。在更新共享配置时，如果未填写，共享配置的允许列表将不会被更新。一个空的允许列表表示只有发布者能够访问该共享配置。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="dataproxychangeinfo20" device-type="phone,2in1,tablet,wearable,tv">DataProxyChangeInfo<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataproxychangeinfo20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>通知订阅者共享配置变更的数据结构。包括数据变更类型、变化的URI、变更的数据内容。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">type</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#changetype20">ChangeType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">通知变更的类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">uri</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">通知变更指定URI。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">value</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-valuesbucket#valuetype">ValueType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">更新的数据。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="dataproxyerrorcode20" device-type="phone,2in1,tablet,wearable,tv">DataProxyErrorCode<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataproxyerrorcode20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>配置共享批量操作返回值的状态码枚举。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">SUCCESS</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">表示操作成功。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">URI_NOT_EXIST</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">URI不存在或取消订阅一个未订阅过的URI。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">NO_PERMISSION</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">没有权限在该URI上执行此操作。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">OVER_LIMIT</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">表示当前应用发布的配置超过32个配置的上限。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="dataproxyresult20" device-type="phone,2in1,tablet,wearable,tv">DataProxyResult<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataproxyresult20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>配置共享批量操作结果的数据结构。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">uri</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">被操作的URI。固定格式为"datashareproxy://{bundleName}/{path}"，其中bundleName为配置发布方应用的bundleName，path可随意填写，但同一应用内不允许重复，字符串长度不超过256个字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">result</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxyerrorcode20">DataProxyErrorCode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">操作结果的错误码。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="dataproxygetresult20" device-type="phone,2in1,tablet,wearable,tv">DataProxyGetResult<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataproxygetresult20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>配置共享批量获取操作结果的数据结构。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">uri</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">被操作的URI。固定格式为"datashareproxy://{bundleName}/{path}"，其中bundleName为配置发布方应用的bundleName，path可随意填写，但同一应用内不允许重复，字符串长度不超过256个字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">result</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxyerrorcode20">DataProxyErrorCode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">操作结果的错误码。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">value</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-valuesbucket#valuetype">ValueType</a> | undefined</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">如果获取操作成功，则为共享配置的值；如果获取操作失败，则未定义。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">allowList</td>         <td class="cellrowborder" width="20%">string[] | undefined</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">如果获取操作成功，则为共享配置的允许列表；如果获取操作失败，则未定义。只有发布者才能获取允许列表，其他应用只能获取值。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="dataproxytype20" device-type="phone,2in1,tablet,wearable,tv">DataProxyType<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataproxytype20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>数据代理类型的枚举。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">SHARED_CONFIG</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">表示应用之间的共享配置。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="dataproxyconfig20" device-type="phone,2in1,tablet,wearable,tv">DataProxyConfig<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataproxyconfig20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>数据代理操作配置的数据结构。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">type</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxytype20">DataProxyType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">数据代理操作的类型。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="dataproxyhandle20" device-type="phone,2in1,tablet,wearable,tv">DataProxyHandle<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataproxyhandle20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>数据代理操作句柄的实例，可使用此实例访问或管理共享配置信息。在调用DataProxyHandle提供的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#datasharecreatedataproxyhandle20">createDataProxyHandle</a>构建一个实例。</p>    </div>    <div class="tiledSection">     <h3 id="ondatachange20" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">on('dataChange')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondatachange20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'dataChange', uris: string[], config: DataProxyConfig, callback: AsyncCallback&lt;DataProxyChangeInfo[]&gt;): DataProxyResult[]</p>     <p>订阅指定URI对应共享配置变更事件。若订阅者已注册变更通知，当配置发布方修改配置时，订阅者将会接收到callback通知，通知携带数据变更类型、变化的URI、变更的共享配置内容。使用callback异步回调。该功能不允许跨用户订阅通知，不允许订阅未发布的配置。订阅成功后若权限被收回，则后续不再通知订阅者。</p>     <p>触发通知：配置发布方调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#publish20">publish</a>、<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#delete20">delete</a>接口发布、删除配置时会自动触发通知。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">订阅的事件/回调类型，支持的事件为'dataChange'，当配置发布方修改配置时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">uris</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要订阅的共享配置对应的URI数组，数组最大长度为32。URI固定格式为"datashareproxy://{bundleName}/{path}"，其中bundleName为配置发布方应用的bundleName，path可随意填写，但同一应用内不允许重复，字符串长度不超过256个字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxyconfig20">DataProxyConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示数据代理操作的配置。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxychangeinfo20">DataProxyChangeInfo</a>[]&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当配置发布方修改配置时会回调该函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxyresult20">DataProxyResult</a>[]</td>         <td class="cellrowborder" width="50%">批量操作的结果数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-datashare">数据共享错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15700000</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: The service is not ready or is being restarted abnormally.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15700014</td>         <td class="cellrowborder" width="50%">The parameter format is incorrect or the value range is invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-attr">urisToWatch</span>: <span class="hljs-built_in">string</span>[] =</li><li>  [<span class="hljs-string">'datashareproxy://com.example.app1/config1'</span>, <span class="hljs-string">'datashareproxy://com.example.app1/config2'</span>,];</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: dataShare.<span class="hljs-property">DataProxyConfig</span> = {</li><li>  <span class="hljs-attr">type</span>: dataShare.<span class="hljs-property">DataProxyType</span>.<span class="hljs-property">SHARED_CONFIG</span>,</li><li>};</li><li><span class="hljs-keyword">const</span> callback = (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>&lt;<span class="hljs-built_in">void</span>&gt;, <span class="hljs-attr">changes</span>: dataShare.<span class="hljs-property">DataProxyChangeInfo</span>[]): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'err:'</span>, err);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    changes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">change</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Change Type: <span class="hljs-subst">${change.<span class="hljs-keyword">type</span>}</span>, URI: <span class="hljs-subst">${change.uri}</span>, Value: <span class="hljs-subst">${change.value}</span>`</span>);</li><li>    });</li><li>  }</li><li>};</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">results</span>: dataShare.<span class="hljs-property">DataProxyResult</span>[] = dataProxyHandle.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, urisToWatch, config, callback);</li><li>results.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`URI: <span class="hljs-subst">${result.uri}</span>, Result: <span class="hljs-subst">${result.result}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offdatachange20" device-type="phone,2in1,tablet,wearable,tv">off('dataChange')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdatachange20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'dataChange', uris: string[], config: DataProxyConfig, callback?: AsyncCallback&lt;DataProxyChangeInfo[]&gt;): DataProxyResult[]</p>     <p>取消订阅指定URI对应代理数据变更事件。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">订阅的事件/回调类型，支持的事件为'dataChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">uris</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要取消订阅的共享配置对应的URI数组，数组最大长度为32。URI固定格式为"datashareproxy://{bundleName}/{path}"，其中bundleName为配置发布方应用的bundleName，path可随意填写，但同一应用内不允许重复，字符串长度不超过256个字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxyconfig20">DataProxyConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示数据代理操作的配置。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxychangeinfo20">DataProxyChangeInfo</a>[]&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数。表示指定取消订阅的callback通知，如果为空、undefined或null，则取消订阅这些URI下所有的通知事件。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxyresult20">DataProxyResult</a>[]</td>         <td class="cellrowborder" width="50%">批量操作的结果数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-datashare">数据共享错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15700000</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: The service is not ready or is being restarted abnormally.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15700014</td>         <td class="cellrowborder" width="50%">The parameter format is incorrect or the value range is invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-attr">urisToUnWatch</span>: <span class="hljs-built_in">string</span>[] =</li><li>  [<span class="hljs-string">'datashareproxy://com.example.app1/config1'</span>, <span class="hljs-string">'datashareproxy://com.example.app1/config2'</span>,];</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: dataShare.<span class="hljs-property">DataProxyConfig</span> = {</li><li>  <span class="hljs-attr">type</span>: dataShare.<span class="hljs-property">DataProxyType</span>.<span class="hljs-property">SHARED_CONFIG</span>,</li><li>};</li><li><span class="hljs-keyword">const</span> callback = (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>&lt;<span class="hljs-built_in">void</span>&gt;, <span class="hljs-attr">changes</span>: dataShare.<span class="hljs-property">DataProxyChangeInfo</span>[]): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'err:'</span>, err);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    changes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">change</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Change Type: <span class="hljs-subst">${change.<span class="hljs-keyword">type</span>}</span>, URI: <span class="hljs-subst">${change.uri}</span>, Value: <span class="hljs-subst">${change.value}</span>`</span>);</li><li>    });</li><li>  }</li><li>};</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">results</span>: dataShare.<span class="hljs-property">DataProxyResult</span>[] = dataProxyHandle.<span class="hljs-title function_">off</span>(<span class="hljs-string">'dataChange'</span>, urisToUnWatch, config, callback);</li><li>results.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`URI: <span class="hljs-subst">${result.uri}</span>, Result: <span class="hljs-subst">${result.result}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="publish20" device-type="phone,2in1,tablet,wearable,tv">publish<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="publish20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>publish(data: ProxyData[], config: DataProxyConfig): Promise&lt;DataProxyResult[]&gt;</p>     <p>发布共享配置项。发布后，发布者和允许列表中指定的应用可以访问该共享配置项。如果要发布的URI已经存在，则更新对应的共享配置项。如果发布的配置项中存在任一URI的长度超出上限或者格式校验失败，则当前发布操作失败。只有发布者才允许更新共享配置项，每个应用支持最多32个共享配置。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">data</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#proxydata20">ProxyData</a>[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示需要创建或者更新的共享配置项数组。数组最大长度为32。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxyconfig20">DataProxyConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示数据代理操作的配置。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxyresult20">DataProxyResult</a>[]&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回批量操作的结果数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-datashare">数据共享错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15700000</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: The service is not ready or is being restarted abnormally.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15700014</td>         <td class="cellrowborder" width="50%">The parameter format is incorrect or the value range is invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-attr">newConfigData</span>: dataShare.<span class="hljs-property">ProxyData</span>[] = [{</li><li>  <span class="hljs-attr">uri</span>: <span class="hljs-string">'datashareproxy://com.example.app1/config1'</span>,</li><li>  <span class="hljs-attr">value</span>: <span class="hljs-string">'Value1'</span>,</li><li>  <span class="hljs-attr">allowList</span>: [<span class="hljs-string">'appIdentifier2'</span>, <span class="hljs-string">'appIdentifier3'</span>], <span class="hljs-comment">//此处字符串仅作示例，使用时需替换为应用实际的appIdentifier</span></li><li>}, {</li><li>  <span class="hljs-attr">uri</span>: <span class="hljs-string">'datashareproxy://com.example.app1/config2'</span>,</li><li>  <span class="hljs-attr">value</span>: <span class="hljs-string">'Value2'</span>,</li><li>  <span class="hljs-attr">allowList</span>: [<span class="hljs-string">'appIdentifier3'</span>, <span class="hljs-string">'appIdentifier4'</span>], <span class="hljs-comment">//此处字符串仅作示例，使用时需替换为应用实际的appIdentifier</span></li><li>}];</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: dataShare.<span class="hljs-property">DataProxyConfig</span> = {</li><li>  <span class="hljs-attr">type</span>: dataShare.<span class="hljs-property">DataProxyType</span>.<span class="hljs-property">SHARED_CONFIG</span>,</li><li>};</li><li>dataProxyHandle.<span class="hljs-title function_">publish</span>(newConfigData, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">results: dataShare.DataProxyResult[]</span>) =&gt;</span> {</li><li>  results.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`URI: <span class="hljs-subst">${result.uri}</span>, Result: <span class="hljs-subst">${result.result}</span>`</span>);</li><li>  });</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error publishing config:'</span>, error);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="delete20" device-type="phone,2in1,tablet,wearable,tv">delete<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delete20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(uris: string[], config: DataProxyConfig): Promise&lt;DataProxyResult[]&gt;</p>     <p>根据URI删除指定的共享配置项，只有配置发布方能删除共享配置项。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uris</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示需要删除的共享配置对应的URI数组，数组最大长度为32。URI固定格式为"datashareproxy://{bundleName}/{path}"，其中bundleName为配置发布方应用的bundleName，path可随意填写，但同一应用内不允许重复，字符串长度不超过256个字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxyconfig20">DataProxyConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示共享配置的类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxyresult20">DataProxyResult</a>[]&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回批量操作的结果数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-datashare">数据共享错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15700000</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: The service is not ready or is being restarted abnormally.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15700014</td>         <td class="cellrowborder" width="50%">The parameter format is incorrect or the value range is invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-attr">urisToDelete</span>: <span class="hljs-built_in">string</span>[] =</li><li>  [<span class="hljs-string">'datashareproxy://com.example.app1/config1'</span>, <span class="hljs-string">'datashareproxy://com.example.app1/config2'</span>,];</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: dataShare.<span class="hljs-property">DataProxyConfig</span> = {</li><li>  <span class="hljs-attr">type</span>: dataShare.<span class="hljs-property">DataProxyType</span>.<span class="hljs-property">SHARED_CONFIG</span>,</li><li>};</li><li>dataProxyHandle.<span class="hljs-title function_">delete</span>(urisToDelete, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">results: dataShare.DataProxyResult[]</span>) =&gt;</span> {</li><li>  results.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`URI: <span class="hljs-subst">${result.uri}</span>, Result: <span class="hljs-subst">${result.result}</span>`</span>);</li><li>  });</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error deleting config:'</span>, error);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="get20" device-type="phone,2in1,tablet,wearable,tv">get<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(uris: string[], config: DataProxyConfig): Promise&lt;DataProxyGetResult[]&gt;</p>     <p>根据URI获取指定的共享配置项。只有发布者和允许列表中指定的应用可以访问该共享配置项。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.DataShare.Consumer</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uris</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示需要获取的共享配置的URI数组，数组最大长度为32。URI固定格式为"datashareproxy://{bundleName}/{path}"，其中bundleName为配置发布方应用的bundleName，path可随意填写，但同一应用内不允许重复，字符串长度不超过256个字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxyconfig20">DataProxyConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示共享配置的类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-datashare#dataproxygetresult20">DataProxyGetResult</a>[]&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回批量获取操作的结果数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-datashare">数据共享错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15700000</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: The service is not ready or is being restarted abnormally.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15700014</td>         <td class="cellrowborder" width="50%">The parameter format is incorrect or the value range is invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wmb-c106="" class="highlight-div"><div _ngcontent-wmb-c106="" class="highlight-div-header"><div _ngcontent-wmb-c106="" class="highlight-div-header-left"><div _ngcontent-wmb-c106="" class="handle-button expand-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wmb-c106="" class="highlight-div-header-right"><div _ngcontent-wmb-c106="" class="handle-button ai-button"></div><div _ngcontent-wmb-c106="" class="handle-button line-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wmb-c106="" class="handle-button theme-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wmb-c106="" class="handle-button copy-button"><div _ngcontent-wmb-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wmb-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> <span class="hljs-attr">urisToGet</span>: <span class="hljs-built_in">string</span>[] =</li><li>  [<span class="hljs-string">'datashareproxy://com.example.app1/config1'</span>, <span class="hljs-string">'datashareproxy://com.example.app1/config2'</span>,];</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: dataShare.<span class="hljs-property">DataProxyConfig</span> = {</li><li>  <span class="hljs-attr">type</span>: dataShare.<span class="hljs-property">DataProxyType</span>.<span class="hljs-property">SHARED_CONFIG</span>,</li><li>};</li><li>dataProxyHandle.<span class="hljs-title function_">get</span>(urisToGet, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">results: dataShare.DataProxyGetResult[]</span>) =&gt;</span> {</li><li>  results.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`URI: <span class="hljs-subst">${result.uri}</span>, Result: <span class="hljs-subst">${result.result}</span>, AllowList: <span class="hljs-subst">${result.allowList}</span>`</span>);</li><li>  });</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error getting config:'</span>, error);</li><li>});</li></ol></pre></div></div>    </div>   </div>   <div></div></div>