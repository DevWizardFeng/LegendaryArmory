<h1 _ngcontent-blk-c119="" class="doc-title ng-star-inserted" title="@ohos.data.distributedData (分布式数据管理)"> @ohos.data.distributedData (分布式数据管理) </h1>

<div _ngcontent-blk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;"> <div><p>分布式数据管理为应用程序提供不同设备间数据库的分布式协同能力。通过调用分布式数据各个接口，应用程序可将数据保存到分布式数据库中，并可对分布式数据库中的数据进行增加、删除、修改、查询、同步等操作。</p> <p>该模块提供以下分布式数据管理相关的常用功能：</p> <ul><li><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvmanager">KVManager</a>：数据管理实例，用于获取KVStore的相关信息。</li><li><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet<sup>8+</sup></a>：提供获取KVStore数据库结果集的相关方法，包括查询和移动数据读取位置等。</li><li><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query<sup>8+</sup></a>：使用谓词表示数据库查询，提供创建Query实例、查询数据库中的数据和添加谓词的方法。</li><li><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstore">KVStore</a>：KVStore数据库实例，提供增加数据、删除数据和订阅数据变更、订阅数据同步完成的方法。</li><li><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#singlekvstore">SingleKVStore</a>：单版本分布式数据库，继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstore">KVStore</a>，不对数据所属设备进行区分，提供查询数据和同步数据的方法。</li><li><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#devicekvstore8">DeviceKVStore<sup>8+</sup></a>：设备协同数据库，继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstore">KVStore</a>，以设备维度对数据进行区分，提供查询数据和同步数据的方法。</li></ul> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li><p>从API Version 9开始，该接口不再维护，推荐使用新接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore">@ohos.data.distributedKVStore</a>。</p>  </li><li><p>本模块首批接口从API version 7开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>  </li><li><p>本模块中所有需要获取deviceId的接口，都仅系统应用可用。</p>  </li></ul>  </div></div></div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;"><h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> distributedData <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.distributedData'</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1163px;"><h2 id="distributeddatacreatekvmanager" device-type="phone,2in1,tablet,wearable,tv">distributedData.createKVManager<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="distributeddatacreatekvmanager" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createKVManager(config: KVManagerConfig, callback: AsyncCallback&lt;KVManager&gt;): void</p> <p>创建一个KVManager对象实例，用于管理数据库对象，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">config</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvmanagerconfig">KVManagerConfig</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">提供KVManager实例的配置信息，包括调用方的Bundle名称和用户信息。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvmanager">KVManager</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回创建的KVManager对象实例。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvManager;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> kvManagerConfig = {</li><li>        bundleName : <span class="hljs-string">'com.example.datamanagertest'</span>,</li><li>        userInfo : {</li><li>            userId : <span class="hljs-string">'0'</span>,</li><li>            userType : distributedData.<span class="hljs-property">UserType</span>.<span class="hljs-property">SAME_USER_ID</span></li><li>        }</li><li>    }</li><li>    distributedData.<span class="hljs-title function_">createKVManager</span>(kvManagerConfig, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, manager</span>) {</li><li>        <span class="hljs-keyword">if</span> (err) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Failed to create KVManager: "</span>  + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Succeeded in creating KVManager"</span>);</li><li>        kvManager = manager;</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"An unexpected error occurred. Error:"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1193px;"><h2 id="distributeddatacreatekvmanager-1" device-type="phone,2in1,tablet,wearable,tv">distributedData.createKVManager<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="distributeddatacreatekvmanager-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createKVManager(config: KVManagerConfig): Promise&lt;KVManager&gt;</p> <p>创建一个KVManager对象实例，用于管理数据库对象，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">config</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvmanager">KVManagerConfig</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">提供KVManager实例的配置信息，包括调用方的包名和用户信息。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvmanager">KVManager</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回创建的KVManager对象实例。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> kvManagerConfig = {</li><li>    <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.datamanagertest'</span>,</li><li>    <span class="hljs-attr">userInfo</span>: {</li><li>      <span class="hljs-attr">userId</span>: <span class="hljs-string">'0'</span>,</li><li>      <span class="hljs-attr">userType</span>: distributedData.<span class="hljs-property">UserType</span>.<span class="hljs-property">SAME_USER_ID</span></li><li>    }</li><li>  }</li><li>  distributedData.<span class="hljs-title function_">createKVManager</span>(kvManagerConfig).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">manager</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Succeeded in creating KVManager"</span>);</li><li>    kvManager = manager;</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to create KVManager: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"An unexpected error occurred. Error:"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 378px;"><h2 id="kvmanagerconfig" device-type="phone,2in1,tablet,wearable,tv">KVManagerConfig<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="kvmanagerconfig" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供KVManager实例的配置信息，包括调用方的Bundle名称和用户信息。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.4.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">userInfo</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#userinfo">UserInfo</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">调用方的用户信息。</td> </tr> <tr><td class="cellrowborder" width="25%">bundleName</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">调用方的Bundle名称。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 426px;"><h2 id="userinfo" device-type="phone,2in1,tablet,wearable,tv">UserInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="userinfo" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用户信息。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.4.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">userId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">指示要设置的用户ID，默认为'0'。</td> </tr> <tr><td class="cellrowborder" width="25%">userType</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#usertype">UserType</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">指示要设置的用户类型，默认为0。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 333px;"><h2 id="usertype" device-type="phone,2in1,tablet,wearable,tv">UserType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="usertype" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用户类型枚举。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">SAME_USER_ID</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">使用同一账号登录不同设备的用户。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 206px;"><h2 id="kvmanager" device-type="phone,2in1,tablet,wearable,tv">KVManager<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="kvmanager" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>数据管理实例，用于获取KVStore的相关信息。在调用KVManager的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#distributeddatacreatekvmanager">createKVManager</a>构建一个KVManager实例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1256px;"><h3 id="getkvstore" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">getKVStore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getkvstore" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getKVStore&lt;T extends KVStore&gt;(storeId: string, options: Options, callback: AsyncCallback&lt;T&gt;): void</p> <p>通过指定Options和storeId，创建并获取KVStore数据库，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">storeId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">数据库唯一标识符，长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_STORE_ID_LENGTH</a>。</td> </tr> <tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#options">Options</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">创建KVStore实例的配置信息。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;T&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回创建的KVStore数据库实例。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">let</span> kvManager;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> options = {</li><li>        createIfMissing : <span class="hljs-literal">true</span>,</li><li>        encrypt : <span class="hljs-literal">false</span>,</li><li>        backup : <span class="hljs-literal">false</span>,</li><li>        autoSync : <span class="hljs-literal">true</span>,</li><li>        kvStoreType : distributedData.<span class="hljs-property">KVStoreType</span>.<span class="hljs-property">SINGLE_VERSION</span>,</li><li>        securityLevel : distributedData.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span>,</li><li>    };</li><li>    kvManager.<span class="hljs-title function_">getKVStore</span>(<span class="hljs-string">'storeId'</span>, options, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, store</span>) {</li><li>        <span class="hljs-keyword">if</span> (err) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"getKVStore err: "</span>  + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"getKVStore success"</span>);</li><li>        kvStore = store;</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"An unexpected error occurred. Error:"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1326px;"><h3 id="getkvstore-1" device-type="phone,2in1,tablet,wearable,tv">getKVStore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getkvstore-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getKVStore&lt;T extends KVStore&gt;(storeId: string, options: Options): Promise&lt;T&gt;</p> <p>通过指定Options和storeId，创建并获取KVStore数据库，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">storeId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">数据库唯一标识符，长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_STORE_ID_LENGTH</a>。</td> </tr> <tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#options">Options</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">创建KVStore实例的配置信息。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;T&gt; ，&lt;T extends <a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstore">KVStore</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回创建的KVStore数据库实例。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">let</span> kvManager;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> options = {</li><li>        createIfMissing : <span class="hljs-literal">true</span>,</li><li>        encrypt : <span class="hljs-literal">false</span>,</li><li>        backup : <span class="hljs-literal">false</span>,</li><li>        autoSync : <span class="hljs-literal">true</span>,</li><li>        kvStoreType : distributedData.<span class="hljs-property">KVStoreType</span>.<span class="hljs-property">SINGLE_VERSION</span>,</li><li>        securityLevel : distributedData.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span>,</li><li>    };</li><li>    kvManager.<span class="hljs-title function_">getKVStore</span>(<span class="hljs-string">'storeId'</span>, options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">store</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"getKVStore success"</span>);</li><li>        kvStore = store;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"getKVStore err: "</span>  + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"An unexpected error occurred. Error:"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1269px;"><h3 id="closekvstore8" device-type="phone,2in1,tablet,wearable,tv">closeKVStore<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="closekvstore8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>closeKVStore(appId: string, storeId: string, kvStore: KVStore, callback: AsyncCallback&lt;void&gt;): void</p> <p>通过storeId的值关闭指定的KVStore数据库，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">appId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">所调用数据库方的包名。</td> </tr> <tr><td class="cellrowborder" width="25%">storeId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要关闭的数据库唯一标识符，长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_STORE_ID_LENGTH</a>。</td> </tr> <tr><td class="cellrowborder" width="25%">kvStore</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstore">KVStore</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要关闭的KVStore数据库。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">let</span> kvManager;</li><li><span class="hljs-keyword">const</span> options = {</li><li>    <span class="hljs-attr">createIfMissing</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">encrypt</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">backup</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">autoSync</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">kvStoreType</span>: distributedData.<span class="hljs-property">KVStoreType</span>.<span class="hljs-property">SINGLE_VERSION</span>,</li><li>    <span class="hljs-attr">schema</span>: <span class="hljs-literal">undefined</span>,</li><li>    <span class="hljs-attr">securityLevel</span>: distributedData.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span>,</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>    kvManager.<span class="hljs-title function_">getKVStore</span>(<span class="hljs-string">'storeId'</span>, options, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, store</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getKVStore success'</span>);</li><li>        kvStore = store;</li><li>        kvManager.<span class="hljs-title function_">closeKVStore</span>(<span class="hljs-string">'appId'</span>, <span class="hljs-string">'storeId'</span>, kvStore, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeKVStore success'</span>);</li><li>        });</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeKVStore e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1491px;"><h3 id="closekvstore8-1" device-type="phone,2in1,tablet,wearable,tv">closeKVStore<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="closekvstore8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>closeKVStore(appId: string, storeId: string, kvStore: KVStore): Promise&lt;void&gt;</p> <p>通过storeId的值关闭指定的KVStore数据库，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">appId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">所调用数据库方的包名。</td> </tr> <tr><td class="cellrowborder" width="25%">storeId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要关闭的数据库唯一标识符，长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_STORE_ID_LENGTH</a>。</td> </tr> <tr><td class="cellrowborder" width="25%">kvStore</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstore">KVStore</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要关闭的KVStore数据库。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvManager;</li><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> options = {</li><li>    <span class="hljs-attr">createIfMissing</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">encrypt</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">backup</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">autoSync</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">kvStoreType</span>: distributedData.<span class="hljs-property">KVStoreType</span>.<span class="hljs-property">SINGLE_VERSION</span>,</li><li>    <span class="hljs-attr">schema</span>: <span class="hljs-literal">undefined</span>,</li><li>    <span class="hljs-attr">securityLevel</span>: distributedData.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span>,</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>    kvManager.<span class="hljs-title function_">getKVStore</span>(<span class="hljs-string">'storeId'</span>, options).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (store) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getKVStore success'</span>);</li><li>        kvStore = store;</li><li>        kvManager.<span class="hljs-title function_">closeKVStore</span>(<span class="hljs-string">'appId'</span>, <span class="hljs-string">'storeId'</span>, kvStore).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeKVStore success'</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeKVStore err '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>        });</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CloseKVStore getKVStore err '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeKVStore e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1224px;"><h3 id="deletekvstore8" device-type="phone,2in1,tablet,wearable,tv">deleteKVStore<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletekvstore8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteKVStore(appId: string, storeId: string, callback: AsyncCallback&lt;void&gt;): void</p> <p>通过storeId的值删除指定的KVStore数据库，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">appId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">所调用数据库方的包名。</td> </tr> <tr><td class="cellrowborder" width="25%">storeId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要删除的数据库唯一标识符，长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_STORE_ID_LENGTH</a>。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvManager;</li><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> options = {</li><li>    createIfMissing : <span class="hljs-literal">true</span>,</li><li>    encrypt : <span class="hljs-literal">false</span>,</li><li>    backup : <span class="hljs-literal">false</span>,</li><li>    autoSync : <span class="hljs-literal">true</span>,</li><li>    kvStoreType : distributedData.<span class="hljs-property">KVStoreType</span>.<span class="hljs-property">SINGLE_VERSION</span>,</li><li>    schema : <span class="hljs-literal">undefined</span>,</li><li>    securityLevel : distributedData.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span>,</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>    kvManager.<span class="hljs-title function_">getKVStore</span>(<span class="hljs-string">'store'</span>, options, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, store</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getKVStore success'</span>);</li><li>        kvStore = store;</li><li>        kvManager.<span class="hljs-title function_">deleteKVStore</span>(<span class="hljs-string">'appId'</span>, <span class="hljs-string">'storeId'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'deleteKVStore success'</span>);</li><li>        });</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'DeleteKVStore e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1446px;"><h3 id="deletekvstore8-1" device-type="phone,2in1,tablet,wearable,tv">deleteKVStore<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletekvstore8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteKVStore(appId: string, storeId: string): Promise&lt;void&gt;</p> <p>通过storeId的值删除指定的KVStore数据库，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">appId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">所调用数据库方的包名。</td> </tr> <tr><td class="cellrowborder" width="25%">storeId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要删除的数据库唯一标识符，长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_STORE_ID_LENGTH</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvManager;</li><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> options = {</li><li>    createIfMissing : <span class="hljs-literal">true</span>,</li><li>    encrypt : <span class="hljs-literal">false</span>,</li><li>    backup : <span class="hljs-literal">false</span>,</li><li>    autoSync : <span class="hljs-literal">true</span>,</li><li>    kvStoreType : distributedData.<span class="hljs-property">KVStoreType</span>.<span class="hljs-property">SINGLE_VERSION</span>,</li><li>    schema : <span class="hljs-literal">undefined</span>,</li><li>    securityLevel : distributedData.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span>,</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>    kvManager.<span class="hljs-title function_">getKVStore</span>(<span class="hljs-string">'storeId'</span>, options).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (store) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getKVStore success'</span>);</li><li>        kvStore = store;</li><li>        kvManager.<span class="hljs-title function_">deleteKVStore</span>(<span class="hljs-string">'appId'</span>, <span class="hljs-string">'storeId'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'deleteKVStore success'</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'deleteKVStore err '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>        });</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getKVStore err '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'deleteKVStore e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 843px;"><h3 id="getallkvstoreid8" device-type="phone,2in1,tablet,wearable,tv">getAllKVStoreId<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getallkvstoreid8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAllKVStoreId(appId: string, callback: AsyncCallback&lt;string[]&gt;): void</p> <p>获取所有通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#getkvstore">getKVStore</a>方法创建的且没有调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#deletekvstore8">deleteKVStore</a>方法删除的KVStore数据库的storeId，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">appId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">所调用数据库方的包名。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;string[]&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回所有创建的KvStore数据库的storeId。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvManager;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvManager.<span class="hljs-title function_">getAllKVStoreId</span>(<span class="hljs-string">'appId'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetAllKVStoreId success'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetAllKVStoreId size = '</span> + data.<span class="hljs-property">length</span>);</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetAllKVStoreId e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1017px;"><h3 id="getallkvstoreid8-1" device-type="phone,2in1,tablet,wearable,tv">getAllKVStoreId<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getallkvstoreid8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAllKVStoreId(appId: string): Promise&lt;string[]&gt;</p> <p>获取所有通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#getkvstore">getKVStore</a>方法创建的且没有调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#deletekvstore8">deleteKVStore</a>方法删除的KVStore数据库的storeId，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">appId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">所调用数据库方的包名。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;string[]&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回所有创建的KvStore数据库的storeId。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvManager;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetAllKVStoreId'</span>);</li><li>    kvManager.<span class="hljs-title function_">getAllKVStoreId</span>(<span class="hljs-string">'appId'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getAllKVStoreId success'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'size = '</span> + data.<span class="hljs-property">length</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getAllKVStoreId err '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>} <span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getAllKVStoreId e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 891px;"><h3 id="ondistributeddataservicedie8" device-type="phone,2in1,tablet,wearable,tv">on('distributedDataServiceDie')<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondistributeddataservicedie8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'distributedDataServiceDie', deathCallback: Callback&lt;void&gt;): void</p> <p>订阅服务状态变更通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">订阅的事件名，固定为'distributedDataServiceDie'，即服务状态变更事件。</td> </tr> <tr><td class="cellrowborder" width="25%">deathCallback</td> <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvManager;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'KVManagerOn'</span>);</li><li>    <span class="hljs-keyword">const</span> deathCallback = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'death callback call'</span>);</li><li>    }</li><li>    kvManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'distributedDataServiceDie'</span>, deathCallback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"An unexpected error occurred. Error:"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 963px;"><h3 id="offdistributeddataservicedie8" device-type="phone,2in1,tablet,wearable,tv">off('distributedDataServiceDie')<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdistributeddataservicedie8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'distributedDataServiceDie', deathCallback?: Callback&lt;void&gt;): void</p> <p>取消订阅服务状态变更通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">取消订阅的事件名，固定为'distributedDataServiceDie'，即服务状态变更事件。</td> </tr> <tr><td class="cellrowborder" width="25%">deathCallback</td> <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">取消订阅的函数。如不设置callback，则取消所有已订阅的函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvManager;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'KVManagerOff'</span>);</li><li>    <span class="hljs-keyword">const</span> deathCallback = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'death callback call'</span>);</li><li>    }</li><li>    kvManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'distributedDataServiceDie'</span>, deathCallback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"An unexpected error occurred. Error:"</span> + e);</li><li>}</li><li>    </li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1587px;"><h2 id="options" device-type="phone,2in1,tablet,wearable,tv">Options<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="options" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用于提供创建数据库的配置信息。</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.3.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.22.3.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.3.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.22.3.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">createIfMissing</td> <td class="cellrowborder" width="25%">boolean</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>当数据库文件不存在时是否创建数据库，默认为true，即创建。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> </td> </tr> <tr><td class="cellrowborder" width="25%">encrypt</td> <td class="cellrowborder" width="25%">boolean</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>设置数据库文件是否加密，默认为false，即不加密。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> </td> </tr> <tr><td class="cellrowborder" width="25%">backup</td> <td class="cellrowborder" width="25%">boolean</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>设置数据库文件是否备份，默认为true，即备份。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> </td> </tr> <tr><td class="cellrowborder" width="25%">autoSync</td> <td class="cellrowborder" width="25%">boolean</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>设置数据库文件是否自动同步。默认为false，即手动同步。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>需要权限</strong>： ohos.permission.DISTRIBUTED_DATASYNC</p> </td> </tr> <tr><td class="cellrowborder" width="25%">kvStoreType</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoretype">KVStoreType</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>设置要创建的数据库类型，默认为DEVICE_COLLABORATION，即多设备协同数据库。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> </td> </tr> <tr><td class="cellrowborder" width="25%">securityLevel</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#securitylevel">SecurityLevel</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>设置数据库安全级别(S1-S4)。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> </td> </tr> <tr><td class="cellrowborder" width="25%">schema<sup>8+</sup></td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#schema8">Schema</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%"><p>设置定义存储在数据库中的值，默认为undefined，即不使用schema。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 735px;"><h2 id="kvstoretype" device-type="phone,2in1,tablet,wearable,tv">KVStoreType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="kvstoretype" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>KVStore数据库类型枚举。</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.3.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.23.3.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.23.3.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">DEVICE_COLLABORATION</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%"><p>表示多设备协同数据库。</p> <p><strong>数据库特点：</strong> 数据以设备的维度管理，不存在冲突；支持按照设备的维度查询数据。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">SINGLE_VERSION</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%"><p>表示单版本数据库。</p> <p><strong>数据库特点：</strong> 数据不分设备，设备之间修改相同的key会覆盖。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">MULTI_VERSION</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%"><p>表示多版本数据库。当前暂不支持使用此接口。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1230px;"><h2 id="securitylevel" device-type="phone,2in1,tablet,wearable,tv">SecurityLevel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitylevel" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>数据库的安全级别枚举。</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.3.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.24.3.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.24.3.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">NO_LEVEL</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%"><p>表示数据库不设置安全级别(已废弃)。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">S0</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%"><p>表示数据库的安全级别为公共级别(已废弃)。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">S1</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%"><p>表示数据库的安全级别为低级别，当数据泄露时会产生较低影响。例如，包含壁纸等系统数据的数据库。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">S2</td> <td class="cellrowborder" width="33.33333333333333%">3</td> <td class="cellrowborder" width="33.33333333333333%"><p>表示数据库的安全级别为中级别，当数据泄露时会产生较大影响。例如，包含录音、视频等用户生成数据或通话记录等信息的数据库。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">S3</td> <td class="cellrowborder" width="33.33333333333333%">5</td> <td class="cellrowborder" width="33.33333333333333%"><p>表示数据库的安全级别为高级别，当数据泄露时会产生重大影响。例如，包含用户运动、健康、位置等信息的数据库。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">S4</td> <td class="cellrowborder" width="33.33333333333333%">6</td> <td class="cellrowborder" width="33.33333333333333%"><p>表示数据库的安全级别为关键级别，当数据泄露时会产生严重影响。例如，包含认证凭据、财务数据等信息的数据库。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> </td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 630px;"><h2 id="constants" device-type="phone,2in1,tablet,wearable,tv">Constants<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constants" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>KVStore常量。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.25.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.25.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">MAX_KEY_LENGTH</td> <td class="cellrowborder" width="33.33333333333333%">1024</td> <td class="cellrowborder" width="33.33333333333333%">数据库中Key允许的最大长度，单位字节。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">MAX_VALUE_LENGTH</td> <td class="cellrowborder" width="33.33333333333333%">4194303</td> <td class="cellrowborder" width="33.33333333333333%">数据库中Value允许的最大长度，单位字节。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">MAX_KEY_LENGTH_DEVICE</td> <td class="cellrowborder" width="33.33333333333333%">896</td> <td class="cellrowborder" width="33.33333333333333%">最大设备密钥长度，单位字节。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">MAX_STORE_ID_LENGTH</td> <td class="cellrowborder" width="33.33333333333333%">128</td> <td class="cellrowborder" width="33.33333333333333%">数据库标识符允许的最大长度，单位字节。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">MAX_QUERY_LENGTH</td> <td class="cellrowborder" width="33.33333333333333%">512000</td> <td class="cellrowborder" width="33.33333333333333%">最大查询长度，单位字节。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">MAX_BATCH_SIZE</td> <td class="cellrowborder" width="33.33333333333333%">128</td> <td class="cellrowborder" width="33.33333333333333%">最大批处理操作数量。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 492px;"><h2 id="schema8" device-type="phone,2in1,tablet,wearable,tv">Schema<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="schema8" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示数据库模式，可以在创建或打开数据库时创建Schema对象并将它们放入<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#options">Options</a>中。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.26.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.26.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.4.1.6.1.3" width="20%">可读</th> <th align="left" class="cellrowborder" id="mcps1.3.26.4.1.6.1.4" width="20%">可写</th> <th align="left" class="cellrowborder" id="mcps1.3.26.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">root<sup>8+</sup></td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#fieldnode8">FieldNode</a></td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示json根对象。</td> </tr> <tr><td class="cellrowborder" width="20%">indexes<sup>8+</sup></td> <td class="cellrowborder" width="20%">Array&lt;string&gt;</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示json类型的字符串数组。</td> </tr> <tr><td class="cellrowborder" width="20%">mode<sup>8+</sup></td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示Schema的模式。</td> </tr> <tr><td class="cellrowborder" width="20%">skip<sup>8+</sup></td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">Schema的跳跃大小。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 254px;"><h3 id="constructor8" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p> <p>用于创建Schema实例的构造函数。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 495px;"><h2 id="fieldnode8" device-type="phone,2in1,tablet,wearable,tv">FieldNode<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="fieldnode8" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示 Schema 实例的节点，提供定义存储在数据库中的值的方法。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.28.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.28.4.1.6.1.3" width="20%">可读</th> <th align="left" class="cellrowborder" id="mcps1.3.28.4.1.6.1.4" width="20%">可写</th> <th align="left" class="cellrowborder" id="mcps1.3.28.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">nullable<sup>8+</sup></td> <td class="cellrowborder" width="20%">boolean</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示数据库字段是否可以为空。</td> </tr> <tr><td class="cellrowborder" width="20%">default<sup>8+</sup></td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示Fieldnode的默认值。</td> </tr> <tr><td class="cellrowborder" width="20%">type<sup>8+</sup></td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示指定节点对应数据类型的值。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 405px;"><h3 id="constructor8-1" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(name: string)</p> <p>用于创建带有string字段FieldNode实例的构造函数。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">name</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">FieldNode的值。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1161px;"><h3 id="appendchild8" device-type="phone,2in1,tablet,wearable,tv">appendChild<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="appendchild8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>appendChild(child: FieldNode): boolean</p> <p>在当前 FieldNode 中添加一个子节点。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">child</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#fieldnode8">FieldNode</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要附加的域节点。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.30.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回true表示子节点成功添加到FieldNode；返回false则表示操作失败。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ddm <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.distributedData'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> node = <span class="hljs-keyword">new</span> ddm.<span class="hljs-title class_">FieldNode</span>(<span class="hljs-string">"root"</span>);</li><li>    <span class="hljs-keyword">let</span> child1 = <span class="hljs-keyword">new</span> ddm.<span class="hljs-title class_">FieldNode</span>(<span class="hljs-string">"child1"</span>);</li><li>    <span class="hljs-keyword">let</span> child2 = <span class="hljs-keyword">new</span> ddm.<span class="hljs-title class_">FieldNode</span>(<span class="hljs-string">"child2"</span>);</li><li>    <span class="hljs-keyword">let</span> child3 = <span class="hljs-keyword">new</span> ddm.<span class="hljs-title class_">FieldNode</span>(<span class="hljs-string">"child3"</span>);</li><li>    node.<span class="hljs-title function_">appendChild</span>(child1);</li><li>    node.<span class="hljs-title function_">appendChild</span>(child2);</li><li>    node.<span class="hljs-title function_">appendChild</span>(child3);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"appendNode "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(node));</li><li>    child1 = <span class="hljs-literal">null</span>;</li><li>    child2 = <span class="hljs-literal">null</span>;</li><li>    child3 = <span class="hljs-literal">null</span>;</li><li>    node = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"AppendChild "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 230px;"><h2 id="kvstoreresultset8" device-type="phone,2in1,tablet,wearable,tv">KvStoreResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="kvstoreresultset8" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供获取KVStore数据库结果集的相关方法，包括查询和移动数据读取位置等。</p> <p>在调用KvStoreResultSet的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#getkvstore">getKVStore</a>构建一个KVStore实例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 898px;"><h3 id="getcount8" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">getCount<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcount8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCount(): number</p> <p>获取结果集中的总行数。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">number</td> <td class="cellrowborder" width="50%">返回数据的总行数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> count = resultSet.<span class="hljs-title function_">getCount</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"getCount succeed:"</span> + count);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"getCount failed: "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 914px;"><h3 id="getposition8" device-type="phone,2in1,tablet,wearable,tv">getPosition<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getposition8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPosition(): number</p> <p>获取结果集中当前的读取位置。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">number</td> <td class="cellrowborder" width="50%">返回当前读取位置。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeeded.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> position = resultSet.<span class="hljs-title function_">getPosition</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"getPosition succeed:"</span> + position);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"getPosition failed: "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 914px;"><h3 id="movetofirst8" device-type="phone,2in1,tablet,wearable,tv">moveToFirst<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="movetofirst8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>moveToFirst(): boolean</p> <p>将读取位置移动到第一行。如果结果集为空，则返回false。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回true表示操作成功；返回false则表示操作失败。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> moved1 = resultSet.<span class="hljs-title function_">moveToFirst</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"moveToFirst succeed: "</span> + moved1);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"moveToFirst failed "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 914px;"><h3 id="movetolast8" device-type="phone,2in1,tablet,wearable,tv">moveToLast<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="movetolast8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>moveToLast(): boolean</p> <p>将读取位置移动到最后一行。如果结果集为空，则返回false。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回true表示操作成功；返回false则表示操作失败。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> moved2 = resultSet.<span class="hljs-title function_">moveToLast</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"moveToLast succeed:"</span> + moved2);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"moveToLast failed: "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 914px;"><h3 id="movetonext8" device-type="phone,2in1,tablet,wearable,tv">moveToNext<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="movetonext8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>moveToNext(): boolean</p> <p>将读取位置移动到下一行。如果结果集为空，则返回false。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回true表示操作成功；返回false则表示操作失败。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> moved3 = resultSet.<span class="hljs-title function_">moveToNext</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"moveToNext succeed: "</span> + moved3);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"moveToNext failed: "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 914px;"><h3 id="movetoprevious8" device-type="phone,2in1,tablet,wearable,tv">moveToPrevious<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="movetoprevious8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>moveToPrevious(): boolean</p> <p>将读取位置移动到上一行。如果结果集为空，则返回false。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回true表示操作成功；返回false则表示操作失败。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> moved4 = resultSet.<span class="hljs-title function_">moveToPrevious</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"moveToPrevious succeed:"</span> + moved4);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"moveToPrevious failed: "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1113px;"><h3 id="move8" device-type="phone,2in1,tablet,wearable,tv">move<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="move8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>move(offset: number): boolean</p> <p>将读取位置移动到当前位置的相对偏移量。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">offset</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示与当前位置的相对偏移量，负偏移表示向后移动，正偏移表示向前移动。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回true表示操作成功；返回false则表示操作失败。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> moved5 = resultSet.<span class="hljs-title function_">move</span>(<span class="hljs-number">1</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"move succeed:"</span> + moved5);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"move failed: "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1065px;"><h3 id="movetoposition8" device-type="phone,2in1,tablet,wearable,tv">moveToPosition<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="movetoposition8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>moveToPosition(position: number): boolean</p> <p>将读取位置从 0 移动到绝对位置。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">position</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示绝对位置。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回true表示操作成功；返回false则表示操作失败。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> moved6 = resultSet.<span class="hljs-title function_">moveToPosition</span>(<span class="hljs-number">1</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"moveToPosition succeed: "</span> + moved6);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"moveToPosition failed: "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 938px;"><h3 id="isfirst8" device-type="phone,2in1,tablet,wearable,tv">isFirst<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isfirst8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isFirst(): boolean</p> <p>检查读取位置是否为第一行。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回true表示读取位置为第一行；返回false表示读取位置不是第一行。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> isfirst = resultSet.<span class="hljs-title function_">isFirst</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Check isFirst succeed:"</span> + isfirst);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Check isFirst failed: "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 938px;"><h3 id="islast8" device-type="phone,2in1,tablet,wearable,tv">isLast<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="islast8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isLast(): boolean</p> <p>检查读取位置是否为最后一行。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回true表示读取位置为最后一行；返回false表示读取位置不是最后一行。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> islast = resultSet.<span class="hljs-title function_">isLast</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Check isLast succeed: "</span> + islast);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Check isLast failed: "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 938px;"><h3 id="isbeforefirst8" device-type="phone,2in1,tablet,wearable,tv">isBeforeFirst<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isbeforefirst8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isBeforeFirst(): boolean</p> <p>检查读取位置是否在第一行之前。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回true表示读取位置在第一行之前；返回false表示读取位置不在第一行之前。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> isbeforefirst = resultSet.<span class="hljs-title function_">isBeforeFirst</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Check isBeforeFirst succeed: "</span> + isbeforefirst);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Check isBeforeFirst failed: "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 938px;"><h3 id="isafterlast8" device-type="phone,2in1,tablet,wearable,tv">isAfterLast<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isafterlast8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isAfterLast(): boolean</p> <p>检查读取位置是否在最后一行之后。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.43.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">返回true表示读取位置在最后一行之后；返回false表示读取位置不在最后一行之后。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> isafterlast = resultSet.<span class="hljs-title function_">isAfterLast</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Check isAfterLast succeed:"</span> + isafterlast);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Check isAfterLast failed: "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 914px;"><h3 id="getentry8" device-type="phone,2in1,tablet,wearable,tv">getEntry<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentry8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntry(): Entry</p> <p>从当前位置获取对应的键值对。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.44.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.44.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a></td> <td class="cellrowborder" width="50%">返回键值对。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> entry  = resultSet.<span class="hljs-title function_">getEntry</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"getEntry succeed:"</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entry));</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"getEntry failed: "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 230px;"><h2 id="query8" device-type="phone,2in1,tablet,wearable,tv">Query<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="query8" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>使用谓词表示数据库查询，提供创建Query实例、查询数据库中的数据和添加谓词的方法。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 254px;"><h3 id="constructor8-2" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor8-2" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p> <p>用于创建Schema实例的构造函数。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 818px;"><h3 id="reset8" device-type="phone,2in1,tablet,wearable,tv">reset<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="reset8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>reset(): Query</p> <p>重置Query对象。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.47.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.47.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回重置的Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query.<span class="hljs-title function_">reset</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"simply calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 990px;"><h3 id="equalto8" device-type="phone,2in1,tablet,wearable,tv">equalTo<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="equalto8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>equalTo(field: string, value: number|string|boolean): Query</p> <p>构造一个Query对象来查询具有指定字段的条目，其值等于指定的值。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">number|string|boolean</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.48.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 990px;"><h3 id="notequalto8" device-type="phone,2in1,tablet,wearable,tv">notEqualTo<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="notequalto8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>notEqualTo(field: string, value: number|string|boolean): Query</p> <p>构造一个Query对象以查询具有指定字段且值不等于指定值的条目。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.49.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.49.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.49.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.49.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">number|string|boolean</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.49.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.49.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 990px;"><h3 id="greaterthan8" device-type="phone,2in1,tablet,wearable,tv">greaterThan<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="greaterthan8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>greaterThan(field: string, value: number|string|boolean): Query</p> <p>构造一个Query对象以查询具有大于指定值的指定字段的条目。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.50.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">number|string|boolean</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.50.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">greaterThan</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 990px;"><h3 id="lessthan8" device-type="phone,2in1,tablet,wearable,tv">lessThan<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="lessthan8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>lessThan(field: string, value: number|string): Query</p> <p>构造一个Query对象以查询具有小于指定值的指定字段的条目。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">number|string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.51.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">lessThan</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 990px;"><h3 id="greaterthanorequalto8" device-type="phone,2in1,tablet,wearable,tv">greaterThanOrEqualTo<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="greaterthanorequalto8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>greaterThanOrEqualTo(field: string, value: number|string): Query</p> <p>构造一个Query对象以查询具有指定字段且值大于或等于指定值的条目。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">number|string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.52.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.52.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">greaterThanOrEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 990px;"><h3 id="lessthanorequalto8" device-type="phone,2in1,tablet,wearable,tv">lessThanOrEqualTo<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="lessthanorequalto8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>lessThanOrEqualTo(field: string, value: number|string): Query</p> <p>构造一个Query对象以查询具有指定字段且值小于或等于指定值的条目。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.53.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">number|string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.53.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.53.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">lessThanOrEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 945px;"><h3 id="isnull8" device-type="phone,2in1,tablet,wearable,tv">isNull<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isnull8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isNull(field: string): Query</p> <p>构造一个Query对象以查询具有值为null的指定字段的条目。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.54.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.54.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.54.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.54.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.54.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.54.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">isNull</span>(<span class="hljs-string">"field"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 990px;"><h3 id="innumber8" device-type="phone,2in1,tablet,wearable,tv">inNumber<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="innumber8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inNumber(field: string, valueList: number[]): Query</p> <p>构造一个Query对象以查询具有指定字段的条目，其值在指定的值列表中。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr> <tr><td class="cellrowborder" width="25%">valueList</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的值列表。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.55.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.55.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">inNumber</span>(<span class="hljs-string">"field"</span>, [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 990px;"><h3 id="instring8" device-type="phone,2in1,tablet,wearable,tv">inString<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="instring8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inString(field: string, valueList: string[]): Query</p> <p>构造一个Query对象以查询具有指定字段的条目，其值在指定的字符串值列表中。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr> <tr><td class="cellrowborder" width="25%">valueList</td> <td class="cellrowborder" width="25%">string[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的字符串值列表。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.56.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.56.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">inString</span>(<span class="hljs-string">"field"</span>, [<span class="hljs-string">'test1'</span>, <span class="hljs-string">'test2'</span>]);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 990px;"><h3 id="notinnumber8" device-type="phone,2in1,tablet,wearable,tv">notInNumber<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="notinnumber8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>notInNumber(field: string, valueList: number[]): Query</p> <p>构造一个Query对象以查询具有指定字段的条目，该字段的值不在指定的值列表中。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr> <tr><td class="cellrowborder" width="25%">valueList</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的值列表。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.57.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.57.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">notInNumber</span>(<span class="hljs-string">"field"</span>, [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 990px;"><h3 id="notinstring8" device-type="phone,2in1,tablet,wearable,tv">notInString<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="notinstring8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>notInString(field: string, valueList: string[]): Query</p> <p>构造一个Query对象以查询具有指定字段且值不在指定字符串值列表中的条目。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.58.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.58.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.58.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.58.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr> <tr><td class="cellrowborder" width="25%">valueList</td> <td class="cellrowborder" width="25%">string[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的字符串值列表。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.58.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.58.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">notInString</span>(<span class="hljs-string">"field"</span>, [<span class="hljs-string">'test1'</span>, <span class="hljs-string">'test2'</span>]);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 990px;"><h3 id="like8" device-type="phone,2in1,tablet,wearable,tv">like<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="like8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>like(field: string, value: string): Query</p> <p>构造一个Query对象以查询具有与指定字符串值相似的指定字段的条目。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的字符串值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.59.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.59.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">like</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 990px;"><h3 id="unlike8" device-type="phone,2in1,tablet,wearable,tv">unlike<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="unlike8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unlike(field: string, value: string): Query</p> <p>构造一个Query对象以查询具有与指定字符串值不相似的指定字段的条目。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.60.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.60.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.60.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.60.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的字符串值。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.60.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">unlike</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 818px;"><h3 id="and8" device-type="phone,2in1,tablet,wearable,tv">and<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="and8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>and(): Query</p> <p>构造一个带有与条件的查询对象。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.61.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回查询对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value1"</span>);</li><li>    query.<span class="hljs-title function_">and</span>();</li><li>    query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value2"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 818px;"><h3 id="or8" device-type="phone,2in1,tablet,wearable,tv">or<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="or8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>or(): Query</p> <p>构造一个带有或条件的Query对象。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.62.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回查询对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value1"</span>);</li><li>    query.<span class="hljs-title function_">or</span>();</li><li>    query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value2"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 969px;"><h3 id="orderbyasc8" device-type="phone,2in1,tablet,wearable,tv">orderByAsc<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="orderbyasc8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>orderByAsc(field: string): Query</p> <p>构造一个Query对象，将查询结果按升序排序。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.63.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.63.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.63.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.63.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.63.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.63.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    query.<span class="hljs-title function_">orderByAsc</span>(<span class="hljs-string">"field"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 969px;"><h3 id="orderbydesc8" device-type="phone,2in1,tablet,wearable,tv">orderByDesc<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="orderbydesc8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>orderByDesc(field: string): Query</p> <p>构造一个Query对象，将查询结果按降序排序。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.64.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.64.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    query.<span class="hljs-title function_">orderByDesc</span>(<span class="hljs-string">"field"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1038px;"><h3 id="limit8" device-type="phone,2in1,tablet,wearable,tv">limit<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="limit8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>limit(total: number, offset: number): Query</p> <p>构造一个Query对象来指定结果的数量和开始位置。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">total</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的结果数。</td> </tr> <tr><td class="cellrowborder" width="25%">offset</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示起始位置。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.65.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.65.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> total = <span class="hljs-number">10</span>;</li><li><span class="hljs-keyword">let</span> offset = <span class="hljs-number">1</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    query.<span class="hljs-title function_">limit</span>(total, offset);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 945px;"><h3 id="isnotnull8" device-type="phone,2in1,tablet,wearable,tv">isNotNull<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isnotnull8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isNotNull(field: string): Query</p> <p>构造一个Query对象以查询具有值不为null的指定字段的条目。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.66.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.66.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">field</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定字段，不能包含' ^ '。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.66.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.66.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">isNotNull</span>(<span class="hljs-string">"field"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 818px;"><h3 id="begingroup8" device-type="phone,2in1,tablet,wearable,tv">beginGroup<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="begingroup8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>beginGroup(): Query</p> <p>创建一个带有左括号的查询条件组。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.67.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.67.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">beginGroup</span>();</li><li>    query.<span class="hljs-title function_">isNotNull</span>(<span class="hljs-string">"field"</span>);</li><li>    query.<span class="hljs-title function_">endGroup</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 818px;"><h3 id="endgroup8" device-type="phone,2in1,tablet,wearable,tv">endGroup<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="endgroup8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>endGroup(): Query</p> <p>创建一个带有右括号的查询条件组。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.68.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.68.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">beginGroup</span>();</li><li>    query.<span class="hljs-title function_">isNotNull</span>(<span class="hljs-string">"field"</span>);</li><li>    query.<span class="hljs-title function_">endGroup</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 945px;"><h3 id="prefixkey8" device-type="phone,2in1,tablet,wearable,tv">prefixKey<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="prefixkey8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>prefixKey(prefix: string): Query</p> <p>创建具有指定键前缀的查询条件。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.69.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.69.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.69.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.69.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">prefix</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示指定的键前缀。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.69.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.69.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"$.name"</span>);</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"0"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 945px;"><h3 id="setsuggestindex8" device-type="phone,2in1,tablet,wearable,tv">setSuggestIndex<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsuggestindex8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSuggestIndex(index: string): Query</p> <p>设置一个指定的索引，将优先用于查询。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.70.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.70.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.70.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.70.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">index</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">指示要设置的索引。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.70.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.70.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">setSuggestIndex</span>(<span class="hljs-string">"$.name"</span>);</li><li>    query.<span class="hljs-title function_">setSuggestIndex</span>(<span class="hljs-string">"0"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1037px;"><h3 id="deviceid8" device-type="phone,2in1,tablet,wearable,tv">deviceId<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deviceid8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deviceId(deviceId:string):Query</p> <p>添加设备ID作为key的前缀。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.71.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.71.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.71.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.71.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">指示查询的设备ID。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.71.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.71.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="50%">返回Query对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">deviceId</span>(<span class="hljs-string">"deviceId"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"should be ok on Method Chaining : "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 746px;"><h3 id="getsqllike8" device-type="phone,2in1,tablet,wearable,tv">getSqlLike<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsqllike8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSqlLike():string</p> <p>获取Query对象的查询语句。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.72.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">string</td> <td class="cellrowborder" width="50%">返回一个字段列中包含对应子串的结果。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">let</span> sql1 = query.<span class="hljs-title function_">getSqlLike</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"GetSqlLike sql="</span> + sql1);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"duplicated calls should be ok : "</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 230px;"><h2 id="kvstore" device-type="phone,2in1,tablet,wearable,tv">KVStore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="kvstore" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>KVStore数据库实例，提供增加数据、删除数据和订阅数据变更、订阅数据同步完成的方法。</p> <p>在调用KVStore的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#getkvstore">getKVStore</a>构建一个KVStore实例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1136px;"><h3 id="put" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">put<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="put" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>put(key: string, value: Uint8Array | string | number | boolean, callback: AsyncCallback&lt;void&gt;): void</p> <p>添加指定类型键值对到数据库，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.74.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.74.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.74.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.74.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">key</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要添加数据的key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_KEY_LENGTH</a>。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">Uint8Array | string | number | boolean</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要添加数据的value，支持Uint8Array、number 、 string 、boolean，Uint8Array、string 的长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_VALUE_LENGTH</a>。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put err: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put success"</span>);</li><li>    });</li><li>}<span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"An unexpected error occurred. Error:"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1230px;"><h3 id="put-1" device-type="phone,2in1,tablet,wearable,tv">put<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="put-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>put(key: string, value: Uint8Array | string | number | boolean): Promise&lt;void&gt;</p> <p>添加指定类型键值对到数据库，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.75.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.75.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.75.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.75.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">key</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要添加数据的key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_KEY_LENGTH</a>。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">Uint8Array | string | number | boolean</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要添加数据的value，支持Uint8Array、number 、 string 、boolean，Uint8Array、string 的长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_VALUE_LENGTH</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.75.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.75.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put success: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put err: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"An unexpected error occurred. Error:"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1155px;"><h3 id="delete" device-type="phone,2in1,tablet,wearable,tv">delete<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delete" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(key: string, callback: AsyncCallback&lt;void&gt;): void</p> <p>从数据库中删除指定键值的数据，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.76.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.76.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.76.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.76.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">key</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要删除数据的key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_KEY_LENGTH</a>。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put err: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put success"</span>);</li><li>        kvStore.<span class="hljs-title function_">delete</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>            <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"delete err: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>                <span class="hljs-keyword">return</span>;</li><li>            }</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"delete success"</span>);</li><li>        });</li><li>    });</li><li>}<span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"An unexpected error occurred. Error:"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1185px;"><h3 id="delete-1" device-type="phone,2in1,tablet,wearable,tv">delete<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delete-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(key: string): Promise&lt;void&gt;</p> <p>从数据库中删除指定键值的数据，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.77.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.77.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.77.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.77.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">key</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要删除数据的key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_KEY_LENGTH</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.77.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.77.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put success: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>        kvStore.<span class="hljs-title function_">delete</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"delete success"</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"delete err: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>        });</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put err: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"An unexpected error occurred. Error:"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 816px;"><h3 id="ondatachange" device-type="phone,2in1,tablet,wearable,tv">on('dataChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondatachange" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'dataChange', type: SubscribeType, listener: Callback&lt;ChangeNotification&gt;): void</p> <p>订阅指定类型的数据变更通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.78.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.78.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.78.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.78.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">订阅的事件名，固定为'dataChange'，表示数据变更事件。</td> </tr> <tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#subscribetype">SubscribeType</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示订阅的类型。</td> </tr> <tr><td class="cellrowborder" width="25%">listener</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#changenotification">ChangeNotification</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li>kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, distributedData.<span class="hljs-property">SubscribeType</span>.<span class="hljs-property">SUBSCRIBE_TYPE_LOCAL</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"dataChange callback call data: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 771px;"><h3 id="onsynccomplete" device-type="phone,2in1,tablet,wearable,tv">on('syncComplete')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsynccomplete" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'syncComplete', syncCallback: Callback&lt;Array&lt;[string, number]&gt;&gt;): void</p> <p>订阅同步完成事件回调通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.79.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.79.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.79.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.79.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">订阅的事件名，固定为'syncComplete'，表示同步完成事件。</td> </tr> <tr><td class="cellrowborder" width="25%">syncCallback</td> <td class="cellrowborder" width="25%">Callback&lt;Array&lt;[string, number]&gt;&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。用于向调用方发送同步结果的回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li>kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"callback call data: "</span> + data);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1083px;"><h3 id="offdatachange8" device-type="phone,2in1,tablet,wearable,tv">off('dataChange')<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdatachange8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event:'dataChange', listener?: Callback&lt;ChangeNotification&gt;): void</p> <p>取消订阅数据变更通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.80.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.80.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.80.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.80.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">取消订阅的事件名，固定为'dataChange'，表示数据变更事件。</td> </tr> <tr><td class="cellrowborder" width="25%">listener</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#changenotification">ChangeNotification</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">取消订阅的函数。如不设置callback，则取消所有订阅的函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">KvstoreModel</span> {</li><li>    <span class="hljs-title function_">call</span>(<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"dataChange: "</span> + data);</li><li>    }</li><li>    <span class="hljs-title function_">subscribeDataChange</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, distributedData.<span class="hljs-property">SubscribeType</span>.<span class="hljs-property">SUBSCRIBE_TYPE_REMOTE</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>        }</li><li>    }</li><li>    <span class="hljs-title function_">unsubscribeDataChange</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">off</span>(<span class="hljs-string">'dataChange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>        }</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1083px;"><h3 id="offsynccomplete8" device-type="phone,2in1,tablet,wearable,tv">off('syncComplete')<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offsynccomplete8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'syncComplete', syncCallback?: Callback&lt;Array&lt;[string, number]&gt;&gt;): void</p> <p>取消订阅同步完成事件回调通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.81.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.81.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.81.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.81.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">取消订阅的事件名，固定为'syncComplete'，表示同步完成事件。</td> </tr> <tr><td class="cellrowborder" width="25%">syncCallback</td> <td class="cellrowborder" width="25%">Callback&lt;Array&lt;[string, number]&gt;&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">取消订阅的函数。如不设置callback，则取消所有订阅的函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">KvstoreModel</span> {</li><li>    <span class="hljs-title function_">call</span>(<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"syncComplete: "</span> + data);</li><li>    }</li><li>    <span class="hljs-title function_">subscribeSyncComplete</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>        }</li><li>    }</li><li>    <span class="hljs-title function_">unsubscribeSyncComplete</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">off</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>        }</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1227px;"><h3 id="putbatch8" device-type="phone,2in1,tablet,wearable,tv">putBatch<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="putbatch8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>putBatch(entries: Entry[], callback: AsyncCallback&lt;void&gt;): void</p> <p>批量插入键值对到KVStore数据库中，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.82.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.82.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.82.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.82.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">entries</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要批量插入的键值对。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries));</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'batch_test_string_key'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,entries</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries success'</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries.length: '</span> + entries.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries[0]: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries[<span class="hljs-number">0</span>]));</li><li>        });</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'PutBatch e '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(e));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1425px;"><h3 id="putbatch8-1" device-type="phone,2in1,tablet,wearable,tv">putBatch<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="putbatch8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>putBatch(entries: Entry[]): Promise&lt;void&gt;</p> <p>批量插入键值对到KVStore数据库中，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.83.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.83.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.83.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.83.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">entries</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要批量插入的键值对。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.83.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.83.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries));</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries success'</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'PutBatch '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries));</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>        });</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'PutBatch e '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(e));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1227px;"><h3 id="deletebatch8" device-type="phone,2in1,tablet,wearable,tv">deleteBatch<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletebatch8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteBatch(keys: string[], callback: AsyncCallback&lt;void&gt;): void</p> <p>批量删除KVStore数据库中的键值对，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.84.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.84.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.84.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.84.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keys</td> <td class="cellrowborder" width="25%">string[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要批量删除的键值对。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">let</span> keys = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>        keys.<span class="hljs-title function_">push</span>(key + i);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries));</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        kvStore.<span class="hljs-title function_">deleteBatch</span>(keys, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'deleteBatch success'</span>);</li><li>        });</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'DeleteBatch e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1449px;"><h3 id="deletebatch8-1" device-type="phone,2in1,tablet,wearable,tv">deleteBatch<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletebatch8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteBatch(keys: string[]): Promise&lt;void&gt;</p> <p>批量删除KVStore数据库中的键值对，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.85.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.85.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.85.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.85.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keys</td> <td class="cellrowborder" width="25%">string[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要批量删除的键值对。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.85.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.85.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">let</span> keys = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>        keys.<span class="hljs-title function_">push</span>(key + i);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries));</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        kvStore.<span class="hljs-title function_">deleteBatch</span>(keys).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'deleteBatch success'</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'deleteBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>        });</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'DeleteBatch e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1326px;"><h3 id="starttransaction8" device-type="phone,2in1,tablet,wearable,tv">startTransaction<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="starttransaction8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startTransaction(callback: AsyncCallback&lt;void&gt;): void</p> <p>启动KVStore数据库中的事务，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.86.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.86.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.86.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.86.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">putBatchString</span>(<span class="hljs-params">len, prefix</span>) {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : prefix + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    <span class="hljs-keyword">return</span> entries;</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>;</li><li>    kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, <span class="hljs-number">0</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'startTransaction 0'</span> + data)</li><li>        count++;</li><li>    });</li><li>    kvStore.<span class="hljs-title function_">startTransaction</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'startTransaction success'</span>);</li><li>        <span class="hljs-keyword">let</span> entries = <span class="hljs-title function_">putBatchString</span>(<span class="hljs-number">10</span>, <span class="hljs-string">'batch_test_string_key'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries));</li><li>        kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        });</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'startTransaction e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 938px;"><h3 id="starttransaction8-1" device-type="phone,2in1,tablet,wearable,tv">startTransaction<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="starttransaction8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startTransaction(): Promise&lt;void&gt;</p> <p>启动KVStore数据库中的事务，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.87.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.87.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>;</li><li>    kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, distributedData.<span class="hljs-property">SubscribeType</span>.<span class="hljs-property">SUBSCRIBE_TYPE_ALL</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'startTransaction '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>        count++;</li><li>    });</li><li>    kvStore.<span class="hljs-title function_">startTransaction</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'startTransaction success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'startTransaction fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'startTransaction e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 846px;"><h3 id="commit8" device-type="phone,2in1,tablet,wearable,tv">commit<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="commit8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>commit(callback: AsyncCallback&lt;void&gt;): void</p> <p>提交KVStore数据库中的事务，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.88.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.88.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.88.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.88.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">commit</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-keyword">if</span> (err == <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'commit success'</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'commit fail'</span>);</li><li>        }</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Commit e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 818px;"><h3 id="commit8-1" device-type="phone,2in1,tablet,wearable,tv">commit<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="commit8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>commit(): Promise&lt;void&gt;</p> <p>提交KVStore数据库中的事务，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.89.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.89.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">commit</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'commit success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'commit fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Commit e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 846px;"><h3 id="rollback8" device-type="phone,2in1,tablet,wearable,tv">rollback<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="rollback8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>rollback(callback: AsyncCallback&lt;void&gt;): void</p> <p>在KVStore数据库中回滚事务，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.90.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.90.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.90.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.90.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">rollback</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-keyword">if</span> (err == <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'commit success'</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'commit fail'</span>);</li><li>        }</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Rollback e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 818px;"><h3 id="rollback8-1" device-type="phone,2in1,tablet,wearable,tv">rollback<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="rollback8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>rollback(): Promise&lt;void&gt;</p> <p>在KVStore数据库中回滚事务，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.91.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.91.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">rollback</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'rollback success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'rollback fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Rollback e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 939px;"><h3 id="enablesync8" device-type="phone,2in1,tablet,wearable,tv">enableSync<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enablesync8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>enableSync(enabled: boolean, callback: AsyncCallback&lt;void&gt;): void</p> <p>设定是否开启同步，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.92.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.92.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.92.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.92.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">enabled</td> <td class="cellrowborder" width="25%">boolean</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">设定是否开启同步，true表示开启同步，false表示不启用同步。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">enableSync</span>(<span class="hljs-literal">true</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-keyword">if</span> (err == <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'enableSync success'</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'enableSync fail'</span>);</li><li>        }</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'EnableSync e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1017px;"><h3 id="enablesync8-1" device-type="phone,2in1,tablet,wearable,tv">enableSync<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enablesync8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>enableSync(enabled: boolean): Promise&lt;void&gt;</p> <p>设定是否开启同步，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.93.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.93.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.93.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.93.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">enabled</td> <td class="cellrowborder" width="25%">boolean</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">设定是否开启同步，true表示开启同步，false表示不启用同步。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.93.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.93.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">enableSync</span>(<span class="hljs-literal">true</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'enableSync success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'enableSync fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'EnableSync e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 912px;"><h3 id="setsyncrange8" device-type="phone,2in1,tablet,wearable,tv">setSyncRange<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsyncrange8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSyncRange(localLabels: string[], remoteSupportLabels: string[], callback: AsyncCallback&lt;void&gt;): void</p> <p>设置同步范围标签，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.94.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.94.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.94.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.94.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">localLabels</td> <td class="cellrowborder" width="25%">string[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示本地设备的同步标签。</td> </tr> <tr><td class="cellrowborder" width="25%">remoteSupportLabels</td> <td class="cellrowborder" width="25%">string[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要同步数据的设备的同步标签。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> localLabels = [<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>];</li><li>    <span class="hljs-keyword">const</span> remoteSupportLabels = [<span class="hljs-string">'C'</span>, <span class="hljs-string">'D'</span>];</li><li>    kvStore.<span class="hljs-title function_">setSyncRange</span>(localLabels, remoteSupportLabels, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SetSyncRange put success'</span>);</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SetSyncRange e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1086px;"><h3 id="setsyncrange8-1" device-type="phone,2in1,tablet,wearable,tv">setSyncRange<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsyncrange8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSyncRange(localLabels: string[], remoteSupportLabels: string[]): Promise&lt;void&gt;</p> <p>设置同步范围标签，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.95.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.95.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.95.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.95.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">localLabels</td> <td class="cellrowborder" width="25%">string[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示本地设备的同步标签。</td> </tr> <tr><td class="cellrowborder" width="25%">remoteSupportLabels</td> <td class="cellrowborder" width="25%">string[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要同步数据的设备的同步标签。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.95.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.95.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> localLabels = [<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>];</li><li>    <span class="hljs-keyword">const</span> remoteSupportLabels = [<span class="hljs-string">'C'</span>, <span class="hljs-string">'D'</span>];</li><li>    kvStore.<span class="hljs-title function_">setSyncRange</span>(localLabels, remoteSupportLabels).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'setSyncRange success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'delete fail '</span> + err);</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SetSyncRange e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 423px;"><h2 id="subscribetype" device-type="phone,2in1,tablet,wearable,tv">SubscribeType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="subscribetype" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>订阅类型枚举。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.96.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.96.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.96.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">SUBSCRIBE_TYPE_LOCAL</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">表示订阅本地数据变更。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">SUBSCRIBE_TYPE_REMOTE</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">表示订阅远端数据变更。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">SUBSCRIBE_TYPE_ALL</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">表示订阅远端和本地数据变更。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 468px;"><h2 id="changenotification" device-type="phone,2in1,tablet,wearable,tv">ChangeNotification<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="changenotification" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>数据变更时通知的对象，包括数据插入的数据、更新的数据、删除的数据和设备ID。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.97.4.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.97.4.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.97.4.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.97.4.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">insertEntries</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">数据添加记录。</td> </tr> <tr><td class="cellrowborder" width="25%">updateEntries</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">数据更新记录。</td> </tr> <tr><td class="cellrowborder" width="25%">deleteEntries</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">数据删除记录。</td> </tr> <tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">设备ID，此处为设备UUID。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 378px;"><h2 id="entry" device-type="phone,2in1,tablet,wearable,tv">Entry<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="entry" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>存储在数据库中的键值对。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.98.4.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.98.4.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.98.4.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.98.4.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">key</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">键值。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#value">Value</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">值对象。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 402px;"><h2 id="value" device-type="phone,2in1,tablet,wearable,tv">Value<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="value" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>存储在数据库中的值对象。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.99.4.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.99.4.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.99.4.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.99.4.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#value">ValueType</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">值类型。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">Uint8Array | string | number | boolean</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">值。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 558px;"><h2 id="valuetype" device-type="phone,2in1,tablet,wearable,tv">ValueType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="valuetype" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>数据类型枚举。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.100.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.100.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.100.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">STRING</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">表示值类型为字符串。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">INTEGER</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">表示值类型为整数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">FLOAT</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">表示值类型为浮点数。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">BYTE_ARRAY</td> <td class="cellrowborder" width="33.33333333333333%">3</td> <td class="cellrowborder" width="33.33333333333333%">表示值类型为字节数组。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">BOOLEAN</td> <td class="cellrowborder" width="33.33333333333333%">4</td> <td class="cellrowborder" width="33.33333333333333%">表示值类型为布尔值。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">DOUBLE</td> <td class="cellrowborder" width="33.33333333333333%">5</td> <td class="cellrowborder" width="33.33333333333333%">表示值类型为双浮点数。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 302px;"><h2 id="singlekvstore" device-type="phone,2in1,tablet,wearable,tv">SingleKVStore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="singlekvstore" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>单版本数据库，继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstore">KVStore</a>数据库，提供查询数据和同步数据的方法。</p> <p>单版本数据库，不对数据所属设备进行区分，不同设备使用相同键写入数据会互相覆盖。比如，可以使用单版本数据库实现个人日历、联系人数据在不同设备间的数据同步。</p> <p>在调用SingleKVStore的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#getkvstore">getKVStore</a>构建一个SingleKVStore实例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1067px;"><h3 id="get" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">get<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(key: string, callback: AsyncCallback&lt;Uint8Array | string | boolean | number&gt;): void</p> <p>获取指定键的值，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.102.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.102.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.102.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.102.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">key</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要查询数据的key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_KEY_LENGTH</a>。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;Uint8Array | string | boolean | number&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回获取查询的值。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put err: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put success"</span>);</li><li>        kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"get success data: "</span> + data);</li><li>        });</li><li>    });</li><li>}<span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"An unexpected error occurred. Error:"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1185px;"><h3 id="get-1" device-type="phone,2in1,tablet,wearable,tv">get<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(key: string): Promise&lt;Uint8Array | string | boolean | number&gt;</p> <p>获取指定键的值，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.103.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.103.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.103.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.103.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">key</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要查询数据的key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#constants">MAX_KEY_LENGTH</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.103.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.103.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;Uint8Array | string | boolean | number&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回获取查询的值。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put success: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>        kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"get success data: "</span> + data);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"get err: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>        });</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put err: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"An unexpected error occurred. Error:"</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1227px;"><h3 id="getentries8" device-type="phone,2in1,tablet,wearable,tv">getEntries<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(keyPrefix: string, callback: AsyncCallback&lt;Entry[]&gt;): void</p> <p>获取匹配指定键前缀的所有键值对，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.104.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.104.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.104.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.104.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keyPrefix</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要匹配的键前缀。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回匹配指定前缀的键值对列表。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_number_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">INTEGER</span>,</li><li>                value : <span class="hljs-number">222</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'batch_test_number_key'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,entries</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries success'</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries.length: '</span> + entries.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries[0]: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries[<span class="hljs-number">0</span>]));</li><li>        });</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'PutBatch e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1497px;"><h3 id="getentries8-1" device-type="phone,2in1,tablet,wearable,tv">getEntries<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(keyPrefix: string): Promise&lt;Entry[]&gt;</p> <p>获取匹配指定键前缀的所有键值对，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.105.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.105.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.105.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.105.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keyPrefix</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要匹配的键前缀。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.105.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.105.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回匹配指定前缀的键值对列表。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + entries);</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries success'</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries.length: '</span> + entries.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries[0]: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries[<span class="hljs-number">0</span>]));</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries[0].value: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries[<span class="hljs-number">0</span>].<span class="hljs-property">value</span>));</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries[0].value.value: '</span> + entries[<span class="hljs-number">0</span>].<span class="hljs-property">value</span>.<span class="hljs-property">value</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>        });</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'PutBatch e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1347px;"><h3 id="getentries8-2" device-type="phone,2in1,tablet,wearable,tv">getEntries<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries8-2" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(query: Query, callback: AsyncCallback&lt;Entry[]&gt;): void</p> <p>获取与指定Query对象匹配的键值对列表，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要匹配的键前缀。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回与指定Query对象匹配的键值对列表。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">21</span>,<span class="hljs-number">31</span>]);</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_bool_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">BYTE_ARRAY</span>,</li><li>                value : arr</li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries));</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>        query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>        kvStore.<span class="hljs-title function_">getEntries</span>(query, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,entries</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries success'</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries.length: '</span> + entries.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries[0]: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries[<span class="hljs-number">0</span>]));</li><li>        });</li><li>    });</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries success'</span>);</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1497px;"><h3 id="getentries8-3" device-type="phone,2in1,tablet,wearable,tv">getEntries<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries8-3" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(query: Query): Promise&lt;Entry[]&gt;</p> <p>获取与指定Query对象匹配的键值对列表，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.107.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.107.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.107.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.107.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.107.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.107.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回与指定Query对象匹配的键值对列表。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">21</span>,<span class="hljs-number">31</span>]);</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_bool_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">BYTE_ARRAY</span>,</li><li>                value : arr</li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries));</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>        query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>        kvStore.<span class="hljs-title function_">getEntries</span>(query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries success'</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>        });</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries putBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err))</li><li>    });</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries success'</span>);</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1299px;"><h3 id="getresultset8" device-type="phone,2in1,tablet,wearable,tv">getResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(keyPrefix: string, callback: AsyncCallback&lt;KvStoreResultSet&gt;): void</p> <p>从KvStore数据库中获取具有指定前缀的结果集，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.108.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.108.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.108.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.108.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keyPrefix</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要匹配的键前缀。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回具有指定前缀的结果集。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet putBatch success'</span>);</li><li>        kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, result</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet getResultSet succeed.'</span>);</li><li>            resultSet = result;</li><li>            kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet closeResultSet success'</span>);</li><li>            })</li><li>        });</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1545px;"><h3 id="getresultset8-1" device-type="phone,2in1,tablet,wearable,tv">getResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(keyPrefix: string): Promise&lt;KvStoreResultSet&gt;</p> <p>从KVStore数据库中获取具有指定前缀的结果集，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keyPrefix</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要匹配的键前缀。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.109.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.109.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回具有指定前缀的结果集。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'PutBatch putBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResult getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResult closeResultSet success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResult e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1299px;"><h3 id="getresultset8-2" device-type="phone,2in1,tablet,wearable,tv">getResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset8-2" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(query: Query, callback: AsyncCallback&lt;KvStoreResultSet&gt;): void</p> <p>获取与指定Query对象匹配的KvStoreResultSet对象，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.110.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.110.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.110.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.110.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%">Query</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，获取与指定Query对象匹配的KvStoreResultSet对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>        query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>        kvStore.<span class="hljs-title function_">getResultSet</span>(query, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, result</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>            resultSet = result;</li><li>        });</li><li>    });</li><li>} <span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1497px;"><h3 id="getresultset8-3" device-type="phone,2in1,tablet,wearable,tv">getResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset8-3" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(query: Query): Promise&lt;KvStoreResultSet&gt;</p> <p>获取与指定Query对象匹配的KvStoreResultSet对象，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.111.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.111.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.111.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.111.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.111.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.111.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。获取与指定Query对象匹配的KvStoreResultSet对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">' getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 939px;"><h3 id="closeresultset8" device-type="phone,2in1,tablet,wearable,tv">closeResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="closeresultset8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>closeResultSet(resultSet: KvStoreResultSet, callback: AsyncCallback&lt;void&gt;): void</p> <p>关闭由<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#getresultset8">SingleKVStore.getResultSet</a>返回的KvStoreResultSet对象，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.112.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.112.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.112.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.112.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">resultSet</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要关闭的KvStoreResultSet对象。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet = <span class="hljs-literal">null</span>;</li><li>    kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>        <span class="hljs-keyword">if</span> (err == <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet success'</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet fail'</span>);</li><li>        }</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CloseResultSet e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1017px;"><h3 id="closeresultset8-1" device-type="phone,2in1,tablet,wearable,tv">closeResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="closeresultset8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>closeResultSet(resultSet: KvStoreResultSet): Promise&lt;void&gt;</p> <p>关闭由<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#getresultset8">SingleKVStore.getResultSet</a>返回的KvStoreResultSet对象，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.113.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.113.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.113.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.113.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">resultSet</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要关闭的KvStoreResultSet对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.113.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.113.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet = <span class="hljs-literal">null</span>;</li><li>    kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CloseResultSet e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1227px;"><h3 id="getresultsize8" device-type="phone,2in1,tablet,wearable,tv">getResultSize<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultsize8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSize(query: Query, callback: AsyncCallback&lt;number&gt;): void</p> <p>获取与指定Query对象匹配的结果数，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.114.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.114.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.114.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.114.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回与指定Query对象匹配的结果数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>        query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>        kvStore.<span class="hljs-title function_">getResultSize</span>(query, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, resultSize</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        });</li><li>    });</li><li>} <span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSize e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1425px;"><h3 id="getresultsize8-1" device-type="phone,2in1,tablet,wearable,tv">getResultSize<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultsize8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSize(query: Query): Promise&lt;number&gt;</p> <p>获取与指定Query对象匹配的结果数，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.115.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.115.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.115.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.115.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.115.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.115.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;number&gt;</td> <td class="cellrowborder" width="50%">Promise对象。获取与指定Query对象匹配的结果数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    kvStore.<span class="hljs-title function_">getResultSize</span>(query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">resultSize</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSize e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1247px;"><h3 id="removedevicedata8" device-type="phone,2in1,tablet,wearable,tv">removeDeviceData<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removedevicedata8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeDeviceData(deviceId: string, callback: AsyncCallback&lt;void&gt;): void</p> <p>删除指定设备的数据，使用callback异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.116.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.116.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.116.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.116.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要删除设备的名称。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string_2'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-string-002'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'put success'</span>);</li><li>        <span class="hljs-keyword">const</span> deviceid = <span class="hljs-string">'no_exist_device_id'</span>;</li><li>        kvStore.<span class="hljs-title function_">removeDeviceData</span>(deviceid, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>            <span class="hljs-keyword">if</span> (err == <span class="hljs-literal">undefined</span>) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'removeDeviceData success'</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'removeDeviceData fail'</span>);</li><li>                kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RemoveDeviceData get success'</span>);</li><li>                });</li><li>            }</li><li>        });</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RemoveDeviceData e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1421px;"><h3 id="removedevicedata8-1" device-type="phone,2in1,tablet,wearable,tv">removeDeviceData<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removedevicedata8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeDeviceData(deviceId: string): Promise&lt;void&gt;</p> <p>删除指定设备的数据，使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.117.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.117.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.117.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.117.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要删除设备的名称。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.117.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.117.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string_2'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-string-001'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'removeDeviceData put success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'put fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    <span class="hljs-keyword">const</span> deviceid = <span class="hljs-string">'no_exist_device_id'</span>;</li><li>    kvStore.<span class="hljs-title function_">removeDeviceData</span>(deviceid).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'removeDeviceData success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'removeDeviceData fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'get success data:'</span> + data);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RemoveDeviceData get fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RemoveDeviceData e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1724px;"><h3 id="sync" device-type="phone,2in1,tablet,wearable,tv">sync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sync" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>sync(deviceIds: string[], mode: SyncMode, delayMs?: number): void</p> <p>在手动同步方式下，触发数据库同步。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceIds为DeviceInfo中的networkId，通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p>  </div></div></div> <p><strong>需要权限</strong>： ohos.permission.DISTRIBUTED_DATASYNC。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.118.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.118.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.118.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.118.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceIds</td> <td class="cellrowborder" width="25%">string[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">同一组网环境下，需要同步的设备的networkId列表。</td> </tr> <tr><td class="cellrowborder" width="25%">mode</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#syncmode">SyncMode</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">同步模式。</td> </tr> <tr><td class="cellrowborder" width="25%">delayMs</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">可选参数，允许延时时间，单位：ms（毫秒），默认为0。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> deviceManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.distributedHardware.deviceManager'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> devManager;</li><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_SYNC_ELEMENT</span> = <span class="hljs-string">'key_test_sync'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_SYNC_ELEMENT</span> = <span class="hljs-string">'value-string-001'</span>;</li><li><span class="hljs-comment">// create deviceManager</span></li><li>deviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'bundleName'</span>, <span class="hljs-function">(<span class="hljs-params">err, value</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (!err) {</li><li>    devManager = value;</li><li>    <span class="hljs-keyword">let</span> deviceIds = [];</li><li>    <span class="hljs-keyword">if</span> (devManager != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">var</span> devices = devManager.<span class="hljs-title function_">getTrustedDeviceListSync</span>();</li><li>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; devices.<span class="hljs-property">length</span>; i++) {</li><li>        deviceIds[i] = devices[i].<span class="hljs-property">networkId</span>;</li><li>      }</li><li>    }</li><li>    <span class="hljs-keyword">try</span> {</li><li>      kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Sync dataChange'</span>);</li><li>      });</li><li>      kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_SYNC_ELEMENT</span> + <span class="hljs-string">'testSync101'</span>, <span class="hljs-variable constant_">VALUE_TEST_SYNC_ELEMENT</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put err: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Succeeded in putting data'</span>);</li><li>        <span class="hljs-keyword">const</span> mode = distributedData.<span class="hljs-property">SyncMode</span>.<span class="hljs-property">PULL_ONLY</span>;</li><li>        kvStore.<span class="hljs-title function_">sync</span>(deviceIds, mode, <span class="hljs-number">1000</span>);</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Sync e'</span> + e);</li><li>    }</li><li>  }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 816px;"><h3 id="ondatachange8" device-type="phone,2in1,tablet,wearable,tv">on('dataChange')<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondatachange8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'dataChange', type: SubscribeType, listener: Callback&lt;ChangeNotification&gt;): void</p> <p>订阅指定类型的数据变更通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.119.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.119.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.119.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.119.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">订阅的事件名，固定为'dataChange'，表示数据变更事件。</td> </tr> <tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#subscribetype">SubscribeType</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示订阅的类型。</td> </tr> <tr><td class="cellrowborder" width="25%">listener</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#changenotification">ChangeNotification</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li>kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, distributedData.<span class="hljs-property">SubscribeType</span>.<span class="hljs-property">SUBSCRIBE_TYPE_LOCAL</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"dataChange callback call data: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1035px;"><h3 id="onsynccomplete8" device-type="phone,2in1,tablet,wearable,tv">on('syncComplete')<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsynccomplete8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'syncComplete', syncCallback: Callback&lt;Array&lt;[string, number]&gt;&gt;): void</p> <p>订阅同步完成事件回调通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.120.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.120.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.120.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.120.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">订阅的事件名，固定为'syncComplete'，表示同步完成事件。</td> </tr> <tr><td class="cellrowborder" width="25%">syncCallback</td> <td class="cellrowborder" width="25%">Callback&lt;Array&lt;[string, number]&gt;&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。用于向调用方发送同步结果的回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_FLOAT_ELEMENT</span> = <span class="hljs-string">'key_test_float'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_FLOAT_ELEMENT</span> = <span class="hljs-number">321.12</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'syncComplete '</span> + data)</li><li>    });</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_FLOAT_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_FLOAT_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'syncComplete put success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'syncComplete put fail '</span> + error);</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'syncComplete put e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1083px;"><h3 id="offdatachange8-1" device-type="phone,2in1,tablet,wearable,tv">off('dataChange')<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdatachange8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event:'dataChange', listener?: Callback&lt;ChangeNotification&gt;): void</p> <p>取消订阅数据变更通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.121.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.121.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.121.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.121.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">取消订阅的事件名，固定为'dataChange'，表示数据变更事件。</td> </tr> <tr><td class="cellrowborder" width="25%">listener</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#changenotification">ChangeNotification</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">取消订阅的函数。如不设置callback，则取消所有订阅的函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">KvstoreModel</span> {</li><li>    <span class="hljs-title function_">call</span>(<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"dataChange: "</span> + data);</li><li>    }</li><li>    <span class="hljs-title function_">subscribeDataChange</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, distributedData.<span class="hljs-property">SubscribeType</span>.<span class="hljs-property">SUBSCRIBE_TYPE_REMOTE</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>        }</li><li>    }</li><li>    <span class="hljs-title function_">unsubscribeDataChange</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">off</span>(<span class="hljs-string">'dataChange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>        }</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1083px;"><h3 id="offsynccomplete8-1" device-type="phone,2in1,tablet,wearable,tv">off('syncComplete')<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offsynccomplete8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'syncComplete', syncCallback?: Callback&lt;Array&lt;[string, number]&gt;&gt;): void</p> <p>取消订阅同步完成事件回调通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.122.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.122.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.122.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.122.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">取消订阅的事件名，固定为'syncComplete'，表示同步完成事件。</td> </tr> <tr><td class="cellrowborder" width="25%">syncCallback</td> <td class="cellrowborder" width="25%">Callback&lt;Array&lt;[string, number]&gt;&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">取消订阅的函数。如不设置callback，则取消所有订阅的函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">KvstoreModel</span> {</li><li>    <span class="hljs-title function_">call</span>(<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"syncComplete: "</span> + data);</li><li>    }</li><li>    <span class="hljs-title function_">subscribeSyncComplete</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>        }</li><li>    }</li><li>    <span class="hljs-title function_">unsubscribeSyncComplete</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">off</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>        }</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 843px;"><h3 id="setsyncparam8" device-type="phone,2in1,tablet,wearable,tv">setSyncParam<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsyncparam8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSyncParam(defaultAllowedDelayMs: number, callback: AsyncCallback&lt;void&gt;): void</p> <p>设置数据库同步允许的默认延迟，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.123.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.123.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.123.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.123.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">defaultAllowedDelayMs</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示数据库同步允许的默认延迟，以毫秒为单位。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> defaultAllowedDelayMs = <span class="hljs-number">500</span>;</li><li>    kvStore.<span class="hljs-title function_">setSyncParam</span>(defaultAllowedDelayMs, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SetSyncParam put success'</span>);</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'testSingleKvStoreSetSyncParam e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1017px;"><h3 id="setsyncparam8-1" device-type="phone,2in1,tablet,wearable,tv">setSyncParam<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsyncparam8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSyncParam(defaultAllowedDelayMs: number): Promise&lt;void&gt;</p> <p>设置数据库同步允许的默认延迟，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.124.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.124.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.124.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.124.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">defaultAllowedDelayMs</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示数据库同步允许的默认延迟，以毫秒为单位。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.124.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.124.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">const</span> defaultAllowedDelayMs = <span class="hljs-number">500</span>;</li><li>    kvStore.<span class="hljs-title function_">setSyncParam</span>(defaultAllowedDelayMs).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SetSyncParam put success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SetSyncParam put fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SetSyncParam e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 774px;"><h3 id="getsecuritylevel8" device-type="phone,2in1,tablet,wearable,tv">getSecurityLevel<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsecuritylevel8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSecurityLevel(callback: AsyncCallback&lt;SecurityLevel&gt;): void</p> <p>获取数据库的安全级别，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.125.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.125.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.125.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.125.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#securitylevel">SecurityLevel</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回数据库的安全级别。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">getSecurityLevel</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getSecurityLevel success'</span>);</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetSecurityLevel e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 818px;"><h3 id="getsecuritylevel8-1" device-type="phone,2in1,tablet,wearable,tv">getSecurityLevel<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsecuritylevel8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSecurityLevel(): Promise&lt;SecurityLevel&gt;</p> <p>获取数据库的安全级别，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.126.6.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.126.6.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#securitylevel">SecurityLevel</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回数据库的安全级别。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">getSecurityLevel</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">' getSecurityLevel success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getSecurityLevel fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetSecurityLevel e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 350px;"><h2 id="devicekvstore8" device-type="phone,2in1,tablet,wearable,tv">DeviceKVStore<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="devicekvstore8" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>设备协同数据库，继承自KVStore，提供查询数据和同步数据的方法。</p> <p>设备协同数据库，以设备维度对数据进行区分，每台设备仅能写入和修改本设备的数据，其它设备的数据对其是只读的，无法修改其它设备的数据。</p> <p>比如，可以使用设备协同数据库实现设备间的图片分享，可以查看其他设备的图片，但无法修改和删除其他设备的图片。</p> <p>在调用DeviceKVStore的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#getkvstore">getKVStore</a>构建一个DeviceKVStore实例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1108px;"><h3 id="get8" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">get<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(deviceId: string, key: string, callback: AsyncCallback&lt;boolean|string|number|Uint8Array&gt;): void</p> <p>获取与指定设备ID和key匹配的string值，使用callback异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.128.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.128.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.128.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.128.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">标识要查询其数据的设备。</td> </tr> <tr><td class="cellrowborder" width="25%">key</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要查询key值的键。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean|string|number|Uint8Array&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回匹配给定条件的字符串值。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string_2'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-string-002'</span>;</li><li><span class="hljs-keyword">try</span>{</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'put success'</span>);</li><li>        kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'get success'</span>);</li><li>        });</li><li>    })</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'get e'</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1322px;"><h3 id="get8-1" device-type="phone,2in1,tablet,wearable,tv">get<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(deviceId: string, key: string): Promise&lt;boolean|string|number|Uint8Array&gt;</p> <p>获取与指定设备ID和key匹配的string值，使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.129.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.129.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.129.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.129.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">标识要查询其数据的设备。</td> </tr> <tr><td class="cellrowborder" width="25%">key</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要查询key值的键。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.129.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.129.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;boolean|string|number|Uint8Array&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回匹配给定条件的字符串值。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string_2'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-string-002'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (data) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">' put success'</span>);</li><li>        kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'get success'</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'get fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>        });</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'put error'</span> + error);</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Get e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1436px;"><h3 id="getentries8-4" device-type="phone,2in1,tablet,wearable,tv">getEntries<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries8-4" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(deviceId: string, keyPrefix: string, callback: AsyncCallback&lt;Entry[]&gt;): void</p> <p>获取与指定设备ID和key前缀匹配的所有键值对，使用callback异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.130.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.130.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.130.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.130.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">标识要查询其数据的设备。</td> </tr> <tr><td class="cellrowborder" width="25%">keyPrefix</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要匹配的键前缀。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回满足给定条件的所有键值对的列表。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + entries);</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-string">'batch_test_string_key'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,entries</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries success'</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries.length: '</span> + entries.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries[0]: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries[<span class="hljs-number">0</span>]));</li><li>        });</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'PutBatch e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1682px;"><h3 id="getentries8-5" device-type="phone,2in1,tablet,wearable,tv">getEntries<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries8-5" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(deviceId: string, keyPrefix: string): Promise&lt;Entry[]&gt;</p> <p>获取与指定设备ID和key前缀匹配的所有键值对，使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.131.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.131.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.131.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.131.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">标识要查询其数据的设备。</td> </tr> <tr><td class="cellrowborder" width="25%">keyPrefix</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要匹配的键前缀。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.131.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.131.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回匹配给定条件的所有键值对的列表。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + entries);</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries success'</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries.length: '</span> + entries.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries[0]: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries[<span class="hljs-number">0</span>]));</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries[0].value: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries[<span class="hljs-number">0</span>].<span class="hljs-property">value</span>));</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries[0].value.value: '</span> + entries[<span class="hljs-number">0</span>].<span class="hljs-property">value</span>.<span class="hljs-property">value</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>        });</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'PutBatch e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1371px;"><h3 id="getentries8-6" device-type="phone,2in1,tablet,wearable,tv">getEntries<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries8-6" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(query: Query, callback: AsyncCallback&lt;Entry[]&gt;): void</p> <p>获取与指定Query对象匹配的键值对列表，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.132.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.132.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.132.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.132.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回与指定Query对象匹配的键值对列表。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">21</span>,<span class="hljs-number">31</span>]);</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_bool_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">BYTE_ARRAY</span>,</li><li>                value : arr</li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries));</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>        query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>        query.<span class="hljs-title function_">deviceId</span>(<span class="hljs-string">'localDeviceId'</span>);</li><li>        kvStore.<span class="hljs-title function_">getEntries</span>(query, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,entries</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries success'</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries.length: '</span> + entries.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries[0]: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries[<span class="hljs-number">0</span>]));</li><li>        });</li><li>    });</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries success'</span>);</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1497px;"><h3 id="getentries8-7" device-type="phone,2in1,tablet,wearable,tv">getEntries<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries8-7" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(query: Query): Promise&lt;Entry[]&gt;</p> <p>获取与指定Query对象匹配的键值对列表，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.133.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.133.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.133.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.133.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.133.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.133.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回与指定Query对象匹配的键值对列表。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">21</span>,<span class="hljs-number">31</span>]);</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_bool_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">BYTE_ARRAY</span>,</li><li>                value : arr</li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries));</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>        query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>        kvStore.<span class="hljs-title function_">getEntries</span>(query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries success'</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>        });</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries putBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err))</li><li>    });</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries success'</span>);</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1580px;"><h3 id="getentries8-8" device-type="phone,2in1,tablet,wearable,tv">getEntries<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries8-8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(deviceId: string, query: Query, callback: AsyncCallback&lt;Entry[]&gt;): void</p> <p>获取与指定设备ID和Query对象匹配的键值对列表，使用callback异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.134.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.134.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.134.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.134.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">键值对所属的设备ID。</td> </tr> <tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回与指定设备ID和Query对象匹配的键值对列表。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">21</span>,<span class="hljs-number">31</span>]);</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_bool_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">BYTE_ARRAY</span>,</li><li>                value : arr</li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries));</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        <span class="hljs-keyword">var</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>        query.<span class="hljs-title function_">deviceId</span>(<span class="hljs-string">'localDeviceId'</span>);</li><li>        query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>        kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'localDeviceId'</span>, query, <span class="hljs-keyword">function</span> (<span class="hljs-params">err,entries</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries success'</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries.length: '</span> + entries.<span class="hljs-property">length</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries[0]: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries[<span class="hljs-number">0</span>]));</li><li>        })</li><li>    });</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries success'</span>);</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1730px;"><h3 id="getentries8-9" device-type="phone,2in1,tablet,wearable,tv">getEntries<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries8-9" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(deviceId: string, query: Query): Promise&lt;Entry[]&gt;</p> <p>获取与指定设备ID和Query对象匹配的键值对列表，使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.135.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.135.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.135.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.135.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">键值对所属的设备ID。</td> </tr> <tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.135.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.135.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#entry">Entry</a>[]&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回与指定设备ID和Query对象匹配的键值对列表。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">21</span>,<span class="hljs-number">31</span>]);</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_bool_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">BYTE_ARRAY</span>,</li><li>                value : arr</li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'entries: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entries));</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        <span class="hljs-keyword">var</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>        query.<span class="hljs-title function_">deviceId</span>(<span class="hljs-string">'localDeviceId'</span>);</li><li>        query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>        kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'localDeviceId'</span>, query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries success'</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getEntries fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>        });</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries success'</span>);</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetEntries e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1148px;"><h3 id="getresultset8-4" device-type="phone,2in1,tablet,wearable,tv">getResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset8-4" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(deviceId: string, keyPrefix: string, callback: AsyncCallback&lt;KvStoreResultSet&gt;): void</p> <p>获取与指定设备ID和key前缀匹配的KvStoreResultSet对象，使用callback异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.136.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.136.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.136.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.136.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">标识要查询其数据的设备。</td> </tr> <tr><td class="cellrowborder" width="25%">keyPrefix</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要匹配的键前缀。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回与指定设备ID和key前缀匹配的KvStoreResultSet对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-string">'batch_test_string_key'</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, result</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>        kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet success'</span>);</li><li>        })</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1346px;"><h3 id="getresultset8-5" device-type="phone,2in1,tablet,wearable,tv">getResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset8-5" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(deviceId: string, keyPrefix: string): Promise&lt;KvStoreResultSet&gt;</p> <p>获取与指定设备ID和key前缀匹配的KvStoreResultSet对象，使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.137.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.137.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.137.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.137.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">标识要查询其数据的设备。</td> </tr> <tr><td class="cellrowborder" width="25%">keyPrefix</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要匹配的键前缀。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.137.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.137.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回与指定设备ID和key前缀匹配的KvStoreResultSet对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1395px;"><h3 id="getresultset8-6" device-type="phone,2in1,tablet,wearable,tv">getResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset8-6" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(query: Query, callback: AsyncCallback&lt;KvStoreResultSet&gt;): void</p> <p>获取与指定Query对象匹配的KvStoreResultSet对象，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.138.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.138.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.138.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.138.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回与指定Query对象匹配的KvStoreResultSet对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>        query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>        query.<span class="hljs-title function_">deviceId</span>(<span class="hljs-string">'localDeviceId'</span>);</li><li>        kvStore.<span class="hljs-title function_">getResultSet</span>(query, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, result</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>            resultSet = result;</li><li>            kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet success'</span>);</li><li>            })</li><li>        });</li><li>    });</li><li>} <span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1665px;"><h3 id="getresultset8-7" device-type="phone,2in1,tablet,wearable,tv">getResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset8-7" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(query: Query): Promise&lt;KvStoreResultSet&gt;</p> <p>获取与指定Query对象匹配的KvStoreResultSet对象，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.139.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.139.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.139.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.139.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.139.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.139.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回与指定Query对象匹配的KvStoreResultSet对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch fail '</span> + err);</li><li>    });</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">deviceId</span>(<span class="hljs-string">'localDeviceId'</span>);</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"GetResultSet "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1580px;"><h3 id="getresultset8-8" device-type="phone,2in1,tablet,wearable,tv">getResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset8-8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(deviceId: string, query: Query, callback: AsyncCallback&lt;KvStoreResultSet&gt;): void</p> <p>获取与指定设备ID和Query对象匹配的KvStoreResultSet对象，使用callback异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.140.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.140.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.140.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.140.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">KvStoreResultSet对象所属的设备ID。</td> </tr> <tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回与指定设备ID和Query对象匹配的KvStoreResultSet对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>        query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>        kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'localDeviceId'</span>, query, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, result</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>            resultSet = result;</li><li>            kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet success'</span>);</li><li>            })</li><li>        });</li><li>    });</li><li>} <span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1898px;"><h3 id="getresultset8-9" device-type="phone,2in1,tablet,wearable,tv">getResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset8-9" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(deviceId: string, query: Query): Promise&lt;KvStoreResultSet&gt;</p> <p>获取与指定设备ID和Query对象匹配的KvStoreResultSet对象，使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.141.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.141.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.141.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.141.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">KvStoreResultSet对象所属的设备ID。</td> </tr> <tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.141.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.141.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回与指定设备ID和Query对象匹配的KvStoreResultSet对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> resultSet;</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet putBatch success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'PutBatch putBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'localDeviceId'</span>, query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet getResultSet succeed.'</span>);</li><li>        resultSet = result;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet getResultSet failed: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    query.<span class="hljs-title function_">deviceId</span>(<span class="hljs-string">'localDeviceId'</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"GetResultSet "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet closeResultSet success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet closeResultSet fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>
</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSet e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 963px;"><h3 id="closeresultset8-2" device-type="phone,2in1,tablet,wearable,tv">closeResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="closeresultset8-2" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>closeResultSet(resultSet: KvStoreResultSet, callback: AsyncCallback&lt;void&gt;): void</p> <p>关闭由<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#getresultset8-4">DeviceKVStore.getResultSet</a>返回的KvStoreResultSet对象，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.142.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.142.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.142.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.142.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">resultSet</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">指示要关闭的KvStoreResultSet对象。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CloseResultSet success'</span>);</li><li>    <span class="hljs-keyword">let</span> resultSet = <span class="hljs-literal">null</span>;</li><li>    kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>        <span class="hljs-keyword">if</span> (err == <span class="hljs-literal">undefined</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet success'</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet fail'</span>);</li><li>        }</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CloseResultSet e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1041px;"><h3 id="closeresultset8-3" device-type="phone,2in1,tablet,wearable,tv">closeResultSet<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="closeresultset8-3" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>closeResultSet(resultSet: KvStoreResultSet): Promise&lt;void&gt;</p> <p>关闭由<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#getresultset8-4">DeviceKVStore.getResultSet</a>返回的KvStoreResultSet对象，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.143.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.143.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.143.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.143.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">resultSet</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#kvstoreresultset8">KvStoreResultSet</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">指示要关闭的KvStoreResultSet对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.143.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.143.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CloseResultSet success'</span>);</li><li>    <span class="hljs-keyword">let</span> resultSet = <span class="hljs-literal">null</span>;</li><li>    kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'closeResultSet fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CloseResultSet e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1251px;"><h3 id="getresultsize8-2" device-type="phone,2in1,tablet,wearable,tv">getResultSize<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultsize8-2" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSize(query: Query, callback: AsyncCallback&lt;number&gt;): void</p> <p>获取与指定Query对象匹配的结果数，使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.144.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.144.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.144.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.144.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回与指定Query对象匹配的结果数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>        query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>        query.<span class="hljs-title function_">deviceId</span>(<span class="hljs-string">'localDeviceId'</span>);</li><li>        kvStore.<span class="hljs-title function_">getResultSize</span>(query, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, resultSize</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        });</li><li>    });</li><li>} <span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSize e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1449px;"><h3 id="getresultsize8-3" device-type="phone,2in1,tablet,wearable,tv">getResultSize<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultsize8-3" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSize(query: Query): Promise&lt;number&gt;</p> <p>获取与指定Query对象匹配的结果数，使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.145.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.145.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.145.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.145.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.145.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.145.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;number&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回与指定Query对象匹配的结果数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    query.<span class="hljs-title function_">deviceId</span>(<span class="hljs-string">'localDeviceId'</span>);</li><li>    kvStore.<span class="hljs-title function_">getResultSize</span>(query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">resultSize</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSize e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1460px;"><h3 id="getresultsize8-4" device-type="phone,2in1,tablet,wearable,tv">getResultSize<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultsize8-4" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSize(deviceId: string, query: Query, callback: AsyncCallback&lt;number&gt;): void;</p> <p>获取与指定设备ID和Query对象匹配的结果数，使用callback异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.146.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.146.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.146.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.146.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">KvStoreResultSet对象所属的设备ID。</td> </tr> <tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回与指定设备ID和Query对象匹配的结果数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>        <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>        query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>        kvStore.<span class="hljs-title function_">getResultSize</span>(<span class="hljs-string">'localDeviceId'</span>, query, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err, resultSize</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>        });</li><li>    });</li><li>} <span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSize e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1658px;"><h3 id="getresultsize8-5" device-type="phone,2in1,tablet,wearable,tv">getResultSize<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultsize8-5" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSize(deviceId: string, query: Query): Promise&lt;number&gt;</p> <p>获取与指定设备ID和Query对象匹配的结果数，使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.147.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.147.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.147.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.147.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">KvStoreResultSet对象所属的设备ID。</td> </tr> <tr><td class="cellrowborder" width="25%">query</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#query8">Query</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示查询对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.147.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.147.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;number&gt;</td> <td class="cellrowborder" width="50%">Promise对象。返回与指定设备ID和Query对象匹配的结果数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> entries = [];</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>        <span class="hljs-keyword">var</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>        <span class="hljs-keyword">var</span> entry = {</li><li>            key : key + i,</li><li>            value : {</li><li>                type : distributedData.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>                value : <span class="hljs-string">'batch_test_string_value'</span></li><li>            }</li><li>        }</li><li>        entries.<span class="hljs-title function_">push</span>(entry);</li><li>    }</li><li>    kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (err) =&gt; {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'putBatch fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    <span class="hljs-keyword">var</span> query = <span class="hljs-keyword">new</span> distributedData.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    kvStore.<span class="hljs-title function_">getResultSize</span>(<span class="hljs-string">'localDeviceId'</span>, query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">resultSize</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getResultSet failed: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'GetResultSize e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1247px;"><h3 id="removedevicedata8-2" device-type="phone,2in1,tablet,wearable,tv">removeDeviceData<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removedevicedata8-2" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeDeviceData(deviceId: string, callback: AsyncCallback&lt;void&gt;): void</p> <p>从当前数据库中删除指定设备的数据，使用callback异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.148.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.148.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.148.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.148.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">标识要删除其数据的设备。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-string-001'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RemoveDeviceData  put success'</span>);</li><li>        <span class="hljs-keyword">const</span> deviceid = <span class="hljs-string">'no_exist_device_id'</span>;</li><li>        kvStore.<span class="hljs-title function_">removeDeviceData</span>(deviceid, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>            <span class="hljs-keyword">if</span> (err == <span class="hljs-literal">undefined</span>) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'removeDeviceData success'</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'removeDeviceData fail'</span>);</li><li>                kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">err,data</span>) {</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RemoveDeviceData get success'</span>);</li><li>                });</li><li>            }</li><li>        });</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RemoveDeviceData e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1421px;"><h3 id="removedevicedata8-3" device-type="phone,2in1,tablet,wearable,tv">removeDeviceData<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removedevicedata8-3" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeDeviceData(deviceId: string): Promise&lt;void&gt;</p> <p>从当前数据库中删除指定设备的数据，使用Promise异步回调。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceId通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p> <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#sync">sync接口示例</a>。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.149.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.149.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.149.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.149.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceId</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">标识要删除其数据的设备。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.149.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.149.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-string-001'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RemoveDeviceData put success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RemoveDeviceData put fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    <span class="hljs-keyword">const</span> deviceid = <span class="hljs-string">'no_exist_device_id'</span>;</li><li>    kvStore.<span class="hljs-title function_">removeDeviceData</span>(deviceid).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'removeDeviceData success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'removeDeviceData fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>    kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RemoveDeviceData get success data:'</span> + data);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RemoveDeviceData get fail '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'RemoveDeviceData e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1724px;"><h3 id="sync8" device-type="phone,2in1,tablet,wearable,tv">sync<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sync8" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>sync(deviceIds: string[], mode: SyncMode, delayMs?: number): void</p> <p>在手动同步方式下，触发数据库同步。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>其中deviceIds为DeviceInfo中的networkId，通过调用deviceManager.getTrustedDeviceListSync方法得到。deviceManager模块的接口均为系统接口，仅系统应用可用。</p>  </div></div></div> <p><strong>需要权限</strong>： ohos.permission.DISTRIBUTED_DATASYNC。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.150.8.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.150.8.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.150.8.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.150.8.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">deviceIds</td> <td class="cellrowborder" width="25%">string[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">需要同步DeviceKVStore数据库的设备networkId列表。</td> </tr> <tr><td class="cellrowborder" width="25%">mode</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#syncmode">SyncMode</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">同步模式。</td> </tr> <tr><td class="cellrowborder" width="25%">delayMs</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">可选参数，允许延时时间，单位：ms（毫秒），默认为0。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> deviceManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.distributedHardware.deviceManager'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> devManager;</li><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_SYNC_ELEMENT</span> = <span class="hljs-string">'key_test_sync'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_SYNC_ELEMENT</span> = <span class="hljs-string">'value-string-001'</span>;</li><li><span class="hljs-comment">// create deviceManager</span></li><li>deviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'bundleName'</span>, <span class="hljs-function">(<span class="hljs-params">err, value</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (!err) {</li><li>    devManager = value;</li><li>    <span class="hljs-keyword">let</span> deviceIds = [];</li><li>    <span class="hljs-keyword">if</span> (devManager != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">var</span> devices = devManager.<span class="hljs-title function_">getTrustedDeviceListSync</span>();</li><li>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; devices.<span class="hljs-property">length</span>; i++) {</li><li>        deviceIds[i] = devices[i].<span class="hljs-property">networkId</span>;</li><li>      }</li><li>    }</li><li>    <span class="hljs-keyword">try</span> {</li><li>      kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Sync dataChange'</span>);</li><li>      });</li><li>      kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_SYNC_ELEMENT</span> + <span class="hljs-string">'testSync101'</span>, <span class="hljs-variable constant_">VALUE_TEST_SYNC_ELEMENT</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"put err: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Succeeded in putting data'</span>);</li><li>        <span class="hljs-keyword">const</span> mode = distributedData.<span class="hljs-property">SyncMode</span>.<span class="hljs-property">PULL_ONLY</span>;</li><li>        kvStore.<span class="hljs-title function_">sync</span>(deviceIds, mode, <span class="hljs-number">1000</span>);</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Sync e'</span> + e);</li><li>    }</li><li>  }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 816px;"><h3 id="ondatachange8-1" device-type="phone,2in1,tablet,wearable,tv">on('dataChange')<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondatachange8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'dataChange', type: SubscribeType, listener: Callback&lt;ChangeNotification&gt;): void</p> <p>订阅指定类型的数据变更通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.151.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.151.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.151.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.151.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">订阅的事件名，固定为'dataChange'，表示数据变更事件。</td> </tr> <tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#subscribetype">SubscribeType</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示订阅的类型。</td> </tr> <tr><td class="cellrowborder" width="25%">listener</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#changenotification">ChangeNotification</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li>kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, distributedData.<span class="hljs-property">SubscribeType</span>.<span class="hljs-property">SUBSCRIBE_TYPE_LOCAL</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"dataChange callback call data: "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1035px;"><h3 id="onsynccomplete8-1" device-type="phone,2in1,tablet,wearable,tv">on('syncComplete')<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsynccomplete8-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'syncComplete', syncCallback: Callback&lt;Array&lt;[string, number]&gt;&gt;): void</p> <p>订阅同步完成事件回调通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.152.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.152.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.152.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.152.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">订阅的事件名，固定为'syncComplete'，表示同步完成事件。</td> </tr> <tr><td class="cellrowborder" width="25%">syncCallback</td> <td class="cellrowborder" width="25%">Callback&lt;Array&lt;[string, number]&gt;&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。用于向调用方发送同步结果的回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_FLOAT_ELEMENT</span> = <span class="hljs-string">'key_test_float'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_FLOAT_ELEMENT</span> = <span class="hljs-number">321.12</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'syncComplete '</span> + data)</li><li>    });</li><li>    kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_FLOAT_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_FLOAT_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'syncComplete put success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'syncComplete put fail '</span> + error);</li><li>    });</li><li>}<span class="hljs-keyword">catch</span>(e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'syncComplete put e '</span> + e);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1083px;"><h3 id="offdatachange8-2" device-type="phone,2in1,tablet,wearable,tv">off('dataChange')<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdatachange8-2" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event:'dataChange', listener?: Callback&lt;ChangeNotification&gt;): void</p> <p>取消订阅数据变更通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.153.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.153.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.153.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.153.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">取消订阅的事件名，固定为'dataChange'，表示数据变更事件。</td> </tr> <tr><td class="cellrowborder" width="25%">listener</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-data#changenotification">ChangeNotification</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">取消订阅的函数。如不设置callback，则取消所有订阅的函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">KvstoreModel</span> {</li><li>    <span class="hljs-title function_">call</span>(<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"dataChange: "</span> + data);</li><li>    }</li><li>    <span class="hljs-title function_">subscribeDataChange</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, distributedData.<span class="hljs-property">SubscribeType</span>.<span class="hljs-property">SUBSCRIBE_TYPE_REMOTE</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>        }</li><li>    }</li><li>    <span class="hljs-title function_">unsubscribeDataChange</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">off</span>(<span class="hljs-string">'dataChange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>        }</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1083px;"><h3 id="offsynccomplete8-2" device-type="phone,2in1,tablet,wearable,tv">off('syncComplete')<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offsynccomplete8-2" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'syncComplete', syncCallback?: Callback&lt;Array&lt;[string, number]&gt;&gt;): void</p> <p>取消订阅同步完成事件回调通知。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.154.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.154.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.154.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.154.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">event</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">取消订阅的事件名，固定为'syncComplete'，表示同步完成事件。</td> </tr> <tr><td class="cellrowborder" width="25%">syncCallback</td> <td class="cellrowborder" width="25%">Callback&lt;Array&lt;[string, number]&gt;&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">取消订阅的函数。如不设置callback，则取消所有订阅的函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-blk-c106="" class="highlight-div"><div _ngcontent-blk-c106="" class="highlight-div-header"><div _ngcontent-blk-c106="" class="highlight-div-header-left"><div _ngcontent-blk-c106="" class="handle-button expand-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-blk-c106="" class="highlight-div-header-right"><div _ngcontent-blk-c106="" class="handle-button ai-button"></div><div _ngcontent-blk-c106="" class="handle-button line-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-blk-c106="" class="handle-button theme-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-blk-c106="" class="handle-button copy-button"><div _ngcontent-blk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-blk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> kvStore;</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">KvstoreModel</span> {</li><li>    <span class="hljs-title function_">call</span>(<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"syncComplete: "</span> + data);</li><li>    }</li><li>    <span class="hljs-title function_">subscribeSyncComplete</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>        }</li><li>    }</li><li>    <span class="hljs-title function_">unsubscribeSyncComplete</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">off</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>        }</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 447px;"><h2 id="syncmode" device-type="phone,2in1,tablet,wearable,tv">SyncMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="syncmode" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>同步模式枚举。</p> <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.155.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.155.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.155.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">PULL_ONLY</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">表示只能从远端拉取数据到本端。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">PUSH_ONLY</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">表示只能从本端推送数据到远端。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">PUSH_PULL</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">表示从本端推送数据到远端，然后从远端拉取数据到本端。</td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>