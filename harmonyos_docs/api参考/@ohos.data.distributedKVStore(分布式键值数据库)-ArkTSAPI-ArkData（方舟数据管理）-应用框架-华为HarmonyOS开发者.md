<h1 _ngcontent-wdy-c119="" class="doc-title ng-star-inserted" title="@ohos.data.distributedKVStore (分布式键值数据库)"> @ohos.data.distributedKVStore (分布式键值数据库) </h1>

<div _ngcontent-wdy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>分布式键值数据库为应用程序提供不同设备间数据库的分布式协同能力。通过调用分布式键值数据库各个接口，应用程序可将数据保存到分布式键值数据库中，并可对分布式键值数据库中的数据进行增加、删除、修改、查询、端端同步等操作。</p>    <p>该模块提供以下常用功能：</p>    <ul>     <li><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvmanager">KVManager</a>：分布式键值数据库管理实例，用于获取数据库的相关信息。</li>     <li><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a>：提供获取数据库结果集的相关方法，包括查询和移动数据读取位置等。</li>     <li><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a>：使用谓词表示数据库查询，提供创建Query实例、查询数据库中的数据和添加谓词的方法。</li>     <li><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#singlekvstore">SingleKVStore</a>：单版本分布式键值数据库，不对数据所属设备进行区分，提供查询数据和端端同步数据的方法。</li>     <li><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#devicekvstore">DeviceKVStore</a>：设备协同数据库，继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#singlekvstore">SingleKVStore</a>，以设备维度对数据进行区分，提供查询数据和端端同步数据的方法。</li>    </ul>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 9开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedKVStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 570px;">     <h2 id="kvmanagerconfig" device-type="phone,2in1,tablet,wearable,tv">KVManagerConfig<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="kvmanagerconfig" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供KVManager实例的配置信息，包括调用方的包名和应用的上下文。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">context</td>         <td class="cellrowborder" width="20%">BaseContext</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>应用的上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext">Context</a>。</p>          <p>从API version 10开始，context的参数类型为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">bundleName</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">调用方的包名。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 870px;">     <h2 id="constants" device-type="phone,2in1,tablet,wearable,tv">Constants<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constants" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>分布式键值数据库常量。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">MAX_KEY_LENGTH</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">值为1024，表示数据库中Key允许的最大长度，单位字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">MAX_VALUE_LENGTH</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">值为4194303，表示数据库中Value允许的最大长度，单位字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">MAX_KEY_LENGTH_DEVICE</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">值为896，表示设备协同数据库中Key允许的最大长度，单位字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">MAX_STORE_ID_LENGTH</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">值为128，表示数据库标识符允许的最大长度，单位字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">MAX_QUERY_LENGTH</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">值为512000，表示最大查询长度，单位字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">MAX_BATCH_SIZE</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">值为128，表示最大批处理操作数量。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 558px;">     <h2 id="valuetype" device-type="phone,2in1,tablet,wearable,tv">ValueType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="valuetype" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>数据类型枚举。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">STRING</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">表示值类型为字符串。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">INTEGER</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">表示值类型为整数。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FLOAT</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">表示值类型为浮点数。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BYTE_ARRAY</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">表示值类型为字节数组。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BOOLEAN</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">表示值类型为布尔值。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DOUBLE</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">表示值类型为双浮点数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 402px;">     <h2 id="value" device-type="phone,2in1,tablet,wearable,tv">Value<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="value" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>存储在数据库中的值对象。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">type</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#valuetype">ValueType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">值类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">value</td>         <td class="cellrowborder" width="20%">Uint8Array | string | number | boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">值。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 378px;">     <h2 id="entry" device-type="phone,2in1,tablet,wearable,tv">Entry<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="entry" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>存储在数据库中的键值对。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">key</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">键值。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">value</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#value">Value</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">值对象。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 492px;">     <h2 id="changenotification" device-type="phone,2in1,tablet,wearable,tv">ChangeNotification<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="changenotification" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>数据变更时通知的对象，包括数据插入的数据、更新的数据、删除的数据和设备ID。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">insertEntries</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">数据添加记录。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">updateEntries</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">数据更新记录。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">deleteEntries</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">数据删除记录。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">deviceId</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">设备ID，此处为设备UUID。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 447px;">     <h2 id="syncmode" device-type="phone,2in1,tablet,wearable,tv">SyncMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="syncmode" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>同步模式枚举。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">PULL_ONLY</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">表示只能从远端拉取数据到本端。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PUSH_ONLY</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">表示只能从本端推送数据到远端。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PUSH_PULL</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">表示从本端推送数据到远端，然后从远端拉取数据到本端。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 423px;">     <h2 id="subscribetype" device-type="phone,2in1,tablet,wearable,tv">SubscribeType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="subscribetype" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>订阅类型枚举。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">SUBSCRIBE_TYPE_LOCAL</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">表示订阅本地数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SUBSCRIBE_TYPE_REMOTE</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">表示订阅远端数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SUBSCRIBE_TYPE_ALL</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">表示订阅远端和本地数据变更。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 594px;">     <h2 id="kvstoretype" device-type="phone,2in1,tablet,wearable,tv">KVStoreType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="kvstoretype" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>分布式键值数据库类型枚举。</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.3.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.3.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.3.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">DEVICE_COLLABORATION</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示多设备协同数据库。</p>          <p><strong>数据库特点：</strong> 数据以设备的维度管理，不存在冲突；支持按照设备的维度查询数据。</p>          <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SINGLE_VERSION</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示单版本数据库。</p>          <p><strong>数据库特点：</strong> 数据不分设备，设备之间修改相同的Key会覆盖。</p>          <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1136px;">     <h2 id="securitylevel" device-type="phone,2in1,tablet,wearable,tv">SecurityLevel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitylevel" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>数据库的安全级别枚举。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>在单设备使用场景下，KV数据库支持修改securityLevel参数进行安全等级升级。升级操作需要注意以下几点：</p>       <ul>        <li>该操作不支持跨设备同步的数据库。不同安全等级的数据库之间不能进行数据同步。若需升级数据库的安全等级，建议重新创建更高安全等级的数据库。</li>        <li>关闭当前数据库后，修改securityLevel参数以重新设置数据库的安全等级，然后重新打开数据库。</li>        <li>该操作仅支持升级，例如从S2到S3，不支持降级，例如从S3到S2。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">S1</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示数据库的安全级别为低级别，数据的泄露、篡改、破坏、销毁可能会给个人或组织导致有限的不利影响。</p>          <p>例如，性别、国籍，用户申请记录等。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">S2</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示数据库的安全级别为中级别，数据的泄露、篡改、破坏、销毁可能会给个人或组织导致严重的不利影响。</p>          <p>例如，个人详细通信地址，姓名昵称等。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">S3</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示数据库的安全级别为高级别，数据的泄露、篡改、破坏、销毁可能会给个人或组织导致严峻的不利影响。</p>          <p>例如，个人实时精确定位信息、运动轨迹等。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">S4</td>         <td class="cellrowborder" width="33.33333333333333%">6</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示数据库的安全级别为关键级别，业界法律法规中定义的特殊数据类型，涉及个人的最私密领域的信息或者一旦泄露、篡改、破坏、销毁可能会给个人或组织造成重大的不利影响数据。</p>          <p>例如，政治观点、宗教、和哲学信仰、工会成员资格、基因数据、生物信息、健康和性生活状况、性取向等或设备认证鉴权、个人的信用卡等财务信息。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1899px;">     <h2 id="options" device-type="phone,2in1,tablet,wearable,tv">Options<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="options" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用于提供创建数据库的配置信息。</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">createIfMissing</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>当数据库文件不存在时是否创建数据库，true为创建，false为不创建，默认为true。</p>          <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">encrypt</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置数据库文件是否加密，true为加密，false为不加密，默认为false。</p>          <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">backup</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置数据库文件是否备份，true为备份，false为不备份，默认为true。</p>          <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">autoSync</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置数据库是否支持跨设备自动同步。默认为false，即只支持手动同步。配置为true，即只支持在跨设备Call调用实现的多端协同中生效，其他场景无法生效。</p>          <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>          <p><strong>需要权限</strong>： ohos.permission.DISTRIBUTED_DATASYNC</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">kvStoreType</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoretype">KVStoreType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置要创建的数据库类型，默认为DEVICE_COLLABORATION，即多设备协同数据库。</p>          <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">securityLevel</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#securitylevel">SecurityLevel</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>设置数据库安全级别。</p>          <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">schema</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置定义存储在数据库中的值，默认为undefined，即不使用Schema。</p>          <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 924px;">     <h2 id="schema" device-type="phone,2in1,tablet,wearable,tv">Schema<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="schema" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示数据库模式，可以在创建或打开数据库时创建Schema对象并将它们放入<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#options">Options</a>中。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">root</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#fieldnode">FieldNode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">存放了Value中所有字段的定义。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">indexes</td>         <td class="cellrowborder" width="20%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">索引字段定义，只有通过此字段指定的FieldNode才会创建索引，格式为：'$.field1', '$.field2'。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">mode</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">Schema的模式，可以取值0或1，0表示COMPATIBLE模式，1表示STRICT模式。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">skip</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">支持在检查Value时，跳过skip指定的字节数，且取值范围为[0, 4 * 1024 * 1024 - 2]字节。</td>        </tr>             </tbody></table></div>     </div>     <p>STRICT：STRICT模式要求用户插入的值必须与Schema定义严格匹配，字段数量和格式都不能有差异。如果不匹配，数据库将在插入数据时返回错误。</p>     <p>COMPATIBLE：选择为COMPATIBLE模式时，数据库在检查Value格式时较为宽松，只要Value具有Schema描述的特征即可，允许存在额外字段。例如，定义了id、name字段时，可以插入id、name、age等多个字段。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 751px;">     <h3 id="constructor" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p>     <p>用于创建Schema实例的构造函数。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> child1 = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">FieldNode</span>(<span class="hljs-string">'id'</span>);</li><li>child1.<span class="hljs-property">type</span> = distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">INTEGER</span>;</li><li>child1.<span class="hljs-property">nullable</span> = <span class="hljs-literal">false</span>;</li><li>child1.<span class="hljs-property">default</span> = <span class="hljs-string">'1'</span>;</li><li><span class="hljs-keyword">let</span> child2 = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">FieldNode</span>(<span class="hljs-string">'name'</span>);</li><li>child2.<span class="hljs-property">type</span> = distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>;</li><li>child2.<span class="hljs-property">nullable</span> = <span class="hljs-literal">false</span>;</li><li>child2.<span class="hljs-property">default</span> = <span class="hljs-string">'zhangsan'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> schema = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Schema</span>();</li><li>schema.<span class="hljs-property">root</span>.<span class="hljs-title function_">appendChild</span>(child1);</li><li>schema.<span class="hljs-property">root</span>.<span class="hljs-title function_">appendChild</span>(child2);</li><li>schema.<span class="hljs-property">indexes</span> = [<span class="hljs-string">'$.id'</span>, <span class="hljs-string">'$.name'</span>];</li><li>schema.<span class="hljs-property">mode</span> = <span class="hljs-number">1</span>;</li><li>schema.<span class="hljs-property">skip</span> = <span class="hljs-number">0</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 783px;">     <h2 id="fieldnode" device-type="phone,2in1,tablet,wearable,tv">FieldNode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="fieldnode" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示 Schema 实例的节点，提供定义存储在数据库中的值的方法。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">nullable</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示数据库字段是否可以为空。true表示此节点数据可以为空，false表示此节点数据不能为空。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">default</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示FieldNode的默认值。default需传入type对应类型可解析的字符串字面量，确保内容类型与type字段类型一致。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">type</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示指定节点对应的数据类型，取值为<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#valuetype">ValueType</a>对应的枚举值。暂不支持BYTE_ARRAY，使用此类型会导致<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#getkvstore">getKVStore</a>失败。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 696px;">     <h3 id="constructor-1" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(name: string)</p>     <p>用于创建带有string字段FieldNode实例的构造函数。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">FieldNode的值，不能为空，且不大于64个字符。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1404px;">     <h3 id="appendchild" device-type="phone,2in1,tablet,wearable,tv">appendChild<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="appendchild" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>appendChild(child: FieldNode): boolean</p>     <p>在当前 FieldNode 中添加一个子节点。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">child</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#fieldnode">FieldNode</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要附加的域节点。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回true表示子节点成功添加到FieldNode；返回false则表示操作失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">node</span>: distributedKVStore.<span class="hljs-property">FieldNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">FieldNode</span>(<span class="hljs-string">"root"</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">child1</span>: distributedKVStore.<span class="hljs-property">FieldNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">FieldNode</span>(<span class="hljs-string">"child1"</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">child2</span>: distributedKVStore.<span class="hljs-property">FieldNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">FieldNode</span>(<span class="hljs-string">"child2"</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">child3</span>: distributedKVStore.<span class="hljs-property">FieldNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">FieldNode</span>(<span class="hljs-string">"child3"</span>);</li><li>  node.<span class="hljs-title function_">appendChild</span>(child1);</li><li>  node.<span class="hljs-title function_">appendChild</span>(child2);</li><li>  node.<span class="hljs-title function_">appendChild</span>(child3);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"appendNode "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(node));</li><li>  child1 = <span class="hljs-literal">null</span>;</li><li>  child2 = <span class="hljs-literal">null</span>;</li><li>  child3 = <span class="hljs-literal">null</span>;</li><li>  node = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"AppendChild "</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2408px;">     <h2 id="distributedkvstorecreatekvmanager" device-type="phone,2in1,tablet,wearable,tv">distributedKVStore.createKVManager<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="distributedkvstorecreatekvmanager" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createKVManager(config: KVManagerConfig): KVManager</p>     <p>创建一个KVManager对象实例，用于管理数据库对象。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvmanagerconfig">KVManagerConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">提供KVManager实例的配置信息，包括调用方的包名（不能为空）和用户信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvmanager">KVManager</a></td>         <td class="cellrowborder" width="50%">返回创建的KVManager对象实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>Stage模型下的示例：</p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">kvManager</span>: distributedKVStore.<span class="hljs-property">KVManager</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">appId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.example.datamanagertest'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"MyAbilityStage onCreate"</span>);</li><li>    <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>;</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">kvManagerConfig</span>: distributedKVStore.<span class="hljs-property">KVManagerConfig</span> = {</li><li>      <span class="hljs-attr">context</span>: context,</li><li>      <span class="hljs-attr">bundleName</span>: appId</li><li>    }</li><li>    <span class="hljs-keyword">try</span> {</li><li>      kvManager = distributedKVStore.<span class="hljs-title function_">createKVManager</span>(kvManagerConfig);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in creating KVManager"</span>);</li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create KVManager.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (kvManager !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-comment">// 进行后续创建数据库等相关操作</span></li><li>      <span class="hljs-comment">// ...</span></li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>FA模型下的示例：</p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">kvManager</span>: distributedKVStore.<span class="hljs-property">KVManager</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">appId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.example.datamanagertest'</span>;</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">kvManagerConfig</span>: distributedKVStore.<span class="hljs-property">KVManagerConfig</span> = {</li><li>  <span class="hljs-attr">context</span>: context,</li><li>  <span class="hljs-attr">bundleName</span>: appId</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  kvManager = distributedKVStore.<span class="hljs-title function_">createKVManager</span>(kvManagerConfig);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in creating KVManager"</span>);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create KVManager.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li><li><span class="hljs-keyword">if</span> (kvManager !== <span class="hljs-literal">undefined</span>) {</li><li>  kvManager = kvManager <span class="hljs-keyword">as</span> distributedKVStore.<span class="hljs-property">KVManager</span>;</li><li>  <span class="hljs-comment">// 进行后续创建数据库等相关操作</span></li><li>  <span class="hljs-comment">// ...</span></li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 206px;">     <h2 id="kvmanager" device-type="phone,2in1,tablet,wearable,tv">KVManager<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="kvmanager" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>分布式键值数据库管理实例，用于获取分布式键值数据库的相关信息。在调用KVManager的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#distributedkvstorecreatekvmanager">createKVManager</a>构建一个KVManager实例。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2041px;">     <h3 id="getkvstore" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">getKVStore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getkvstore" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getKVStore&lt;T&gt;(storeId: string, options: Options, callback: AsyncCallback&lt;T&gt;): void</p>     <p>通过指定options和storeId，创建并获取分布式键值数据库，使用callback异步回调。</p>     <p>注意：</p>     <p>在获取已有的分布式键值数据库时，如果数据库文件无法打开（例如文件头损坏），将触发自动重建逻辑，并返回新创建的分布式键值数据库实例。建议对重要且无法重新生成的数据使用备份恢复功能，以防止数据丢失。有关备份恢复的使用方法，请参阅<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">storeId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">数据库唯一标识符，长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_STORE_ID_LENGTH</a>，且只能包含字母数字或下划线_。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#options">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建分布式键值实例的配置信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;T&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回创建的分布式键值数据库实例（根据kvStoreType的不同，可以创建SingleKVStore实例和DeviceKVStore实例）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100002</td>         <td class="cellrowborder" width="50%">Open existed database with changed options.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">kvStore</span>: distributedKVStore.<span class="hljs-property">SingleKVStore</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: distributedKVStore.<span class="hljs-property">Options</span> = {</li><li>    <span class="hljs-attr">createIfMissing</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">encrypt</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">backup</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">autoSync</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">kvStoreType</span>: distributedKVStore.<span class="hljs-property">KVStoreType</span>.<span class="hljs-property">SINGLE_VERSION</span>,</li><li>    <span class="hljs-attr">securityLevel</span>: distributedKVStore.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span></li><li>  };</li><li>  kvManager.<span class="hljs-title function_">getKVStore</span>(<span class="hljs-string">'storeId'</span>, options, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, store: distributedKVStore.SingleKVStore</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get KVStore.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in getting KVStore"</span>);</li><li>    kvStore = store;</li><li>    <span class="hljs-keyword">if</span> (kvStore !== <span class="hljs-literal">null</span>) {</li><li>       <span class="hljs-comment">// 进行后续相关数据操作，包括数据的增、删、改、查、订阅数据变化等操作</span></li><li>       <span class="hljs-comment">// ...</span></li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1967px;">     <h3 id="getkvstore-1" device-type="phone,2in1,tablet,wearable,tv">getKVStore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getkvstore-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getKVStore&lt;T&gt;(storeId: string, options: Options): Promise&lt;T&gt;</p>     <p>指定options和storeId，创建并获取分布式键值数据库，使用Promise回调。</p>     <p>注意：</p>     <p>获取已有的分布式键值数据库时，如果数据库文件无法打开（如文件头损坏），将触发自动重建逻辑，并返回新创建的分布式键值数据库实例。建议对重要且无法重新生成的数据使用备份恢复功能，防止数据丢失。备份恢复的使用方法详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-backup-and-restore" target="_blank">数据库备份与恢复</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">storeId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">数据库唯一标识符，长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_STORE_ID_LENGTH</a>，且只能包含字母数字或下划线_。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#options">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建分布式键值实例的配置信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;T&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回创建的分布式键值数据库实例（根据kvStoreType的不同，可以创建SingleKVStore实例和DeviceKVStore实例）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.13.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.25.13.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100002</td>         <td class="cellrowborder" width="50%">Open existed database with changed options.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">kvStore</span>: distributedKVStore.<span class="hljs-property">SingleKVStore</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: distributedKVStore.<span class="hljs-property">Options</span> = {</li><li>    <span class="hljs-attr">createIfMissing</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">encrypt</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">backup</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">autoSync</span>: <span class="hljs-literal">false</span>,</li><li>    <span class="hljs-attr">kvStoreType</span>: distributedKVStore.<span class="hljs-property">KVStoreType</span>.<span class="hljs-property">SINGLE_VERSION</span>,</li><li>    <span class="hljs-attr">securityLevel</span>: distributedKVStore.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span></li><li>  };</li><li>  kvManager.<span class="hljs-property">getKVStore</span>&lt;distributedKVStore.<span class="hljs-property">SingleKVStore</span>&gt;(<span class="hljs-string">'storeId'</span>, options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">store: distributedKVStore.SingleKVStore</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in getting KVStore"</span>);</li><li>    kvStore = store;</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get KVStore.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1995px;">     <h3 id="closekvstore" device-type="phone,2in1,tablet,wearable,tv">closeKVStore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="closekvstore" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>closeKVStore(appId: string, storeId: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>通过storeId的值关闭指定的分布式键值数据库，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">appId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用的BundleName，不可为空且长度不大于256。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">storeId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要关闭的数据库唯一标识符，长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_STORE_ID_LENGTH</a>，且只能包含字母数字或下划线_。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当要关闭的数据库成功关闭，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">kvStore</span>: distributedKVStore.<span class="hljs-property">SingleKVStore</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: distributedKVStore.<span class="hljs-property">Options</span> = {</li><li>  <span class="hljs-attr">createIfMissing</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">encrypt</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">backup</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">autoSync</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">kvStoreType</span>: distributedKVStore.<span class="hljs-property">KVStoreType</span>.<span class="hljs-property">SINGLE_VERSION</span>,</li><li>  <span class="hljs-attr">schema</span>: <span class="hljs-literal">undefined</span>,</li><li>  <span class="hljs-attr">securityLevel</span>: distributedKVStore.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span></li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  kvManager.<span class="hljs-title function_">getKVStore</span>(<span class="hljs-string">'storeId'</span>, options, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">store</span>: distributedKVStore.<span class="hljs-property">SingleKVStore</span> | <span class="hljs-literal">null</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get KVStore.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting KVStore'</span>);</li><li>    kvStore = store;</li><li>    kvStore = <span class="hljs-literal">null</span>;</li><li>    store = <span class="hljs-literal">null</span>;</li><li>    <span class="hljs-keyword">if</span> (kvManager != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-comment">// appId为createKVManager中的appId</span></li><li>      kvManager.<span class="hljs-title function_">closeKVStore</span>(appId, <span class="hljs-string">'storeId'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>)=&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close KVStore.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing KVStore'</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1977px;">     <h3 id="closekvstore-1" device-type="phone,2in1,tablet,wearable,tv">closeKVStore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="closekvstore-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>closeKVStore(appId: string, storeId: string): Promise&lt;void&gt;</p>     <p>通过storeId的值关闭指定的分布式键值数据库，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">appId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用的BundleName，不可为空且长度不大于256。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">storeId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要关闭的数据库唯一标识符，长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_STORE_ID_LENGTH</a>，且只能包含字母数字或下划线_。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">kvStore</span>: distributedKVStore.<span class="hljs-property">SingleKVStore</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: distributedKVStore.<span class="hljs-property">Options</span> = {</li><li>  <span class="hljs-attr">createIfMissing</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">encrypt</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">backup</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">autoSync</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">kvStoreType</span>: distributedKVStore.<span class="hljs-property">KVStoreType</span>.<span class="hljs-property">SINGLE_VERSION</span>,</li><li>  <span class="hljs-attr">schema</span>: <span class="hljs-literal">undefined</span>,</li><li>  <span class="hljs-attr">securityLevel</span>: distributedKVStore.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span></li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  kvManager.<span class="hljs-property">getKVStore</span>&lt;distributedKVStore.<span class="hljs-property">SingleKVStore</span>&gt;(<span class="hljs-string">'storeId'</span>, options).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">store</span>: distributedKVStore.<span class="hljs-property">SingleKVStore</span> | <span class="hljs-literal">null</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting KVStore'</span>);</li><li>    kvStore = store;</li><li>    kvStore = <span class="hljs-literal">null</span>;</li><li>    store = <span class="hljs-literal">null</span>;</li><li>    <span class="hljs-keyword">if</span> (kvManager != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-comment">// appId为createKVManager中的appId</span></li><li>      kvManager.<span class="hljs-title function_">closeKVStore</span>(appId, <span class="hljs-string">'storeId'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing KVStore'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close KVStore.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get KVStore.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close KVStore.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2074px;">     <h3 id="deletekvstore" device-type="phone,2in1,tablet,wearable,tv">deleteKVStore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletekvstore" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteKVStore(appId: string, storeId: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>通过storeId的值删除指定的分布式键值数据库，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">appId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用的BundleName，不可为空且长度不大于256。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">storeId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要删除的数据库唯一标识符，长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_STORE_ID_LENGTH</a>，且只能包含字母数字或下划线_。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当要删除的数据库成功删除，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100004</td>         <td class="cellrowborder" width="50%">Not found.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">kvStore</span>: distributedKVStore.<span class="hljs-property">SingleKVStore</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: distributedKVStore.<span class="hljs-property">Options</span> = {</li><li>  <span class="hljs-attr">createIfMissing</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">encrypt</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">backup</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">autoSync</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">kvStoreType</span>: distributedKVStore.<span class="hljs-property">KVStoreType</span>.<span class="hljs-property">SINGLE_VERSION</span>,</li><li>  <span class="hljs-attr">schema</span>: <span class="hljs-literal">undefined</span>,</li><li>  <span class="hljs-attr">securityLevel</span>: distributedKVStore.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span></li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  kvManager.<span class="hljs-title function_">getKVStore</span>(<span class="hljs-string">'storeId'</span>, options, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">store</span>: distributedKVStore.<span class="hljs-property">SingleKVStore</span> | <span class="hljs-literal">null</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get KVStore.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting KVStore'</span>);</li><li>    kvStore = store;</li><li>    kvStore = <span class="hljs-literal">null</span>;</li><li>    store = <span class="hljs-literal">null</span>;</li><li>    <span class="hljs-keyword">if</span> (kvManager != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-comment">// appId为createKVManager中的appId</span></li><li>      kvManager.<span class="hljs-title function_">deleteKVStore</span>(appId, <span class="hljs-string">'storeId'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete KVStore.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in deleting KVStore`</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete KVStore.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2032px;">     <h3 id="deletekvstore-1" device-type="phone,2in1,tablet,wearable,tv">deleteKVStore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletekvstore-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteKVStore(appId: string, storeId: string): Promise&lt;void&gt;</p>     <p>通过storeId的值删除指定的分布式键值数据库，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">appId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用的BundleName，不可为空且长度不大于256。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">storeId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要删除的数据库唯一标识符，长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_STORE_ID_LENGTH</a>，且只能包含字母数字或下划线_。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100004</td>         <td class="cellrowborder" width="50%">Not found.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">kvStore</span>: distributedKVStore.<span class="hljs-property">SingleKVStore</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">options</span>: distributedKVStore.<span class="hljs-property">Options</span> = {</li><li>  <span class="hljs-attr">createIfMissing</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">encrypt</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">backup</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">autoSync</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">kvStoreType</span>: distributedKVStore.<span class="hljs-property">KVStoreType</span>.<span class="hljs-property">SINGLE_VERSION</span>,</li><li>  <span class="hljs-attr">schema</span>: <span class="hljs-literal">undefined</span>,</li><li>  <span class="hljs-attr">securityLevel</span>: distributedKVStore.<span class="hljs-property">SecurityLevel</span>.<span class="hljs-property">S3</span></li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  kvManager.<span class="hljs-property">getKVStore</span>&lt;distributedKVStore.<span class="hljs-property">SingleKVStore</span>&gt;(<span class="hljs-string">'storeId'</span>, options).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">store</span>: distributedKVStore.<span class="hljs-property">SingleKVStore</span> | <span class="hljs-literal">null</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting KVStore'</span>);</li><li>    kvStore = store;</li><li>    kvStore = <span class="hljs-literal">null</span>;</li><li>    store = <span class="hljs-literal">null</span>;</li><li>    <span class="hljs-keyword">if</span> (kvManager != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-comment">// appId为createKVManager中的appId</span></li><li>      kvManager.<span class="hljs-title function_">deleteKVStore</span>(appId, <span class="hljs-string">'storeId'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in deleting KVStore'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete KVStore.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get KVStore.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete KVStore.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1326px;">     <h3 id="getallkvstoreid" device-type="phone,2in1,tablet,wearable,tv">getAllKVStoreId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getallkvstoreid" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAllKVStoreId(appId: string, callback: AsyncCallback&lt;string[]&gt;): void</p>     <p>获取所有通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#getkvstore">getKVStore</a>方法创建的且没有调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#deletekvstore">deleteKVStore</a>方法删除的分布式键值数据库的storeId，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">appId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用的BundleName，不可为空且长度不大于256。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;string[]&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回所有创建的分布式键值数据库的storeId。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// appId为createKVManager中的appId</span></li><li>  kvManager.<span class="hljs-title function_">getAllKVStoreId</span>(appId, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">string</span>[]</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get AllKVStoreId.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting AllKVStoreId'</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`GetAllKVStoreId size = <span class="hljs-subst">${data.length}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get AllKVStoreId.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1380px;">     <h3 id="getallkvstoreid-1" device-type="phone,2in1,tablet,wearable,tv">getAllKVStoreId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getallkvstoreid-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAllKVStoreId(appId: string): Promise&lt;string[]&gt;</p>     <p>获取所有通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#getkvstore">getKVStore</a>方法创建的且没有调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#deletekvstore">deleteKVStore</a>方法删除的分布式键值数据库的storeId，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">appId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用的BundleName，不可为空且长度不大于256。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string[]&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回所有创建的分布式键值数据库的storeId。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// appId为createKVManager中的appId</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'GetAllKVStoreId'</span>);</li><li>  kvManager.<span class="hljs-title function_">getAllKVStoreId</span>(appId).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">string</span>[]</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting AllKVStoreId'</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`GetAllKVStoreId size = <span class="hljs-subst">${data.length}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get AllKVStoreId.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get AllKVStoreId.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1278px;">     <h3 id="ondistributeddataservicedie" device-type="phone,2in1,tablet,wearable,tv">on('distributedDataServiceDie')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondistributeddataservicedie" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'distributedDataServiceDie', deathCallback: Callback&lt;void&gt;): void</p>     <p>订阅服务状态变更通知。如果服务终止，需要重新注册数据变更通知和端端同步完成事件回调通知，并且端端同步操作会返回失败。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">订阅的事件名，固定为'distributedDataServiceDie'，即服务状态变更事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">deathCallback</td>         <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。订阅成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'KVManagerOn'</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">deathCallback</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'death callback call'</span>);</li><li>  }</li><li>  kvManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">'distributedDataServiceDie'</span>, deathCallback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1278px;">     <h3 id="offdistributeddataservicedie" device-type="phone,2in1,tablet,wearable,tv">off('distributedDataServiceDie')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdistributeddataservicedie" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'distributedDataServiceDie', deathCallback?: Callback&lt;void&gt;): void</p>     <p>取消订阅服务状态变更通知。参数中的deathCallback必须是已经订阅过的deathCallback，否则会取消订阅失败。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消订阅的事件名，固定为'distributedDataServiceDie'，即服务状态变更事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">deathCallback</td>         <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数。如果该参数不填，那么会将之前订阅过的所有的deathCallback取消订阅。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'KVManagerOff'</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">deathCallback</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'death callback call'</span>);</li><li>  }</li><li>  kvManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">'distributedDataServiceDie'</span>, deathCallback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 394px;">     <h2 id="kvstoreresultset" device-type="phone,2in1,tablet,wearable,tv">KVStoreResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="kvstoreresultset" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供获取数据库结果集的相关方法，包括查询和移动数据读取位置等。同时允许打开的结果集的最大数量为8个。</p>     <p>KVStoreResultSet实例不会实时刷新。使用结果集后，如果数据库中的数据发生变化（如增删改操作），需要重新查询才能获取到最新的数据。</p>     <p>在调用KVStoreResultSet的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#getkvstore">getKVStore</a>构建一个SingleKVStore或者DeviceKVStore实例。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>KVStoreResultSet的游标起始位置为-1。</p>      </div></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 946px;">     <h3 id="getcount" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">getCount<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcount" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCount(): number</p>     <p>获取结果集中的总行数。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">返回数据的总行数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>    resultSet = result;</li><li>    count = resultSet.<span class="hljs-title function_">getCount</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getCount succeed:"</span> + count);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getCount failed: "</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 986px;">     <h3 id="getposition" device-type="phone,2in1,tablet,wearable,tv">getPosition<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getposition" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPosition(): number</p>     <p>获取结果集中当前的读取位置。读取位置会因<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#movetofirst">moveToFirst</a>、<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#movetolast">moveToLast</a>等操作而发生变化。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">返回当前读取位置。取值范围&gt;= -1，值为 -1 时表示还未开始读取，值为 0 时表示第一行。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">position</span>: <span class="hljs-built_in">number</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResultSet succeeded.'</span>);</li><li>    resultSet = result;</li><li>    position = resultSet.<span class="hljs-title function_">getPosition</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getPosition succeed:"</span> + position);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getPosition failed: "</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 962px;">     <h3 id="movetofirst" device-type="phone,2in1,tablet,wearable,tv">moveToFirst<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="movetofirst" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>moveToFirst(): boolean</p>     <p>将读取位置移动到第一行。如果结果集为空，则返回false。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回true表示操作成功；返回false则表示操作失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">moved</span>: <span class="hljs-built_in">boolean</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>    resultSet = result;</li><li>    moved = resultSet.<span class="hljs-title function_">moveToFirst</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"moveToFirst succeed: "</span> + moved);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"moveToFirst failed "</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 962px;">     <h3 id="movetolast" device-type="phone,2in1,tablet,wearable,tv">moveToLast<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="movetolast" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>moveToLast(): boolean</p>     <p>将读取位置移动到最后一行。如果结果集为空，则返回false。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回true表示操作成功；返回false则表示操作失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">moved</span>: <span class="hljs-built_in">boolean</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>    resultSet = result;</li><li>    moved = resultSet.<span class="hljs-title function_">moveToLast</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"moveToLast succeed:"</span> + moved);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"moveToLast failed: "</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1010px;">     <h3 id="movetonext" device-type="phone,2in1,tablet,wearable,tv">moveToNext<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="movetonext" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>moveToNext(): boolean</p>     <p>将读取位置移动到下一行。如果结果集为空，则返回false。适用于全量获取数据库结果集的场景。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回true表示操作成功；返回false则表示操作失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">moved</span>: <span class="hljs-built_in">boolean</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>    resultSet = result;</li><li>    <span class="hljs-keyword">do</span> {</li><li>      moved = resultSet.<span class="hljs-title function_">moveToNext</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"moveToNext succeed: "</span> + moved);</li><li>    } <span class="hljs-keyword">while</span> (moved)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"moveToNext failed: "</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 986px;">     <h3 id="movetoprevious" device-type="phone,2in1,tablet,wearable,tv">moveToPrevious<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="movetoprevious" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>moveToPrevious(): boolean</p>     <p>将读取位置移动到上一行。如果结果集为空，则返回false。适用于全量获取数据库结果集的场景。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回true表示操作成功；返回false则表示操作失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">moved</span>: <span class="hljs-built_in">boolean</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>    resultSet = result;</li><li>    moved = resultSet.<span class="hljs-title function_">moveToLast</span>();</li><li>    moved = resultSet.<span class="hljs-title function_">moveToPrevious</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"moveToPrevious succeed:"</span> + moved);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"moveToPrevious failed: "</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1500px;">     <h3 id="move" device-type="phone,2in1,tablet,wearable,tv">move<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="move" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>move(offset: number): boolean</p>     <p>将读取位置移动到当前位置的相对偏移量。即当前游标位置向下偏移 offset 行。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">offset</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示与当前位置的相对偏移量，正偏移表示向前移动，负偏移表示向后移动。当游标超出结果集最前或者最后的位置时，接口返回false。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回true表示操作成功；返回false则表示操作失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">moved</span>: <span class="hljs-built_in">boolean</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting resultSet'</span>);</li><li>    resultSet = result;</li><li>    moved = resultSet.<span class="hljs-title function_">move</span>(<span class="hljs-number">2</span>); <span class="hljs-comment">//若当前位置为0，将读取位置从绝对位置为0的位置移动2行，即移动到绝对位置为2，行数为3的位置</span></li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in moving.moved = <span class="hljs-subst">${moved}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSet.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to move.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1452px;">     <h3 id="movetoposition" device-type="phone,2in1,tablet,wearable,tv">moveToPosition<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="movetoposition" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>moveToPosition(position: number): boolean</p>     <p>将读取位置从 0 移动到绝对位置。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">position</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示绝对位置。当绝对位置超出结果集最前或者最后的位置时，接口返回false。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回true表示操作成功；返回false则表示操作失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">moved</span>: <span class="hljs-built_in">boolean</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting resultSet'</span>);</li><li>    resultSet = result;</li><li>    moved = resultSet.<span class="hljs-title function_">moveToPosition</span>(<span class="hljs-number">1</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in moving to position.moved=<span class="hljs-subst">${moved}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSet.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to move to position.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 986px;">     <h3 id="isfirst" device-type="phone,2in1,tablet,wearable,tv">isFirst<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isfirst" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isFirst(): boolean</p>     <p>检查读取位置是否为第一行。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回true表示读取位置为第一行；返回false表示读取位置不是第一行。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">isFirst</span>: <span class="hljs-built_in">boolean</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>    resultSet = result;</li><li>    isFirst = resultSet.<span class="hljs-title function_">isFirst</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Check isFirst succeed:"</span> + isFirst);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Check isFirst failed: "</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 986px;">     <h3 id="islast" device-type="phone,2in1,tablet,wearable,tv">isLast<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="islast" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isLast(): boolean</p>     <p>检查读取位置是否为最后一行。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回true表示读取位置为最后一行；返回false表示读取位置不是最后一行。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">isLast</span>: <span class="hljs-built_in">boolean</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>    resultSet = result;</li><li>    isLast = resultSet.<span class="hljs-title function_">isLast</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Check isLast succeed: "</span> + isLast);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Check isLast failed: "</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 962px;">     <h3 id="isbeforefirst" device-type="phone,2in1,tablet,wearable,tv">isBeforeFirst<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isbeforefirst" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isBeforeFirst(): boolean</p>     <p>检查读取位置是否在第一行之前。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回true表示读取位置在第一行之前；返回false表示读取位置不在第一行之前。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>    resultSet = result;</li><li>    <span class="hljs-keyword">let</span> isBeforeFirst = resultSet.<span class="hljs-title function_">isBeforeFirst</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Check isBeforeFirst succeed: "</span> + isBeforeFirst);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Check isBeforeFirst failed: "</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 962px;">     <h3 id="isafterlast" device-type="phone,2in1,tablet,wearable,tv">isAfterLast<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isafterlast" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isAfterLast(): boolean</p>     <p>检查读取位置是否在最后一行之后。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回true表示读取位置在最后一行之后；返回false表示读取位置不在最后一行之后。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>    resultSet = result;</li><li>    <span class="hljs-keyword">let</span> isAfterLast = resultSet.<span class="hljs-title function_">isAfterLast</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Check isAfterLast succeed:"</span> + isAfterLast);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Check isAfterLast failed: "</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 938px;">     <h3 id="getentry" device-type="phone,2in1,tablet,wearable,tv">getEntry<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentry" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntry(): Entry</p>     <p>从当前位置获取对应的键值对。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a></td>         <td class="cellrowborder" width="50%">返回键值对。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getResultSet succeed.'</span>);</li><li>    resultSet = result;</li><li>    <span class="hljs-keyword">let</span> entry = resultSet.<span class="hljs-title function_">getEntry</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getEntry succeed:"</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(entry));</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getResultSet failed: '</span> + err);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"getEntry failed: "</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 254px;">     <h2 id="query" device-type="phone,2in1,tablet,wearable,tv">Query<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="query" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>使用谓词表示数据库查询，提供创建Query实例、查询数据库中的数据和添加谓词的方法。一个Query对象中谓词数量上限为256个。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 254px;">     <h3 id="constructor-2" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p>     <p>用于创建Query实例的构造函数。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 914px;">     <h3 id="reset" device-type="phone,2in1,tablet,wearable,tv">reset<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="reset" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>reset(): Query</p>     <p>重置Query对象。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回重置的Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>  <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>    query.<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    query.<span class="hljs-title function_">reset</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>  }</li><li>  query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"simply calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1541px;">     <h3 id="equalto" device-type="phone,2in1,tablet,wearable,tv">equalTo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="equalto" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>equalTo(field: string, value: number|string|boolean): Query</p>     <p>构造一个Query对象来查询具有指定字段的条目，其值等于指定的值。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用equalTo时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number|string|boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.51.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>  <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>    query.<span class="hljs-title function_">equalTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>  }</li><li>  query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1541px;">     <h3 id="notequalto" device-type="phone,2in1,tablet,wearable,tv">notEqualTo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="notequalto" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>notEqualTo(field: string, value: number|string|boolean): Query</p>     <p>构造一个Query对象以查询具有指定字段且值不等于指定值的条目。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用notEqualTo时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number|string|boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.52.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>  <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>    query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>  }</li><li>  query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1541px;">     <h3 id="greaterthan" device-type="phone,2in1,tablet,wearable,tv">greaterThan<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="greaterthan" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>greaterThan(field: string, value: number|string|boolean): Query</p>     <p>构造一个Query对象以查询具有大于指定值的指定字段的条目。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用greaterThan时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number|string|boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.53.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">greaterThan</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1541px;">     <h3 id="lessthan" device-type="phone,2in1,tablet,wearable,tv">lessThan<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="lessthan" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>lessThan(field: string, value: number|string): Query</p>     <p>构造一个Query对象以查询具有小于指定值的指定字段的条目。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用lessThan时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number|string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.54.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">lessThan</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1541px;">     <h3 id="greaterthanorequalto" device-type="phone,2in1,tablet,wearable,tv">greaterThanOrEqualTo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="greaterthanorequalto" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>greaterThanOrEqualTo(field: string, value: number|string): Query</p>     <p>构造一个Query对象以查询具有指定字段且值大于或等于指定值的条目。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用greaterThanOrEqualTo时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number|string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.55.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">greaterThanOrEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1541px;">     <h3 id="lessthanorequalto" device-type="phone,2in1,tablet,wearable,tv">lessThanOrEqualTo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="lessthanorequalto" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>lessThanOrEqualTo(field: string, value: number|string): Query</p>     <p>构造一个Query对象以查询具有指定字段且值小于或等于指定值的条目。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用lessThanOrEqualTo时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number|string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.56.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">lessThanOrEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1496px;">     <h3 id="isnull" device-type="phone,2in1,tablet,wearable,tv">isNull<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isnull" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isNull(field: string): Query</p>     <p>构造一个Query对象以查询具有值为null的指定字段的条目。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用isNull时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.57.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">isNull</span>(<span class="hljs-string">"field"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1541px;">     <h3 id="innumber" device-type="phone,2in1,tablet,wearable,tv">inNumber<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="innumber" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inNumber(field: string, valueList: number[]): Query</p>     <p>构造一个Query对象以查询具有指定字段的条目，其值在指定的值列表中。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用inNumber时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">valueList</td>         <td class="cellrowborder" width="25%">number[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定的值列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.58.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.58.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.58.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">inNumber</span>(<span class="hljs-string">"field"</span>, [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1541px;">     <h3 id="instring" device-type="phone,2in1,tablet,wearable,tv">inString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="instring" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inString(field: string, valueList: string[]): Query</p>     <p>构造一个Query对象以查询具有指定字段的条目，其值在指定的字符串值列表中。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用inString时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">valueList</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定的字符串值列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.59.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.59.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.59.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">inString</span>(<span class="hljs-string">"field"</span>, [<span class="hljs-string">'test1'</span>, <span class="hljs-string">'test2'</span>]);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1541px;">     <h3 id="notinnumber" device-type="phone,2in1,tablet,wearable,tv">notInNumber<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="notinnumber" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>notInNumber(field: string, valueList: number[]): Query</p>     <p>构造一个Query对象以查询具有指定字段的条目，该字段的值不在指定的值列表中。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用notInNumber时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">valueList</td>         <td class="cellrowborder" width="25%">number[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定的值列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.60.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.60.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.60.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">notInNumber</span>(<span class="hljs-string">"field"</span>, [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1541px;">     <h3 id="notinstring" device-type="phone,2in1,tablet,wearable,tv">notInString<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="notinstring" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>notInString(field: string, valueList: string[]): Query</p>     <p>构造一个Query对象以查询具有指定字段且值不在指定字符串值列表中的条目。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用notInString时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">valueList</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定的字符串值列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.61.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.61.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.61.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">notInString</span>(<span class="hljs-string">"field"</span>, [<span class="hljs-string">'test1'</span>, <span class="hljs-string">'test2'</span>]);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1541px;">     <h3 id="like" device-type="phone,2in1,tablet,wearable,tv">like<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="like" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>like(field: string, value: string): Query</p>     <p>构造一个Query对象以查询具有与指定字符串值相似的指定字段的条目。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用like时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定的字符串值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.62.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.62.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.62.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">like</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1541px;">     <h3 id="unlike" device-type="phone,2in1,tablet,wearable,tv">unlike<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="unlike" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unlike(field: string, value: string): Query</p>     <p>构造一个Query对象以查询具有与指定字符串值不相似的指定字段的条目。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用unlike时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定的字符串值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.63.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.63.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.63.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">unlike</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 914px;">     <h3 id="and" device-type="phone,2in1,tablet,wearable,tv">and<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="and" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>and(): Query</p>     <p>构造一个带有与条件的查询对象。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回查询对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value1"</span>);</li><li>      query.<span class="hljs-title function_">and</span>();</li><li>      query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value2"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 914px;">     <h3 id="or" device-type="phone,2in1,tablet,wearable,tv">or<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="or" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>or(): Query</p>     <p>构造一个带有或条件的Query对象。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回查询对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value1"</span>);</li><li>      query.<span class="hljs-title function_">or</span>();</li><li>      query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value2"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1520px;">     <h3 id="orderbyasc" device-type="phone,2in1,tablet,wearable,tv">orderByAsc<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="orderbyasc" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>orderByAsc(field: string): Query</p>     <p>构造一个Query对象，将查询结果按升序排序。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用orderByAsc时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.66.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.66.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.66.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>      query.<span class="hljs-title function_">orderByAsc</span>(<span class="hljs-string">"field"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1520px;">     <h3 id="orderbydesc" device-type="phone,2in1,tablet,wearable,tv">orderByDesc<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="orderbydesc" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>orderByDesc(field: string): Query</p>     <p>构造一个Query对象，将查询结果按降序排序。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用orderByDesc时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.67.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.67.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.67.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>      query.<span class="hljs-title function_">orderByDesc</span>(<span class="hljs-string">"field"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1641px;">     <h3 id="limit" device-type="phone,2in1,tablet,wearable,tv">limit<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="limit" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>limit(total: number, offset: number): Query</p>     <p>构造一个Query对象来指定结果的数量和开始位置。该接口必须要在Query对象查询和升降序等操作之后调用，调用limit接口后，不可再对Query对象进行查询和升降序等操作。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.68.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">total</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>表示最大数据记录数，取值应为非负整数。</p>          <p>当total为负数时，表示查询整个结果集。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">offset</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>指定查询结果的起始位置，取值应为非负整数。</p>          <p>当offset为负数时，表示查询整个结果集。</p>          <p>当offset超出结果集最后位置时，查询结果为空。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.68.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.68.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.68.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> total = <span class="hljs-number">10</span>;</li><li><span class="hljs-keyword">let</span> offset = <span class="hljs-number">1</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>  <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>    query.<span class="hljs-title function_">notEqualTo</span>(<span class="hljs-string">"field"</span>, <span class="hljs-string">"value"</span>);</li><li>    query.<span class="hljs-title function_">limit</span>(total, offset);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>  }</li><li>  query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1496px;">     <h3 id="isnotnull" device-type="phone,2in1,tablet,wearable,tv">isNotNull<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isnotnull" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isNotNull(field: string): Query</p>     <p>构造一个Query对象以查询具有值不为null的指定字段的条目。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>使用isNotNull时需要结合<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#schema">Schema</a>使用。</p>       <p>使用Schema创建数据库请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-kv-store#开发步骤" target="_blank">通过键值型数据库实现数据持久化</a>中使用getKVStore()方法创建并获取键值数据库示例。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">field</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定字段，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.69.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.69.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.69.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>  <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>    query.<span class="hljs-title function_">isNotNull</span>(<span class="hljs-string">"field"</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>  }</li><li>  query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 914px;">     <h3 id="begingroup" device-type="phone,2in1,tablet,wearable,tv">beginGroup<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="begingroup" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>beginGroup(): Query</p>     <p>创建一个带有左括号的查询条件组。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.70.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">beginGroup</span>();</li><li>      query.<span class="hljs-title function_">isNotNull</span>(<span class="hljs-string">"field"</span>);</li><li>      query.<span class="hljs-title function_">endGroup</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 914px;">     <h3 id="endgroup" device-type="phone,2in1,tablet,wearable,tv">endGroup<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="endgroup" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>endGroup(): Query</p>     <p>创建一个带有右括号的查询条件组。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.71.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">beginGroup</span>();</li><li>      query.<span class="hljs-title function_">isNotNull</span>(<span class="hljs-string">"field"</span>);</li><li>      query.<span class="hljs-title function_">endGroup</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"query is "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"duplicated calls should be ok :"</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1404px;">     <h3 id="prefixkey" device-type="phone,2in1,tablet,wearable,tv">prefixKey<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="prefixkey" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>prefixKey(prefix: string): Query</p>     <p>创建具有指定键前缀的查询条件。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">prefix</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示指定的键前缀，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.72.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.72.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.72.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"$.name"</span>);</li><li>      query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"0"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1404px;">     <h3 id="setsuggestindex" device-type="phone,2in1,tablet,wearable,tv">setSuggestIndex<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsuggestindex" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSuggestIndex(index: string): Query</p>     <p>设置一个指定的索引，将优先用于查询。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.73.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">index</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指示要设置的索引，不能包含'^'。包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.73.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.73.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.73.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">setSuggestIndex</span>(<span class="hljs-string">"$.name"</span>);</li><li>      query.<span class="hljs-title function_">setSuggestIndex</span>(<span class="hljs-string">"0"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>    query = <span class="hljs-literal">null</span>;</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1424px;">     <h3 id="deviceid" device-type="phone,2in1,tablet,wearable,tv">deviceId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deviceid" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deviceId(deviceId:string):Query</p>     <p>添加设备ID作为Key的前缀。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.74.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指示查询的设备ID，不能为空。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.74.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="50%">返回Query对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.74.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.74.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      query.<span class="hljs-title function_">deviceId</span>(<span class="hljs-string">"deviceId"</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query is <span class="hljs-subst">${query.getSqlLike()}</span>`</span>);</li><li>    }</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`duplicated calls should be ok.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 842px;">     <h3 id="getsqllike" device-type="phone,2in1,tablet,wearable,tv">getSqlLike<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsqllike" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSqlLike():string</p>     <p>获取Query对象的查询语句。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.75.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.75.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回一个字段列中包含对应子串的结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">query</span>: distributedKVStore.<span class="hljs-property">Query</span> | <span class="hljs-literal">null</span> = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    <span class="hljs-keyword">if</span> (query != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">let</span> sql1 = query.<span class="hljs-title function_">getSqlLike</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`GetSqlLike sql= <span class="hljs-subst">${sql1}</span>`</span>);</li><li>    }</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"duplicated calls should be ok : "</span> + e);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="singlekvstore" device-type="phone,2in1,tablet,wearable,tv">SingleKVStore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="singlekvstore" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>SingleKVStore数据库实例，提供增加数据、删除数据和订阅数据变更、订阅数据端端同步完成的方法。</p>     <p>在调用SingleKVStore的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#getkvstore">getKVStore</a>构建一个SingleKVStore实例。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1780px;">     <h3 id="put" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">put<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="put" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>put(key: string, value: Uint8Array | string | number | boolean, callback: AsyncCallback&lt;void&gt;): void</p>     <p>添加指定类型键值对到数据库，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.77.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要添加数据的Key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">Uint8Array | string | number | boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要添加数据的value，支持Uint8Array、number 、 string 、boolean，Uint8Array、string 的长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_VALUE_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。数据添加成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.77.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.77.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.77.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.77.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in putting"</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1826px;">     <h3 id="put-1" device-type="phone,2in1,tablet,wearable,tv">put<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="put-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>put(key: string, value: Uint8Array | string | number | boolean): Promise&lt;void&gt;</p>     <p>添加指定类型键值对到数据库，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.78.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.78.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.78.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.78.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要添加数据的Key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">Uint8Array | string | number | boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要添加数据的value，支持Uint8Array、number 、 string 、boolean，Uint8Array、string 的长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_VALUE_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.78.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.78.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.78.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.78.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.78.13.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.78.13.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in putting data`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2183px;">     <h3 id="putbatch" device-type="phone,2in1,tablet,wearable,tv">putBatch<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="putbatch" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>putBatch(entries: Entry[], callback: AsyncCallback&lt;void&gt;): void</p>     <p>批量插入键值对到SingleKVStore数据库中，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.79.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">entries</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要批量插入的键值对。一个entries对象中允许的最大数据量为512M。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。数据批量插入成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.79.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.79.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.79.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.79.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: <span class="hljs-subst">${entries}</span>`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put Batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting Batch'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'batch_test_string_key'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting Entries'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries.length: <span class="hljs-subst">${entries.length}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries[0]: <span class="hljs-subst">${entries[<span class="hljs-number">0</span>]}</span>`</span>);</li><li>      });</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'KvStore is null'</span>); <span class="hljs-comment">//后续示例代码与此处保持一致</span></li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span> `</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2117px;">     <h3 id="putbatch-1" device-type="phone,2in1,tablet,wearable,tv">putBatch<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="putbatch-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>putBatch(entries: Entry[]): Promise&lt;void&gt;</p>     <p>批量插入键值对到SingleKVStore数据库中，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.80.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">entries</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要批量插入的键值对。一个entries对象中允许的最大数据量为512M。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.80.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.80.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.80.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.80.13.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.80.13.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: <span class="hljs-subst">${entries}</span>`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting Batch'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting Entries'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`PutBatch <span class="hljs-subst">${entries}</span>`</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put Batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span> `</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1847px;">     <h3 id="delete" device-type="phone,2in1,tablet,wearable,tv">delete<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delete" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(key: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>从数据库中删除指定键值的数据，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.81.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要删除数据的Key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。删除指定的数据成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.81.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.81.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.81.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.81.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">delete</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in deleting'</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1829px;">     <h3 id="delete-1" device-type="phone,2in1,tablet,wearable,tv">delete<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delete-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(key: string): Promise&lt;void&gt;</p>     <p>从数据库中删除指定键值的数据，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.82.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要删除数据的Key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.82.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.82.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.82.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.82.13.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.82.13.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in putting data`</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">delete</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in deleting'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2159px;">     <h3 id="deletebatch" device-type="phone,2in1,tablet,wearable,tv">deleteBatch<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletebatch" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteBatch(keys: string[], callback: AsyncCallback&lt;void&gt;): void</p>     <p>批量删除SingleKVStore数据库中的键值对，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.83.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keys</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要批量删除的键值对，不能为空。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。批量删除指定的数据成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.83.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.83.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.83.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.83.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">keys</span>: <span class="hljs-built_in">string</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>    keys.<span class="hljs-title function_">push</span>(key + i);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: <span class="hljs-subst">${entries}</span>`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put Batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting Batch'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">deleteBatch</span>(keys, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete Batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in deleting Batch'</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2117px;">     <h3 id="deletebatch-1" device-type="phone,2in1,tablet,wearable,tv">deleteBatch<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletebatch-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteBatch(keys: string[]): Promise&lt;void&gt;</p>     <p>批量删除SingleKVStore数据库中的键值对，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.84.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keys</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要批量删除的键值对，不能为空。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.84.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.84.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.84.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.84.13.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.84.13.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">keys</span>: <span class="hljs-built_in">string</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>    keys.<span class="hljs-title function_">push</span>(key + i);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: <span class="hljs-subst">${entries}</span>`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting Batch'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">deleteBatch</span>(keys).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in deleting Batch'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete Batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put Batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1785px;">     <h3 id="removedevicedata" device-type="phone,2in1,tablet,wearable,tv">removeDeviceData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removedevicedata" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeDeviceData(deviceId: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>删除指定设备的数据，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicebasicinfo">DeviceBasicInfo</a>中的networkId，通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a></p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.85.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要删除设备的networkId。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。删除指定设备的数据成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.85.10.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.85.10.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string_2'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-string-002'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting data'</span>);</li><li>    <span class="hljs-keyword">const</span> deviceid = <span class="hljs-string">'no_exist_device_id'</span>;</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">removeDeviceData</span>(deviceid, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>        <span class="hljs-keyword">if</span> (err == <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'succeeded in removing device data'</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove device data.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span> `</span>);</li><li>          <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">data</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-title class_">Uint8Array</span>) =&gt; {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting data'</span>);</li><li>            });</li><li>          }</li><li>        }</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>)</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1791px;">     <h3 id="removedevicedata-1" device-type="phone,2in1,tablet,wearable,tv">removeDeviceData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removedevicedata-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeDeviceData(deviceId: string): Promise&lt;void&gt;</p>     <p>删除指定设备的数据，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicebasicinfo">DeviceBasicInfo</a>中的networkId，通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a></p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.86.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要删除设备的networkId。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.86.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.86.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.86.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string_2'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-string-001'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting data'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put data.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span> `</span>);</li><li>  });</li><li>  <span class="hljs-keyword">const</span> deviceid = <span class="hljs-string">'no_exist_device_id'</span>;</li><li>  kvStore.<span class="hljs-title function_">removeDeviceData</span>(deviceid).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'succeeded in removing device data'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove device data.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span> `</span>);</li><li>  });</li><li>  kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">boolean</span> | <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting data'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get data.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span> `</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>)</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1755px;">     <h3 id="get" device-type="phone,2in1,tablet,wearable,tv">get<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(key: string, callback: AsyncCallback&lt;boolean | string | number | Uint8Array&gt;): void</p>     <p>获取指定键的值，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.87.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要查询数据的Key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean | string | number | Uint8Array&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回获取查询的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.87.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.87.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100004</td>         <td class="cellrowborder" width="50%">Not found.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in putting"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">boolean</span> | <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting data.data=<span class="hljs-subst">${data}</span>`</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1737px;">     <h3 id="get-1" device-type="phone,2in1,tablet,wearable,tv">get<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(key: string): Promise&lt;boolean | string | number | Uint8Array&gt;</p>     <p>获取指定键的值，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.88.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要查询数据的Key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.88.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean | string | number | Uint8Array&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回获取查询的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.88.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.88.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100004</td>         <td class="cellrowborder" width="50%">Not found.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in putting data`</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">boolean</span> | <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting data.data=<span class="hljs-subst">${data}</span>`</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1988px;">     <h3 id="getentries" device-type="phone,2in1,tablet,wearable,tv">getEntries<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(keyPrefix: string, callback: AsyncCallback&lt;Entry[]&gt;): void</p>     <p>获取匹配指定键前缀的所有键值对，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.89.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keyPrefix</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。不能包含'^'，包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回匹配指定前缀的键值对列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.89.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.89.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: <span class="hljs-subst">${entries}</span>`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put Batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting Batch'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'batch_test_string_key'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting Entries'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries.length: <span class="hljs-subst">${entries.length}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries[0]: <span class="hljs-subst">${entries[<span class="hljs-number">0</span>]}</span>`</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span> `</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1994px;">     <h3 id="getentries-1" device-type="phone,2in1,tablet,wearable,tv">getEntries<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(keyPrefix: string): Promise&lt;Entry[]&gt;</p>     <p>获取匹配指定键前缀的所有键值对，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.90.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keyPrefix</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。不能包含'^'，包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.90.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回匹配指定前缀的键值对列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.90.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.90.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: <span class="hljs-subst">${entries}</span>`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting Batch'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting Entries'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`PutBatch <span class="hljs-subst">${entries}</span>`</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put Batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span> `</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1892px;">     <h3 id="getentries-2" device-type="phone,2in1,tablet,wearable,tv">getEntries<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(query: Query, callback: AsyncCallback&lt;Entry[]&gt;): void</p>     <p>获取与指定Query对象匹配的键值对列表，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.91.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回与指定Query对象匹配的键值对列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.91.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.91.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">21</span>, <span class="hljs-number">31</span>]);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_bool_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">BYTE_ARRAY</span>,</li><li>        <span class="hljs-attr">value</span>: arr</li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: {entries}`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting Batch'</span>);</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(query, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting Entries'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries.length: <span class="hljs-subst">${entries.length}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries[0]: <span class="hljs-subst">${entries[<span class="hljs-number">0</span>]}</span>`</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1970px;">     <h3 id="getentries-3" device-type="phone,2in1,tablet,wearable,tv">getEntries<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries-3" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(query: Query): Promise&lt;Entry[]&gt;</p>     <p>获取与指定Query对象匹配的键值对列表，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.92.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.92.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回与指定Query对象匹配的键值对列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.92.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.92.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">21</span>, <span class="hljs-number">31</span>]);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_bool_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">BYTE_ARRAY</span>,</li><li>        <span class="hljs-attr">value</span>: arr</li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: {entries}`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting Batch'</span>);</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting Entries'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>)</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting Entries'</span>);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2235px;">     <h3 id="getresultset" device-type="phone,2in1,tablet,wearable,tv">getResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(keyPrefix: string, callback: AsyncCallback&lt;KVStoreResultSet&gt;): void</p>     <p>从SingleKVStore数据库中获取具有指定前缀的结果集，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.93.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keyPrefix</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。不能包含'^'，包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回具有指定前缀的结果集。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.93.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.93.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100001</td>         <td class="cellrowborder" width="50%">Over max limits.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">result</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>) =&gt; {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting result set'</span>);</li><li>        resultSet = result;</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>          kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet, <span class="hljs-function">(<span class="hljs-params">err :BusinessError</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>              <span class="hljs-keyword">return</span>;</li><li>            }</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing result set'</span>);</li><li>          });</li><li>        }</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2145px;">     <h3 id="getresultset-1" device-type="phone,2in1,tablet,wearable,tv">getResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(keyPrefix: string): Promise&lt;KVStoreResultSet&gt;</p>     <p>从SingleKVStore数据库中获取具有指定前缀的结果集，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.94.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keyPrefix</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。不能包含'^'，包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.94.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回具有指定前缀的结果集。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.94.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.94.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100001</td>         <td class="cellrowborder" width="50%">Over max limits.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting result set'</span>);</li><li>    resultSet = result;</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing result set'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1995px;">     <h3 id="getresultset-2" device-type="phone,2in1,tablet,wearable,tv">getResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(query: Query, callback: AsyncCallback&lt;KVStoreResultSet&gt;): void</p>     <p>获取与指定Query对象匹配的KVStoreResultSet对象，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.95.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.95.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.95.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.95.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%">Query</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，获取与指定Query对象匹配的KVStoreResultSet对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.95.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.95.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100001</td>         <td class="cellrowborder" width="50%">Over max limits.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getResultSet</span>(query, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">result</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>) =&gt; {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting result set'</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1977px;">     <h3 id="getresultset-3" device-type="phone,2in1,tablet,wearable,tv">getResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset-3" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(query: Query): Promise&lt;KVStoreResultSet&gt;</p>     <p>获取与指定Query对象匹配的KVStoreResultSet对象，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.96.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.96.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.96.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.96.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.96.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.96.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。获取与指定Query对象匹配的KVStoreResultSet对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.96.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.96.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100001</td>         <td class="cellrowborder" width="50%">Over max limits.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>  query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting result set'</span>);</li><li>    resultSet = result;</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1566px;">     <h3 id="closeresultset" device-type="phone,2in1,tablet,wearable,tv">closeResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="closeresultset" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>closeResultSet(resultSet: KVStoreResultSet, callback: AsyncCallback&lt;void&gt;): void</p>     <p>关闭由<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#getresultset-1">SingleKvStore.getResultSet</a>返回的KVStoreResultSet对象，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.97.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.97.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.97.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.97.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">resultSet</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要关闭的KVStoreResultSet对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。关闭KVStoreResultSet对象成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.97.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.97.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">result</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting result set'</span>);</li><li>    resultSet = result;</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing result set'</span>);</li><li>      })</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1548px;">     <h3 id="closeresultset-1" device-type="phone,2in1,tablet,wearable,tv">closeResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="closeresultset-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>closeResultSet(resultSet: KVStoreResultSet): Promise&lt;void&gt;</p>     <p>关闭由<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#getresultset-1">SingleKvStore.getResultSet</a>返回的KVStoreResultSet对象，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.98.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.98.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.98.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.98.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">resultSet</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要关闭的KVStoreResultSet对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.98.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.98.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.98.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.98.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting result set'</span>);</li><li>    resultSet = result;</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing result set'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>
</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1796px;">     <h3 id="getresultsize" device-type="phone,2in1,tablet,wearable,tv">getResultSize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultsize" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSize(query: Query, callback: AsyncCallback&lt;number&gt;): void</p>     <p>获取与指定Query对象匹配的结果数，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.99.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回与指定Query对象匹配的结果数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.99.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.99.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getResultSize</span>(query, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, resultSize: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get result size.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting result set size'</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1850px;">     <h3 id="getresultsize-1" device-type="phone,2in1,tablet,wearable,tv">getResultSize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultsize-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSize(query: Query): Promise&lt;number&gt;</p>     <p>获取与指定Query对象匹配的结果数，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.100.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.100.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。获取与指定Query对象匹配的结果数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.100.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.100.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>  query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>  kvStore.<span class="hljs-title function_">getResultSize</span>(query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">resultSize: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting result set size'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get result size.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1405px;">     <h3 id="backup" device-type="phone,2in1,tablet,wearable,tv">backup<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backup" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>backup(file:string, callback: AsyncCallback&lt;void&gt;):void</p>     <p>以指定名称备份数据库，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.101.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.101.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.101.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.101.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">file</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">备份数据库的指定名称，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当以指定名称备份数据库成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.101.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.101.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> backupFile = <span class="hljs-string">"BK001"</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">backup</span>(backupFile, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to backup.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span> `</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in backupping data`</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1411px;">     <h3 id="backup-1" device-type="phone,2in1,tablet,wearable,tv">backup<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backup-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>backup(file:string): Promise&lt;void&gt;</p>     <p>以指定名称备份数据库，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.102.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.102.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.102.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.102.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">file</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">备份数据库的指定名称，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.102.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.102.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.102.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.102.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> backupFile = <span class="hljs-string">"BK001"</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">backup</span>(backupFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in backupping data`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to backup.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1405px;">     <h3 id="restore" device-type="phone,2in1,tablet,wearable,tv">restore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="restore" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>restore(file:string, callback: AsyncCallback&lt;void&gt;):void</p>     <p>从指定的数据库文件恢复数据库，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.103.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.103.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.103.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.103.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">file</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的数据库文件名称，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当从指定的数据库文件恢复数据库成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.103.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.103.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> backupFile = <span class="hljs-string">"BK001"</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">restore</span>(backupFile, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to restore.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in restoring data`</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1411px;">     <h3 id="restore-1" device-type="phone,2in1,tablet,wearable,tv">restore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="restore-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>restore(file:string): Promise&lt;void&gt;</p>     <p>从指定的数据库文件恢复数据库，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.104.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">file</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的数据库文件名称，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.104.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.104.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.104.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> backupFile = <span class="hljs-string">"BK001"</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">restore</span>(backupFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in restoring data`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to restore.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1302px;">     <h3 id="deletebackup" device-type="phone,2in1,tablet,wearable,tv">deleteBackup<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletebackup" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteBackup(files:Array&lt;string&gt;, callback: AsyncCallback&lt;Array&lt;[string, number]&gt;&gt;):void</p>     <p>根据指定名称删除备份文件，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.105.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.105.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.105.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.105.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">files</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">删除备份文件所指定的名称，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;[string, number]&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回删除备份的文件名及其处理结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.105.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.105.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> files = [<span class="hljs-string">"BK001"</span>, <span class="hljs-string">"BK002"</span>];</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">deleteBackup</span>(files, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>][]</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete Backup.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeed in deleting Backup.data=<span class="hljs-subst">${data}</span>`</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1356px;">     <h3 id="deletebackup-1" device-type="phone,2in1,tablet,wearable,tv">deleteBackup<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletebackup-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteBackup(files:Array&lt;string&gt;): Promise&lt;Array&lt;[string, number]&gt;&gt;</p>     <p>根据指定名称删除备份文件，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">files</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">删除备份文件所指定的名称，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.106.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.106.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;[string, number]&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回删除备份的文件名及其处理结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.106.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.106.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> files = [<span class="hljs-string">"BK001"</span>, <span class="hljs-string">"BK002"</span>];</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">deleteBackup</span>(files).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>][]</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeed in deleting Backup.data=<span class="hljs-subst">${data}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete Backup.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2100px;">     <h3 id="starttransaction" device-type="phone,2in1,tablet,wearable,tv">startTransaction<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="starttransaction" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startTransaction(callback: AsyncCallback&lt;void&gt;): void</p>     <p>启动SingleKVStore数据库中的事务，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.107.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.107.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.107.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.107.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。启动SingleKVStore数据库中的事务成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.107.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.107.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.107.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.107.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">putBatchString</span>(<span class="hljs-params">len: <span class="hljs-built_in">number</span>, prefix: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: prefix + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-keyword">return</span> entries;</li><li>} <span class="hljs-comment">//自定义函数，放置在作用域最外侧，防止语法检查报错</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;</li><li>  kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, <span class="hljs-number">0</span>, <span class="hljs-function">(<span class="hljs-params">data: distributedKVStore.ChangeNotification</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`startTransaction 0 <span class="hljs-subst">${data}</span>`</span>);</li><li>    count++;</li><li>  });</li><li>  kvStore.<span class="hljs-title function_">startTransaction</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to start Transaction.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in starting Transaction'</span>);</li><li>    <span class="hljs-keyword">let</span> entries = <span class="hljs-title function_">putBatchString</span>(<span class="hljs-number">10</span>, <span class="hljs-string">'batch_test_string_key'</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: <span class="hljs-subst">${entries}</span>`</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting Batch'</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to start Transaction.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1376px;">     <h3 id="starttransaction-1" device-type="phone,2in1,tablet,wearable,tv">startTransaction<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="starttransaction-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startTransaction(): Promise&lt;void&gt;</p>     <p>启动SingleKVStore数据库中的事务，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.108.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.108.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.108.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.108.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-data-rdb">关系型数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.108.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.108.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">14800047</td>         <td class="cellrowborder" width="50%">The WAL file size exceeds the default limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;</li><li>  kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, distributedKVStore.<span class="hljs-property">SubscribeType</span>.<span class="hljs-property">SUBSCRIBE_TYPE_ALL</span>, <span class="hljs-function">(<span class="hljs-params">data: distributedKVStore.ChangeNotification</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`startTransaction 0 <span class="hljs-subst">${data}</span>`</span>);</li><li>    count++;</li><li>  });</li><li>  kvStore.<span class="hljs-title function_">startTransaction</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in starting Transaction'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to start Transaction.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to start Transaction.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1185px;">     <h3 id="commit" device-type="phone,2in1,tablet,wearable,tv">commit<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="commit" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>commit(callback: AsyncCallback&lt;void&gt;): void</p>     <p>提交SingleKVStore数据库中的事务，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。提交SingleKVStore数据库中的事务成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.109.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.109.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">commit</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err == <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in committing'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to commit.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1085px;">     <h3 id="commit-1" device-type="phone,2in1,tablet,wearable,tv">commit<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="commit-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>commit(): Promise&lt;void&gt;</p>     <p>提交SingleKVStore数据库中的事务，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.110.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.110.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.110.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.110.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">commit</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in committing'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to commit.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1185px;">     <h3 id="rollback" device-type="phone,2in1,tablet,wearable,tv">rollback<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="rollback" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>rollback(callback: AsyncCallback&lt;void&gt;): void</p>     <p>在SingleKVStore数据库中回滚事务，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.111.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。SingleKVStore数据库中回滚事务成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.111.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.111.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">rollback</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err == <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in rolling back'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to rollback.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1085px;">     <h3 id="rollback-1" device-type="phone,2in1,tablet,wearable,tv">rollback<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="rollback-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>rollback(): Promise&lt;void&gt;</p>     <p>在SingleKVStore数据库中回滚事务，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.112.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.112.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.112.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.112.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">rollback</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in rolling back'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to rollback.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1278px;">     <h3 id="enablesync" device-type="phone,2in1,tablet,wearable,tv">enableSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enablesync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>enableSync(enabled: boolean, callback: AsyncCallback&lt;void&gt;): void</p>     <p>设定是否开启端端同步，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.113.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enabled</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设定是否开启端端同步，true表示开启端端同步，false表示不启用端端同步。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。设定成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.113.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.113.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">enableSync</span>(<span class="hljs-literal">true</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err == <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in enabling sync'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to enable sync.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1332px;">     <h3 id="enablesync-1" device-type="phone,2in1,tablet,wearable,tv">enableSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enablesync-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>enableSync(enabled: boolean): Promise&lt;void&gt;</p>     <p>设定是否开启端端同步，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.114.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.114.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.114.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.114.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enabled</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设定是否开启端端同步，true表示开启端端同步，false表示不启用端端同步。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.114.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.114.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.114.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.114.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">enableSync</span>(<span class="hljs-literal">true</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in enabling sync'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to enable sync.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1371px;">     <h3 id="setsyncrange" device-type="phone,2in1,tablet,wearable,tv">setSyncRange<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsyncrange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSyncRange(localLabels: string[], remoteSupportLabels: string[], callback: AsyncCallback&lt;void&gt;): void</p>     <p>设置同步范围标签，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.115.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">localLabels</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示本地设备的同步标签。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">remoteSupportLabels</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要同步数据的设备的同步标签。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。设置成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.115.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.115.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> localLabels = [<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>];</li><li>  <span class="hljs-keyword">const</span> remoteSupportLabels = [<span class="hljs-string">'C'</span>, <span class="hljs-string">'D'</span>];</li><li>  kvStore.<span class="hljs-title function_">setSyncRange</span>(localLabels, remoteSupportLabels, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set syncRange.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setting syncRange'</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1401px;">     <h3 id="setsyncrange-1" device-type="phone,2in1,tablet,wearable,tv">setSyncRange<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsyncrange-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSyncRange(localLabels: string[], remoteSupportLabels: string[]): Promise&lt;void&gt;</p>     <p>设置同步范围标签，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.116.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">localLabels</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示本地设备的同步标签。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">remoteSupportLabels</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要同步数据的设备的同步标签。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.116.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.116.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.116.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> localLabels = [<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>];</li><li>  <span class="hljs-keyword">const</span> remoteSupportLabels = [<span class="hljs-string">'C'</span>, <span class="hljs-string">'D'</span>];</li><li>  kvStore.<span class="hljs-title function_">setSyncRange</span>(localLabels, remoteSupportLabels).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setting syncRange'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set syncRange.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1418px;">     <h3 id="setsyncparam" device-type="phone,2in1,tablet,wearable,tv">setSyncParam<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsyncparam" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSyncParam(defaultAllowedDelayMs: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>设置数据库端端同步允许的默认延时，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>设置默认延时后，调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync</a>接口不会立即触发端端同步，而是等待指定的延时时间后再执行。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.117.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.117.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.117.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.117.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">defaultAllowedDelayMs</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示一个延时时间，单位为毫秒（ms），取值范围为0或[100, 86400000]。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。设置成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.117.10.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.117.10.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> defaultAllowedDelayMs = <span class="hljs-number">500</span>;</li><li>  kvStore.<span class="hljs-title function_">setSyncParam</span>(defaultAllowedDelayMs, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set syncParam.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setting syncParam'</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1448px;">     <h3 id="setsyncparam-1" device-type="phone,2in1,tablet,wearable,tv">setSyncParam<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsyncparam-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSyncParam(defaultAllowedDelayMs: number): Promise&lt;void&gt;</p>     <p>设置数据库端端同步允许的默认延时，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>设置默认延时后，调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync</a>接口不会立即触发端端同步，而是等待指定的延时时间后再执行。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.118.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.118.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.118.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.118.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">defaultAllowedDelayMs</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示一个延时时间，单位为毫秒（ms），取值范围为0或[100, 86400000]。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.118.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.118.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.118.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.118.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> defaultAllowedDelayMs = <span class="hljs-number">500</span>;</li><li>  kvStore.<span class="hljs-title function_">setSyncParam</span>(defaultAllowedDelayMs).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setting syncParam'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set syncParam.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2533px;">     <h3 id="sync" device-type="phone,2in1,tablet,wearable,tv">sync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>sync(deviceIds: string[], mode: SyncMode, delayMs?: number): void</p>     <p>在手动同步方式下，触发数据库端端同步。关于键值型数据库的端端同步方式说明，请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-sync-of-kv-store" target="_blank">键值型数据库跨设备数据同步</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceIds为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicebasicinfo">DeviceBasicInfo</a>中的networkId, 通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>      </div></div></div>     <p><strong>需要权限</strong>： ohos.permission.DISTRIBUTED_DATASYNC。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.119.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.119.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.119.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.119.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceIds</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">同一组网环境下，需要同步的设备的networkId列表。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">mode</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#syncmode">SyncMode</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">同步模式。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">delayMs</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">可选参数，允许延时时间，单位：ms（毫秒），默认为0。设置delayMs后，调用sync接口时延时时间为delayMs。未设置时以<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#setsyncparam">setSyncParam</a>设置的时长为准。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.119.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.119.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100004</td>         <td class="cellrowborder" width="50%">Not found.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">devManager</span>: distributedDeviceManager.<span class="hljs-property">DeviceManager</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_SYNC_ELEMENT</span> = <span class="hljs-string">'key_test_sync'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_SYNC_ELEMENT</span> = <span class="hljs-string">'value-string-001'</span>;</li><li><span class="hljs-comment">// create deviceManager</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>;</li><li>    <span class="hljs-keyword">try</span> {</li><li>      devManager = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(context.<span class="hljs-property">applicationInfo</span>.<span class="hljs-property">name</span>);</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceIds</span>: <span class="hljs-built_in">string</span>[] = [];</li><li>      <span class="hljs-keyword">if</span> (devManager != <span class="hljs-literal">null</span>) {</li><li>        <span class="hljs-keyword">let</span> devices = devManager.<span class="hljs-title function_">getAvailableDeviceListSync</span>();</li><li>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; devices.<span class="hljs-property">length</span>; i++) {</li><li>          deviceIds[i] = devices[i].<span class="hljs-property">networkId</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;</li><li>        }</li><li>      }</li><li>      <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>          kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-function">(<span class="hljs-params">data: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>][]</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Sync dataChange'</span>);</li><li>          });</li><li>          <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_SYNC_ELEMENT</span> + <span class="hljs-string">'testSync101'</span>, <span class="hljs-variable constant_">VALUE_TEST_SYNC_ELEMENT</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to sync.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>                <span class="hljs-keyword">return</span>;</li><li>              }</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting data'</span>);</li><li>              <span class="hljs-keyword">const</span> mode = distributedKVStore.<span class="hljs-property">SyncMode</span>.<span class="hljs-property">PULL_ONLY</span>;</li><li>              <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>                kvStore.<span class="hljs-title function_">sync</span>(deviceIds, mode, <span class="hljs-number">1000</span>);</li><li>              }</li><li>            });</li><li>          }</li><li>        }</li><li>      } <span class="hljs-keyword">catch</span> (e) {</li><li>        <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to sync.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      }</li><li>
</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"createDeviceManager errCode:"</span> + error.<span class="hljs-property">code</span> + <span class="hljs-string">",errMessage:"</span> + error.<span class="hljs-property">message</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2674px;">     <h3 id="sync-1" device-type="phone,2in1,tablet,wearable,tv">sync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sync-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>sync(deviceIds: string[], query: Query, mode: SyncMode, delayMs?: number): void</p>     <p>在手动同步方式下，触发数据库端端同步，此方法为同步方法。关于键值型数据库的端端同步方式说明，请见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-sync-of-kv-store" target="_blank">键值型数据库跨设备数据同步</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceIds为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicebasicinfo">DeviceBasicInfo</a>中的networkId, 通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>      </div></div></div>     <p><strong>需要权限</strong>： ohos.permission.DISTRIBUTED_DATASYNC。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.120.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.120.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.120.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.120.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceIds</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">同一组网环境下，需要同步的设备的networkId列表。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示数据库的查询谓词条件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">mode</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#syncmode">SyncMode</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">同步模式。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">delayMs</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">可选参数，允许延时时间，单位：ms（毫秒），默认为0。设置delayMs后，调用sync接口时延时时间为delayMs。未设置时以<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#setsyncparam">setSyncParam</a>设置的时长为准。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.120.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.120.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100004</td>         <td class="cellrowborder" width="50%">Not found.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_SYNC_ELEMENT</span> = <span class="hljs-string">'key_test_sync'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_SYNC_ELEMENT</span> = <span class="hljs-string">'value-string-001'</span>;</li><li><span class="hljs-comment">// create deviceManager</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>;</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> devManager = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(context.<span class="hljs-property">applicationInfo</span>.<span class="hljs-property">name</span>);</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceIds</span>: <span class="hljs-built_in">string</span>[] = [];</li><li>      <span class="hljs-keyword">if</span> (devManager != <span class="hljs-literal">null</span>) {</li><li>        <span class="hljs-keyword">let</span> devices = devManager.<span class="hljs-title function_">getAvailableDeviceListSync</span>();</li><li>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; devices.<span class="hljs-property">length</span>; i++) {</li><li>          deviceIds[i] = devices[i].<span class="hljs-property">networkId</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;</li><li>        }</li><li>      }</li><li>      <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>          kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-function">(<span class="hljs-params">data: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>][]</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Sync dataChange'</span>);</li><li>          });</li><li>          <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>            kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_SYNC_ELEMENT</span> + <span class="hljs-string">'testSync101'</span>, <span class="hljs-variable constant_">VALUE_TEST_SYNC_ELEMENT</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to sync.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>                <span class="hljs-keyword">return</span>;</li><li>              }</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting data'</span>);</li><li>              <span class="hljs-keyword">const</span> mode = distributedKVStore.<span class="hljs-property">SyncMode</span>.<span class="hljs-property">PULL_ONLY</span>;</li><li>              <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>              query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>              query.<span class="hljs-title function_">deviceId</span>(devManager.<span class="hljs-title function_">getLocalDeviceNetworkId</span>());</li><li>              <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>                kvStore.<span class="hljs-title function_">sync</span>(deviceIds, query, mode, <span class="hljs-number">1000</span>);</li><li>              }</li><li>            });</li><li>          }</li><li>        }</li><li>      } <span class="hljs-keyword">catch</span> (e) {</li><li>        <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to sync.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      }</li><li>
</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"createDeviceManager errCode:"</span> + error.<span class="hljs-property">code</span> + <span class="hljs-string">",errMessage:"</span> + error.<span class="hljs-property">message</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1337px;">     <h3 id="ondatachange" device-type="phone,2in1,tablet,wearable,tv">on('dataChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondatachange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'dataChange', type: SubscribeType, listener: Callback&lt;ChangeNotification&gt;): void</p>     <p>订阅指定类型的数据变更通知。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.121.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.121.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.121.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.121.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">订阅的事件名，固定为'dataChange'，表示数据变更事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#subscribetype">SubscribeType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示订阅的类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">listener</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#changenotification">ChangeNotification</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。成功返回数据变更时通知的对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.121.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.121.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100001</td>         <td class="cellrowborder" width="50%">Over max limits.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, distributedKVStore.<span class="hljs-property">SubscribeType</span>.<span class="hljs-property">SUBSCRIBE_TYPE_LOCAL</span>, <span class="hljs-function">(<span class="hljs-params">data: distributedKVStore.ChangeNotification</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`dataChange callback call data: <span class="hljs-subst">${data}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1374px;">     <h3 id="onsynccomplete" device-type="phone,2in1,tablet,wearable,tv">on('syncComplete')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onsynccomplete" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'syncComplete', syncCallback: Callback&lt;Array&lt;[string, number]&gt;&gt;): void</p>     <p>订阅端端同步完成事件回调通知。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.122.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.122.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.122.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.122.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">订阅的事件名，固定为'syncComplete'，表示同步完成事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">syncCallback</td>         <td class="cellrowborder" width="25%">Callback&lt;Array&lt;[string, number]&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。用于向调用方发送同步结果的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.122.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.122.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_FLOAT_ELEMENT</span> = <span class="hljs-string">'key_test_float'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_FLOAT_ELEMENT</span> = <span class="hljs-number">321.12</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-function">(<span class="hljs-params">data: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>][]</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`syncComplete <span class="hljs-subst">${data}</span>`</span>);</li><li>  });</li><li>  kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_FLOAT_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_FLOAT_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'succeeded in putting'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to subscribe syncComplete.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1693px;">     <h3 id="offdatachange" device-type="phone,2in1,tablet,wearable,tv">off('dataChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdatachange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event:'dataChange', listener?: Callback&lt;ChangeNotification&gt;): void</p>     <p>取消订阅数据变更通知。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.123.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.123.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.123.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.123.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消订阅的事件名，固定为'dataChange'，表示数据变更事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">listener</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#changenotification">ChangeNotification</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">取消订阅的函数。如不设置callback，则取消所有已订阅的函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.123.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.123.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">KvstoreModel</span> {</li><li>  <span class="hljs-title function_">call</span>(<span class="hljs-params">data: distributedKVStore.ChangeNotification</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`dataChange : <span class="hljs-subst">${data}</span>`</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">subscribeDataChange</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>        kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, distributedKVStore.<span class="hljs-property">SubscribeType</span>.<span class="hljs-property">SUBSCRIBE_TYPE_REMOTE</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>      }</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to subscribeDataChange.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">unsubscribeDataChange</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>        kvStore.<span class="hljs-title function_">off</span>(<span class="hljs-string">'dataChange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>      }</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unsubscribeDataChange.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1878px;">     <h3 id="offsynccomplete" device-type="phone,2in1,tablet,wearable,tv">off('syncComplete')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offsynccomplete" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'syncComplete', syncCallback?: Callback&lt;Array&lt;[string, number]&gt;&gt;): void</p>     <p>取消订阅端端同步完成事件回调通知。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.124.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.124.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.124.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.124.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消订阅的事件名，固定为'syncComplete'，表示同步完成事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">syncCallback</td>         <td class="cellrowborder" width="25%">Callback&lt;Array&lt;[string, number]&gt;&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">取消订阅的同步完成回调函数。如果该参数不填，则取消所有已订阅的同步完成回调函数。如果存在同一个数据库的多个ArkTS实例(通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#getkvstore">getKVStore</a>接口获取)分别注册监听了同步完成事件，则对于任意一个ArkTS实例取消其所有已订阅的同步完成回调函数时，其余ArkTS实例已订阅的所有同步完成回调函数也会被取消。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.124.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.124.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">KvstoreModel</span> {</li><li>  <span class="hljs-title function_">call</span>(<span class="hljs-params">data: [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>][]</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`syncComplete : <span class="hljs-subst">${data}</span>`</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">subscribeDataChange</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>        kvStore.<span class="hljs-title function_">on</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>      }</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to subscribeDataChange.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">unsubscribeDataChange</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>        kvStore.<span class="hljs-title function_">off</span>(<span class="hljs-string">'syncComplete'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">call</span>);</li><li>      }</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-keyword">let</span> error = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unsubscribeDataChange.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1137px;">     <h3 id="getsecuritylevel" device-type="phone,2in1,tablet,wearable,tv">getSecurityLevel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsecuritylevel" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSecurityLevel(callback: AsyncCallback&lt;SecurityLevel&gt;): void</p>     <p>获取数据库的安全级别，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.125.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.125.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.125.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.125.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#securitylevel">SecurityLevel</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回数据库的安全级别。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.125.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.125.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">getSecurityLevel</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: distributedKVStore.SecurityLevel</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get SecurityLevel.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting securityLevel'</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1085px;">     <h3 id="getsecuritylevel-1" device-type="phone,2in1,tablet,wearable,tv">getSecurityLevel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsecuritylevel-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSecurityLevel(): Promise&lt;SecurityLevel&gt;</p>     <p>获取数据库的安全级别，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.126.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.126.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#securitylevel">SecurityLevel</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回数据库的安全级别。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.126.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.126.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">getSecurityLevel</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: distributedKVStore.SecurityLevel</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting securityLevel'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get SecurityLevel.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 374px;">     <h2 id="devicekvstore" device-type="phone,2in1,tablet,wearable,tv">DeviceKVStore<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="devicekvstore" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>设备协同数据库，继承自SingleKVStore，提供查询数据和端端同步数据的方法，可以使用SingleKVStore的方法例如：put、putBatch等。</p>     <p>设备协同数据库，以设备维度对数据进行区分，每台设备仅能写入和修改本设备的数据，其它设备的数据对其是只读的，无法修改其它设备的数据。</p>     <p>比如，可以使用设备协同数据库实现设备间的图片分享，可以查看其他设备的图片，但无法修改和删除其他设备的图片。</p>     <p>在调用DeviceKVStore的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#getkvstore">getKVStore</a>构建一个DeviceKVStore实例。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1715px;">     <h3 id="get-2" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">get<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(key: string, callback: AsyncCallback&lt;boolean | string | number | Uint8Array&gt;): void</p>     <p>获取本设备指定键的值，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.128.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.128.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.128.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.128.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要查询数据的Key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean | string | number | Uint8Array&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回获取查询的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.128.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.128.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100004</td>         <td class="cellrowborder" width="50%">Not found.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in putting"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">boolean</span> | <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting data.data=<span class="hljs-subst">${data}</span>`</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1713px;">     <h3 id="get-3" device-type="phone,2in1,tablet,wearable,tv">get<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get-3" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(key: string): Promise&lt;boolean | string | number | Uint8Array&gt;</p>     <p>获取本设备指定键的值，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.129.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.129.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.129.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.129.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要查询数据的Key，不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.129.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.129.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean | string | number | Uint8Array&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回获取查询的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.129.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.129.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100004</td>         <td class="cellrowborder" width="50%">Not found.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-test-string'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in putting data`</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">boolean</span> | <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting data.data=<span class="hljs-subst">${data}</span>`</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1868px;">     <h3 id="get-4" device-type="phone,2in1,tablet,wearable,tv">get<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get-4" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(deviceId: string, key: string, callback: AsyncCallback&lt;boolean | string | number | Uint8Array&gt;): void</p>     <p>获取与指定设备ID和Key匹配的string值，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.130.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.130.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.130.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.130.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">标识要查询其数据的设备。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要查询Key值的键, 不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean|string|number|Uint8Array&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回匹配给定条件的字符串值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.130.10.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.130.10.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100004</td>         <td class="cellrowborder" width="50%">Not found.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string_2'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-string-002'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">boolean</span> | <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting'</span>);</li><li>      });</li><li>    }</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1874px;">     <h3 id="get-5" device-type="phone,2in1,tablet,wearable,tv">get<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get-5" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(deviceId: string, key: string): Promise&lt;boolean | string | number | Uint8Array&gt;</p>     <p>获取与指定设备ID和Key匹配的string值，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.131.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.131.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.131.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.131.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">标识要查询其数据的设备。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要查询Key值的键, 不能为空且长度不大于<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#constants">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.131.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.131.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean|string|number|Uint8Array&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回匹配给定条件的字符串值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.131.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.131.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100004</td>         <td class="cellrowborder" width="50%">Not found.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'key_test_string_2'</span>;</li><li><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span> = <span class="hljs-string">'value-string-002'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  kvStore.<span class="hljs-title function_">put</span>(<span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>, <span class="hljs-variable constant_">VALUE_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">get</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-variable constant_">KEY_TEST_STRING_ELEMENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">boolean</span> | <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">Uint8Array</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1988px;">     <h3 id="getentries-4" device-type="phone,2in1,tablet,wearable,tv">getEntries<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries-4" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(keyPrefix: string, callback: AsyncCallback&lt;Entry[]&gt;): void</p>     <p>获取匹配本设备指定键前缀的所有键值对，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.132.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.132.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.132.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.132.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keyPrefix</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。不能包含'^'，包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回匹配指定前缀的键值对列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.132.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.132.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: <span class="hljs-subst">${entries}</span>`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put Batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting Batch'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'batch_test_string_key'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting Entries'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries.length: <span class="hljs-subst">${entries.length}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries[0]: <span class="hljs-subst">${entries[<span class="hljs-number">0</span>]}</span>`</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span> `</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1970px;">     <h3 id="getentries-5" device-type="phone,2in1,tablet,wearable,tv">getEntries<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries-5" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(keyPrefix: string): Promise&lt;Entry[]&gt;</p>     <p>获取匹配本设备指定键前缀的所有键值对，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.133.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.133.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.133.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.133.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keyPrefix</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。不能包含'^'，包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.133.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.133.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回匹配指定前缀的键值对列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.133.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.133.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: <span class="hljs-subst">${entries}</span>`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting Batch'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting Entries'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`PutBatch <span class="hljs-subst">${entries}</span>`</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put Batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span> `</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2149px;">     <h3 id="getentries-6" device-type="phone,2in1,tablet,wearable,tv">getEntries<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries-6" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(deviceId: string, keyPrefix: string, callback: AsyncCallback&lt;Entry[]&gt;): void</p>     <p>获取与指定设备ID和Key前缀匹配的所有键值对，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.134.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.134.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.134.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.134.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">标识要查询其数据的设备。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">keyPrefix</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。不能包含'^'，包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回满足给定条件的所有键值对的列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.134.10.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.134.10.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries : <span class="hljs-subst">${entries}</span>`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-string">'batch_test_string_key'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting entries'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries.length: <span class="hljs-subst">${entries.length}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries[0]: <span class="hljs-subst">${entries[<span class="hljs-number">0</span>]}</span>`</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2203px;">     <h3 id="getentries-7" device-type="phone,2in1,tablet,wearable,tv">getEntries<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries-7" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(deviceId: string, keyPrefix: string): Promise&lt;Entry[]&gt;</p>     <p>获取与指定设备ID和Key前缀匹配的所有键值对，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.135.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.135.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.135.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.135.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">标识要查询其数据的设备。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">keyPrefix</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。不能包含'^'，包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.135.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.135.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回匹配给定条件的所有键值对的列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.135.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.135.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: <span class="hljs-subst">${entries}</span>`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting entries'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries.length: <span class="hljs-subst">${entries.length}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries[0]: <span class="hljs-subst">${entries[<span class="hljs-number">0</span>]}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries[0].value: <span class="hljs-subst">${entries[<span class="hljs-number">0</span>].value}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries[0].value.value: <span class="hljs-subst">${entries[<span class="hljs-number">0</span>].value.value}</span>`</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1916px;">     <h3 id="getentries-8" device-type="phone,2in1,tablet,wearable,tv">getEntries<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries-8" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(query: Query, callback: AsyncCallback&lt;Entry[]&gt;): void</p>     <p>获取本设备与指定Query对象匹配的键值对列表，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.136.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.136.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.136.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.136.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回本设备与指定Query对象匹配的键值对列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.136.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.136.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">21</span>, <span class="hljs-number">31</span>]);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_bool_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">BYTE_ARRAY</span>,</li><li>        <span class="hljs-attr">value</span>: arr</li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: {entries}`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting Batch'</span>);</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(query, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting Entries'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries.length: <span class="hljs-subst">${entries.length}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries[0]: <span class="hljs-subst">${entries[<span class="hljs-number">0</span>]}</span>`</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1994px;">     <h3 id="getentries-9" device-type="phone,2in1,tablet,wearable,tv">getEntries<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries-9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(query: Query): Promise&lt;Entry[]&gt;</p>     <p>获取本设备与指定Query对象匹配的键值对列表，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.137.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.137.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.137.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.137.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.137.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.137.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回本设备与指定Query对象匹配的键值对列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.137.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.137.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">21</span>, <span class="hljs-number">31</span>]);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_bool_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">BYTE_ARRAY</span>,</li><li>        <span class="hljs-attr">value</span>: arr</li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: {entries}`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting Batch'</span>);</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting Entries'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>)</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting Entries'</span>);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Entries.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2221px;">     <h3 id="getentries-10" device-type="phone,2in1,tablet,wearable,tv">getEntries<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries-10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(deviceId: string, query: Query, callback: AsyncCallback&lt;Entry[]&gt;): void</p>     <p>获取与指定设备ID和Query对象匹配的键值对列表，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.138.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.138.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.138.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.138.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">键值对所属的设备ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回与指定设备ID和Query对象匹配的键值对列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.138.10.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.138.10.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">21</span>, <span class="hljs-number">31</span>]);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_bool_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">BYTE_ARRAY</span>,</li><li>        <span class="hljs-attr">value</span>: arr</li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: <span class="hljs-subst">${entries}</span>`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">deviceId</span>(<span class="hljs-string">'localDeviceId'</span>);</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'localDeviceId'</span>, query, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting entries'</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries.length: <span class="hljs-subst">${entries.length}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries[0]: <span class="hljs-subst">${entries[<span class="hljs-number">0</span>]}</span>`</span>);</li><li>      })</li><li>    }</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting entries'</span>);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get entries.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2179px;">     <h3 id="getentries-11" device-type="phone,2in1,tablet,wearable,tv">getEntries<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getentries-11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEntries(deviceId: string, query: Query): Promise&lt;Entry[]&gt;</p>     <p>获取与指定设备ID和Query对象匹配的键值对列表，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.139.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.139.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.139.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.139.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">键值对所属的设备ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.139.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.139.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#entry">Entry</a>[]&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回与指定设备ID和Query对象匹配的键值对列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.139.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.139.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">21</span>, <span class="hljs-number">31</span>]);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_bool_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">BYTE_ARRAY</span>,</li><li>        <span class="hljs-attr">value</span>: arr</li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`entries: <span class="hljs-subst">${entries}</span>`</span>);</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>    <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">deviceId</span>(<span class="hljs-string">'localDeviceId'</span>);</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getEntries</span>(<span class="hljs-string">'localDeviceId'</span>, query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">entries: distributedKVStore.Entry[]</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting entries'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get entries.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting entries'</span>);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get entries.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2235px;">     <h3 id="getresultset-4" device-type="phone,2in1,tablet,wearable,tv">getResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset-4" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(keyPrefix: string, callback: AsyncCallback&lt;KVStoreResultSet&gt;): void</p>     <p>从DeviceKVStore数据库中获取本设备具有指定前缀的结果集，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.140.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.140.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.140.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.140.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keyPrefix</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。不能包含'^'，包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回具有指定前缀的结果集。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.140.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.140.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100001</td>         <td class="cellrowborder" width="50%">Over max limits.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">result</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>) =&gt; {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting result set'</span>);</li><li>        resultSet = result;</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>          kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>              <span class="hljs-keyword">return</span>;</li><li>            }</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing result set'</span>);</li><li>          })</li><li>        }</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2145px;">     <h3 id="getresultset-5" device-type="phone,2in1,tablet,wearable,tv">getResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset-5" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(keyPrefix: string): Promise&lt;KVStoreResultSet&gt;</p>     <p>从DeviceKVStore数据库中获取本设备具有指定前缀的结果集，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.141.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.141.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.141.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.141.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keyPrefix</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。不能包含'^'，包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.141.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.141.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回具有指定前缀的结果集。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.141.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.141.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100001</td>         <td class="cellrowborder" width="50%">Over max limits.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting result set'</span>);</li><li>    resultSet = result;</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing result set'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1916px;">     <h3 id="getresultset-6" device-type="phone,2in1,tablet,wearable,tv">getResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset-6" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(deviceId: string, keyPrefix: string, callback: AsyncCallback&lt;KVStoreResultSet&gt;): void</p>     <p>获取与指定设备ID和Key前缀匹配的KVStoreResultSet对象，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.142.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.142.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.142.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.142.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">标识要查询其数据的设备。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">keyPrefix</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。不能包含'^'，包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回与指定设备ID和Key前缀匹配的KVStoreResultSet对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.142.10.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.142.10.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100001</td>         <td class="cellrowborder" width="50%">Over max limits.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-string">'batch_test_string_key'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">result</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSet.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting resultSet'</span>);</li><li>    resultSet = result;</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close resultSet.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing resultSet'</span>);</li><li>      })</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSet.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1922px;">     <h3 id="getresultset-7" device-type="phone,2in1,tablet,wearable,tv">getResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset-7" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(deviceId: string, keyPrefix: string): Promise&lt;KVStoreResultSet&gt;</p>     <p>获取与指定设备ID和Key前缀匹配的KVStoreResultSet对象，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.143.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.143.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.143.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.143.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">标识要查询其数据的设备。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">keyPrefix</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示要匹配的键前缀。不能包含'^'，包含'^'将导致谓词失效，查询结果会返回数据库中的所有数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.143.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.143.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回与指定设备ID和Key前缀匹配的KVStoreResultSet对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.143.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.143.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100001</td>         <td class="cellrowborder" width="50%">Over max limits.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'localDeviceId'</span>, <span class="hljs-string">'batch_test_string_key'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting resultSet'</span>);</li><li>    resultSet = result;</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing resultSet'</span>);</li><li>      }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close resultSet.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      });</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSet.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSet.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2420px;">     <h3 id="getresultset-8" device-type="phone,2in1,tablet,wearable,tv">getResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset-8" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(deviceId: string, query: Query, callback: AsyncCallback&lt;KVStoreResultSet&gt;): void</p>     <p>获取与指定设备ID和Query对象匹配的KVStoreResultSet对象，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.144.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.144.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.144.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.144.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">KVStoreResultSet对象所属的设备ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回与指定设备ID和Query对象匹配的KVStoreResultSet对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.144.10.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.144.10.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100001</td>         <td class="cellrowborder" width="50%">Over max limits.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'localDeviceId'</span>, query, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">result</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>) =&gt; {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSet.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting resultSet'</span>);</li><li>        resultSet = result;</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>          kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close resultSet.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>              <span class="hljs-keyword">return</span>;</li><li>            }</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing resultSet'</span>);</li><li>          })</li><li>        }</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSet.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2450px;">     <h3 id="getresultset-9" device-type="phone,2in1,tablet,wearable,tv">getResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset-9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(deviceId: string, query: Query): Promise&lt;KVStoreResultSet&gt;</p>     <p>获取与指定设备ID和Query对象匹配的KVStoreResultSet对象，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.145.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.145.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.145.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.145.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">KVStoreResultSet对象所属的设备ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.145.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.145.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回与指定设备ID和Query对象匹配的KVStoreResultSet对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.145.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.145.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100001</td>         <td class="cellrowborder" width="50%">Over max limits.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>  query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>  <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>    kvStore.<span class="hljs-title function_">getResultSet</span>(<span class="hljs-string">'localDeviceId'</span>, query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting resultSet'</span>);</li><li>      resultSet = result;</li><li>      <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>        kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing resultSet'</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close resultSet.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        });</li><li>      }</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSet.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  }</li><li>  query.<span class="hljs-title function_">deviceId</span>(<span class="hljs-string">'localDeviceId'</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"GetResultSet "</span> + query.<span class="hljs-title function_">getSqlLike</span>());</li><li>
</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSet.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1977px;">     <h3 id="getresultset-10" device-type="phone,2in1,tablet,wearable,tv">getResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset-10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(query: Query): Promise&lt;KVStoreResultSet&gt;</p>     <p>获取与本设备指定Query对象匹配的KVStoreResultSet对象，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.146.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.146.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.146.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.146.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.146.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.146.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。获取与本设备指定Query对象匹配的KVStoreResultSet对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.146.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.146.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100001</td>         <td class="cellrowborder" width="50%">Over max limits.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>  query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>  kvStore.<span class="hljs-title function_">getResultSet</span>(query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: distributedKVStore.KVStoreResultSet</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting result set'</span>);</li><li>    resultSet = result;</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultset.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2351px;">     <h3 id="getresultset-11" device-type="phone,2in1,tablet,wearable,tv">getResultSet<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultset-11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSet(query: Query, callback:AsyncCallback&lt;KVStoreResultSet&gt;): void</p>     <p>获取与本设备指定Query对象匹配的KVStoreResultSet对象，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.147.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.147.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.147.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.147.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#kvstoreresultset">KVStoreResultSet</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，获取与指定Predicates对象匹配的KVStoreResultSet对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.147.10.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.147.10.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100001</td>         <td class="cellrowborder" width="50%">Over max limits.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">resultSet</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>) =&gt; {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getResultSet</span>(query, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">result</span>: distributedKVStore.<span class="hljs-property">KVStoreResultSet</span>) =&gt; {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSet.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting resultSet'</span>);</li><li>        resultSet = result;</li><li>        <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>          kvStore.<span class="hljs-title function_">closeResultSet</span>(resultSet, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to close resultSet.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>              <span class="hljs-keyword">return</span>;</li><li>            }</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in closing resultSet'</span>);</li><li>          })</li><li>        }</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSet`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1796px;">     <h3 id="getresultsize-2" device-type="phone,2in1,tablet,wearable,tv">getResultSize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultsize-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSize(query: Query, callback: AsyncCallback&lt;number&gt;): void</p>     <p>获取与本设备指定Query对象匹配的结果数，使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.148.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.148.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.148.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.148.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回与本设备指定Query对象匹配的结果数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.148.9.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.148.9.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getResultSize</span>(query, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, resultSize: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get result size.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting result set size'</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1826px;">     <h3 id="getresultsize-3" device-type="phone,2in1,tablet,wearable,tv">getResultSize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultsize-3" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSize(query: Query): Promise&lt;number&gt;</p>     <p>获取与本设备指定Query对象匹配的结果数，使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.149.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.149.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.149.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.149.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.149.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.149.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。获取与本设备指定Query对象匹配的结果数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.149.11.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.149.11.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>  query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>  kvStore.<span class="hljs-title function_">getResultSize</span>(query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">resultSize: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting result set size'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get result size.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`An unexpected error occurred.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2156px;">     <h3 id="getresultsize-4" device-type="phone,2in1,tablet,wearable,tv">getResultSize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultsize-4" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSize(deviceId: string, query: Query, callback: AsyncCallback&lt;number&gt;): void;</p>     <p>获取与指定设备ID和Query对象匹配的结果数，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.150.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.150.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.150.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.150.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">KVStoreResultSet对象所属的设备ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回与指定设备ID和Query对象匹配的结果数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.150.10.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.150.10.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100004</td>         <td class="cellrowborder" width="50%">Not found.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>    query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>    <span class="hljs-keyword">if</span> (kvStore != <span class="hljs-literal">null</span>) {</li><li>      kvStore.<span class="hljs-title function_">getResultSize</span>(<span class="hljs-string">'localDeviceId'</span>, query, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, resultSize: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">undefined</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSize.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting resultSize'</span>);</li><li>      });</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSize.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2114px;">     <h3 id="getresultsize-5" device-type="phone,2in1,tablet,wearable,tv">getResultSize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getresultsize-5" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getResultSize(deviceId: string, query: Query): Promise&lt;number&gt;</p>     <p>获取与指定设备ID和Query对象匹配的结果数，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>其中deviceId通过调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getavailabledevicelistsync">deviceManager.getAvailableDeviceListSync</a>方法得到。</p>       <p>deviceId具体获取方式请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#sync">sync接口示例</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.KVStore.DistributedKVStore</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.151.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.151.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.151.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.151.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">KVStoreResultSet对象所属的设备ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">query</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributedkvstore#query">Query</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示查询对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.151.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.151.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回与指定设备ID和Query对象匹配的结果数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-distributedkvstore">分布式键值数据库错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.151.12.1.3.1.1" width="50%"><strong>错误码ID</strong></th>         <th align="left" class="cellrowborder" id="mcps1.3.151.12.1.3.1.2" width="50%"><strong>错误信息</strong></th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameters types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100003</td>         <td class="cellrowborder" width="50%">Database corrupted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100004</td>         <td class="cellrowborder" width="50%">Not found.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15100005</td>         <td class="cellrowborder" width="50%">Database or result set already closed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-wdy-c106="" class="highlight-div"><div _ngcontent-wdy-c106="" class="highlight-div-header"><div _ngcontent-wdy-c106="" class="highlight-div-header-left"><div _ngcontent-wdy-c106="" class="handle-button expand-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-wdy-c106="" class="highlight-div-header-right"><div _ngcontent-wdy-c106="" class="handle-button ai-button"></div><div _ngcontent-wdy-c106="" class="handle-button line-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-wdy-c106="" class="handle-button theme-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-wdy-c106="" class="handle-button copy-button"><div _ngcontent-wdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-wdy-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">entries</span>: distributedKVStore.<span class="hljs-property">Entry</span>[] = [];</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> key = <span class="hljs-string">'batch_test_string_key'</span>;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">entry</span>: distributedKVStore.<span class="hljs-property">Entry</span> = {</li><li>      <span class="hljs-attr">key</span>: key + i,</li><li>      <span class="hljs-attr">value</span>: {</li><li>        <span class="hljs-attr">type</span>: distributedKVStore.<span class="hljs-property">ValueType</span>.<span class="hljs-property">STRING</span>,</li><li>        <span class="hljs-attr">value</span>: <span class="hljs-string">'batch_test_string_value'</span></li><li>      }</li><li>    }</li><li>    entries.<span class="hljs-title function_">push</span>(entry);</li><li>  }</li><li>  kvStore.<span class="hljs-title function_">putBatch</span>(entries).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in putting batch'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put batch.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-keyword">let</span> query = <span class="hljs-keyword">new</span> distributedKVStore.<span class="hljs-title class_">Query</span>();</li><li>  query.<span class="hljs-title function_">prefixKey</span>(<span class="hljs-string">"batch_test"</span>);</li><li>  kvStore.<span class="hljs-title function_">getResultSize</span>(<span class="hljs-string">'localDeviceId'</span>, query).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">resultSize: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting resultSize'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSize.code is <span class="hljs-subst">${err.code}</span>,message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get resultSize.code is <span class="hljs-subst">${error.code}</span>,message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>