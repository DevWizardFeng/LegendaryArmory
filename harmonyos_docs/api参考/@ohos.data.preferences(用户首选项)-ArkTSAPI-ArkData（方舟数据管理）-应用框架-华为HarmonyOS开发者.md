<h1 _ngcontent-rpp-c119="" class="doc-title ng-star-inserted" title="@ohos.data.preferences (用户首选项)"> @ohos.data.preferences (用户首选项) </h1>

<div _ngcontent-rpp-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>用户首选项为应用提供Key-Value键值型的数据处理能力，支持应用持久化轻量级数据，并对其修改和查询。</p>    <p>数据存储采用键值对形式，键为字符串类型，值可为数字、字符、布尔类型及其对应的数组。</p>    <p>用户首选项的持久化文件存储在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/application-context-stage#获取应用文件路径" target="_blank">preferencesDir</a>路径下，创建preferences对象前，需要保证preferencesDir路径可读写。持久化文件存储路径中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-contextconstant#areamode">加密等级</a>会影响文件的可读写状态，路径访问限制详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory#应用文件目录与应用文件路径" target="_blank">应用文件目录与应用文件路径</a>。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 9开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>      <p>首选项无法保证进程并发安全，会有文件损坏和数据丢失的风险，不支持在多进程场景下使用。</p>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { preferences } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 426px;">     <h2 id="常量" device-type="phone,2in1,tablet,wearable,tv">常量<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="常量" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.5.1.1" width="25%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.5.1.3" width="25%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">MAX_KEY_LENGTH</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Key的最大长度限制为1024个字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">MAX_VALUE_LENGTH</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Value的最大长度限制为16MB。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 2166px;">     <h2 id="preferencesgetpreferences" device-type="phone,2in1,tablet,wearable,tv">preferences.getPreferences<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesgetpreferences" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreferences(context: Context, name: string, callback: AsyncCallback&lt;Preferences&gt;): void</p>     <p>获取Preferences实例，使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Preferences实例的名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferences">Preferences</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取Preferences实例成功，err为undefined，返回Preferences实例；否则err为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataPreferences</span>: preferences.<span class="hljs-property">Preferences</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>preferences.<span class="hljs-title function_">getPreferences</span>(context, <span class="hljs-string">'myStore'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, val: preferences.Preferences</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  dataPreferences = val;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in getting preferences."</span>);</li><li>})</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataPreferences</span>: preferences.<span class="hljs-property">Preferences</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    preferences.<span class="hljs-title function_">getPreferences</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, <span class="hljs-string">'myStore'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, val: preferences.Preferences</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      dataPreferences = val;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in getting preferences."</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2172px;">     <h2 id="preferencesgetpreferences-1" device-type="phone,2in1,tablet,wearable,tv">preferences.getPreferences<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesgetpreferences-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreferences(context: Context, name: string): Promise&lt;Preferences&gt;</p>     <p>获取Preferences实例，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Preferences实例的名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferences">Preferences</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回Preferences实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataPreferences</span>: preferences.<span class="hljs-property">Preferences</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li><span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">getPreferences</span>(context, <span class="hljs-string">'myStore'</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-built_in">object</span>: preferences.Preferences</span>) =&gt;</span> {</li><li>  dataPreferences = <span class="hljs-built_in">object</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in getting preferences."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>})</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataPreferences</span>: preferences.<span class="hljs-property">Preferences</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">getPreferences</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, <span class="hljs-string">'myStore'</span>);</li><li>    promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-built_in">object</span>: preferences.Preferences</span>) =&gt;</span> {</li><li>      dataPreferences = <span class="hljs-built_in">object</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in getting preferences."</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2427px;">     <h2 id="preferencesgetpreferences10" device-type="phone,2in1,tablet,wearable,tv">preferences.getPreferences<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesgetpreferences10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreferences(context: Context, options: Options, callback: AsyncCallback&lt;Preferences&gt;): void</p>     <p>获取Preferences实例，使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#options10">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与Preferences实例相关的配置选项。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferences">Preferences</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取Preferences实例成功，err为undefined，返回Preferences实例；否则err为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501001</td>         <td class="cellrowborder" width="50%">The operations is supported in stage mode only.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501002</td>         <td class="cellrowborder" width="50%">Invalid dataGroupId.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataPreferences</span>: preferences.<span class="hljs-property">Preferences</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>preferences.<span class="hljs-title function_">getPreferences</span>(context, options, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, val: preferences.Preferences</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  dataPreferences = val;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in getting preferences."</span>);</li><li>})</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataPreferences</span>: preferences.<span class="hljs-property">Preferences</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>    preferences.<span class="hljs-title function_">getPreferences</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, options, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, val: preferences.Preferences</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      dataPreferences = val;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in getting preferences."</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2409px;">     <h2 id="preferencesgetpreferences10-1" device-type="phone,2in1,tablet,wearable,tv">preferences.getPreferences<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesgetpreferences10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreferences(context: Context, options: Options): Promise&lt;Preferences&gt;</p>     <p>获取Preferences实例，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#options10">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与Preferences实例相关的配置选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferences">Preferences</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回Preferences实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501001</td>         <td class="cellrowborder" width="50%">The operations is supported in stage mode only.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501002</td>         <td class="cellrowborder" width="50%">Invalid dataGroupId.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataPreferences</span>: preferences.<span class="hljs-property">Preferences</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li><span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">getPreferences</span>(context, options);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-built_in">object</span>: preferences.Preferences</span>) =&gt;</span> {</li><li>  dataPreferences = <span class="hljs-built_in">object</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in getting preferences."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>})</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataPreferences</span>: preferences.<span class="hljs-property">Preferences</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>    <span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">getPreferences</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, options);</li><li>    promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-built_in">object</span>: preferences.Preferences</span>) =&gt;</span> {</li><li>      dataPreferences = <span class="hljs-built_in">object</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in getting preferences."</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2073px;">     <h2 id="preferencesgetpreferencessync10" device-type="phone,2in1,tablet,wearable,tv">preferences.getPreferencesSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesgetpreferencessync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreferencesSync(context: Context, options: Options): Preferences</p>     <p>获取Preferences实例，此为同步接口。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#options10">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与Preferences实例相关的配置选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferences">Preferences</a></td>         <td class="cellrowborder" width="50%">返回Preferences实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501001</td>         <td class="cellrowborder" width="50%">The operations is supported in stage mode only.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501002</td>         <td class="cellrowborder" width="50%">Invalid dataGroupId.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataPreferences</span>: preferences.<span class="hljs-property">Preferences</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>dataPreferences = preferences.<span class="hljs-title function_">getPreferencesSync</span>(context, options);</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataPreferences</span>: preferences.<span class="hljs-property">Preferences</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>    dataPreferences = preferences.<span class="hljs-title function_">getPreferencesSync</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, options);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2221px;">     <h2 id="preferencesdeletepreferences" device-type="phone,2in1,tablet,wearable,tv">preferences.deletePreferences<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesdeletepreferences" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deletePreferences(context: Context, name: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>从缓存中删除指定的Preferences实例，若Preferences实例有对应的持久化文件，则同时删除其持久化文件。使用callback异步回调。</p>     <p>调用该接口后，不建议再使用旧的Preferences实例进行数据操作，否则会导致数据一致性问题，应将Preferences实例置为null，系统会统一回收。</p>     <p>不支持该接口与其他preference接口并发调用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Preferences实例的名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当移除成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500010</td>         <td class="cellrowborder" width="50%">Failed to delete the user preferences persistence file.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li>
</li><li>preferences.<span class="hljs-title function_">deletePreferences</span>(context, <span class="hljs-string">'myStore'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to delete preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting preferences."</span>);</li><li>})</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    preferences.<span class="hljs-title function_">deletePreferences</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, <span class="hljs-string">'myStore'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to delete preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting preferences."</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2251px;">     <h2 id="preferencesdeletepreferences-1" device-type="phone,2in1,tablet,wearable,tv">preferences.deletePreferences<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesdeletepreferences-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deletePreferences(context: Context, name: string): Promise&lt;void&gt;</p>     <p>从缓存中删除指定的Preferences实例，若Preferences实例有对应的持久化文件，则同时删除其持久化文件。使用Promise异步回调。</p>     <p>调用该接口后，不建议再使用旧的Preferences实例进行数据操作，否则会导致数据一致性问题，应将Preferences实例置为null，系统会统一回收。</p>     <p>不支持该接口与其他preference接口并发调用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Preferences实例的名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500010</td>         <td class="cellrowborder" width="50%">Failed to delete the user preferences persistence file.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">deletePreferences</span>(context, <span class="hljs-string">'myStore'</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting preferences."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to delete preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>})</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">deletePreferences</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, <span class="hljs-string">'myStore'</span>);</li><li>    promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting preferences."</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to delete preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2458px;">     <h2 id="preferencesdeletepreferences10" device-type="phone,2in1,tablet,wearable,tv">preferences.deletePreferences<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesdeletepreferences10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deletePreferences(context: Context, options: Options, callback: AsyncCallback&lt;void&gt;): void</p>     <p>从缓存中删除指定的Preferences实例，若Preferences实例有对应的持久化文件，则同时删除其持久化文件。使用callback异步回调。</p>     <p>调用该接口后，不建议再使用旧的Preferences实例进行数据操作，否则会导致数据一致性问题，应将Preferences实例置为null，系统会统一回收。</p>     <p>不支持该接口与其他preference接口并发调用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#options10">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与Preferences实例相关的配置选项。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当移除成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500010</td>         <td class="cellrowborder" width="50%">Failed to delete the user preferences persistence file.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501001</td>         <td class="cellrowborder" width="50%">The operations is supported in stage mode only.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501002</td>         <td class="cellrowborder" width="50%">Invalid dataGroupId.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>preferences.<span class="hljs-title function_">deletePreferences</span>(context, options, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to delete preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting preferences."</span>);</li><li>})</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>    preferences.<span class="hljs-title function_">deletePreferences</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, options, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to delete preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting preferences."</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2488px;">     <h2 id="preferencesdeletepreferences10-1" device-type="phone,2in1,tablet,wearable,tv">preferences.deletePreferences<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesdeletepreferences10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deletePreferences(context: Context, options: Options): Promise&lt;void&gt;</p>     <p>从缓存中删除指定的Preferences实例，若Preferences实例有对应的持久化文件，则同时删除其持久化文件。使用Promise异步回调。</p>     <p>调用该接口后，不建议再使用旧的Preferences实例进行数据操作，否则会导致数据一致性问题，应将Preferences实例置为null，系统会统一回收。</p>     <p>不支持该接口与其他preference接口并发调用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#options10">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与Preferences实例相关的配置选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500010</td>         <td class="cellrowborder" width="50%">Failed to delete the user preferences persistence file.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501001</td>         <td class="cellrowborder" width="50%">The operations is supported in stage mode only.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501002</td>         <td class="cellrowborder" width="50%">Invalid dataGroupId.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li><span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">deletePreferences</span>(context, options);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting preferences."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to delete preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>})</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>    <span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">deletePreferences</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, options);</li><li>    promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting preferences."</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to delete preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2262px;">     <h2 id="preferencesremovepreferencesfromcache" device-type="phone,2in1,tablet,wearable,tv">preferences.removePreferencesFromCache<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesremovepreferencesfromcache" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removePreferencesFromCache(context: Context, name: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>从缓存中移除指定的Preferences实例，使用callback异步回调。</p>     <p>应用首次调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>接口获取某个Preferences实例后，该实例会被缓存起来，后续调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>时不会再次从持久化文件中读取，直接从缓存中获取Preferences实例。调用此接口移除缓存中的实例之后，再次getPreferences将会重新读取持久化文件，生成新的Preferences实例。</p>     <p>调用该接口后，不建议再使用旧的Preferences实例进行数据操作，否则会导致数据一致性问题，应将Preferences实例置为null，系统会统一回收。</p>     <p>若使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-preferences#gskv存储" target="_blank">GSKV存储模式</a>，推荐在进程退出时手动调用一次该接口。此操作会将数据缓存页写入磁盘，可一定程度上减少下一次调用getPreferences接口时的耗时。否则，下一次调用getPreferences接口时底层需要进行数据恢复，数据恢复的耗时取决于未写入磁盘的数据缓存页数量。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Preferences实例的名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当移除成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li>preferences.<span class="hljs-title function_">removePreferencesFromCache</span>(context, <span class="hljs-string">'myStore'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to remove preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in removing preferences."</span>);</li><li>})</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    preferences.<span class="hljs-title function_">removePreferencesFromCache</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, <span class="hljs-string">'myStore'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to remove preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in removing preferences."</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2292px;">     <h2 id="preferencesremovepreferencesfromcache-1" device-type="phone,2in1,tablet,wearable,tv">preferences.removePreferencesFromCache<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesremovepreferencesfromcache-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removePreferencesFromCache(context: Context, name: string): Promise&lt;void&gt;</p>     <p>从缓存中移除指定的Preferences实例，使用Promise异步回调。</p>     <p>应用首次调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>接口获取某个Preferences实例后，该实例会被缓存起来，后续调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>时不会再次从持久化文件中读取，直接从缓存中获取Preferences实例。调用此接口移除缓存中的实例之后，再次getPreferences将会重新读取持久化文件，生成新的Preferences实例。</p>     <p>调用该接口后，不建议再使用旧的Preferences实例进行数据操作，否则会导致数据一致性问题，应将Preferences实例置为null，系统会统一回收。</p>     <p>若使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-preferences#gskv存储" target="_blank">GSKV存储模式</a>，推荐在进程退出时手动调用一次该接口。此操作会将数据缓存页写入磁盘，可一定程度上减少下一次调用getPreferences接口时的耗时。否则，下一次调用getPreferences接口时底层需要进行数据恢复，数据恢复的耗时取决于未写入磁盘的数据缓存页数量。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Preferences实例的名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.15.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.15.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li><span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">removePreferencesFromCache</span>(context, <span class="hljs-string">'myStore'</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in removing preferences."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to remove preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>})</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">removePreferencesFromCache</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, <span class="hljs-string">'myStore'</span>);</li><li>    promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in removing preferences."</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to remove preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1809px;">     <h2 id="preferencesremovepreferencesfromcachesync10" device-type="phone,2in1,tablet,wearable,tv">preferences.removePreferencesFromCacheSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesremovepreferencesfromcachesync10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removePreferencesFromCacheSync(context: Context, name: string): void</p>     <p>从缓存中移除指定的Preferences实例，此为同步接口。</p>     <p>应用首次调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>接口获取某个Preferences实例后，该实例会被缓存起来，后续调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>时不会再次从持久化文件中读取，直接从缓存中获取Preferences实例。调用此接口移除缓存中的实例之后，再次getPreferences将会重新读取持久化文件，生成新的Preferences实例。</p>     <p>调用该接口后，不建议再使用旧的Preferences实例进行数据操作，否则会导致数据一致性问题，应将Preferences实例置为null，系统会统一回收。</p>     <p>若使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-preferences#gskv存储" target="_blank">GSKV存储模式</a>，推荐在进程退出时手动调用一次该接口。此操作会将数据缓存页写入磁盘，可一定程度上减少下一次调用getPreferences接口时的耗时。否则，下一次调用getPreferences接口时底层需要进行数据恢复，数据恢复的耗时取决于未写入磁盘的数据缓存页数量。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Preferences实例的名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li>preferences.<span class="hljs-title function_">removePreferencesFromCacheSync</span>(context, <span class="hljs-string">'myStore'</span>);</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    preferences.<span class="hljs-title function_">removePreferencesFromCacheSync</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, <span class="hljs-string">'myStore'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2499px;">     <h2 id="preferencesremovepreferencesfromcache10" device-type="phone,2in1,tablet,wearable,tv">preferences.removePreferencesFromCache<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesremovepreferencesfromcache10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removePreferencesFromCache(context: Context, options: Options, callback: AsyncCallback&lt;void&gt;): void</p>     <p>从缓存中移除指定的Preferences实例，使用callback异步回调。</p>     <p>应用首次调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>接口获取某个Preferences实例后，该实例会被缓存起来，后续调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>时不会再次从持久化文件中读取，直接从缓存中获取Preferences实例。调用此接口移除缓存中的实例之后，再次getPreferences将会重新读取持久化文件，生成新的Preferences实例。</p>     <p>调用该接口后，不建议再使用旧的Preferences实例进行数据操作，否则会导致数据一致性问题，应将Preferences实例置为null，系统会统一回收。</p>     <p>若使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-preferences#gskv存储" target="_blank">GSKV存储模式</a>，推荐在进程退出时手动调用一次该接口。此操作会将数据缓存页写入磁盘，可一定程度上减少下一次调用getPreferences接口时的耗时。否则，下一次调用getPreferences接口时底层需要进行数据恢复，数据恢复的耗时取决于未写入磁盘的数据缓存页数量。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#options10">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与Preferences实例相关的配置选项。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当移除成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501001</td>         <td class="cellrowborder" width="50%">The operations is supported in stage mode only.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501002</td>         <td class="cellrowborder" width="50%">Invalid dataGroupId.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>preferences.<span class="hljs-title function_">removePreferencesFromCache</span>(context, options, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to remove preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in removing preferences."</span>);</li><li>})</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>    preferences.<span class="hljs-title function_">removePreferencesFromCache</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, options, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to remove preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in removing preferences."</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2529px;">     <h2 id="preferencesremovepreferencesfromcache10-1" device-type="phone,2in1,tablet,wearable,tv">preferences.removePreferencesFromCache<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesremovepreferencesfromcache10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removePreferencesFromCache(context: Context, options: Options): Promise&lt;void&gt;</p>     <p>从缓存中移除指定的Preferences实例，使用Promise异步回调。</p>     <p>应用首次调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>接口获取某个Preferences实例后，该实例会被缓存起来，后续调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>时不会再次从持久化文件中读取，直接从缓存中获取Preferences实例。调用此接口移除缓存中的实例之后，再次getPreferences将会重新读取持久化文件，生成新的Preferences实例。</p>     <p>调用该接口后，不建议再使用旧的Preferences实例进行数据操作，否则会导致数据一致性问题，应将Preferences实例置为null，系统会统一回收。</p>     <p>若使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-preferences#gskv存储" target="_blank">GSKV存储模式</a>，推荐在进程退出时手动调用一次该接口。此操作会将数据缓存页写入磁盘，可一定程度上减少下一次调用getPreferences接口时的耗时。否则，下一次调用getPreferences接口时底层需要进行数据恢复，数据恢复的耗时取决于未写入磁盘的数据缓存页数量。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#options10">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与Preferences实例相关的配置选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.15.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.15.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501001</td>         <td class="cellrowborder" width="50%">The operations is supported in stage mode only.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501002</td>         <td class="cellrowborder" width="50%">Invalid dataGroupId.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li><span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">removePreferencesFromCache</span>(context, options);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in removing preferences."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to remove preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>})</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>    <span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">removePreferencesFromCache</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, options);</li><li>    promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in removing preferences."</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to remove preferences. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2046px;">     <h2 id="preferencesremovepreferencesfromcachesync10-1" device-type="phone,2in1,tablet,wearable,tv">preferences.removePreferencesFromCacheSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesremovepreferencesfromcachesync10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removePreferencesFromCacheSync(context: Context, options: Options):void</p>     <p>从缓存中移除指定的Preferences实例，此为同步接口。</p>     <p>应用首次调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>接口获取某个Preferences实例后，该实例会被缓存起来，后续调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>时不会再次从持久化文件中读取，直接从缓存中获取Preferences实例。调用此接口移除缓存中的实例之后，再次getPreferences将会重新读取持久化文件，生成新的Preferences实例。</p>     <p>调用该接口后，不建议再使用旧的Preferences实例进行数据操作，否则会导致数据一致性问题，应将Preferences实例置为null，系统会统一回收。</p>     <p>若使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-preferences#gskv存储" target="_blank">GSKV存储模式</a>，推荐在进程退出时手动调用一次该接口。此操作会将数据缓存页写入磁盘，可一定程度上减少下一次调用getPreferences接口时的耗时。否则，下一次调用getPreferences接口时底层需要进行数据恢复，数据恢复的耗时取决于未写入磁盘的数据缓存页数量。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%">Context</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用上下文。</p>          <p>FA模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">Context</a>。</p>          <p>Stage模型的应用Context定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#options10">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与Preferences实例相关的配置选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501001</td>         <td class="cellrowborder" width="50%">The operations is supported in stage mode only.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501002</td>         <td class="cellrowborder" width="50%">Invalid dataGroupId.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>FA模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 获取context</span></li><li><span class="hljs-keyword">import</span> { featureAbility } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">let</span> context = featureAbility.<span class="hljs-title function_">getContext</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>preferences.<span class="hljs-title function_">removePreferencesFromCacheSync</span>(context, options);</li></ol></pre></div></div>     <p>Stage模型示例：</p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: preferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>    preferences.<span class="hljs-title function_">removePreferencesFromCacheSync</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, options);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 814px;">     <h2 id="storagetype18" device-type="phone,2in1,tablet,wearable,tv">StorageType<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="storagetype18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>Preferences的存储模式枚举。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">XML</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-preferences#xml存储" target="_blank">XML存储模式</a>，这是Preferences的默认存储模式。</p>          <p><strong>特点：</strong> 数据XML格式进行存储。对数据的操作发生在内存中，需要调用flush接口进行落盘。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">GSKV</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-preferences#gskv存储" target="_blank">GSKV存储模式</a>。</p>          <p><strong>特点：</strong> 数据以GSKV数据库模式进行存储。对数据的操作实时落盘，无需调用flush接口对数据进行落盘。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>在选择存储模式前，建议调用isStorageTypeSupported检查当前平台是否支持对应存储模式。</li>        <li>当选择某一模式通过getPreferences接口获取实例后，不允许中途切换模式。</li>        <li>首选项不支持不同模式间数据的迁移，若需将数据从一种模式切换至另一种模式，需通过读写首选项的形式进行数据迁移。</li>        <li>若需要变更首选项的存储路径，不能通过移动或覆盖文件的方式进行，需通过读写首选项的形式进行数据迁移。</li>       </ul>      </div></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1244px;">     <h2 id="preferencesisstoragetypesupported18" device-type="phone,2in1,tablet,wearable,tv">preferences.isStorageTypeSupported<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferencesisstoragetypesupported18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isStorageTypeSupported(type: StorageType): boolean</p>     <p>判断当前平台是否支持传入的存储模式，此为同步接口。如果当前平台支持传入的存储模式时，该接口返回true；反之，返回false。</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#storagetype18">StorageType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要判断是否支持的存储模式。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">true表示当前平台支持当前校验的存储模式，false表示当前平台不支持当前校验的存储模式。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> xmlType = preferences.<span class="hljs-property">StorageType</span>.<span class="hljs-property">XML</span>;</li><li><span class="hljs-keyword">let</span> gskvType = preferences.<span class="hljs-property">StorageType</span>.<span class="hljs-property">GSKV</span>;</li><li><span class="hljs-keyword">let</span> isXmlSupported = preferences.<span class="hljs-title function_">isStorageTypeSupported</span>(xmlType);</li><li><span class="hljs-keyword">let</span> isGskvSupported = preferences.<span class="hljs-title function_">isStorageTypeSupported</span>(gskvType);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Is xml supported in current platform: "</span> + isXmlSupported);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Is gskv supported in current platform: "</span> + isGskvSupported);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1527px;">     <h2 id="options10" device-type="phone,2in1,tablet,wearable,tv">Options<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="options10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>Preferences实例配置选项。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">name</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>Preferences实例的名称。名称长度需大于零且小于等于255字节，名称中不能包含'/'且不能以'/'结尾。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dataGroupId</td>         <td class="cellrowborder" width="20%">string|null|undefined</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>应用组ID，需要向应用市场获取，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ime-kit-security#section4219152220459" target="_blank">dataGroupId申请流程</a>。基于dataGroupId的数据共享支持两种场景：1.同一应用的不同进程间共享，只支持三方应用中输入法和输入法的扩展场景使用；2.不同应用间的数据共享，只支持系统应用使用。</p>          <p>为可选参数。指定在此dataGroupId对应的沙箱路径下创建Preferences实例。当此参数不填时，默认在本应用沙箱目录下创建Preferences实例。</p>          <p><strong>模型约束：</strong> 此属性仅在Stage模型下可用。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">storageType<sup>18+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#storagetype18">StorageType</a>|null|undefined</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>存储模式，为可选参数。表示当前Preferences实例需要使用的存储模式。当此参数不填时，默认使用XML存储模式。当选择某种存储模式创建Preferences后，不支持中途切换存储模式。</p>          <p><strong>元服务API：</strong> 从API version 18开始，该参数支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="preferences" device-type="phone,2in1,tablet,wearable,tv">Preferences<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferences" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>首选项实例，提供获取和修改存储数据的接口。</p>     <p>下列接口都需先使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">preferences.getPreferences</a>获取到Preferences实例，再通过此实例调用对应接口。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1338px;">     <h3 id="get" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">get<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(key: string, defValue: ValueType, callback: AsyncCallback&lt;ValueType&gt;): void</p>     <p>从缓存的Preferences实例中获取键对应的值，如果值为null或者非默认值类型，返回默认数据defValue，使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要获取的存储Key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">defValue</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#valuetype">ValueType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">默认返回值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#valuetype">ValueType</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取成功时，err为undefined，data为键对应的值；否则err为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>dataPreferences.<span class="hljs-title function_">get</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'default'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, val: preferences.ValueType</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get value of 'startup'. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in getting value of 'startup'. val： "</span> + val);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1384px;">     <h3 id="get-1" device-type="phone,2in1,tablet,wearable,tv">get<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(key: string, defValue: ValueType): Promise&lt;ValueType&gt;</p>     <p>从缓存的Preferences实例中获取键对应的值，如果值为null或者非默认值类型，返回默认数据defValue，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要获取的存储Key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">defValue</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#valuetype">ValueType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">默认返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#valuetype">ValueType</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回键对应的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> promise = dataPreferences.<span class="hljs-title function_">get</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'default'</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: preferences.ValueType</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in getting value of 'startup'. Data: "</span> + data);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get value of 'startup'. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1216px;">     <h3 id="getsync10" device-type="phone,2in1,tablet,wearable,tv">getSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsync10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSync(key: string, defValue: ValueType): ValueType</p>     <p>从缓存的Preferences实例中获取键对应的值，如果值为null或者非默认值类型，返回默认数据defValue，此为同步接口。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要获取的存储Key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">defValue</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#valuetype">ValueType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">默认返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#valuetype">ValueType</a></td>         <td class="cellrowborder" width="50%">返回键对应的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">value</span>: preferences.<span class="hljs-property">ValueType</span> = dataPreferences.<span class="hljs-title function_">getSync</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'default'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1408px;">     <h3 id="getall" device-type="phone,2in1,tablet,wearable,tv">getAll<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getall" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAll(callback: AsyncCallback&lt;Object&gt;): void</p>     <p>获取缓存的Preferences实例中的所有键值数据。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Object&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当获取成功，err为undefined，value为所有键值数据；否则err为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Mandatory parameters are left unspecified.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 由于ArkTS中无Object.keys，且无法使用for..in...</span></li><li><span class="hljs-comment">// 若报ArkTS问题，请将此方法单独抽离至一个ts文件中并暴露，在需要用到的ets文件中引入使用</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getObjKeys</span>(<span class="hljs-params">obj: <span class="hljs-built_in">Object</span></span>): <span class="hljs-built_in">string</span>[] {</li><li>  <span class="hljs-keyword">let</span> keys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj);</li><li>  <span class="hljs-keyword">return</span> keys;</li><li>}</li><li>
</li><li>dataPreferences.<span class="hljs-title function_">getAll</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, value: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get all key-values. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> allKeys = <span class="hljs-title function_">getObjKeys</span>(value);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getAll keys = "</span> + allKeys);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getAll object = "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1253px;">     <h3 id="getall-1" device-type="phone,2in1,tablet,wearable,tv">getAll<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getall-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAll(): Promise&lt;Object&gt;</p>     <p>获取缓存的Preferences实例中的所有键值数据。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Object&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回所有包含的键值数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 由于ArkTS中无Object.keys，且无法使用for..in...</span></li><li><span class="hljs-comment">// 若报ArkTS问题，请将此方法单独抽离至一个ts文件中并暴露，在需要用到的ets文件中引入使用</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getObjKeys</span>(<span class="hljs-params">obj: <span class="hljs-built_in">Object</span></span>): <span class="hljs-built_in">string</span>[] {</li><li>  <span class="hljs-keyword">let</span> keys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj);</li><li>  <span class="hljs-keyword">return</span> keys;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> promise = dataPreferences.<span class="hljs-title function_">getAll</span>();</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> allKeys = <span class="hljs-title function_">getObjKeys</span>(value);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAll keys = '</span> + allKeys);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getAll object = "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to get all key-values. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1109px;">     <h3 id="getallsync10" device-type="phone,2in1,tablet,wearable,tv">getAllSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getallsync10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAllSync(): Object</p>     <p>获取缓存的Preferences实例中的所有键值数据，此为同步接口。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Object</td>         <td class="cellrowborder" width="50%">返回所有包含的键值数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 由于ArkTS中无Object.keys，且无法使用for..in...</span></li><li><span class="hljs-comment">// 若报ArkTS问题，请将此方法单独抽离至一个ts文件中并暴露，在需要用到的ets文件中引入使用</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getObjKeys</span>(<span class="hljs-params">obj: <span class="hljs-built_in">Object</span></span>): <span class="hljs-built_in">string</span>[] {</li><li>  <span class="hljs-keyword">let</span> keys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj);</li><li>  <span class="hljs-keyword">return</span> keys;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> value = dataPreferences.<span class="hljs-title function_">getAllSync</span>();</li><li><span class="hljs-keyword">let</span> allKeys = <span class="hljs-title function_">getObjKeys</span>(value);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAll keys = '</span> + allKeys);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getAll object = "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1446px;">     <h3 id="put" device-type="phone,2in1,tablet,wearable,tv">put<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="put" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>put(key: string, value: ValueType, callback: AsyncCallback&lt;void&gt;): void</p>     <p>将数据写入缓存的Preferences实例中，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#flush">flush</a>将Preferences实例持久化，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当value中包含非UTF-8格式的字符串时，请使用Uint8Array类型存储，否则会造成持久化文件出现格式错误造成文件损坏。</p>       <p>当对应的键已经存在时，put()方法会覆盖其值。可以使用hasSync()方法检查是否存在对应键值对。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要修改的存储的Key，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#valuetype">ValueType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">存储的新值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当数据写入成功，err为undefined；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>dataPreferences.<span class="hljs-title function_">put</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'auto'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to put value of 'startup'. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in putting value of 'startup'."</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1500px;">     <h3 id="put-1" device-type="phone,2in1,tablet,wearable,tv">put<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="put-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>put(key: string, value: ValueType): Promise&lt;void&gt;</p>     <p>将数据写入缓存的Preferences实例中，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#flush">flush</a>将Preferences实例持久化，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当value中包含非UTF-8格式的字符串时，请使用Uint8Array类型存储，否则会造成持久化文件出现格式错误造成文件损坏。</p>       <p>当对应的键已经存在时，put()方法会覆盖其值。可以使用hasSync()方法检查是否存在对应键值对。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要修改的存储的Key，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#valuetype">ValueType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">存储的新值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> promise = dataPreferences.<span class="hljs-title function_">put</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'auto'</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in putting value of 'startup'."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to put value of 'startup'. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1161px;">     <h3 id="putsync10" device-type="phone,2in1,tablet,wearable,tv">putSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="putsync10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>putSync(key: string, value: ValueType): void</p>     <p>将数据写入缓存的Preferences实例中，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#flush">flush</a>将Preferences实例持久化，此为同步接口。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当value中包含非UTF-8格式的字符串时，请使用Uint8Array类型存储，否则会造成持久化文件出现格式错误造成文件损坏。</p>       <p>当对应的键已经存在时，putSync()方法会覆盖其值。可以使用hasSync()方法检查是否存在对应键值对。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要修改的存储的Key，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#valuetype">ValueType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">存储的新值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>dataPreferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'auto'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1405px;">     <h3 id="has" device-type="phone,2in1,tablet,wearable,tv">has<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="has" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>has(key: string, callback: AsyncCallback&lt;boolean&gt;): void</p>     <p>检查缓存的Preferences实例中是否包含指定Key的存储键值对，使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要检查的存储key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回Preferences实例是否包含给定key的存储键值对，true表示存在，false表示不存在。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>dataPreferences.<span class="hljs-title function_">has</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, val: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to check the key 'startup'. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (val) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key 'startup' is contained."</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key 'startup' is not contained."</span>);</li><li>  }</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1459px;">     <h3 id="has-1" device-type="phone,2in1,tablet,wearable,tv">has<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="has-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>has(key: string): Promise&lt;boolean&gt;</p>     <p>检查缓存的Preferences实例中是否包含指定Key的存储键值对，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要检查的存储key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回Preferences实例是否包含给定key的存储键值对，true表示存在，false表示不存在。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> promise = dataPreferences.<span class="hljs-title function_">has</span>(<span class="hljs-string">'startup'</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (val) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key 'startup' is contained."</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key 'startup' does not contain."</span>);</li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to check the key 'startup'. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1315px;">     <h3 id="hassync10" device-type="phone,2in1,tablet,wearable,tv">hasSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hassync10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>hasSync(key: string): boolean</p>     <p>检查缓存的Preferences实例中是否包含指定Key的存储键值对，此为同步接口。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要检查的存储key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回Preferences实例是否包含给定key的存储键值对，true表示存在，false表示不存在。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">isExist</span>: <span class="hljs-built_in">boolean</span> = dataPreferences.<span class="hljs-title function_">hasSync</span>(<span class="hljs-string">'startup'</span>);</li><li><span class="hljs-keyword">if</span> (isExist) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key 'startup' is contained."</span>);</li><li>} <span class="hljs-keyword">else</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key 'startup' does not contain."</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1285px;">     <h3 id="delete" device-type="phone,2in1,tablet,wearable,tv">delete<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delete" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(key: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>从缓存的Preferences实例中删除名为给定Key的存储键值对，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#flush">flush</a>将Preferences实例持久化，使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要删除的存储Key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当删除成功，err为undefined；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>dataPreferences.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to delete the key 'startup'. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting the key 'startup'."</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1339px;">     <h3 id="delete-1" device-type="phone,2in1,tablet,wearable,tv">delete<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delete-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(key: string): Promise&lt;void&gt;</p>     <p>从缓存的Preferences实例中删除名为给定Key的存储键值对，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#flush">flush</a>将Preferences实例持久化，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要删除的存储key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> promise = dataPreferences.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'startup'</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting the key 'startup'."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to delete the key 'startup'. code ="</span> + err.<span class="hljs-property">code</span> +<span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1000px;">     <h3 id="deletesync10" device-type="phone,2in1,tablet,wearable,tv">deleteSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletesync10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteSync(key: string): void</p>     <p>从缓存的Preferences实例中删除名为给定Key的存储键值对，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#flush">flush</a>将Preferences实例持久化，此为同步接口。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要删除的存储key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>dataPreferences.<span class="hljs-title function_">deleteSync</span>(<span class="hljs-string">'startup'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1308px;">     <h3 id="flush" device-type="phone,2in1,tablet,wearable,tv">flush<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="flush" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>flush(callback: AsyncCallback&lt;void&gt;): void</p>     <p>将缓存的Preferences实例中的数据异步存储到用户首选项的持久化文件中，使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当数据未修改或修改后的数据与缓存数据一致时，不会刷新持久化文件。</p>       <p>只在XML存储模式下使用，在GSKV存储模式下无需调用，因为当选择该模式时首选项对数据的操作会实时落盘。Preferences存储模式可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-preferences#存储模式说明" target="_blank">存储模式说明</a>。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当保存成功，err为undefined；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Mandatory parameters are left unspecified.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>dataPreferences.<span class="hljs-title function_">flush</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to flush. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1177px;">     <h3 id="flush-1" device-type="phone,2in1,tablet,wearable,tv">flush<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="flush-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>flush(): Promise&lt;void&gt;</p>     <p>将缓存的Preferences实例中的数据异步存储到用户首选项的持久化文件中，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当数据未修改或修改后的数据与缓存数据一致时，不会刷新持久化文件。</p>       <p>只在XML存储模式下使用，在GSKV存储模式下无需调用，因为当选择该模式时首选项对数据的操作会实时落盘。Preferences存储模式可见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-persistence-by-preferences#存储模式说明" target="_blank">存储模式说明</a>。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> promise = dataPreferences.<span class="hljs-title function_">flush</span>();</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to flush. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 790px;">     <h3 id="flushsync14" device-type="phone,2in1,tablet,wearable,tv">flushSync<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="flushsync14" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>flushSync(): void</p>     <p>将缓存的Preferences实例中的数据存储到用户首选项的持久化文件中。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当数据未修改或修改后的数据与缓存数据一致时，不会刷新持久化文件。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>dataPreferences.<span class="hljs-title function_">flushSync</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1168px;">     <h3 id="clear" device-type="phone,2in1,tablet,wearable,tv">clear<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clear" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clear(callback: AsyncCallback&lt;void&gt;): void</p>     <p>清除缓存的Preferences实例中的所有数据，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#flush">flush</a>将Preferences实例持久化，使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当清除成功，err为undefined；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Mandatory parameters are left unspecified.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>dataPreferences.<span class="hljs-title function_">clear</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span>{</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to clear. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in clearing."</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1037px;">     <h3 id="clear-1" device-type="phone,2in1,tablet,wearable,tv">clear<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clear-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clear(): Promise&lt;void&gt;</p>     <p>清除缓存的Preferences实例中的所有数据，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#flush">flush</a>将Preferences实例持久化，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> promise = dataPreferences.<span class="hljs-title function_">clear</span>();</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in clearing."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to clear. code ="</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">", message ="</span> + err.<span class="hljs-property">message</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 479px;">     <h3 id="clearsync10" device-type="phone,2in1,tablet,wearable,tv">clearSync<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearsync10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearSync(): void</p>     <p>清除缓存的Preferences实例中的所有数据，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#flush">flush</a>将Preferences实例持久化，此为同步接口。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>dataPreferences.<span class="hljs-title function_">clearSync</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1449px;">     <h3 id="onchange" device-type="phone,2in1,tablet,wearable,tv">on('change')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onchange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'change', callback: Callback&lt;string&gt;): void</p>     <p>订阅数据变更，订阅的Key的值发生变更后，在执行<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#flush">flush</a>方法后，触发callback回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesremovepreferencesfromcache">removePreferencesFromCache</a>或<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesdeletepreferences">deletePreferences</a>后，订阅的数据变更会主动取消订阅，在重新<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>后需要重新订阅数据变更。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件类型，固定值'change'，表示数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">observer</span> = (<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key "</span> + key + <span class="hljs-string">" changed."</span>);</li><li>}</li><li>dataPreferences.<span class="hljs-title function_">on</span>(<span class="hljs-string">'change'</span>, observer);</li><li>dataPreferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'manual'</span>);</li><li>dataPreferences.<span class="hljs-title function_">flush</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to flush. Cause: "</span> + err);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1672px;">     <h3 id="onmultiprocesschange10" device-type="phone,2in1,tablet,wearable,tv">on('multiProcessChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onmultiprocesschange10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'multiProcessChange', callback: Callback&lt;string&gt;): void</p>     <p>订阅进程间数据变更，多个进程持有同一个首选项文件时，在任意一个进程（包括本进程）执行<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#flush">flush</a>方法，持久化文件发生变更后，触发callback回调。</p>     <p>本接口提供给申请了<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#options10">dataGroupId</a>的应用进行使用，未申请的应用不推荐使用，多进程操作可能会损坏持久化文件，导致数据丢失。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>同一持久化文件在当前进程订阅进程间数据变更的最大数量为50次，超过最大限制后会订阅失败。建议在触发callback回调后及时取消订阅。</p>       <p>当调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesremovepreferencesfromcache">removePreferencesFromCache</a>或<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesdeletepreferences">deletePreferences</a>后，订阅的数据变更会主动取消订阅，在重新<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>后需要重新订阅数据变更。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件类型，固定值'multiProcessChange'，表示多进程间的数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500019</td>         <td class="cellrowborder" width="50%">Failed to obtain the subscription service.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">observer</span> = (<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key "</span> + key + <span class="hljs-string">" changed."</span>);</li><li>}</li><li>dataPreferences.<span class="hljs-title function_">on</span>(<span class="hljs-string">'multiProcessChange'</span>, observer);</li><li>dataPreferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'manual'</span>);</li><li>dataPreferences.<span class="hljs-title function_">flush</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to flush. Cause: "</span> + err);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1830px;">     <h3 id="ondatachange12" device-type="phone,2in1,tablet,wearable,tv">on('dataChange')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondatachange12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'dataChange', keys: Array&lt;string&gt;, callback: Callback&lt;Record&lt;string, ValueType&gt;&gt;): void</p>     <p>精确订阅数据变更，只有被订阅的key值发生变更后，在执行<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#flush">flush</a>方法后，触发callback回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesremovepreferencesfromcache">removePreferencesFromCache</a>或<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesdeletepreferences">deletePreferences</a>后，订阅的数据变更会主动取消订阅，在重新<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#preferencesgetpreferences">getPreferences</a>后需要重新订阅数据变更。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.49.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件类型，固定值'dataChange'，表示精确的数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">keys</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要订阅的key集合。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Record&lt;string, <a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#valuetype">ValueType</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。回调支持返回多个键值对，其中键为发生变更的订阅key，值为变更后的数据：支持number、string、boolean、Array&lt;number&gt;、Array&lt;string&gt;、Array&lt;boolean&gt;、Uint8Array、object类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.49.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">observer</span> = (<span class="hljs-params">data: Record&lt;<span class="hljs-built_in">string</span>, preferences.ValueType&gt;</span>) =&gt; {</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> keyValue <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(data)) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`observer : <span class="hljs-subst">${keyValue}</span>`</span>);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The observer called."</span>);</li><li>}</li><li><span class="hljs-keyword">let</span> keys = [<span class="hljs-string">'name'</span>, <span class="hljs-string">'age'</span>];</li><li>dataPreferences.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, keys, observer);</li><li>dataPreferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'xiaohong'</span>);</li><li>dataPreferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'weight'</span>, <span class="hljs-number">125</span>);</li><li>dataPreferences.<span class="hljs-title function_">flush</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to flush. Cause: "</span> + err);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1381px;">     <h3 id="offchange" device-type="phone,2in1,tablet,wearable,tv">off('change')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offchange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'change', callback?: Callback&lt;string&gt;): void</p>     <p>取消订阅数据变更。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件类型，固定值'change'，表示数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消的回调函数，不填写则全部取消。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">observer</span> = (<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key "</span> + key + <span class="hljs-string">" changed."</span>);</li><li>}</li><li>dataPreferences.<span class="hljs-title function_">on</span>(<span class="hljs-string">'change'</span>, observer);</li><li>dataPreferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'auto'</span>);</li><li>dataPreferences.<span class="hljs-title function_">flush</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to flush. Cause: "</span> + err);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>})</li><li>dataPreferences.<span class="hljs-title function_">off</span>(<span class="hljs-string">'change'</span>, observer);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1477px;">     <h3 id="offmultiprocesschange10" device-type="phone,2in1,tablet,wearable,tv">off('multiProcessChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offmultiprocesschange10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'multiProcessChange', callback?: Callback&lt;string&gt;): void</p>     <p>取消订阅进程间数据变更。</p>     <p>本接口提供给申请了<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#options10">dataGroupId</a>的应用进行使用，未申请的应用不推荐使用，多进程操作可能会损坏持久化文件，导致数据丢失。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件类型，固定值'multiProcessChange'，表示多进程间的数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消的回调函数，不填写则全部取消。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">observer</span> = (<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key "</span> + key + <span class="hljs-string">" changed."</span>);</li><li>}</li><li>dataPreferences.<span class="hljs-title function_">on</span>(<span class="hljs-string">'multiProcessChange'</span>, observer);</li><li>dataPreferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'auto'</span>);</li><li>dataPreferences.<span class="hljs-title function_">flush</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to flush. Cause: "</span> + err);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>})</li><li>dataPreferences.<span class="hljs-title function_">off</span>(<span class="hljs-string">'multiProcessChange'</span>, observer);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1738px;">     <h3 id="offdatachange12" device-type="phone,2in1,tablet,wearable,tv">off('dataChange')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdatachange12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'dataChange', keys: Array&lt;string&gt;, callback?: Callback&lt;Record&lt;string, ValueType&gt;&gt;): void</p>     <p>取消精确订阅数据变更。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件类型，固定值'dataChange'，表示精确的数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">keys</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要取消订阅的key集合，当keys为空数组时，表示取消订阅全部key；当keys为非空数组时，表示只取消订阅key集合中的key。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Record&lt;string, <a href="/consumer/cn/doc/harmonyos-references/js-apis-data-preferences#valuetype">ValueType</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消的回调函数，若callback不填写，表示所有的callback都需要处理；若callback填写，表示只处理该callback。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-rpp-c106="" class="highlight-div"><div _ngcontent-rpp-c106="" class="highlight-div-header"><div _ngcontent-rpp-c106="" class="highlight-div-header-left"><div _ngcontent-rpp-c106="" class="handle-button expand-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-rpp-c106="" class="highlight-div-header-right"><div _ngcontent-rpp-c106="" class="handle-button ai-button"></div><div _ngcontent-rpp-c106="" class="handle-button line-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-rpp-c106="" class="handle-button theme-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-rpp-c106="" class="handle-button copy-button"><div _ngcontent-rpp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-rpp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">observer</span> = (<span class="hljs-params">data: Record&lt;<span class="hljs-built_in">string</span>, preferences.ValueType&gt;</span>) =&gt; {</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> keyValue <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(data)) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`observer : <span class="hljs-subst">${keyValue}</span>`</span>);</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The observer called."</span>);</li><li>}</li><li><span class="hljs-keyword">let</span> keys = [<span class="hljs-string">'name'</span>, <span class="hljs-string">'age'</span>];</li><li>dataPreferences.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, keys, observer);</li><li>dataPreferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'xiaohong'</span>);</li><li>dataPreferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'weight'</span>, <span class="hljs-number">125</span>);</li><li>dataPreferences.<span class="hljs-title function_">flush</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to flush. Cause: "</span> + err);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>})</li><li>dataPreferences.<span class="hljs-title function_">off</span>(<span class="hljs-string">'dataChange'</span>, keys, observer);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 889px;">     <h2 id="valuetype" device-type="phone,2in1,tablet,wearable,tv">ValueType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="valuetype" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type ValueType = number | string | boolean | Array&lt;number&gt; | Array&lt;string&gt; | Array&lt;boolean&gt; | Uint8Array | object | bigint</p>     <p>表示支持的值类型。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">表示值类型为数字。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">表示值类型为字符串。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">表示值类型为布尔值。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">Array&lt;number&gt;</td>         <td class="cellrowborder" width="50%">表示值类型为数字类型的数组。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">Array&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">表示值类型为布尔类型的数组。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="50%">表示值类型为字符串类型的数组。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">Uint8Array<sup>11+</sup></td>         <td class="cellrowborder" width="50%">表示值类型为8位无符号整型的数组。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">object<sup>12+</sup></td>         <td class="cellrowborder" width="50%">表示值类型为对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">bigint<sup>12+</sup></td>         <td class="cellrowborder" width="50%">表示值类型为任意精度格式的整数。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>