<h1 _ngcontent-fih-c119="" class="doc-title ng-star-inserted" title="@ohos.data.sendablePreferences (共享用户首选项)"> @ohos.data.sendablePreferences (共享用户首选项) </h1>

<div _ngcontent-fih-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>共享用户首选项为应用提供Key-Value键值型的数据处理能力，支持应用持久化轻量级数据，并对其修改和查询。</p>    <p>数据存储形式为键值对，键的类型为字符串型，值的存储数据类型包括number、string、boolean、bigint以及可序列化的object。</p>    <p>共享用户首选项的持久化文件存储在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/application-context-stage#获取应用文件路径" target="_blank">preferencesDir</a>路径下，创建preferences对象前，需要保证preferencesDir路径可读写。持久化文件存储路径中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-contextconstant#areamode">加密等级</a>会影响文件的可读写状态，路径访问限制详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory#应用文件目录与应用文件路径" target="_blank">应用文件目录与应用文件路径</a>。</p>    <p>共享用户首选项可以在ArkTS并发实例间（包括主线程、TaskPool&amp;Worker工作线程）传递，传递的行为是引用传递，性能优于普通的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-preferences">用户首选项</a>，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/sendable-guide" target="_blank">Sendable使用场景</a>。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 12开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>      <p>共享用户首选项无法保证进程并发安全，会有文件损坏和数据丢失的风险，不支持在多进程场景下使用。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendablePreferences } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="常量" device-type="phone,2in1,tablet,wearable,tv">常量<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="常量" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.5.1.1" width="25%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.5.1.3" width="25%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">MAX_KEY_LENGTH</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Key的最大长度限制为1024个字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">MAX_VALUE_LENGTH</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Value的最大长度限制为16MB。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="sendablepreferencesgetpreferences" device-type="phone,2in1,tablet,wearable,tv">sendablePreferences.getPreferences<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendablepreferencesgetpreferences" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreferences(context: Context, options: Options): Promise&lt;Preferences&gt;</p>     <p>获取Preferences实例，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#options">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与Preferences实例相关的配置选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#preferences">Preferences</a>&gt;</td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回Preferences实例。</p>          <p>该实例继承<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">ISendable</a>，可以在ArkTS并发实例间（包括主线程、TaskPool&amp;Worker工作线程）传递，传递的行为是引用传递，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/sendable-guide" target="_blank">Sendable使用场景</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501001</td>         <td class="cellrowborder" width="50%">The operations is supported in stage mode only.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501002</td>         <td class="cellrowborder" width="50%">Invalid dataGroupId.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">preferences</span>: sendablePreferences.<span class="hljs-property">Preferences</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: sendablePreferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>    <span class="hljs-keyword">let</span> promise = sendablePreferences.<span class="hljs-title function_">getPreferences</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, options);</li><li>    promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-built_in">object</span>: sendablePreferences.Preferences</span>) =&gt;</span> {</li><li>      preferences = <span class="hljs-built_in">object</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in getting preferences."</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get preferences. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="sendablepreferencesgetpreferencessync" device-type="phone,2in1,tablet,wearable,tv">sendablePreferences.getPreferencesSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendablepreferencesgetpreferencessync" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPreferencesSync(context: Context, options: Options): Preferences</p>     <p>获取Preferences实例，此为同步接口。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#options">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与Preferences实例相关的配置选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#preferences">Preferences</a></td>         <td class="cellrowborder" width="50%">          <p>返回Preferences实例。</p>          <p>该实例继承<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">ISendable</a>，可以在ArkTS并发实例间（包括主线程、TaskPool&amp;Worker工作线程）传递，传递的行为是引用传递，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/sendable-guide" target="_blank">Sendable使用场景</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501001</td>         <td class="cellrowborder" width="50%">The operations is supported in stage mode only.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501002</td>         <td class="cellrowborder" width="50%">Invalid dataGroupId.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">preferences</span>: sendablePreferences.<span class="hljs-property">Preferences</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: sendablePreferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>    preferences = sendablePreferences.<span class="hljs-title function_">getPreferencesSync</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, options);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="sendablepreferencesdeletepreferences" device-type="phone,2in1,tablet,wearable,tv">sendablePreferences.deletePreferences<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendablepreferencesdeletepreferences" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deletePreferences(context: Context, options: Options): Promise&lt;void&gt;</p>     <p>从缓存中删除指定的Preferences实例，若Preferences实例有对应的持久化文件，则同时删除其持久化文件。使用Promise异步回调。</p>     <p>调用该接口后，不建议再使用旧的Preferences实例进行数据操作，否则会导致数据一致性问题。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#options">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与Preferences实例相关的配置选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500010</td>         <td class="cellrowborder" width="50%">Failed to delete the user preferences persistence file.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501001</td>         <td class="cellrowborder" width="50%">The operations is supported in stage mode only.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501002</td>         <td class="cellrowborder" width="50%">Invalid dataGroupId.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: sendablePreferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>    <span class="hljs-keyword">let</span> promise = sendablePreferences.<span class="hljs-title function_">deletePreferences</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, options);</li><li>    promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting preferences."</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete preferences. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="sendablepreferencesremovepreferencesfromcache" device-type="phone,2in1,tablet,wearable,tv">sendablePreferences.removePreferencesFromCache<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendablepreferencesremovepreferencesfromcache" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removePreferencesFromCache(context: Context, options: Options): Promise&lt;void&gt;</p>     <p>从缓存中移除指定的Preferences实例，使用Promise异步回调。</p>     <p>应用首次调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesgetpreferences">getPreferences</a>接口获取某个Preferences实例后，该实例会被缓存起来，后续调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesgetpreferences">getPreferences</a>时不会再次从持久化文件中读取，直接从缓存中获取Preferences实例。调用此接口移除缓存中的实例之后，再次getPreferences将会重新读取持久化文件，生成新的Preferences实例。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#options">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与Preferences实例相关的配置选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501001</td>         <td class="cellrowborder" width="50%">The operations is supported in stage mode only.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501002</td>         <td class="cellrowborder" width="50%">Invalid dataGroupId.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: sendablePreferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>    <span class="hljs-keyword">let</span> promise = sendablePreferences.<span class="hljs-title function_">removePreferencesFromCache</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, options);</li><li>    promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in removing preferences."</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove preferences. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="sendablepreferencesremovepreferencesfromcachesync" device-type="phone,2in1,tablet,wearable,tv">sendablePreferences.removePreferencesFromCacheSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendablepreferencesremovepreferencesfromcachesync" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removePreferencesFromCacheSync(context: Context, options: Options):void</p>     <p>从缓存中移除指定的Preferences实例，此为同步接口。</p>     <p>应用首次调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesgetpreferences">getPreferences</a>接口获取某个Preferences实例后，该实例会被缓存起来，后续调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesgetpreferences">getPreferences</a>时不会再次从持久化文件中读取，直接从缓存中获取Preferences实例。调用此接口移除缓存中的实例之后，再次getPreferences将会重新读取持久化文件，生成新的Preferences实例。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#options">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与Preferences实例相关的配置选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501001</td>         <td class="cellrowborder" width="50%">The operations is supported in stage mode only.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15501002</td>         <td class="cellrowborder" width="50%">Invalid dataGroupId.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: sendablePreferences.<span class="hljs-property">Options</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">'myStore'</span> };</li><li>    sendablePreferences.<span class="hljs-title function_">removePreferencesFromCacheSync</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, options);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="options" device-type="phone,2in1,tablet,wearable,tv">Options<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="options" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>Preferences实例配置选项。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">name</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">Preferences实例的名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dataGroupId</td>         <td class="cellrowborder" width="20%">string|null</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>应用组ID，需要向应用市场获取，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ime-kit-security#section4219152220459" target="_blank">dataGroupId申请流程</a>。基于dataGroupId的数据共享支持两种场景：1.同一应用的不同进程间共享，只支持三方应用中输入法和输入法的扩展场景使用；2.不同应用间的数据共享，只支持系统应用使用。</p>          <p>为可选参数。指定在此dataGroupId对应的沙箱路径下创建Preferences实例。当此参数不填时，默认在本应用沙箱目录下创建Preferences实例。</p>          <p><strong>模型约束：</strong> 此属性仅在Stage模型下可用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="preferences" device-type="phone,2in1,tablet,wearable,tv">Preferences<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="preferences" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>Preferences继承自<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">ISendable</a>，可以在ArkTS并发实例间（包括主线程、TaskPool&amp;Worker工作线程）传递，传递的行为是引用传递，提供获取和修改存储数据的接口。</p>     <p>下列接口都需先使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesgetpreferences">sendablePreferences.getPreferences</a>获取到Preferences实例，再通过此实例调用对应接口。</p>    </div>    <div class="tiledSection">     <h3 id="get" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">get<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="get" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>get(key: string, defValue: lang.ISendable): Promise&lt;lang.ISendable&gt;</p>     <p>从缓存的Preferences实例中获取键对应的值，如果值为null或者非默认值类型，返回默认数据defValue，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要获取的存储Key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">defValue</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">lang.ISendable</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">默认返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">lang.ISendable</a>&gt;</td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回键对应的值。</p>          <p>该实例继承<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">ISendable</a>，可以在ArkTS并发实例间（包括主线程、TaskPool&amp;Worker工作线程）传递，传递的行为是引用传递，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/sendable-guide" target="_blank">Sendable使用场景</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { lang } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">get</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'default'</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: lang.ISendable</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> dataStr = data <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting value of 'startup'. Data: <span class="hljs-subst">${dataStr}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get value of 'startup'. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getsync" device-type="phone,2in1,tablet,wearable,tv">getSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSync(key: string, defValue: lang.ISendable): lang.ISendable</p>     <p>从缓存的Preferences实例中获取键对应的值，如果值为null或者非默认值类型，返回默认数据defValue，此为同步接口。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要获取的存储Key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">defValue</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">lang.ISendable</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">默认返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">lang.ISendable</a></td>         <td class="cellrowborder" width="50%">          <p>返回键对应的值。</p>          <p>该实例继承<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">ISendable</a>，可以在ArkTS并发实例间（包括主线程、TaskPool&amp;Worker工作线程）传递，传递的行为是引用传递，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/sendable-guide" target="_blank">Sendable使用场景</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { lang } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">value</span>: lang.<span class="hljs-property">ISendable</span> = preferences.<span class="hljs-title function_">getSync</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'default'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getall" device-type="phone,2in1,tablet,wearable,tv">getAll<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getall" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAll(): Promise&lt;lang.ISendable&gt;</p>     <p>获取缓存的Preferences实例中的所有键值数据。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">lang.ISendable</a>&gt;</td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回所有包含的键值数据。</p>          <p>该对象继承<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">ISendable</a>，可以在ArkTS并发实例间（包括主线程、TaskPool&amp;Worker工作线程）传递，传递的行为是引用传递，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/sendable-guide" target="_blank">Sendable使用场景</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { lang } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">getAll</span>();</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">keyValues: lang.ISendable</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> value <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(keyValues)) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getAll "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));</li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get all key-values. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getallsync" device-type="phone,2in1,tablet,wearable,tv">getAllSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getallsync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAllSync(): lang.ISendable</p>     <p>获取缓存的Preferences实例中的所有键值数据，此为同步接口。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">lang.ISendable</a></td>         <td class="cellrowborder" width="50%">          <p>返回所有包含的键值数据。</p>          <p>该对象继承<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">ISendable</a>，可以在ArkTS并发实例间（包括主线程、TaskPool&amp;Worker工作线程）传递，传递的行为是引用传递，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/sendable-guide" target="_blank">Sendable使用场景</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { lang } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">keyValues</span>: lang.<span class="hljs-property">ISendable</span> = preferences.<span class="hljs-title function_">getAllSync</span>();</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> value <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(keyValues)) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getAll "</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="put" device-type="phone,2in1,tablet,wearable,tv">put<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="put" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>put(key: string, value: lang.ISendable): Promise&lt;void&gt;</p>     <p>将数据写入缓存的Preferences实例中，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#flush">flush</a>将Preferences实例持久化，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当value中包含非UTF-8格式的字符串时，请使用Uint8Array类型存储，否则会造成持久化文件出现格式错误造成文件损坏。</p>       <p>当对应的键已经存在时，put()方法会覆盖其值。可以使用hasSync()方法检查是否存在对应键值对。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要修改的存储的Key，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">lang.ISendable</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">存储的新值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">put</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'auto'</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in putting value of 'startup'."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to put value of 'startup'. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="putsync" device-type="phone,2in1,tablet,wearable,tv">putSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="putsync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>putSync(key: string, value: lang.ISendable): void</p>     <p>将数据写入缓存的Preferences实例中，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#flush">flush</a>将Preferences实例持久化，此为同步接口。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当value中包含非UTF-8格式的字符串时，请使用Uint8Array类型存储，否则会造成持久化文件出现格式错误造成文件损坏。</p>       <p>当对应的键已经存在时，putSync()方法会覆盖其值。可以使用hasSync()方法检查是否存在对应键值对。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要修改的存储的Key，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">lang.ISendable</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">存储的新值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>preferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'auto'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="has" device-type="phone,2in1,tablet,wearable,tv">has<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="has" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>has(key: string): Promise&lt;boolean&gt;</p>     <p>检查缓存的Preferences实例中是否包含名为给定Key的存储键值对，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要检查的存储key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回Preferences实例是否包含给定key的存储键值对，true表示存在，false表示不存在。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">has</span>(<span class="hljs-string">'startup'</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (val) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key 'startup' is contained."</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"The key 'startup' does not contain."</span>);</li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to check the key 'startup'. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="hassync" device-type="phone,2in1,tablet,wearable,tv">hasSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hassync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>hasSync(key: string): boolean</p>     <p>检查缓存的Preferences实例中是否包含名为给定Key的存储键值对，此为同步接口。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要检查的存储key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回Preferences实例是否包含给定key的存储键值对，true表示存在，false表示不存在。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">isExist</span>: <span class="hljs-built_in">boolean</span> = preferences.<span class="hljs-title function_">hasSync</span>(<span class="hljs-string">'startup'</span>);</li><li><span class="hljs-keyword">if</span> (isExist) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key 'startup' is contained."</span>);</li><li>} <span class="hljs-keyword">else</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"The key 'startup' does not contain."</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="delete" device-type="phone,2in1,tablet,wearable,tv">delete<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delete" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(key: string): Promise&lt;void&gt;</p>     <p>从缓存的Preferences实例中删除名为给定Key的存储键值对，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#flush">flush</a>将Preferences实例持久化，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要删除的存储key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'startup'</span>);</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in deleting the key 'startup'."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete the key 'startup'. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="deletesync" device-type="phone,2in1,tablet,wearable,tv">deleteSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletesync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteSync(key: string): void</p>     <p>从缓存的Preferences实例中删除名为给定Key的存储键值对，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#flush">flush</a>将Preferences实例持久化，此为同步接口。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要删除的存储key名称，不能为空，最大长度限制为<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#常量">MAX_KEY_LENGTH</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>preferences.<span class="hljs-title function_">deleteSync</span>(<span class="hljs-string">'startup'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="flush" device-type="phone,2in1,tablet,wearable,tv">flush<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="flush" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>flush(): Promise&lt;void&gt;</p>     <p>将缓存的Preferences实例中的数据异步存储到共享用户首选项的持久化文件中，使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当数据未修改或修改后的数据与缓存数据一致时，不会刷新持久化文件。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">flush</span>();</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to flush. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="flushsync14" device-type="phone,2in1,tablet,wearable,tv">flushSync<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="flushsync14" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>flushSync(): void</p>     <p>将缓存的Preferences实例中的数据存储到共享用户首选项的持久化文件中。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当数据未修改或修改后的数据与缓存数据一致时，不会刷新持久化文件。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>preferences.<span class="hljs-title function_">flushSync</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="clear" device-type="phone,2in1,tablet,wearable,tv">clear<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clear" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clear(): Promise&lt;void&gt;</p>     <p>清除缓存的Preferences实例中的所有数据，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#flush">flush</a>将Preferences实例持久化，使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> promise = preferences.<span class="hljs-title function_">clear</span>();</li><li>promise.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in clearing."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to clear. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="clearsync" device-type="phone,2in1,tablet,wearable,tv">clearSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearsync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearSync(): void</p>     <p>清除缓存的Preferences实例中的所有数据，可通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#flush">flush</a>将Preferences实例持久化，此为同步接口。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>preferences.<span class="hljs-title function_">clearSync</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="onchange" device-type="phone,2in1,tablet,wearable,tv">on('change')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onchange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'change', callback: Callback&lt;string&gt;): void</p>     <p>订阅数据变更，订阅的Key的值发生变更后，在执行<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#flush">flush</a>方法后，触发callback回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesremovepreferencesfromcache">removePreferencesFromCache</a>或者<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesdeletepreferences">deletePreferences</a>后，订阅的数据变更会主动取消订阅，在重新<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesgetpreferences">getPreferences</a>后需要重新订阅数据变更。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件类型，固定值'change'，表示数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回发生变更的Key。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">observer</span> = (<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key "</span> + key + <span class="hljs-string">" changed."</span>);</li><li>};</li><li>preferences.<span class="hljs-title function_">on</span>(<span class="hljs-string">'change'</span>, observer);</li><li>preferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'manual'</span>);</li><li>preferences.<span class="hljs-title function_">flush</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to flush. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="onmultiprocesschange" device-type="phone,2in1,tablet,wearable,tv">on('multiProcessChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onmultiprocesschange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'multiProcessChange', callback: Callback&lt;string&gt;): void</p>     <p>订阅进程间数据变更，多个进程持有同一个首选项文件时，在任意一个进程（包括本进程）执行<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#flush">flush</a>方法，持久化文件发生变更后，触发callback回调。</p>     <p>本接口提供给申请了<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#options">dataGroupId</a>的应用进行使用，未申请的应用不推荐使用，多进程操作可能会损坏持久化文件，导致数据丢失。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>同一持久化文件在当前进程订阅进程间数据变更的最大数量为50次，超过最大限制后会订阅失败。建议在触发callback回调后及时取消订阅。</p>       <p>当调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesremovepreferencesfromcache">removePreferencesFromCache</a>或者<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesdeletepreferences">deletePreferences</a>后，订阅的数据变更会主动取消订阅，在重新<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesgetpreferences">getPreferences</a>后需要重新订阅数据变更。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件类型，固定值'multiProcessChange'，表示多进程间的数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回发生变更的Key。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500019</td>         <td class="cellrowborder" width="50%">Failed to obtain the subscription service.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">observer</span> = (<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key "</span> + key + <span class="hljs-string">" changed."</span>);</li><li>};</li><li>preferences.<span class="hljs-title function_">on</span>(<span class="hljs-string">'multiProcessChange'</span>, observer);</li><li>preferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'manual'</span>);</li><li>preferences.<span class="hljs-title function_">flush</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to flush. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="ondatachange" device-type="phone,2in1,tablet,wearable,tv">on('dataChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondatachange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'dataChange', keys: Array&lt;string&gt;, callback: Callback&lt;lang.ISendable&gt;): void</p>     <p>精确订阅数据变更，只有被订阅的key值发生变更后，在执行<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#flush">flush</a>方法后，触发callback回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesremovepreferencesfromcache">removePreferencesFromCache</a>或者<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesdeletepreferences">deletePreferences</a>后，订阅的数据变更会主动取消订阅，在重新<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#sendablepreferencesgetpreferences">getPreferences</a>后需要重新订阅数据变更。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件类型，固定值'dataChange'，表示精确的数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">keys</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要订阅的key集合。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">lang.ISendable</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。回调支持返回多个键值对，其中键为发生变更的订阅key，值为变更后的数据：支持number、string、boolean、bigint以及可序列化的object。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { lang } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">observer</span> = (<span class="hljs-params">data: lang.ISendable</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`observer : <span class="hljs-subst">${data}</span>`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> keys = [<span class="hljs-string">'name'</span>, <span class="hljs-string">'age'</span>];</li><li>preferences.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, keys, observer);</li><li>preferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'xiaohong'</span>);</li><li>preferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'weight'</span>, <span class="hljs-number">125</span>);</li><li>preferences.<span class="hljs-title function_">flush</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to flush. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offchange" device-type="phone,2in1,tablet,wearable,tv">off('change')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offchange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'change', callback?: Callback&lt;string&gt;): void</p>     <p>取消订阅数据变更。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件类型，固定值'change'，表示数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消的回调函数，不填写则全部取消。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">observer</span> = (<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key "</span> + key + <span class="hljs-string">" changed."</span>);</li><li>};</li><li>preferences.<span class="hljs-title function_">on</span>(<span class="hljs-string">'change'</span>, observer);</li><li>preferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'auto'</span>);</li><li>preferences.<span class="hljs-title function_">flush</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>  preferences.<span class="hljs-title function_">off</span>(<span class="hljs-string">'change'</span>, observer);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to flush. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offmultiprocesschange" device-type="phone,2in1,tablet,wearable,tv">off('multiProcessChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offmultiprocesschange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'multiProcessChange', callback?: Callback&lt;string&gt;): void</p>     <p>取消订阅进程间数据变更。</p>     <p>本接口提供给申请了<a href="/consumer/cn/doc/harmonyos-references/js-apis-data-sendablepreferences#options">dataGroupId</a>的应用进行使用，未申请的应用不推荐使用，多进程操作可能会损坏持久化文件，导致数据丢失。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件类型，固定值'multiProcessChange'，表示多进程间的数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消的回调函数，不填写则全部取消。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">observer</span> = (<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"The key "</span> + key + <span class="hljs-string">" changed."</span>);</li><li>};</li><li>preferences.<span class="hljs-title function_">on</span>(<span class="hljs-string">'multiProcessChange'</span>, observer);</li><li>preferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'startup'</span>, <span class="hljs-string">'auto'</span>);</li><li>preferences.<span class="hljs-title function_">flush</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>  preferences.<span class="hljs-title function_">off</span>(<span class="hljs-string">'multiProcessChange'</span>, observer);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to flush. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offdatachange" device-type="phone,2in1,tablet,wearable,tv">off('dataChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdatachange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'dataChange', keys: Array&lt;string&gt;, callback?: Callback&lt;lang.ISendable&gt;): void</p>     <p>取消精确订阅数据变更。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.DistributedDataManager.Preferences.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件类型，固定值'dataChange'，表示精确的数据变更。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">keys</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要取消订阅的key集合，当keys为空数组时，表示取消订阅全部key；当keys为非空数组时，表示只取消订阅key集合中的key。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">lang.ISendable</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消的回调函数，若callback不填写，表示所有的callback都需要处理；若callback填写，表示只处理该callback。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-preferences">用户首选项错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1. Mandatory parameters are left unspecified;2. Incorrect parameter types;3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15500000</td>         <td class="cellrowborder" width="50%">Inner error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fih-c106="" class="highlight-div"><div _ngcontent-fih-c106="" class="highlight-div-header"><div _ngcontent-fih-c106="" class="highlight-div-header-left"><div _ngcontent-fih-c106="" class="handle-button expand-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fih-c106="" class="highlight-div-header-right"><div _ngcontent-fih-c106="" class="handle-button ai-button"></div><div _ngcontent-fih-c106="" class="handle-button line-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fih-c106="" class="handle-button theme-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fih-c106="" class="handle-button copy-button"><div _ngcontent-fih-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fih-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { lang } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">observer</span> = (<span class="hljs-params">data: lang.ISendable</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`observer : <span class="hljs-subst">${data}</span>`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> keys = [<span class="hljs-string">'name'</span>, <span class="hljs-string">'age'</span>];</li><li>preferences.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dataChange'</span>, keys, observer);</li><li>preferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'xiaohong'</span>);</li><li>preferences.<span class="hljs-title function_">putSync</span>(<span class="hljs-string">'weight'</span>, <span class="hljs-number">125</span>);</li><li>preferences.<span class="hljs-title function_">flush</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in flushing."</span>);</li><li>  preferences.<span class="hljs-title function_">off</span>(<span class="hljs-string">'dataChange'</span>, keys, observer);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to flush. code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>   </div>   <div></div></div>