<h1 _ngcontent-ots-c119="" class="doc-title ng-star-inserted" title="@ohos.distributedDeviceManager (设备管理)"> @ohos.distributedDeviceManager (设备管理) </h1>

<div _ngcontent-ots-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本模块提供分布式设备管理能力。</p>    <p>应用可调用接口实现如下功能：</p>    <ul>     <li>注册和解除注册设备上下线变化监听。</li>     <li>发现周边不可信设备。</li>     <li>认证和取消认证设备。</li>     <li>查询可信设备列表。</li>     <li>查询本地设备信息，包括设备名称，设备类型和设备标识等。</li>    </ul>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 10开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="distributeddevicemanagercreatedevicemanager" device-type="phone,2in1,tablet,wearable,tv">distributedDeviceManager.createDeviceManager<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="distributeddevicemanagercreatedevicemanager" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createDeviceManager(bundleName: string): DeviceManager</p>     <p>创建一个设备管理实例。设备管理实例是分布式设备管理方法的调用入口。用于获取可信设备和本地设备的相关信息。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">bundleName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指示应用程序的Bundle名称。长度范围1~255字符。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicemanager">DeviceManager</a></td>         <td class="cellrowborder" width="50%">返回设备管理器对象实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'createDeviceManager errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="distributeddevicemanagerreleasedevicemanager" device-type="phone,2in1,tablet,wearable,tv">distributedDeviceManager.releaseDeviceManager<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="distributeddevicemanagerreleasedevicemanager" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>releaseDeviceManager(deviceManager: DeviceManager): void</p>     <p>设备管理实例不再使用后，通过该方法释放DeviceManager实例。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceManager</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicemanager">DeviceManager</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设备管理器对象实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  distributedDeviceManager.<span class="hljs-title function_">releaseDeviceManager</span>(dmInstance);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'release device manager errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="devicebasicinfo" device-type="phone,2in1,tablet,wearable,tv">DeviceBasicInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="devicebasicinfo" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>分布式设备基本信息。</p>     <p><strong>系统能力</strong>：以下各项对应的系统能力均为SystemCapability.DistributedHardware.DeviceManager</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">deviceId</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">设备标识符。实际值为udid-hash与appid和盐值基于sha256方式进行混淆后的值。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">deviceName</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">设备名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">deviceType</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#getdevicetype">设备类型</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">networkId</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设备网络标识。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="devicestatechange" device-type="phone,2in1,tablet,wearable,tv">DeviceStateChange<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="devicestatechange" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示设备状态。</p>     <p><strong>系统能力</strong>：以下各项对应的系统能力均为SystemCapability.DistributedHardware.DeviceManager</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">UNKNOWN</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">设备物理上线，此时状态未知，在状态更改为可用之前，分布式业务无法使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">AVAILABLE</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">设备可用状态，表示设备间信息已在分布式数据中同步完成，可以运行分布式业务。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">UNAVAILABLE</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">设备物理下线，此时状态未知。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="devicemanager" device-type="phone,2in1,tablet,wearable,tv">DeviceManager<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="devicemanager" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>设备管理实例，用于获取可信设备和本地设备的相关信息。在调用DeviceManager的方法前，需要先通过createDeviceManager构建一个DeviceManager实例dmInstance。</p>    </div>    <div class="tiledSection">     <h3 id="getavailabledevicelistsync" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">getAvailableDeviceListSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavailabledevicelistsync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAvailableDeviceListSync(): Array&lt;DeviceBasicInfo&gt;</p>     <p>同步获取所有可信设备列表。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicebasicinfo">DeviceBasicInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">返回可信设备列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceInfoList</span>: <span class="hljs-title class_">Array</span>&lt;distributedDeviceManager.<span class="hljs-property">DeviceBasicInfo</span>&gt; = dmInstance.<span class="hljs-title function_">getAvailableDeviceListSync</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAvailableDeviceListSync errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getavailabledevicelist" device-type="phone,2in1,tablet,wearable,tv">getAvailableDeviceList<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavailabledevicelist" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAvailableDeviceList(callback:AsyncCallback&lt;Array&lt;DeviceBasicInfo&gt;&gt;): void</p>     <p>获取所有可信设备列表。使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicebasicinfo">DeviceBasicInfo</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">获取所有可信设备列表的回调，返回设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">getAvailableDeviceList</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">Array</span>&lt;distributedDeviceManager.DeviceBasicInfo&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAvailableDeviceList errCode:'</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + err.<span class="hljs-property">message</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get available device info: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAvailableDeviceList errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getavailabledevicelist-1" device-type="phone,2in1,tablet,wearable,tv">getAvailableDeviceList<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavailabledevicelist-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAvailableDeviceList(): Promise&lt;Array&lt;DeviceBasicInfo&gt;&gt;</p>     <p>获取所有可信设备列表。使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicebasicinfo">DeviceBasicInfo</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，用于获取异步返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>dmInstance.<span class="hljs-title function_">getAvailableDeviceList</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">Array</span>&lt;distributedDeviceManager.DeviceBasicInfo&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get available device info: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAvailableDeviceList errCode:'</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + err.<span class="hljs-property">message</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getlocaldevicenetworkid" device-type="phone,2in1,tablet,wearable,tv">getLocalDeviceNetworkId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getlocaldevicenetworkid" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getLocalDeviceNetworkId(): string</p>     <p>获取本地设备网络标识。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回本地设备网络标识。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceNetworkId</span>: <span class="hljs-built_in">string</span> = dmInstance.<span class="hljs-title function_">getLocalDeviceNetworkId</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'local device networkId: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(deviceNetworkId));</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getLocalDeviceNetworkId errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getlocaldevicename" device-type="phone,2in1,tablet,wearable,tv">getLocalDeviceName<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getlocaldevicename" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getLocalDeviceName(): string</p>     <p>获取本地设备名称。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回本地设备名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceName</span>: <span class="hljs-built_in">string</span> = dmInstance.<span class="hljs-title function_">getLocalDeviceName</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'local device name: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(deviceName));</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getLocalDeviceName errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getlocaldevicetype" device-type="phone,2in1,tablet,wearable,tv">getLocalDeviceType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getlocaldevicetype" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getLocalDeviceType(): number</p>     <p>获取本地设备类型。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">          <p>返回本地设备类型。目前仅支持以下设备类型：</p>          <p>-0: UNKNOWN。</p>          <p>-14: PHONE。</p>          <p>-17: TABLET。</p>          <p>-156: TV。</p>          <p>-131: CAR。</p>          <p>-109: WATCH。</p>          <p>-8: WiFiCamera。</p>          <p>-2562: SMART_DISPLAY。</p>          <p>-2607: 2IN1。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceType</span>: <span class="hljs-built_in">number</span> = dmInstance.<span class="hljs-title function_">getLocalDeviceType</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'local device type: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(deviceType));</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getLocalDeviceType errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getlocaldeviceid" device-type="phone,2in1,tablet,wearable,tv">getLocalDeviceId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getlocaldeviceid" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getLocalDeviceId(): string</p>     <p>获取本地设备id，实际值为udid-hash与appid和盐值基于sha256方式进行混淆后的值。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回本地设备id。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceId</span>: <span class="hljs-built_in">string</span> = dmInstance.<span class="hljs-title function_">getLocalDeviceId</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'local device id: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(deviceId));</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getLocalDeviceId errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getdevicename" device-type="phone,2in1,tablet,wearable,tv">getDeviceName<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdevicename" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDeviceName(networkId: string): string</p>     <p>通过指定设备的网络标识获取该设备名称。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">networkId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设备的网络标识。长度范围1~255字符。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回指定设备名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified networkId is greater than 255.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 设备网络标识，可以从可信设备列表中获取</span></li><li>  <span class="hljs-keyword">let</span> networkId = <span class="hljs-string">'xxxxxxx'</span>;</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceName</span>: <span class="hljs-built_in">string</span> = dmInstance.<span class="hljs-title function_">getDeviceName</span>(networkId);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device name: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(deviceName));</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getDeviceName errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="getdevicetype" device-type="phone,2in1,tablet,wearable,tv">getDeviceType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdevicetype" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDeviceType(networkId: string): number</p>     <p>通过指定设备的网络标识获取该设备类型。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">networkId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设备的网络标识。长度范围1~255字符。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">          <p>返回指定设备类型。目前仅支持以下设备类型：</p>          <p>-0: UNKNOWN。</p>          <p>-14: PHONE。</p>          <p>-17: TABLET。</p>          <p>-156: TV。</p>          <p>-131: CAR。</p>          <p>-109: WATCH。</p>          <p>-8: WiFiCamera。</p>          <p>-2562: SMART_DISPLAY。</p>          <p>-2607: 2IN1。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified networkId is greater than 255.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 设备网络标识，可以从可信设备列表中获取</span></li><li>  <span class="hljs-keyword">let</span> networkId = <span class="hljs-string">'xxxxxxx'</span>;</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">deviceType</span>: <span class="hljs-built_in">number</span> = dmInstance.<span class="hljs-title function_">getDeviceType</span>(networkId);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'device type: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(deviceType));</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getDeviceType errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="startdiscovering" device-type="phone,2in1,tablet,wearable,tv">startDiscovering<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="startdiscovering" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startDiscovering(discoverParam: {[key: string]: Object;} , filterOptions?: {[key: string]: Object;} ): void</p>     <p>发现周边设备。发现状态持续两分钟，超过两分钟，会停止发现，最大发现数量99个。wifi场景要求同局域网。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">discoverParam</td>         <td class="cellrowborder" width="25%">{[key: string]: Object;}</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>发现标识。 标识发现的目标类型。</p>          <p>discoverTargetType: 发现目标默认为设备，值为1。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">filterOptions</td>         <td class="cellrowborder" width="25%">{[key: string]: Object;}</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>发现设备过滤信息。可选，默认为undefined，发现未上线设备。会携带以下key值：</p>          <p>availableStatus(0-1)：仅发现设备可信，值为0表示设备不可信。</p>          <p>-0：设备离线，客户端需要通过调用bindTarget绑定设备。</p>          <p>-1：设备已在线，客户可以进行连接。</p>          <p>discoverDistance(0-100)：发现距离本地一定距离内的设备，单位为cm。wifi场景不传该参数。</p>          <p>authenticationStatus(0-1)：根据不同的认证状态发现设备：</p>          <p>-0：设备未认证。</p>          <p>-1：设备已认证。</p>          <p>authorizationType(0-2)：根据不同的授权类型发现设备：</p>          <p>-0：根据临时协商的会话密钥认证的设备。</p>          <p>-1：基于同账号密钥进行身份验证的设备。</p>          <p>-2：基于不同账号凭据密钥认证的设备。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600104</td>         <td class="cellrowborder" width="50%">Discovery unavailable.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">interface</span> <span class="hljs-title class_">DiscoverParam</span> {</li><li>  <span class="hljs-attr">discoverTargetType</span>: <span class="hljs-built_in">number</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">interface</span> <span class="hljs-title class_">FilterOptions</span> {</li><li>  <span class="hljs-attr">availableStatus</span>: <span class="hljs-built_in">number</span>;</li><li>  <span class="hljs-attr">discoverDistance</span>: <span class="hljs-built_in">number</span>;</li><li>  <span class="hljs-attr">authenticationStatus</span>: <span class="hljs-built_in">number</span>;</li><li>  <span class="hljs-attr">authorizationType</span>: <span class="hljs-built_in">number</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">discoverParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = {</li><li>  <span class="hljs-string">'discoverTargetType'</span>: <span class="hljs-number">1</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">filterOptions</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = {</li><li>  <span class="hljs-string">'availableStatus'</span>: <span class="hljs-number">0</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">startDiscovering</span>(discoverParam, filterOptions); <span class="hljs-comment">// 当有设备发现时，通过discoverSuccess回调通知给应用程序</span></li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'startDiscovering errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="stopdiscovering" device-type="phone,2in1,tablet,wearable,tv">stopDiscovering<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stopdiscovering" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stopDiscovering(): void</p>     <p>停止发现周边设备。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">stopDiscovering</span>();</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'stopDiscovering errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="bindtarget" device-type="phone,2in1,tablet,wearable,tv">bindTarget<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="bindtarget" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>bindTarget(deviceId: string, bindParam: {[key: string]: Object;} , callback: AsyncCallback&lt;{deviceId: string;}&gt;): void</p>     <p>认证设备。使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设备标识。长度范围1~255字符。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">bindParam</td>         <td class="cellrowborder" width="25%">{[key: string]: Object;}</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>认证参数。由开发者自行决定传入的键值对。默认会携带以下key值：</p>          <p>bindType 此值是绑定的类型，必填。</p>          <p>-1：PIN码。</p>          <p>targetPkgName 绑定目标的包名。</p>          <p>appName 尝试绑定目标的应用程序名称。</p>          <p>appOperation 应用程序要绑定目标的原因。</p>          <p>customDescription 操作的详细说明。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;{deviceId: string; }&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证结果回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified deviceId is greater than 255.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600103</td>         <td class="cellrowborder" width="50%">Authentication unavailable.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Data</span> {</li><li>  <span class="hljs-attr">deviceId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>}</li><li>
</li><li><span class="hljs-comment">// 认证的设备信息，可以从发现的结果中获取</span></li><li><span class="hljs-keyword">let</span> deviceId = <span class="hljs-string">'XXXXXXXX'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bindParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>&gt; = {</li><li>  <span class="hljs-string">'bindType'</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// 认证类型： 1 - 无账号PIN码认证</span></li><li>  <span class="hljs-string">'targetPkgName'</span>: <span class="hljs-string">'xxxx'</span>,</li><li>  <span class="hljs-string">'appName'</span>: <span class="hljs-string">'xxxx'</span>,</li><li>  <span class="hljs-string">'appOperation'</span>: <span class="hljs-string">'xxxx'</span>,</li><li>  <span class="hljs-string">'customDescription'</span>: <span class="hljs-string">'xxxx'</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">bindTarget</span>(deviceId, bindParam, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: Data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'bindTarget errCode:'</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + err.<span class="hljs-property">message</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'bindTarget result:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'bindTarget errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="unbindtarget" device-type="phone,2in1,tablet,wearable,tv">unbindTarget<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="unbindtarget" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unbindTarget(deviceId: string): void</p>     <p>解除认证设备。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deviceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设备标识。长度范围1~255字符。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-device-manager">设备管理错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified deviceId is greater than 255.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11600101</td>         <td class="cellrowborder" width="50%">Failed to execute the function.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> deviceId = <span class="hljs-string">'XXXXXXXX'</span>;</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">unbindTarget</span>(deviceId);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'unbindTarget errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="ondevicestatechange" device-type="phone,2in1,tablet,wearable,tv">on('deviceStateChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondevicestatechange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'deviceStateChange', callback: Callback&lt;{ action: DeviceStateChange; device: DeviceBasicInfo; }&gt;): void</p>     <p>注册设备状态回调，以便在设备状态发生变化时根据应用捆绑包名通知应用。使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册设备状态回调，固定为deviceStateChange。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;{ action: <a href="/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicestatechange">DeviceStateChange</a>; device: <a href="/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicebasicinfo">DeviceBasicInfo</a>; }&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指示要注册的设备状态回调，返回设备状态和设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified type is greater than 255.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Data</span> {</li><li>  <span class="hljs-attr">action</span>: distributedDeviceManager.<span class="hljs-property">DeviceStateChange</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">device</span>: distributedDeviceManager.<span class="hljs-property">DeviceBasicInfo</span> = {</li><li>    <span class="hljs-attr">deviceId</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">deviceName</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">deviceType</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">networkId</span>: <span class="hljs-string">''</span></li><li>  };</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'deviceStateChange'</span>, <span class="hljs-function">(<span class="hljs-params">data: Data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deviceStateChange on:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'deviceStateChange errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offdevicestatechange" device-type="phone,2in1,tablet,wearable,tv">off('deviceStateChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdevicestatechange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'deviceStateChange', callback?: Callback&lt;{ action: DeviceStateChange; device: DeviceBasicInfo; }&gt;): void</p>     <p>取消注册设备状态回调。使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">根据应用程序的包名取消注册设备状态回调，固定为deviceStateChange。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;{ action: <a href="/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicestatechange">DeviceStateChange</a>; device: <a href="/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicebasicinfo">DeviceBasicInfo</a>; }&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指示要取消注册的设备状态回调，返回设备状态和设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified type is greater than 255.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Data</span> {</li><li>  <span class="hljs-attr">action</span>: distributedDeviceManager.<span class="hljs-property">DeviceStateChange</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-attr">device</span>: distributedDeviceManager.<span class="hljs-property">DeviceBasicInfo</span> = {</li><li>    <span class="hljs-attr">deviceId</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">deviceName</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">deviceType</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">networkId</span>: <span class="hljs-string">''</span></li><li>  };</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">off</span>(<span class="hljs-string">'deviceStateChange'</span>, <span class="hljs-function">(<span class="hljs-params">data: Data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deviceStateChange'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'deviceStateChange errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="ondiscoversuccess" device-type="phone,2in1,tablet,wearable,tv">on('discoverSuccess')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondiscoversuccess" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'discoverSuccess', callback: Callback&lt;{ device: DeviceBasicInfo; }&gt;): void</p>     <p>注册发现设备成功回调监听。使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册设备发现回调，以便在发现周边设备时通知应用程序，固定为discoverSuccess。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;{ device: <a href="/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicebasicinfo">DeviceBasicInfo</a>; }&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册设备发现的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified type is greater than 255.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Data</span> {</li><li>  <span class="hljs-attr">device</span>: distributedDeviceManager.<span class="hljs-property">DeviceBasicInfo</span> = {</li><li>    <span class="hljs-attr">deviceId</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">deviceName</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">deviceType</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">networkId</span>: <span class="hljs-string">''</span></li><li>  };</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'discoverSuccess'</span>, <span class="hljs-function">(<span class="hljs-params">data: Data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'discoverSuccess:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'discoverSuccess errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offdiscoversuccess" device-type="phone,2in1,tablet,wearable,tv">off('discoverSuccess')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdiscoversuccess" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'discoverSuccess', callback?: Callback&lt;{ device: DeviceBasicInfo; }&gt;): void</p>     <p>取消注册设备发现成功回调。使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消注册设备发现回调，固定为discoverSuccess。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;{ device: <a href="/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager#devicebasicinfo">DeviceBasicInfo</a>; }&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指示要取消注册的设备发现回调，返回设备状态和设备信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified type is greater than 255.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Data</span> {</li><li>  <span class="hljs-attr">device</span>: distributedDeviceManager.<span class="hljs-property">DeviceBasicInfo</span> = {</li><li>    <span class="hljs-attr">deviceId</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">deviceName</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">deviceType</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">networkId</span>: <span class="hljs-string">''</span></li><li>  };</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">off</span>(<span class="hljs-string">'discoverSuccess'</span>, <span class="hljs-function">(<span class="hljs-params">data: Data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'discoverSuccess'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'discoverSuccess errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="ondevicenamechange" device-type="phone,2in1,tablet,wearable,tv">on('deviceNameChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondevicenamechange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'deviceNameChange', callback: Callback&lt;{ deviceName: string; }&gt;): void</p>     <p>注册设备名称变更回调，以便在设备名称改变时通知应用程序。使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册设备名称改变回调，以便在设备名称改变时通知应用程序，固定为deviceNameChange。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;{ deviceName: string;}&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册设备名称改变的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified type is greater than 255.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Data</span> {</li><li>  <span class="hljs-attr">deviceName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'deviceNameChange'</span>, <span class="hljs-function">(<span class="hljs-params">data: Data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deviceNameChange on:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'deviceNameChange errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offdevicenamechange" device-type="phone,2in1,tablet,wearable,tv">off('deviceNameChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdevicenamechange" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'deviceNameChange', callback?: Callback&lt;{ deviceName: string; }&gt;): void</p>     <p>取消注册设备名称变更回调监听。使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消注册设备名称改变回调，固定为deviceNameChange。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;{ deviceName: string;}&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指示要取消注册设备名称改变的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified type is greater than 255.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Data</span> {</li><li>  <span class="hljs-attr">deviceName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">off</span>(<span class="hljs-string">'deviceNameChange'</span>, <span class="hljs-function">(<span class="hljs-params">data: Data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deviceNameChange'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'deviceNameChange errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="ondiscoverfailure" device-type="phone,2in1,tablet,wearable,tv">on('discoverFailure')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondiscoverfailure" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'discoverFailure', callback: Callback&lt;{ reason: number; }&gt;): void</p>     <p>注册设备发现失败回调监听。使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册设备发现失败回调，以便在发现周边设备失败时通知应用程序，固定为discoverFailure。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;{ reason: number; }&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册设备发现失败的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified type is greater than 255.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Data</span> {</li><li>  <span class="hljs-attr">reason</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'discoverFailure'</span>, <span class="hljs-function">(<span class="hljs-params">data: Data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'discoverFailure on:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'discoverFailure errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offdiscoverfailure" device-type="phone,2in1,tablet,wearable,tv">off('discoverFailure')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdiscoverfailure" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'discoverFailure', callback?: Callback&lt;{ reason: number; }&gt;): void</p>     <p>取消注册设备发现失败回调。使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消注册设备发现失败回调，固定为discoverFailure。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;{ reason: number; }&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指示要取消注册的设备发现失败回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified type is greater than 255.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Data</span> {</li><li>  <span class="hljs-attr">reason</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">off</span>(<span class="hljs-string">'discoverFailure'</span>, <span class="hljs-function">(<span class="hljs-params">data: Data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'discoverFailure'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'discoverFailure errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="onservicedie" device-type="phone,2in1,tablet,wearable,tv">on('serviceDie')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onservicedie" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'serviceDie', callback?: Callback&lt;{}&gt;): void</p>     <p>注册设备管理服务死亡回调，以便在服务死亡时通知应用程序。使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册serviceDie回调，以便在devicemanager服务异常终止时通知应用程序，固定为serviceDie。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;{}&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">注册serviceDie的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified type is greater than 255.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'serviceDie'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'serviceDie on'</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'serviceDie errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offservicedie" device-type="phone,2in1,tablet,wearable,tv">off('serviceDie')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offservicedie" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'serviceDie', callback?: Callback&lt;{}&gt;): void</p>     <p>取消注册设备管理服务死亡回调。使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedHardware.DeviceManager</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消注册serviceDie回调，以便在devicemanager服务异常终止时通知应用程序，固定为serviceDie。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;{}&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">取消注册serviceDie的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下的错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter type; 3. Parameter verification failed; 4. The size of specified type is greater than 255.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ots-c106="" class="highlight-div"><div _ngcontent-ots-c106="" class="highlight-div-header"><div _ngcontent-ots-c106="" class="highlight-div-header-left"><div _ngcontent-ots-c106="" class="handle-button expand-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ots-c106="" class="highlight-div-header-right"><div _ngcontent-ots-c106="" class="handle-button ai-button"></div><div _ngcontent-ots-c106="" class="handle-button line-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ots-c106="" class="handle-button theme-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ots-c106="" class="handle-button copy-button"><div _ngcontent-ots-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ots-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dmInstance = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'ohos.samples.jsHelloWorld'</span>);</li><li>  dmInstance.<span class="hljs-title function_">off</span>(<span class="hljs-string">'serviceDie'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'serviceDie off'</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">e</span>: <span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'serviceDie errCode:'</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">',errMessage:'</span> + e.<span class="hljs-property">message</span>);</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>