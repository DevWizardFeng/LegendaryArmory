<h1 _ngcontent-tbk-c119="" class="doc-title ng-star-inserted" title="@ohos.distributedsched.abilityConnectionManager (应用多端协同管理)"> @ohos.distributedsched.abilityConnectionManager (应用多端协同管理) </h1>

<div _ngcontent-tbk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>abilityConnectionManager模块提供了应用协同接口管理能力。设备组网成功（需登录同账号、双端打开蓝牙）后，系统应用和三方应用可以跨设备拉起同应用的一个<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability">UIAbility</a>，拉起并连接成功后可实现跨设备数据传输（文本信息）。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 18开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanagercreateabilityconnectionsession" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.createAbilityConnectionSession<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanagercreateabilityconnectionsession" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>createAbilityConnectionSession(serviceName: string, context: Context, peerInfo: PeerInfo , connectOptions: ConnectOptions): number</p>     <p>创建应用间的协同会话。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET、ohos.permission.GET_NETWORK_INFO、ohos.permission.SET_NETWORK_INFO和ohos.permission.DISTRIBUTED_DATASYNC</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">serviceName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用设置的服务名称（两端必须一致），最大长度为256字符。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示应用上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">peerInfo</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#peerinfo">PeerInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">对端的协同信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">connectOptions</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#connectoptions">ConnectOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用设置的连接选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">成功创建的协同会话ID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <ol>      <li>       <p>在设备A上，应用需要主动调用createAbilityConnectionSession()接口创建协同会话并返回sessionId。</p>       <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager, distributedDeviceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dmClass</span>: distributedDeviceManager.<span class="hljs-property">DeviceManager</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">initDmClass</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    dmClass = distributedDeviceManager.<span class="hljs-title function_">createDeviceManager</span>(<span class="hljs-string">'com.example.remotephotodemo'</span>);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'createDeviceManager err: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getRemoteDeviceId</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> {</li><li>  <span class="hljs-title function_">initDmClass</span>();</li><li>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> dmClass === <span class="hljs-string">'object'</span> &amp;&amp; dmClass !== <span class="hljs-literal">null</span>) {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'getRemoteDeviceId begin'</span>);</li><li>    <span class="hljs-keyword">let</span> list = dmClass.<span class="hljs-title function_">getAvailableDeviceListSync</span>();</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (list) === <span class="hljs-string">'undefined'</span> || <span class="hljs-keyword">typeof</span> (list.<span class="hljs-property">length</span>) === <span class="hljs-string">'undefined'</span>) {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'getRemoteDeviceId err: list is null'</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (list.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'getRemoteDeviceId err: list is empty'</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">return</span> list[<span class="hljs-number">0</span>].<span class="hljs-property">networkId</span>;</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'getRemoteDeviceId err: dmClass is null'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">createSession</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 定义peer信息</span></li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">peerInfo</span>: abilityConnectionManager.<span class="hljs-property">PeerInfo</span> = {</li><li>      <span class="hljs-attr">deviceId</span>: <span class="hljs-string">"sinkDeviceId"</span>,</li><li>      <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.remotephotodemo'</span>,</li><li>      <span class="hljs-attr">moduleName</span>: <span class="hljs-string">'entry'</span>,</li><li>      <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span>,</li><li>      <span class="hljs-attr">serviceName</span>: <span class="hljs-string">'collabTest'</span></li><li>    };</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">myRecord</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = {</li><li>      <span class="hljs-string">"newKey1"</span>: <span class="hljs-string">"value1"</span>,</li><li>    };</li><li>
</li><li>    <span class="hljs-comment">// 定义连接选项</span></li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">connectOptions</span>: abilityConnectionManager.<span class="hljs-property">ConnectOptions</span> = {</li><li>      <span class="hljs-attr">needSendData</span>: <span class="hljs-literal">true</span>,</li><li>      <span class="hljs-attr">startOptions</span>: abilityConnectionManager.<span class="hljs-property">StartOptionParams</span>.<span class="hljs-property">START_IN_FOREGROUND</span>,</li><li>      <span class="hljs-attr">parameters</span>: myRecord</li><li>    };</li><li>    <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> sessionId = abilityConnectionManager.<span class="hljs-title function_">createAbilityConnectionSession</span>(<span class="hljs-string">"collabTest"</span>, context, peerInfo, connectOptions);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'createSession sessionId is'</span>, sessionId);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, error);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>在设备B上，对于createAbilityConnectionSession接口的调用，可在应用被拉起后触发协同生命周期函数onCollaborate时，在onCollaborate内进行。</p>       <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li> </li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCollaborate</span>(<span class="hljs-attr">wantParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt;): <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">CollaborateResult</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'on collaborate'</span>);</li><li>    <span class="hljs-keyword">let</span> param = wantParam[<span class="hljs-string">"ohos.extra.param.key.supportCollaborateIndex"</span>] <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onCollab</span>(param);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</li><li>  }</li><li> </li><li>  <span class="hljs-title function_">onCollab</span>(<span class="hljs-params">collabParam: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">Object</span>&gt;</span>) {</li><li>    <span class="hljs-keyword">const</span> sessionId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createSessionFromWant</span>(collabParam);</li><li>    <span class="hljs-keyword">if</span> (sessionId == -<span class="hljs-number">1</span>) {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Invalid session ID.'</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>  }</li><li> </li><li>  <span class="hljs-title function_">createSessionFromWant</span>(<span class="hljs-attr">collabParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt;): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">let</span> sessionId = -<span class="hljs-number">1</span>;</li><li>    <span class="hljs-keyword">const</span> peerInfo = collabParam[<span class="hljs-string">"PeerInfo"</span>] <span class="hljs-keyword">as</span> abilityConnectionManager.<span class="hljs-property">PeerInfo</span>;</li><li>    <span class="hljs-keyword">if</span> (peerInfo == <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-keyword">return</span> sessionId;</li><li>    }</li><li> </li><li>    <span class="hljs-keyword">const</span> options = collabParam[<span class="hljs-string">"ConnectOption"</span>] <span class="hljs-keyword">as</span> abilityConnectionManager.<span class="hljs-property">ConnectOptions</span>;</li><li>    <span class="hljs-keyword">try</span> {</li><li>      sessionId = abilityConnectionManager.<span class="hljs-title function_">createAbilityConnectionSession</span>(<span class="hljs-string">"collabTest"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, peerInfo, options);</li><li>      <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">'sessionId'</span>, sessionId);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'createSession sessionId is'</span> + sessionId);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, error);</li><li>    }</li><li>    <span class="hljs-keyword">return</span> sessionId;</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanagerdestroyabilityconnectionsession" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.destroyAbilityConnectionSession<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanagerdestroyabilityconnectionsession" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>destroyAbilityConnectionSession(sessionId: number): void</p>     <p>销毁应用间的协同会话。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待销毁的协同会话ID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li>hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'destroyAbilityConnectionSession called'</span>);</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li>abilityConnectionManager.<span class="hljs-title function_">destroyAbilityConnectionSession</span>(sessionId);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanagergetpeerinfobyid" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.getPeerInfoById<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanagergetpeerinfobyid" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>getPeerInfoById(sessionId: number): PeerInfo | undefined</p>     <p>获取指定会话中对端应用信息。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">协同会话ID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#peerinfo" target="_blank">PeerInfo</a> | undefined</td>         <td class="cellrowborder" width="50%">若存在对应peeerInfo，则返回接收端的协作应用信息。若sessionId未找到，则查询失败，返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li>hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'getPeerInfoById called'</span>);</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li><span class="hljs-keyword">const</span> peerInfo = abilityConnectionManager.<span class="hljs-title function_">getPeerInfoById</span>(sessionId);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanagerconnect" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.connect<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanagerconnect" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>connect(sessionId: number): Promise&lt;ConnectResult&gt;</p>     <p>创建协同会话成功并获得会话ID后，设备A上可进行UIAbility的连接。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">已创建的协同会话ID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;ConnectResult&gt;</td>         <td class="cellrowborder" width="50%">以Promise形式返回<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#connectresult">连接结果</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>设备A上的应用在创建协同会话成功并获得会话ID后，调用connect()方法启动UIAbility连接，并拉起设备B应用。</p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li>abilityConnectionManager.<span class="hljs-title function_">connect</span>(sessionId).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">ConnectResult</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">ConnectResult</span>.<span class="hljs-property">isConnected</span>) {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'connect failed'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">"connect failed"</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanageracceptconnect" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.acceptConnect<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanageracceptconnect" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>acceptConnect(sessionId: number, token: string): Promise&lt;void&gt;</p>     <p>设备B上的应用，在创建协同会话成功并获得会话ID后，调用acceptConnect()方法接受连接。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">已创建的协同会话ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">token</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设备A应用传入的token值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>设备B上的应用，在createAbilityConnectionSession接口调用并获取sessionId成功后，可调用acceptConnect接口来选择接受连接。</p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span>, <span class="hljs-attr">launchParam</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">LaunchParam</span>): <span class="hljs-built_in">void</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'Ability onCreate'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onCollaborate</span>(<span class="hljs-attr">wantParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt;): <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">CollaborateResult</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'on collaborate'</span>);</li><li>    <span class="hljs-keyword">let</span> param = wantParam[<span class="hljs-string">"ohos.extra.param.key.supportCollaborateIndex"</span>] <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onCollab</span>(param);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onCollab</span>(<span class="hljs-params">collabParam: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">Object</span>&gt;</span>) {</li><li>    <span class="hljs-keyword">const</span> sessionId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createSessionFromWant</span>(collabParam);</li><li>    <span class="hljs-keyword">if</span> (sessionId == -<span class="hljs-number">1</span>) {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'Invalid session ID.'</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">const</span> collabToken = collabParam[<span class="hljs-string">"ohos.dms.collabToken"</span>] <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;</li><li>    abilityConnectionManager.<span class="hljs-title function_">acceptConnect</span>(sessionId, collabToken).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'acceptConnect success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'failed'</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">createSessionFromWant</span>(<span class="hljs-attr">collabParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt;): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">let</span> sessionId = -<span class="hljs-number">1</span>;</li><li>    <span class="hljs-keyword">const</span> peerInfo = collabParam[<span class="hljs-string">"PeerInfo"</span>] <span class="hljs-keyword">as</span> abilityConnectionManager.<span class="hljs-property">PeerInfo</span>;</li><li>    <span class="hljs-keyword">if</span> (peerInfo == <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-keyword">return</span> sessionId;</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">const</span> options = collabParam[<span class="hljs-string">"ConnectOption"</span>] <span class="hljs-keyword">as</span> abilityConnectionManager.<span class="hljs-property">ConnectOptions</span>;</li><li>    <span class="hljs-keyword">try</span> {</li><li>      sessionId = abilityConnectionManager.<span class="hljs-title function_">createAbilityConnectionSession</span>(<span class="hljs-string">"collabTest"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, peerInfo, options);</li><li>      <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">'sessionId'</span>, sessionId);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'createSession sessionId is'</span> + sessionId);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, error);</li><li>    }</li><li>    <span class="hljs-keyword">return</span> sessionId;</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanagerdisconnect" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.disconnect<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanagerdisconnect" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>disconnect(sessionId: number): void</p>     <p>当协同业务执行完毕后，协同双端的任意一台设备，应断开UIAbility的连接，结束协同状态。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">协同会话ID</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li>hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'disconnectRemoteAbility begin'</span>);</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li>abilityConnectionManager.<span class="hljs-title function_">disconnect</span>(sessionId);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanagerreject" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.reject<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanagerreject" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>reject(token: string, reason: string): void;</p>     <p>在跨端应用协同过程中，在拒绝对端的连接请求后，向对端发送拒绝原因。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">token</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用于协作服务管理的令牌。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">reason</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">连接被拒绝的原因。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>    <span class="hljs-title function_">onCollaborate</span>(<span class="hljs-attr">wantParam</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt;): <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">CollaborateResult</span> {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'%{public}s'</span>, <span class="hljs-string">'on collaborate'</span>);</li><li>      <span class="hljs-keyword">let</span> collabParam = wantParam[<span class="hljs-string">"ohos.extra.param.key.supportCollaborateIndex"</span>] <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Object</span>&gt;;</li><li>      <span class="hljs-keyword">const</span> collabToken = collabParam[<span class="hljs-string">"ohos.dms.collabToken"</span>] <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;</li><li>      <span class="hljs-keyword">const</span> reason = <span class="hljs-string">"test"</span>;</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'reject begin'</span>);</li><li>      abilityConnectionManager.<span class="hljs-title function_">reject</span>(collabToken, reason);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">CollaborateResult</span>.<span class="hljs-property">REJECT</span>;</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanageronconnect" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.on('connect')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanageronconnect" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>on(type: 'connect', sessionId: number, callback: Callback&lt;EventCallbackInfo&gt;): void</p>     <p>注册connect事件的回调监听。使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'connect'，完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#abilityconnectionmanagerconnect">abilityConnectionManager.connect()</a>调用，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建的协同会话ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#eventcallbackinfo">EventCallbackInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li>abilityConnectionManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">"connect"</span>, sessionId,<span class="hljs-function">(<span class="hljs-params">callbackInfo</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'session connect, sessionId is'</span>, callbackInfo.<span class="hljs-property">sessionId</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanageroffconnect" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.off('connect')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanageroffconnect" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>off(type: 'connect', sessionId: number, callback?: Callback&lt;EventCallbackInfo&gt;): void</p>     <p>取消connect事件的回调监听。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'connect'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建的协同会话ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#eventcallbackinfo">EventCallbackInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">注册的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li>abilityConnectionManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">"connect"</span>, sessionId);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanagerondisconnect" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.on('disconnect')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanagerondisconnect" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>on(type: 'disconnect', sessionId: number, callback: Callback&lt;EventCallbackInfo&gt;): void</p>     <p>注册disconnect事件的回调监听。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'disconnect'，完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#abilityconnectionmanagerdisconnect">abilityConnectionManager.disconnect()</a>调用，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建的协同会话ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#eventcallbackinfo">EventCallbackInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li>abilityConnectionManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">"disconnect"</span>, sessionId,<span class="hljs-function">(<span class="hljs-params">callbackInfo</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'session disconnect, sessionId is'</span>, callbackInfo.<span class="hljs-property">sessionId</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanageroffdisconnect" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.off('disconnect')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanageroffdisconnect" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>off(type: 'disconnect', sessionId: number, callback?: Callback&lt;EventCallbackInfo&gt;): void</p>     <p>取消disconnect事件的回调监听。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'disconnect'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建的协同会话ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#eventcallbackinfo">EventCallbackInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">注册的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li>abilityConnectionManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">"disconnect"</span>, sessionId);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanageronreceivemessage" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.on('receiveMessage')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanageronreceivemessage" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>on(type: 'receiveMessage', sessionId: number, callback: Callback&lt;EventCallbackInfo&gt;): void</p>     <p>注册receiveMessage事件的回调监听。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'receiveMessage'，完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#abilityconnectionmanagersendmessage">abilityConnectionManager.sendMessage()</a>调用，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建的协同会话ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#eventcallbackinfo">EventCallbackInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li>abilityConnectionManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">"receiveMessage"</span>, sessionId,<span class="hljs-function">(<span class="hljs-params">callbackInfo</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'receiveMessage, sessionId is'</span>, callbackInfo.<span class="hljs-property">sessionId</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanageroffreceivemessage" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.off('receiveMessage')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanageroffreceivemessage" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>off(type: 'receiveMessage', sessionId: number, callback?: Callback&lt;EventCallbackInfo&gt;): void</p>     <p>取消receiveMessage事件的回调监听。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'receiveMessage'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建的协同会话ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#eventcallbackinfo">EventCallbackInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">注册的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li>abilityConnectionManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">"receiveMessage"</span>, sessionId);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanageronreceivedata" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.on('receiveData')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanageronreceivedata" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>on(type: 'receiveData', sessionId: number, callback: Callback&lt;EventCallbackInfo&gt;): void</p>     <p>注册receiveData事件的回调监听。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'receiveData'，完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#abilityconnectionmanagersenddata">abilityConnectionManager.sendData()</a>调用，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建的协同会话ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#eventcallbackinfo">EventCallbackInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li>abilityConnectionManager.<span class="hljs-title function_">on</span>(<span class="hljs-string">"receiveData"</span>, sessionId,<span class="hljs-function">(<span class="hljs-params">callbackInfo</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'receiveData, sessionId is'</span>, callbackInfo.<span class="hljs-property">sessionId</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanageroffreceivedata" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.off('receiveData')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanageroffreceivedata" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>off(type: 'receiveData', sessionId: number, callback?: Callback&lt;EventCallbackInfo&gt;): void</p>     <p>取消receiveData事件的回调监听。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'receiveData'，完成。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建的协同会话ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#eventcallbackinfo">EventCallbackInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">注册的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li>abilityConnectionManager.<span class="hljs-title function_">off</span>(<span class="hljs-string">"receiveData"</span>, sessionId);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanagersendmessage" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.sendMessage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanagersendmessage" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>sendMessage(sessionId: number, msg: string): Promise&lt;void&gt;</p>     <p>应用连接成功后，设备A或设备B可向对端设备发送文本信息。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">协同会话ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">msg</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文本信息内容（内容最大限制为1KB）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li>abilityConnectionManager.<span class="hljs-title function_">sendMessage</span>(sessionId, <span class="hljs-string">"message send success"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">"sendMessage success"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">"connect failed"</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="abilityconnectionmanagersenddata" device-type="phone,2in1,tablet,wearable">abilityConnectionManager.sendData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="abilityconnectionmanagersenddata" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>sendData(sessionId: number, data: ArrayBuffer): Promise&lt;void&gt;</p>     <p>应用连接成功后，设备A或设备B可向对端设备发送<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arraybuffer-object" target="_blank">ArrayBuffer</a>字节流。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sessionId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">协同会话ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">data</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arraybuffer-object" target="_blank">ArrayBuffer</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">字节流信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tbk-c106="" class="highlight-div"><div _ngcontent-tbk-c106="" class="highlight-div-header"><div _ngcontent-tbk-c106="" class="highlight-div-header-left"><div _ngcontent-tbk-c106="" class="handle-button expand-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tbk-c106="" class="highlight-div-header-right"><div _ngcontent-tbk-c106="" class="handle-button ai-button"></div><div _ngcontent-tbk-c106="" class="handle-button line-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tbk-c106="" class="handle-button theme-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tbk-c106="" class="handle-button copy-button"><div _ngcontent-tbk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tbk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { abilityConnectionManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DistributedServiceKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { util } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> textEncoder = util.<span class="hljs-property">TextEncoder</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">"utf-8"</span>);</li><li><span class="hljs-keyword">const</span> arrayBuffer  = textEncoder.<span class="hljs-title function_">encodeInto</span>(<span class="hljs-string">"data send success"</span>);</li><li>
</li><li><span class="hljs-keyword">let</span> sessionId = <span class="hljs-number">100</span>;</li><li>abilityConnectionManager.<span class="hljs-title function_">sendData</span>(sessionId, arrayBuffer.<span class="hljs-property">buffer</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">"sendMessage success"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">"sendMessage failed"</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="peerinfo" device-type="phone,2in1,tablet,wearable">PeerInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="peerinfo" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>应用协同信息。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">deviceId</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">对端设备ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">bundleName</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">对端应用的包名。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">moduleName</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">对端应用的模块名。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">abilityName</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">对端应用的组件名。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">serviceName</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">应用设置的服务名称。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="connectoptions" device-type="phone,2in1,tablet,wearable">ConnectOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="connectoptions" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>应用连接时所需的连接选项。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">needSendData</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">true代表需要传输数据，false代表不需要传输数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">startOptions</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#startoptionparams">StartOptionParams</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">配置应用启动选项。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">parameters</td>         <td class="cellrowborder" width="20%">Record&lt;string, string&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">配置连接所需的额外信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="connectresult" device-type="phone,2in1,tablet,wearable">ConnectResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="connectresult" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>连接的结果。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">isConnected</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">true表示连接成功，false表示连接失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">errorCode</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#connecterrorcode">ConnectErrorCode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">表示连接错误码。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">reason</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">表示拒绝连接的原因。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="eventcallbackinfo" device-type="phone,2in1,tablet,wearable">EventCallbackInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="eventcallbackinfo" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>回调方法的接收信息。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">sessionId</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示当前事件对应的协同会话ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">reason</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#disconnectreason">DisconnectReason</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">表示断连原因。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">msg</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">表示接收的消息。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">data</td>         <td class="cellrowborder" width="20%">ArrayBuffer</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">表示接收的字节流。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="collaborateeventinfo" device-type="phone,2in1,tablet,wearable">CollaborateEventInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="collaborateeventinfo" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>协同事件信息。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">eventType</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-distributed-abilityconnectionmanager#collaborateeventtype">CollaborateEventType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示协同事件的类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">eventMsg</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">表示协同事件的消息内容。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="connecterrorcode" device-type="phone,2in1,tablet,wearable">ConnectErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="connecterrorcode" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>连接的错误码。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">CONNECTED_SESSION_EXISTS</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">表示应用之间存在已连接的会话。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PEER_APP_REJECTED</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">表示对端应用拒绝了协作请求。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">LOCAL_WIFI_NOT_OPEN</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">表示本端WiFi未开启。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PEER_WIFI_NOT_OPEN</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">表示对端WiFi未开启。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PEER_ABILITY_NO_ONCOLLABORATE</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">表示未实现onCollaborate方法。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SYSTEM_INTERNAL_ERROR</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">表示系统内部错误。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="startoptionparams" device-type="phone,2in1,tablet,wearable">StartOptionParams<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="startoptionparams" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>启动选项参数的枚举。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">START_IN_FOREGROUND</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">表示将对端应用启动至前台。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="collaborateeventtype" device-type="phone,2in1,tablet,wearable">CollaborateEventType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="collaborateeventtype" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>协同事件类型的枚举。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">SEND_FAILURE</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务发送失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COLOR_SPACE_CONVERSION_FAILURE</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">表示色彩空间转换失败。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="disconnectreason" device-type="phone,2in1,tablet,wearable">DisconnectReason<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="disconnectreason" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>当前断连原因的枚举。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">PEER_APP_CLOSE_COLLABORATION</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">表示对端应用主动关闭了协作。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PEER_APP_EXIT</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">表示对端应用退出。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">NETWORK_DISCONNECTED</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">表示网络断开。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="collaborationkeys" device-type="phone,2in1,tablet,wearable">CollaborationKeys<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="collaborationkeys" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>应用协作键值的枚举。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">PEER_INFO</td>         <td class="cellrowborder" width="33.33333333333333%">ohos.collaboration.key.peerInfo</td>         <td class="cellrowborder" width="33.33333333333333%">表示对端设备信息的键值。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CONNECT_OPTIONS</td>         <td class="cellrowborder" width="33.33333333333333%">ohos.collaboration.key.connectOptions</td>         <td class="cellrowborder" width="33.33333333333333%">表示连接选项的键值。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COLLABORATE_TYPE</td>         <td class="cellrowborder" width="33.33333333333333%">ohos.collaboration.key.abilityCollaborateType</td>         <td class="cellrowborder" width="33.33333333333333%">表示协作类型的键值。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="collaborationvalues" device-type="phone,2in1,tablet,wearable">CollaborationValues<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="collaborationvalues" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>应用协作相关值的枚举。</p>     <p><strong>系统能力</strong>：SystemCapability.DistributedSched.AppCollaboration</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">ABILITY_COLLABORATION_TYPE_DEFAULT</td>         <td class="cellrowborder" width="33.33333333333333%">ohos.collaboration.value.abilityCollab</td>         <td class="cellrowborder" width="33.33333333333333%">表示默认的协作类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">ABILITY_COLLABORATION_TYPE_CONNECT_PROXY</td>         <td class="cellrowborder" width="33.33333333333333%">ohos.collaboration.value.connectProxy</td>         <td class="cellrowborder" width="33.33333333333333%">表示连接代理的协作类型。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>