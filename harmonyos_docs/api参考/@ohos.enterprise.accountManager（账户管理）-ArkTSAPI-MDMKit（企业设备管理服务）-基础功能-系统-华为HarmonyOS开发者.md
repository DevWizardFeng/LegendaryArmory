<h1 _ngcontent-vtv-c119="" class="doc-title ng-star-inserted" title="@ohos.enterprise.accountManager（账户管理）"> @ohos.enterprise.accountManager（账户管理） </h1>

<div _ngcontent-vtv-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本模块提供设备账户管理能力，包括禁止创建本地用户等。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 12开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>      <p>本模块接口仅可在Stage模型下使用。</p>      <p>本模块接口仅对设备管理应用开放，且调用接口前需激活设备管理应用，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/mdm-kit-guide" target="_blank">MDM Kit开发指南</a>。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-vtv-c106="" class="highlight-div"><div _ngcontent-vtv-c106="" class="highlight-div-header"><div _ngcontent-vtv-c106="" class="highlight-div-header-left"><div _ngcontent-vtv-c106="" class="handle-button expand-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vtv-c106="" class="highlight-div-header-right"><div _ngcontent-vtv-c106="" class="handle-button ai-button"></div><div _ngcontent-vtv-c106="" class="handle-button line-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vtv-c106="" class="handle-button theme-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vtv-c106="" class="handle-button copy-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vtv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { accountManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="accountmanagerdisallowosaccountaddition" device-type="phone,2in1,tablet">accountManager.disallowOsAccountAddition<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="accountmanagerdisallowosaccountaddition" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>disallowOsAccountAddition(admin: Want, disallow: boolean, accountId?: number): void</p>     <p>禁止用户添加账号。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_SET_ACCOUNT_POLICY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">disallow</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">是否禁止创建本地用户，true表示禁止创建，false表示允许创建。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">accountId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>用户ID，指定具体用户。当不传入此参数时，表示禁止所有用户添加账号；当传入此参数时，表示禁止指定用户添加账号。取值范围：大于等于0。</p>          <p>accountId可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#getosaccountlocalid9">getOsAccountLocalId</a>等接口来获取。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-vtv-c106="" class="highlight-div"><div _ngcontent-vtv-c106="" class="highlight-div-header"><div _ngcontent-vtv-c106="" class="highlight-div-header-left"><div _ngcontent-vtv-c106="" class="handle-button expand-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vtv-c106="" class="highlight-div-header-right"><div _ngcontent-vtv-c106="" class="handle-button ai-button"></div><div _ngcontent-vtv-c106="" class="handle-button line-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vtv-c106="" class="handle-button theme-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vtv-c106="" class="handle-button copy-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vtv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { accountManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 参数需根据实际情况进行替换</span></li><li>  accountManager.<span class="hljs-title function_">disallowOsAccountAddition</span>(wantTemp, <span class="hljs-literal">true</span>, <span class="hljs-number">100</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in disallowing os account addition.'</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to disallow os account addition. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="accountmanagerisosaccountadditiondisallowed" device-type="phone,2in1,tablet">accountManager.isOsAccountAdditionDisallowed<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="accountmanagerisosaccountadditiondisallowed" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>isOsAccountAdditionDisallowed(admin: Want, accountId?: number): boolean</p>     <p>查询是否禁止用户添加账号。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_SET_ACCOUNT_POLICY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">accountId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>用户ID，指定具体用户。当不传入此参数时，表示查询所有用户是否禁止添加账号；当传入此参数时，表示查询指定用户是否禁止添加账号。取值范围：大于等于0。</p>          <p>accountId可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#getosaccountlocalid9">getOsAccountLocalId</a>等接口来获取。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">          <p>返回true表示禁止添加账号。</p>          <p>返回false表示允许添加账号。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-vtv-c106="" class="highlight-div"><div _ngcontent-vtv-c106="" class="highlight-div-header"><div _ngcontent-vtv-c106="" class="highlight-div-header-left"><div _ngcontent-vtv-c106="" class="handle-button expand-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vtv-c106="" class="highlight-div-header-right"><div _ngcontent-vtv-c106="" class="handle-button ai-button"></div><div _ngcontent-vtv-c106="" class="handle-button line-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vtv-c106="" class="handle-button theme-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vtv-c106="" class="handle-button copy-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vtv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { accountManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 参数需根据实际情况进行替换</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">isDisallowed</span>: <span class="hljs-built_in">boolean</span> = accountManager.<span class="hljs-title function_">isOsAccountAdditionDisallowed</span>(wantTemp, <span class="hljs-number">100</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in querying the os account addition or not: <span class="hljs-subst">${isDisallowed}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query the os account addition or not. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="accountmanageraddosaccountasync" device-type="phone,2in1,tablet">accountManager.addOsAccountAsync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="accountmanageraddosaccountasync" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>addOsAccountAsync(admin: Want, name: string, type: osAccount.OsAccountType): Promise&lt;osAccount.OsAccountInfo&gt;</p>     <p>后台添加账号。使用promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该接口比较耗时，当调用此接口后，后续如果在应用主线程调用其他同步接口时需要等待该接口异步返回。</p>      </div></div></div>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_SET_ACCOUNT_POLICY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">账号名，指要添加的账号的名称。无法创建同名、名称为空的账号。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#osaccounttype">osAccount.OsAccountType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>要添加的账号的类型。</p>          <p>取值范围：ADMIN、NORMAL、GUEST。</p>          <p>· ADMIN：管理员账号。</p>          <p>· NORMAL：普通账号。</p>          <p>· GUEST：访客账号。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#osaccountinfo">osAccount.OsAccountInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回添加的账号信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9201003</td>         <td class="cellrowborder" width="50%">Failed to add an OS account.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-vtv-c106="" class="highlight-div"><div _ngcontent-vtv-c106="" class="highlight-div-header"><div _ngcontent-vtv-c106="" class="highlight-div-header-left"><div _ngcontent-vtv-c106="" class="handle-button expand-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vtv-c106="" class="highlight-div-header-right"><div _ngcontent-vtv-c106="" class="handle-button ai-button"></div><div _ngcontent-vtv-c106="" class="handle-button line-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vtv-c106="" class="handle-button theme-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vtv-c106="" class="handle-button copy-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vtv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { accountManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>, osAccount } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li>
</li><li><span class="hljs-comment">// 参数需根据实际情况进行替换</span></li><li>accountManager.<span class="hljs-title function_">addOsAccountAsync</span>(wantTemp, <span class="hljs-string">"TestAccountName"</span>, osAccount.<span class="hljs-property">OsAccountType</span>.<span class="hljs-property">NORMAL</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating os account: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(info)}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to creating os account. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="accountmanagersetdomainaccountpolicy19" device-type="phone,2in1,tablet">accountManager.setDomainAccountPolicy<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="accountmanagersetdomainaccountpolicy19" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setDomainAccountPolicy(admin: Want, domainAccountInfo: osAccount.DomainAccountInfo, policy: DomainAccountPolicy): void</p>     <p>设置域账号策略。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_SET_ACCOUNT_POLICY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>设备行为差异：</strong> 该接口在PC/2in1设备中可正常调用，在其他设备中返回801错误码。</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">domainAccountInfo</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#domainaccountinfo8">osAccount.DomainAccountInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>域账号信息。</p>          <p>若传入的domainAccountInfo内部属性均为空，则会设置为全局域账号策略。全局策略对所有的域账号生效。</p>          <p>若传入的domainAccountInfo内部属性不为空，则为指定域账号设置策略。</p>          <p>指定域账号策略的优先级高于全局策略，若指定域账号已有域账号策略，则全局策略对其不生效。</p>          <p><strong>说明</strong>：若为指定域账号设置策略，DomainAccountInfo的serverConfigId字段必填。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">policy</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-accountmanager#domainaccountpolicy19">DomainAccountPolicy</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>域账号策略。</p>          <p><strong>说明</strong>：设置域账号策略后须在设备侧修改域账号密码，若未修改密码，则DomainAccountPolicy中的passwordValidityPeriod、passwordExpirationNotification配置不生效。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. Failed to call the API due to limited device capabilities.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-vtv-c106="" class="highlight-div"><div _ngcontent-vtv-c106="" class="highlight-div-header"><div _ngcontent-vtv-c106="" class="highlight-div-header-left"><div _ngcontent-vtv-c106="" class="handle-button expand-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vtv-c106="" class="highlight-div-header-right"><div _ngcontent-vtv-c106="" class="handle-button ai-button"></div><div _ngcontent-vtv-c106="" class="handle-button line-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vtv-c106="" class="handle-button theme-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vtv-c106="" class="handle-button copy-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vtv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { accountManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>, osAccount } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">setDomainAccountPolicy</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>    <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>    <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>    <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">policy</span>: accountManager.<span class="hljs-property">DomainAccountPolicy</span> = {</li><li>    <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>    <span class="hljs-attr">authenticationValidityPeriod</span>: <span class="hljs-number">300</span>,</li><li>    <span class="hljs-attr">passwordValidityPeriod</span>: <span class="hljs-number">420</span>,</li><li>    <span class="hljs-attr">passwordExpirationNotification</span>: <span class="hljs-number">60</span></li><li>  };</li><li>  <span class="hljs-comment">// 设置全局域账号策略</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">accountInfo</span>: osAccount.<span class="hljs-property">DomainAccountInfo</span> = {</li><li>    <span class="hljs-attr">domain</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">accountName</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">serverConfigId</span>: <span class="hljs-string">''</span></li><li>  };</li><li>  <span class="hljs-keyword">try</span> {</li><li>    accountManager.<span class="hljs-title function_">setDomainAccountPolicy</span>(wantTemp, accountInfo, policy);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setting global domainAccount policy.'</span>);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set domainAccount policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>  <span class="hljs-comment">// 设置指定域账号策略</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">accountInfo2</span>: osAccount.<span class="hljs-property">DomainAccountInfo</span> = {</li><li>    <span class="hljs-attr">domain</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">accountName</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">serverConfigId</span>: <span class="hljs-string">''</span></li><li>  };</li><li>  <span class="hljs-comment">// 需根据实际情况替换</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">userId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>  <span class="hljs-keyword">await</span> osAccount.<span class="hljs-title function_">getAccountManager</span>().<span class="hljs-title function_">getOsAccountDomainInfo</span>(userId)</li><li>    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">domainAccountInfo: osAccount.DomainAccountInfo</span>) =&gt;</span> {</li><li>      accountInfo2 = domainAccountInfo;</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get account domain info. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  <span class="hljs-keyword">try</span> {</li><li>    accountManager.<span class="hljs-title function_">setDomainAccountPolicy</span>(wantTemp, accountInfo2, policy);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setting domain account policy.'</span>);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set domain account policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="accountmanagergetdomainaccountpolicy19" device-type="phone,2in1,tablet">accountManager.getDomainAccountPolicy<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="accountmanagergetdomainaccountpolicy19" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getDomainAccountPolicy(admin: Want, domainAccountInfo: osAccount.DomainAccountInfo): DomainAccountPolicy</p>     <p>获取域账号策略。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_SET_ACCOUNT_POLICY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>设备行为差异：</strong> 该接口在PC/2in1设备中可正常调用，在其他设备中返回801错误码。</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">domainAccountInfo</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#domainaccountinfo8">osAccount.DomainAccountInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>域账号信息。</p>          <p>若传入的domainAccountInfo内部属性均为空，则查询全局域账号策略。</p>          <p>若传入的domainAccountInfo内部属性不为空，则查询指定域账号策略。</p>          <p><strong>说明</strong>：若查询指定域账号策略，DomainAccountInfo的serverConfigId字段必填。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-accountmanager#domainaccountpolicy19">DomainAccountPolicy</a></td>         <td class="cellrowborder" width="50%">域账号策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported. Failed to call the API due to limited device capabilities.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-vtv-c106="" class="highlight-div"><div _ngcontent-vtv-c106="" class="highlight-div-header"><div _ngcontent-vtv-c106="" class="highlight-div-header-left"><div _ngcontent-vtv-c106="" class="handle-button expand-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vtv-c106="" class="highlight-div-header-right"><div _ngcontent-vtv-c106="" class="handle-button ai-button"></div><div _ngcontent-vtv-c106="" class="handle-button line-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vtv-c106="" class="handle-button theme-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vtv-c106="" class="handle-button copy-button"><div _ngcontent-vtv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vtv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { accountManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>, osAccount } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getDomainAccountPolicy</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>    <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>    <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>    <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">domainAccountPolicy</span>: accountManager.<span class="hljs-property">DomainAccountPolicy</span> = {};</li><li>  <span class="hljs-comment">// 查询全局域账号策略</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">accountInfo</span>: osAccount.<span class="hljs-property">DomainAccountInfo</span> = {</li><li>    <span class="hljs-attr">domain</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">accountName</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">serverConfigId</span>: <span class="hljs-string">''</span></li><li>  };</li><li>  <span class="hljs-keyword">try</span> {</li><li>    domainAccountPolicy = accountManager.<span class="hljs-title function_">getDomainAccountPolicy</span>(wantTemp, accountInfo);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting global domain account policy.'</span>);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get domain account policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>  <span class="hljs-comment">// 查询指定域账号策略</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">accountInfo2</span>: osAccount.<span class="hljs-property">DomainAccountInfo</span> = {</li><li>    <span class="hljs-attr">domain</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">accountName</span>: <span class="hljs-string">''</span>,</li><li>    <span class="hljs-attr">serverConfigId</span>: <span class="hljs-string">''</span></li><li>  };</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">userId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>  <span class="hljs-keyword">await</span> osAccount.<span class="hljs-title function_">getAccountManager</span>()</li><li>    .<span class="hljs-title function_">getOsAccountDomainInfo</span>(userId)</li><li>    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">domainAccountInfo: osAccount.DomainAccountInfo</span>) =&gt;</span> {</li><li>      accountInfo2 = domainAccountInfo;</li><li>    })</li><li>    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get account domain info. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  <span class="hljs-keyword">try</span> {</li><li>    domainAccountPolicy = accountManager.<span class="hljs-title function_">getDomainAccountPolicy</span>(wantTemp, accountInfo2);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting domain account policy.'</span>);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get domain account policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="domainaccountpolicy19" device-type="phone,2in1,tablet">DomainAccountPolicy<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="domainaccountpolicy19" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>域账号策略。</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">authenticationValidityPeriod</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>表示域账号认证Token的有效期（单位：s），取值范围是[-1,2147483647]。有效期起始时间为最后一次域账号的认证时间点，如登录、锁屏后解锁等。</p>          <p>默认值为-1，表示Token永久有效。取值为0，表示Token立即失效。Token过期/失效后，用户进入系统时必须进行域账号认证，验证域账号和密码。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">passwordValidityPeriod</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>表示域账号密码有效期（单位：s），取值范围是[-1,2147483647]，有效期起始时间为设备侧最后一次修改密码的时间点。</p>          <p>默认值为-1，表示域账号密码永久有效。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">passwordExpirationNotification</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>表示域账号密码过期前提示时间（单位：s），取值范围是[0,2147483647]。</p>          <p>默认值为0，表示域账号密码过期不提示。</p>          <p><strong>说明</strong>：passwordExpirationNotification需与passwordValidityPeriod配合使用，当系统时间大于或等于（设备侧最后一次修改域账号密码时间 + passwordValidityPeriod - passwordExpirationNotification）时，会发页面通知提示密码即将过期。</p></td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>