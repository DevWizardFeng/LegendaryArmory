<h1 _ngcontent-plu-c119="" class="doc-title ng-star-inserted" title="@ohos.enterprise.securityManager（安全管理）"> @ohos.enterprise.securityManager（安全管理） </h1>

<div _ngcontent-plu-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本模块提供设备安全管理的能力，包括查询安全补丁状态、查询文件加密状态等。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 12开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>      <p>本模块接口仅可在Stage模型下使用。</p>      <p>本模块接口仅对设备管理应用开放，且调用接口前需激活设备管理应用，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/mdm-kit-guide" target="_blank">MDM Kit开发指南</a>。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanageruninstallusercertificate" device-type="phone,2in1,tablet">securityManager.uninstallUserCertificate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanageruninstallusercertificate" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>uninstallUserCertificate(admin: Want, certUri: string): Promise&lt;void&gt;</p>     <p>卸载用户证书，使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_CERTIFICATE</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">certUri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">证书uri，由安装用户证书接口<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-securitymanager#securitymanagerinstallusercertificate">installUserCertificate</a>设置返回。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">无返回结果的Promise对象。当卸载用户证书失败时会抛出错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9201001</td>         <td class="cellrowborder" width="50%">Failed to manage the certificate.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-comment">// 需根据实际情况进行替换</span></li><li><span class="hljs-keyword">let</span> aliasStr = <span class="hljs-string">"certName"</span>;</li><li>securityManager.<span class="hljs-title function_">uninstallUserCertificate</span>(wantTemp, aliasStr).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in uninstalling user certificate.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to uninstall user certificate. Code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagerinstallusercertificate" device-type="phone,2in1,tablet">securityManager.installUserCertificate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagerinstallusercertificate" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>installUserCertificate(admin: Want, certificate: CertBlob): Promise&lt;string&gt;</p>     <p>安装用户证书，使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_CERTIFICATE</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">certificate</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-securitymanager#certblob">CertBlob</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">证书信息。证书文件应放在应用沙箱路径等应用有权限访问的路径下。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回当前证书安装后的uri，用于卸载证书。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9201001</td>         <td class="cellrowborder" width="50%">Failed to manage the certificate.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { common, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">certFileArray</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>();</li><li><span class="hljs-comment">// 变量context需要在MainAbility的onCreate回调函数中进行初始化</span></li><li><span class="hljs-comment">// test.cer需要放置在rawfile目录下</span></li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(<span class="hljs-string">"test.cer"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {</li><li>  certFileArray = value;</li><li>  securityManager.<span class="hljs-title function_">installUserCertificate</span>(wantTemp, { <span class="hljs-attr">inData</span>: certFileArray, <span class="hljs-attr">alias</span>: <span class="hljs-string">"cert_alias_xts"</span> })</li><li>    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in installing user certificate, result : <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to install user certificate. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get raw file content. message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  <span class="hljs-keyword">return</span>;</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagerinstallusercertificate18" device-type="phone,2in1,tablet">securityManager.installUserCertificate<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagerinstallusercertificate18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>installUserCertificate(admin: Want, certificate: CertBlob, accountId: number): string</p>     <p>支持按系统账户安装用户证书。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_CERTIFICATE</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">certificate</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-securitymanager#certblob">CertBlob</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">证书信息。证书文件应放在应用沙箱路径等应用有权限访问的路径下。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">accountId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户ID，指定具体用户，取值范围：大于等于0。accountId可以通过@ohos.account.osAccount中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#getosaccountlocalid9-1">getOsAccountLocalId</a>等接口来获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回当前证书安装后的uri，用于卸载证书。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9201001</td>         <td class="cellrowborder" width="50%">Failed to manage the certificate.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { common, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">certFileArray</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">accountId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li><span class="hljs-comment">// 变量context需要在MainAbility的onCreate回调函数中进行初始化</span></li><li><span class="hljs-comment">// test.cer需要放置在rawfile目录下</span></li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">const</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(<span class="hljs-string">"test.cer"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {</li><li>  certFileArray = value;</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">string</span> = securityManager.<span class="hljs-title function_">installUserCertificate</span>(wantTemp, { <span class="hljs-attr">inData</span>: certFileArray, <span class="hljs-attr">alias</span>: <span class="hljs-string">"cert_alias_xts"</span> }, accountId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in installing user certificate. result: <span class="hljs-subst">${result}</span>`</span>);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to install user certificate. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagergetusercertificates18" device-type="phone,2in1,tablet">securityManager.getUserCertificates<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagergetusercertificates18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getUserCertificates(admin: Want, accountId: number): Array&lt;string&gt;</p>     <p>获取指定系统账户下的用户证书信息。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_CERTIFICATE</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">accountId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户ID，指定具体用户，取值范围：大于等于0。accountId可以通过@ohos.account.osAccount中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#getosaccountlocalid9-1">getOsAccountLocalId</a>等接口来获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="50%">返回在指定用户ID下安装的所有用户证书。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-comment">// 需根据实际情况进行替换</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">accountId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = securityManager.<span class="hljs-title function_">getUserCertificates</span>(wantTemp, accountId);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting the uri list of user Certificates. result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get the uri list of user Certificates. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagergetsecuritystatus" device-type="phone,2in1,tablet">securityManager.getSecurityStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagergetsecuritystatus" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getSecurityStatus(admin: Want, item: string): string</p>     <p>获取当前设备安全策略信息。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_SECURITY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">item</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>安全策略名称。</p>          <p>- patch：设备安全补丁。</p>          <p>- encryption：设备文件系统加密。</p>          <p>- root：设备ROOT状态。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回安全策略状态值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">string</span> = securityManager.<span class="hljs-title function_">getSecurityStatus</span>(wantTemp, <span class="hljs-string">'patch'</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting security patch tag. tag: <span class="hljs-subst">${result}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get security patch tag. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagersetpasswordpolicy" device-type="phone,2in1,tablet">securityManager.setPasswordPolicy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagersetpasswordpolicy" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setPasswordPolicy(admin: Want, policy: PasswordPolicy): void</p>     <p>设置设备口令策略。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_SECURITY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">policy</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-securitymanager#passwordpolicy">PasswordPolicy</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设备口令策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">policy</span>: securityManager.<span class="hljs-property">PasswordPolicy</span> = {</li><li>  <span class="hljs-attr">complexityRegex</span>: <span class="hljs-string">'^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&amp;*])[a-zA-Z\\d!@#$%^&amp;*]{8,}$'</span>,</li><li>  <span class="hljs-attr">validityPeriod</span>: <span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">additionalDescription</span>: <span class="hljs-string">'至少八个字符，至少一个大写字母，一个小写字母，一个数字和一个特殊字符'</span>,</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>    securityManager.<span class="hljs-title function_">setPasswordPolicy</span>(wantTemp, policy);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting password policy.`</span>);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set password policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagergetpasswordpolicy" device-type="phone,2in1,tablet">securityManager.getPasswordPolicy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagergetpasswordpolicy" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getPasswordPolicy(admin: Want): PasswordPolicy</p>     <p>获取设备口令策略。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_SECURITY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-securitymanager#passwordpolicy">PasswordPolicy</a></td>         <td class="cellrowborder" width="50%">设备口令策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: securityManager.<span class="hljs-property">PasswordPolicy</span> = securityManager.<span class="hljs-title function_">getPasswordPolicy</span>(wantTemp);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting password policy, result : <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get password policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagersetappclipboardpolicy" device-type="phone,2in1,tablet">securityManager.setAppClipboardPolicy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagersetappclipboardpolicy" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setAppClipboardPolicy(admin: Want, tokenId: number, policy: ClipboardPolicy): void</p>     <p>设置设备剪贴板策略。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_SECURITY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">tokenId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标应用的身份标识。可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-bundlemanager-applicationinfo">bundleManager.getApplicationInfo</a>获取accessTokenId。当前只支持最多100个tokenId被保存策略。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">policy</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-securitymanager#clipboardpolicy">ClipboardPolicy</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">剪贴板策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-comment">// 需根据实际情况进行替换</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tokenId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">586874394</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    securityManager.<span class="hljs-title function_">setAppClipboardPolicy</span>(wantTemp, tokenId, securityManager.<span class="hljs-property">ClipboardPolicy</span>.<span class="hljs-property">IN_APP</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting clipboard policy.`</span>);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set clipboard policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagergetappclipboardpolicy" device-type="phone,2in1,tablet">securityManager.getAppClipboardPolicy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagergetappclipboardpolicy" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getAppClipboardPolicy(admin: Want, tokenId?: number): string</p>     <p>获取设备剪贴板策略。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_SECURITY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">tokenId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">目标应用的身份标识。可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-bundlemanager-applicationinfo">bundleManager.getApplicationInfo</a>获取accessTokenId。当前只支持最多100个tokenId被保存策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回JSON字符串形式的设备剪贴板策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-comment">// 需根据实际情况进行替换</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tokenId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">586874394</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">string</span> = securityManager.<span class="hljs-title function_">getAppClipboardPolicy</span>(wantTemp, tokenId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting password policy, result : <span class="hljs-subst">${result}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set clipboard policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagersetappclipboardpolicy18" device-type="phone,2in1,tablet">securityManager.setAppClipboardPolicy<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagersetappclipboardpolicy18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setAppClipboardPolicy(admin: Want, bundleName: string, accountId: number, policy: ClipboardPolicy): void</p>     <p>设置指定用户下指定应用的设备剪贴板策略。当前只支持最多保存100个策略。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_SECURITY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">bundleName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">被设置剪贴板策略的应用包名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">accountId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户ID，指定具体用户，取值范围：大于等于0。accountId可以通过@ohos.account.osAccount中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#getosaccountlocalid9-1">getOsAccountLocalId</a>等接口来获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">policy</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-securitymanager#clipboardpolicy">ClipboardPolicy</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">剪贴板策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-comment">// 需根据实际情况进行替换</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.example.myapplication'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">accountId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    securityManager.<span class="hljs-title function_">setAppClipboardPolicy</span>(wantTemp, bundleName, accountId, securityManager.<span class="hljs-property">ClipboardPolicy</span>.<span class="hljs-property">IN_APP</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting clipboard policy.`</span>);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set clipboard policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagergetappclipboardpolicy18" device-type="phone,2in1,tablet">securityManager.getAppClipboardPolicy<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagergetappclipboardpolicy18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getAppClipboardPolicy(admin: Want, bundleName: string, accountId: number): string</p>     <p>获取指定用户下指定应用的设备剪贴板策略。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_SECURITY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">bundleName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">被设置剪贴板策略的应用包名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">accountId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户ID，指定具体用户，取值范围：大于等于0。accountId可以通过@ohos.account.osAccount中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#getosaccountlocalid9-1">getOsAccountLocalId</a>等接口来获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回JSON字符串形式的设备剪贴板策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-comment">// 需根据实际情况进行替换</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.example.myapplication'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">accountId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">string</span> = securityManager.<span class="hljs-title function_">getAppClipboardPolicy</span>(wantTemp, bundleName, accountId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting password policy, result : <span class="hljs-subst">${result}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set clipboard policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagersetwatermarkimage14" device-type="phone,2in1,tablet">securityManager.setWatermarkImage<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagersetwatermarkimage14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setWatermarkImage(admin: Want, bundleName: string, source: string | image.PixelMap, accountId: number): void</p>     <p>为指定用户的指定应用设置水印策略。当前只支持最多保存100个策略。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>本接口适用于企业场景下为三方应用设置水印，降低企业信息泄露风险。不建议为系统应用设置水印（如：桌面应用），可能存在未知异常。</p>      </div></div></div>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_SECURITY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">bundleName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">被设置水印的应用包名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">source</td>         <td class="cellrowborder" width="25%">string | <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">image.PixelMap</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>string表示图像路径，图像路径为应用沙箱路径等应用有权限访问的路径。</p>          <p>image.PixelMap表示图像对象，图像像素占用大小不得超过500KB。</p>          <p>图像像素占用大小计算公式：图像宽度(像素)×图像高度 (像素)×每个像素占用的字节数（通常为4）。例如：一张 100x100 的图片，图像像素占用大小为100×100×4=40000字节。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">accountId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户ID。accountId可以通过@ohos.account.osAccount中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#getosaccountlocalid9-1">getOsAccountLocalId</a>等接口来获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-comment">// 需根据实际情况进行替换</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.example.myapplication'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">source</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'/data/storage/el1/base/test.png'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">accountId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    securityManager.<span class="hljs-title function_">setWatermarkImage</span>(wantTemp, bundleName, source, accountId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting set watermarkImage policy.`</span>);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set watermarkImage policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagercancelwatermarkimage14" device-type="phone,2in1,tablet">securityManager.cancelWatermarkImage<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagercancelwatermarkimage14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>cancelWatermarkImage(admin: Want, bundleName: string, accountId: number): void</p>     <p>取消指定用户的水印策略。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_SECURITY</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">bundleName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">被取消水印的应用包名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">accountId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户ID。accountId可以通过@ohos.account.osAccount中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#getosaccountlocalid9-1">getOsAccountLocalId</a>等接口来获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-comment">// 需根据实际情况进行替换</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">bundleName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'com.example.myapplication'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">accountId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    securityManager.<span class="hljs-title function_">cancelWatermarkImage</span>(wantTemp, bundleName, accountId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting cancel watermarkImage policy.`</span>);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to cancel watermarkImage policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagersetpermissionmanagedstate20" device-type="phone,2in1,tablet">securityManager.setPermissionManagedState<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagersetpermissionmanagedstate20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setPermissionManagedState(admin: Want, applicationInstance: ApplicationInstance, permissions: Array&lt;string&gt;, managedState: PermissionManagedState): void</p>     <p>设置指定应用的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/permissions-for-all-user" target="_blank">user_grant权限</a>的管理策略。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_USER_GRANT_PERMISSION</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">applicationInstance</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-securitymanager#applicationinstance20">ApplicationInstance</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定应用实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">permissions</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要管理的权限名称列表，仅支持user_grant权限。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">managedState</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-securitymanager#permissionmanagedstate20">PermissionManagedState</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用权限的管理策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200010</td>         <td class="cellrowborder" width="50%">A conflict policy has been configured.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200012</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">appInstanceTemp</span>: securityManager.<span class="hljs-property">ApplicationInstance</span> = {</li><li>      <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>      <span class="hljs-attr">appIdentifier</span>: <span class="hljs-string">'736498586'</span>,</li><li>      <span class="hljs-attr">appIndex</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">accountId</span>: <span class="hljs-number">100</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">permissionsTemp</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">'ohos.permission.CAMERA'</span>, <span class="hljs-string">'ohos.permission.LOCATION'</span>];</li><li><span class="hljs-keyword">try</span> {</li><li>    securityManager.<span class="hljs-title function_">setPermissionManagedState</span>(wantTemp, appInstanceTemp, permissionsTemp, securityManager.<span class="hljs-property">PermissionManagedState</span>.<span class="hljs-property">GRANTED</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setting permission managed state.'</span>);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set permission managed state.  Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="securitymanagergetpermissionmanagedstate20" device-type="phone,2in1,tablet">securityManager.getPermissionManagedState<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="securitymanagergetpermissionmanagedstate20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getPermissionManagedState(admin: Want, applicationInstance: ApplicationInstance, permission: string): PermissionManagedState</p>     <p>获取指定应用的指定<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/permissions-for-all-user" target="_blank">user_grant权限</a>的管理策略。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_USER_GRANT_PERMISSION</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">applicationInstance</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-securitymanager#applicationinstance20">ApplicationInstance</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定应用实例。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">permission</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要获取管理策略的权限名称，仅支持user_grant权限。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-securitymanager#permissionmanagedstate20">PermissionManagedState</a></td>         <td class="cellrowborder" width="50%">应用权限的管理策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200012</td>         <td class="cellrowborder" width="50%">Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-plu-c106="" class="highlight-div"><div _ngcontent-plu-c106="" class="highlight-div-header"><div _ngcontent-plu-c106="" class="highlight-div-header-left"><div _ngcontent-plu-c106="" class="handle-button expand-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-plu-c106="" class="highlight-div-header-right"><div _ngcontent-plu-c106="" class="handle-button ai-button"></div><div _ngcontent-plu-c106="" class="handle-button line-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-plu-c106="" class="handle-button theme-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-plu-c106="" class="handle-button copy-button"><div _ngcontent-plu-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-plu-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { securityManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">appInstanceTemp</span>: securityManager.<span class="hljs-property">ApplicationInstance</span> = {</li><li>      <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>      <span class="hljs-attr">appIdentifier</span>: <span class="hljs-string">'736498586'</span>,</li><li>      <span class="hljs-attr">appIndex</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">accountId</span>: <span class="hljs-number">100</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">permissionTemp</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'ohos.permission.ENTERPRISE_MANAGE_USER_GRANT_PERMISSION'</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: securityManager.<span class="hljs-property">PermissionManagedState</span> = securityManager.<span class="hljs-title function_">getPermissionManagedState</span>(wantTemp, appInstanceTemp, permissionTemp);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting permission managed state, result : <span class="hljs-subst">${result}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get permission managed state. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="certblob" device-type="phone,2in1,tablet">CertBlob<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certblob" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>证书信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">inData</td>         <td class="cellrowborder" width="20%">Uint8Array</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">证书的二进制内容。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">alias</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">证书别名。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="passwordpolicy" device-type="phone,2in1,tablet">PasswordPolicy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="passwordpolicy" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>设备口令策略。</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">complexityRegex</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">口令复杂度正则表达式。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">validityPeriod</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">密码有效期（单位：毫秒）。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">additionalDescription</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">描述文本。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="clipboardpolicy" device-type="phone,2in1,tablet">ClipboardPolicy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clipboardpolicy" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>设备剪贴板策略。</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">DEFAULT</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">默认，表示无策略。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">IN_APP</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">剪贴板可在同一应用使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">LOCAL_DEVICE</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">剪贴板可在同一设备使用。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CROSS_DEVICE</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">剪贴板可跨设备使用。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="applicationinstance20" device-type="phone,2in1,tablet">ApplicationInstance<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationinstance20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>应用实例。</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">appIdentifier</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">应用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-bundlemanager-bundleinfo#signatureinfo">唯一标识符</a>，如果应用没有appIdentifier可使用appId代替，可以通过接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-bundlemanager#bundlemanagergetbundleinfo14-2">bundleManager.getBundleInfo</a>获取bundleInfo.signatureInfo.appIdentifier和bundleInfo.signatureInfo.appId。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">accountId</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">用户ID，指定具体用户，取值范围：大于等于0。accountId可以通过@ohos.account.osAccount中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-osaccount#getosaccountlocalid9-1">getOsAccountLocalId</a>等接口来获取。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">appIndex</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>表示分身应用的索引，默认值为0。</p>          <p>appIndex为0时，表示主应用。appIndex大于0时，表示指定的分身应用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="permissionmanagedstate20" device-type="phone,2in1,tablet">PermissionManagedState<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="permissionmanagedstate20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>应用权限的管理状态。</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">DEFAULT</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">默认由用户授予。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">GRANTED</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">已静默授予。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DENIED</td>         <td class="cellrowborder" width="33.33333333333333%">-1</td>         <td class="cellrowborder" width="33.33333333333333%">已静默拒绝。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>