<h1 _ngcontent-qha-c119="" class="doc-title ng-star-inserted" title="@ohos.enterprise.usbManager（USB管理）"> @ohos.enterprise.usbManager（USB管理） </h1>

<div _ngcontent-qha-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本模块提供USB管理能力。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 12开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>      <p>本模块接口仅可在Stage模型下使用。</p>      <p>本模块接口仅对设备管理应用开放，且调用接口前需激活设备管理应用，具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/mdm-kit-guide" target="_blank">MDM Kit开发指南</a>。</p>      <p>全局通用限制类策略由restrictions统一提供，若要全局禁用USB，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-enterprise-restrictions">@ohos.enterprise.restrictions（限制类策略）</a>。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-qha-c106="" class="highlight-div"><div _ngcontent-qha-c106="" class="highlight-div-header"><div _ngcontent-qha-c106="" class="highlight-div-header-left"><div _ngcontent-qha-c106="" class="handle-button expand-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qha-c106="" class="highlight-div-header-right"><div _ngcontent-qha-c106="" class="handle-button ai-button"></div><div _ngcontent-qha-c106="" class="handle-button line-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qha-c106="" class="handle-button theme-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qha-c106="" class="handle-button copy-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qha-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { usbManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="usbmanageraddallowedusbdevices" device-type="phone,2in1,tablet">usbManager.addAllowedUsbDevices<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="usbmanageraddallowedusbdevices" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>addAllowedUsbDevices(admin: Want, usbDeviceIds: Array&lt;UsbDeviceId&gt;): void</p>     <p>添加USB设备可用名单。</p>     <p>以下情况下，调用本接口会报策略冲突：</p>     <ol>      <li>已经通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-enterprise-restrictions#restrictionssetdisallowedpolicy">setDisallowedPolicy</a>接口禁用了设备USB能力。</li>      <li>已经通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanagersetusbstoragedeviceaccesspolicy">setUsbStorageDeviceAccessPolicy</a>接口设置了USB存储设备访问策略为禁用。</li>      <li>已经通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanageradddisallowedusbdevices14">addDisallowedUsbDevices</a>接口添加了禁止使用的USB设备类型。</li>     </ol>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_USB</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">usbDeviceIds</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbdeviceid">UsbDeviceId</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">USB设备ID数组，UsbDeviceId信息可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-usbmanager#usbmanagergetdevices">getDevices</a>接口获取。USB设备可用名单数组长度上限为1000，若当前允许名单中已有300个USB设备ID，则只允许再添加700个。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200010</td>         <td class="cellrowborder" width="50%">A conflict policy has been configured.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-qha-c106="" class="highlight-div"><div _ngcontent-qha-c106="" class="highlight-div-header"><div _ngcontent-qha-c106="" class="highlight-div-header-left"><div _ngcontent-qha-c106="" class="handle-button expand-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qha-c106="" class="highlight-div-header-right"><div _ngcontent-qha-c106="" class="handle-button ai-button"></div><div _ngcontent-qha-c106="" class="handle-button line-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qha-c106="" class="handle-button theme-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qha-c106="" class="handle-button copy-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qha-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { usbManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">usbDeviceIds</span>: <span class="hljs-title class_">Array</span>&lt;usbManager.<span class="hljs-property">UsbDeviceId</span>&gt; = [{</li><li>      <span class="hljs-attr">vendorId</span>: <span class="hljs-number">1</span>,</li><li>      <span class="hljs-attr">productId</span>: <span class="hljs-number">1</span></li><li>  }];</li><li>  usbManager.<span class="hljs-title function_">addAllowedUsbDevices</span>(wantTemp, usbDeviceIds);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in adding allowed USB devices.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to add allowed USB devices. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="usbmanagerremoveallowedusbdevices" device-type="phone,2in1,tablet">usbManager.removeAllowedUsbDevices<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="usbmanagerremoveallowedusbdevices" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>removeAllowedUsbDevices(admin: Want, usbDeviceIds: Array&lt;UsbDeviceId&gt;): void</p>     <p>移除USB设备可用名单。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_USB</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">usbDeviceIds</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbdeviceid">UsbDeviceId</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">USB设备ID数组，UsbDeviceId信息可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-usbmanager#usbmanagergetdevices">getDevices</a>接口获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-qha-c106="" class="highlight-div"><div _ngcontent-qha-c106="" class="highlight-div-header"><div _ngcontent-qha-c106="" class="highlight-div-header-left"><div _ngcontent-qha-c106="" class="handle-button expand-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qha-c106="" class="highlight-div-header-right"><div _ngcontent-qha-c106="" class="handle-button ai-button"></div><div _ngcontent-qha-c106="" class="handle-button line-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qha-c106="" class="handle-button theme-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qha-c106="" class="handle-button copy-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qha-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { usbManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">usbDeviceIds</span>: <span class="hljs-title class_">Array</span>&lt;usbManager.<span class="hljs-property">UsbDeviceId</span>&gt; = [{</li><li>      <span class="hljs-attr">vendorId</span>: <span class="hljs-number">1</span>,</li><li>      <span class="hljs-attr">productId</span>: <span class="hljs-number">1</span></li><li>  }];</li><li>  usbManager.<span class="hljs-title function_">removeAllowedUsbDevices</span>(wantTemp, usbDeviceIds);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in removing allowed USB devices.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove allowed USB devices. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="usbmanagergetallowedusbdevices" device-type="phone,2in1,tablet">usbManager.getAllowedUsbDevices<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="usbmanagergetallowedusbdevices" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getAllowedUsbDevices(admin: Want): Array&lt;UsbDeviceId&gt;</p>     <p>获取USB设备可用名单。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_USB</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbdeviceid">UsbDeviceId</a>&gt;</td>         <td class="cellrowborder" width="50%">可用USB允许名单设备ID数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-qha-c106="" class="highlight-div"><div _ngcontent-qha-c106="" class="highlight-div-header"><div _ngcontent-qha-c106="" class="highlight-div-header-left"><div _ngcontent-qha-c106="" class="handle-button expand-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qha-c106="" class="highlight-div-header-right"><div _ngcontent-qha-c106="" class="handle-button ai-button"></div><div _ngcontent-qha-c106="" class="handle-button line-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qha-c106="" class="handle-button theme-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qha-c106="" class="handle-button copy-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qha-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { usbManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Array</span>&lt;usbManager.<span class="hljs-property">UsbDeviceId</span>&gt; = usbManager.<span class="hljs-title function_">getAllowedUsbDevices</span>(wantTemp);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting allowed USB devices. Result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get allowed USB devices. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="usbmanagersetusbstoragedeviceaccesspolicy" device-type="phone,2in1,tablet">usbManager.setUsbStorageDeviceAccessPolicy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="usbmanagersetusbstoragedeviceaccesspolicy" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>setUsbStorageDeviceAccessPolicy(admin: Want, usbPolicy: UsbPolicy): void</p>     <p>设置USB存储设备访问策略。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>在调用接口前，确保已暂停USB存储设备的读写操作，保证操作的稳定性和数据的完整性，否则可能出现不可预期的异常。</p>      </div></div></div>     <p>以下情况下，通过本接口设置USB存储设备访问策略为可读可写/只读，会报策略冲突：</p>     <ol>      <li>已经通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-enterprise-restrictions#restrictionssetdisallowedpolicy">setDisallowedPolicy</a>接口禁用了设备USB能力。</li>      <li>已经通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanageradddisallowedusbdevices14">addDisallowedUsbDevices</a>接口将存储类型的USB设备添加为禁止使用的USB设备类型。</li>      <li>已经通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-enterprise-restrictions#restrictionssetdisallowedpolicyforaccount14">setDisallowedPolicyForAccount</a>接口禁用了某用户USB存储设备写入能力。</li>     </ol>     <p>以下情况下，通过本接口设置USB存储设备访问策略为禁用，会报策略冲突：</p>     <ol>      <li>已经通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-enterprise-restrictions#restrictionssetdisallowedpolicy">setDisallowedPolicy</a>接口禁用了设备USB能力。</li>      <li>已经通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanageraddallowedusbdevices">addAllowedUsbDevices</a>接口添加了USB设备可用名单。</li>      <li>已经通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-enterprise-restrictions#restrictionssetdisallowedpolicyforaccount14">setDisallowedPolicyForAccount</a>接口禁用了某用户USB存储设备写入能力。</li>     </ol>     <p>通过本接口设置，或者通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanageradddisallowedusbdevices14">addDisallowedUsbDevices</a>接口添加存储类型的USB设备，均可禁用USB存储设备。推荐使用后者。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_USB</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.14.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.14.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.14.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.14.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">usbPolicy</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbpolicy">UsbPolicy</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">USB存储设备访问策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.17.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.17.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200010</td>         <td class="cellrowborder" width="50%">A conflict policy has been configured.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-qha-c106="" class="highlight-div"><div _ngcontent-qha-c106="" class="highlight-div-header"><div _ngcontent-qha-c106="" class="highlight-div-header-left"><div _ngcontent-qha-c106="" class="handle-button expand-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qha-c106="" class="highlight-div-header-right"><div _ngcontent-qha-c106="" class="handle-button ai-button"></div><div _ngcontent-qha-c106="" class="handle-button line-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qha-c106="" class="handle-button theme-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qha-c106="" class="handle-button copy-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qha-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { usbManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">policy</span>: usbManager.<span class="hljs-property">UsbPolicy</span> = usbManager.<span class="hljs-property">UsbPolicy</span>.<span class="hljs-property">DISABLED</span>;</li><li>  usbManager.<span class="hljs-title function_">setUsbStorageDeviceAccessPolicy</span>(wantTemp, policy);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting USB storage device access policy.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set USB storage device access policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="usbmanagergetusbstoragedeviceaccesspolicy" device-type="phone,2in1,tablet">usbManager.getUsbStorageDeviceAccessPolicy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="usbmanagergetusbstoragedeviceaccesspolicy" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getUsbStorageDeviceAccessPolicy(admin: Want): UsbPolicy</p>     <p>获取USB存储设备访问策略。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_USB</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbpolicy">UsbPolicy</a></td>         <td class="cellrowborder" width="50%">USB存储设备访问策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-qha-c106="" class="highlight-div"><div _ngcontent-qha-c106="" class="highlight-div-header"><div _ngcontent-qha-c106="" class="highlight-div-header-left"><div _ngcontent-qha-c106="" class="handle-button expand-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qha-c106="" class="highlight-div-header-right"><div _ngcontent-qha-c106="" class="handle-button ai-button"></div><div _ngcontent-qha-c106="" class="handle-button line-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qha-c106="" class="handle-button theme-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qha-c106="" class="handle-button copy-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qha-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { usbManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: usbManager.<span class="hljs-property">UsbPolicy</span> = usbManager.<span class="hljs-title function_">getUsbStorageDeviceAccessPolicy</span>(wantTemp);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting USB storage device access policy. Result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get USB storage device access policy. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="usbmanageradddisallowedusbdevices14" device-type="phone,2in1,tablet">usbManager.addDisallowedUsbDevices<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="usbmanageradddisallowedusbdevices14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>addDisallowedUsbDevices(admin: Want, usbDevices: Array&lt;UsbDeviceType&gt;): void</p>     <p>添加禁止使用的USB设备类型。</p>     <p>以下情况下，调用本接口会报策略冲突：</p>     <ol>      <li>已经通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-enterprise-restrictions#restrictionssetdisallowedpolicy">setDisallowedPolicy</a>接口禁用了设备USB能力。</li>      <li>已经通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanageraddallowedusbdevices">addAllowedUsbDevices</a>接口添加了USB设备可用名单。</li>      <li>已经通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-enterprise-restrictions#restrictionssetdisallowedpolicyforaccount14">setDisallowedPolicyForAccount</a>接口禁用了某用户USB存储设备写入能力。</li>     </ol>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_USB</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">usbDevices</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbdevicetype14">UsbDeviceType</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要添加的USB设备类型的数组，UsbDeviceType信息可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-usbmanager#usbmanagergetdevices">getDevices</a>接口获取。USB设备禁用名单数组长度上限为200，若当前禁用名单中已有100个USB设备ID，则只允许再添加100个。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200010</td>         <td class="cellrowborder" width="50%">A conflict policy has been configured.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-qha-c106="" class="highlight-div"><div _ngcontent-qha-c106="" class="highlight-div-header"><div _ngcontent-qha-c106="" class="highlight-div-header-left"><div _ngcontent-qha-c106="" class="handle-button expand-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qha-c106="" class="highlight-div-header-right"><div _ngcontent-qha-c106="" class="handle-button ai-button"></div><div _ngcontent-qha-c106="" class="handle-button line-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qha-c106="" class="handle-button theme-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qha-c106="" class="handle-button copy-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qha-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { usbManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">usbDevices</span>: <span class="hljs-title class_">Array</span>&lt;usbManager.<span class="hljs-property">UsbDeviceType</span>&gt; = [{</li><li>      <span class="hljs-attr">baseClass</span>: <span class="hljs-number">8</span>,</li><li>      <span class="hljs-attr">subClass</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">protocol</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">descriptor</span>: usbManager.<span class="hljs-property">Descriptor</span>.<span class="hljs-property">INTERFACE</span></li><li>  }];</li><li>  usbManager.<span class="hljs-title function_">addDisallowedUsbDevices</span>(wantTemp, usbDevices);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in adding disallowed USB devices.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to add disallowed USB devices. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="usbmanagerremovedisallowedusbdevices14" device-type="phone,2in1,tablet">usbManager.removeDisallowedUsbDevices<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="usbmanagerremovedisallowedusbdevices14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>removeDisallowedUsbDevices(admin: Want, usbDevices: Array&lt;UsbDeviceType&gt;): void</p>     <p>移除禁止使用的USB设备类型。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_USB</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">usbDevices</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbdevicetype14">UsbDeviceType</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要移除的USB设备类型的数组，UsbDeviceType信息可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-usbmanager#usbmanagergetdevices">getDevices</a>接口获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-qha-c106="" class="highlight-div"><div _ngcontent-qha-c106="" class="highlight-div-header"><div _ngcontent-qha-c106="" class="highlight-div-header-left"><div _ngcontent-qha-c106="" class="handle-button expand-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qha-c106="" class="highlight-div-header-right"><div _ngcontent-qha-c106="" class="handle-button ai-button"></div><div _ngcontent-qha-c106="" class="handle-button line-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qha-c106="" class="handle-button theme-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qha-c106="" class="handle-button copy-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qha-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { usbManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">usbDevices</span>: <span class="hljs-title class_">Array</span>&lt;usbManager.<span class="hljs-property">UsbDeviceType</span>&gt; = [{</li><li>      <span class="hljs-attr">baseClass</span>: <span class="hljs-number">8</span>,</li><li>      <span class="hljs-attr">subClass</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">protocol</span>: <span class="hljs-number">0</span>,</li><li>      <span class="hljs-attr">descriptor</span>: usbManager.<span class="hljs-property">Descriptor</span>.<span class="hljs-property">INTERFACE</span></li><li>  }];</li><li>  usbManager.<span class="hljs-title function_">removeDisallowedUsbDevices</span>(wantTemp, usbDevices);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in removing disallowed USB devices.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove disallowed USB devices. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="usbmanagergetdisallowedusbdevices14" device-type="phone,2in1,tablet">usbManager.getDisallowedUsbDevices<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="usbmanagergetdisallowedusbdevices14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getDisallowedUsbDevices(admin: Want): Array&lt;UsbDeviceType&gt;</p>     <p>获取禁止使用的USB设备类型。</p>     <p><strong>需要权限：</strong> ohos.permission.ENTERPRISE_MANAGE_USB</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <p><strong>模型约束：</strong> 此接口仅可在Stage模型下使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">admin</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">企业设备管理扩展组件。Want中必须包含企业设备管理扩展能力的abilityName和所在应用的bundleName。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbdevicetype14">UsbDeviceType</a>&gt;</td>         <td class="cellrowborder" width="50%">禁止使用的USB设备类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-enterprisedevicemanager">企业设备管理错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">9200001</td>         <td class="cellrowborder" width="50%">The application is not an administrator application of the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">9200002</td>         <td class="cellrowborder" width="50%">The administrator application does not have permission to manage the device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-qha-c106="" class="highlight-div"><div _ngcontent-qha-c106="" class="highlight-div-header"><div _ngcontent-qha-c106="" class="highlight-div-header-left"><div _ngcontent-qha-c106="" class="handle-button expand-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qha-c106="" class="highlight-div-header-right"><div _ngcontent-qha-c106="" class="handle-button ai-button"></div><div _ngcontent-qha-c106="" class="handle-button line-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qha-c106="" class="handle-button theme-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qha-c106="" class="handle-button copy-button"><div _ngcontent-qha-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qha-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { usbManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MDMKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">wantTemp</span>: <span class="hljs-title class_">Want</span> = {</li><li>  <span class="hljs-comment">// 需根据实际情况进行替换</span></li><li>  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EnterpriseAdminAbility'</span></li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Array</span>&lt;usbManager.<span class="hljs-property">UsbDeviceType</span>&gt; = usbManager.<span class="hljs-title function_">getDisallowedUsbDevices</span>(wantTemp);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in getting disallowed USB devices. Result: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get disallowed USB devices. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="usbdeviceid" device-type="phone,2in1,tablet">UsbDeviceId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="usbdeviceid" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>USB设备ID信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">vendorId</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">厂商ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">productId</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">产品ID。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="usbdevicetype14" device-type="phone,2in1,tablet">UsbDeviceType<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="usbdevicetype14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>USB设备类型信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">baseClass</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>类型编码。</p>          <p>可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-usbmanager#usbmanagergetdevices">getDevices</a>接口获取已接入主设备的USB设备列表，需在返回值列表中查找当前设备，查看其值。</p>          <p>先根据此值确定descriptor应该传入的类型。若descriptor为DEVICE，则本字段取USBDevice.clazz字段值，若descriptor为INTERFACE，则本字段取USBDevice.configs.interfaces.clazz字段值。</p>          <p>若字段值为255，表示此设备的类型编码是厂商自定义编码，则使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanageradddisallowedusbdevices14">addDisallowedUsbDevices</a>/<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanagerremovedisallowedusbdevices14">removeDisallowedUsbDevices</a>接口禁用/解禁该设备不生效；若字段值未在<a href="https://www.usb.org/defined-class-codes" target="_blank">defined-class-codes</a>中定义，则使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanageradddisallowedusbdevices14">addDisallowedUsbDevices</a>/<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanagerremovedisallowedusbdevices14">removeDisallowedUsbDevices</a>接口禁用/解禁该设备不生效。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">subClass</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>子类型编码。</p>          <p>可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-usbmanager#usbmanagergetdevices">getDevices</a>接口获取已接入主设备的USB设备列表，需在返回值列表中查找当前设备，查看其值。</p>          <p>先根据baseClass的值确定descriptor应该传入的类型。若descriptor为DEVICE，则本字段取USBDevice.subClass字段值，若descriptor为INTERFACE，则本字段取USBDevice.configs.interfaces.subClass字段值。</p>          <p>若字段值为255，表示此设备的子类型编码是厂商自定义编码，则使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanageradddisallowedusbdevices14">addDisallowedUsbDevices</a>/<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanagerremovedisallowedusbdevices14">removeDisallowedUsbDevices</a>接口禁用/解禁该设备不生效；若字段值未在<a href="https://www.usb.org/defined-class-codes" target="_blank">defined-class-codes</a>中定义，则使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanageradddisallowedusbdevices14">addDisallowedUsbDevices</a>/<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanagerremovedisallowedusbdevices14">removeDisallowedUsbDevices</a>接口禁用/解禁该设备不生效。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">protocol</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>协议编码。</p>          <p>可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-usbmanager#usbmanagergetdevices">getDevices</a>接口获取已接入主设备的USB设备列表，需在返回值列表中查找当前设备，查看其值。</p>          <p>先根据baseClass的值确定descriptor应该传入的类型。若descriptor为DEVICE，则本字段取USBDevice.protocol字段值，若descriptor为INTERFACE，则本字段取USBDevice.configs.interfaces.protocol字段值。</p>          <p>若字段值为255，表示此设备的协议编码是厂商自定义编码，则使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanageradddisallowedusbdevices14">addDisallowedUsbDevices</a>/<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanagerremovedisallowedusbdevices14">removeDisallowedUsbDevices</a>接口禁用/解禁该设备不生效；若字段值未在<a href="https://www.usb.org/defined-class-codes" target="_blank">defined-class-codes</a>中定义，则使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanageradddisallowedusbdevices14">addDisallowedUsbDevices</a>/<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanagerremovedisallowedusbdevices14">removeDisallowedUsbDevices</a>接口禁用/解禁该设备不生效。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">descriptor</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#descriptor14">Descriptor</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>USB描述符。</p>          <p>可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-usbmanager#usbmanagergetdevices">getDevices</a>接口获取已接入主设备的USB设备列表，需在返回值列表中查找当前设备，查看其值。</p>          <p>若此值USBDevice.clazz字段值为0，则须在<a href="https://www.usb.org/defined-class-codes" target="_blank">defined-class-codes</a>中的Base Class列查找此值USBDevice.configs.interfaces.clazz字段值，查找结果所在行所对应的Descriptor Usage列就表示当前应该传入的descriptor类型（若Descriptor Usage列为Both，表示两种类型都可以传入，需要设备级禁用时传入DEVICE，需要接口级禁用时传入INTERFACE）;</p>          <p>若此值USBDevice.clazz字段值为255，表示此设备的类型编码是厂商自定义编码，则使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanageradddisallowedusbdevices14">addDisallowedUsbDevices</a>/<a href="/consumer/cn/doc/harmonyos-references/js-apis-enterprise-usbmanager#usbmanagerremovedisallowedusbdevices14">removeDisallowedUsbDevices</a>接口禁用/解禁该设备不生效；若此值USBDevice.clazz字段值为其他值，则须在<a href="https://www.usb.org/defined-class-codes" target="_blank">defined-class-codes</a>中的Base Class列查找该值，查找结果所在行所对应的Descriptor Usage列就表示当前应该传入的descriptor类型（若Descriptor Usage列为Both，表示两种类型都可以传入，需要设备级禁用时传入DEVICE，需要接口级禁用时传入INTERFACE）。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="usbpolicy" device-type="phone,2in1,tablet">UsbPolicy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="usbpolicy" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>USB读写策略的枚举。</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">READ_WRITE</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">可读可写。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">READ_ONLY</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">只读。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DISABLED</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">禁用。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="descriptor14" device-type="phone,2in1,tablet">Descriptor<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="descriptor14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>USB描述符的枚举。</p>     <p><strong>系统能力：</strong> SystemCapability.Customization.EnterpriseDeviceManager</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">INTERFACE</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">接口描述符。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DEVICE</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">设备描述符。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>