<h1 _ngcontent-uxi-c119="" class="doc-title ng-star-inserted" title="@ohos.file.cloudSync (端云同步能力)"> @ohos.file.cloudSync (端云同步能力) </h1>

<div _ngcontent-uxi-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>该模块向应用提供端云同步能力，包括启动/停止端云同步以及启动/停止原图下载功能。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 10开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { cloudSync } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 650px;">     <h2 id="syncstate12" device-type="phone,2in1,tablet,wearable,tv">SyncState<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="syncstate12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>端云同步状态，为枚举类型。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下同步状态发生变更时，如果应用注册了同步过程事件监听，则通过回调通知应用。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">UPLOADING</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">上行同步中。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">UPLOAD_FAILED</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">上行同步失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DOWNLOADING</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">下行同步中。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DOWNLOAD_FAILED</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">下行同步失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COMPLETED</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">同步成功。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">STOPPED</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">同步已停止。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 861px;">     <h2 id="errortype12" device-type="phone,2in1,tablet,wearable,tv">ErrorType<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="errortype12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>端云同步失败类型，为枚举类型。</p>     <ul>      <li>当前阶段，同步过程中，当开启无限量使用移动数据网络，移动数据网络和WIFI均不可用时，才会返回NETWORK_UNAVAILABLE；开启无限量使用移动数据网络，若有一种类型网络可用，则能正常同步。</li>      <li>同步过程中，非充电场景下，电量低于10%，完成当前批上行同步后停止同步，返回低电量；</li>      <li>触发同步时，非充电场景下，若电量低于10%，则不允许同步，start接口返回对应错误。</li>      <li>上行时，若云端空间不足，则文件上行失败，云端无该文件记录。</li>     </ul>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">NO_ERROR</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">没有错误。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">NETWORK_UNAVAILABLE</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">所有网络不可用。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">WIFI_UNAVAILABLE</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">WIFI不可用。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BATTERY_LEVEL_LOW</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">低电量（低于10%）。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BATTERY_LEVEL_WARNING</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">告警电量（低于15%）。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CLOUD_STORAGE_FULL</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">云端空间不足。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">LOCAL_STORAGE_FULL</td>         <td class="cellrowborder" width="33.33333333333333%">6</td>         <td class="cellrowborder" width="33.33333333333333%">本地空间不足。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DEVICE_TEMPERATURE_TOO_HIGH</td>         <td class="cellrowborder" width="33.33333333333333%">7</td>         <td class="cellrowborder" width="33.33333333333333%">设备温度过高。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">REMOTE_SERVER_ABNORMAL<sup>20+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">8</td>         <td class="cellrowborder" width="33.33333333333333%">远端服务不可用。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 182px;">     <h2 id="syncprogress12" device-type="phone,2in1,tablet,wearable,tv">SyncProgress<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="syncprogress12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>端云同步过程。</p>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 354px;">     <h3 id="属性" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">state</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#syncstate12">SyncState</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">枚举值，端云同步状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">error</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#errortype12">ErrorType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">枚举值，同步失败错误类型。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 468px;">     <h2 id="state11" device-type="phone,2in1,tablet,wearable,tv">State<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="state11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>云文件下载状态，为枚举类型。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">RUNNING</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">云文件正在下载中。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COMPLETED</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">云文件下载完成。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FAILED</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">云文件下载失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">STOPPED</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">云文件下载已停止。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="downloadprogress11" device-type="phone,2in1,tablet,wearable,tv">DownloadProgress<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="downloadprogress11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>云文件下载过程。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 609px;">     <h3 id="属性-1" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">state</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#state11">State</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">枚举值，云文件下载状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">processed</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">已下载数据大小，取值范围[0，9223372036854775807]（单位：Byte）。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">size</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">当前云文件大小，取值范围[0，9223372036854775807]（单位：Byte）。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">uri</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">当前云文件URI。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">error</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#downloaderrortype11">DownloadErrorType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">下载的错误类型。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="filesync12" device-type="phone,2in1,tablet,wearable,tv">FileSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="filesync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>云盘同步对象，用于支撑文件管理器应用完成云盘文件的端云同步流程。在使用前，需要先创建FileSync实例。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 658px;">     <h3 id="constructor12" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p>     <p>端云同步流程的构造函数，用于获取FileSync类的实例。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes:Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> fileSync = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileSync</span>()</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1117px;">     <h3 id="on12" device-type="phone,2in1,tablet,wearable,tv">on<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="on12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'progress', callback: Callback&lt;SyncProgress&gt;): void</p>     <p>云盘同步对象添加同步过程事件监听。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">订阅的事件类型，取值为'progress'（同步过程事件）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#syncprogress12">SyncProgress</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">同步过程事件回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> fileSync = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileSync</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">pg: cloudSync.SyncProgress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"file sync state："</span> + pg.<span class="hljs-property">state</span> + <span class="hljs-string">"error type:"</span> + pg.<span class="hljs-property">error</span>);</li><li>}</li><li>
</li><li>fileSync.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, callback);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1213px;">     <h3 id="off12" device-type="phone,2in1,tablet,wearable,tv">off<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="off12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'progress', callback?: Callback&lt;SyncProgress&gt;): void</p>     <p>云盘同步对象移除'progress'类型的指定callback回调。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消订阅的事件类型，取值为'progress'（同步过程事件）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#syncprogress12">SyncProgress</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">同步过程事件回调， 默认值为null。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> fileSync = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileSync</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">pg: cloudSync.SyncProgress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"file sync state："</span> + pg.<span class="hljs-property">state</span> + <span class="hljs-string">"error type:"</span> + pg.<span class="hljs-property">error</span>);</li><li>}</li><li>
</li><li>fileSync.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, callback);</li><li>
</li><li>fileSync.<span class="hljs-title function_">off</span>(<span class="hljs-string">'progress'</span>, callback);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1401px;">     <h3 id="start12" device-type="phone,2in1,tablet,wearable,tv">start<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="start12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start(): Promise&lt;void&gt;</p>     <p>异步方法启动云盘端云同步。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes:Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400001</td>         <td class="cellrowborder" width="50%">Cloud status not ready.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400002</td>         <td class="cellrowborder" width="50%">Network unavailable.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400003</td>         <td class="cellrowborder" width="50%">Low battery level.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileSync = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileSync</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">pg: cloudSync.SyncProgress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"file sync state："</span> + pg.<span class="hljs-property">state</span> + <span class="hljs-string">"error type:"</span> + pg.<span class="hljs-property">error</span>);</li><li>}</li><li>
</li><li>fileSync.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, callback);</li><li>
</li><li>fileSync.<span class="hljs-title function_">start</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"start sync successfully"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"start sync failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1309px;">     <h3 id="start12-1" device-type="phone,2in1,tablet,wearable,tv">start<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="start12-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start(callback: AsyncCallback&lt;void&gt;): void</p>     <p>异步方法启动云盘端云同步。使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步启动端云同步的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400001</td>         <td class="cellrowborder" width="50%">Cloud status not ready.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400002</td>         <td class="cellrowborder" width="50%">Network unavailable.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400003</td>         <td class="cellrowborder" width="50%">Low battery level.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileSync = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileSync</span>();</li><li>
</li><li>fileSync.<span class="hljs-title function_">start</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"start sync failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"start sync successfully"</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1140px;">     <h3 id="stop12" device-type="phone,2in1,tablet,wearable,tv">stop<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(): Promise&lt;void&gt;</p>     <p>异步方法停止云盘端云同步。使用Promise异步回调。</p>     <p>调用stop接口，同步流程会停止。再次调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#start12">start</a>接口会继续同步。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">使用Promise形式返回停止端云同步的结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes:Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileSync = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileSync</span>();</li><li>
</li><li>fileSync.<span class="hljs-title function_">stop</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"stop sync successfully"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"stop sync failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1192px;">     <h3 id="stop12-1" device-type="phone,2in1,tablet,wearable,tv">stop<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop12-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(callback: AsyncCallback&lt;void&gt;): void</p>     <p>异步方法停止云盘端云同步。使用callback异步回调。</p>     <p>调用stop接口，同步流程会停止。再次调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#start12">start</a>接口会继续同步。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步停止端云同步的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileSync = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileSync</span>();</li><li>
</li><li>fileSync.<span class="hljs-title function_">stop</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"stop sync failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"stop sync successfully"</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1116px;">     <h3 id="getlastsynctime12" device-type="phone,2in1,tablet,wearable,tv">getLastSyncTime<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getlastsynctime12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getLastSyncTime(): Promise&lt;number&gt;</p>     <p>异步方法获取上次同步时间。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">使用Promise形式返回上次同步时间。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes:Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileSync = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileSync</span>();</li><li>
</li><li>fileSync.<span class="hljs-title function_">getLastSyncTime</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">timeStamp: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">let</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(timeStamp);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"get last sync time successfully:"</span>+ date);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"get last sync time failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1192px;">     <h3 id="getlastsynctime12-1" device-type="phone,2in1,tablet,wearable,tv">getLastSyncTime<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getlastsynctime12-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getLastSyncTime(callback: AsyncCallback&lt;number&gt;): void</p>     <p>异步方法获取上次同步时间。使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步获取上次同步时间的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileSync = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileSync</span>();</li><li>
</li><li>fileSync.<span class="hljs-title function_">getLastSyncTime</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, timeStamp: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"get last sync time with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-keyword">let</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(timeStamp);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"get last sync time successfully:"</span>+ date);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="cloudfilecache11" device-type="phone,2in1,tablet,wearable,tv">CloudFileCache<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cloudfilecache11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>云盘文件缓存对象，用来支撑文件管理应用原文件下载流程。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 658px;">     <h3 id="construct11" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">construct<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="construct11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p>     <p>云盘文件缓存流程的构造函数，用于获取CloudFileCache类的实例。多个实例之间不互相共享数据。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes:Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1309px;">     <h3 id="on11" device-type="phone,2in1,tablet,wearable,tv">on<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="on11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'progress', callback: Callback&lt;DownloadProgress&gt;): void</p>     <p>添加云盘文件缓存过程事件监听。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">订阅的事件类型，取值为'progress'（下载过程事件）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#downloadprogress11">DownloadProgress</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">云文件下载过程事件回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">pg: cloudSync.DownloadProgress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"download state："</span> + pg.<span class="hljs-property">state</span>);</li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  fileCache.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, callback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">const</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1501px;">     <h3 id="on20" device-type="phone,2in1,tablet,wearable,tv">on<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="on20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'batchDownload', callback: Callback&lt;MultiDownloadProgress&gt;): void</p>     <p>添加云文件批量缓存事件的监听。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">订阅的事件类型，取值为'batchDownload'，表示批量缓存过程事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#multidownloadprogress20">MultiDownloadProgress</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">云文件批量缓存过程的事件回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: 1.Failed to access the database or execute the SQL statement. 2.System error, such as a null pointer, insufficient memory or a JS engine exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">data: cloudSync.MultiDownloadProgress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Batch download progress: downloadedSize: <span class="hljs-subst">${data.downloadedSize}</span>, totalSize: <span class="hljs-subst">${data.totalSize}</span>`</span>);</li><li>  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">state</span> == cloudSync.<span class="hljs-property">State</span>.<span class="hljs-property">COMPLETED</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Batch download finished.'</span>);</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data.<span class="hljs-property">state</span> == cloudSync.<span class="hljs-property">State</span>.<span class="hljs-property">FAILED</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Batch download stopped, error type: <span class="hljs-subst">${data.errType}</span>.`</span>);</li><li>  }</li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  fileCache.<span class="hljs-title function_">on</span>(<span class="hljs-string">'batchDownload'</span>, callback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to register download callback, error code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1405px;">     <h3 id="off11" device-type="phone,2in1,tablet,wearable,tv">off<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="off11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'progress', callback?: Callback&lt;DownloadProgress&gt;): void</p>     <p>云盘文件缓存对象移除'progress'类型的指定callback回调。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消订阅的事件类型，取值为'progress'（同步过程事件）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#downloadprogress11">DownloadProgress</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">云文件下载过程事件回调。若填写，将视为取消指定的回调函数；否则为取消当前订阅的所有回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">pg: cloudSync.DownloadProgress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"download state："</span> + pg.<span class="hljs-property">state</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  fileCache.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, callback);</li><li>  fileCache.<span class="hljs-title function_">off</span>(<span class="hljs-string">'progress'</span>, callback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">const</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1477px;">     <h3 id="off20" device-type="phone,2in1,tablet,wearable,tv">off<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="off20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'batchDownload', callback?: Callback&lt;MultiDownloadProgress&gt;): void</p>     <p>云盘文件缓存对象移除由<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#on20">on</a>接口添加的云文件批量缓存过程事件的监听。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消订阅的事件类型，取值为'batchDownload'，表示批量缓存过程事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#multidownloadprogress20">MultiDownloadProgress</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">云文件批量缓存过程事件的回调。如果填写此参数，将取消指定的回调函数；否则，将取消当前订阅的相同事件类型的所有回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: 1.Failed to access the database or execute the SQL statement. 2.System error, such as a null pointer, insufficient memory or a JS engine exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">pg: cloudSync.MultiDownloadProgress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"download state："</span> + pg.<span class="hljs-property">state</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  fileCache.<span class="hljs-title function_">on</span>(<span class="hljs-string">'batchDownload'</span>, callback);</li><li>  fileCache.<span class="hljs-title function_">off</span>(<span class="hljs-string">'batchDownload'</span>, callback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unregister download callback, error code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1720px;">     <h3 id="start11" device-type="phone,2in1,tablet,wearable,tv">start<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="start11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start(uri: string): Promise&lt;void&gt;</p>     <p>异步方法启动云盘文件缓存。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待下载文件uri。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">使用Promise形式返回启动云文件下载的结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900002</td>         <td class="cellrowborder" width="50%">No such file or directory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900025</td>         <td class="cellrowborder" width="50%">No space left on device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid URI.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li><li><span class="hljs-keyword">let</span> path = <span class="hljs-string">"/data/storage/el2/cloud/1.txt"</span>;</li><li><span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(path);</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  fileCache.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, <span class="hljs-function">(<span class="hljs-params">pg: cloudSync.DownloadProgress</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"download state:"</span> + pg.<span class="hljs-property">state</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">const</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li><li>
</li><li>fileCache.<span class="hljs-title function_">start</span>(uri).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"start download successfully"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"start download failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1450px;">     <h3 id="start11-1" device-type="phone,2in1,tablet,wearable,tv">start<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="start11-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start(uri: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>异步方法启动云盘文件缓存。使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待下载文件uri。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步启动云文件下载的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900002</td>         <td class="cellrowborder" width="50%">No such file or directory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900025</td>         <td class="cellrowborder" width="50%">No space left on device.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid URI.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li><li><span class="hljs-keyword">let</span> path = <span class="hljs-string">"/data/storage/el2/cloud/1.txt"</span>;</li><li><span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(path);</li><li>
</li><li>fileCache.<span class="hljs-title function_">start</span>(uri, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"start download failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"start download successfully"</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1909px;">     <h3 id="startbatch20" device-type="phone,2in1,tablet,wearable,tv">startBatch<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="startbatch20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startBatch(uris: Array&lt;string&gt;, fileType?: DownloadFileType): Promise&lt;number&gt;</p>     <p>启动云文件批量缓存。使用Promise异步回调。</p>     <p>不同的批量缓存任务可以通过接口返回的任务ID区分。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uris</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">URI列表，一次调用最多支持传入400个URI，超过报错22400004。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">fileType</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#downloadfiletype20">DownloadFileType</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">文件类型，默认值为CONTENT类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回启动的云文件批量缓存任务的ID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error. Possible causes: 1.IPC failed or timed out. 2.Failed to load the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid uri.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400004</td>         <td class="cellrowborder" width="50%">Exceed the maximum limit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: 1.Failed to access the database or execute the SQL statement. 2.System error, such as a null pointer, insufficient memory or a JS engine exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li><li><span class="hljs-keyword">try</span> {</li><li>  fileCache.<span class="hljs-title function_">on</span>(<span class="hljs-string">'batchDownload'</span>, <span class="hljs-function">(<span class="hljs-params">pg: cloudSync.MultiDownloadProgress</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`batch download state：<span class="hljs-subst">${pg.state}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unregister download callback, error code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uriList</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [];</li><li>fileCache.<span class="hljs-title function_">startBatch</span>(uriList, cloudSync.<span class="hljs-property">DownloadFileType</span>.<span class="hljs-property">CONTENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">downloadId: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`start batch download successfully, taskId: <span class="hljs-subst">${downloadId}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`start download failed with error message: <span class="hljs-subst">${err.message}</span>, error code: <span class="hljs-subst">${err.code}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1638px;">     <h3 id="stop11" device-type="phone,2in1,tablet,wearable,tv">stop<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(uri: string, needClean?: boolean): Promise&lt;void&gt;</p>     <p>异步方法停止云盘文件缓存。使用Promise异步回调。</p>     <p>调用stop接口，当前文件下载流程会终止，默认不删除缓存文件，再次调用start接口重新启动下载。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待下载文件uri。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">needClean<sup>12+</sup></td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>是否删除已下载的文件。默认值为false表示不删除；true表示删除。</p>          <p>从API version12开始支持该参数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">使用Promise形式返回停止云文件下载的结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900002</td>         <td class="cellrowborder" width="50%">No such file or directory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid URI.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li><li><span class="hljs-keyword">let</span> path = <span class="hljs-string">"/data/storage/el2/cloud/1.txt"</span>;</li><li><span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(path);</li><li>
</li><li>fileCache.<span class="hljs-title function_">stop</span>(uri, <span class="hljs-literal">true</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"stop download successfully"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"stop download failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1443px;">     <h3 id="stop11-1" device-type="phone,2in1,tablet,wearable,tv">stop<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop11-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(uri: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>异步方法停止云盘文件缓存。使用callback异步回调。</p>     <p>调用stop接口，当前文件下载流程会终止，不删除缓存文件，再次调用start接口重新启动下载。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待下载文件uri。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步停止云文件下载的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900002</td>         <td class="cellrowborder" width="50%">No such file or directory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid URI.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li><li><span class="hljs-keyword">let</span> path = <span class="hljs-string">"/data/storage/el2/cloud/1.txt"</span>;</li><li><span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(path);</li><li>
</li><li>fileCache.<span class="hljs-title function_">stop</span>(uri, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"stop download failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"stop download successfully"</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1823px;">     <h3 id="stopbatch20" device-type="phone,2in1,tablet,wearable,tv">stopBatch<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stopbatch20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stopBatch(downloadId: number, needClean?: boolean): Promise&lt;void&gt;</p>     <p>停止由<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#startbatch20">startBatch</a>启动的云文件批量缓存任务。使用Promise异步回调。</p>     <p>调用stopBatch接口会终止当前文件批量缓存流程，未下载完成的缓存文件是否删除由needClean参数决定。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">downloadId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要停止缓存的任务ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">needClean</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">是否删除未完成缓存的文件。默认值为false表示不删除；true表示删除。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">使用Promise形式返回，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error. Possible causes: 1.IPC failed or timed out. 2.Failed to load the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Invalid argument. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: 1.Failed to access the database or execute the SQL statement. 2.System error, such as a null pointer, insufficient memory or a JS engine exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> taskId = -<span class="hljs-number">1</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uriList</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [];</li><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li><li>fileCache.<span class="hljs-title function_">startBatch</span>(uriList, cloudSync.<span class="hljs-property">DownloadFileType</span>.<span class="hljs-property">CONTENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">downloadId: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  taskId = downloadId;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"start batch download successfully"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`start batch download failed with error message: <span class="hljs-subst">${err.message}</span>, error code: <span class="hljs-subst">${err.code}</span>`</span>);</li><li>});</li><li>
</li><li><span class="hljs-keyword">let</span> needStop = <span class="hljs-literal">true</span>;</li><li><span class="hljs-keyword">if</span> (needStop &amp;&amp; taskId &gt; <span class="hljs-number">0</span>) {</li><li>  fileCache.<span class="hljs-title function_">stopBatch</span>(taskId, <span class="hljs-literal">true</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"stop batch download successfully"</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`stop batch download failed with error message: <span class="hljs-subst">${err.message}</span>, error code: <span class="hljs-subst">${err.code}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1539px;">     <h3 id="cleanfilecache20" device-type="phone,2in1,tablet,wearable,tv">cleanFileCache<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cleanfilecache20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cleanFileCache(uri: string): void</p>     <p>同步方法删除文件缓存。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待删除缓存文件的URI。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error. Possible causes:1.IPC failed or timed out. 2.Failed to load the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900002</td>         <td class="cellrowborder" width="50%">No such file or directory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900010</td>         <td class="cellrowborder" width="50%">Try again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900012</td>         <td class="cellrowborder" width="50%">Permission denied by the file system.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid URI.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes:1.Failed to access the database or execute the SQL statement. 2.System error, such as a null pointer, insufficient memory or a JS engine exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li><li><span class="hljs-keyword">let</span> path = <span class="hljs-string">"/data/storage/el2/cloud/1.txt"</span>;</li><li><span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(path);</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  fileCache.<span class="hljs-title function_">cleanFileCache</span>(uri);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>:<span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"clean file cache failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 558px;">     <h2 id="downloaderrortype11" device-type="phone,2in1,tablet,wearable,tv">DownloadErrorType<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="downloaderrortype11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>端云下载错误类型，为枚举类型。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">NO_ERROR</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">没有错误。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">UNKNOWN_ERROR</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">未知错误。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">NETWORK_UNAVAILABLE</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">网络不可用。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">LOCAL_STORAGE_FULL</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">本地空间不足。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CONTENT_NOT_FOUND</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">云端空间未找到对应文件。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FREQUENT_USER_REQUESTS</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">用户请求过于频繁。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 423px;">     <h2 id="downloadfiletype20" device-type="phone,2in1,tablet,wearable,tv">DownloadFileType<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="downloadfiletype20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>云盘缓存文件类型的枚举。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">CONTENT</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">content类型文件。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">THUMBNAIL</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">thumbnail类型文件。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">LCD</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">lcd类型文件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 402px;">     <h2 id="failedfileinfo20" device-type="phone,2in1,tablet,wearable,tv">FailedFileInfo<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="failedfileinfo20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>云文件批量缓存失败列表及失败原因。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">uri</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">下载失败文件URI。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">error</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#downloaderrortype11">DownloadErrorType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">文件下载失败错误类型。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="multidownloadprogress20" device-type="phone,2in1,tablet,wearable,tv">MultiDownloadProgress<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="multidownloadprogress20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>云文件批量缓存的进度信息。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1224px;">     <h3 id="属性-2" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">state</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#state11">State</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">批量缓存任务的执行状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">taskId</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">批量缓存任务的ID，取值范围为0到INT64_MAX。如果进度异常，返回值为-1。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">successfulCount</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">缓存成功的文件数量，取值范围为0至400，单位：个。如果进度异常，返回值为-1。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">failedCount</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">缓存失败的文件数，取值范围为0至400，单位：个。如果进度异常，返回值为-1。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">totalCount</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">文件总数，取值范围为0至400，单位：个。如果进度异常，返回值为-1。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">downloadedSize</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">已缓存的文件大小，取值范围为 [0, INT64_MAX)，单位：Byte。如果进度异常，返回值为 INT64_MAX。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">totalSize</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">待缓存的文件总大小，取值范围为 [0, INT64_MAX)，单位为 Byte。如果进度异常，返回值为 INT64_MAX。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">errType</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#downloaderrortype11">DownloadErrorType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">返回批量缓存任务执行失败时的错误类型。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1517px;">     <h3 id="getfailedfiles20" device-type="phone,2in1,tablet,wearable,tv">getFailedFiles<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getfailedfiles20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getFailedFiles(): Array&lt;FailedFileInfo&gt;</p>     <p>获取批量缓存失败的文件列表。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#failedfileinfo20">FailedFileInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">返回缓存失败的文件URI列表及其对应的错误类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: 1.Failed to access the database or execute the SQL statement. 2.System error, such as a null pointer, insufficient memory or a JS engine exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> taskId = -<span class="hljs-number">1</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">failedList</span>: <span class="hljs-title class_">Array</span>&lt;cloudSync.<span class="hljs-property">FailedFileInfo</span>&gt; = [];</li><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">data: cloudSync.MultiDownloadProgress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Batch download progress: downloadedSize: <span class="hljs-subst">${data.downloadedSize}</span>, totalSize: <span class="hljs-subst">${data.totalSize}</span>`</span>);</li><li>  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">state</span> == cloudSync.<span class="hljs-property">State</span>.<span class="hljs-property">FAILED</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Batch download stopped, error type: <span class="hljs-subst">${data.errType}</span>.`</span>);</li><li>    failedList = data.<span class="hljs-title function_">getFailedFiles</span>();</li><li>  }</li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  fileCache.<span class="hljs-title function_">on</span>(<span class="hljs-string">'batchDownload'</span>, callback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to register download callback, error code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uriList</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [];</li><li>fileCache.<span class="hljs-title function_">startBatch</span>(uriList, cloudSync.<span class="hljs-property">DownloadFileType</span>.<span class="hljs-property">CONTENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">downloadId: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  taskId = downloadId;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"start batch download successfully"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`start batch download failed with error message: <span class="hljs-subst">${err.message}</span>, error code: <span class="hljs-subst">${err.code}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1469px;">     <h3 id="getsuccessfulfiles20" device-type="phone,2in1,tablet,wearable,tv">getSuccessfulFiles<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsuccessfulfiles20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSuccessfulFiles(): Array&lt;string&gt;</p>     <p>获取批量缓存成功的文件列表。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="50%">数组类型，返回缓存成功的文件URI列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: 1.Failed to access the database or execute the SQL statement. 2.System error, such as a null pointer, insufficient memory or a JS engine exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">finishedList</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [];</li><li><span class="hljs-keyword">let</span> fileCache = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">CloudFileCache</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">data: cloudSync.MultiDownloadProgress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Batch download progress: downloadedSize: <span class="hljs-subst">${data.downloadedSize}</span>, totalSize: <span class="hljs-subst">${data.totalSize}</span>`</span>);</li><li>  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">state</span> == cloudSync.<span class="hljs-property">State</span>.<span class="hljs-property">COMPLETED</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Batch download stopped, error type: <span class="hljs-subst">${data.errType}</span>.`</span>);</li><li>    finishedList = data.<span class="hljs-title function_">getSuccessfulFiles</span>();</li><li>  }</li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  fileCache.<span class="hljs-title function_">on</span>(<span class="hljs-string">'batchDownload'</span>, callback);</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-keyword">const</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to register download callback, error code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uriList</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [];</li><li>fileCache.<span class="hljs-title function_">startBatch</span>(uriList, cloudSync.<span class="hljs-property">DownloadFileType</span>.<span class="hljs-property">CONTENT</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">downloadId: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`start batch download successfully, taskId: <span class="hljs-subst">${downloadId}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`start batch download failed with error message: <span class="hljs-subst">${err.message}</span>, error code: <span class="hljs-subst">${err.code}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1527px;">     <h2 id="cloudsyncregisterchange12" device-type="phone,2in1,tablet,wearable,tv">cloudSync.registerChange<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cloudsyncregisterchange12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>registerChange(uri: string, recursion: boolean, callback: Callback&lt;ChangeData&gt;): void</p>     <p>订阅监听指定文件的变化通知。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待下载文件uri。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">recursion</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true为监听该URI以及子文件和子目录，false为仅监听该URI文件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#changedata12">ChangeData</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">返回更改的数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900001</td>         <td class="cellrowborder" width="50%">Operation not permitted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900002</td>         <td class="cellrowborder" width="50%">No such file or directory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900012</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid URI.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> path = <span class="hljs-string">"/data/storage/el2/cloud/1.txt"</span>;</li><li><span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(path);</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback1</span> = (<span class="hljs-params">changeData: cloudSync.ChangeData</span>) =&gt; {</li><li>  <span class="hljs-keyword">if</span> (changeData.<span class="hljs-property">type</span> == cloudSync.<span class="hljs-property">NotifyType</span>.<span class="hljs-property">NOTIFY_ADDED</span>) {</li><li>    <span class="hljs-comment">//file had added, do something</span></li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (changeData.<span class="hljs-property">type</span>== cloudSync.<span class="hljs-property">NotifyType</span>.<span class="hljs-property">NOTIFY_DELETED</span>) {</li><li>    <span class="hljs-comment">//file had removed, do something</span></li><li>  }</li><li>}</li><li>cloudSync.<span class="hljs-title function_">registerChange</span>(uri, <span class="hljs-literal">false</span>, onCallback1);</li><li><span class="hljs-comment">// 取消注册监听</span></li><li>cloudSync.<span class="hljs-title function_">unregisterChange</span>(uri);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1389px;">     <h2 id="cloudsyncunregisterchange12" device-type="phone,2in1,tablet,wearable,tv">cloudSync.unregisterChange<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cloudsyncunregisterchange12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unregisterChange(uri: string): void</p>     <p>取消订阅监听指定文件的变化通知。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待下载文件uri。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameter is invalid. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900001</td>         <td class="cellrowborder" width="50%">Operation not permitted.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900002</td>         <td class="cellrowborder" width="50%">No such file or directory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900012</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid URI.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> path = <span class="hljs-string">"/data/storage/el2/cloud/1.txt"</span>;</li><li><span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(path);</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">onCallback1</span> = (<span class="hljs-params">changeData: cloudSync.ChangeData</span>) =&gt; {</li><li>  <span class="hljs-keyword">if</span> (changeData.<span class="hljs-property">type</span> == cloudSync.<span class="hljs-property">NotifyType</span>.<span class="hljs-property">NOTIFY_ADDED</span>) {</li><li>    <span class="hljs-comment">//file had added, do something</span></li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (changeData.<span class="hljs-property">type</span>== cloudSync.<span class="hljs-property">NotifyType</span>.<span class="hljs-property">NOTIFY_DELETED</span>) {</li><li>    <span class="hljs-comment">//file had removed, do something</span></li><li>  }</li><li>}</li><li>cloudSync.<span class="hljs-title function_">registerChange</span>(uri, <span class="hljs-literal">false</span>, onCallback1);</li><li><span class="hljs-comment">// 取消注册监听</span></li><li>cloudSync.<span class="hljs-title function_">unregisterChange</span>(uri);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 468px;">     <h2 id="notifytype12" device-type="phone,2in1,tablet,wearable,tv">NotifyType<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="notifytype12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>数据变更通知类型。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">NOTIFY_ADDED</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">文件已新建。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">NOTIFY_MODIFIED</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">文件已修改。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">NOTIFY_DELETED</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">文件已被删除。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">NOTIFY_RENAMED</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">文件被重命名或者移动。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 471px;">     <h2 id="changedata12" device-type="phone,2in1,tablet,wearable,tv">ChangeData<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="changedata12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义变更数据。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.44.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">type</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#notifytype12">NotifyType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">更改的通知类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">isDirectory</td>         <td class="cellrowborder" width="20%">Array&lt;boolean&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">指示更改的URI是否为目录。true：是目录。false：非目录。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">uris</td>         <td class="cellrowborder" width="20%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">需要更改的URI列表。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="historyversion20" device-type="phone,2in1,tablet,wearable,tv">HistoryVersion<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="historyversion20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>端云文件历史版本信息，调用端云文件版本管理类<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#fileversion20">FileVersion</a>的<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#gethistoryversionlist20">gethistoryversionlist</a>方法时，历史版本列表中的属性。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1247px;">     <h3 id="属性-3" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-3" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">editedTime</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">文件内容修改时间。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fileSize</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">文件大小，单位：Byte。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">versionId</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">文件版本号。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">originalFileName</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">当前版本对应的文件名。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">sha256</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">当前版本对应文件内容的哈希值。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">autoResolved</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>当前版本是否为自动解决冲突的版本。</p>          <p>应用设置手动解冲突时，默认返回false，无意义。</p>          <p>应用设置自动解冲突时，端侧会自动解冲突，true表示当前版本存在冲突，端云服务已自动解决冲突，false表示无冲突，未自动解冲突。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>补充说明</strong>：当本地和他端同时修改文件产生冲突时，当前端云同步有自动解冲突机制，但有些应用希望由用户手动解决冲突，此时应用可以通过在项目工程的/entry/src/main/resources/base/profile目录下增加cloudkit_config.json文件，并配置manualConflictResolutionEnable为true，表示手动解决冲突使能；若应用不需要手动解决冲突，可以不配置该文件或者配置manualConflictResolutionEnable为false，表示采用已有的自动解冲突策略。</p>     <p>配置文件cloudkit_config.json样例：</p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="json prettyprint linenums hljs language-json" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-punctuation">{</span></li><li>  <span class="hljs-attr">"cloudKitConfig"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>    <span class="hljs-attr">"cloudFileSyncConfig"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span></li><li>      <span class="hljs-attr">"manualConflictResolutionEnable"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"true"</span></li><li>    <span class="hljs-punctuation">}</span></li><li>  <span class="hljs-punctuation">}</span></li><li><span class="hljs-punctuation">}</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 206px;">     <h2 id="versiondownloadprogress20" device-type="phone,2in1,tablet,wearable,tv">VersionDownloadProgress<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="versiondownloadprogress20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>历史版本文件下载状态和进度信息，调用端云文件版本管理类<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#fileversion20">FileVersion</a>的<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#downloadhistoryversion20">downloadHistoryVersion</a>方法时，回调函数的入参类型。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 399px;">     <h3 id="属性-4" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-4" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">state</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#state11">State</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">所选版本云文件的下载状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">progress</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">下载进度。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">errType</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#downloaderrortype11">DownloadErrorType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">若出现下载失败，失败的错误类型。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 206px;">     <h2 id="fileversion20" device-type="phone,2in1,tablet,wearable,tv">FileVersion<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="fileversion20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>端云文件版本管理类。支持对端云文件的历史版本进行管理，提供获取文件历史版本信息列表的能力，通过历史版本信息，可将历史版本下载到本地；并提供历史版本文件替换当前本地文件的能力，针对版本冲突，提供查询冲突标志，解除冲突标志的能力。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 706px;">     <h3 id="construct20" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">construct<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="construct20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p>     <p>端云文件版本管理的构造函数，用于获取FileVersion类的实例。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: 1.Failed to access the database or execute the SQL statement. 2.System error, such as a null pointer, insufficient memory or a JS engine exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> fileVersion = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileVersion</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2050px;">     <h3 id="gethistoryversionlist20" device-type="phone,2in1,tablet,wearable,tv">getHistoryVersionList<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gethistoryversionlist20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getHistoryVersionList(uri: string, versionNumLimit: number): Promise&lt;Array&lt;HistoryVersion&gt;&gt;</p>     <p>获取历史版本列表，返回内容按修改时间排序，修改时间越早，位置越靠后。使用Promise异步回调。</p>     <p>当云上版本数量小于传入的长度限制时，按照实际版本数量返回历史版本列表。</p>     <p>当云上版本数量大于等于传入的长度限制时，则返回最新的versionNumLimit个版本。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文件的URI。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">versionNumLimit</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">历史版本列表长度限制，取值范围[0, 100000]（单位：个）。当输入值大于100000时，按照最大值返回列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#historyversion20">HistoryVersion</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回历史版本列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error. Possible causes: 1.IPC failed or timed out. 2.Failed to load the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900002</td>         <td class="cellrowborder" width="50%">No such file or directory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900010</td>         <td class="cellrowborder" width="50%">Try again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900012</td>         <td class="cellrowborder" width="50%">Permission denied by the file system.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid URI.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400002</td>         <td class="cellrowborder" width="50%">Network unavailable.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: 1.Failed to access the database or execute the SQL statement. 2.System error, such as a null pointer, insufficient memory or a JS engine exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileVersion = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileVersion</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> path = <span class="hljs-string">"/data/storage/el2/cloud/1.txt"</span>;</li><li><span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(path);</li><li><span class="hljs-keyword">let</span> limit = <span class="hljs-number">10</span>;</li><li>
</li><li>fileVersion.<span class="hljs-title function_">getHistoryVersionList</span>(uri, limit).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">versionList: <span class="hljs-built_in">Array</span>&lt;cloudSync.HistoryVersion&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, len = versionList.<span class="hljs-property">length</span>; i &lt; len; i++) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"get history versionId: "</span> + versionList[i].<span class="hljs-property">versionId</span>);</li><li>  }</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"get history version failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2239px;">     <h3 id="downloadhistoryversion20" device-type="phone,2in1,tablet,wearable,tv">downloadHistoryVersion<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="downloadhistoryversion20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>downloadHistoryVersion(uri: string, versionId: string, callback: Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#versiondownloadprogress20">VersionDownloadProgress</a>&gt;): Promise&lt;string&gt;</p>     <p>根据版本号获取指定文件的某一版本的文件内容。用户通过版本号指定云上某一版本，将其下载到本地临时存储路径，临时文件由应用自行决定是否替换原始文件，也可以选择保留或直接删除。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文件的URI。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">versionId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文件某一版本的版本号，格式以接口<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#gethistoryversionlist20">gethistoryversionlist</a>返回为准。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#versiondownloadprogress20">VersionDownloadProgress</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载进度的回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回历史版本临时存储文件的URI。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error. Possible causes: 1.IPC failed or timed out. 2.Failed to load the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900002</td>         <td class="cellrowborder" width="50%">No such file or directory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900010</td>         <td class="cellrowborder" width="50%">Try again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900012</td>         <td class="cellrowborder" width="50%">Permission denied by the file system.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid URI.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400002</td>         <td class="cellrowborder" width="50%">Network unavailable.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: 1.Failed to access the database or execute the SQL statement. 2.System error, such as a null pointer, insufficient memory or a JS engine exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileVersion = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileVersion</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> path = <span class="hljs-string">"/data/storage/el2/cloud/1.txt"</span>;</li><li><span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(path);</li><li><span class="hljs-keyword">let</span> versionId = <span class="hljs-string">'123456'</span>; <span class="hljs-comment">// 以 getHistoryVersionList 方法返回的格式为准，此处仅作为 demo 示例。</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">data: cloudSync.VersionDownloadProgress</span>) =&gt; {</li><li>  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">state</span> == cloudSync.<span class="hljs-property">State</span>.<span class="hljs-property">RUNNING</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"download progress: "</span> + data.<span class="hljs-property">progress</span>);</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data.<span class="hljs-property">state</span> == cloudSync.<span class="hljs-property">State</span>.<span class="hljs-property">FAILED</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"download failed errType: "</span> + data.<span class="hljs-property">errType</span>);</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data.<span class="hljs-property">state</span> == cloudSync.<span class="hljs-property">State</span>.<span class="hljs-property">COMPLETED</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"download version file success"</span>);</li><li>  }</li><li>};</li><li>
</li><li>fileVersion.<span class="hljs-title function_">downloadHistoryVersion</span>(uri, versionId, callback).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">fileUri: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"success to begin download, downloadFileUri: "</span> + fileUri);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"download history version file failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2376px;">     <h3 id="replacefilewithhistoryversion20" device-type="phone,2in1,tablet,wearable,tv">replaceFileWithHistoryVersion<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="replacefilewithhistoryversion20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>replaceFileWithHistoryVersion(originalUri: string, versionUri: string): Promise&lt;void&gt;</p>     <p>提供使用历史版本文件替换本地文件的能力。在替换前，需要调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#downloadhistoryversion20">downloadHistoryVersion</a>方法对选择的历史版本进行下载并拿到versionUri；直接调用此接口或者versionUri非法会产生异常；替换完成后会删除临时存储文件。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">originalUri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">本地文件的URI。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">versionUri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">历史版本文件的URI。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error. Possible causes: 1.IPC failed or timed out. 2.Failed to load the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900002</td>         <td class="cellrowborder" width="50%">No such file or directory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900005</td>         <td class="cellrowborder" width="50%">I/O error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900008</td>         <td class="cellrowborder" width="50%">Bad file descriptor.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900010</td>         <td class="cellrowborder" width="50%">Try again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900012</td>         <td class="cellrowborder" width="50%">Permission denied by the file system.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid URI.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: 1.Failed to access the database or execute the SQL statement. 2.System error, such as a null pointer, insufficient memory or a JS engine exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400007</td>         <td class="cellrowborder" width="50%">Version file not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileVersion = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileVersion</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> path = <span class="hljs-string">"/data/storage/el2/cloud/1.txt"</span>;</li><li><span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(path);</li><li><span class="hljs-keyword">let</span> versionId = <span class="hljs-string">'123456'</span>; <span class="hljs-comment">// 以 getHistoryVersionList 方法返回的格式为准，此处仅作为 demo 示例。</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback</span> = (<span class="hljs-params">data: cloudSync.VersionDownloadProgress</span>) =&gt; {</li><li>  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">state</span> == cloudSync.<span class="hljs-property">State</span>.<span class="hljs-property">RUNNING</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"download progress: "</span> + data.<span class="hljs-property">progress</span>);</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data.<span class="hljs-property">state</span> == cloudSync.<span class="hljs-property">State</span>.<span class="hljs-property">FAILED</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"download failed errType: "</span> + data.<span class="hljs-property">errType</span>);</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data.<span class="hljs-property">state</span> == cloudSync.<span class="hljs-property">State</span>.<span class="hljs-property">COMPLETED</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"download version file success"</span>);</li><li>  }</li><li>};</li><li>
</li><li><span class="hljs-keyword">let</span> versionUri = <span class="hljs-string">""</span>;</li><li>fileVersion.<span class="hljs-title function_">downloadHistoryVersion</span>(uri, versionId, callback).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">fileUri: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  versionUri = fileUri;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"success to begin download, downloadFileUri: "</span> + fileUri);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`download history version file failed with error message: <span class="hljs-subst">${err.message}</span>, error code: <span class="hljs-subst">${err.code}</span>`</span>);</li><li>});</li><li>fileVersion.<span class="hljs-title function_">replaceFileWithHistoryVersion</span>(uri, versionUri).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"replace file with history version success."</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"replace file with history version filed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1854px;">     <h3 id="isfileconflict20" device-type="phone,2in1,tablet,wearable,tv">isFileConflict<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isfileconflict20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isFileConflict(uri: string): Promise&lt;boolean&gt;</p>     <p>获取本地文件版本冲突标志。使用Promise异步回调。此方法只有应用在配置手动解冲突后才会生效，否则默认自动解冲突，返回值为false，由同步流程自动完成解冲突；</p>     <p>当应用配置手动解冲突后，调用此方法会返回当前文件是否与云侧文件产生冲突，并且由应用提示用户对冲突进行处理，在冲突解决前不会再自动同步上云。当处理完冲突后，需要调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#clearfileconflict20">clearfileconflict</a>方法来清除冲突标志，后续才会继续触发同步，与云端保持一致。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文件的URI。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回本地文件和云端文件的冲突标志，true表示冲突，false表示不冲突。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error. Possible causes: 1.IPC failed or timed out. 2.Failed to load the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900002</td>         <td class="cellrowborder" width="50%">No such file or directory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900010</td>         <td class="cellrowborder" width="50%">Try again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900012</td>         <td class="cellrowborder" width="50%">Permission denied by the file system.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid URI.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: 1.Failed to access the database or execute the SQL statement. 2.System error, such as a null pointer, insufficient memory or a JS engine exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileVersion = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileVersion</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> path = <span class="hljs-string">"/data/storage/el2/cloud/1.txt"</span>;</li><li><span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(path);</li><li>
</li><li>fileVersion.<span class="hljs-title function_">isFileConflict</span>(uri).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">isConflict: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"current file is conflict: "</span> + isConflict);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"get current file conflict flag failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1902px;">     <h3 id="clearfileconflict20" device-type="phone,2in1,tablet,wearable,tv">clearFileConflict<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearfileconflict20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearFileConflict(uri: string): Promise&lt;void&gt;</p>     <p>清除本地文件版本冲突标志。如果产生冲突，本地解决冲突后需要调用此方法来清除冲突标记，后续才可以触发自动同步机制，和云上保持一致。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待清除冲突标志的文件URI。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error. Possible causes: 1.IPC failed or timed out. 2.Failed to load the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900002</td>         <td class="cellrowborder" width="50%">No such file or directory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900010</td>         <td class="cellrowborder" width="50%">Try again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900012</td>         <td class="cellrowborder" width="50%">Permission denied by the file system.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid URI.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes: 1.Failed to access the database or execute the SQL statement. 2.System error, such as a null pointer, insufficient memory or a JS engine exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileVersion = <span class="hljs-keyword">new</span> cloudSync.<span class="hljs-title class_">FileVersion</span>();</li><li>
</li><li><span class="hljs-keyword">let</span> path = <span class="hljs-string">"/data/storage/el2/cloud/1.txt"</span>;</li><li><span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(path);</li><li>
</li><li><span class="hljs-keyword">let</span> isConflict = <span class="hljs-literal">false</span>;</li><li>fileVersion.<span class="hljs-title function_">isFileConflict</span>(uri).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">isConflictRet: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  isConflict = isConflictRet;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"current file is conflict: "</span> + isConflictRet);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`get current file conflict flag failed with error message: <span class="hljs-subst">${err.message}</span>, error code: <span class="hljs-subst">${err.code}</span>`</span>);</li><li>});</li><li>fileVersion.<span class="hljs-title function_">clearFileConflict</span>(uri).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"clean file conflict flag success"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"clean file conflict flag failed with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1756px;">     <h2 id="cloudsyncgetcorefilesyncstate20" device-type="phone,2in1,tablet,wearable,tv">cloudSync.getCoreFileSyncState<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cloudsyncgetcorefilesyncstate20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCoreFileSyncState(uri: string): FileState</p>     <p>同步方法获取云盘文件同步上行状态。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待获取云盘文件同步上行状态的文件URI。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-file-cloudsync#filestate20">FileState</a></td>         <td class="cellrowborder" width="50%">返回给定云盘文件的同步上行状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-filemanagement">文件管理子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13600001</td>         <td class="cellrowborder" width="50%">IPC error. Possible causes:1.IPC failed or timed out. 2.Failed to load the service.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900002</td>         <td class="cellrowborder" width="50%">No such file or directory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900004</td>         <td class="cellrowborder" width="50%">Interrupted system call.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900010</td>         <td class="cellrowborder" width="50%">Try again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900012</td>         <td class="cellrowborder" width="50%">Permission denied by the file system.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900020</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes:1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13900031</td>         <td class="cellrowborder" width="50%">Function not implemented.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14000002</td>         <td class="cellrowborder" width="50%">Invalid URI.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">22400005</td>         <td class="cellrowborder" width="50%">Inner error. Possible causes:1.Failed to access the database or execute the SQL statement.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uxi-c106="" class="highlight-div"><div _ngcontent-uxi-c106="" class="highlight-div-header"><div _ngcontent-uxi-c106="" class="highlight-div-header-left"><div _ngcontent-uxi-c106="" class="handle-button expand-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uxi-c106="" class="highlight-div-header-right"><div _ngcontent-uxi-c106="" class="handle-button ai-button"></div><div _ngcontent-uxi-c106="" class="handle-button line-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uxi-c106="" class="handle-button theme-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uxi-c106="" class="handle-button copy-button"><div _ngcontent-uxi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uxi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileUri } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> path = <span class="hljs-string">"/data/storage/el2/cloud/1.txt"</span>;</li><li><span class="hljs-keyword">let</span> uri = fileUri.<span class="hljs-title function_">getUriFromPath</span>(path);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> state = cloudSync.<span class="hljs-title function_">getCoreFileSyncState</span>(uri);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">error</span>:<span class="hljs-title class_">BusinessError</span> = err <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getCoreFileSyncState failed with error <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 558px;">     <h2 id="filestate20" device-type="phone,2in1,tablet,wearable,tv">FileState<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="filestate20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>端云文件同步状态，为枚举类型。</p>     <p><strong>系统能力</strong>：SystemCapability.FileManagement.DistributedFileService.CloudSync.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.57.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">INITIAL_AFTER_DOWNLOAD</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">首次下行后的初始状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">UPLOADING</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">上行同步中。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">STOPPED</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">上行已停止。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TO_BE_UPLOADED</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">正在等待上行。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">UPLOAD_SUCCESS</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">文件已成功上行。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">UPLOAD_FAILURE</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">文件上行失败。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>