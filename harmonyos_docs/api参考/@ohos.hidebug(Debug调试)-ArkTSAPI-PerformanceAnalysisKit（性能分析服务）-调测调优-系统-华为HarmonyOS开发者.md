<h1 _ngcontent-hid-c119="" class="doc-title ng-star-inserted" title="@ohos.hidebug (Debug调试)"> @ohos.hidebug (Debug调试) </h1>

<div _ngcontent-hid-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>为应用提供多种调试、调优的方法。包括但不限于内存、CPU、GPU、GC等相关数据的获取，进程trace、profiler采集，VM堆快照转储等。由于该模块的接口大多比较耗费性能，接口调用较为耗时，且基于HiDebug模块定义，该模块内的接口仅建议在应用调试、调优阶段使用。若需要在其他场景使用时，请认真评估所需调用的接口对应用性能的影响。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 8开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 682px;">     <h2 id="hidebuggetnativeheapsize" device-type="phone,2in1,tablet,wearable,tv">hidebug.getNativeHeapSize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetnativeheapsize" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getNativeHeapSize(): bigint</p>     <p>获取内存分配器统计的进程持有的普通块所占用的总字节数。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">bigint</td>         <td class="cellrowborder" width="50%">内存分配器统计的进程持有的普通块所占用内存的大小（含分配器元数据），单位为Byte。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">nativeHeapSize</span>: <span class="hljs-built_in">bigint</span> = hidebug.<span class="hljs-title function_">getNativeHeapSize</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 682px;">     <h2 id="hidebuggetnativeheapallocatedsize" device-type="phone,2in1,tablet,wearable,tv">hidebug.getNativeHeapAllocatedSize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetnativeheapallocatedsize" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getNativeHeapAllocatedSize(): bigint</p>     <p>获取内存分配器统计的进程持有的已使用的普通块所占用的总字节数。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">bigint</td>         <td class="cellrowborder" width="50%">返回内存分配器统计的进程持有的已使用的普通块所占用内存大小，单位为Byte。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">nativeHeapAllocatedSize</span>: <span class="hljs-built_in">bigint</span> = hidebug.<span class="hljs-title function_">getNativeHeapAllocatedSize</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 682px;">     <h2 id="hidebuggetnativeheapfreesize" device-type="phone,2in1,tablet,wearable,tv">hidebug.getNativeHeapFreeSize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetnativeheapfreesize" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getNativeHeapFreeSize(): bigint</p>     <p>获取内存分配器统计的进程持有的空闲的普通块所占用的总字节数。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">bigint</td>         <td class="cellrowborder" width="50%">返回内存分配器统计的进程持有的空闲的普通块所占用内存大小，单位为Byte。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">nativeHeapFreeSize</span>: <span class="hljs-built_in">bigint</span> = hidebug.<span class="hljs-title function_">getNativeHeapFreeSize</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 774px;">     <h2 id="hidebuggetpss" device-type="phone,2in1,tablet,wearable,tv">hidebug.getPss<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetpss" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPss(): bigint</p>     <p>获取应用进程实际使用的物理内存大小。接口实现方式：读取/proc/{pid}/smaps_rollup节点中的Pss与SwapPss值并求和。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>由于/proc/{pid}/smaps_rollup的读取耗时较长，建议不要在主线程中使用该接口，可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-taskpool">@ohos.taskpool</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-worker">@ohos.worker</a>开启异步线程以避免应用出现卡顿。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">bigint</td>         <td class="cellrowborder" width="50%">返回应用进程实际使用的物理内存大小，单位为KB。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">pss</span>: <span class="hljs-built_in">bigint</span> = hidebug.<span class="hljs-title function_">getPss</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 682px;">     <h2 id="hidebuggetvss11" device-type="phone,2in1,tablet,wearable,tv">hidebug.getVss<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetvss11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getVss(): bigint</p>     <p>获取应用进程占用的虚拟内存大小。接口实现方式：读取/proc/{pid}/statm节点中的size值（内存页数），vss = size * 页大小（4KB/页）。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">bigint</td>         <td class="cellrowborder" width="50%">返回应用进程占用的虚拟内存大小，单位为KB。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">vss</span>: <span class="hljs-built_in">bigint</span> = hidebug.<span class="hljs-title function_">getVss</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 774px;">     <h2 id="hidebuggetshareddirty" device-type="phone,2in1,tablet,wearable,tv">hidebug.getSharedDirty<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetshareddirty" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSharedDirty(): bigint</p>     <p>获取进程的共享脏内存大小。接口实现方式：读取/proc/{pid}/smaps_rollup节点中的Shared_Dirty值。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>由于/proc/{pid}/smaps_rollup的读取耗时较长，建议不要在主线程中使用该接口，可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-taskpool">@ohos.taskpool</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-worker">@ohos.worker</a>开启异步线程以避免应用出现卡顿。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">bigint</td>         <td class="cellrowborder" width="50%">返回进程的共享脏内存大小，单位为KB。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">sharedDirty</span>: <span class="hljs-built_in">bigint</span> = hidebug.<span class="hljs-title function_">getSharedDirty</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 774px;">     <h2 id="hidebuggetprivatedirty9" device-type="phone,2in1,tablet,wearable,tv">hidebug.getPrivateDirty<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetprivatedirty9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPrivateDirty(): bigint</p>     <p>获取进程的私有脏内存大小。读取/proc/{pid}/smaps_rollup中的Private_Dirty值。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>由于/proc/{pid}/smaps_rollup的读取耗时较长，建议不要在主线程中使用该接口，可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-taskpool">@ohos.taskpool</a>或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-worker">@ohos.worker</a>开启异步线程以避免应用出现卡顿。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">bigint</td>         <td class="cellrowborder" width="50%">返回进程的私有脏内存大小，单位为KB。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">privateDirty</span>: <span class="hljs-built_in">bigint</span> = hidebug.<span class="hljs-title function_">getPrivateDirty</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 750px;">     <h2 id="hidebuggetcpuusage9" device-type="phone,2in1,tablet,wearable,tv">hidebug.getCpuUsage<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetcpuusage9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCpuUsage(): number</p>     <p>获取进程的CPU使用率。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>由于该接口涉及跨进程通信，耗时较长，为了避免引入性能问题，建议不要在主线程中直接调用该接口。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">获取进程的CPU使用率。如占用率为50%，则返回0.5。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cpuUsage</span>: <span class="hljs-built_in">number</span> = hidebug.<span class="hljs-title function_">getCpuUsage</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1602px;">     <h2 id="hidebuggetservicedump9" device-type="phone,2in1,tablet,wearable,tv">hidebug.getServiceDump<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetservicedump9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getServiceDump(serviceid: number, fd: number, args: Array&lt;string&gt;): void</p>     <p>获取系统服务信息。</p>     <p><strong>需要权限</strong>：ohos.permission.DUMP，仅系统应用可申请。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">serviceid</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">基于用户输入的service id获取系统服务信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">fd</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文件描述符，接口会向该fd写入数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">系统服务的dump接口参数列表。string长度的最大值为254。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiviewdfx-hidebug">HiDebug错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">the parameter check failed,Possible causes:1.the parameter type error 2.the args parameter is not string array.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11400101</td>         <td class="cellrowborder" width="50%">ServiceId invalid. The system ability does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> fileFd = -<span class="hljs-number">1</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 请在组件内获取context，确保this.getUiContext().getHostContext()返回结果为UIAbilityContext。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()!.<span class="hljs-property">filesDir</span> + <span class="hljs-string">"/serviceInfo.txt"</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"output path: "</span> + path);</li><li>  fileFd = fileIo.<span class="hljs-title function_">openSync</span>(path, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span> | fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span>).<span class="hljs-property">fd</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">serviceId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">args</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-string">"allInfo"</span>);</li><li>  hidebug.<span class="hljs-title function_">getServiceDump</span>(serviceId, fileFd, args);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">if</span> (fileFd &gt;= <span class="hljs-number">0</span>) {</li><li>  fileIo.<span class="hljs-title function_">closeSync</span>(fileFd);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1145px;">     <h2 id="hidebugstartjscpuprofiling9" device-type="phone,2in1,tablet,wearable,tv">hidebug.startJsCpuProfiling<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugstartjscpuprofiling9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startJsCpuProfiling(filename: string): void</p>     <p>启动虚拟机Profiling方法跟踪，startJsCpuProfiling(filename: string)方法的调用需要与stopJsCpuProfiling()方法的调用一一对应，先开启后关闭，请避免重复开启或重复关闭的调用方式，否则会接口调用异常。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">filename</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户自定义的采样结果输出的文件名，将在应用的files目录下生成以该参数命名的json文件。string长度的最大值为128。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">the parameter check failed,Parameter type error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  hidebug.<span class="hljs-title function_">startJsCpuProfiling</span>(<span class="hljs-string">"cpu_profiling"</span>);</li><li>  <span class="hljs-comment">// ...</span></li><li>  hidebug.<span class="hljs-title function_">stopJsCpuProfiling</span>();</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 679px;">     <h2 id="hidebugstopjscpuprofiling9" device-type="phone,2in1,tablet,wearable,tv">hidebug.stopJsCpuProfiling<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugstopjscpuprofiling9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stopJsCpuProfiling(): void</p>     <p>停止虚拟机Profiling方法跟踪，stopJsCpuProfiling()方法的调用需要与startJsCpuProfiling(filename: string)方法的调用一一对应，先开启后关闭，请避免重复开启或重复关闭的调用方式，否则会接口调用异常。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  hidebug.<span class="hljs-title function_">startJsCpuProfiling</span>(<span class="hljs-string">"cpu_profiling"</span>);</li><li>  <span class="hljs-comment">// ...</span></li><li>  hidebug.<span class="hljs-title function_">stopJsCpuProfiling</span>();</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1189px;">     <h2 id="hidebugdumpjsheapdata9" device-type="phone,2in1,tablet,wearable,tv">hidebug.dumpJsHeapData<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugdumpjsheapdata9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>dumpJsHeapData(filename: string): void</p>     <p>虚拟机堆数据转储。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>由于虚拟机堆导出极其耗时，且该接口为同步接口，建议不要在上架版本中调用该接口，以避免应用冻屏，影响用户体验。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">filename</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户自定义的虚拟机堆数据转储输出的文件名，将在应用的files目录下生成以该参数命名的heapsnapshot文件。string长度的最大值为128。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">the parameter check failed, Parameter type error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  hidebug.<span class="hljs-title function_">dumpJsHeapData</span>(<span class="hljs-string">"heapData"</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 946px;">     <h2 id="hidebugstartprofilingdeprecated" device-type="phone,2in1,tablet,wearable,tv">hidebug.startProfiling<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugstartprofilingdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startProfiling(filename: string): void</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API Version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#hidebugstartjscpuprofiling9">hidebug.startJsCpuProfiling</a>替代。</p>      </div></div></div>     <p>启动虚拟机Profiling方法跟踪，startProfiling(filename: string)方法的调用需要与stopProfiling()方法的调用一一对应，先开启后关闭，请避免重复开启或重复关闭的调用方式，否则会接口调用异常。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">filename</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户自定义的采样结果输出的文件名，将在应用的files目录下生成以该参数命名的json文件。string长度的最大值为128。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li>hidebug.<span class="hljs-title function_">startProfiling</span>(<span class="hljs-string">"cpuprofiler-20220216"</span>);</li><li><span class="hljs-comment">// code block</span></li><li><span class="hljs-comment">// ...</span></li><li><span class="hljs-comment">// code block</span></li><li>hidebug.<span class="hljs-title function_">stopProfiling</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 699px;">     <h2 id="hidebugstopprofilingdeprecated" device-type="phone,2in1,tablet,wearable,tv">hidebug.stopProfiling<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugstopprofilingdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stopProfiling(): void</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API Version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#hidebugstopjscpuprofiling9">hidebug.stopJsCpuProfiling</a>替代。</p>      </div></div></div>     <p>停止虚拟机Profiling方法跟踪，stopProfiling()方法的调用需要与startProfiling(filename: string)方法的调用一一对应，先开启后关闭，请避免重复开启或重复关闭的调用方式，否则会接口调用异常。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li>hidebug.<span class="hljs-title function_">startProfiling</span>(<span class="hljs-string">"cpuprofiler-20220216"</span>);</li><li><span class="hljs-comment">// code block</span></li><li><span class="hljs-comment">// ...</span></li><li><span class="hljs-comment">// code block</span></li><li>hidebug.<span class="hljs-title function_">stopProfiling</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 826px;">     <h2 id="hidebugdumpheapdatadeprecated" device-type="phone,2in1,tablet,wearable,tv">hidebug.dumpHeapData<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugdumpheapdatadeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>dumpHeapData(filename: string): void</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API Version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#hidebugdumpjsheapdata9">hidebug.dumpJsHeapData</a>替代。</p>      </div></div></div>     <p>虚拟机堆数据转储，生成filename.heapsnapshot文件。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">filename</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户自定义的虚拟机堆转储文件名，将在应用的files目录下生成以该参数命名的heapsnapshot文件。string长度的最大值为128。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li>hidebug.<span class="hljs-title function_">dumpHeapData</span>(<span class="hljs-string">"heap-20220216"</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 706px;">     <h2 id="hidebuggetappvmmemoryinfo12" device-type="phone,2in1,tablet,wearable,tv">hidebug.getAppVMMemoryInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetappvmmemoryinfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAppVMMemoryInfo(): VMMemoryInfo</p>     <p>获取VM内存相关信息。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#vmmemoryinfo12">VMMemoryInfo</a></td>         <td class="cellrowborder" width="50%">返回VM内存信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">vmMemory</span>: hidebug.<span class="hljs-property">VMMemoryInfo</span> = hidebug.<span class="hljs-title function_">getAppVMMemoryInfo</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`totalHeap = <span class="hljs-subst">${vmMemory.totalHeap}</span>, heapUsed = <span class="hljs-subst">${vmMemory.heapUsed}</span>,`</span> +</li><li>  <span class="hljs-string">`allArraySize = <span class="hljs-subst">${vmMemory.allArraySize}</span>`</span> );</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 658px;">     <h2 id="hidebuggetappvmobjectusedsize21" device-type="phone,2in1,tablet,wearable,tv">hidebug.getAppVMObjectUsedSize<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetappvmobjectusedsize21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAppVMObjectUsedSize(): bigint</p>     <p>获取当前虚拟机中ArkTS对象所占用的内存大小。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">bigint</td>         <td class="cellrowborder" width="50%">当前虚拟机中ArkTS对象所占用的内存大小，单位为KB。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getAppVMObjectUsedSize = <span class="hljs-subst">${hidebug.getAppVMObjectUsedSize()}</span>`</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 822px;">     <h2 id="hidebuggetappthreadcpuusage12" device-type="phone,2in1,tablet,wearable,tv">hidebug.getAppThreadCpuUsage<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetappthreadcpuusage12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAppThreadCpuUsage(): ThreadCpuUsage[]</p>     <p>获取应用线程CPU使用情况。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>由于该接口涉及跨进程通信，耗时较长，为了避免引入性能问题，建议不要在主线程中直接调用该接口。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#threadcpuusage12">ThreadCpuUsage</a>[]</td>         <td class="cellrowborder" width="50%">返回当前应用进程下所有ThreadCpuUsage数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">appThreadCpuUsage</span>: hidebug.<span class="hljs-property">ThreadCpuUsage</span>[] = hidebug.<span class="hljs-title function_">getAppThreadCpuUsage</span>();</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; appThreadCpuUsage.<span class="hljs-property">length</span>; i++) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`threadId=<span class="hljs-subst">${appThreadCpuUsage[i].threadId}</span>, cpuUsage=<span class="hljs-subst">${appThreadCpuUsage[i].cpuUsage}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2171px;">     <h2 id="hidebugstartapptracecapture12" device-type="phone,2in1,tablet,wearable,tv">hidebug.startAppTraceCapture<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugstartapptracecapture12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startAppTraceCapture(tags: number[], flag: TraceFlag, limitSize: number): string</p>     <p>该接口补充了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hitrace" target="_blank">hitrace</a>功能，开发者可通过该接口完成指定范围的trace自动化采集。由于该接口中trace采集过程中消耗的性能与需要采集的范围成正相关，建议开发者在使用该接口前，通过hitrace命令抓取应用的trace日志，从中筛选出所需trace采集的关键范围，以提高该接口性能。</p>     <p>startAppTraceCapture()方法的调用需要与'<a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#hidebugstopapptracecapture12">stopAppTraceCapture()</a>'方法的调用一一对应，重复开启trace采集将导致接口调用异常，由于trace采集过程中会消耗较多性能，开发者应在完成采集后及时关闭。</p>     <p>应用调用startAppTraceCapture接口启动采集trace，当采集的trace大小超过了limitSize，系统将自动调用stopAppTraceCapture接口停止采集。因此limitSize大小设置不当，将导致生成trace数据不足，无法满足故障分析。所以要求开发者根据实际情况，评估limitSize大小。</p>     <p>评估方法：limitSize = 预期trace采集时长 * trace单位流量。</p>     <p>预期trace采集时长：开发者根据分析的故障场景自行决定，单位秒。</p>     <p>trace单位流量：应用每秒产生的trace大小，系统推荐值为300KB/s，建议开发者采用自身应用的实测值，单位KB/s。</p>     <p>trace单位流量实测方法：limitSize设置为最大值500M，调用startAppTraceCapture接口，在应用上操作N秒后，调用stopAppTraceCapture停止采集，然后查看trace大小S（Kb）。那么trace单位流量 = S/N（Kb/s）。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">tags</td>         <td class="cellrowborder" width="25%">number[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">trace范围，详情请见<a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#hidebugtags12">tags</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">flag</td>         <td class="cellrowborder" width="25%">TraceFlag</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">详情请见<a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#traceflag12">TraceFlag</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">limitSize</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">开启trace文件大小限制，单位为Byte，单个文件大小上限为500MB。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.14.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.14.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回trace文件名路径（接口返回真实物理路径，若应用内需要访问，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory#应用沙箱路径和真实物理路径的对应关系" target="_blank">应用沙箱路径和真实物理路径的对应关系</a>进行路径转换）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiviewdfx-hidebug-trace">HiDebug-Trace错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.17.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.17.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Invalid argument, Possible causes:1.The limit parameter is too small 2.The parameter is not within the enumeration type 3.The parameter type error or parameter order error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11400102</td>         <td class="cellrowborder" width="50%">Capture trace already enabled.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11400103</td>         <td class="cellrowborder" width="50%">No write permission on the file.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11400104</td>         <td class="cellrowborder" width="50%">Abnormal trace status.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tags</span>: <span class="hljs-built_in">number</span>[] = [hidebug.<span class="hljs-property">tags</span>.<span class="hljs-property">ABILITY_MANAGER</span>, hidebug.<span class="hljs-property">tags</span>.<span class="hljs-property">ARKUI</span>];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">flag</span>: hidebug.<span class="hljs-property">TraceFlag</span> = hidebug.<span class="hljs-property">TraceFlag</span>.<span class="hljs-property">MAIN_THREAD</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">limitSize</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fileName</span>: <span class="hljs-built_in">string</span> = hidebug.<span class="hljs-title function_">startAppTraceCapture</span>(tags, flag, limitSize);</li><li>  <span class="hljs-comment">// code block</span></li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-comment">// code block</span></li><li>  hidebug.<span class="hljs-title function_">stopAppTraceCapture</span>();</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1121px;">     <h2 id="hidebugstopapptracecapture12" device-type="phone,2in1,tablet,wearable,tv">hidebug.stopAppTraceCapture<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugstopapptracecapture12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stopAppTraceCapture(): void</p>     <p>停止应用trace采集。调用前，需先调用'<a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#hidebugstartapptracecapture12">startAppTraceCapture()</a>'方法开始采集。关闭前未开启或重复关闭会导致接口异常。</p>     <p>调用startAppTraceCapture接口，如果没有合理传入limitSize参数，生成trace的大小大于传入的limitSize大小，系统内部会自动调用stopAppTraceCapture，再次手动调用stopAppTraceCapture就会抛出错误码11400105。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiviewdfx-hidebug-trace">HiDebug-Trace错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">11400104</td>         <td class="cellrowborder" width="50%">The status of the trace is abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11400105</td>         <td class="cellrowborder" width="50%">No capture trace running.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tags</span>: <span class="hljs-built_in">number</span>[] = [hidebug.<span class="hljs-property">tags</span>.<span class="hljs-property">ABILITY_MANAGER</span>, hidebug.<span class="hljs-property">tags</span>.<span class="hljs-property">ARKUI</span>];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">flag</span>: hidebug.<span class="hljs-property">TraceFlag</span> = hidebug.<span class="hljs-property">TraceFlag</span>.<span class="hljs-property">MAIN_THREAD</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">limitSize</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">fileName</span>: <span class="hljs-built_in">string</span> = hidebug.<span class="hljs-title function_">startAppTraceCapture</span>(tags, flag, limitSize);</li><li>  <span class="hljs-comment">// code block</span></li><li>  <span class="hljs-comment">// ...</span></li><li>  <span class="hljs-comment">// code block</span></li><li>  hidebug.<span class="hljs-title function_">stopAppTraceCapture</span>();</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 658px;">     <h2 id="hidebuggetappmemorylimit12" device-type="phone,2in1,tablet,wearable,tv">hidebug.getAppMemoryLimit<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetappmemorylimit12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAppMemoryLimit(): MemoryLimit</p>     <p>获取应用程序进程的内存限制。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#memorylimit12">MemoryLimit</a></td>         <td class="cellrowborder" width="50%">应用程序进程内存限制。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">appMemoryLimit</span>:hidebug.<span class="hljs-property">MemoryLimit</span> = hidebug.<span class="hljs-title function_">getAppMemoryLimit</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1089px;">     <h2 id="hidebuggetsystemcpuusage12" device-type="phone,2in1,tablet,wearable,tv">hidebug.getSystemCpuUsage<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetsystemcpuusage12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSystemCpuUsage(): number</p>     <p>获取系统的CPU资源占用情况。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>由于该接口涉及跨进程通信，耗时较长，为了避免引入性能问题，建议不要在主线程中直接调用该接口。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">系统CPU资源占用情况。如占用率为50%，则返回0.5。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiviewdfx-hidebug-cpuusage">HiDebug-CpuUsage错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">11400104</td>         <td class="cellrowborder" width="50%">The status of the system CPU usage is abnormal.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getSystemCpuUsage: <span class="hljs-subst">${hidebug.getSystemCpuUsage()}</span>`</span>)</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1982px;">     <h2 id="hidebugsetappresourcelimit12" device-type="phone,2in1,tablet,wearable,tv">hidebug.setAppResourceLimit<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugsetappresourcelimit12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setAppResourceLimit(type: string, value: number, enableDebugLog: boolean): void</p>     <p>设置应用的文件描述符数量、线程数量、JS内存或Native内存资源限制。</p>     <p>主要应用场景在于构造内存泄漏故障，参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-resourceleak-events-arkts" target="_blank">订阅资源泄漏事件（ArkTS）</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-resourceleak-events-ndk" target="_blank">订阅资源泄漏事件（C/C++）</a>。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>当设置的开发者选项开关打开并重启设备后，此功能有效。</p>      </div></div></div>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>泄漏资源类型，共四种：</p>          <p>- pss_memory（native内存）</p>          <p>- js_heap（js堆内存）</p>          <p>- fd（文件描述符）</p>          <p>- thread（线程）</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>对应泄漏资源类型的最大值，范围：</p>          <p>- pss_memory类型：[1024, 4 * 1024 * 1024]（单位：KB）</p>          <p>- js_heap类型：[85, 95]（分配给JS堆内存上限的85%~95%）</p>          <p>- fd类型：[10, 10000]</p>          <p>- thread类型：[1, 1000]</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">enableDebugLog</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>是否启用外部调试日志。外部调试日志请仅在灰度版本（正式版本发布之前，先向一小部分用户推出的测试版本）中启用，因为收集调试日志会占用大量的cpu资源和内存资源，可能会引起应用流畅性问题。</p>          <p>true：启用外部调试日志。</p>          <p>false：禁用外部调试日志。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiviewdfx-hidebug">HiDebug错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Invalid argument, Possible causes:1.The limit parameter is too small 2.The parameter is not in the specified type 3.The parameter type error or parameter order error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11400104</td>         <td class="cellrowborder" width="50%">Set limit failed due to remote exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">type</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'js_heap'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">value</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">85</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">enableDebugLog</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  hidebug.<span class="hljs-title function_">setAppResourceLimit</span>(<span class="hljs-keyword">type</span>, value, enableDebugLog);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 846px;">     <h2 id="hidebuggetappnativememinfo12" device-type="phone,2in1,tablet,wearable,tv">hidebug.getAppNativeMemInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetappnativememinfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAppNativeMemInfo(): NativeMemInfo</p>     <p>获取应用进程内存信息。读取/proc/{pid}/smaps_rollup和/proc/{pid}/statm节点的数据。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>由于读取/proc/{pid}/smaps_rollup耗时较长，推荐使用异步接口<a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#hidebuggetappnativememinfoasync20">hidebug.getAppNativeMemInfoAsync</a>，以避免应用丢帧或卡顿。</p>      </div></div></div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#nativememinfo12">NativeMemInfo</a></td>         <td class="cellrowborder" width="50%">应用进程内存信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">nativeMemInfo</span>: hidebug.<span class="hljs-property">NativeMemInfo</span> = hidebug.<span class="hljs-title function_">getAppNativeMemInfo</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`pss: <span class="hljs-subst">${nativeMemInfo.pss}</span>, vss: <span class="hljs-subst">${nativeMemInfo.vss}</span>, rss: <span class="hljs-subst">${nativeMemInfo.rss}</span>, `</span> +</li><li>  <span class="hljs-string">`sharedDirty: <span class="hljs-subst">${nativeMemInfo.sharedDirty}</span>, privateDirty: <span class="hljs-subst">${nativeMemInfo.privateDirty}</span>, `</span> +</li><li>  <span class="hljs-string">`sharedClean: <span class="hljs-subst">${nativeMemInfo.sharedClean}</span>, privateClean: <span class="hljs-subst">${nativeMemInfo.privateClean}</span>`</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 706px;">     <h2 id="hidebuggetappnativememinfoasync20" device-type="phone,2in1,tablet,wearable,tv">hidebug.getAppNativeMemInfoAsync<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetappnativememinfoasync20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAppNativeMemInfoAsync(): Promise&lt;NativeMemInfo&gt;</p>     <p>读取/proc/{pid}/smaps_rollup和/proc/{pid}/statm节点的数据以获取应用进程内存信息，使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#nativememinfo12">NativeMemInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">promise对象，返回应用进程内存信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>hidebug.<span class="hljs-title function_">getAppNativeMemInfoAsync</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">nativeMemInfo: hidebug.NativeMemInfo</span>)=&gt;</span>{</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`pss: <span class="hljs-subst">${nativeMemInfo.pss}</span>, vss: <span class="hljs-subst">${nativeMemInfo.vss}</span>, rss: <span class="hljs-subst">${nativeMemInfo.rss}</span>, `</span> +</li><li>    <span class="hljs-string">`sharedDirty: <span class="hljs-subst">${nativeMemInfo.sharedDirty}</span>, privateDirty: <span class="hljs-subst">${nativeMemInfo.privateDirty}</span>, `</span> +</li><li>    <span class="hljs-string">`sharedClean: <span class="hljs-subst">${nativeMemInfo.sharedClean}</span>, privateClean: <span class="hljs-subst">${nativeMemInfo.privateClean}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1141px;">     <h2 id="hidebuggetappnativememinfowithcache20" device-type="phone,2in1,tablet,wearable,tv">hidebug.getAppNativeMemInfoWithCache<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetappnativememinfowithcache20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAppNativeMemInfoWithCache(forceRefresh?: boolean): NativeMemInfo</p>     <p>获取应用进程内存信息。与getAppNativeMemInfo接口相比，该接口使用了缓存机制，以提高性能。缓存的有效期为5分钟。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>由于读取 /proc/{pid}/smaps_rollup 比较耗时，建议不在主线程中使用该接口。可以通过 @ohos.taskpool 或 @ohos.worker 开启异步线程，以避免应用卡顿。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">forceRefresh</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>是否需要无视缓存有效性，强制更新缓存值。默认值：false。</p>          <p>true：直接获取当前内存数据并更新缓存值。</p>          <p>false：缓存有效时，直接返回缓存值，缓存失效时获取当前内存数据并更新缓存值。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#nativememinfo12">NativeMemInfo</a></td>         <td class="cellrowborder" width="50%">应用进程内存信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">nativeMemInfo</span>: hidebug.<span class="hljs-property">NativeMemInfo</span> = hidebug.<span class="hljs-title function_">getAppNativeMemInfoWithCache</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`pss: <span class="hljs-subst">${nativeMemInfo.pss}</span>, vss: <span class="hljs-subst">${nativeMemInfo.vss}</span>, rss: <span class="hljs-subst">${nativeMemInfo.rss}</span>, `</span> +</li><li>  <span class="hljs-string">`sharedDirty: <span class="hljs-subst">${nativeMemInfo.sharedDirty}</span>, privateDirty: <span class="hljs-subst">${nativeMemInfo.privateDirty}</span>, `</span> +</li><li>  <span class="hljs-string">`sharedClean: <span class="hljs-subst">${nativeMemInfo.sharedClean}</span>, privateClean: <span class="hljs-subst">${nativeMemInfo.privateClean}</span>`</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 730px;">     <h2 id="hidebuggetsystemmeminfo12" device-type="phone,2in1,tablet,wearable,tv">hidebug.getSystemMemInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetsystemmeminfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSystemMemInfo(): SystemMemInfo</p>     <p>获取系统内存信息。读取/proc/meminfo节点的数据。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#systemmeminfo12">SystemMemInfo</a></td>         <td class="cellrowborder" width="50%">系统内存信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">systemMemInfo</span>: hidebug.<span class="hljs-property">SystemMemInfo</span> = hidebug.<span class="hljs-title function_">getSystemMemInfo</span>();</li><li>
</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`totalMem: <span class="hljs-subst">${systemMemInfo.totalMem}</span>, freeMem: <span class="hljs-subst">${systemMemInfo.freeMem}</span>, `</span> +</li><li>  <span class="hljs-string">`availableMem: <span class="hljs-subst">${systemMemInfo.availableMem}</span>`</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 778px;">     <h2 id="hidebuggetvmruntimestats12" device-type="phone,2in1,tablet,wearable,tv">hidebug.getVMRuntimeStats<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetvmruntimestats12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getVMRuntimeStats(): GcStats</p>     <p>获取系统<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/gc-introduction" target="_blank">GC</a>统计信息。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#gcstats12">GcStats</a></td>         <td class="cellrowborder" width="50%">系统GC统计信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">vMRuntimeStats</span>: hidebug.<span class="hljs-property">GcStats</span> = hidebug.<span class="hljs-title function_">getVMRuntimeStats</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`gc-count: <span class="hljs-subst">${vMRuntimeStats[<span class="hljs-string">'ark.gc.gc-count'</span>]}</span>`</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`gc-time: <span class="hljs-subst">${vMRuntimeStats[<span class="hljs-string">'ark.gc.gc-time'</span>]}</span>`</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`gc-bytes-allocated: <span class="hljs-subst">${vMRuntimeStats[<span class="hljs-string">'ark.gc.gc-bytes-allocated'</span>]}</span>`</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`gc-bytes-freed: <span class="hljs-subst">${vMRuntimeStats[<span class="hljs-string">'ark.gc.gc-bytes-freed'</span>]}</span>`</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`fullgc-longtime-count: <span class="hljs-subst">${vMRuntimeStats[<span class="hljs-string">'ark.gc.fullgc-longtime-count'</span>]}</span>`</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1652px;">     <h2 id="hidebuggetvmruntimestat12" device-type="phone,2in1,tablet,wearable,tv">hidebug.getVMRuntimeStat<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetvmruntimestat12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getVMRuntimeStat(item: string): number</p>     <p>根据参数获取指定的系统<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/gc-introduction" target="_blank">GC</a>统计信息。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">item</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>所需统计信息的类型。可获取的统计信息类型如下：</p>          <p>"ark.gc.gc-count"：当前线程的GC次数。</p>          <p>"ark.gc.gc-time"：当前线程触发的GC总耗时，以ms为单位。</p>          <p>"ark.gc.gc-bytes-allocated"：当前线程Ark虚拟机已分配的内存大小，以B为单位。</p>          <p>"ark.gc.gc-bytes-freed"：当前线程GC成功回收的内存，以B为单位。</p>          <p>"ark.gc.fullgc-longtime-count "：当前线程超长fullGC次数。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">系统GC统计信息，根据传入的参数，返回相应的信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Possible causes:1. Invalid parameter, a string parameter required. 2. Invalid parameter, unknown property.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`gc-count: <span class="hljs-subst">${hidebug.getVMRuntimeStat(<span class="hljs-string">'ark.gc.gc-count'</span>)}</span>`</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`gc-time: <span class="hljs-subst">${hidebug.getVMRuntimeStat(<span class="hljs-string">'ark.gc.gc-time'</span>)}</span>`</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`gc-bytes-allocated: <span class="hljs-subst">${hidebug.getVMRuntimeStat(<span class="hljs-string">'ark.gc.gc-bytes-allocated'</span>)}</span>`</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`gc-bytes-freed: <span class="hljs-subst">${hidebug.getVMRuntimeStat(<span class="hljs-string">'ark.gc.gc-bytes-freed'</span>)}</span>`</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`fullgc-longtime-count: <span class="hljs-subst">${hidebug.getVMRuntimeStat(<span class="hljs-string">'ark.gc.fullgc-longtime-count'</span>)}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 612px;">     <h2 id="memorylimit12" device-type="phone,2in1,tablet,wearable,tv">MemoryLimit<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="memorylimit12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>应用进程内存限制。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">rssLimit</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">应用进程的驻留集的限制，以KB为单位。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">vssLimit</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">进程的虚拟内存限制，以KB为单位。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">vmHeapLimit</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">当前线程的 JS VM 堆大小限制，以KB为单位。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">vmTotalHeapSize</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">当前进程的 JS 堆内存大小限制，以KB为单位。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 567px;">     <h2 id="vmmemoryinfo12" device-type="phone,2in1,tablet,wearable,tv">VMMemoryInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="vmmemoryinfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>VM内存信息。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">totalHeap</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示当前虚拟机的堆总大小，以KB为单位。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">heapUsed</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示当前虚拟机使用的堆大小，以KB为单位。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">allArraySize</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示当前虚拟机的所有数组对象大小，以KB为单位。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 378px;">     <h2 id="threadcpuusage12" device-type="phone,2in1,tablet,wearable,tv">ThreadCpuUsage<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="threadcpuusage12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>线程的CPU使用情况。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">threadId</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">线程号。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">cpuUsage</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">线程CPU使用率。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3332px;">     <h2 id="hidebugtags12" device-type="phone,2in1,tablet,wearable,tv">hidebug.tags<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugtags12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>支持trace使用场景的标签，用户可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hitrace" target="_blank">hitrace</a>抓取指定标签的trace内容。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>以下标签实际值由系统定义，可能随版本升级而发生改变，为避免升级后出现兼容性问题，在生产中应直接使用标签名称而非标签数值。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.5.1.1" width="25%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.5.1.3" width="25%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">ABILITY_MANAGER</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">能力管理标签，hitrace命令行工具对应tagName:ability。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ARKUI</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">ArkUI开发框架标签，hitrace命令行工具对应tagName:ace。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ARK</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">JSVM虚拟机标签，hitrace命令行工具对应tagName:ark。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">BLUETOOTH</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">蓝牙标签，hitrace命令行工具对应tagName:bluetooth。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">COMMON_LIBRARY</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">公共库子系统标签，hitrace命令行工具对应tagName:commonlibrary。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">DISTRIBUTED_HARDWARE_DEVICE_MANAGER</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">分布式硬件设备管理标签，hitrace命令行工具对应tagName:devicemanager。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">DISTRIBUTED_AUDIO</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">分布式音频标签，hitrace命令行工具对应tagName:daudio。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">DISTRIBUTED_CAMERA</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">分布式相机标签，hitrace命令行工具对应tagName:dcamera。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">DISTRIBUTED_DATA</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">分布式数据管理模块标签，hitrace命令行工具对应tagName:distributeddatamgr。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">DISTRIBUTED_HARDWARE_FRAMEWORK</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">分布式硬件框架标签，hitrace命令行工具对应tagName:dhfwk。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">DISTRIBUTED_INPUT</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">分布式输入标签，hitrace命令行工具对应tagName:dinput。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">DISTRIBUTED_SCREEN</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">分布式屏幕标签，hitrace命令行工具对应tagName:dscreen。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">DISTRIBUTED_SCHEDULER</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">分布式调度器标签，hitrace命令行工具对应tagName:dsched。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">FFRT</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">FFRT任务标签，hitrace命令行工具对应tagName:ffrt。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">FILE_MANAGEMENT</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文件管理系统标签，hitrace命令行工具对应tagName:filemanagement。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">GLOBAL_RESOURCE_MANAGER</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">全局资源管理标签，hitrace命令行工具对应tagName:gresource。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">GRAPHICS</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图形模块标签，hitrace命令行工具对应tagName:graphic。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">HDF</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">HDF子系统标签，hitrace命令行工具对应tagName:hdf。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">MISC</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">MISC模块标签，hitrace命令行工具对应tagName:misc。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">MULTIMODAL_INPUT</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">多模态输入模块标签，hitrace命令行工具对应tagName:multimodalinput。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">NET</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">网络标签，hitrace命令行工具对应tagName:net。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">NOTIFICATION</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">通知模块标签，hitrace命令行工具对应tagName:notification。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">NWEB</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Nweb标签，hitrace命令行工具对应tagName:nweb。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">OHOS</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">OHOS通用标签，hitrace命令行工具对应tagName:ohos。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">POWER_MANAGER</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">电源管理标签，hitrace命令行工具对应tagName:power。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">RPC</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">RPC标签，hitrace命令行工具对应tagName:rpc。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">SAMGR</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">系统能力管理标签，hitrace命令行工具对应tagName:samgr。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">WINDOW_MANAGER</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">窗口管理标签，hitrace命令行工具对应tagName:window。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">AUDIO</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频模块标签，hitrace命令行工具对应tagName:zaudio。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">CAMERA</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">相机模块标签，hitrace命令行工具对应tagName:zcamera。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">IMAGE</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片模块标签，hitrace命令行工具对应tagName:zimage。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">MEDIA</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">媒体模块标签，hitrace命令行工具对应tagName:zmedia。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1371px;">     <h2 id="nativememinfo12" device-type="phone,2in1,tablet,wearable,tv">NativeMemInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="nativememinfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>描述应用进程的内存信息。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">pss</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">实际占用的物理内存大小(比例分配共享库占用的内存)，以KB为单位，计算方式：/proc/{pid}/smaps_rollup: Pss + SwapPss。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">vss</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">占用的虚拟内存大小(包括共享库所占用的内存)，以KB为单位，计算方式：/proc/{pid}/statm: size * 4。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">rss</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">实际占用的物理内存大小(包括共享库占用)，以KB为单位，计算方式：/proc/{pid}/smaps_rollup: Rss。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">sharedDirty</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">共享脏内存大小，以KB为单位，计算方式：/proc/{pid}/smaps_rollup: Shared_Dirty。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">privateDirty</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">私有脏内存大小，以KB为单位，计算方式：/proc/{pid}/smaps_rollup: Private_Dirty。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">sharedClean</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">共享净内存大小，以KB为单位，计算方式：/proc/{pid}/smaps_rollup: Shared_Clean。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">privateClean</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">私有干净内存大小，以KB为单位，计算方式：/proc/{pid}/smaps_rollup: Private_Clean。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 639px;">     <h2 id="systemmeminfo12" device-type="phone,2in1,tablet,wearable,tv">SystemMemInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="systemmeminfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>描述系统内存信息，包括总内存、空闲内存和可用内存。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">totalMem</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">系统总的内存，以KB为单位，计算方式：/proc/meminfo: MemTotal</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">freeMem</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">系统空闲的内存，以KB为单位，计算方式：/proc/meminfo: MemFree</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">availableMem</td>         <td class="cellrowborder" width="20%">bigint</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">系统可用的内存，以KB为单位，计算方式：/proc/meminfo: MemAvailable</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 378px;">     <h2 id="traceflag12" device-type="phone,2in1,tablet,wearable,tv">TraceFlag<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="traceflag12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>描述采集trace线程的类型，包括主线程和所有线程。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">MAIN_THREAD</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">只采集当前应用主线程。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">ALL_THREADS</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">采集当前应用下所有线程。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 593px;">     <h2 id="gcstats12" device-type="phone,2in1,tablet,wearable,tv">GcStats<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gcstats12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type GcStats = Record&lt;string, number&gt;</p>     <p>描述用于存储GC统计信息的键值对。该类型不支持多线程操作，如果应用中存在多线程同时访问，需加锁保护。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.5.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.5.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Record&lt;string, number&gt;</td>         <td class="cellrowborder" width="50%">          <p>用于存储GC统计信息的键值对。包含以下键值信息：</p>          <p>"ark.gc.gc-count"：当前线程的GC次数。</p>          <p>"ark.gc.gc-time"：当前线程触发的GC总耗时，以ms为单位。</p>          <p>"ark.gc.gc-bytes-allocated"：当前线程Ark虚拟机已分配的内存大小，以B为单位。</p>          <p>"ark.gc.gc-bytes-freed"：当前线程GC成功回收的内存，以B为单位。</p>          <p>"ark.gc.fullgc-longtime-count "：当前线程超长fullGC次数。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 570px;">     <h2 id="jsrawheaptrimlevel20" device-type="phone,2in1,tablet,wearable,tv">JsRawHeapTrimLevel<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="jsrawheaptrimlevel20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>转储堆快照的裁剪级别的枚举。</p>     <p>TRIM_LEVEL_2相比TRIM_LEVEL_1，裁剪时间更长。冻屏的阈值为6秒。使用TRIM_LEVEL_1时，不会达到该阈值；切换至TRIM_LEVEL_2时，裁剪时间可能会超过6秒，触发APP_FREEZE（冻屏事件），导致应用被系统终止，此时回退至TRIM_LEVEL_1级别进行裁剪。</p>     <p>推荐优先使用TRIM_LEVEL_1确保应用稳定，仅在需要更彻底裁剪时尝试TRIM_LEVEL_2。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">TRIM_LEVEL_1</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">LEVEL 1级别裁剪，主要裁剪字符串。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TRIM_LEVEL_2</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">LEVEL 2级别裁剪，在TRIM_LEVEL_1的基础上，精简了对象地址标识的大小，从8个字节减少到4个字节。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 682px;">     <h2 id="hidebugisdebugstate12" device-type="phone,2in1,tablet,wearable,tv">hidebug.isDebugState<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugisdebugstate12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isDebugState(): boolean</p>     <p>获取应用进程的调试状态。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">应用进程的Ark层或Native层是否处于调试状态。true：处于调试状态。false：未处于调试状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`isDebugState = <span class="hljs-subst">${hidebug.isDebugState()}</span>`</span>)</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1069px;">     <h2 id="hidebuggetgraphicsmemory14" device-type="phone,2in1,tablet,wearable,tv">hidebug.getGraphicsMemory<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetgraphicsmemory14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getGraphicsMemory(): Promise&lt;number&gt;</p>     <p>获取应用显存总大小（gl + graph），使用Promise异步回调。</p>     <p><strong>元服务API</strong>：从API version 14开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">promise对象，返回应用显存总大小，单位为KB。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiviewdfx-hidebug">HiDebug错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">11400104</td>         <td class="cellrowborder" width="50%">Failed to get the application memory due to a remote exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug, hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>hidebug.<span class="hljs-title function_">getGraphicsMemory</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">ret: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`graphicsMemory: <span class="hljs-subst">${ret}</span>`</span>)</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${error.code}</span>, error msg: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1185px;">     <h2 id="hidebuggetgraphicsmemorysync14" device-type="phone,2in1,tablet,wearable,tv">hidebug.getGraphicsMemorySync<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetgraphicsmemorysync14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getGraphicsMemorySync(): number</p>     <p>使用同步方式获取应用显存总大小（gl + graph）。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>由于该接口涉及多次跨进程通信，其耗时可能达到秒级。为了避免引入性能问题，建议不要在主线程调用该接口，推荐使用异步接口getGraphicsMemory。</p>      </div></div></div>     <p><strong>元服务API</strong>：从API version 14开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">应用显存总大小，单位为KB。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiviewdfx-hidebug">HiDebug错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">11400104</td>         <td class="cellrowborder" width="50%">Failed to get the application memory due to a remote exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`graphicsMemory: <span class="hljs-subst">${hidebug.getGraphicsMemorySync()}</span>`</span>)</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1412px;">     <h2 id="hidebuggetgraphicsmemorysummary21" device-type="phone,2in1,tablet,wearable,tv">hidebug.getGraphicsMemorySummary<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetgraphicsmemorysummary21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getGraphicsMemorySummary(interval?: number): Promise&lt;GraphicsMemorySummary&gt;</p>     <p>获取应用显存数据，使用Promise进行异步回调。</p>     <p><strong>元服务API</strong>：从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">interval</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>显存数据缓存值有效时间，单位为秒。默认值：300。取值范围为[2-3600]。若传入值超出取值范围时，将使用默认值。</p>          <p>当显存数据缓存值存在时间超过该值时，获取最新显存数据并更新缓存值；否则，直接获取缓存值。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#graphicsmemorysummary21">GraphicsMemorySummary</a>&gt;</td>         <td class="cellrowborder" width="50%">promise对象，返回应用显存数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiviewdfx-hidebug">HiDebug错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">11400104</td>         <td class="cellrowborder" width="50%">Failed to get the application memory due to a remote exception.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>hidebug.<span class="hljs-title function_">getGraphicsMemorySummary</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">ret: hidebug.GraphicsMemorySummary</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`get graphicsMemory gl: <span class="hljs-subst">${ret.gl}</span> graph: <span class="hljs-subst">${ret.graph}</span>.`</span>)</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${error.code}</span>, error msg: <span class="hljs-subst">${error.message}</span>.`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1769px;">     <h2 id="hidebugdumpjsrawheapdata18" device-type="phone,2in1,tablet,wearable,tv">hidebug.dumpJsRawHeapData<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugdumpjsrawheapdata18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>dumpJsRawHeapData(needGC?: boolean): Promise&lt;string&gt;</p>     <p>为当前线程转储虚拟机的原始堆快照，并生成的rawheap文件，该文件可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/rawheap-translator" target="_blank">rawheap-translator工具</a>将所生成文件转化为heapsnapshot文件进行解析。生成的文件路径使用Promise进行异步回调。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>系统通过该接口转存快照会消耗大量资源，因此严格限制了调用频率和次数。处理完生成的文件后，请立即删除。</p>       <p>建议仅在应用的灰度版本中使用。在正式版本中不推荐使用，避免影响应用流畅性。</p>      </div></div></div>     <p><strong>元服务API</strong>：从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">needGC</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">转储堆快照前是否需要GC。true：需要GC。false：不需GC。默认值：true。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回生成的快照文件路径（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory#应用沙箱路径和真实物理路径的对应关系" target="_blank">应用沙箱内路径</a>）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiviewdfx-hidebug">HiDebug错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">11400106</td>         <td class="cellrowborder" width="50%">Quota exceeded.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11400107</td>         <td class="cellrowborder" width="50%">Fork operation failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11400108</td>         <td class="cellrowborder" width="50%">Failed to wait for the child process to finish.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11400109</td>         <td class="cellrowborder" width="50%">Timeout while waiting for the child process to finish.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11400110</td>         <td class="cellrowborder" width="50%">Disk remaining space too low.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11400111</td>         <td class="cellrowborder" width="50%">Napi interface call exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11400112</td>         <td class="cellrowborder" width="50%">Repeated data dump.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11400113</td>         <td class="cellrowborder" width="50%">Failed to create dump file.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>hidebug.<span class="hljs-title function_">dumpJsRawHeapData</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">filePath: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`dumpJsRawHeapData success and generated file path is <span class="hljs-subst">${filePath}</span>`</span>)</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${error.code}</span>, error msg: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1602px;">     <h2 id="hidebugenablegwpasangrayscale20" device-type="phone,2in1,tablet,wearable,tv">hidebug.enableGwpAsanGrayscale<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugenablegwpasangrayscale20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>enableGwpAsanGrayscale(options?: GwpAsanOptions, duration?: number): void</p>     <p>使能GWP-ASan，用于检测堆内存使用中的非法行为。</p>     <p>该接口主要用于动态配置并启用GWP-ASan，以适配应用自定义的GWP-ASan检测策略。配置在应用重新启动后生效。</p>     <p>更多关于GWP-ASan的说明，请参见<a href="https://developer.huawei.com/consumer/cn/doc/best-practices/bpta-stability-gwpasan-detection" target="_blank">使用GWP-ASan检测内存错误</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ol>        <li>若设备运行期间通过本接口设置的GWP-ASan应用数量超过配额限制，调用该接口将会失败并抛出错误码。请使用try-catch捕获异常，以避免应用异常退出。</li>        <li>设备重启后，本接口设置的GWP-ASan参数将会失效。</li>       </ol>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#gwpasanoptions20">GwpAsanOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">GWP-ASan配置项。未设置时，使用默认参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">duration</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">GWP-ASan持续时间，单位为天，默认值为7。需传入大于0的正整数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiviewdfx-hidebug">HiDebug错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">11400114</td>         <td class="cellrowborder" width="50%">The number of GWP-ASAN applications of this device overflowed after last boot.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: hidebug.<span class="hljs-property">GwpAsanOptions</span> = {</li><li>  <span class="hljs-attr">alwaysEnabled</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">sampleRate</span>: <span class="hljs-number">2500</span>,</li><li>  <span class="hljs-attr">maxSimutaneousAllocations</span>: <span class="hljs-number">5000</span>,</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">duration</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">4</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  hidebug.<span class="hljs-title function_">enableGwpAsanGrayscale</span>(options, duration);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in enabling GWP-ASan.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to enable GWP-ASan. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1071px;">     <h2 id="gwpasanoptions20" device-type="phone,2in1,tablet,wearable,tv">GwpAsanOptions<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gwpasanoptions20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>GWP-ASan配置项。可用于配置是否使能、采样频率，以及最大分配的插槽数。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">alwaysEnabled</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>true：100%使能GWP-ASan。</p>          <p>false：1/128概率使能GWP-ASan。</p>          <p>默认值：false。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">sampleRate</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>GWP-ASan采样频率，默认值为2500，需要传入大于0的正整数，若传入小数则向上取整。</p>          <p>1/sampleRate的概率对分配的内存进行采样。</p>          <p>建议值：&gt;=1000，过小会显著影响性能。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">maxSimutaneousAllocations</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>最大分配的插槽数，默认值为1000，需要传入大于0的正整数，若传入小数则向上取整。</p>          <p>当插槽用尽时，新分配的内存将不再受监控。</p>          <p>释放已使用的内存后，其占用的插槽将自动复用，以便于后续内存的监控。</p>          <p>建议值：&lt;=20000，过大会可能导致VMA超限崩溃。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 487px;">     <h2 id="hidebugdisablegwpasangrayscale20" device-type="phone,2in1,tablet,wearable,tv">hidebug.disableGwpAsanGrayscale<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugdisablegwpasangrayscale20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>disableGwpAsanGrayscale(): void</p>     <p>停止使能GWP-ASan。调用该接口将取消自定义配置，恢复默认参数<a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#gwpasanoptions20">GwpAsanOptions</a>。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li>hidebug.<span class="hljs-title function_">disableGwpAsanGrayscale</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 706px;">     <h2 id="hidebuggetgwpasangrayscalestate20" device-type="phone,2in1,tablet,wearable,tv">hidebug.getGwpAsanGrayscaleState<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebuggetgwpasangrayscalestate20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getGwpAsanGrayscaleState(): number</p>     <p>获取当前GWP-ASan剩余使能天数。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>返回值</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">获取当前GWP-ASan剩余使能天数。若当前未使能，返回值0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">remainDays</span>: <span class="hljs-built_in">number</span> = hidebug.<span class="hljs-title function_">getGwpAsanGrayscaleState</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`remainDays: <span class="hljs-subst">${remainDays}</span>`</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 802px;">     <h2 id="hidebugsetjsrawheaptrimlevel20" device-type="phone,2in1,tablet,wearable,tv">hidebug.setJsRawHeapTrimLevel<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hidebugsetjsrawheaptrimlevel20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setJsRawHeapTrimLevel(level: JsRawHeapTrimLevel): void</p>     <p>设置当前进程转储虚拟机原始堆快照的裁剪级别。使用该接口并传入参数TRIM_LEVEL_2，可以有效减少堆快照的文件大小。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>默认裁剪级别是TRIM_LEVEL_1。如果设置了TRIM_LEVEL_2裁剪，需使用API version 20之后的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/rawheap-translator" target="_blank">rawheap-translator</a>工具才能将.rawheap文件转换为.heapsnapshot文件，否则可能导致转换失败。</p>       <p>该接口影响<a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#hidebugdumpjsrawheapdata18">dumpJsRawHeapData</a>的结果。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <p><strong>参数</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">level</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hidebug#jsrawheaptrimlevel20">JsRawHeapTrimLevel</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">转储堆快照的裁剪级别，默认为TRIM_LEVEL_1。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>：</p>     <div _ngcontent-hid-c106="" class="highlight-div"><div _ngcontent-hid-c106="" class="highlight-div-header"><div _ngcontent-hid-c106="" class="highlight-div-header-left"><div _ngcontent-hid-c106="" class="handle-button expand-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hid-c106="" class="highlight-div-header-right"><div _ngcontent-hid-c106="" class="handle-button ai-button"></div><div _ngcontent-hid-c106="" class="handle-button line-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hid-c106="" class="handle-button theme-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hid-c106="" class="handle-button copy-button"><div _ngcontent-hid-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hid-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hidebug } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li>hidebug.<span class="hljs-title function_">setJsRawHeapTrimLevel</span>(hidebug.<span class="hljs-property">JsRawHeapTrimLevel</span>.<span class="hljs-property">TRIM_LEVEL_2</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 690px;">     <h2 id="graphicsmemorysummary21" device-type="phone,2in1,tablet,wearable,tv">GraphicsMemorySummary<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="graphicsmemorysummary21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>描述应用显存数据，包括gl和graph部分。</p>     <p><strong>元服务API</strong>：从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.HiviewDFX.HiProfiler.HiDebug</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">gl</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">gl显存大小，进程统计的DMA内存占用，包括直接通过接口申请的DMA buffer和通过allocator_host申请的DMA buffer，以KB为单位。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">graph</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">graph显存大小，RenderService渲染进程加载所需资源占用的内存，例如图片、纹理等，以KB为单位。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>