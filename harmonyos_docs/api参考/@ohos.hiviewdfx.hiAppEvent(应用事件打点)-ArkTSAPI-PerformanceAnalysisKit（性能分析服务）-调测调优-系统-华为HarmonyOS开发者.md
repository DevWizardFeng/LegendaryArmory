<h1 _ngcontent-ahg-c119="" class="doc-title ng-star-inserted" title="@ohos.hiviewdfx.hiAppEvent (应用事件打点)"> @ohos.hiviewdfx.hiAppEvent (应用事件打点) </h1>

<div _ngcontent-ahg-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本模块提供应用打点和事件订阅能力，包括事件存储、事件订阅、事件清理、打点配置等功能。HiAppEvent将应用运行过程中触发的事件信息统一归纳到<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#appeventinfo">AppEventInfo</a>中，并将事件分为系统事件和应用事件两类。</p>    <p>系统事件来源于系统服务，是系统预先定义的事件，这类事件信息中的事件参数对象params包含的字段已由各系统事件定义，具体字段含义在各系统事件指南的介绍中，例如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-crash-events" target="_blank">崩溃事件介绍</a>。</p>    <p>应用事件来源于应用，是应用开发者自己定义的事件，这类事件信息支持自定义后通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventwrite-1">Write</a>打点接口进行配置设定，具体字段含义可结合开发者需求展开。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 9开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hiAppEvent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventaddwatcher" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.addWatcher<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventaddwatcher" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>addWatcher(watcher: Watcher): AppEventPackageHolder</p>     <p>添加事件观察者。可通过事件观察者的回调函数监听事件。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">watcher</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#watcher">Watcher</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件观察者。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#appeventpackageholder">AppEventPackageHolder</a></td>         <td class="cellrowborder" width="50%">订阅数据持有者。订阅失败时返回null。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiappevent">应用事件打点错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11102001</td>         <td class="cellrowborder" width="50%">Invalid watcher name. Possible causes: 1. Contain invalid characters; 2. Length is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11102002</td>         <td class="cellrowborder" width="50%">Invalid filtering event domain. Possible causes: 1. Contain invalid characters; 2. Length is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11102003</td>         <td class="cellrowborder" width="50%">Invalid row value. Possible caused by the row value is less than zero.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11102004</td>         <td class="cellrowborder" width="50%">Invalid size value. Possible caused by the size value is less than zero.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11102005</td>         <td class="cellrowborder" width="50%">Invalid timeout value. Possible caused by the timeout value is less than zero.</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>addWatcher接口涉及I/O操作。在对性能敏感的业务场景中，开发者应根据实际需要确定该接口是在主线程还是在子线程中调用。</p>       <p>如果选择在子线程中调用addWatcher，需要确保该子线程在整个接口使用周期内不会被销毁，以免影响接口的正常工作。</p>       <p>可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/multi-thread-concurrency-overview" target="_blank">多线程并发概述</a>，以实现在子线程中调用接口。</p>       <p>订阅接口addWatcher传入的名称name是唯一的，相同的name，后一次调用会覆盖前一次的订阅。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <p>根据添加的事件观察者类型，目前有如下三种使用方法：</p>     <p>方法一：设置回调条件triggerCondition，实现onTrigger()回调。当满足回调条件时，系统将自动触发回调。</p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li>hiAppEvent.<span class="hljs-title function_">addWatcher</span>({</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"watcher1"</span>,</li><li>  <span class="hljs-comment">// 订阅过滤条件，这里是订阅了系统事件领域的应用崩溃事件</span></li><li>  <span class="hljs-attr">appEventFilters</span>: [</li><li>    {</li><li>      <span class="hljs-attr">domain</span>: hiAppEvent.<span class="hljs-property">domain</span>.<span class="hljs-property">OS</span>,</li><li>      <span class="hljs-attr">names</span>: [hiAppEvent.<span class="hljs-property">event</span>.<span class="hljs-property">APP_CRASH</span>]</li><li>    }</li><li>  ],</li><li>  <span class="hljs-comment">// 设置触发onTrigger回调的条件，这里是当满足事件总数量达到10个或事件总大小达到1000byte或事件发生超过30s时会触发回调</span></li><li>  <span class="hljs-attr">triggerCondition</span>: {</li><li>    <span class="hljs-attr">row</span>: <span class="hljs-number">10</span>,</li><li>    <span class="hljs-attr">size</span>: <span class="hljs-number">1000</span>,</li><li>    <span class="hljs-attr">timeOut</span>: <span class="hljs-number">1</span></li><li>  },</li><li>  <span class="hljs-comment">// 实现onTrigger回调，结合triggerCondition使用，满足回调条件触发回调，接收到回调通知后，使用takeNext()查询订阅的事件</span></li><li>  <span class="hljs-attr">onTrigger</span>: <span class="hljs-function">(<span class="hljs-params">curRow: <span class="hljs-built_in">number</span>, curSize: <span class="hljs-built_in">number</span>, holder: hiAppEvent.AppEventPackageHolder</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (holder == <span class="hljs-literal">null</span>) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">"holder is null"</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`curRow=<span class="hljs-subst">${curRow}</span>, curSize=<span class="hljs-subst">${curSize}</span>`</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">eventPkg</span>: hiAppEvent.<span class="hljs-property">AppEventPackage</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>    <span class="hljs-keyword">while</span> ((eventPkg = holder.<span class="hljs-title function_">takeNext</span>()) != <span class="hljs-literal">null</span>) {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`eventPkg.packageId=<span class="hljs-subst">${eventPkg.packageId}</span>`</span>);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`eventPkg.row=<span class="hljs-subst">${eventPkg.row}</span>`</span>);</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`eventPkg.size=<span class="hljs-subst">${eventPkg.size}</span>`</span>);</li><li>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> eventInfo <span class="hljs-keyword">of</span> eventPkg.<span class="hljs-property">data</span>) {</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`eventPkg.data=<span class="hljs-subst">${eventInfo}</span>`</span>);</li><li>      }</li><li>    }</li><li>  }</li><li>});</li></ol></pre></div></div>     <p>方法二：未设置回调条件参数，使用事件订阅返回的holder对象主动获取监听的事件。</p>     <p>针对异常退出时产生的崩溃事件（hiAppEvent.event.APP_CRASH）和应用冻屏事件（hiAppEvent.event.APP_FREEZE），系统捕获维测日志有一定耗时，典型情况下30s内完成，极端情况下2min左右完成。</p>     <p>在手动处理订阅事件的方法中，由于事件可能未生成或日志信息未抓取完成，建议在进程启动后延时重试调用takeNext()获取此类事件。</p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">holder</span>: hiAppEvent.<span class="hljs-property">AppEventPackageHolder</span> = hiAppEvent.<span class="hljs-title function_">addWatcher</span>({</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"watcher2"</span>,</li><li>  <span class="hljs-comment">// 订阅过滤条件，这里是订阅了系统事件领域的应用崩溃事件</span></li><li>  <span class="hljs-attr">appEventFilters</span>: [</li><li>    {</li><li>      <span class="hljs-attr">domain</span>: hiAppEvent.<span class="hljs-property">domain</span>.<span class="hljs-property">OS</span>,</li><li>      <span class="hljs-attr">names</span>: [hiAppEvent.<span class="hljs-property">event</span>.<span class="hljs-property">APP_CRASH</span>]</li><li>    }</li><li>  ],</li><li>});</li><li><span class="hljs-comment">// 通过订阅数据持有者holder，主动获取崩溃事件</span></li><li><span class="hljs-keyword">if</span> (holder != <span class="hljs-literal">null</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">eventPkg</span>: hiAppEvent.<span class="hljs-property">AppEventPackage</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">while</span> ((eventPkg = holder.<span class="hljs-title function_">takeNext</span>()) != <span class="hljs-literal">null</span>) {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`eventPkg.packageId=<span class="hljs-subst">${eventPkg.packageId}</span>`</span>);</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`eventPkg.row=<span class="hljs-subst">${eventPkg.row}</span>`</span>);</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`eventPkg.size=<span class="hljs-subst">${eventPkg.size}</span>`</span>);</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> eventInfo <span class="hljs-keyword">of</span> eventPkg.<span class="hljs-property">data</span>) {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`eventPkg.data=<span class="hljs-subst">${eventInfo}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>方法三：实现onReceive()回调，当监听的事件发生后实时触发回调。</p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li>hiAppEvent.<span class="hljs-title function_">addWatcher</span>({</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"watcher3"</span>,</li><li>  <span class="hljs-comment">// 订阅过滤条件，这里是订阅了系统事件领域的应用崩溃事件</span></li><li>  <span class="hljs-attr">appEventFilters</span>: [</li><li>    {</li><li>      <span class="hljs-attr">domain</span>: hiAppEvent.<span class="hljs-property">domain</span>.<span class="hljs-property">OS</span>,</li><li>      <span class="hljs-attr">names</span>: [hiAppEvent.<span class="hljs-property">event</span>.<span class="hljs-property">APP_CRASH</span>]</li><li>    }</li><li>  ],</li><li>  <span class="hljs-comment">// 实现onReceive回调，监听到事件后实时回调</span></li><li>  <span class="hljs-attr">onReceive</span>: <span class="hljs-function">(<span class="hljs-params">domain: <span class="hljs-built_in">string</span>, appEventGroups: <span class="hljs-built_in">Array</span>&lt;hiAppEvent.AppEventGroup&gt;</span>) =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`domain=<span class="hljs-subst">${domain}</span>`</span>);</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> eventGroup <span class="hljs-keyword">of</span> appEventGroups) {</li><li>      hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`eventName=<span class="hljs-subst">${eventGroup.name}</span>`</span>);</li><li>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> eventInfo <span class="hljs-keyword">of</span> eventGroup.<span class="hljs-property">appEventInfos</span>) {</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`event=<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(eventInfo)}</span>`</span>, );</li><li>      }</li><li>    }</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventremovewatcher" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.removeWatcher<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventremovewatcher" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeWatcher(watcher: Watcher): void</p>     <p>移除事件观察者。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">watcher</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#watcher">Watcher</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件观察者。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiappevent">应用事件打点错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11102001</td>         <td class="cellrowborder" width="50%">Invalid watcher name. Possible causes: 1. Contain invalid characters; 2. Length is invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 1. 定义一个事件观察者</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">watcher</span>: hiAppEvent.<span class="hljs-property">Watcher</span> = {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"watcher1"</span>,</li><li>}</li><li>
</li><li><span class="hljs-comment">// 2. 添加一个事件观察者来订阅事件</span></li><li>hiAppEvent.<span class="hljs-title function_">addWatcher</span>(watcher);</li><li>
</li><li><span class="hljs-comment">// 3. 移除该事件观察者以取消订阅事件</span></li><li>hiAppEvent.<span class="hljs-title function_">removeWatcher</span>(watcher);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventseteventparam12" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.setEventParam<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventseteventparam12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setEventParam(params: Record&lt;string, ParamType&gt;, domain: string, name?: string): Promise&lt;void&gt;</p>     <p>事件自定义参数设置方法，使用Promise方式作为异步回调。在同一生命周期中，可以通过事件领域和事件名称关联系统事件和应用事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">params</td>         <td class="cellrowborder" width="25%">Record&lt;string, <a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#paramtype12">ParamType</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>事件自定义参数对象。参数名和参数值规格定义如下：</p>          <p>- 参数名为string类型，首字符必须为字母字符或$字符。中间字符必须为数字字符、字母字符或下划线字符。结尾字符必须为数字字符或字母字符。长度非空且不超过32个字符。</p>          <p>- 参数值为<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#paramtype12">ParamType</a>类型，参数值长度需在1024个字符以内。</p>          <p>- 参数个数需在64个以内。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">domain</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件领域。事件领域可支持关联应用事件和系统事件（hiAppEvent.domain.OS）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>事件名称。默认为空字符串，空字符串表示关联事件领域下的所有事件名称。事件名称可支持关联应用事件和系统事件，其中系统事件仅支持关联：</p>          <p>- <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-crash-events" target="_blank">崩溃事件</a>（hiAppEvent.event.APP_CRASH）</p>          <p>- <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-freeze-events" target="_blank">应用冻屏事件</a>（hiAppEvent.event.APP_FREEZE）</p>          <p>- <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-resourceleak-events" target="_blank">资源泄漏事件</a>（hiAppEvent.event.RESOURCE_OVERLIMIT）。</p>          <p><strong>注意</strong>：从API version 20开始，支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-resourceleak-events" target="_blank">资源泄漏事件</a>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiappevent">应用事件打点错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11100001</td>         <td class="cellrowborder" width="50%">Function disabled. Possible caused by the param disable in ConfigOption is true.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101001</td>         <td class="cellrowborder" width="50%">Invalid event domain. Possible causes: 1. Contain invalid characters; 2. Length is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101002</td>         <td class="cellrowborder" width="50%">Invalid event name. Possible causes: 1. Contain invalid characters; 2. Length is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101004</td>         <td class="cellrowborder" width="50%">Invalid string length of the event parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101005</td>         <td class="cellrowborder" width="50%">Invalid event parameter name. Possible causes: 1. Contain invalid characters; 2. Length is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101007</td>         <td class="cellrowborder" width="50%">The number of parameter keys exceeds the limit.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">params</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, hiAppEvent.<span class="hljs-property">ParamType</span>&gt; = {</li><li>  <span class="hljs-string">"int_data"</span>: <span class="hljs-number">100</span>,</li><li>  <span class="hljs-string">"str_data"</span>: <span class="hljs-string">"strValue"</span>,</li><li>};</li><li>
</li><li><span class="hljs-comment">// 给应用事件追加自定义参数</span></li><li>hiAppEvent.<span class="hljs-title function_">setEventParam</span>(params, <span class="hljs-string">"test_domain"</span>, <span class="hljs-string">"test_event"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`success to set event param`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventseteventconfig15" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.setEventConfig<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventseteventconfig15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setEventConfig(name: string, config: Record&lt;string, ParamType&gt;): Promise&lt;void&gt;</p>     <p>事件相关的配置参数设置方法，使用Promise方式作为异步回调。在同一生命周期中，可以通过事件名称，设置事件相关的配置参数。</p>     <p>不同的事件有不同的配置项，目前仅支持以下事件：</p>     <ul>      <li>MAIN_THREAD_JANK（参数配置详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-mainthreadjank-events#seteventconfig参数设置说明" target="_blank">主线程超时事件检测</a>）</li>      <li>APP_CRASH（参数配置详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-crash-events#崩溃日志规格自定义参数设置" target="_blank">崩溃日志配置参数设置介绍</a>）</li>      <li>RESOURCE_OVERLIMIT（参数配置详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-resourceleak-events#自定义规格设置" target="_blank">资源泄漏事件检测</a>）</li>     </ul>     <p><strong>元服务API：</strong> 从API version 15开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%">Record&lt;string, <a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#paramtype12">ParamType</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>事件自定义参数对象。参数名和参数值规格定义如下：</p>          <p>- 参数名为string类型，要求非空，且参数名长度需在1024个字符以内。</p>          <p>- 参数值为ParamType类型，参数值长度需在1024个字符以内。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>以下示例用于模拟配置MAIN_THREAD_JANK事件的采集堆栈自定义参数：</p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">params</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, hiAppEvent.<span class="hljs-property">ParamType</span>&gt; = {</li><li>  <span class="hljs-string">"log_type"</span>: <span class="hljs-string">"1"</span>,</li><li>  <span class="hljs-string">"sample_interval"</span>: <span class="hljs-string">"100"</span>,</li><li>  <span class="hljs-string">"ignore_startup_time"</span>: <span class="hljs-string">"11"</span>,</li><li>  <span class="hljs-string">"sample_count"</span>: <span class="hljs-string">"21"</span>,</li><li>  <span class="hljs-string">"report_times_per_app"</span>: <span class="hljs-string">"3"</span></li><li>};</li><li>hiAppEvent.<span class="hljs-title function_">setEventConfig</span>(hiAppEvent.<span class="hljs-property">event</span>.<span class="hljs-property">MAIN_THREAD_JANK</span>, params).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`Successfully set sampling stack parameters.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`Failed to set sample stack value. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="watcher" device-type="phone,2in1,tablet,wearable,tv">Watcher<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="watcher" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供事件观察者的参数选项。用于配置和管理事件的观察者，实现对特定事件的监听和处理。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">name</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">观察者名称，用于唯一标识观察者。首字符必须为字母字符，中间字符必须为数字字符、字母字符或下划线字符，结尾字符必须为数字字符或字母字符，长度非空且不超过32个字符。如testName1、crash_Watcher等。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">triggerCondition</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#triggercondition">TriggerCondition</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">订阅回调触发条件，需要与回调函数onTrigger一同传入才会生效。默认不触发。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">appEventFilters</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#appeventfilter">AppEventFilter</a>[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">订阅过滤条件，在需要对订阅事件进行过滤时传入。默认不过滤事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">onTrigger</td>         <td class="cellrowborder" width="20%">(curRow: number, curSize: number, holder: <a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#appeventpackageholder">AppEventPackageHolder</a>) =&gt; void</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>订阅回调函数，需要与回调触发条件triggerCondition一同传入才会生效，函数入参说明如下：</p>          <p>curRow：在本次回调触发时的订阅事件总数量；</p>          <p>curSize：在本次回调触发时的订阅事件总大小，单位为byte；</p>          <p>holder：订阅数据持有者对象，可以通过其对订阅事件进行处理。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">onReceive<sup>11+</sup></td>         <td class="cellrowborder" width="20%">(domain: string, appEventGroups: Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#appeventgroup11">AppEventGroup</a>&gt;) =&gt; void</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>订阅实时回调函数，与回调函数onTrigger同时存在时，只触发此回调，函数入参说明如下：</p>          <p>domain：回调事件的领域名称；</p>          <p>appEventGroups：回调事件集合。</p></td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>不建议在回调函数中执行<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventremovewatcher">移除观察者</a>的操作，watcher一旦被移除，则其原有的订阅回调功能也会随之失效，可能会造成某些事件发生后无订阅回调情况。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="triggercondition" device-type="phone,2in1,tablet,wearable,tv">TriggerCondition<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="triggercondition" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供设置<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#watcher">Watcher</a>的onTrigger回调触发条件的参数选项。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">row</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">满足触发回调的事件总数量，正整数。默认值0，不触发回调。传入负值时，会被置为默认值。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">size</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">满足触发回调的事件总大小，正整数，单位为byte。默认值0，不触发回调。传入负值时，会被置为默认值。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">timeOut</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">满足触发回调的超时时长，正整数，单位为30s。默认值0，不触发回调。传入负值时，会被置为默认值。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="appeventfilter" device-type="phone,2in1,tablet,wearable,tv">AppEventFilter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="appeventfilter" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供设置<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#watcher">Watcher</a>的订阅过滤条件的参数选项。用于在事件观察者中设置事件过滤条件，确保只有满足过滤条件的事件才会被监听处理。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">domain</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">需要订阅的事件领域。可以是系统事件领域（hiAppEvent.domain.OS）或开发者在使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventwrite-1">Write</a>接口时传入的自定义事件信息（<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#appeventinfo">AppEventInfo</a>）中的事件领域。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">eventTypes</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#eventtype">EventType</a>[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">需要订阅的事件类型集合。默认不进行过滤。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">names<sup>11+</sup></td>         <td class="cellrowborder" width="20%">string[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">需要订阅的事件名称集合。默认不进行过滤。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>系统事件中：地址越界事件和任务执行超时事件不支持在元服务中订阅。启动耗时事件、滑动丢帧事件、CPU高负载事件、24h功耗器件分解统计事件和音频卡顿事件均不支持在元服务和分身应用中订阅。</p>      </div></div></div>    </div>    <div class="tiledSection">     <h2 id="appeventpackageholder" device-type="phone,2in1,tablet,wearable,tv">AppEventPackageHolder<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="appeventpackageholder" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>订阅数据持有者类，用于对事件信息进行处理。</p>    </div>    <div class="tiledSection">     <h3 id="constructor" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(watcherName: string)</p>     <p>类构造函数，用于创建订阅数据持有者实例。先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventaddwatcher">addWatcher</a>添加事件观察者，再通过观察者名称关联到应用内已添加的观察者对象。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">watcherName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">已通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventaddwatcher">addWatcher</a>添加的事件观察者名称。若未通过addWatcher添加，则默认无数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 添加数据观察者“Watcher1”，订阅监听系统事件</span></li><li>hiAppEvent.<span class="hljs-title function_">addWatcher</span>({</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"Watcher1"</span>,</li><li>  <span class="hljs-attr">appEventFilters</span>: [</li><li>    {</li><li>      <span class="hljs-attr">domain</span>: hiAppEvent.<span class="hljs-property">domain</span>.<span class="hljs-property">OS</span>,</li><li>    }</li><li>  ],</li><li>  });</li><li>
</li><li><span class="hljs-comment">// 创建订阅数据持有者实例，holder1持有的数据为上述addWatcher中添加的观察者“Watcher1”监听到的事件</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">holder1</span>: hiAppEvent.<span class="hljs-property">AppEventPackageHolder</span> = <span class="hljs-keyword">new</span> hiAppEvent.<span class="hljs-title class_">AppEventPackageHolder</span>(<span class="hljs-string">"Watcher1"</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setsize" device-type="phone,2in1,tablet,wearable,tv">setSize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsize" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSize(size: number): void</p>     <p>设置每次取出的事件包的数据大小阈值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">size</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">数据大小阈值，单位为byte。取值范围[0, 2^31-1]，超出范围会抛异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiappevent">应用事件打点错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11104001</td>         <td class="cellrowborder" width="50%">Invalid size value. Possible caused by the size value is less than or equal to zero.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建订阅数据持有者实例，holder2持有的数据为已通过addWatcher添加的观察者“Watcher1”监听到的事件</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">holder2</span>: hiAppEvent.<span class="hljs-property">AppEventPackageHolder</span> = <span class="hljs-keyword">new</span> hiAppEvent.<span class="hljs-title class_">AppEventPackageHolder</span>(<span class="hljs-string">"Watcher1"</span>);</li><li><span class="hljs-comment">// 设置每次取出事件包的数据大小阈值为1000byte</span></li><li>holder2.<span class="hljs-title function_">setSize</span>(<span class="hljs-number">1000</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setrow12" device-type="phone,2in1,tablet,wearable,tv">setRow<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setrow12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setRow(size: number): void</p>     <p>设置每次取出的事件包的数据条数，优先级高于setSize，和setSize同时调用时仅setRow生效。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">size</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件条数，单位为条。取值范围(0, 2^31-1]，超出范围会抛异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiappevent">应用事件打点错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11104001</td>         <td class="cellrowborder" width="50%">Invalid size value. Possible caused by the size value is less than or equal to zero.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建订阅数据持有者实例，holder3持有的数据为已通过addWatcher添加的观察者“Watcher1”监听到的事件</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">holder3</span>: hiAppEvent.<span class="hljs-property">AppEventPackageHolder</span> = <span class="hljs-keyword">new</span> hiAppEvent.<span class="hljs-title class_">AppEventPackageHolder</span>(<span class="hljs-string">"Watcher1"</span>);</li><li><span class="hljs-comment">// 设置每次取出的事件包的数据条数为1000条</span></li><li>holder3.<span class="hljs-title function_">setRow</span>(<span class="hljs-number">1000</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="takenext" device-type="phone,2in1,tablet,wearable,tv">takeNext<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="takenext" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>takeNext(): AppEventPackage</p>     <p>获取订阅事件。</p>     <p>系统根据setSize设置的数据大小阈值或setRow设置的条数来取出订阅事件数据，默认取1条订阅事件。当订阅事件数据全部被取出时返回null。</p>     <p>当setRow和setSize同时调用时仅setRow生效。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#appeventpackage">AppEventPackage</a></td>         <td class="cellrowborder" width="50%">取出的事件包对象，订阅事件数据被全部取出后会返回null。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 创建订阅数据持有者实例，holder4持有的数据为已通过addWatcher添加的观察者“Watcher1”监听到的事件</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">holder4</span>: hiAppEvent.<span class="hljs-property">AppEventPackageHolder</span> = <span class="hljs-keyword">new</span> hiAppEvent.<span class="hljs-title class_">AppEventPackageHolder</span>(<span class="hljs-string">"Watcher1"</span>);</li><li><span class="hljs-comment">// 获取订阅事件</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">eventPkg</span>: hiAppEvent.<span class="hljs-property">AppEventPackage</span> | <span class="hljs-literal">null</span> = holder4.<span class="hljs-title function_">takeNext</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="appeventinfo" device-type="phone,2in1,tablet,wearable,tv">AppEventInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="appeventinfo" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供事件信息的参数选项。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">domain</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">事件领域。事件领域名称支持数字、字母、下划线字符，需要以字母开头且不能以下划线结尾，长度非空且不超过32个字符。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">name</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">事件名称。首字符必须为字母字符或$字符，中间字符必须为数字字符、字母字符或下划线字符，结尾字符必须为数字字符或字母字符，长度非空且不超过48个字符。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">eventType</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#eventtype">EventType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">事件类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">params</td>         <td class="cellrowborder" width="20%">object</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>事件参数对象，包含每个事件参数的参数名和参数值。<strong>系统事件中params包含的字段已由各系统事件定义，具体字段含义在各类系统事件指南的介绍中，例如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/hiappevent-watcher-crash-events" target="_blank">崩溃事件介绍</a>。</strong> 针对应用事件，<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventwrite-1">Write</a>打点写入的参数由开发者定义，其规格如下：</p>          <p>- 参数名为string类型，首字符必须为字母字符或$字符，中间字符必须为数字字符、字母字符或下划线字符，结尾字符必须为数字字符或字母字符，长度非空且不超过32个字符。如testName、$123_name等。</p>          <p>- 参数值支持string、number、boolean、数组类型。string类型参数长度需在8*1024个字符以内，超出后会和对应的参数名一同被丢弃；number类型参数取值需在Number.MIN_SAFE_INTEGER~Number.MAX_SAFE_INTEGER范围内，超出可能会产生不确定值；数组类型参数中的元素类型只能全为string、number、boolean中的一种，且元素个数需在100以内，超出部分即从第101个元素开始会被丢弃。</p>          <p>- 参数个数需在32个以内，超出的参数会做丢弃处理。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="appeventpackage" device-type="phone,2in1,tablet,wearable,tv">AppEventPackage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="appeventpackage" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供订阅返回的事件包的参数定义。可用于获取事件包的详细信息，事件包由<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#takenext">takeNext</a>接口获得。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">packageId</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>事件包ID，从0开始自动递增。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">row</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>事件包的事件数量。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">size</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>事件包的事件大小，单位为byte。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">data</td>         <td class="cellrowborder" width="20%">string[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>事件包的事件信息。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">appEventInfos<sup>12+</sup></td>         <td class="cellrowborder" width="20%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#appeventinfo">AppEventInfo</a>&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>事件对象集合。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该参数支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="appeventgroup11" device-type="phone,2in1,tablet,wearable,tv">AppEventGroup<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="appeventgroup11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供订阅返回的事件组的参数定义。可用于获取事件组的详细信息，事件组常在<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#watcher">Watcher</a>的onReceive回调中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">name</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">事件名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">appEventInfos</td>         <td class="cellrowborder" width="20%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#appeventinfo">AppEventInfo</a>&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">事件对象集合。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="hiappeventwrite" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.write<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventwrite" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>write(info: AppEventInfo, callback: AsyncCallback&lt;void&gt;): void</p>     <p>应用事件打点方法，将AppEventInfo类型的事件进行存储，使用callback方式作为异步回调。通过此接口写入的事件对象是开发者自定义的对象，为了避免与系统事件产生冲突混淆，不建议写入系统事件（<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventevent">Event</a>中定义的系统事件名称常量）。此接口写入的事件可通过订阅事件观察者（<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventaddwatcher">addWatcher</a>）进行订阅。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">info</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#appeventinfo">AppEventInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用事件对象。其内部定义的事件名称建议避免与<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventevent">Event</a>中定义的系统事件名称常量产生冲突。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">打点回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiappevent">应用事件打点错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11100001</td>         <td class="cellrowborder" width="50%">Function disabled. Possible caused by the param disable in ConfigOption is true.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101001</td>         <td class="cellrowborder" width="50%">Invalid event domain. Possible causes: 1. Contain invalid characters; 2. Length is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101002</td>         <td class="cellrowborder" width="50%">Invalid event name. Possible causes: 1. Contain invalid characters; 2. Length is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101003</td>         <td class="cellrowborder" width="50%">Invalid number of event parameters. Possible caused by the number of parameters is over 32.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101004</td>         <td class="cellrowborder" width="50%">Invalid string length of the event parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101005</td>         <td class="cellrowborder" width="50%">Invalid event parameter name. Possible causes: 1. Contain invalid characters; 2. Length is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101006</td>         <td class="cellrowborder" width="50%">Invalid array length of the event parameter.</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>write接口涉及I/O操作，执行时间通常在毫秒级别。因此，开发者应根据实际业务需求，确定该接口是在主线程还是在子线程中调用。</p>       <p>可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/multi-thread-concurrency-overview" target="_blank">多线程并发概述</a>，以实现在子线程中调用接口。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">eventParams</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>&gt; = {</li><li>  <span class="hljs-string">"int_data"</span>: <span class="hljs-number">100</span>,</li><li>  <span class="hljs-string">"str_data"</span>: <span class="hljs-string">"strValue"</span>,</li><li>};</li><li>
</li><li><span class="hljs-comment">// 应用事件打点，使用callback方式作为异步回调</span></li><li>hiAppEvent.<span class="hljs-title function_">write</span>({</li><li>  <span class="hljs-attr">domain</span>: <span class="hljs-string">"test_domain"</span>,</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"test_event"</span>,</li><li>  <span class="hljs-attr">eventType</span>: hiAppEvent.<span class="hljs-property">EventType</span>.<span class="hljs-property">FAULT</span>,</li><li>  <span class="hljs-attr">params</span>: eventParams,</li><li>}, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`success to write event`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventwrite-1" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.write<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventwrite-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>write(info: AppEventInfo): Promise&lt;void&gt;</p>     <p>应用事件打点方法，将AppEventInfo类型的事件进行存储，使用Promise方式作为异步回调。通过此接口写入的事件对象是开发者自定义的对象，为了避免与系统事件产生冲突混淆，不建议写入系统事件（<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventevent">Event</a>中定义的系统事件名称常量）。此接口写入的事件可通过订阅事件观察者（<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventaddwatcher">addWatcher</a>）进行处理。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">info</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#appeventinfo">AppEventInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用事件对象。其中的事件名称建议避免与<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventevent">Event</a>中定义的系统事件名称常量冲突混淆。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiappevent">应用事件打点错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11100001</td>         <td class="cellrowborder" width="50%">Function disabled. Possible caused by the param disable in ConfigOption is true.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101001</td>         <td class="cellrowborder" width="50%">Invalid event domain. Possible causes: 1. Contain invalid characters; 2. Length is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101002</td>         <td class="cellrowborder" width="50%">Invalid event name. Possible causes: 1. Contain invalid characters; 2. Length is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101003</td>         <td class="cellrowborder" width="50%">Invalid number of event parameters. Possible caused by the number of parameters is over 32.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101004</td>         <td class="cellrowborder" width="50%">Invalid string length of the event parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101005</td>         <td class="cellrowborder" width="50%">Invalid event parameter name. Possible causes: 1. Contain invalid characters; 2. Length is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11101006</td>         <td class="cellrowborder" width="50%">Invalid array length of the event parameter.</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>write接口涉及I/O操作，执行时间通常在毫秒级别。因此，开发者应根据实际业务需求，确定该接口是在主线程还是在子线程中调用。</p>       <p>可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/multi-thread-concurrency-overview" target="_blank">多线程并发概述</a>，以实现在子线程中调用接口。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">eventParams</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span>&gt; = {</li><li>  <span class="hljs-string">"int_data"</span>: <span class="hljs-number">100</span>,</li><li>  <span class="hljs-string">"str_data"</span>: <span class="hljs-string">"strValue"</span>,</li><li>};</li><li>
</li><li><span class="hljs-comment">// 应用事件打点，使用Promise方式作为异步回调</span></li><li>hiAppEvent.<span class="hljs-title function_">write</span>({</li><li>  <span class="hljs-attr">domain</span>: <span class="hljs-string">"test_domain"</span>,</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"test_event"</span>,</li><li>  <span class="hljs-attr">eventType</span>: hiAppEvent.<span class="hljs-property">EventType</span>.<span class="hljs-property">FAULT</span>,</li><li>  <span class="hljs-attr">params</span>: eventParams,</li><li>}).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`success to write event`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventaddprocessor11" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.addProcessor<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventaddprocessor11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>addProcessor(processor: Processor): number</p>     <p>添加数据处理者配置信息，用于配置处理者接收的事件名等信息。事件发生后处理者可以接收事件。</p>     <p>该接口为同步接口，包含耗时操作。为了确保性能，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventaddprocessorfromconfig20">addProcessorFromConfig</a>异步接口或者交由子线程执行。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">processor</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#processor11">Processor</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">上报事件的数据处理者。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">所添加上报事件数据处理者的ID，标识唯一数据处理者，可用于移除数据处理者。 添加失败返回-1，添加成功返回大于0的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">processor</span>: hiAppEvent.<span class="hljs-property">Processor</span> = {</li><li>      <span class="hljs-attr">name</span>: <span class="hljs-string">'analytics_demo'</span></li><li>    };</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> = hiAppEvent.<span class="hljs-title function_">addProcessor</span>(processor);</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`addProcessor event was successful, id=<span class="hljs-subst">${id}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`failed to addProcessor event, code=<span class="hljs-subst">${error.code}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventaddprocessorfromconfig20" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.addProcessorFromConfig<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventaddprocessorfromconfig20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>addProcessorFromConfig(processorName: string, configName?: string): Promise&lt;number&gt;</p>     <p>添加数据处理者配置信息。系统会自动解析预置在目录“/system/etc/hiappevent”的processor.json配置文件，并根据configName字段加载对应的processor信息（例如支持接收的故障事件名称等信息）。</p>     <p>配置完成后，事件发生时系统将自动触发该回调。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">processorName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>数据处理者的名称。名称只能包含大小写字母、数字、下划线和$，不能以数字开头，长度非空且不超过256个字符。</p>          <p>当前取值仅支持“ha_app_event”，表示接口故障处理者。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">configName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>数据处理者的配置名称，系统会根据配置名称从系统预置的processor.json配置文件中自动加载对应的配置项。只能包含大小写字母、数字、下划线和$，不能以数字开头，长度非空且不超过256个字符。</p>          <p>当前取值仅支持默认值“SDK_OCG”，用于配置“接口故障处理者”可处理的事件名称等信息。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回添加的事件数据处理者的唯一ID，可用于移除该数据处理者。 添加失败返回11105001错误码。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiappevent">应用事件打点错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">11105001</td>         <td class="cellrowborder" width="50%">Invalid parameter value. Possible causes: 1. Incorrect parameter length; 2. Incorrect parameter format.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li>hiAppEvent.<span class="hljs-title function_">addProcessorFromConfig</span>(<span class="hljs-string">"test_name"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">processorId</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`Succeeded in adding processor from config, processorId=<span class="hljs-subst">${processorId}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`Failed to add processor from config, code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventremoveprocessor11" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.removeProcessor<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventremoveprocessor11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeProcessor(id: number): void</p>     <p>移除上报事件的数据处理者。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">上报事件数据处理者ID。值大于0。由调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventaddprocessor11">addProcessor</a>或<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventaddprocessorfromconfig20">addProcessorFromConfig</a>接口返回值所得。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">processor</span>: hiAppEvent.<span class="hljs-property">Processor</span> = {</li><li>      <span class="hljs-attr">name</span>: <span class="hljs-string">'analytics_demo'</span></li><li>    };</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> = hiAppEvent.<span class="hljs-title function_">addProcessor</span>(processor);</li><li>    <span class="hljs-comment">// 根据添加数据处理者返回的标识id移除特定数据处理者</span></li><li>    hiAppEvent.<span class="hljs-title function_">removeProcessor</span>(id);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`failed to removeProcessor event, code=<span class="hljs-subst">${error.code}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventsetuserid11" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.setUserId<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventsetuserid11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setUserId(name: string, value: string): void</p>     <p>设置用户ID值。用于在配置<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#processor11">Processor</a>数据处理者时进行关联。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户ID的key。只能包含大小写字母、数字、下划线和 $，不能以数字开头，长度非空且不超过256个字符。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户ID的值。长度不超过256，当值为null或空字符串时，则清除用户ID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  hiAppEvent.<span class="hljs-title function_">setUserId</span>(<span class="hljs-string">'key'</span>, <span class="hljs-string">'value'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`failed to setUserId event, code=<span class="hljs-subst">${error.code}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventgetuserid11" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.getUserId<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventgetuserid11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getUserId(name: string): string</p>     <p>获取通过setUserId接口设置的value值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户ID的key。只能包含大小写字母、数字、下划线和 $，不能以数字开头，长度非空且不超过256个字符。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">用户ID的值。没有查到返回空字符串。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li>hiAppEvent.<span class="hljs-title function_">setUserId</span>(<span class="hljs-string">'key'</span>, <span class="hljs-string">'value'</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> = hiAppEvent.<span class="hljs-title function_">getUserId</span>(<span class="hljs-string">'key'</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`getUserId event was successful, userId=<span class="hljs-subst">${value}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`failed to getUserId event, code=<span class="hljs-subst">${error.code}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventsetuserproperty11" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.setUserProperty<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventsetuserproperty11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setUserProperty(name: string, value: string): void</p>     <p>设置用户属性值。用于在配置<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#processor11">Processor</a>数据处理者时进行关联。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户属性的key。只能包含大小写字母、数字、下划线和 $，不能以数字开头，长度非空且不超过256个字符。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户属性的值。长度不超过1024，当值为null或空字符串时，则清除用户属性。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  hiAppEvent.<span class="hljs-title function_">setUserProperty</span>(<span class="hljs-string">'key'</span>, <span class="hljs-string">'value'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`failed to setUserProperty event, code=<span class="hljs-subst">${error.code}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventgetuserproperty11" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.getUserProperty<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventgetuserproperty11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getUserProperty(name: string): string</p>     <p>获取通过setUserProperty接口设置的value值。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户属性的key。只能包含大小写字母、数字、下划线和 $，不能以数字开头，长度非空且不超过256个字符。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">用户属性的值。没有查到返回空字符串。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li>hiAppEvent.<span class="hljs-title function_">setUserProperty</span>(<span class="hljs-string">'key'</span>, <span class="hljs-string">'value'</span>);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> = hiAppEvent.<span class="hljs-title function_">getUserProperty</span>(<span class="hljs-string">'key'</span>);</li><li>  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`getUserProperty event was successful, userProperty=<span class="hljs-subst">${value}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'hiAppEvent'</span>, <span class="hljs-string">`failed to getUserProperty event, code=<span class="hljs-subst">${error.code}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventcleardata" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.clearData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventcleardata" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearData(): void</p>     <p>应用事件打点数据清理方法，将当前应用存储在本地的打点数据进行清除。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>hiAppEvent.<span class="hljs-title function_">clearData</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="hiappeventconfigure" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.configure<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventconfigure" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>configure(config: ConfigOption): void</p>     <p>应用事件打点配置方法，支持配置打点开关和目录存储配额大小。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#configoption">ConfigOption</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">应用事件打点配置项对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-hiappevent">应用事件打点错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">11103001</td>         <td class="cellrowborder" width="50%">Invalid max storage quota value. Possible caused by incorrectly formatted.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ahg-c106="" class="highlight-div"><div _ngcontent-ahg-c106="" class="highlight-div-header"><div _ngcontent-ahg-c106="" class="highlight-div-header-left"><div _ngcontent-ahg-c106="" class="handle-button expand-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ahg-c106="" class="highlight-div-header-right"><div _ngcontent-ahg-c106="" class="handle-button ai-button"></div><div _ngcontent-ahg-c106="" class="handle-button line-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ahg-c106="" class="handle-button theme-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ahg-c106="" class="handle-button copy-button"><div _ngcontent-ahg-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ahg-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 配置打点开关为关闭状态</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config1</span>: hiAppEvent.<span class="hljs-property">ConfigOption</span> = {</li><li>  <span class="hljs-attr">disable</span>: <span class="hljs-literal">true</span>,</li><li>};</li><li>hiAppEvent.<span class="hljs-title function_">configure</span>(config1);</li><li>
</li><li><span class="hljs-comment">// 配置文件目录存储配额为100M</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config2</span>: hiAppEvent.<span class="hljs-property">ConfigOption</span> = {</li><li>  <span class="hljs-attr">maxStorage</span>: <span class="hljs-string">'100M'</span>,</li><li>};</li><li>hiAppEvent.<span class="hljs-title function_">configure</span>(config2);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="configoption" device-type="phone,2in1,tablet,wearable,tv">ConfigOption<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="configoption" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供对应用事件打点功能的配置选项。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">disable</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">打点功能开关，默认值为false。true：关闭打点功能，false：开启打点功能。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">maxStorage</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>打点数据存放目录的配额大小，默认值为“10M”。建议配额大小不超过10M，配额过大可能会影响接口效率。</p>          <p>在目录大小超出配额后，下次打点会触发对目录的清理操作：按从旧到新的顺序逐个删除打点数据文件，直到目录大小不超出配额时结束。</p>          <p>配额值字符串规格如下：</p>          <p>- 配额值字符串只由数字字符和大小单位字符（单位字符支持[b|k|kb|m|mb|g|gb|t|tb]，不区分大小写）构成。</p>          <p>- 配额值字符串必须以数字开头，后面可以选择不传单位字符（默认使用byte作为单位），或者以单位字符结尾。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="processor11" device-type="phone,2in1,tablet,wearable,tv">Processor<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="processor11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>可以上报事件的数据处理者对象。用于事件的上报和管理，开发者可自定义数据处理配置，满足不同的数据处理需求。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">name</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>数据处理者的名称。名称只能包含大小写字母、数字、下划线和 $，不能以数字开头，长度非空且不超过256个字符。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">debugMode</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>是否开启debug模式，默认值为false。配置值为true表示开启debug模式，false表示不开启debug模式。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">routeInfo</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>服务器位置信息，默认为空字符串。传入字符串长度不能超过8KB，超过时会被置为默认值。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">appId</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>应用id，默认为空字符串。传入字符串长度不能超过8KB，超过时会被置为默认值。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">onStartReport</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>数据处理者在启动时是否上报事件，默认值为false。配置值为true表示上报事件，false表示不上报事件。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">onBackgroundReport</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>当应用程序进入后台时是否上报事件，默认值为false。配置值为true表示上报事件，false表示不上报事件。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">periodReport</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>事件定时上报时间周期，单位为秒。传入数值必须大于或等于0，小于0时会被置为默认值0，不进行定时上报。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">batchReport</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>事件上报阈值，当事件条数达到阈值时上报事件。传入数值必须大于0且小于1000，不在数值范围内会被置为默认值0，不进行上报。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">userIds</td>         <td class="cellrowborder" width="20%">string[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>数据处理者可以上报的用户ID的name数组。name对应<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventsetuserid11">setUserId</a>接口的name参数。默认为空数组。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">userProperties</td>         <td class="cellrowborder" width="20%">string[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>数据处理者可以上报的用户属性的name数组。name对应<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventsetuserproperty11">setUserProperty</a>接口的name参数。默认为空数组。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">eventConfigs</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#appeventreportconfig11">AppEventReportConfig</a>[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>数据处理者可以上报的事件描述配置数组。默认为空数组。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">configId<sup>12+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>数据处理者配置id。传入数值必须大于或等于0，小于0时会被置为默认值0。传入的值大于0时，与数据处理者的名称name共同唯一标识数据处理者。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">customConfigs<sup>12+</sup></td>         <td class="cellrowborder" width="20%">Record&lt;string, string&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>自定义扩展参数。传入参数名和参数值不符合规格会默认不配置扩展参数，其规格定义如下：</p>          <p>- 参数名为string类型，首字符必须为字母字符或$字符，中间字符必须为数字字符、字母字符或下划线字符，结尾字符必须为数字字符或字母字符，长度非空且不超过32个字符。</p>          <p>- 参数值为string类型，参数值长度需在1024个字符以内。</p>          <p>- 参数个数需在32个以内。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">configName<sup>20+</sup></td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>数据处理者的配置名称，系统会根据配置名称从系统预置的processor.json配置文件中自动加载对应的配置项。只能包含大小写字母、数字、下划线和$，不能以数字开头，长度非空且不超过256个字符。</p>          <p>当前取值仅支持默认值“SDK_OCG”，用于配置“接口故障处理者”可处理的事件名称等信息。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该参数支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="appeventreportconfig11" device-type="phone,2in1,tablet,wearable,tv">AppEventReportConfig<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="appeventreportconfig11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>数据处理者可以上报事件的描述配置。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">domain</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">事件领域。默认为空字符串，事件领域名称支持数字、字母、下划线字符，需要以字母开头且不能以下划线结尾，长度非空且不超过32个字符。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">name</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">事件名称。默认为空字符串，首字符必须为字母字符或$字符，中间字符必须为数字字符、字母字符或下划线字符，结尾字符必须为数字字符或字母字符，长度非空且不超过48个字符。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">isRealTime</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是否实时上报事件。默认值为false，配置值为true表示实时上报事件，false表示不实时上报事件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="paramtype12" device-type="phone,2in1,tablet,wearable,tv">ParamType<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="paramtype12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type ParamType = number | string | boolean | Array&lt;string&gt;</p>     <p>事件自定义参数值的类型。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">表示值类型为数字。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">表示值类型为字符串。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">表示值类型为布尔值。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="50%">表示值类型为字符串类型的数组。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="eventtype" device-type="phone,2in1,tablet,wearable,tv">EventType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="eventtype" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>事件类型枚举。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">FAULT</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">故障类型事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">STATISTIC</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">统计类型事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SECURITY</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">安全类型事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BEHAVIOR</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">行为类型事件。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="hiappeventdomain11" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.domain<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventdomain11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供领域名称常量。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.5.1.5.1.1" width="25%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.5.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.5.1.5.1.3" width="25%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.5.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">OS</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">系统领域。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="hiappeventevent" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.event<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventevent" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供事件名称常量。包含系统事件名称常量和应用事件名称常量，其中应用事件名称常量是为开发者在调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-hiviewdfx-hiappevent#hiappeventwrite-1">Write</a>接口进行应用事件打点时预留的可选自定义事件名称。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.4.1.5.1.1" width="25%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.4.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.4.1.5.1.3" width="25%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.4.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">USER_LOGIN</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>用户登录事件。预留的应用事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">USER_LOGOUT</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>用户登出事件。预留的应用事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">DISTRIBUTED_SERVICE_START</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>分布式服务启动事件。预留的应用事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">APP_CRASH<sup>11+</sup></td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用崩溃事件。系统事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">APP_FREEZE<sup>11+</sup></td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用冻屏事件。系统事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">APP_LAUNCH<sup>12+</sup></td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用启动耗时事件。系统事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">SCROLL_JANK<sup>12+</sup></td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用滑动丢帧事件。系统事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">CPU_USAGE_HIGH<sup>12+</sup></td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用CPU高负载事件。系统事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">BATTERY_USAGE<sup>12+</sup></td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用24h功耗器件分解统计事件。系统事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">RESOURCE_OVERLIMIT<sup>12+</sup></td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用资源泄漏事件。系统事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ADDRESS_SANITIZER<sup>12+</sup></td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用地址越界事件。系统事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">MAIN_THREAD_JANK<sup>12+</sup></td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用主线程超时事件。系统事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">APP_KILLED<sup>20+</sup></td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用终止事件。系统事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">AUDIO_JANK_FRAME<sup>21+</sup></td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用音频卡顿事件。系统事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 21开始，该参数支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">APP_HICOLLIE<sup>21+</sup></td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>应用任务执行超时事件。系统事件名称常量。</p>          <p><strong>元服务API：</strong> 从API version 21开始，该参数支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="hiappeventparam" device-type="phone,2in1,tablet,wearable,tv">hiAppEvent.param<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hiappeventparam" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供参数名称常量。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.HiviewDFX.HiAppEvent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.5.1.5.1.1" width="25%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.5.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.5.1.5.1.3" width="25%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.5.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">USER_ID</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户自定义ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">DISTRIBUTED_SERVICE_NAME</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">分布式服务名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">DISTRIBUTED_SERVICE_INSTANCE_ID</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">分布式服务实例ID。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>