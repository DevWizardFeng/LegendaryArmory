<h1 _ngcontent-paf-c119="" class="doc-title ng-star-inserted" title="@ohos.identifier.oaid (开放匿名设备标识服务)"> @ohos.identifier.oaid (开放匿名设备标识服务) </h1>

<div _ngcontent-paf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供开放匿名设备标识符（Open Anonymous Device Identifier, OAID，以下简称OAID）的获取和重置能力。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>本模块首批接口从API version 10开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p> <p>使用获取开放匿名设备标识符接口，需<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/request-user-authorization" target="_blank">向用户申请授权</a>（默认开启权限）：ohos.permission.APP_TRACKING_CONSENT。</p> </div></div></div> <div class="tiledSection"><h2 id="导入模块" device-type="phone,tablet,2in1,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-paf-c106="" class="highlight-div"><div _ngcontent-paf-c106="" class="highlight-div-header"><div _ngcontent-paf-c106="" class="highlight-div-header-left"><div _ngcontent-paf-c106="" class="handle-button expand-button"><div _ngcontent-paf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-paf-c106="" class="highlight-div-header-right"><div _ngcontent-paf-c106="" class="handle-button ai-button"></div><div _ngcontent-paf-c106="" class="handle-button line-button"><div _ngcontent-paf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-paf-c106="" class="handle-button theme-button"><div _ngcontent-paf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-paf-c106="" class="handle-button copy-button"><div _ngcontent-paf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-paf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { identifier } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AdsKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="identifiergetoaid" device-type="phone,tablet,2in1,tv">identifier.getOAID<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="identifiergetoaid" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getOAID(): Promise&lt;string&gt;</p> <p>获取开放匿名设备标识符（OAID）。使用Promise异步回调。</p> <p><strong>需要权限：</strong> ohos.permission.APP_TRACKING_CONSENT</p> <p><strong>系统能力：</strong> SystemCapability.Advertising.OAID</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.7.1.3.1.1" width="50.12%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.3.1.2" width="49.88%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50.12%"><p>Promise&lt;string&gt;</p> </td> <td class="cellrowborder" width="49.88%"><p>Promise对象，返回开放匿名设备标识符（OAID）。</p> <p>1.如应用已配置ohos.permission.APP_TRACKING_CONSENT权限，且“跨应用关联访问权限”为“允许”，则返回OAID。</p> <p>2.如应用已配置ohos.permission.APP_TRACKING_CONSENT权限，且“跨应用关联访问权限”为“禁止”，则返回00000000-0000-0000-0000-000000000000。</p> <p>3.如应用未配置ohos.permission.APP_TRACKING_CONSENT权限，则返回00000000-0000-0000-0000-000000000000。</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>设置项“跨应用关联访问权限”在HarmonyOS NEXT Developer Beta5及更早版本名称为“应用跟踪访问权限”。</p> </div></div></div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-oaid" target="_blank">开放匿名设备标识服务错误码参考</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>17300001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-paf-c106="" class="highlight-div"><div _ngcontent-paf-c106="" class="highlight-div-header"><div _ngcontent-paf-c106="" class="highlight-div-header-left"><div _ngcontent-paf-c106="" class="handle-button expand-button"><div _ngcontent-paf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-paf-c106="" class="highlight-div-header-right"><div _ngcontent-paf-c106="" class="handle-button ai-button"></div><div _ngcontent-paf-c106="" class="handle-button line-button"><div _ngcontent-paf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-paf-c106="" class="handle-button theme-button"><div _ngcontent-paf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-paf-c106="" class="handle-button copy-button"><div _ngcontent-paf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-paf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { identifier } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AdsKit'</span>;</li><li>
</li><li>identifier.<span class="hljs-title function_">getOAID</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">oaid</span>: <span class="hljs-built_in">string</span> = data;</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="identifiergetoaid-1" device-type="phone,tablet,2in1,tv">identifier.getOAID<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="identifiergetoaid-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>getOAID(callback: AsyncCallback&lt;string&gt;): void</p> <p>获取开放匿名设备标识符（OAID）。使用callback异步回调。</p> <p><strong>需要权限：</strong> ohos.permission.APP_TRACKING_CONSENT</p> <p><strong>系统能力：</strong> SystemCapability.Advertising.OAID</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%"><p><strong>参数</strong>名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>callback</p> </td> <td class="cellrowborder" width="25%"><p>AsyncCallback&lt;string&gt;</p> </td> <td class="cellrowborder" width="25%"><p>是</p> </td> <td class="cellrowborder" width="25%"><p>回调函数，返回开放匿名设备标识符（OAID）。</p> <p>1.如应用已配置ohos.permission.APP_TRACKING_CONSENT权限，且“跨应用关联访问权限”为“允许”，则返回OAID。</p> <p>2.如应用已配置ohos.permission.APP_TRACKING_CONSENT权限，且“跨应用关联访问权限”为“禁止”，则返回00000000-0000-0000-0000-000000000000。</p> <p>3.如应用未配置ohos.permission.APP_TRACKING_CONSENT权限，则返回00000000-0000-0000-0000-000000000000。</p> </td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>设置项“跨应用关联访问权限”在HarmonyOS NEXT Developer Beta5及更早版本名称为“应用跟踪访问权限”。</p> </div></div></div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-oaid" target="_blank">开放匿名设备标识服务错误码参考</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>17300001</p> </td> <td class="cellrowborder" width="50%"><p>System internal error.</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-paf-c106="" class="highlight-div"><div _ngcontent-paf-c106="" class="highlight-div-header"><div _ngcontent-paf-c106="" class="highlight-div-header-left"><div _ngcontent-paf-c106="" class="handle-button expand-button"><div _ngcontent-paf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-paf-c106="" class="highlight-div-header-right"><div _ngcontent-paf-c106="" class="handle-button ai-button"></div><div _ngcontent-paf-c106="" class="handle-button line-button"><div _ngcontent-paf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-paf-c106="" class="handle-button theme-button"><div _ngcontent-paf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-paf-c106="" class="handle-button copy-button"><div _ngcontent-paf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-paf-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { identifier } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AdsKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>identifier.<span class="hljs-title function_">getOAID</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">oaid</span>: <span class="hljs-built_in">string</span> = data;</li><li>});</li></ol></pre></div></div> </div> </div> <div></div></div>