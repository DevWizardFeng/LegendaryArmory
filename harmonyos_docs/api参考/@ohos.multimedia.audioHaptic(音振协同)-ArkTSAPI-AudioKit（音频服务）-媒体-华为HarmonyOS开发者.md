<h1 _ngcontent-uua-c119="" class="doc-title ng-star-inserted" title="@ohos.multimedia.audioHaptic (音振协同)"> @ohos.multimedia.audioHaptic (音振协同) </h1>

<div _ngcontent-uua-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>音振协同，表示在播放声音时，可同步发起振动。可用于来电通知、消息提醒等场景。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 11开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { audioHaptic } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="audiohapticgetaudiohapticmanager" device-type="phone,2in1,tablet,wearable,tv">audioHaptic.getAudioHapticManager<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="audiohapticgetaudiohapticmanager" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAudioHapticManager(): AudioHapticManager</p>     <p>获取音振管理器。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-audiohaptic#audiohapticmanager">AudioHapticManager</a></td>         <td class="cellrowborder" width="50%">音振管理器。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioHapticManagerInstance</span>: audioHaptic.<span class="hljs-property">AudioHapticManager</span> = audioHaptic.<span class="hljs-title function_">getAudioHapticManager</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="audiolatencymode" device-type="phone,2in1,tablet,wearable,tv">AudioLatencyMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="audiolatencymode" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>枚举，音频时延模式。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">AUDIO_LATENCY_MODE_NORMAL</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">普通时延模式。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">AUDIO_LATENCY_MODE_FAST</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">低时延模式。该模式适用于比较短的音频文件，音频文件过长时可能被截断，该特性与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#soundpool">SoundPool</a>一致。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="audiohapticplayeroptions" device-type="phone,2in1,tablet,wearable,tv">AudioHapticPlayerOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="audiohapticplayeroptions" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>音振播放器选项。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">muteAudio</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是否将音频静音，true表示将音频静音，false表示正常播放声音。若不填该参数，则默认为false。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">muteHaptics</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是否禁止振动，true表示将禁止振动，false表示正常振动。若不填该参数，则默认为false。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="audiohapticfiledescriptor20" device-type="phone,2in1,tablet,wearable,tv">AudioHapticFileDescriptor<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="audiohapticfiledescriptor20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>描述音振文件描述符。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>开发者需要确保fd是可用的文件描述符，且offset和length的值都是正确的。</p>      </div></div></div>     <p><strong>系统能力：</strong>: SystemCapability.Multimedia.AudioHaptic.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">fd</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">音振资源文件的文件描述符，通常大于等于0。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">offset</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">文件中数据读取的偏移量。默认情况下，偏移量为0。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">length</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">读取数据的字节长度。默认情况下，长度为文件中从偏移量位置开始的剩余字节数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="audiohapticmanager" device-type="phone,2in1,tablet,wearable,tv">AudioHapticManager<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="audiohapticmanager" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>管理音振协同功能。在调用AudioHapticManager的接口前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-audiohaptic#audiohapticgetaudiohapticmanager">getAudioHapticManager</a>创建实例。</p>    </div>    <div class="tiledSection">     <h3 id="registersource" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">registerSource<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="registersource" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>registerSource(audioUri: string, hapticUri: string): Promise&lt;number&gt;</p>     <p>注册音频和振动资源的Uri。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">audioUri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频资源的Uri。对普通时延模式，音频资源格式和路径格式的支持可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-media-avplayer">media.AVPlayer</a>；对低时延模式，音频资源格式支持可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-multimedia-soundpool#soundpool">SoundPool</a>，路径格式需满足<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-fs#fsopen">文件管理模块open函数</a>的要求。对两种时延模式，均建议传入文件的绝对路径。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">hapticUri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">振动资源的Uri。振动资源格式支持可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-vibrator#hapticfiledescriptor10">vibrator</a>，路径格式需满足<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-fs#fsopen">文件管理模块open函数</a>的要求。建议传入文件的绝对路径。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回注册资源的source id。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> audioUri = <span class="hljs-string">'data/audioTest.wav'</span>; <span class="hljs-comment">// 需更改为目标音频资源的Uri。</span></li><li><span class="hljs-keyword">let</span> hapticUri = <span class="hljs-string">'data/hapticTest.json'</span>; <span class="hljs-comment">// 需更改为目标振动资源的Uri。</span></li><li><span class="hljs-keyword">let</span> id = <span class="hljs-number">0</span>;</li><li>
</li><li>audioHapticManagerInstance.<span class="hljs-title function_">registerSource</span>(audioUri, hapticUri).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Promise returned to indicate that the source id of the registerd source <span class="hljs-subst">${value}</span>.`</span>);</li><li>  id = value;</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to register source <span class="hljs-subst">${err}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="registersourcefromfd20">registerSourceFromFd<sup>20+</sup><i class="anchor-icon anchor-icon-link" anchorid="registersourcefromfd20" tips="复制节点链接"></i></h3>          <p>registerSourceFromFd(audioFd: AudioHapticFileDescriptor, hapticFd: AudioHapticFileDescriptor): Promise&lt;number&gt;</p>     <p>通过文件描述符注册音频和振动资源，确保它们在播放时同步。</p>     <p>注册资源后，此方法将通过Promise异步返回资源ID。</p>     <p><strong>系统能力：</strong>: SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">audioFd</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-audiohaptic#audiohapticfiledescriptor20">AudioHapticFileDescriptor</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">已打开的有效文件描述符对象，用于描述音频文件。配套的offset和length需符合实际文件长度。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">hapticFd</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-audiohaptic#audiohapticfiledescriptor20">AudioHapticFileDescriptor</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">已打开的有效文件描述符对象，用于描述振动文件。配套的offset和length必须符合实际文件长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">返回注册资源的资源ID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext。</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> audioFile = context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFdSync</span>(<span class="hljs-string">'audioTest.ogg'</span>); <span class="hljs-comment">// 需要改成rawfile目录下的对应文件。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioFd</span>: audioHaptic.<span class="hljs-property">AudioHapticFileDescriptor</span> = {</li><li>  <span class="hljs-attr">fd</span>: audioFile.<span class="hljs-property">fd</span>,</li><li>  <span class="hljs-attr">offset</span>: audioFile.<span class="hljs-property">offset</span>,</li><li>  <span class="hljs-attr">length</span>: audioFile.<span class="hljs-property">length</span>,</li><li>};</li><li>
</li><li><span class="hljs-keyword">let</span> hapticFile = context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFdSync</span>(<span class="hljs-string">'hapticTest.json'</span>); <span class="hljs-comment">// 需要改成rawfile目录下的对应文件。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">hapticFd</span>: audioHaptic.<span class="hljs-property">AudioHapticFileDescriptor</span> = {</li><li>  <span class="hljs-attr">fd</span>: hapticFile.<span class="hljs-property">fd</span>,</li><li>  <span class="hljs-attr">offset</span>: hapticFile.<span class="hljs-property">offset</span>,</li><li>  <span class="hljs-attr">length</span>: hapticFile.<span class="hljs-property">length</span>,</li><li>};</li><li><span class="hljs-keyword">let</span> id = <span class="hljs-number">0</span>;</li><li>
</li><li>audioHapticManagerInstance.<span class="hljs-title function_">registerSourceFromFd</span>(audioFd, hapticFd).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in doing registerSourceFromFd.'</span>);</li><li>  id = value;</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to registerSourceFromFd. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="unregistersource" device-type="phone,2in1,tablet,wearable,tv">unregisterSource<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="unregistersource" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unregisterSource(id: number): Promise&lt;void&gt;</p>     <p>取消注册音频和振动资源。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">已注册资源的source id。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> id = <span class="hljs-number">0</span>; <span class="hljs-comment">// 需要通过registerSource方法获取。</span></li><li>
</li><li>audioHapticManagerInstance.<span class="hljs-title function_">unregisterSource</span>(id).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in doing unregisterSource.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to unregisterSource. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setaudiolatencymode" device-type="phone,2in1,tablet,wearable,tv">setAudioLatencyMode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setaudiolatencymode" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setAudioLatencyMode(id:number, latencyMode: AudioLatencyMode): void</p>     <p>设置音频时延模式。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">已注册资源的source id。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">latencyMode</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-audiohaptic#audiolatencymode">AudioLatencyMode</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频时延模式。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> id = <span class="hljs-number">0</span>; <span class="hljs-comment">// 需要通过registerSource方法获取。</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">latencyMode</span>: audioHaptic.<span class="hljs-property">AudioLatencyMode</span> = audioHaptic.<span class="hljs-property">AudioLatencyMode</span>.<span class="hljs-property">AUDIO_LATENCY_MODE_FAST</span>;</li><li>
</li><li>audioHapticManagerInstance.<span class="hljs-title function_">setAudioLatencyMode</span>(id, latencyMode);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setstreamusage" device-type="phone,2in1,tablet,wearable,tv">setStreamUsage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setstreamusage" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setStreamUsage(id: number, usage: audio.StreamUsage): void</p>     <p>设置音频流使用类型。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">已注册资源的source id。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">usage</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#streamusage">audio.StreamUsage</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音频流使用类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types; 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> id = <span class="hljs-number">0</span>; <span class="hljs-comment">// 需要通过registerSource方法获取。</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">usage</span>: audio.<span class="hljs-property">StreamUsage</span> = audio.<span class="hljs-property">StreamUsage</span>.<span class="hljs-property">STREAM_USAGE_NOTIFICATION</span>;</li><li>
</li><li>audioHapticManagerInstance.<span class="hljs-title function_">setStreamUsage</span>(id, usage);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="createplayer" device-type="phone,2in1,tablet,wearable,tv">createPlayer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createplayer" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPlayer(id: number, options?: AudioHapticPlayerOptions): Promise&lt;AudioHapticPlayer&gt;</p>     <p>创建音振播放器。使用Promise异步回调。</p>     <p><strong>需要权限：</strong> ohos.permission.VIBRATE</p>     <p>如果应用创建的AudioHapticPlayer需要触发振动，则需要校验应用是否拥有该权限。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">已注册资源的source id。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-audiohaptic#audiohapticplayeroptions">AudioHapticPlayerOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">音振播放器选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-audiohaptic#audiohapticplayer">AudioHapticPlayer</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回创建的音振播放器。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operation not allowed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">I/O error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400106</td>         <td class="cellrowborder" width="50%">Unsupport format.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> id = <span class="hljs-number">0</span>; <span class="hljs-comment">// 需要通过registerSource方法获取。</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: audioHaptic.<span class="hljs-property">AudioHapticPlayerOptions</span> = {<span class="hljs-attr">muteAudio</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">muteHaptics</span>: <span class="hljs-literal">false</span>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioHapticPlayerInstance</span>: audioHaptic.<span class="hljs-property">AudioHapticPlayer</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>audioHapticManagerInstance.<span class="hljs-title function_">createPlayer</span>(id, options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: audioHaptic.AudioHapticPlayer</span>) =&gt;</span> {</li><li>  audioHapticPlayerInstance = value;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in doing createPlayer.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to createPlayer. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="audiohaptictype" device-type="phone,2in1,tablet,wearable,tv">AudioHapticType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="audiohaptictype" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>枚举，音振类型。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">AUDIO_HAPTIC_TYPE_AUDIO</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">音频。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">AUDIO_HAPTIC_TYPE_HAPTIC</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">振动。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="audiohapticplayer" device-type="phone,2in1,tablet,wearable,tv">AudioHapticPlayer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="audiohapticplayer" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>音振播放器，提供音振协同播放功能。在调用AudioHapticPlayer的接口前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-audiohaptic#createplayer">createPlayer</a>创建实例。</p>    </div>    <div class="tiledSection">     <h3 id="ismuted" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">isMuted<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ismuted" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isMuted(type: AudioHapticType): boolean</p>     <p>查询该音振类型是否被静音。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-audiohaptic#audiohaptictype">AudioHapticType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">音振类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">表示查询的音振类型是否被静音。true表示静音，false表示非静音。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified; 2.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioHapticType</span>: audioHaptic.<span class="hljs-property">AudioHapticType</span> = audioHaptic.<span class="hljs-property">AudioHapticType</span>.<span class="hljs-property">AUDIO_HAPTIC_TYPE_AUDIO</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">boolean</span> = audioHapticPlayerInstance.<span class="hljs-title function_">isMuted</span>(audioHapticType);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="start" device-type="phone,2in1,tablet,wearable,tv">start<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="start" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start(): Promise&lt;void&gt;</p>     <p>开始播放。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400103</td>         <td class="cellrowborder" width="50%">IO error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>audioHapticPlayerInstance.<span class="hljs-title function_">start</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Promise returned to indicate that start playing successfully.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to start playing. <span class="hljs-subst">${err}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="stop" device-type="phone,2in1,tablet,wearable,tv">stop<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(): Promise&lt;void&gt;</p>     <p>停止播放。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>audioHapticPlayerInstance.<span class="hljs-title function_">stop</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Promise returned to indicate that stop playing successfully.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to stop playing. <span class="hljs-subst">${err}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="release" device-type="phone,2in1,tablet,wearable,tv">release<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(): Promise&lt;void&gt;</p>     <p>释放音振播放器。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>audioHapticPlayerInstance.<span class="hljs-title function_">release</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Promise returned to indicate that release the audio haptic player successfully.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to release the audio haptic player. <span class="hljs-subst">${err}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setvolume20" device-type="phone,2in1,tablet,wearable,tv">setVolume<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setvolume20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setVolume(volume: number): Promise&lt;void&gt;</p>     <p>设置音振播放器的音量。使用Promise异步回调。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>该方法需在音振播放器释放前调用。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>参数</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">volume</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取值范围为[0.00, 1.00]，其中1.00表示最大音量（100%）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400105</td>         <td class="cellrowborder" width="50%">Service died.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit in current state.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5400108</td>         <td class="cellrowborder" width="50%">Parameter out of range.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>audioHapticPlayerInstance.<span class="hljs-title function_">setVolume</span>(<span class="hljs-number">0.5</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Promise returned to indicate that set volume successfully.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set volume. <span class="hljs-subst">${err}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="setloop20" device-type="phone,2in1,tablet,wearable,tv">setLoop<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setloop20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setLoop(loop: boolean): Promise&lt;void&gt;</p>     <p>设置音振播放器循环播放。使用Promise异步回调。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>该方法需在音振播放器销毁前调用。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>参数</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">loop</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">是否循环播放。true表示循环播放，false表示不循环播放。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-media">媒体服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">5400102</td>         <td class="cellrowborder" width="50%">Operate not permit in current state.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>audioHapticPlayerInstance.<span class="hljs-title function_">setLoop</span>(<span class="hljs-literal">true</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Promise returned to indicate that set player loop successfully.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set player loop. <span class="hljs-subst">${err}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="onendofstream" device-type="phone,2in1,tablet,wearable,tv">on('endOfStream')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onendofstream" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'endOfStream', callback: Callback&lt;void&gt;): void</p>     <p>监听流结束事件（音频流播放结束时触发）。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'endOfStream'，当音频流播放结束时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>audioHapticPlayerInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'endOfStream'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Receive the callback of endOfStream.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offendofstream" device-type="phone,2in1,tablet,wearable,tv">off('endOfStream')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offendofstream" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'endOfStream', callback?: Callback&lt;void&gt;): void</p>     <p>取消监听流结束事件。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'endOfStream'，当取消监听流结束事件时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 取消该事件的所有监听。</span></li><li>audioHapticPlayerInstance.<span class="hljs-title function_">off</span>(<span class="hljs-string">'endOfStream'</span>);</li><li>
</li><li><span class="hljs-comment">// 同一监听事件中，on方法和off方法传入callback参数一致，off方法取消对应on方法订阅的监听。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">endOfStreamCallback</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Receive the callback of endOfStream.`</span>);</li><li>};</li><li>
</li><li>audioHapticPlayerInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'endOfStream'</span>, endOfStreamCallback);</li><li>
</li><li>audioHapticPlayerInstance.<span class="hljs-title function_">off</span>(<span class="hljs-string">'endOfStream'</span>, endOfStreamCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="onaudiointerrupt" device-type="phone,2in1,tablet,wearable,tv">on('audioInterrupt')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onaudiointerrupt" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'audioInterrupt', callback: Callback&lt;audio.InterruptEvent&gt;): void</p>     <p>监听音频中断事件（当音频焦点发生变化时触发）。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'audioInterrupt'，当音频焦点状态发生变化时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#interruptevent9">audio.InterruptEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回中断事件信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">isPlaying</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// 标识符，表示是否正在渲染。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">isDucked</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// 标识符，表示是否被降低音量。</span></li><li>
</li><li>audioHapticPlayerInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'audioInterrupt'</span>, <span class="hljs-function">(<span class="hljs-params">interruptEvent: audio.InterruptEvent</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 在发生音频打断事件时，audioHapticPlayerInstance收到interruptEvent回调，此处根据其内容做相应处理。</span></li><li>  <span class="hljs-comment">// 1. 可选：读取interruptEvent.forceType的类型，判断系统是否已强制执行相应操作。</span></li><li>  <span class="hljs-comment">// 注意：默认焦点策略下，INTERRUPT_HINT_RESUME为INTERRUPT_SHARE类型，其余hintType均为INTERRUPT_FORCE类型。因此对forceType可不做判断。</span></li><li>  <span class="hljs-comment">// 2. 必选：读取interruptEvent.hintType的类型，做出相应的处理。</span></li><li>  <span class="hljs-keyword">if</span> (interruptEvent.<span class="hljs-property">forceType</span> == audio.<span class="hljs-property">InterruptForceType</span>.<span class="hljs-property">INTERRUPT_FORCE</span>) {</li><li>    <span class="hljs-comment">// 音频焦点事件已由系统强制执行，应用需更新自身状态及显示内容等。</span></li><li>    <span class="hljs-keyword">switch</span> (interruptEvent.<span class="hljs-property">hintType</span>) {</li><li>      <span class="hljs-keyword">case</span> audio.<span class="hljs-property">InterruptHint</span>.<span class="hljs-property">INTERRUPT_HINT_PAUSE</span>:</li><li>        <span class="hljs-comment">// 音频流已被暂停，临时失去焦点，待可重获焦点时会收到resume对应的interruptEvent。</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Force paused. Update playing status and stop writing'</span>);</li><li>        isPlaying = <span class="hljs-literal">false</span>; <span class="hljs-comment">// 简化处理，代表应用切换至暂停状态的若干操作。</span></li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> audio.<span class="hljs-property">InterruptHint</span>.<span class="hljs-property">INTERRUPT_HINT_STOP</span>:</li><li>        <span class="hljs-comment">// 音频流已被停止，永久失去焦点，若想恢复渲染，需用户主动触发。</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Force stopped. Update playing status and stop writing'</span>);</li><li>        isPlaying = <span class="hljs-literal">false</span>; <span class="hljs-comment">// 简化处理，代表应用切换至暂停状态的若干操作。</span></li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> audio.<span class="hljs-property">InterruptHint</span>.<span class="hljs-property">INTERRUPT_HINT_DUCK</span>:</li><li>        <span class="hljs-comment">// 音频流已被降低音量渲染。</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Force ducked. Update volume status'</span>);</li><li>        isDucked = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 简化处理，代表应用更新音量状态的若干操作。</span></li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> audio.<span class="hljs-property">InterruptHint</span>.<span class="hljs-property">INTERRUPT_HINT_UNDUCK</span>:</li><li>        <span class="hljs-comment">// 音频流已被恢复正常音量渲染。</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Force unducked. Update volume status'</span>);</li><li>        isDucked = <span class="hljs-literal">false</span>; <span class="hljs-comment">// 简化处理，代表应用更新音量状态的若干操作。</span></li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-attr">default</span>:</li><li>        <span class="hljs-keyword">break</span>;</li><li>    }</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (interruptEvent.<span class="hljs-property">forceType</span> == audio.<span class="hljs-property">InterruptForceType</span>.<span class="hljs-property">INTERRUPT_SHARE</span>) {</li><li>    <span class="hljs-comment">// 音频焦点事件需由应用进行操作，应用可以自主选择如何处理该事件，建议应用遵从InterruptHint提示处理。</span></li><li>    <span class="hljs-keyword">switch</span> (interruptEvent.<span class="hljs-property">hintType</span>) {</li><li>      <span class="hljs-keyword">case</span> audio.<span class="hljs-property">InterruptHint</span>.<span class="hljs-property">INTERRUPT_HINT_RESUME</span>:</li><li>        <span class="hljs-comment">// 建议应用继续渲染（说明音频流此前被强制暂停，临时失去焦点，现在可以恢复渲染）。</span></li><li>        <span class="hljs-comment">// 由于INTERRUPT_HINT_RESUME操作需要应用主动执行，系统无法强制，故INTERRUPT_HINT_RESUME事件一定为INTERRUPT_SHARE类型。</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Resume force paused renderer or ignore'</span>);</li><li>        <span class="hljs-comment">// 若选择继续渲染，需在此处主动执行开始渲染的若干操作。</span></li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-attr">default</span>:</li><li>        <span class="hljs-keyword">break</span>;</li><li>    }</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="offaudiointerrupt" device-type="phone,2in1,tablet,wearable,tv">off('audioInterrupt')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offaudiointerrupt" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'audioInterrupt', callback?: Callback&lt;audio.InterruptEvent&gt;): void</p>     <p>取消监听音频中断事件。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.AudioHaptic.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">事件回调类型，支持的事件为'audioInterrupt'，当取消监听音频中断事件时，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-i#interruptevent9">audio.InterruptEvent</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，返回中断事件信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uua-c106="" class="highlight-div"><div _ngcontent-uua-c106="" class="highlight-div-header"><div _ngcontent-uua-c106="" class="highlight-div-header-left"><div _ngcontent-uua-c106="" class="handle-button expand-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uua-c106="" class="highlight-div-header-right"><div _ngcontent-uua-c106="" class="handle-button ai-button"></div><div _ngcontent-uua-c106="" class="handle-button line-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uua-c106="" class="handle-button theme-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uua-c106="" class="handle-button copy-button"><div _ngcontent-uua-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uua-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { audio } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AudioKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 取消该事件的所有监听。</span></li><li>audioHapticPlayerInstance.<span class="hljs-title function_">off</span>(<span class="hljs-string">'audioInterrupt'</span>);</li><li>
</li><li><span class="hljs-comment">// 同一监听事件中，on方法和off方法传入callback参数一致，off方法取消对应on方法订阅的监听。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">isPlaying</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// 标识符，表示是否正在渲染。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">isDucked</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// 标识符，表示是否被降低音量。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">audioInterruptCallback</span> = (<span class="hljs-params">interruptEvent: audio.InterruptEvent</span>) =&gt; {</li><li>  <span class="hljs-comment">// 在发生音频打断事件时，audioHapticPlayerInstance收到interruptEvent回调，此处根据其内容做相应处理。</span></li><li>  <span class="hljs-comment">// 1. 可选：读取interruptEvent.forceType的类型，判断系统是否已强制执行相应操作。</span></li><li>  <span class="hljs-comment">// 注意：默认焦点策略下，INTERRUPT_HINT_RESUME为INTERRUPT_SHARE类型，其余hintType均为INTERRUPT_FORCE类型。因此对forceType可不做判断。</span></li><li>  <span class="hljs-comment">// 2. 必选：读取interruptEvent.hintType的类型，做出相应的处理。</span></li><li>  <span class="hljs-keyword">if</span> (interruptEvent.<span class="hljs-property">forceType</span> == audio.<span class="hljs-property">InterruptForceType</span>.<span class="hljs-property">INTERRUPT_FORCE</span>) {</li><li>    <span class="hljs-comment">// 音频焦点事件已由系统强制执行，应用需更新自身状态及显示内容等。</span></li><li>    <span class="hljs-keyword">switch</span> (interruptEvent.<span class="hljs-property">hintType</span>) {</li><li>      <span class="hljs-keyword">case</span> audio.<span class="hljs-property">InterruptHint</span>.<span class="hljs-property">INTERRUPT_HINT_PAUSE</span>:</li><li>        <span class="hljs-comment">// 音频流已被暂停，临时失去焦点，待可重获焦点时会收到resume对应的interruptEvent。</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Force paused. Update playing status and stop writing'</span>);</li><li>        isPlaying = <span class="hljs-literal">false</span>; <span class="hljs-comment">// 简化处理，代表应用切换至暂停状态的若干操作。</span></li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> audio.<span class="hljs-property">InterruptHint</span>.<span class="hljs-property">INTERRUPT_HINT_STOP</span>:</li><li>        <span class="hljs-comment">// 音频流已被停止，永久失去焦点，若想恢复渲染，需用户主动触发。</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Force stopped. Update playing status and stop writing'</span>);</li><li>        isPlaying = <span class="hljs-literal">false</span>; <span class="hljs-comment">// 简化处理，代表应用切换至暂停状态的若干操作。</span></li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> audio.<span class="hljs-property">InterruptHint</span>.<span class="hljs-property">INTERRUPT_HINT_DUCK</span>:</li><li>        <span class="hljs-comment">// 音频流已被降低音量渲染。</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Force ducked. Update volume status'</span>);</li><li>        isDucked = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 简化处理，代表应用更新音量状态的若干操作。</span></li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-keyword">case</span> audio.<span class="hljs-property">InterruptHint</span>.<span class="hljs-property">INTERRUPT_HINT_UNDUCK</span>:</li><li>        <span class="hljs-comment">// 音频流已被恢复正常音量渲染。</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Force unducked. Update volume status'</span>);</li><li>        isDucked = <span class="hljs-literal">false</span>; <span class="hljs-comment">// 简化处理，代表应用更新音量状态的若干操作。</span></li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-attr">default</span>:</li><li>        <span class="hljs-keyword">break</span>;</li><li>    }</li><li>  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (interruptEvent.<span class="hljs-property">forceType</span> == audio.<span class="hljs-property">InterruptForceType</span>.<span class="hljs-property">INTERRUPT_SHARE</span>) {</li><li>    <span class="hljs-comment">// 音频焦点事件需由应用进行操作，应用可以自主选择如何处理该事件，建议应用遵从InterruptHint提示处理。</span></li><li>    <span class="hljs-keyword">switch</span> (interruptEvent.<span class="hljs-property">hintType</span>) {</li><li>      <span class="hljs-keyword">case</span> audio.<span class="hljs-property">InterruptHint</span>.<span class="hljs-property">INTERRUPT_HINT_RESUME</span>:</li><li>        <span class="hljs-comment">// 建议应用继续渲染（说明音频流此前被强制暂停，临时失去焦点，现在可以恢复渲染）。</span></li><li>        <span class="hljs-comment">// 由于INTERRUPT_HINT_RESUME操作需要应用主动执行，系统无法强制，故INTERRUPT_HINT_RESUME事件一定为INTERRUPT_SHARE类型。</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Resume force paused renderer or ignore'</span>);</li><li>        <span class="hljs-comment">// 若选择继续渲染，需在此处主动执行开始渲染的若干操作。</span></li><li>        <span class="hljs-keyword">break</span>;</li><li>      <span class="hljs-attr">default</span>:</li><li>        <span class="hljs-keyword">break</span>;</li><li>    }</li><li>  }</li><li>};</li><li>
</li><li>audioHapticPlayerInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'audioInterrupt'</span>, audioInterruptCallback);</li><li>
</li><li>audioHapticPlayerInstance.<span class="hljs-title function_">off</span>(<span class="hljs-string">'audioInterrupt'</span>, audioInterruptCallback);</li></ol></pre></div></div>    </div>   </div>   <div></div></div>