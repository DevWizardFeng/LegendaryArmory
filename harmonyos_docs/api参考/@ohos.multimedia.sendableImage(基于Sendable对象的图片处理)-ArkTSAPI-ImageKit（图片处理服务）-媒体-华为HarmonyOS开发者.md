<h1 _ngcontent-fat-c119="" class="doc-title ng-star-inserted" title="@ohos.multimedia.sendableImage (基于Sendable对象的图片处理)"> @ohos.multimedia.sendableImage (基于Sendable对象的图片处理) </h1>

<div _ngcontent-fat-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>本模块基于Sendable对象，提供图片处理效果，包括通过属性创建PixelMap、读取图像像素数据、读取区域内的图片数据等。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 12开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1214px;">     <h2 id="sendableimagecreatepixelmap" device-type="phone,2in1,tablet,wearable,tv">sendableImage.createPixelMap<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendableimagecreatepixelmap" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMap(colors: ArrayBuffer, options: image.InitializationOptions): Promise&lt;PixelMap&gt;</p>     <p>通过属性创建PixelMap，默认采用BGRA_8888格式处理数据。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">colors</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">默认按照BGRA_8888格式处理的颜色数组。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">image.InitializationOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建像素的属性，包括透明度，尺寸，缩略值，像素格式和是否可编辑。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">          <p>返回PixelMap。</p>          <p>当创建的PixelMap大小超过原图大小时，返回原图PixelMap大小。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> } }</li><li>    sendableImage.<span class="hljs-title function_">createPixelMap</span>(color, opts).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelMap: sendableImage.PixelMap</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create pixelmap. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 2740px;">     <h2 id="sendableimagecreatepixelmapfromparcel" device-type="phone,2in1,tablet,wearable,tv">sendableImage.createPixelMapFromParcel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendableimagecreatepixelmapfromparcel" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapFromParcel(sequence: rpc.MessageSequence): PixelMap</p>     <p>从MessageSequence中获取PixelMap。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sequence</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-rpc#messagesequence9">rpc.MessageSequence</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">保存有PixelMap信息的MessageSequence。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">Operation failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980097</td>         <td class="cellrowborder" width="50%">IPC error</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid input parameter</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980105</td>         <td class="cellrowborder" width="50%">Failed to get the data</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980177</td>         <td class="cellrowborder" width="50%">Abnormal API environment</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980178</td>         <td class="cellrowborder" width="50%">Failed to create the PixelMap</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980179</td>         <td class="cellrowborder" width="50%">Abnormal buffer size</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980180</td>         <td class="cellrowborder" width="50%">FD mapping failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980246</td>         <td class="cellrowborder" width="50%">Failed to read the PixelMap</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { rpc } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IPCKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MySequence</span> <span class="hljs-keyword">implements</span> rpc.<span class="hljs-property">Parcelable</span> {</li><li>  <span class="hljs-attr">pixel_map</span>: sendableImage.<span class="hljs-property">PixelMap</span>;</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">conPixelmap: sendableImage.PixelMap</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span> = conPixelmap;</li><li>  }</li><li>  <span class="hljs-title function_">marshalling</span>(<span class="hljs-params">messageSequence: rpc.MessageSequence</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span>.<span class="hljs-title function_">marshalling</span>(messageSequence);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>  <span class="hljs-title function_">unmarshalling</span>(<span class="hljs-params">messageSequence: rpc.MessageSequence</span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span> = sendableImage.<span class="hljs-title function_">createPixelMapFromParcel</span>(messageSequence);</li><li>    } <span class="hljs-keyword">catch</span>(e) {</li><li>      <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createPixelMapFromParcel error. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>}</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = <span class="hljs-number">0x80</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = {</li><li>    <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">pixelFormat</span>: <span class="hljs-number">4</span>,</li><li>    <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> },</li><li>    <span class="hljs-attr">alphaType</span>: <span class="hljs-number">3</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pixelMap</span>: sendableImage.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-keyword">await</span> sendableImage.<span class="hljs-title function_">createPixelMap</span>(color, opts).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">srcPixelMap: sendableImage.PixelMap</span>) =&gt;</span> {</li><li>    pixelMap = srcPixelMap;</li><li>  })</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-comment">// 序列化。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">parcelable</span>: <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pixelMap);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: rpc.<span class="hljs-property">MessageSequence</span> = rpc.<span class="hljs-property">MessageSequence</span>.<span class="hljs-title function_">create</span>();</li><li>    data.<span class="hljs-title function_">writeParcelable</span>(parcelable);</li><li>
</li><li>    <span class="hljs-comment">// 反序列化rpc获取到data。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">ret</span>: <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pixelMap);</li><li>    data.<span class="hljs-title function_">readParcelable</span>(ret);</li><li>
</li><li>    <span class="hljs-comment">// 获取到Pixelmap。</span></li><li>    <span class="hljs-keyword">let</span> unmarshPixelmap = ret.<span class="hljs-property">pixel_map</span>;</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1639px;">     <h2 id="sendableimagecreatepixelmapfromsurface" device-type="phone,2in1,tablet,wearable,tv">sendableImage.createPixelMapFromSurface<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendableimagecreatepixelmapfromsurface" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapFromSurface(surfaceId: string, region: image.Region): Promise&lt;PixelMap&gt;</p>     <p>根据Surface ID和区域信息创建一个PixelMap对象。该区域的大小由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#region8">Region</a>.size指定。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">surfaceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">对应Surface的ID，可通过预览组件获取，如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent">XComponent</a>组件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">region</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#region8">image.Region</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">截取的画面区域。仅支持从画面左上角开始截取部分或整个画面，即Region中的x和y必须为0，Region.size中width和height的取值范围分别为[1, 预览流宽度]和[1, 预览流高度]。如需截取任意区域，可先获取整个画面，再使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#crop">crop</a>截取所需区域。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">If the image parameter invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980105</td>         <td class="cellrowborder" width="50%">Failed to get the data</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980178</td>         <td class="cellrowborder" width="50%">Failed to create the PixelMap</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">surfaceId: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">region</span>: image.<span class="hljs-property">Region</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> } };</li><li>  sendableImage.<span class="hljs-title function_">createPixelMapFromSurface</span>(surfaceId, region).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelmap from Surface'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create pixelmap. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1361px;">     <h2 id="sendableimagecreatepixelmapsync" device-type="phone,2in1,tablet,wearable,tv">sendableImage.createPixelMapSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendableimagecreatepixelmapsync" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapSync(colors: ArrayBuffer, options: image.InitializationOptions): PixelMap</p>     <p>通过属性创建PixelMap，同步返回PixelMap结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">colors</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">BGRA_8888格式的颜色数组。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">image.InitializationOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建像素的属性，包括透明度，尺寸，缩略值，像素格式和是否可编辑。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> } }</li><li>    <span class="hljs-keyword">let</span> pixelMap : sendableImage.<span class="hljs-property">PixelMap</span> = sendableImage.<span class="hljs-title function_">createPixelMapSync</span>(color, opts);</li><li>    <span class="hljs-keyword">return</span> pixelMap;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1323px;">     <h2 id="sendableimageconvertfrompixelmap" device-type="phone,2in1,tablet,wearable,tv">sendableImage.convertFromPixelMap<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendableimageconvertfrompixelmap" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>convertFromPixelMap(pixelmap: image.PixelMap): PixelMap</p>     <p>通过image下的PixelMap创建出一个sendableImage下的PixelMap，同步返回PixelMap结果。原PixelMap的方法均不可再调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">pixelmap</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">image.PixelMap</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">image下的非sendable的PixelMap。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回sendable的PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">If the image parameter invalid. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980104</td>         <td class="cellrowborder" width="50%">Failed to initialize the internal object.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> } }</li><li>  <span class="hljs-keyword">let</span> pixelMap : image.<span class="hljs-property">PixelMap</span> = image.<span class="hljs-title function_">createPixelMapSync</span>(color, opts);</li><li>  <span class="hljs-keyword">let</span> sendablePixelMap : sendableImage.<span class="hljs-property">PixelMap</span> = sendableImage.<span class="hljs-title function_">convertFromPixelMap</span>(pixelMap);</li><li>  <span class="hljs-keyword">return</span> sendablePixelMap;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1347px;">     <h2 id="sendableimageconverttopixelmap" device-type="phone,2in1,tablet,wearable,tv">sendableImage.convertToPixelMap<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendableimageconverttopixelmap" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>convertToPixelMap(pixelmap: PixelMap): image.PixelMap</p>     <p>通过sendableImage下的PixelMap创建出一个image下的PixelMap，同步返回PixelMap结果。原PixelMap的方法均不可再调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">pixelmap</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">sendableImage下的PixelMap。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">image.PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回image下的非sendable的PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">If the image parameter invalid. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980104</td>         <td class="cellrowborder" width="50%">Failed to initialize the internal object.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> } }</li><li>  <span class="hljs-keyword">let</span> sendablePixelMap : sendableImage.<span class="hljs-property">PixelMap</span> = sendableImage.<span class="hljs-title function_">createPixelMapSync</span>(color, opts);</li><li>  <span class="hljs-keyword">let</span> pixelMap : image.<span class="hljs-property">PixelMap</span> = sendableImage.<span class="hljs-title function_">convertToPixelMap</span>(sendablePixelMap);</li><li>  <span class="hljs-keyword">return</span> pixelMap;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 401px;">     <h2 id="isendable" device-type="phone,2in1,tablet,wearable,tv">ISendable<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isendable" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type ISendable = lang.ISendable</p>     <p>ISendable是所有Sendable类型（除null和undefined）的父类型。自身没有任何必须的方法和属性。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkts-lang#langisendable">lang.ISendable</a></td>         <td class="cellrowborder" width="50%">所有Sendable类型的父类型。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 350px;">     <h2 id="pixelmap" device-type="phone,2in1,tablet,wearable,tv">PixelMap<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pixelmap" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>图像像素类，用于读取或写入图像数据以及获取图像信息。在调用PixelMap的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#sendableimagecreatepixelmap">createPixelMap</a>创建一个PixelMap实例。目前pixelmap序列化大小最大128MB，超过会送显失败。大小计算方式为(宽*高*每像素占用字节数)。</p>     <p>sendableImage下的PixelMap支持sendable属性，支持worker线程共享。sendableImage下的PixelMap，可以利用<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#sendableimageconverttopixelmap">Convert</a>方法与image下的PixelMap进行互相转换。转换后，原对象的方法均不允许再调用，否则将报错501 无法调用接口。跨线程处理PixelMap时，需要考虑多线程问题。</p>     <p>在调用PixelMap的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#sendableimagecreatepixelmap">sendableImage.createPixelMap</a>构建一个PixelMap对象。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 570px;">     <h3 id="属性" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">isEditable</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>true表示图像像素可被编辑，false表示不可被编辑。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">isStrideAlignment</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">true表示图像内存为DMA内存，false表示非DMA内存。DMA内存的PixelMap会做256字节内存对齐，行末会存在padding区域。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1233px;">     <h3 id="readpixelstobuffer" device-type="phone,2in1,tablet,wearable,tv">readPixelsToBuffer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readpixelstobuffer" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>readPixelsToBuffer(dst: ArrayBuffer): Promise&lt;void&gt;</p>     <p>读取图像像素数据，结果写入ArrayBuffer里。使用Promise异步回调。</p>     <p>该接口指定BGRA_8888格式创建pixelmap，读取的像素数据与原数据保持一致。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">dst</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">缓冲区，函数执行结束后获取的图像像素数据写入到该内存区域内。缓冲区大小由<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#getpixelbytesnumber">getPixelBytesNumber</a>接口获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，用于获取结果，失败时返回错误信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">readBuffer</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">readPixelsToBuffer</span>(readBuffer).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in reading image pixel data.'</span>); <span class="hljs-comment">// 符合条件则进入。</span></li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to read image pixel data. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);<span class="hljs-comment">// 不符合条件则进入。</span></li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1240px;">     <h3 id="readpixelstobuffersync" device-type="phone,2in1,tablet,wearable,tv">readPixelsToBufferSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readpixelstobuffersync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>readPixelsToBufferSync(dst: ArrayBuffer): void</p>     <p>以同步方法读取PixelMap到Buffer里。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">dst</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">缓冲区，函数执行结束后获取的图像像素数据写入到该内存区域内。缓冲区大小由<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#getpixelbytesnumber">getPixelBytesNumber</a>接口获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap: sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> bufferSize = pixelMap.<span class="hljs-title function_">getPixelBytesNumber</span>();</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">readBuffer</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(bufferSize);</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">readPixelsToBufferSync</span>(readBuffer);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1233px;">     <h3 id="readpixels" device-type="phone,2in1,tablet,wearable,tv">readPixels<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readpixels" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>readPixels(area: image.PositionArea): Promise&lt;void&gt;</p>     <p>读取区域内的图片数据。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">area</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">image.PositionArea</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域大小，根据区域读取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，用于获取读取结果，失败时返回错误信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">area</span>: image.<span class="hljs-property">PositionArea</span> = {</li><li>    <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">8</span>),</li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>,</li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">readPixels</span>(area).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in reading the image data in the area.'</span>); <span class="hljs-comment">// 符合条件则进入。</span></li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to read the image data in the area. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);<span class="hljs-comment">// 不符合条件则进入。</span></li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1264px;">     <h3 id="readpixelssync" device-type="phone,2in1,tablet,wearable,tv">readPixelsSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readpixelssync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>readPixelsSync(area: image.PositionArea): void</p>     <p>读取区域内的图片数据并同步返回结果。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">area</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">image.PositionArea</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域大小，根据区域读取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> area : image.<span class="hljs-property">PositionArea</span> = {</li><li>    <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">8</span>),</li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>,</li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">readPixelsSync</span>(area);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1329px;">     <h3 id="writepixels" device-type="phone,2in1,tablet,wearable,tv">writePixels<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="writepixels" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>writePixels(area: image.PositionArea): Promise&lt;void&gt;</p>     <p>将PixelMap写入指定区域内。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">area</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">image.PositionArea</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域，根据区域写入。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，用于获取写入结果，失败时返回错误信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">area</span>: image.<span class="hljs-property">PositionArea</span> = {</li><li>    <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">8</span>),</li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>,</li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(area.<span class="hljs-property">pixels</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = i + <span class="hljs-number">1</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">writePixels</span>(area).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded to write pixelmap into the specified area.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to write pixelmap into the specified area. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1360px;">     <h3 id="writepixelssync" device-type="phone,2in1,tablet,wearable,tv">writePixelsSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="writepixelssync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>writePixelsSync(area: image.PositionArea): void</p>     <p>以同步方法将PixelMap写入指定区域内。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">area</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#positionarea7">image.PositionArea</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域，根据区域写入。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">area</span>: image.<span class="hljs-property">PositionArea</span> = {</li><li>    <span class="hljs-attr">pixels</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">8</span>),</li><li>    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">stride</span>: <span class="hljs-number">8</span>,</li><li>    <span class="hljs-attr">region</span>: { <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> }, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> }</li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(area.<span class="hljs-property">pixels</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = i + <span class="hljs-number">1</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">writePixelsSync</span>(area);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1185px;">     <h3 id="writebuffertopixels" device-type="phone,2in1,tablet,wearable,tv">writeBufferToPixels<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="writebuffertopixels" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>writeBufferToPixels(src: ArrayBuffer): Promise&lt;void&gt;</p>     <p>读取缓冲区中的图片数据，结果写入PixelMap中。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">src</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像像素数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，用于获取结果，失败时返回错误信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = i + <span class="hljs-number">1</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">writeBufferToPixels</span>(color).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in writing data from a buffer to a PixelMap."</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to write data from a buffer to a PixelMap. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1240px;">     <h3 id="writebuffertopixelssync" device-type="phone,2in1,tablet,wearable,tv">writeBufferToPixelsSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="writebuffertopixelssync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>writeBufferToPixelsSync(src: ArrayBuffer): void</p>     <p>读取缓冲区中的图片数据，结果写入PixelMap并同步返回结果。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">src</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像像素数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap: sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">const</span> bufferSize = pixelMap.<span class="hljs-title function_">getPixelBytesNumber</span>();</li><li>  <span class="hljs-keyword">const</span> color : <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(bufferSize);</li><li>  <span class="hljs-keyword">let</span> bufferArr : <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = i + <span class="hljs-number">1</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">writeBufferToPixelsSync</span>(color);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1010px;">     <h3 id="getimageinfo" device-type="phone,2in1,tablet,wearable,tv">getImageInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimageinfo" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageInfo(): Promise&lt;image.ImageInfo&gt;</p>     <p>获取图像像素信息。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#imageinfo">image.ImageInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，用于异步获取图像像素信息，失败时返回错误信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">getImageInfo</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">imageInfo: image.ImageInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (imageInfo != <span class="hljs-literal">undefined</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Succeeded in obtaining the image pixel map information."</span>+ imageInfo.<span class="hljs-property">size</span>.<span class="hljs-property">height</span>);</li><li>      }</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to obtain the image pixel map information. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1037px;">     <h3 id="getimageinfosync" device-type="phone,2in1,tablet,wearable,tv">getImageInfoSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getimageinfosync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageInfoSync(): image.ImageInfo</p>     <p>以同步方法获取图像像素信息。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#imageinfo">image.ImageInfo</a></td>         <td class="cellrowborder" width="50%">图像像素信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-keyword">let</span> imageInfo : image.<span class="hljs-property">ImageInfo</span> = pixelMap.<span class="hljs-title function_">getImageInfoSync</span>();</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 746px;">     <h3 id="getbytesnumberperrow" device-type="phone,2in1,tablet,wearable,tv">getBytesNumberPerRow<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getbytesnumberperrow" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getBytesNumberPerRow(): number</p>     <p>获取图像像素每行字节数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">图像像素的行字节数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">rowCount</span>: <span class="hljs-built_in">number</span> = pixelMap.<span class="hljs-title function_">getBytesNumberPerRow</span>();</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 746px;">     <h3 id="getpixelbytesnumber" device-type="phone,2in1,tablet,wearable,tv">getPixelBytesNumber<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getpixelbytesnumber" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPixelBytesNumber(): number</p>     <p>获取图像像素的总字节数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">图像像素的总字节数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pixelBytesNumber</span>: <span class="hljs-built_in">number</span> = pixelMap.<span class="hljs-title function_">getPixelBytesNumber</span>();</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 746px;">     <h3 id="getdensity" device-type="phone,2in1,tablet,wearable,tv">getDensity<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdensity" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getDensity():number</p>     <p>获取当前图像像素的密度。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">图像像素的密度，单位为ppi。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">getDensity</span>: <span class="hljs-built_in">number</span> = pixelMap.<span class="hljs-title function_">getDensity</span>();</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1113px;">     <h3 id="opacity" device-type="phone,2in1,tablet,wearable,tv">opacity<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="opacity" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>opacity(rate: number): Promise&lt;void&gt;</p>     <p>通过设置透明比率来让PixelMap达到对应的透明效果。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rate</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">透明比率的值，取值范围是(0,1]。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，用于获取结果，失败时返回错误信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">rate</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0.5</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">opacity</span>(rate).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in setting opacity.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set opacity. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1144px;">     <h3 id="opacitysync" device-type="phone,2in1,tablet,wearable,tv">opacitySync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="opacitysync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>opacitySync(rate: number): void</p>     <p>设置PixelMap的透明比率，初始化PixelMap。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rate</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">透明比率的值，取值范围是(0,1]。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> rate : <span class="hljs-built_in">number</span> = <span class="hljs-number">0.5</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">opacitySync</span>(rate);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 914px;">     <h3 id="createalphapixelmap" device-type="phone,2in1,tablet,wearable,tv">createAlphaPixelmap<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createalphapixelmap" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAlphaPixelmap(): Promise&lt;PixelMap&gt;</p>     <p>根据Alpha通道的信息，来生成一个仅包含Alpha通道信息的PixelMap，可用于阴影效果。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，返回PixelMap。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">createAlphaPixelmap</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">alphaPixelMap: sendableImage.PixelMap</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating alpha pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create alpha pixelmap. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1068px;">     <h3 id="createalphapixelmapsync" device-type="phone,2in1,tablet,wearable,tv">createAlphaPixelmapSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createalphapixelmapsync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAlphaPixelmapSync(): PixelMap</p>     <p>根据Alpha通道的信息，生成一个仅包含Alpha通道信息的PixelMap，可用于阴影效果，同步返回PixelMap类型的结果。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> resPixelMap : sendableImage.<span class="hljs-property">PixelMap</span> = pixelMap.<span class="hljs-title function_">createAlphaPixelmapSync</span>();</li><li>  <span class="hljs-keyword">return</span> resPixelMap;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1182px;">     <h3 id="scale" device-type="phone,2in1,tablet,wearable,tv">scale<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="scale" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>scale(x: number, y: number): Promise&lt;void&gt;</p>     <p>根据输入的宽高对图片进行缩放。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">宽度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">高度的缩放倍数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，异步返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2.0</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">scale</span>(scaleX, scaleY).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in scaling pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to scale pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>
</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1189px;">     <h3 id="scalesync" device-type="phone,2in1,tablet,wearable,tv">scaleSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="scalesync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>scaleSync(x: number, y: number): void</p>     <p>以同步方法根据输入的宽高对图片进行缩放。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">宽度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">高度的缩放倍数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2.0</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scaleY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">scaleSync</span>(scaleX, scaleY);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1206px;">     <h3 id="translate" device-type="phone,2in1,tablet,wearable,tv">translate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="translate" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>translate(x: number, y: number): Promise&lt;void&gt;</p>     <p>根据输入的坐标对图片进行位置变换。使用Promise异步回调。</p>     <p>translate后的图片尺寸改变为：width+X，height+Y，建议translate后的图片尺寸宽高不超过屏幕的宽高。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域横坐标。单位：像素。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">区域纵坐标。单位：像素。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，异步返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">translateX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">50.0</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">translateY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">translate</span>(translateX, translateY).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in translating pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to translate pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1237px;">     <h3 id="translatesync" device-type="phone,2in1,tablet,wearable,tv">translateSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="translatesync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>translateSync(x: number, y: number): void</p>     <p>根据输入的坐标对图片进行位置变换并同步返回结果。</p>     <p>translate后的图片尺寸改变为：width+X，height+Y，建议translate后的图片尺寸宽高不超过屏幕的宽高。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">宽度的缩放倍数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">高度的缩放倍数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> translateX : <span class="hljs-built_in">number</span> = <span class="hljs-number">50.0</span>;</li><li>  <span class="hljs-keyword">let</span> translateY : <span class="hljs-built_in">number</span> = <span class="hljs-number">10.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">translateSync</span>(translateX, translateY);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1221px;">     <h3 id="rotate" device-type="phone,2in1,tablet,wearable,tv">rotate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="rotate" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>rotate(angle: number): Promise&lt;void&gt;</p>     <p>根据输入的角度对图片进行旋转。使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>图片旋转的角度取值范围：[0, 360]。超出取值范围时，根据圆周360度自动校正。例如，-100度与260度效果相同。</li>        <li>如果图片旋转的角度不是90的整数倍，旋转后图片的尺寸会发生改变。</li>       </ul>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">angle</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片旋转的角度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，异步返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">angle</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">90.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">rotate</span>(angle).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in rotating pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to rotate pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1252px;">     <h3 id="rotatesync" device-type="phone,2in1,tablet,wearable,tv">rotateSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="rotatesync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>rotateSync(angle: number): void</p>     <p>根据输入的角度对图片进行旋转并同步返回结果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>图片旋转的角度取值范围：[0, 360]。超出取值范围时，根据圆周360度自动校正。例如，-100度与260度效果相同。</li>        <li>如果图片旋转的角度不是90的整数倍，旋转后图片的尺寸会发生改变。</li>       </ul>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">angle</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片旋转的角度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> angle : <span class="hljs-built_in">number</span> = <span class="hljs-number">90.0</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">rotateSync</span>(angle);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1230px;">     <h3 id="flip" device-type="phone,2in1,tablet,wearable,tv">flip<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="flip" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>flip(horizontal: boolean, vertical: boolean): Promise&lt;void&gt;</p>     <p>根据输入的条件对图片进行翻转。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">horizontal</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true表示进行水平翻转，false表示不进行水平翻转。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">vertical</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true表示进行垂直翻转，false表示不进行垂直翻转。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，异步返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">horizontal</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">vertical</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">flip</span>(horizontal, vertical).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in flipping pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to flip pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>
</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1237px;">     <h3 id="flipsync" device-type="phone,2in1,tablet,wearable,tv">flipSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="flipsync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>flipSync(horizontal: boolean, vertical: boolean): void</p>     <p>根据输入的条件对图片进行翻转并同步返回结果。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">horizontal</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true表示进行水平翻转，false表示不进行水平翻转。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">vertical</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">true表示进行垂直翻转，false表示不进行垂直翻转。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> horizontal : <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>  <span class="hljs-keyword">let</span> vertical : <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">flipSync</span>(horizontal, vertical);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1137px;">     <h3 id="crop" device-type="phone,2in1,tablet,wearable,tv">crop<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="crop" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>crop(region: image.Region): Promise&lt;void&gt;</p>     <p>根据输入的尺寸对图片进行裁剪。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">region</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#region8">image.Region</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">裁剪的尺寸。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，异步返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">region</span>: image.<span class="hljs-property">Region</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> } };</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">crop</span>(region).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in cropping pixelmap.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to crop pixelmap. code is <span class="hljs-subst">${err.code}</span>, message is <span class="hljs-subst">${err.message}</span>`</span>);</li><li>
</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1144px;">     <h3 id="cropsync" device-type="phone,2in1,tablet,wearable,tv">cropSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cropsync" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cropSync(region: image.Region): void</p>     <p>根据输入的尺寸裁剪图片。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">region</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#region8">image.Region</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">裁剪的尺寸。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">501</td>         <td class="cellrowborder" width="50%">Resource Unavailable.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> region : image.<span class="hljs-property">Region</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> } };</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">cropSync</span>(region);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1075px;">     <h3 id="getcolorspace" device-type="phone,2in1,tablet,wearable,tv">getColorSpace<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcolorspace" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getColorSpace(): colorSpaceManager.ColorSpaceManager</p>     <p>获取图像广色域信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-colorspacemanager#colorspacemanager">colorSpaceManager.ColorSpaceManager</a></td>         <td class="cellrowborder" width="50%">图像广色域信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980101</td>         <td class="cellrowborder" width="50%">If the image data abnormal.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980103</td>         <td class="cellrowborder" width="50%">If the image data unsupport.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">If the image parameter invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-keyword">let</span> csm = pixelMap.<span class="hljs-title function_">getColorSpace</span>();</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1096px;">     <h3 id="setcolorspace" device-type="phone,2in1,tablet,wearable,tv">setColorSpace<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setcolorspace" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setColorSpace(colorSpace: colorSpaceManager.ColorSpaceManager): void</p>     <p>设置图像广色域信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">colorSpace</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-colorspacemanager#colorspacemanager">colorSpaceManager.ColorSpaceManager</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像广色域信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980111</td>         <td class="cellrowborder" width="50%">If the operation invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">If the image parameter invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { colorSpaceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">let</span> colorSpaceName = colorSpaceManager.<span class="hljs-property">ColorSpace</span>.<span class="hljs-property">SRGB</span>; <span class="hljs-comment">// colorSpaceManager.ColorSpace该对象当前仅支持2in1/PC设备使用。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">csm</span>: colorSpaceManager.<span class="hljs-property">ColorSpaceManager</span> = colorSpaceManager.<span class="hljs-title function_">create</span>(colorSpaceName);</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    pixelMap.<span class="hljs-title function_">setColorSpace</span>(csm);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1521px;">     <h3 id="applycolorspace" device-type="phone,2in1,tablet,wearable,tv">applyColorSpace<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applycolorspace" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>applyColorSpace(targetColorSpace: colorSpaceManager.ColorSpaceManager): Promise&lt;void&gt;</p>     <p>根据输入的目标色彩空间对图像像素颜色进行色彩空间转换。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">targetColorSpace</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-colorspacemanager#colorspacemanager">colorSpaceManager.ColorSpaceManager</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标色彩空间，支持SRGB、DCI_P3、DISPLAY_P3、ADOBE_RGB_1998。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，异步返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980104</td>         <td class="cellrowborder" width="50%">Failed to initialize the internal object.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980108</td>         <td class="cellrowborder" width="50%">Failed to convert the color space.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { colorSpaceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkGraphics2D'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap : sendableImage.PixelMap</span>) {</li><li>    <span class="hljs-keyword">let</span> colorSpaceName = colorSpaceManager.<span class="hljs-property">ColorSpace</span>.<span class="hljs-property">SRGB</span>; <span class="hljs-comment">// colorSpaceManager.ColorSpace该对象当前仅支持2in1/PC设备使用。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">targetColorSpace</span>: colorSpaceManager.<span class="hljs-property">ColorSpaceManager</span> = colorSpaceManager.<span class="hljs-title function_">create</span>(colorSpaceName);</li><li>    pixelMap.<span class="hljs-title function_">applyColorSpace</span>(targetColorSpace).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in applying color space for pixelmap object.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to apply color space for pixelmap object. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2152px;">     <h3 id="marshalling" device-type="phone,2in1,tablet,wearable,tv">marshalling<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="marshalling" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>marshalling(sequence: rpc.MessageSequence): void</p>     <p>将PixelMap序列化后写入MessageSequence。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sequence</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-rpc#messagesequence9">rpc.MessageSequence</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">新创建的MessageSequence。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980097</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { rpc } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IPCKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MySequence</span> <span class="hljs-keyword">implements</span> rpc.<span class="hljs-property">Parcelable</span> {</li><li>  <span class="hljs-attr">pixel_map</span>: sendableImage.<span class="hljs-property">PixelMap</span>;</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">conPixelMap : sendableImage.PixelMap</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span> = conPixelMap;</li><li>  }</li><li>  <span class="hljs-title function_">marshalling</span>(<span class="hljs-params">messageSequence : rpc.MessageSequence</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span>.<span class="hljs-title function_">marshalling</span>(messageSequence);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'marshalling'</span>);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>  <span class="hljs-title function_">unmarshalling</span>(<span class="hljs-params">messageSequence : rpc.MessageSequence</span>) {</li><li>    sendableImage.<span class="hljs-title function_">createPixelMap</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>), {<span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>:<span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span>}}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelParcel: sendableImage.PixelMap</span>) =&gt;</span> {</li><li>      pixelParcel.<span class="hljs-title function_">unmarshalling</span>(messageSequence).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">pixelMap</span>: sendableImage.<span class="hljs-property">PixelMap</span>) =&gt; {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span> = pixelMap;</li><li>        pixelMap.<span class="hljs-title function_">getImageInfo</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">imageInfo: image.ImageInfo</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"unmarshalling information h:"</span> + imageInfo.<span class="hljs-property">size</span>.<span class="hljs-property">height</span> + <span class="hljs-string">"w:"</span> + imageInfo.<span class="hljs-property">size</span>.<span class="hljs-property">width</span>);</li><li>        })</li><li>      })</li><li>    });</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = <span class="hljs-number">0x80</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = {</li><li>    <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">pixelFormat</span>: <span class="hljs-number">4</span>,</li><li>    <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> },</li><li>    <span class="hljs-attr">alphaType</span>: <span class="hljs-number">3</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pixelMap</span>: sendableImage.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-keyword">await</span> sendableImage.<span class="hljs-title function_">createPixelMap</span>(color, opts).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">srcPixelMap: sendableImage.PixelMap</span>) =&gt;</span> {</li><li>    pixelMap = srcPixelMap;</li><li>  })</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-comment">// 序列化。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">parcelable</span>: <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pixelMap);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: rpc.<span class="hljs-property">MessageSequence</span> = rpc.<span class="hljs-property">MessageSequence</span>.<span class="hljs-title function_">create</span>();</li><li>    data.<span class="hljs-title function_">writeParcelable</span>(parcelable);</li><li>
</li><li>    <span class="hljs-comment">// 反序列化rpc获取到data。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">ret</span>: <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pixelMap);</li><li>    data.<span class="hljs-title function_">readParcelable</span>(ret);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2426px;">     <h3 id="unmarshalling" device-type="phone,2in1,tablet,wearable,tv">unmarshalling<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="unmarshalling" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unmarshalling(sequence: rpc.MessageSequence): Promise&lt;PixelMap&gt;</p>     <p>从MessageSequence中获取PixelMap，</p>     <p>如需使用同步方式创建PixelMap可使用：<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#sendableimagecreatepixelmapfromparcel">createPixelMapFromParcel</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sequence</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-rpc#messagesequence9">rpc.MessageSequence</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">保存有PixelMap信息的MessageSequence。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，用于异步获取结果，失败时返回错误信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid image parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980097</td>         <td class="cellrowborder" width="50%">IPC error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">The operation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { rpc } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IPCKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MySequence</span> <span class="hljs-keyword">implements</span> rpc.<span class="hljs-property">Parcelable</span> {</li><li>  <span class="hljs-attr">pixel_map</span>: sendableImage.<span class="hljs-property">PixelMap</span>;</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">conPixelMap: sendableImage.PixelMap</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span> = conPixelMap;</li><li>  }</li><li>  <span class="hljs-title function_">marshalling</span>(<span class="hljs-params">messageSequence: rpc.MessageSequence</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span>.<span class="hljs-title function_">marshalling</span>(messageSequence);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'marshalling'</span>);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>  <span class="hljs-title function_">unmarshalling</span>(<span class="hljs-params">messageSequence: rpc.MessageSequence</span>) {</li><li>    sendableImage.<span class="hljs-title function_">createPixelMap</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>), {<span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>:<span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span>}}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelParcel : sendableImage.PixelMap</span>) =&gt;</span> {</li><li>      pixelParcel.<span class="hljs-title function_">unmarshalling</span>(messageSequence).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (pixelMap : sendableImage.<span class="hljs-property">PixelMap</span>) =&gt; {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span> = pixelMap;</li><li>        pixelMap.<span class="hljs-title function_">getImageInfo</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">imageInfo : image.ImageInfo</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"unmarshalling information h:"</span> + imageInfo.<span class="hljs-property">size</span>.<span class="hljs-property">height</span> + <span class="hljs-string">"w:"</span> + imageInfo.<span class="hljs-property">size</span>.<span class="hljs-property">width</span>);</li><li>        })</li><li>      })</li><li>    });</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = <span class="hljs-number">0x80</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = {</li><li>    <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">pixelFormat</span>: <span class="hljs-number">4</span>,</li><li>    <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> },</li><li>    <span class="hljs-attr">alphaType</span>: <span class="hljs-number">3</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pixelMap</span>: sendableImage.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-keyword">await</span> sendableImage.<span class="hljs-title function_">createPixelMap</span>(color, opts).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">srcPixelMap : sendableImage.PixelMap</span>) =&gt;</span> {</li><li>    pixelMap = srcPixelMap;</li><li>  })</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-comment">// 序列化。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">parcelable</span>: <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pixelMap);</li><li>    <span class="hljs-keyword">let</span> data : rpc.<span class="hljs-property">MessageSequence</span> = rpc.<span class="hljs-property">MessageSequence</span>.<span class="hljs-title function_">create</span>();</li><li>    data.<span class="hljs-title function_">writeParcelable</span>(parcelable);</li><li>
</li><li>    <span class="hljs-comment">// 反序列化rpc获取到data。</span></li><li>    <span class="hljs-keyword">let</span> ret : <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pixelMap);</li><li>    data.<span class="hljs-title function_">readParcelable</span>(ret);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 914px;">     <h3 id="release" device-type="phone,2in1,tablet,wearable,tv">release<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release():Promise&lt;void&gt;</p>     <p>释放PixelMap对象。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，异步返回释放结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">pixelMap: sendableImage.PixelMap</span>) {</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-keyword">await</span> pixelMap.<span class="hljs-title function_">release</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in releasing pixelmap object.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to release pixelmap object. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 570px;">     <h2 id="size" device-type="phone,2in1,tablet,wearable,tv">Size<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="size" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示图片尺寸。</p>     <p>继承自<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">lang.ISendable</a>。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">height</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">输出图片的高，单位：像素。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">width</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">输出图片的宽，单位：像素。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 615px;">     <h2 id="region" device-type="phone,2in1,tablet,wearable,tv">Region<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="region" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示区域信息。</p>     <p>继承自<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">lang.ISendable</a>。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">size</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#size">Size</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">区域大小。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">x</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">区域横坐标。单位：像素。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">y</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">区域纵坐标。单位：像素。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1025px;">     <h2 id="sendableimagecreateimagesource" device-type="phone,2in1,tablet,wearable,tv">sendableImage.createImageSource<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendableimagecreateimagesource" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageSource(uri: string): ImageSource</p>     <p>通过传入的uri创建ImageSource实例。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>图片路径，当前仅支持应用沙箱路径。</p>          <p>当前支持格式有：.jpg .png .gif .bmp .webp .dng <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#svg标签说明">SVG</a> .ico。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#imagesource">ImageSource</a></td>         <td class="cellrowborder" width="50%">返回ImageSource类实例，失败时返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">cacheDir</span> + <span class="hljs-string">"/test.jpg"</span>;</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">sendableImageSourceObj</span>: sendableImage.<span class="hljs-property">ImageSource</span> = sendableImage.<span class="hljs-title function_">createImageSource</span>(path);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 977px;">     <h2 id="sendableimagecreateimagesource-1" device-type="phone,2in1,tablet,wearable,tv">sendableImage.createImageSource<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendableimagecreateimagesource-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageSource(fd: number): ImageSource</p>     <p>通过传入文件描述符来创建ImageSource实例。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">fd</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文件描述符fd。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.49.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#imagesource">ImageSource</a></td>         <td class="cellrowborder" width="50%">返回ImageSource类实例，失败时返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">cacheDir</span> + <span class="hljs-string">"/test.jpg"</span>;</li><li>  <span class="hljs-keyword">let</span> file = fs.<span class="hljs-title function_">openSync</span>(path, fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span> | fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">sendableImageSourceObj</span>: sendableImage.<span class="hljs-property">ImageSource</span> = sendableImage.<span class="hljs-title function_">createImageSource</span>(file.<span class="hljs-property">fd</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 977px;">     <h2 id="sendableimagecreateimagesource-2" device-type="phone,2in1,tablet,wearable,tv">sendableImage.createImageSource<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendableimagecreateimagesource-2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageSource(buf: ArrayBuffer): ImageSource</p>     <p>通过缓冲区创建ImageSource实例。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像缓冲区数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#imagesource">ImageSource</a></td>         <td class="cellrowborder" width="50%">返回ImageSource类实例，失败时返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">buf</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">sendableImageSourceObj</span>: sendableImage.<span class="hljs-property">ImageSource</span> = sendableImage.<span class="hljs-title function_">createImageSource</span>(buf);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1406px;">     <h2 id="sendableimagecreateimagereceiver" device-type="phone,2in1,tablet,wearable,tv">sendableImage.createImageReceiver<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sendableimagecreateimagereceiver" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageReceiver(size: image.Size, format: image.ImageFormat, capacity: number): ImageReceiver</p>     <p>通过图片大小、图片格式、容量创建ImageReceiver实例。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageReceiver</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">size</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#size">image.Size</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像的默认大小。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">format</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#imageformat9">image.ImageFormat</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像格式，取值为image.ImageFormat常量，目前仅支持 ImageFormat:JPEG。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">capacity</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">同时访问的最大图像数。该参数仅作为期望值，实际capacity由设备硬件决定。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#imagereceiver">ImageReceiver</a></td>         <td class="cellrowborder" width="50%">如果操作成功，则返回ImageReceiver实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameter check failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">size</span>: image.<span class="hljs-property">Size</span> = {</li><li>        <span class="hljs-attr">height</span>: <span class="hljs-number">8192</span>,</li><li>        <span class="hljs-attr">width</span>: <span class="hljs-number">8</span></li><li>    }</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">receiver</span>: sendableImage.<span class="hljs-property">ImageReceiver</span> = sendableImage.<span class="hljs-title function_">createImageReceiver</span>(size, image.<span class="hljs-property">ImageFormat</span>.<span class="hljs-property">JPEG</span>, <span class="hljs-number">8</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 206px;">     <h2 id="imagesource" device-type="phone,2in1,tablet,wearable,tv">ImageSource<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagesource" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>ImageSource类，用于获取图片相关信息。在调用ImageSource的方法前，需要先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#sendableimagecreateimagesource">createImageSource</a>构建一个ImageSource实例。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1097px;">     <h3 id="createpixelmap" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">createPixelMap<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpixelmap" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMap(options?: image.DecodingOptions): Promise&lt;PixelMap&gt;</p>     <p>通过图片解码参数创建PixelMap对象。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.53.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#decodingoptions7">image.DecodingOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">解码参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;[PixelMap]&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，用于异步返回创建结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">cacheDir</span> + <span class="hljs-string">"/test.jpg"</span>;</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">sendableImageSourceObj</span>: sendableImage.<span class="hljs-property">ImageSource</span> = sendableImage.<span class="hljs-title function_">createImageSource</span>(path);</li><li>  sendableImageSourceObj.<span class="hljs-title function_">createPixelMap</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelMap: sendableImage.PixelMap</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMap object through image decoding parameters.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create pixelMap object through image decoding parameters. code <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 866px;">     <h3 id="release-1" device-type="phone,2in1,tablet,wearable,tv">release<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(): Promise&lt;void&gt;</p>     <p>释放ImageSource实例。使用Promise异步回调。release是线程不安全的。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，异步返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">cacheDir</span> + <span class="hljs-string">"/test.jpg"</span>;</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">sendableImageSourceObj</span>: sendableImage.<span class="hljs-property">ImageSource</span> = sendableImage.<span class="hljs-title function_">createImageSource</span>(path);</li><li>  sendableImageSourceObj.<span class="hljs-title function_">release</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in releasing the image source instance.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to release the image source instance. code <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 206px;">     <h2 id="image" device-type="phone,2in1,tablet,wearable,tv">Image<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="image" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>提供基本的图像操作，包括获取图像信息、读写图像数据。调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#readnextimage">readNextImage</a>和<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#readlatestimage">readLatestImage</a>接口时会返回image。继承自<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#isendable" target="_blank">lang.ISendable</a>。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1356px;">     <h3 id="属性-1" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">clipRect</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#region">Region</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">要裁剪的图像区域。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">size</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#size">Size</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">图像大小。如果image对象所存储的是相机预览流数据，即YUV图像数据，那么获取到的size中的宽高分别对应YUV图像的宽高； 如果image对象所存储的是相机拍照流数据，即JPEG图像，由于已经是编码后的文件，size中的宽等于JPEG文件大小，高等于1。image对象所存储的数据是预览流还是拍照流，取决于应用将receiver中的surfaceId传给相机的previewOutput还是captureOutput。相机预览与拍照最佳实践请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/camera-dual-channel-preview" target="_blank">双路预览(ArkTS)</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/camera-shooting-case" target="_blank">拍照实现方案(ArkTS)</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">format</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">图像格式，参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/capi-native-buffer-h#oh_nativebuffer_format">OH_NativeBuffer_Format</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">timestamp<sup>12+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">图像时间戳。时间戳以纳秒为单位，通常是单调递增的。时间戳的具体含义和基准取决于图像的生产者，在相机预览/拍照场景，生产者就是相机。来自不同生产者的图像的时间戳可能有不同的含义和基准，因此可能无法进行比较。如果要获取某张照片的生成时间，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#getimageproperty11">getImageProperty</a>接口读取相关的EXIF信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1137px;">     <h3 id="getcomponent" device-type="phone,2in1,tablet,wearable,tv">getComponent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcomponent" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getComponent(componentType: image.ComponentType): Promise&lt;image.Component&gt;</p>     <p>根据图像的组件类型从图像中获取组件缓存。使用Promise异步回调。getComponent是线程不安全的。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">componentType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#componenttype9">image.ComponentType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像的组件类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#component9">image.Component</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，用于异步返回组件缓冲区。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">size</span>: image.<span class="hljs-property">Size</span> = {</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">8192</span>,</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-number">8</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">receiver</span>: sendableImage.<span class="hljs-property">ImageReceiver</span> = sendableImage.<span class="hljs-title function_">createImageReceiver</span>(size, image.<span class="hljs-property">ImageFormat</span>.<span class="hljs-property">JPEG</span>, <span class="hljs-number">8</span>);</li><li>  <span class="hljs-keyword">let</span> img = <span class="hljs-keyword">await</span> receiver.<span class="hljs-title function_">readNextImage</span>();</li><li>  img.<span class="hljs-title function_">getComponent</span>(image.<span class="hljs-property">ComponentType</span>.<span class="hljs-property">JPEG</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">component: image.Component</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getComponent succeeded.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getComponent failed code <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1034px;">     <h3 id="release-2" device-type="phone,2in1,tablet,wearable,tv">release<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(): Promise&lt;void&gt;</p>     <p>释放当前图像。使用Promise异步回调。</p>     <p>在接收另一个图像前必须先释放对应资源。release是线程不安全的。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">promise返回操作结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">size</span>: image.<span class="hljs-property">Size</span> = {</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">8192</span>,</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-number">8</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">receiver</span>: sendableImage.<span class="hljs-property">ImageReceiver</span> = sendableImage.<span class="hljs-title function_">createImageReceiver</span>(size, image.<span class="hljs-property">ImageFormat</span>.<span class="hljs-property">JPEG</span>, <span class="hljs-number">8</span>);</li><li>  <span class="hljs-keyword">let</span> img = <span class="hljs-keyword">await</span> receiver.<span class="hljs-title function_">readNextImage</span>();</li><li>  img.<span class="hljs-title function_">release</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'release succeeded.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`release failed. code <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="imagereceiver" device-type="phone,2in1,tablet,wearable,tv">ImageReceiver<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagereceiver" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>图像接收类，用于获取组件surface id，接收最新的图片和读取下一张图片，以及释放ImageReceiver实例。</p>     <p>在调用以下方法前需要先创建ImageReceiver实例。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 423px;">     <h3 id="属性-2" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageReceiver</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">size</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#size">image.Size</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">图片大小。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">capacity</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">同时访问的图像数。该参数仅作为期望值，实际capacity由设备硬件决定。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">format</td>         <td class="cellrowborder" width="20%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#imageformat9">image.ImageFormat</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">图像格式。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 962px;">     <h3 id="getreceivingsurfaceid" device-type="phone,2in1,tablet,wearable,tv">getReceivingSurfaceId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getreceivingsurfaceid" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getReceivingSurfaceId(): Promise&lt;string&gt;</p>     <p>用于获取一个surface id供Camera或其他组件使用。使用promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageReceiver</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">异步返回surface id。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">size</span>: image.<span class="hljs-property">Size</span> = {</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">8192</span>,</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-number">8</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">receiver</span>: sendableImage.<span class="hljs-property">ImageReceiver</span> = sendableImage.<span class="hljs-title function_">createImageReceiver</span>(size, image.<span class="hljs-property">ImageFormat</span>.<span class="hljs-property">JPEG</span>, <span class="hljs-number">8</span>);</li><li>  receiver.<span class="hljs-title function_">getReceivingSurfaceId</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting the ReceivingSurfaceId.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get the ReceivingSurfaceId.code <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1034px;">     <h3 id="readlatestimage" device-type="phone,2in1,tablet,wearable,tv">readLatestImage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readlatestimage" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>readLatestImage(): Promise&lt;Image&gt;</p>     <p>从ImageReceiver读取最新的图片。使用promise异步回调。</p>     <p><strong>注意</strong>：此接口需要在<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#on">on</a>回调触发后调用，才能正常的接收到数据。且此接口返回的<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#image">Image</a>对象使用完毕后需要调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#release-2">release</a>方法释放，释放后才可以继续接收新的数据。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageReceiver</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#image">Image</a>&gt;</td>         <td class="cellrowborder" width="50%">异步返回最新图片。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">size</span>: image.<span class="hljs-property">Size</span> = {</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">8192</span>,</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-number">8</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">receiver</span>: sendableImage.<span class="hljs-property">ImageReceiver</span> = sendableImage.<span class="hljs-title function_">createImageReceiver</span>(size, image.<span class="hljs-property">ImageFormat</span>.<span class="hljs-property">JPEG</span>, <span class="hljs-number">8</span>);</li><li>  receiver.<span class="hljs-title function_">readLatestImage</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">img: image.Image</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'readLatestImage succeeded.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`readLatestImage failed. code <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1034px;">     <h3 id="readnextimage" device-type="phone,2in1,tablet,wearable,tv">readNextImage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readnextimage" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>readNextImage(): Promise&lt;Image&gt;</p>     <p>从ImageReceiver读取下一张图片。使用promise异步回调。</p>     <p><strong>注意</strong>：此接口需要在<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#on">on</a>回调触发后调用，才能正常的接收到数据。且此接口返回的<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#image">Image</a>对象使用完毕后需要调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#release-2">release</a>方法释放，释放后才可以继续接收新的数据。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageReceiver</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-sendableimage#image">Image</a>&gt;</td>         <td class="cellrowborder" width="50%">异步返回下一张图片。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">size</span>: image.<span class="hljs-property">Size</span> = {</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">8192</span>,</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-number">8</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">receiver</span>: sendableImage.<span class="hljs-property">ImageReceiver</span> = sendableImage.<span class="hljs-title function_">createImageReceiver</span>(size, image.<span class="hljs-property">ImageFormat</span>.<span class="hljs-property">JPEG</span>, <span class="hljs-number">8</span>);</li><li>  receiver.<span class="hljs-title function_">readNextImage</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">img: image.Image</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'readNextImage succeeded.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`readNextImage failed. code <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 963px;">     <h3 id="on" device-type="phone,2in1,tablet,wearable,tv">on<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="on" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'imageArrival', callback: AsyncCallback&lt;void&gt;): void</p>     <p>接收图片时注册。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageReceiver</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册事件的类型，固定为'imageArrival'，接收图片时触发。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册的事件回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">size</span>: image.<span class="hljs-property">Size</span> = {</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">8192</span>,</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-number">8</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">receiver</span>: sendableImage.<span class="hljs-property">ImageReceiver</span> = sendableImage.<span class="hljs-title function_">createImageReceiver</span>(size, image.<span class="hljs-property">ImageFormat</span>.<span class="hljs-property">JPEG</span>, <span class="hljs-number">8</span>);</li><li>  receiver.<span class="hljs-title function_">on</span>(<span class="hljs-string">'imageArrival'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-comment">// 接收到图片，实现回调函数逻辑。</span></li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 962px;">     <h3 id="release-3" device-type="phone,2in1,tablet,wearable,tv">release<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="release-3" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>release(): Promise&lt;void&gt;</p>     <p>释放ImageReceiver实例。使用promise异步回调。release是线程不安全的。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageReceiver</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">异步返回操作结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-fat-c106="" class="highlight-div"><div _ngcontent-fat-c106="" class="highlight-div-header"><div _ngcontent-fat-c106="" class="highlight-div-header-left"><div _ngcontent-fat-c106="" class="handle-button expand-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-fat-c106="" class="highlight-div-header-right"><div _ngcontent-fat-c106="" class="handle-button ai-button"></div><div _ngcontent-fat-c106="" class="handle-button line-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-fat-c106="" class="handle-button theme-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-fat-c106="" class="handle-button copy-button"><div _ngcontent-fat-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-fat-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { sendableImage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">size</span>: image.<span class="hljs-property">Size</span> = {</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">8192</span>,</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-number">8</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">receiver</span>: sendableImage.<span class="hljs-property">ImageReceiver</span> = sendableImage.<span class="hljs-title function_">createImageReceiver</span>(size, image.<span class="hljs-property">ImageFormat</span>.<span class="hljs-property">JPEG</span>, <span class="hljs-number">8</span>);</li><li>  receiver.<span class="hljs-title function_">release</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'release succeeded.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`release failed. code <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>