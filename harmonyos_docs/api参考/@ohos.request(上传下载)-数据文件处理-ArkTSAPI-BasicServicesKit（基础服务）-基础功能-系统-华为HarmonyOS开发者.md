<h1 _ngcontent-obo-c119="" class="doc-title ng-star-inserted" title="@ohos.request (上传下载)"> @ohos.request (上传下载) </h1>

<div _ngcontent-obo-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>request模块给应用提供上传下载文件、后台代理传输的基础功能。</p>    <ul>     <li>request暂不支持在Extension中调用。</li>    </ul>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 6开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { request } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 2690px;">     <h2 id="常量" device-type="phone,2in1,tablet,wearable,tv">常量<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="常量" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p><strong>网络类型</strong>：下载支持自定义网络类型，可以在<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#downloadconfig">DownloadConfig</a>中通过networkType配置成以下网络类型。</p>       <p><strong>下载任务错误码</strong>：下载<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#onfail7">on('fail')</a>事件callback的错误参数、<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#gettaskinfo9">getTaskInfo</a>返回值的failedReason字段取值。</p>       <p><strong>下载任务暂停原因</strong>：下载相关<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#gettaskinfo9">getTaskInfo</a>返回值的pausedReason字段取值。</p>       <p><strong>下载任务状态码</strong>：下载相关<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#gettaskinfo9">getTaskInfo</a>返回值的status字段取值。</p>      </div></div></div>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.5.1.1" width="25%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.5.1.3" width="25%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">EXCEPTION_PERMISSION<sup>9+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">201</td>         <td class="cellrowborder" width="25%">通用错误码：权限校验失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">EXCEPTION_PARAMCHECK<sup>9+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">401</td>         <td class="cellrowborder" width="25%">通用错误码：参数检查失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">EXCEPTION_UNSUPPORTED<sup>9+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">801</td>         <td class="cellrowborder" width="25%">通用错误码：该设备不支持此API。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">EXCEPTION_FILEIO<sup>9+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">13400001</td>         <td class="cellrowborder" width="25%">特有错误码：文件操作异常。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">EXCEPTION_FILEPATH<sup>9+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">13400002</td>         <td class="cellrowborder" width="25%">特有错误码：文件路径异常。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">EXCEPTION_SERVICE<sup>9+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">13400003</td>         <td class="cellrowborder" width="25%">特有错误码：服务异常。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">EXCEPTION_OTHERS<sup>9+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">13499999</td>         <td class="cellrowborder" width="25%">特有错误码：其他错误。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">NETWORK_MOBILE<sup>6+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">0x00000001</td>         <td class="cellrowborder" width="25%">网络类型：使用蜂窝网络时允许下载的位标志。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">NETWORK_WIFI<sup>6+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">0x00010000</td>         <td class="cellrowborder" width="25%">网络类型：使用WLAN时允许下载的位标志。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ERROR_CANNOT_RESUME<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">0</td>         <td class="cellrowborder" width="25%">下载任务错误码：网络原因导致恢复下载失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ERROR_DEVICE_NOT_FOUND<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">1</td>         <td class="cellrowborder" width="25%">下载任务错误码：找不到SD卡等存储设备。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ERROR_FILE_ALREADY_EXISTS<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">2</td>         <td class="cellrowborder" width="25%">下载任务错误码：要下载的文件已存在，下载会话无法覆盖现有文件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ERROR_FILE_ERROR<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">3</td>         <td class="cellrowborder" width="25%">下载任务错误码：文件操作失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ERROR_HTTP_DATA_ERROR<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">4</td>         <td class="cellrowborder" width="25%">下载任务错误码：HTTP传输失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ERROR_INSUFFICIENT_SPACE<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">5</td>         <td class="cellrowborder" width="25%">下载任务错误码：存储空间不足。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ERROR_TOO_MANY_REDIRECTS<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">6</td>         <td class="cellrowborder" width="25%">下载任务错误码：网络重定向过多导致的错误。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ERROR_UNHANDLED_HTTP_CODE<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">7</td>         <td class="cellrowborder" width="25%">下载任务错误码：无法识别的HTTP代码。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ERROR_UNKNOWN<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">8</td>         <td class="cellrowborder" width="25%">          <p>下载任务错误码：未知错误。</p>          <p>例如：API version 12及以下版本，系统仅支持串行地尝试连接域名相关IP，不支持单个IP的连接时间控制。若DNS返回的首个IP被阻塞，可能会由于握手超时导致ERROR_UNKNOWN错误。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ERROR_OFFLINE<sup>9+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">9</td>         <td class="cellrowborder" width="25%">下载任务错误码：网络未连接。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ERROR_UNSUPPORTED_NETWORK_TYPE<sup>9+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">10</td>         <td class="cellrowborder" width="25%">下载任务错误码：网络类型不匹配。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">PAUSED_QUEUED_FOR_WIFI<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">0</td>         <td class="cellrowborder" width="25%">下载任务暂停原因：文件大小超过了使用蜂窝网络会话允许的最大值，下载被暂停并等待WLAN连接。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">PAUSED_WAITING_FOR_NETWORK<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">1</td>         <td class="cellrowborder" width="25%">          <p>下载任务暂停原因：网络问题导致下载暂停。</p>          <p>例如：网络断开。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">PAUSED_WAITING_TO_RETRY<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">2</td>         <td class="cellrowborder" width="25%">下载任务暂停原因：网络错误导致下载会话将被重试。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">PAUSED_BY_USER<sup>9+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">3</td>         <td class="cellrowborder" width="25%">下载任务暂停原因：用户暂停会话。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">PAUSED_UNKNOWN<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">4</td>         <td class="cellrowborder" width="25%">下载任务暂停原因：未知原因导致暂停下载。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">SESSION_SUCCESSFUL<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">0</td>         <td class="cellrowborder" width="25%">下载任务状态码：下载会话已完成。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">SESSION_RUNNING<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">1</td>         <td class="cellrowborder" width="25%">下载任务状态码：下载会话正在进行中。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">SESSION_PENDING<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">2</td>         <td class="cellrowborder" width="25%">下载任务状态码：下载会话正在被调度中。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">SESSION_PAUSED<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">3</td>         <td class="cellrowborder" width="25%">下载任务状态码：下载会话已暂停。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">SESSION_FAILED<sup>7+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">4</td>         <td class="cellrowborder" width="25%">下载任务状态码：下载会话已失败，将不会重试。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1887px;">     <h2 id="requestuploadfile9" device-type="phone,2in1,tablet,wearable,tv">request.uploadFile<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestuploadfile9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>uploadFile(context: BaseContext, config: UploadConfig): Promise&lt;UploadTask&gt;</p>     <p>创建并启动一个上传任务，使用Promise异步回调，支持HTTP协议。通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#oncomplete--fail9">on('complete'|'fail')</a>可获取任务上传时的成功信息或错误信息。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">基于应用程序的上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#uploadconfig6">UploadConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">上传的配置信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#uploadtask">UploadTask</a>&gt;</td>         <td class="cellrowborder" width="50%">使用Promise方式，异步返回上传任务UploadTask的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400002</td>         <td class="cellrowborder" width="50%">File path not supported or invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uploadTask</span>: request.<span class="hljs-property">UploadTask</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uploadConfig</span>: request.<span class="hljs-property">UploadConfig</span> = {</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://www.example.com'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">header</span>: { <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'*/*'</span> },</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,</li><li>  <span class="hljs-attr">files</span>: [{ <span class="hljs-attr">filename</span>: <span class="hljs-string">"test"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"test"</span>, <span class="hljs-attr">uri</span>: <span class="hljs-string">"internal://cache/test.jpg"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"image/jpeg"</span> }], <span class="hljs-comment">// 建议type填写HTTP协议规范的MIME类型</span></li><li>  <span class="hljs-attr">data</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"name123"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"123"</span> }],</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  request.<span class="hljs-title function_">uploadFile</span>(context, uploadConfig).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.UploadTask</span>) =&gt;</span> {</li><li>    uploadTask = data;</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the upload. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the upload. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1881px;">     <h2 id="requestuploadfile9-1" device-type="phone,2in1,tablet,wearable,tv">request.uploadFile<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestuploadfile9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>uploadFile(context: BaseContext, config: UploadConfig, callback: AsyncCallback&lt;UploadTask&gt;): void</p>     <p>创建并启动一个上传任务，使用callback异步回调，支持HTTP协议。通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#oncomplete--fail9">on('complete'|'fail')</a>可获取任务上传时的成功信息或错误信息。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">基于应用程序的上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#uploadconfig6">UploadConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">上传的配置信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#uploadtask">UploadTask</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，异步返回UploadTask对象。当上传成功，err为undefined，data为获取到的UploadTask对象；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400002</td>         <td class="cellrowborder" width="50%">File path not supported or invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uploadTask</span>: request.<span class="hljs-property">UploadTask</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uploadConfig</span>: request.<span class="hljs-property">UploadConfig</span> = {</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://www.example.com'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">header</span>: { <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'*/*'</span> },</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,</li><li>  <span class="hljs-attr">files</span>: [{ <span class="hljs-attr">filename</span>: <span class="hljs-string">"test"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"test"</span>, <span class="hljs-attr">uri</span>: <span class="hljs-string">"internal://cache/test.jpg"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"image/jpeg"</span> }], <span class="hljs-comment">// 建议type填写HTTP协议规范的MIME类型</span></li><li>  <span class="hljs-attr">data</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"name123"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"123"</span> }],</li><li>};</li><li><span class="hljs-keyword">try</span> {</li><li>  request.<span class="hljs-title function_">uploadFile</span>(context, uploadConfig, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: request.UploadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the upload. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    uploadTask = data;</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the upload. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1480px;">     <h2 id="requestuploaddeprecated" device-type="phone,2in1,tablet,wearable,tv">request.upload<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestuploaddeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>upload(config: UploadConfig): Promise&lt;UploadTask&gt;</p>     <p>创建并启动一个上传任务，使用Promise异步回调。</p>     <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6 开始支持，从API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestuploadfile9">request.uploadFile</a>替代。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#uploadconfig6">UploadConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">上传的配置信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#uploadtask">UploadTask</a>&gt;</td>         <td class="cellrowborder" width="50%">使用Promise方式，异步返回上传任务UploadTask的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uploadTask</span>: request.<span class="hljs-property">UploadTask</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uploadConfig</span>: request.<span class="hljs-property">UploadConfig</span> = {</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://www.example.com'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">header</span>: { <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'*/*'</span> },</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,</li><li>  <span class="hljs-attr">files</span>: [{ <span class="hljs-attr">filename</span>: <span class="hljs-string">"test"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"test"</span>, <span class="hljs-attr">uri</span>: <span class="hljs-string">"internal://cache/test.jpg"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"image/jpeg"</span> }], <span class="hljs-comment">// 建议type填写HTTP协议规范的MIME类型</span></li><li>  <span class="hljs-attr">data</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"name123"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"123"</span> }],</li><li>};</li><li>request.<span class="hljs-title function_">upload</span>(uploadConfig).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.UploadTask</span>) =&gt;</span> {</li><li>  uploadTask = data;</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the upload. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1474px;">     <h2 id="requestuploaddeprecated-1" device-type="phone,2in1,tablet,wearable,tv">request.upload<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestuploaddeprecated-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>upload(config: UploadConfig, callback: AsyncCallback&lt;UploadTask&gt;): void</p>     <p>创建并启动一个上传任务，使用callback异步回调。</p>     <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6 开始支持，从API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestuploadfile9">request.uploadFile</a>替代。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#uploadconfig6">UploadConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">上传的配置信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#uploadtask">UploadTask</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，异步返回UploadTask对象。当上传成功，err为undefined，data为获取到的UploadTask对象；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uploadTask</span>: request.<span class="hljs-property">UploadTask</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uploadConfig</span>: request.<span class="hljs-property">UploadConfig</span> = {</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://www.example.com'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">header</span>: { <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'*/*'</span> },</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,</li><li>  <span class="hljs-attr">files</span>: [{ <span class="hljs-attr">filename</span>: <span class="hljs-string">"test"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"test"</span>, <span class="hljs-attr">uri</span>: <span class="hljs-string">"internal://cache/test.jpg"</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">"image/jpeg"</span> }], <span class="hljs-comment">// 建议type填写HTTP协议规范的MIME类型</span></li><li>  <span class="hljs-attr">data</span>: [{ <span class="hljs-attr">name</span>: <span class="hljs-string">"name123"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"123"</span> }],</li><li>};</li><li>request.<span class="hljs-title function_">upload</span>(uploadConfig, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: request.UploadTask</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the upload. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  uploadTask = data;</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 206px;">     <h2 id="uploadtask" device-type="phone,2in1,tablet,wearable,tv">UploadTask<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="uploadtask" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>上传任务，使用下列方法前，需要先获取UploadTask对象，promise形式通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestuploadfile9">request.uploadFile</a>获取，callback形式通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestuploadfile9-1">request.uploadFile</a>获取。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1406px;">     <h3 id="onprogress" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">on('progress')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onprogress" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'progress', callback: (uploadedSize: number, totalSize: number) =&gt; void): void</p>     <p>订阅上传任务进度事件，使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>应用处于后台时，为满足功耗性能要求，不支持调用此接口进行回调。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">订阅的事件类型。取值为'progress'，表示上传的进度信息，任务进度有进展时触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">上传任务进度的回调函数，返回已上传文件大小和上传文件总大小。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uploadedSize</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前已上传文件大小，单位为字节（B）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">totalSize</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">上传文件的总大小，单位为字节（B）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">upProgressCallback</span> = (<span class="hljs-params">uploadedSize: <span class="hljs-built_in">number</span>, totalSize: <span class="hljs-built_in">number</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"upload totalSize:"</span> + totalSize + <span class="hljs-string">"  uploadedSize:"</span> + uploadedSize);</li><li>};</li><li>uploadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, upProgressCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1213px;">     <h3 id="onheaderreceive7" device-type="phone,2in1,tablet,wearable,tv">on('headerReceive')<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onheaderreceive7" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'headerReceive', callback: (header: object) =&gt; void): void</p>     <p>订阅上传任务HTTP响应事件，使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'headerReceive'，HTTP请求接收到响应时触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">HTTP Response事件的回调函数，返回响应请求内容。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">header</td>         <td class="cellrowborder" width="25%">object</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">HTTP响应。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">headerCallback</span> = (<span class="hljs-params">headers: <span class="hljs-built_in">object</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"upOnHeader headers:"</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(headers));</li><li>};</li><li>uploadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'headerReceive'</span>, headerCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1374px;">     <h3 id="oncomplete--fail9" device-type="phone,2in1,tablet,wearable,tv">on('complete' | 'fail')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oncomplete--fail9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'complete' | 'fail', callback: Callback&lt;Array&lt;TaskState&gt;&gt;): void</p>     <p>订阅上传任务完成或失败事件，使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型，支持的事件包括：'complete'|'fail'。</p>          <p>- 'complete'：表示上传任务完成，任务完成时触发该事件。</p>          <p>- 'fail'：表示上传任务失败，任务失败时触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#taskstate9">TaskState</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">上传任务完成或失败的回调函数。返回上传任务的任务状态信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">upCompleteCallback</span> = (<span class="hljs-params">taskStates: <span class="hljs-built_in">Array</span>&lt;request.TaskState&gt;</span>) =&gt; {</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; taskStates.<span class="hljs-property">length</span>; i++) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"upOnComplete taskState:"</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(taskStates[i]));</li><li>  }</li><li>};</li><li>uploadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'complete'</span>, upCompleteCallback);</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">upFailCallback</span> = (<span class="hljs-params">taskStates: <span class="hljs-built_in">Array</span>&lt;request.TaskState&gt;</span>) =&gt; {</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; taskStates.<span class="hljs-property">length</span>; i++) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"upOnFail taskState:"</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(taskStates[i]));</li><li>  }</li><li>};</li><li>uploadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'fail'</span>, upFailCallback);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1498px;">     <h3 id="offprogress" device-type="phone,2in1,tablet,wearable,tv">off('progress')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offprogress" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'progress', callback?: (uploadedSize: number, totalSize: number) =&gt; void): void</p>     <p>取消订阅上传任务进度事件。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>取消订阅的事件类型。</p>          <p>- 取值为'progress'，表示上传的进度信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消订阅的回调函数。若无此参数，则取消订阅当前类型的所有回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uploadedSize</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前已上传文件大小，单位为字节（B）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">totalSize</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">上传文件的总大小，单位为字节（B）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">upProgressCallback1</span> = (<span class="hljs-params">uploadedSize: <span class="hljs-built_in">number</span>, totalSize: <span class="hljs-built_in">number</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Upload delete progress notification.'</span> + <span class="hljs-string">'totalSize:'</span> + totalSize + <span class="hljs-string">'uploadedSize:'</span> + uploadedSize);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">upProgressCallback2</span> = (<span class="hljs-params">uploadedSize: <span class="hljs-built_in">number</span>, totalSize: <span class="hljs-built_in">number</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Upload delete progress notification.'</span> + <span class="hljs-string">'totalSize:'</span> + totalSize + <span class="hljs-string">'uploadedSize:'</span> + uploadedSize);</li><li>};</li><li>uploadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, upProgressCallback1);</li><li>uploadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, upProgressCallback2);</li><li><span class="hljs-comment">//表示取消upProgressCallback1的订阅</span></li><li>uploadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'progress'</span>, upProgressCallback1);</li><li><span class="hljs-comment">//表示取消订阅上传任务进度事件的所有回调</span></li><li>uploadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'progress'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1405px;">     <h3 id="offheaderreceive7" device-type="phone,2in1,tablet,wearable,tv">off('headerReceive')<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offheaderreceive7" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'headerReceive', callback?: (header: object) =&gt; void): void</p>     <p>取消订阅上传任务HTTP响应事件。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>取消订阅的事件类型。</p>          <p>- 取值为'headerReceive'，表示HTTP请求接收到响应。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消订阅的回调函数。若无此参数，则取消订阅当前类型的所有回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">header</td>         <td class="cellrowborder" width="25%">object</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">HTTP响应。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">headerCallback1</span> = (<span class="hljs-params">header: <span class="hljs-built_in">object</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Upload delete headerReceive notification. header: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(header)}</span>`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">headerCallback2</span> = (<span class="hljs-params">header: <span class="hljs-built_in">object</span></span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Upload delete headerReceive notification. header: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(header)}</span>`</span>);</li><li>};</li><li>uploadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'headerReceive'</span>, headerCallback1);</li><li>uploadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'headerReceive'</span>, headerCallback2);</li><li><span class="hljs-comment">//表示取消headerCallback1的订阅</span></li><li>uploadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'headerReceive'</span>, headerCallback1);</li><li><span class="hljs-comment">//表示取消订阅上传任务HTTP标头事件的所有回调</span></li><li>uploadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'headerReceive'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1902px;">     <h3 id="offcomplete--fail9" device-type="phone,2in1,tablet,wearable,tv">off('complete' | 'fail')<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offcomplete--fail9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'complete' | 'fail', callback?: Callback&lt;Array&lt;TaskState&gt;&gt;): void</p>     <p>取消订阅上传任务的完成或失败事件。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>取消订阅的事件类型。</p>          <p>- 取值为'complete'，表示上传任务完成。</p>          <p>- 取值为'fail'，表示上传任务失败。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#taskstate9">TaskState</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消订阅的回调函数。若无此参数，则取消订阅当前类型的所有回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">upCompleteCallback1</span> = (<span class="hljs-params">taskStates: <span class="hljs-built_in">Array</span>&lt;request.TaskState&gt;</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Upload delete complete notification.'</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; taskStates.<span class="hljs-property">length</span>; i++) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'taskState:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(taskStates[i]));</li><li>  }</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">upCompleteCallback2</span> = (<span class="hljs-params">taskStates: <span class="hljs-built_in">Array</span>&lt;request.TaskState&gt;</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Upload delete complete notification.'</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; taskStates.<span class="hljs-property">length</span>; i++) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'taskState:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(taskStates[i]));</li><li>  }</li><li>};</li><li>uploadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'complete'</span>, upCompleteCallback1);</li><li>uploadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'complete'</span>, upCompleteCallback2);</li><li><span class="hljs-comment">//表示取消headerCallback1的订阅</span></li><li>uploadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'complete'</span>, upCompleteCallback1);</li><li><span class="hljs-comment">//表示取消订阅上传任务完成的所有回调</span></li><li>uploadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'complete'</span>);</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">upFailCallback1</span> = (<span class="hljs-params">taskStates: <span class="hljs-built_in">Array</span>&lt;request.TaskState&gt;</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Upload delete fail notification.'</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; taskStates.<span class="hljs-property">length</span>; i++) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'taskState:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(taskStates[i]));</li><li>  }</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">upFailCallback2</span> = (<span class="hljs-params">taskStates: <span class="hljs-built_in">Array</span>&lt;request.TaskState&gt;</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Upload delete fail notification.'</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; taskStates.<span class="hljs-property">length</span>; i++) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'taskState:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(taskStates[i]));</li><li>  }</li><li>};</li><li>uploadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'fail'</span>, upFailCallback1);</li><li>uploadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'fail'</span>, upFailCallback2);</li><li><span class="hljs-comment">//表示取消headerCallback1的订阅</span></li><li>uploadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'fail'</span>, upFailCallback1);</li><li><span class="hljs-comment">//表示取消订阅上传任务失败的所有回调</span></li><li>uploadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'fail'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1081px;">     <h3 id="delete9" device-type="phone,2in1,tablet,wearable,tv">delete<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delete9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(): Promise&lt;boolean&gt;</p>     <p>移除上传的任务，使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于不存在401报错场景，在api12中 401 the parameters check fails 这个错误码被移除。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回true表示移除上传任务成功；返回false表示移除上传任务失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>uploadTask.<span class="hljs-title function_">delete</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in deleting the upload task.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete the upload task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1133px;">     <h3 id="delete9-1" device-type="phone,2in1,tablet,wearable,tv">delete<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delete9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(callback: AsyncCallback&lt;boolean&gt;): void</p>     <p>移除上传的任务，使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于不存在401报错场景，在api12中 401 the parameters check fails 这个错误码被移除。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回true表示移除上传任务成功；返回false表示移除上传任务失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>uploadTask.<span class="hljs-title function_">delete</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, result: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete the upload task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in deleting the upload task.'</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1081px;">     <h3 id="removedeprecated" device-type="phone,2in1,tablet,wearable,tv">remove<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removedeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>remove(): Promise&lt;boolean&gt;</p>     <p>移除上传的任务，使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API Version 9开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#delete9">delete</a>替代。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">使用Promise方式异步回调，返回true表示移除上传任务成功；返回false表示移除上传任务失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li>uploadTask.<span class="hljs-title function_">remove</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: boolean</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in removing the upload task.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove the upload task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1181px;">     <h3 id="removedeprecated-1" device-type="phone,2in1,tablet,wearable,tv">remove<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removedeprecated-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>remove(callback: AsyncCallback&lt;boolean&gt;): void</p>     <p>移除上传的任务，使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API Version 9开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#delete9-1">delete</a>替代。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回true表示移除上传任务成功；返回false表示移除上传任务失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li>uploadTask.<span class="hljs-title function_">remove</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, result: boolean</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove the upload task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (result) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in removing the upload task.'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1200px;">     <h2 id="uploadconfig6" device-type="phone,2in1,tablet,wearable,tv">UploadConfig<sup>6+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="uploadconfig6" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>上传任务的配置信息。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">url</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">资源地址。从API 6到API 14，最大长度为2048个字符；从API 15开始，最大长度为8192个字符。支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-file-upload-download#http拦截" target="_blank">HTTP拦截</a>功能。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">header</td>         <td class="cellrowborder" width="20%">Object</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">添加要包含在上传请求中的HTTP或HTTPS标志头。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">method</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">HTTP请求方法：POST、PUT，缺省为POST。使用POST新增资源，使用PUT修改资源。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">index<sup>11+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">任务的路径索引，默认值为0。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">begins<sup>11+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">上传任务开始时读取的文件起点。默认值为0，取值范围为闭区间，表示从头开始传输。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">ends<sup>11+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">上传任务结束时读取的文件终点。默认值为-1，取值范围为闭区间，表示传输到整个文件末尾结束。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">files</td>         <td class="cellrowborder" width="20%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#file">File</a>&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">要上传的文件列表。文件以HTTP的multipart/form-data格式提交。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">data</td>         <td class="cellrowborder" width="20%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestdata">RequestData</a>&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">请求的表单数据。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1758px;">     <h2 id="taskstate9" device-type="phone,2in1,tablet,wearable,tv">TaskState<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskstate9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>上传任务的任务信息，是<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#oncomplete--fail9">on('complete' | 'fail')</a>和<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#offcomplete--fail9">off('complete' | 'fail')</a>接口的回调参数。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">path</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">文件路径。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">responseCode</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>上传任务返回码。返回0表示上传任务成功，返回其它值表示上传任务失败，具体请参见message参数中的上传任务结果描述信息。</p>          <p>此处推荐使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentcreate10-1">request.agent.create</a>创建上传任务，并获取标准错误码处理异常分支。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">message</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">上传任务结果描述信息。</td>        </tr>             </tbody></table></div>     </div>     <p>其中，responseCode包含的返回码值如下。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.3.1.1" width="50%">返回码</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.3.1.2" width="50%">具体信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">0</td>         <td class="cellrowborder" width="50%">上传成功。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">5</td>         <td class="cellrowborder" width="50%">任务被主动暂停或被动停止。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">6</td>         <td class="cellrowborder" width="50%">任务所属应用被切换到后台或终止，导致前台任务被停止，请检查应用状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7</td>         <td class="cellrowborder" width="50%">无网络，请检查设备是否处于联网状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">8</td>         <td class="cellrowborder" width="50%">网络类型不匹配，请检查当前网络类型和任务所需网络类型是否匹配。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10</td>         <td class="cellrowborder" width="50%">创建HTTP请求失败，请检查参数是否正确或重试任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12</td>         <td class="cellrowborder" width="50%">超时，请检查参数是否正确、检查网络状况是否允许，或重试任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13</td>         <td class="cellrowborder" width="50%">连接失败，请检查参数是否正确、检查网络状况是否允许，或重试任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14</td>         <td class="cellrowborder" width="50%">请求失败，请检查参数是否正确、检查网络状况是否允许，或重试任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">15</td>         <td class="cellrowborder" width="50%">上传失败，请检查参数是否正确、检查网络状况是否允许，或重试任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16</td>         <td class="cellrowborder" width="50%">重定向失败，请检查参数是否正确、检查网络状况是否允许，或重试任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17</td>         <td class="cellrowborder" width="50%">协议错误，服务器返回 4XX 或 5XX 状态码，请检查参数是否正确。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">20</td>         <td class="cellrowborder" width="50%">其他错误，请检查参数是否正确、检查网络状况是否允许，或重试任务。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 828px;">     <h2 id="file" device-type="phone,2in1,tablet,wearable,tv">File<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="file" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#uploadconfig6">UploadConfig</a>中的文件列表。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">filename</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">multipart提交时，请求头中的文件名。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">name</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">multipart提交时，表单项目的名称，缺省为file。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">uri</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>文件的本地存储路径。</p>          <p>仅支持"internal://cache/"，即调用方（传入的context）对应的缓存路径context.cacheDir。</p>          <p>示例：internal://cache/path/to/file.txt</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">type</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">文件的内容类型，默认根据文件名或路径的后缀获取。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 402px;">     <h2 id="requestdata" device-type="phone,2in1,tablet,wearable,tv">RequestData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestdata" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#uploadconfig6">UploadConfig</a>中的表单数据。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">name</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示表单元素的名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">value</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示表单元素的值。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1829px;">     <h2 id="requestdownloadfile9" device-type="phone,2in1,tablet,wearable,tv">request.downloadFile<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestdownloadfile9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>downloadFile(context: BaseContext, config: DownloadConfig): Promise&lt;DownloadTask&gt;</p>     <p>创建并启动一个下载任务，使用Promise异步回调，支持HTTP协议。通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#oncompletepauseremove7">on('complete'|'pause'|'remove')</a>可以获取任务下载时的状态信息，包括任务完成、暂停或移除。通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#onfail7">on('fail')</a>可以获取任务下载时的错误信息。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">基于应用程序的上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#downloadconfig">DownloadConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载的配置信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#downloadtask">DownloadTask</a>&gt;</td>         <td class="cellrowborder" width="50%">使用Promise方式，异步返回下载任务DownloadTask的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400001</td>         <td class="cellrowborder" width="50%">Invalid file or file system error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400002</td>         <td class="cellrowborder" width="50%">File path not supported or invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>     <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1847px;">     <h2 id="requestdownloadfile9-1" device-type="phone,2in1,tablet,wearable,tv">request.downloadFile<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestdownloadfile9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>downloadFile(context: BaseContext, config: DownloadConfig, callback: AsyncCallback&lt;DownloadTask&gt;): void</p>     <p>创建并启动一个下载任务，使用callback异步回调，支持HTTP协议。通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#oncompletepauseremove7">on('complete'|'pause'|'remove')</a>可获取任务下载时的状态信息，包括任务完成、暂停或移除。通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#onfail7">on('fail')</a>可获取任务下载时的错误信息。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">基于应用程序的上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#downloadconfig">DownloadConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载的配置信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#downloadtask">DownloadTask</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当下载任务成功，err为undefined，data为获取到的DownloadTask对象；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400001</td>         <td class="cellrowborder" width="50%">Invalid file or file system error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400002</td>         <td class="cellrowborder" width="50%">File path not supported or invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, {</li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxxx.hap'</span>,</li><li>    <span class="hljs-attr">filePath</span>: <span class="hljs-string">'xxx/xxxxx.hap'</span></li><li>  }, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1336px;">     <h2 id="requestdownloaddeprecated" device-type="phone,2in1,tablet,wearable,tv">request.download<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestdownloaddeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>download(config: DownloadConfig): Promise&lt;DownloadTask&gt;</p>     <p>创建并启动一个下载任务，使用Promise异步回调。</p>     <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6 开始支持，从API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestdownloadfile9">request.downloadFile</a>替代。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#downloadconfig">DownloadConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载的配置信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#downloadtask">DownloadTask</a>&gt;</td>         <td class="cellrowborder" width="50%">使用Promise方式，异步返回下载任务DownloadTask的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span>;</li><li><span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>request.<span class="hljs-title function_">download</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>  downloadTask = data;</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1330px;">     <h2 id="requestdownloaddeprecated-1" device-type="phone,2in1,tablet,wearable,tv">request.download<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestdownloaddeprecated-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>download(config: DownloadConfig, callback: AsyncCallback&lt;DownloadTask&gt;): void</p>     <p>创建并启动一个下载任务，使用callback异步回调。</p>     <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 6 开始支持，从API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestdownloadfile9-1">request.downloadFile</a>替代。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#downloadconfig">DownloadConfig</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载的配置信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#downloadtask">DownloadTask</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当下载任务成功，err为undefined，data为获取到的DownloadTask对象；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span>;</li><li><span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>request.<span class="hljs-title function_">download</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxxx.hap'</span>,</li><li><span class="hljs-attr">filePath</span>: <span class="hljs-string">'xxx/xxxxx.hap'</span>}, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: request.DownloadTask</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  downloadTask = data;</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 206px;">     <h2 id="downloadtask" device-type="phone,2in1,tablet,wearable,tv">DownloadTask<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="downloadtask" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>下载任务，使用下列方法前，需要先获取DownloadTask对象，promise形式通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestdownloadfile9">request.downloadFile</a>获取，callback形式通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestdownloadfile9-1">request.downloadFile</a>获取。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1874px;">     <h3 id="onprogress-1" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">on('progress')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onprogress-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'progress', callback: (receivedSize: number, totalSize: number) =&gt; void): void</p>     <p>订阅下载任务进度事件，使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>应用处于后台时，为满足功耗性能要求，不支持调用此接口进行回调。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'progress'，表示下载的进度信息，当任务进度有进展时触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载任务进度的回调函数，返回已上传文件大小和上传文件大小总和。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">receivedSize</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前下载的进度，单位为字节（B）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">totalSize</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载文件的总大小，单位为字节（B）。在下载过程中，若服务器使用chunk方式传输导致无法从请求头中获取文件总大小时，totalSize为 -1。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">progressCallback</span> = (<span class="hljs-params">receivedSize: <span class="hljs-built_in">number</span>, totalSize: <span class="hljs-built_in">number</span></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"download receivedSize:"</span> + receivedSize + <span class="hljs-string">" totalSize:"</span> + totalSize);</li><li>    };</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, progressCallback);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1966px;">     <h3 id="offprogress-1" device-type="phone,2in1,tablet,wearable,tv">off('progress')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offprogress-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'progress', callback?: (receivedSize: number, totalSize: number) =&gt; void): void</p>     <p>取消订阅下载任务进度事件。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>取消订阅的事件类型。</p>          <p>- 取值为'progress'，表示下载的进度信息。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消订阅的回调函数。若无此参数，则取消订阅当前类型的所有回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">receivedSize</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前下载的进度，单位为字节（B）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">totalSize</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载文件的总大小，单位为字节（B）。在下载过程中，若服务器使用chunk方式传输导致无法从请求头中获取文件总大小时，totalSize为 -1。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">progressCallback1</span> = (<span class="hljs-params">receivedSize: <span class="hljs-built_in">number</span>, totalSize: <span class="hljs-built_in">number</span></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Download delete progress notification.'</span> + <span class="hljs-string">'receivedSize:'</span> + receivedSize + <span class="hljs-string">'totalSize:'</span> + totalSize);</li><li>    };</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">progressCallback2</span> = (<span class="hljs-params">receivedSize: <span class="hljs-built_in">number</span>, totalSize: <span class="hljs-built_in">number</span></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Download delete progress notification.'</span> + <span class="hljs-string">'receivedSize:'</span> + receivedSize + <span class="hljs-string">'totalSize:'</span> + totalSize);</li><li>    };</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, progressCallback1);</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, progressCallback2);</li><li>    <span class="hljs-comment">//表示取消progressCallback1的订阅</span></li><li>    downloadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'progress'</span>, progressCallback1);</li><li>    <span class="hljs-comment">//表示取消订阅下载任务进度事件的所有回调</span></li><li>    downloadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'progress'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1794px;">     <h3 id="oncompletepauseremove7" device-type="phone,2in1,tablet,wearable,tv">on('complete'|'pause'|'remove')<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oncompletepauseremove7" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'complete'|'pause'|'remove', callback: () =&gt; void): void</p>     <p>订阅下载任务相关的事件，使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'complete'，表示下载任务完成，任务完成时触发该事件。</p>          <p>- 取值为'pause'，表示下载任务暂停，任务暂停时触发该事件。</p>          <p>- 取值为'remove'，表示下载任务移除，任务移除时触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载任务相关的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">completeCallback</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Download task completed.'</span>);</li><li>    };</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'complete'</span>, completeCallback);</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">pauseCallback</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Download task pause.'</span>);</li><li>    };</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pause'</span>, pauseCallback);</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">removeCallback</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Download task remove.'</span>);</li><li>    };</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'remove'</span>, removeCallback);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2346px;">     <h3 id="offcompletepauseremove7" device-type="phone,2in1,tablet,wearable,tv">off('complete'|'pause'|'remove')<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offcompletepauseremove7" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'complete'|'pause'|'remove', callback?: () =&gt; void): void</p>     <p>取消订阅下载任务相关的事件。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>取消订阅的事件类型。</p>          <p>- 取值为'complete'，表示下载任务完成。</p>          <p>- 取值为'pause'，表示下载任务暂停。</p>          <p>- 取值为'remove'，表示下载任务移除。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消订阅的回调函数。若无此参数，则取消订阅当前类型的所有回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">completeCallback1</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Download delete complete notification.'</span>);</li><li>    };</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">completeCallback2</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Download delete complete notification.'</span>);</li><li>    };</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'complete'</span>, completeCallback1);</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'complete'</span>, completeCallback2);</li><li>    <span class="hljs-comment">//表示取消completeCallback1的订阅</span></li><li>    downloadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'complete'</span>, completeCallback1);</li><li>    <span class="hljs-comment">//表示取消订阅下载任务完成的所有回调</span></li><li>    downloadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'complete'</span>);</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">pauseCallback1</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Download delete pause notification.'</span>);</li><li>    };</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">pauseCallback2</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Download delete pause notification.'</span>);</li><li>    };</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pause'</span>, pauseCallback1);</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pause'</span>, pauseCallback2);</li><li>    <span class="hljs-comment">//表示取消pauseCallback1的订阅</span></li><li>    downloadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'pause'</span>, pauseCallback1);</li><li>    <span class="hljs-comment">//表示取消订阅下载任务暂停的所有回调</span></li><li>    downloadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'pause'</span>);</li><li>
</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">removeCallback1</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Download delete remove notification.'</span>);</li><li>    };</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">removeCallback2</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Download delete remove notification.'</span>);</li><li>    };</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'remove'</span>, removeCallback1);</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'remove'</span>, removeCallback2);</li><li>    <span class="hljs-comment">//表示取消removeCallback1的订阅</span></li><li>    downloadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'remove'</span>, removeCallback1);</li><li>    <span class="hljs-comment">//表示取消订阅下载任务移除的所有回调</span></li><li>    downloadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'remove'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1585px;">     <h3 id="onfail7" device-type="phone,2in1,tablet,wearable,tv">on('fail')<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onfail7" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'fail', callback: (err: number) =&gt; void): void</p>     <p>订阅下载任务失败事件，使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'fail'，表示下载失败，任务失败时触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载失败的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">err</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载失败的错误码，错误原因见<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#常量">下载任务的错误码</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">failCallback</span> = (<span class="hljs-params">err: <span class="hljs-built_in">number</span></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to download the task. Code: <span class="hljs-subst">${err}</span>`</span>);</li><li>    };</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'fail'</span>, failCallback);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1801px;">     <h3 id="offfail7" device-type="phone,2in1,tablet,wearable,tv">off('fail')<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offfail7" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'fail', callback?: (err: number) =&gt; void): void</p>     <p>取消订阅下载任务失败事件。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>取消订阅的事件类型。</p>          <p>- 取值为'fail'，表示下载失败。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消订阅的回调函数。若无此参数，则取消订阅当前类型的所有回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">err</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载失败的错误码，错误原因见<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#常量">下载任务的错误码</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameters check fails. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">failCallback1</span> = (<span class="hljs-params">err: <span class="hljs-built_in">number</span></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to download the task. Code: <span class="hljs-subst">${err}</span>`</span>);</li><li>    };</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title function_">failCallback2</span> = (<span class="hljs-params">err: <span class="hljs-built_in">number</span></span>) =&gt; {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to download the task. Code: <span class="hljs-subst">${err}</span>`</span>);</li><li>    };</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'fail'</span>, failCallback1);</li><li>    downloadTask.<span class="hljs-title function_">on</span>(<span class="hljs-string">'fail'</span>, failCallback2);</li><li>    <span class="hljs-comment">//表示取消failCallback1的订阅</span></li><li>    downloadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'fail'</span>, failCallback1);</li><li>    <span class="hljs-comment">//表示取消订阅下载任务失败的所有回调</span></li><li>    downloadTask.<span class="hljs-title function_">off</span>(<span class="hljs-string">'fail'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1429px;">     <h3 id="delete9-2" device-type="phone,2in1,tablet,wearable,tv">delete<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delete9-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(): Promise&lt;boolean&gt;</p>     <p>移除下载的任务，使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于不存在401报错场景，在api12中 401 the parameters check fails 这个错误码被移除。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回true表示移除下载任务成功；返回false表示移除下载任务失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    data.<span class="hljs-title function_">delete</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in removing the download task.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1505px;">     <h3 id="delete9-3" device-type="phone,2in1,tablet,wearable,tv">delete<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="delete9-3" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(callback: AsyncCallback&lt;boolean&gt;): void</p>     <p>移除下载的任务，使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于不存在401报错场景，在api12中 401 the parameters check fails 这个错误码被移除。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回true表示移除下载任务成功；返回false表示移除下载任务失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    downloadTask.<span class="hljs-title function_">delete</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, result: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in removing the download task.'</span>);</li><li>    });</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1429px;">     <h3 id="gettaskinfo9" device-type="phone,2in1,tablet,wearable,tv">getTaskInfo<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gettaskinfo9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getTaskInfo(): Promise&lt;DownloadInfo&gt;</p>     <p>查询下载任务的信息，使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于不存在401报错场景，在api12中 401 the parameters check fails 这个错误码被移除。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#downloadinfo7">DownloadInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回DownloadInfo对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    downloadTask.<span class="hljs-title function_">getTaskInfo</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">downloadInfo: request.DownloadInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying the download task'</span>)</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)</li><li>    });</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1553px;">     <h3 id="gettaskinfo9-1" device-type="phone,2in1,tablet,wearable,tv">getTaskInfo<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gettaskinfo9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getTaskInfo(callback: AsyncCallback&lt;DownloadInfo&gt;): void</p>     <p>查询下载的任务，使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于不存在401报错场景，在api12中 401 the parameters check fails 这个错误码被移除。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#downloadinfo7">DownloadInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当查询下载任务操作成功，err为undefined，data为获取到的DownloadInfo对象；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    downloadTask.<span class="hljs-title function_">getTaskInfo</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, downloadInfo: request.DownloadInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query the download mimeType. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying the download mimeType'</span>);</li><li>      }</li><li>    });</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1429px;">     <h3 id="gettaskmimetype9" device-type="phone,2in1,tablet,wearable,tv">getTaskMimeType<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gettaskmimetype9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getTaskMimeType(): Promise&lt;string&gt;</p>     <p>查询下载的任务的MimeType(HTTP中表示资源的媒体类型)，使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于不存在401报错场景，在api12中 401 the parameters check fails 这个错误码被移除。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回下载任务的MimeType。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    downloadTask.<span class="hljs-title function_">getTaskMimeType</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying the download MimeType'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query the download MimeType. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)</li><li>    });</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1553px;">     <h3 id="gettaskmimetype9-1" device-type="phone,2in1,tablet,wearable,tv">getTaskMimeType<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gettaskmimetype9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getTaskMimeType(callback: AsyncCallback&lt;string&gt;): void</p>     <p>查询下载任务的 MimeType（HTTP中表示资源的媒体类型），使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于不存在401报错场景，在api12中 401 the parameters check fails 这个错误码被移除。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当查询下载任务MimeType成功，err为undefined，data为获取到的下载任务的MimeType的对象；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    downloadTask.<span class="hljs-title function_">getTaskMimeType</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query the download mimeType. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying the download mimeType'</span>);</li><li>      }</li><li>    });</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1453px;">     <h3 id="suspend9" device-type="phone,2in1,tablet,wearable,tv">suspend<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="suspend9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>suspend(): Promise&lt;boolean&gt;</p>     <p>暂停下载正在运行中的任务，已暂停的任务可被<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#restore9">restore</a>恢复，使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于不存在401报错场景，在api12中 401 the parameters check fails 这个错误码被移除。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回true表示暂停下载正在运行中的任务成功；返回false表示暂停下载正在运行中的任务失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    downloadTask.<span class="hljs-title function_">suspend</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in pausing the download task.'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to pause the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1505px;">     <h3 id="suspend9-1" device-type="phone,2in1,tablet,wearable,tv">suspend<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="suspend9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>suspend(callback: AsyncCallback&lt;boolean&gt;): void</p>     <p>暂停下载正在运行中的任务，已暂停的任务可被<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#restore9">restore</a>恢复，使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于不存在401报错场景，在api12中 401 the parameters check fails 这个错误码被移除。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回true表示暂停下载任务成功；返回false表示暂停下载任务失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    downloadTask.<span class="hljs-title function_">suspend</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, result: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to pause the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in pausing the download task.'</span>);</li><li>    });</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1453px;">     <h3 id="restore9" device-type="phone,2in1,tablet,wearable,tv">restore<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="restore9" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>restore(): Promise&lt;boolean&gt;</p>     <p>重新启动被暂停的下载任务，使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于不存在401报错场景，在api12中 401 the parameters check fails 这个错误码被移除。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回true表示重新启动被暂停的下载任务成功；返回false表示重新启动被暂停的下载任务失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    downloadTask.<span class="hljs-title function_">restore</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in resuming the download task.'</span>)</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to resume the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    });</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1529px;">     <h3 id="restore9-1" device-type="phone,2in1,tablet,wearable,tv">restore<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="restore9-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>restore(callback: AsyncCallback&lt;boolean&gt;): void</p>     <p>重新启动被暂停的下载任务，使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>由于不存在401报错场景，在api12中 401 the parameters check fails 这个错误码被移除。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回true表示重新启动已暂停的下载任务成功；返回false表示重新启动下载任务失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  request.<span class="hljs-title function_">downloadFile</span>(context, { <span class="hljs-attr">url</span>: <span class="hljs-string">'https://xxxx/xxxx.hap'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: request.DownloadTask</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">downloadTask</span>: request.<span class="hljs-property">DownloadTask</span> = data;</li><li>    downloadTask.<span class="hljs-title function_">restore</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, result: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to resume the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in resuming the download task.'</span>);</li><li>    });</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to request the download. err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1081px;">     <h3 id="removedeprecated-2" device-type="phone,2in1,tablet,wearable,tv">remove<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removedeprecated-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>remove(): Promise&lt;boolean&gt;</p>     <p>移除下载的任务，使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API Version 9开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#delete9-2">delete</a>替代。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回true表示移除下载任务成功；返回false表示移除下载任务失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li>downloadTask.<span class="hljs-title function_">remove</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in removing the download task.'</span>);</li><li>}).<span class="hljs-property">catch</span> (<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1133px;">     <h3 id="removedeprecated-3" device-type="phone,2in1,tablet,wearable,tv">remove<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removedeprecated-3" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>remove(callback: AsyncCallback&lt;boolean&gt;): void</p>     <p>移除下载的任务，使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API Version 9开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#delete9-3">delete</a>替代。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。返回true表示移除下载任务成功；返回false表示移除下载任务失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li>downloadTask.<span class="hljs-title function_">remove</span>(<span class="hljs-function">(<span class="hljs-params">err, result</span>)=&gt;</span>{</li><li>  <span class="hljs-keyword">if</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in removing the download task.'</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1057px;">     <h3 id="querydeprecated" device-type="phone,2in1,tablet,wearable,tv">query<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="querydeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>query(): Promise&lt;DownloadInfo&gt;</p>     <p>查询下载任务，返回下载任务的信息，使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API Version 7开始支持，从API Version 9开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#gettaskinfo9">getTaskInfo</a>替代。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#downloadinfo7">DownloadInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回DownloadInfo。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li>downloadTask.<span class="hljs-title function_">query</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">downloadInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying the download task.'</span>)</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1181px;">     <h3 id="querydeprecated-1" device-type="phone,2in1,tablet,wearable,tv">query<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="querydeprecated-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>query(callback: AsyncCallback&lt;DownloadInfo&gt;): void</p>     <p>查询下载任务，返回下载任务的信息，使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API Version 7开始支持，从API Version 9开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#gettaskinfo9-1">getTaskInfo</a>替代。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.49.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#downloadinfo7">DownloadInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当查询下载任务成功，err为undefined，data为获取到的DownloadInfo对象；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.49.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li>downloadTask.<span class="hljs-title function_">query</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, downloadInfo: request.DownloadInfo</span>)=&gt;</span>{</li><li>  <span class="hljs-keyword">if</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query the download mimeType. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying the download task.'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1057px;">     <h3 id="querymimetypedeprecated" device-type="phone,2in1,tablet,wearable,tv">queryMimeType<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="querymimetypedeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>queryMimeType(): Promise&lt;string&gt;</p>     <p>查询下载任务的MimeType，使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API Version 7开始支持，从API Version 9开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#gettaskmimetype9">getTaskMimeType</a>替代。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回下载任务的MimeType。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li>downloadTask.<span class="hljs-title function_">queryMimeType</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: string</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying the download MimeType.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query the download MimeType. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1181px;">     <h3 id="querymimetypedeprecated-1" device-type="phone,2in1,tablet,wearable,tv">queryMimeType<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="querymimetypedeprecated-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>queryMimeType(callback: AsyncCallback&lt;string&gt;): void</p>     <p>查询下载的任务的MimeType，使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API Version 7开始支持，从API Version 9开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#gettaskmimetype9-1">getTaskMimeType</a>替代。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当查询下载任务的MimeType成功，err为undefined，data为获取到的任务的MimeType对象；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li>downloadTask.<span class="hljs-title function_">queryMimeType</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: string</span>)=&gt;</span>{</li><li>  <span class="hljs-keyword">if</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query the download mimeType. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in querying the download mimeType.'</span>);</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1057px;">     <h3 id="pausedeprecated" device-type="phone,2in1,tablet,wearable,tv">pause<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pausedeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pause(): Promise&lt;void&gt;</p>     <p>暂停下载正在运行中的任务，使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API Version 7开始支持，从API Version 9开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#suspend9">suspend</a>替代。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li>downloadTask.<span class="hljs-title function_">pause</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: boolean</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in pausing the download task.'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to pause the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1133px;">     <h3 id="pausedeprecated-1" device-type="phone,2in1,tablet,wearable,tv">pause<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pausedeprecated-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pause(callback: AsyncCallback&lt;void&gt;): void</p>     <p>暂停下载正在运行中的任务，使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 7开始支持，从API version 9开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#suspend9-1">suspend</a>替代。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.53.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当暂停下载任务成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li>downloadTask.<span class="hljs-title function_">pause</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, result: boolean</span>)=&gt;</span>{</li><li>  <span class="hljs-keyword">if</span>(err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to pause the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in pausing the download task.'</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1057px;">     <h3 id="resumedeprecated" device-type="phone,2in1,tablet,wearable,tv">resume<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resumedeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>resume(): Promise&lt;void&gt;</p>     <p>重新启动被暂停的下载任务，使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API Version 7开始支持，从API Version 9开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#restore9">restore</a>替代。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li>downloadTask.<span class="hljs-title function_">resume</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: boolean</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in resuming the download task.'</span>)</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to resume the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1157px;">     <h3 id="resumedeprecated-1" device-type="phone,2in1,tablet,wearable,tv">resume<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resumedeprecated-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>resume(callback: AsyncCallback&lt;void&gt;): void</p>     <p>重新启动被暂停的下载任务，使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API Version 7开始支持，从API Version 9开始不再维护，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#restore9-1">restore</a>替代。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.55.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当重新启动已暂停的下载任务成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">The permissions check fails.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li>downloadTask.<span class="hljs-title function_">resume</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, result: boolean</span>)=&gt;</span>{</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to resume the download task. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in resuming the download task.'</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1773px;">     <h2 id="downloadconfig" device-type="phone,2in1,tablet,wearable,tv">DownloadConfig<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="downloadconfig" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>下载任务的配置信息。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">url</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">资源地址。从API 6到API 14，最大长度为2048个字符；从API 15开始，最大长度为8192个字符。支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-file-upload-download#http拦截" target="_blank">HTTP拦截</a>功能。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">header</td>         <td class="cellrowborder" width="20%">Object</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">添加要包含在下载请求中的HTTPS标志头。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">enableMetered</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>表示设置是否允许在按流量计费的连接下下载任务的配置信息。true表示允许，false表示不允许。默认值为false。</p>          <p><strong>说明：</strong></p>          <p>Wi-Fi为非计费网络，数据流量为计费网络。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">enableRoaming</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">表示设置是否允许在漫游网络中下载任务的配置信息。true表示允许，false表示不允许。默认值为false。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">description</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设置下载会话的描述。默认值为空字符串。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">filePath<sup>7+</sup></td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置下载路径。默认为调用方（即传入的context）对应的缓存路径。默认文件名从url的最后一个"/"后截取。</p>          <p>- FA模型下使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context#contextgetcachedir">context</a>获取应用存储路径。</p>          <p>- Stage模型下使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">AbilityContext</a>类获取文件路径。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">networkType</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置允许下载的网络类型。默认值为NETWORK_MOBILE&amp;NETWORK_WIFI。</p>          <p>- NETWORK_MOBILE：0x00000001</p>          <p>- NETWORK_WIFI：0x00010000</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">title</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">设置下载任务名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">background<sup>9+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">后台任务通知开关，启用后可在通知中显示下载状态。true表示启用，false表示禁用。默认值为false。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1023px;">     <h2 id="downloadinfo7" device-type="phone,2in1,tablet,wearable,tv">DownloadInfo<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="downloadinfo7" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>下载任务信息，<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#gettaskinfo9">getTaskInfo</a>接口的回调参数。</p>     <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.57.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">downloadId</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">下载任务id。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">failedReason</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">下载失败原因，可以是任何<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#常量">下载任务的错误码</a>常量。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">fileName</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">下载的文件名。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">filePath</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">存储文件的URI。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">pausedReason</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">会话暂停的原因，可以是任何<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#常量">下载任务暂停原因</a>常量。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">status</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">下载状态码，可以是任何<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#常量">下载任务状态码</a>常量。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">targetURI</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">下载文件的URI。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">downloadTitle</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">下载任务名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">downloadTotalBytes</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">下载的文件的总大小，单位为字节（B）。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">description</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">待下载任务的描述信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">downloadedBytes</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">实时下载大小，单位为字节（B）。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="requestagent" device-type="phone,2in1,tablet,wearable,tv">request.agent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagent" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 354px;">     <h3 id="常量21" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">常量<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="常量21" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.59.3.1.5.1.1" width="25%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.3.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.3.1.5.1.3" width="25%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.3.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">VISIBILITY_COMPLETION<sup>21+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">1</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentnotification15">通知栏</a>展示类型：显示完成通知</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">VISIBILITY_PROGRESS<sup>21+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">2</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentnotification15">通知栏</a>展示类型：显示进度通知</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 426px;">     <h2 id="requestagentaction10" device-type="phone,2in1,tablet,wearable,tv">request.agent.Action<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentaction10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义操作选项。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">DOWNLOAD</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">表示下载任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">UPLOAD</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">表示上传任务。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 474px;">     <h2 id="requestagentmode10" device-type="phone,2in1,tablet,wearable,tv">request.agent.Mode<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentmode10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义模式选项。</p>     <p>当应用的前台任务切换到后台一段时间后会显示运行失败或暂停，而后台任务不受此操作影响。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">BACKGROUND</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">表示后台任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FOREGROUND</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">表示前台任务。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 519px;">     <h2 id="requestagentnetwork10" device-type="phone,2in1,tablet,wearable,tv">request.agent.Network<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentnetwork10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义网络选项。</p>     <p>网络不满足设置条件时，未执行的任务会等待执行，执行中的任务将失败或暂停。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">ANY</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">表示不限网络类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">WIFI</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">表示无线网络。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CELLULAR</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">表示蜂窝数据网络。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 549px;">     <h2 id="requestagentbroadcastevent11" device-type="phone,2in1,tablet,wearable,tv">request.agent.BroadcastEvent<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentbroadcastevent11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义自定义系统事件。用户可以使用公共事件接口获取该事件。</p>     <p>上传下载 SA 具有 'ohos.permission.SEND_TASK_COMPLETE_EVENT' 该权限，用户可以配置事件的metadata指向的二级配置文件来拦截其他事件发送者。</p>     <p>调用CommonEventData类型传输公共事件相关数据，成员的内容填写和 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-commonevent-commoneventdata">CommonEventData</a> 介绍的有所区别，其中CommonEventData.code表示任务的状态，目前为0x40 COMPLETE或0x41 FAILED；CommonEventData.data表示任务的taskId。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.63.6.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.6.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.6.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">COMPLETE</td>         <td class="cellrowborder" width="33.33333333333333%">ohos.request.event.COMPLETE</td>         <td class="cellrowborder" width="33.33333333333333%">表示自定义系统事件完成。在任务结束后会触发该事件，根据任务的成功或失败，事件的code返回0x40或者0x41。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2097px;">     <h2 id="requestagentfilespec10" device-type="phone,2in1,tablet,wearable,tv">request.agent.FileSpec<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentfilespec10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表单项的文件信息。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.64.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">path</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>文件路径。</p>          <p>- 相对路径，位于调用方的缓存路径下。</p>          <p>例如："./xxx/yyy/zzz.html"、"xxx/yyy/zzz.html"。</p>          <p>- internal协议路径，支持"internal://"及其子路径。internal为调用方（即传入的context）对应路径，"internal://cache"对应context.cacheDir。</p>          <p>例如："internal://cache/path/to/file.txt"。</p>          <p>- 应用沙箱目录，只支持到base及其子目录下。</p>          <p>例如："/data/storage/el1/base/path/to/file.txt"。</p>          <p>- file协议路径，必须匹配应用包名，只支持到base及其子目录下。</p>          <p>例如："file://com.example.test/data/storage/el2/base/file.txt"。</p>          <p>- 用户公共文件，仅支持上传任务。</p>          <p>例如："file://media/Photo/path/to/file.img"。仅支持前台任务。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">mimeType<sup>(deprecated)</sup></td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>文件的mimeType，通过文件名获取，默认值为文件名后缀。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>          <p>从 API version 18 开始废弃，建议使用contentType替代。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">contentType<sup>18+</sup></td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">文件内容类型，默认值为文件名后缀。该选项会被填写到HTTP表单指定的Content-Type字段中。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">filename</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>文件名，默认值通过路径获取。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">extras</td>         <td class="cellrowborder" width="20%">object</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>文件信息的附加内容，该参数不会体现在HTTP请求中。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 450px;">     <h2 id="requestagentformitem10" device-type="phone,2in1,tablet,wearable,tv">request.agent.FormItem<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentformitem10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>任务的表单项信息。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.65.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">name</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表单参数名。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">value</td>         <td class="cellrowborder" width="20%">string | <a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentfilespec10">FileSpec</a> | Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentfilespec10">FileSpec</a>&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表单参数值。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 8628px;">     <h2 id="requestagentconfig10" device-type="phone,2in1,tablet,wearable,tv">request.agent.Config<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentconfig10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>上传/下载任务的配置信息。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">action</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentaction10">Action</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>任务操作选项。</p>          <p>- UPLOAD表示上传任务。</p>          <p>- DOWNLOAD表示下载任务。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">url</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>资源地址。从API 6到API 14，最大长度为2048个字符；从API 15开始，最大长度为8192个字符。支持<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-file-upload-download#http拦截" target="_blank">HTTP拦截</a>功能。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">title</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>任务标题，其最大长度为256个字符，默认值为小写的 upload 或 download，与上面的 action 保持一致。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">description</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>任务的详细信息，其最大长度为1024个字符，默认值为空字符串。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">mode</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentmode10">Mode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>任务模式，默认为后台任务。从API version 20开始，下载到用户文件场景必须为request.agent.Mode.FOREGROUND。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">overwrite</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>下载过程中路径已存在时的解决方案选择，默认为false。</p>          <p>- true，覆盖已存在的文件。</p>          <p>- false，下载失败。</p>          <p>从API version 20开始，下载到用户文件场景必须为true。</p>          <p>设置为 true 时，不建议创建多个任务同时往同一个文件下载内容，会导致文件内容混乱。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">method</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>上传或下载HTTP的标准方法，包括GET、POST和PUT，不区分大小写。</p>          <p>- 上传时，使用PUT或POST，默认值为PUT。</p>          <p>- 下载时，使用GET或POST，默认值为GET。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">headers</td>         <td class="cellrowborder" width="20%">object</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>添加要包含在任务中的HTTP协议标志头。</p>          <p>- 上传请求，默认的Content-Type为"multipart/form-data"。</p>          <p>- 下载请求，默认的Content-Type为"application/json"。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">data</td>         <td class="cellrowborder" width="20%">string | Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentformitem10">FormItem</a>&gt;</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>- 下载时，data为字符串类型，通常情况下使用json格式（object将被转换为json文本），默认为空。</p>          <p>- 上传时，data是表单项数组Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentformitem10">FormItem</a>&gt;。从API version 15开始，创建单个任务可以上传最多100个文件。默认为空。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">saveas</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>保存下载文件的路径，包括如下几种：</p>          <p>- 相对路径，位于调用方的缓存路径下，如"./xxx/yyy/zzz.html"、"xxx/yyy/zzz.html"。</p>          <p>- internal协议路径，支持"internal://"及其子路径，internal为调用方（传入的context）对应路径，"internal://cache"对应context.cacheDir。如"internal://cache/path/to/file.txt"。</p>          <p>- 应用沙箱目录，只支持到base及其子目录下，如"/data/storage/el1/base/path/to/file.txt"。</p>          <p>- file协议路径，支持应用文件和用户文件，应用文件必须匹配应用包名，只支持到base及其子目录下，如"file://com.example.test/data/storage/el2/base/file.txt"。用户文件必须为调用方创建好的用户文件uri。</p>          <p>从API version 20开始，除<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-file-upload-download#下载网络资源文件至用户文件" target="_blank">下载到用户文件</a>外，其他可默认为调用方（即传入的context）对应的缓存路径。默认文件名从url的最后一个"/"后截取。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">network</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentnetwork10">Network</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>网络选项，当前支持无线网络WIFI和蜂窝数据网络CELLULAR，默认为ANY（WIFI或CELLULAR）。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">metered</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>是否允许在按流量计费的网络中工作，默认为false。</p>          <p>- true：是</p>          <p>- false：否</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">roaming</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>是否允许在漫游网络中工作，默认为true。</p>          <p>- true：是</p>          <p>- false：否</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">retry</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>是否为后台任务启用自动重试，仅应用于后台任务，默认为true。</p>          <p>- true：是</p>          <p>- false：否</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">redirect</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>是否允许重定向，默认为true。</p>          <p>- true：是</p>          <p>- false：否</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">proxy<sup>12+</sup></td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置代理地址，其最大长度为512个字符，默认为空。</p>          <p>代理地址格式:"http://&lt;domain or address&gt;:&lt;port&gt;"</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">index</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>任务的路径索引，通常情况下用于任务断点续传，默认为0。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">begins</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>文件起点，通常情况下用于断点续传。默认值为0，取值为闭区间，表示从头开始传输。</p>          <p>- 下载时，请求读取服务器开始下载文件时的起点位置（HTTP协议中设置"Range"选项）。</p>          <p>- 上传时，读取需上传的文件的起点位置。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">ends</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>文件终点，通常情况下用于断点续传。默认值为-1，取值为闭区间，表示传输到整个文件末尾结束。</p>          <p>- 下载时，请求读取服务器开始下载文件时的结束位置（HTTP协议中设置"Range"选项）。</p>          <p>- 上传时，读取需上传的文件的结束位置。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">gauge</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>后台任务的过程进度通知策略，仅应用于后台任务，默认值为false。</p>          <p>- false：代表仅完成或失败的通知。</p>          <p>- true：发出每个进度已完成或失败的通知。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">precise</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>- 如果设置为true，在上传/下载无法获取文件大小时任务失败。</p>          <p>- 如果设置为false，将文件大小设置为-1时任务继续。</p>          <p>默认值为false。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">token</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>任务令牌。查询带有token的任务需提供token并通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttouch10">request.agent.touch</a>查询，否则无法查询到指定任务。其最小为8个字节，最大为2048个字节。默认为空。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">priority<sup>11+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">任务的优先级。前台任务的优先级比后台任务高。任务模式相同的情况下，该配置项的数字越小优先级越高，默认值为0。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">extras</td>         <td class="cellrowborder" width="20%">object</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>配置的附加功能，默认为空。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">multipart<sup>15+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>是否使用单个请求进行上传，单个请求上传时必定使用multipart/form-data。</p>          <p>- false：每个文件使用一个请求传输。</p>          <p>- true：使用多文件单请求上传。</p>          <p>默认值为false。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">notification<sup>15+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentnotification15">Notification</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">通知栏自定义设置。默认值为{}。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">minSpeed<sup>20+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentminspeed20">MinSpeed</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">最低限速自定义设置，默认不启用最低限速。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">timeout<sup>20+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttimeout20">Timeout</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">超时时间自定义设置，连接超时时间默认60秒，总超时时间默认604800秒（1周）。当retry参数为true时，<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttimeout20">timeout</a>事件会触发立即重试，导致<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttimeout20">timeout</a>在外部观察中被重试动作所掩盖，但内部<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttimeout20">timeout</a>条件已实际触发。若需显性观察<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttimeout20">timeout</a>事件，需关闭retry参数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 813px;">     <h2 id="requestagentstate10" device-type="phone,2in1,tablet,wearable,tv">request.agent.State<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentstate10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义任务当前的状态。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.67.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">INITIALIZED</td>         <td class="cellrowborder" width="33.33333333333333%">0x00</td>         <td class="cellrowborder" width="33.33333333333333%">表示通过配置信息（<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentconfig10">Config</a>）创建的任务已初始化。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">WAITING</td>         <td class="cellrowborder" width="33.33333333333333%">0x10</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务缺少运行或重试的资源，又或是网络状态不匹配。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">RUNNING</td>         <td class="cellrowborder" width="33.33333333333333%">0x20</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务正在运行中。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">RETRYING</td>         <td class="cellrowborder" width="33.33333333333333%">0x21</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务至少失败一次，现在正在再次处理中。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PAUSED</td>         <td class="cellrowborder" width="33.33333333333333%">0x30</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务暂停，通常后续会恢复任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">STOPPED</td>         <td class="cellrowborder" width="33.33333333333333%">0x31</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务停止。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COMPLETED</td>         <td class="cellrowborder" width="33.33333333333333%">0x40</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务完成。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FAILED</td>         <td class="cellrowborder" width="33.33333333333333%">0x41</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">REMOVED</td>         <td class="cellrowborder" width="33.33333333333333%">0x50</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务移除。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 825px;">     <h2 id="requestagentprogress10" device-type="phone,2in1,tablet,wearable,tv">request.agent.Progress<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentprogress10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>任务进度的数据结构。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.68.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">state</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentstate10">State</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务当前的状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">index</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务中当前正在处理的文件索引。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">processed</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务中当前文件的已处理数据大小，单位为字节（B）。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">sizes</td>         <td class="cellrowborder" width="20%">Array&lt;number&gt;</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务中文件的大小，单位为字节（B）。在下载过程中，若服务器使用chunk方式传输导致无法从请求头中获取文件总大小时，sizes为 -1。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">extras</td>         <td class="cellrowborder" width="20%">object</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">交互的额外内容，例如：来自服务器的响应的header和body。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1475px;">     <h2 id="requestagentfaults10" device-type="phone,2in1,tablet,wearable,tv">request.agent.Faults<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentfaults10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>定义任务失败的原因。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>API version 12及以下版本，只支持串行的尝试连接域名相关ip，且不支持单个ip的连接时间控制，如果DNS返回的首个ip是阻塞的，可能会导致握手超时，进而引发TIMEOUT错误。</p>      </div></div></div>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.69.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">OTHERS</td>         <td class="cellrowborder" width="33.33333333333333%">0xFF</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示其他故障。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DISCONNECTED</td>         <td class="cellrowborder" width="33.33333333333333%">0x00</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示网络断开连接。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TIMEOUT</td>         <td class="cellrowborder" width="33.33333333333333%">0x10</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示任务超时。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PROTOCOL</td>         <td class="cellrowborder" width="33.33333333333333%">0x20</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示协议错误，例如：服务器内部错误（500）、无法处理的数据区间（416）等。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PARAM<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">0x30</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示参数错误，例如：url格式错误等。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FSIO</td>         <td class="cellrowborder" width="33.33333333333333%">0x40</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示文件系统io错误，例如：打开/查找/读取/写入/关闭。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DNS<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">0x50</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示DNS解析错误。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TCP<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">0x60</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示TCP连接错误。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SSL<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">0x70</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示SSL连接错误，例如：证书错误、证书校验失败错误等。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">REDIRECT<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">0x80</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>表示重定向错误。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">LOW_SPEED<sup>20+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">0x90</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务速度过低。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 945px;">     <h2 id="requestagentfilter10" device-type="phone,2in1,tablet,wearable,tv">request.agent.Filter<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentfilter10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>过滤条件。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.70.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">before</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">结束的Unix时间戳（毫秒），默认为调用时刻。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">after</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">开始的Unix时间戳（毫秒），默认值为调用时刻减24小时。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">state</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentstate10">State</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">指定任务的状态。如果未填写，则查询所有任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">action</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentaction10">Action</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>任务操作选项。</p>          <p>- UPLOAD表示上传任务。</p>          <p>- DOWNLOAD表示下载任务。</p>          <p>- 如果未填写，则查询所有任务。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">mode</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentmode10">Mode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>任务模式。</p>          <p>- FOREGROUND表示前台任务。</p>          <p>- BACKGROUND表示后台任务。</p>          <p>- 如果未填写，则查询所有任务。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2247px;">     <h2 id="requestagenttaskinfo10" device-type="phone,2in1,tablet,wearable,tv">request.agent.TaskInfo<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagenttaskinfo10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>查询结果的任务信息数据结构，提供普通查询和系统查询，两种字段的可见范围不同。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.71.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">saveas</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">保存下载文件的路径。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">url</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>任务的url。</p>          <p>- 通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentshow10-1">request.agent.show</a>、<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttouch10-1">request.agent.touch</a>进行查询。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">data</td>         <td class="cellrowborder" width="20%">string | Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentformitem10">FormItem</a>&gt;</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>任务值。</p>          <p>- 通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentshow10-1">request.agent.show</a>、<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttouch10-1">request.agent.touch</a>进行查询。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">tid</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务id。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">title</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务标题。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">description</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务描述。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">action</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentaction10">Action</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>任务操作选项。</p>          <p>- UPLOAD表示上传任务。</p>          <p>- DOWNLOAD表示下载任务。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">mode</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentmode10">Mode</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>任务模式。</p>          <p>- FOREGROUND表示前台任务。</p>          <p>- BACKGROUND表示后台任务。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">priority<sup>11+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务配置中的优先级。前台任务的优先级比后台任务高。相同模式的任务，数字越小优先级越高。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">mimeType</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务配置中的mimetype。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">progress</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务的过程进度。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">gauge</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>后台任务的进度通知策略。</p>          <p>- false：代表仅完成或失败的通知。</p>          <p>- true，发出每个进度已完成或失败的通知。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">ctime</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>创建任务的Unix时间戳（毫秒），由当前设备的系统生成。</p>          <p>说明：使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentsearch10-1">request.agent.search</a>进行查询时，该值需处于[after,before]区间内才可正常查询到任务id，before和after信息详见<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentfilter10">Filter</a>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">mtime</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务状态改变时的Unix时间戳（毫秒），由当前设备的系统生成。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">retry</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>任务的重试开关，仅应用于后台任务。</p>          <p>- true：是</p>          <p>- false：否</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">tries</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务的尝试次数。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">faults</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentfaults10">Faults</a></td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务的失败原因。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">reason</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">等待/失败/停止/暂停任务的原因。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">extras</td>         <td class="cellrowborder" width="20%">object</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">任务的额外部分。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 540px;">     <h2 id="requestagenthttpresponse12" device-type="phone,2in1,tablet,wearable,tv">request.agent.HttpResponse<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagenthttpresponse12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>任务响应头的数据结构。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.72.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">version</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">Http版本。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">statusCode</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">Http响应状态码。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">reason</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">Http响应原因。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">headers</td>         <td class="cellrowborder" width="20%">Map&lt;string, Array&lt;string&gt;&gt;</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">Http响应头部。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2228px;">     <h2 id="requestagentnotification15" device-type="phone,2in1,tablet,wearable,tv">request.agent.Notification<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentnotification15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>通知栏自定义信息。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.73.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">title</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">通知栏自定义标题。若不设置则使用默认显示方式。title长度上限为1024B。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">text</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">通知栏自定义正文。若不设置则使用默认显示方式。text长度上限为3072B。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">visibility<sup>21+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>设置任务的通知栏显示方式，通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#常量21">VISIBILITY常量</a>的位运算方式决定显示方式，任务通知的显示方式，包括如下几种：</p>          <p>- 仅显示完成通知，参数为VISIBILITY_COMPLETION或1，任务完成/失败后展示对应通知。</p>          <p>- 仅显示进度通知，参数为VISIBILITY_PROGRESS或2，任务在进行中显示进度通知，当任务下载成功/失败后会直接退出进度通知，不会显示完成通知。</p>          <p>- 显示进度通知/完成通知，参数为VISIBILITY_COMPLETION | VISIBILITY_PROGRESS或3，任务在进行中显示进度通知，当任务下载成功/失败后会退出进度通知，并显示完成通知。</p>          <p>若不设置该参数，则根据gauge字段来判断；若无gauge字段，则仅显示完成通知。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">DOWNLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOnNotification'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">BACKGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">ANY</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">notification</span>: {</li><li>    <span class="hljs-attr">visibility</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">VISIBILITY_COMPLETION</span> | request.<span class="hljs-property">agent</span>.<span class="hljs-property">VISIBILITY_PROGRESS</span></li><li>  }</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOnCallback</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'download task progress.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, createOnCallback);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a download task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 546px;">     <h2 id="requestagentgroupconfig15" device-type="phone,2in1,tablet,wearable,tv">request.agent.GroupConfig<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentgroupconfig15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>下载任务分组配置选项。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.74.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">gauge</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>后台任务的进度通知策略。</p>          <p>- true，显示进度、成功、失败通知。</p>          <p>- false，仅显示成功、失败通知。</p>          <p>默认为false。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">notification<sup>15+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentnotification15">Notification</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">通知栏自定义设置。默认值为{}</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 564px;">     <h2 id="requestagentwaitingreason20" device-type="phone,2in1,tablet,wearable,tv">request.agent.WaitingReason<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentwaitingreason20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>枚举，定义任务等待的原因。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.75.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.75.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.75.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">TASK_QUEUE_FULL</td>         <td class="cellrowborder" width="33.33333333333333%">0x00</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务因任务队列已满而进入等待状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">NETWORK_NOT_MATCH</td>         <td class="cellrowborder" width="33.33333333333333%">0x01</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务因所需网络条件不满足而进入等待状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">APP_BACKGROUND</td>         <td class="cellrowborder" width="33.33333333333333%">0x02</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务因应用长时间处于后台而进入等待状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">USER_INACTIVATED</td>         <td class="cellrowborder" width="33.33333333333333%">0x03</td>         <td class="cellrowborder" width="33.33333333333333%">表示任务因所属用户处于非激活状态而进入等待状态。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 666px;">     <h2 id="requestagentminspeed20" device-type="phone,2in1,tablet,wearable,tv">request.agent.MinSpeed<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentminspeed20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>任务的最低限速配置。若任务速度持续低于设定值并达到指定时长，则任务失败，失败原因为<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentfaults10">LOW_SPEED</a>。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.76.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">speed</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务最低速度，单位为字节每秒（B/s）。若任务速度持续低于该值达到指定时长，则任务失败。设置为0表示不启用最低速度限制。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">duration</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">允许低于最低速度的持续时间，单位为秒。若任务速度持续低于设定值达到该时长，则任务失败。设置为0表示不启用最低速度限制。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 714px;">     <h2 id="requestagenttimeout20" device-type="phone,2in1,tablet,wearable,tv">request.agent.Timeout<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagenttimeout20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>任务的超时配置。任务处于等待状态的时间不参与计算，上传下载任务会存在以下任务等待的原因:<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentwaitingreason20">WaitingReason<sup>20+</sup></a>。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.77.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">connectionTimeout</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">任务连接超时时间，单位为秒。连接超时是指客户端与服务器建立连接的最大耗时。若不设置则使用默认值60秒，允许设置的最小值为1秒。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">totalTimeout</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">任务总超时时间，单位为秒。总超时包括建立连接、发送请求和接收响应的全部时间。未指定时使用默认值604800秒（1周）。允许设置的最小值为1秒，最大值为604800秒（1周）。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 206px;">     <h2 id="requestagenttask10" device-type="phone,2in1,tablet,wearable,tv">request.agent.Task<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagenttask10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>上传或下载任务。使用该方法前需要先获取Task对象，promise形式通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentcreate10-1">request.agent.create</a>获取，callback形式通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentcreate10">request.agent.create</a>获取。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 518px;">     <h3 id="属性" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>包括任务id和任务的配置信息。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>Task对象及其挂载回调函数会在调用remove方法后释放并被系统自动回收。</p>      </div></div></div>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.79.6.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.6.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.6.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.6.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.6.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">tid</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务id，由系统自动生成且唯一。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">config</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentconfig10">Config</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务的配置信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2325px;">     <h3 id="onprogress10" device-type="phone,2in1,tablet,wearable,tv">on('progress')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onprogress10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'progress', callback: (progress: <a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a>) =&gt; void): void</p>     <p>订阅任务进度的事件，使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.80.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'progress'，表示任务进度，任务进度有进展时触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，发生相关的事件时触发该回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.80.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">progress</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示任务的进度信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.80.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOnTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOnTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOnTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOnTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOnCallback</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task progress.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, createOnCallback);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2325px;">     <h3 id="oncompleted10" device-type="phone,2in1,tablet,wearable,tv">on('completed')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oncompleted10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'completed', callback: (progress: <a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a>) =&gt; void): void</p>     <p>订阅任务完成事件，使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.81.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'completed'，表示任务完成，任务完成时触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，发生相关的事件时触发该回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.81.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">progress</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示任务的进度信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.81.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOnTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOnTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOnTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOnTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOnCallback</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task completed.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'completed'</span>, createOnCallback);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2325px;">     <h3 id="onfailed10" device-type="phone,2in1,tablet,wearable,tv">on('failed')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onfailed10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'failed', callback: (progress: <a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a>) =&gt; void): void</p>     <p>订阅任务失败事件，使用callback异步回调。可通过调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentshow10-1">request.agent.show</a>查看错误原因。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.82.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'failed'，表示任务失败，任务失败时触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，发生相关的事件时触发该回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.82.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">progress</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示任务的进度信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.82.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOnTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOnTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOnTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOnTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOnCallback</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task failed.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'failed'</span>, createOnCallback);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2397px;">     <h3 id="onpause11" device-type="phone,2in1,tablet,wearable,tv">on('pause')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onpause11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'pause', callback: (progress: <a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a>) =&gt; void): void</p>     <p>订阅任务暂停事件，使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.83.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'pause'，表示任务已暂停，任务暂停时触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，发生相关的事件时触发该回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.83.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">progress</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示任务的进度信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.83.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOnTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOnTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOnTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOnTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOnCallback</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task pause.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">task</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Task</span>) =&gt; {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pause'</span>, createOnCallback);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-comment">// 等待1秒再执行下一步操作，以防异步乱序</span></li><li>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(),<span class="hljs-number">1000</span>)</li><li>  })</li><li>  task.<span class="hljs-title function_">pause</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2517px;">     <h3 id="onresume11" device-type="phone,2in1,tablet,wearable,tv">on('resume')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onresume11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'resume', callback: (progress: <a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a>) =&gt; void): void</p>     <p>订阅任务恢复事件，使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.84.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'resume'，表示任务恢复，任务恢复时触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，发生相关的事件时触发该回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.84.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">progress</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示任务的进度信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.84.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOnTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOnTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOnTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOnTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOnCallback</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task resume.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">task</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Task</span>) =&gt; {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'resume'</span>, createOnCallback);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-comment">// 等待1秒再执行下一步操作，以防异步乱序</span></li><li>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(),<span class="hljs-number">1000</span>)</li><li>  })</li><li>  task.<span class="hljs-title function_">pause</span>();</li><li>  <span class="hljs-comment">// 等待1秒再执行下一步操作，以防异步乱序</span></li><li>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(),<span class="hljs-number">1000</span>)</li><li>  })</li><li>  task.<span class="hljs-title function_">resume</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2397px;">     <h3 id="onremove11" device-type="phone,2in1,tablet,wearable,tv">on('remove')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onremove11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'remove', callback: (progress: <a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a>) =&gt; void): void</p>     <p>订阅任务移除事件，使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.85.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'remove'，表示任务被移除，任务移除时触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，发生相关的事件时触发该回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.85.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">progress</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示任务的进度信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.85.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOnTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOnTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOnTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOnTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOnCallback</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task remove.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">task</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Task</span>) =&gt; {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'remove'</span>, createOnCallback);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-comment">// 等待1秒再执行下一步操作，以防异步乱序</span></li><li>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(),<span class="hljs-number">1000</span>)</li><li>  })</li><li>  request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">remove</span>(task.<span class="hljs-property">tid</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2198px;">     <h3 id="onresponse12" device-type="phone,2in1,tablet,wearable,tv">on('response')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onresponse12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'response', callback: Callback&lt;HttpResponse&gt;): void</p>     <p>订阅任务响应头，使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'response'，表示任务响应，请求接收到响应时触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenthttpresponse12">HttpResponse</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，发生相关的事件时触发该回调方法，返回任务响应头的数据结构。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.86.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOnTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOnTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOnTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOnTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOnCallback</span> = (<span class="hljs-params">response: request.agent.HttpResponse</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task response.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'response'</span>, createOnCallback);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2126px;">     <h3 id="onfaultoccur20" device-type="phone,2in1,tablet,wearable,tv">on('faultOccur')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onfaultoccur20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'faultOccur', callback: Callback&lt;Faults&gt;): void</p>     <p>订阅任务失败原因，使用callback形式返回结果。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.87.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'faultOccur'，表示任务失败。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentfaults10">Faults</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">发生相关的事件时触发该回调方法，返回任务失败的原因。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.87.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOnTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOnTest.avi"</span>,</li><li>    <span class="hljs-attr">mimeType</span>: <span class="hljs-string">"application/octet-stream"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOnTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOnTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">faultOnCallback</span> = (<span class="hljs-params">faults: request.agent.Faults</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task failed.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'faultOccur'</span>, faultOnCallback);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2126px;">     <h3 id="onwait20" device-type="phone,2in1,tablet,wearable,tv">on('wait')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onwait20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: 'wait', callback: Callback&lt;WaitingReason&gt;): void</p>     <p>订阅任务等待原因，使用callback形式返回结果。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.88.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'wait'，表示任务等待。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentwaitingreason20">WaitingReason</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">发生相关的事件时触发该回调方法，返回任务等待的原因。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.88.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOnTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOnTest.avi"</span>,</li><li>    <span class="hljs-attr">mimeType</span>: <span class="hljs-string">"application/octet-stream"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOnTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOnTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">waitOnCallback</span> = (<span class="hljs-params">reason: request.agent.WaitingReason</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task waiting.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'wait'</span>, waitOnCallback);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2493px;">     <h3 id="offprogress10" device-type="phone,2in1,tablet,wearable,tv">off('progress')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offprogress10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'progress', callback?: (progress: <a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a>) =&gt; void): void</p>     <p>取消订阅任务进度事件。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.89.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>取消订阅的事件类型。</p>          <p>- 取值为'progress'，表示任务进度。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，发生相关的事件时触发该回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.89.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">progress</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示任务的进度信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.89.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOffTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOffTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOffTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOffTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback1</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task progress.'</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback2</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task progress.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, createOffCallback1);</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'progress'</span>, createOffCallback2);</li><li>  <span class="hljs-comment">//表示取消createOffCallback1的订阅</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'progress'</span>, createOffCallback1);</li><li>  <span class="hljs-comment">//表示取消订阅任务进度的所有回调</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'progress'</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2493px;">     <h3 id="offcompleted10" device-type="phone,2in1,tablet,wearable,tv">off('completed')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offcompleted10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'completed', callback?: (progress: <a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a>) =&gt; void): void</p>     <p>取消订阅任务完成事件。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.90.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>取消订阅的事件类型。</p>          <p>- 取值为'completed'，表示任务完成。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，发生相关的事件时触发该回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.90.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">progress</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示任务的进度信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.90.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOffTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOffTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOffTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOffTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback1</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task completed.'</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback2</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task completed.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'completed'</span>, createOffCallback1);</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'completed'</span>, createOffCallback2);</li><li>  <span class="hljs-comment">//表示取消createOffCallback1的订阅</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'completed'</span>, createOffCallback1);</li><li>  <span class="hljs-comment">//表示取消订阅任务完成的所有回调</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'completed'</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2493px;">     <h3 id="offfailed10" device-type="phone,2in1,tablet,wearable,tv">off('failed')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offfailed10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'failed', callback?: (progress: <a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a>) =&gt; void): void</p>     <p>取消订阅任务失败事件。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.91.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>取消订阅的事件类型。</p>          <p>- 取值为'failed'，表示任务失败。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，发生相关的事件时触发该回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.91.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">progress</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示任务的进度信息</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.91.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOffTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOffTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOffTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOffTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback1</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task failed.'</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback2</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task failed.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'failed'</span>, createOffCallback1);</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'failed'</span>, createOffCallback2);</li><li>  <span class="hljs-comment">//表示取消createOffCallback1的订阅</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'failed'</span>, createOffCallback1);</li><li>  <span class="hljs-comment">//表示取消订阅任务失败的所有回调</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'failed'</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2445px;">     <h3 id="offpause11" device-type="phone,2in1,tablet,wearable,tv">off('pause')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offpause11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'pause', callback?: (progress: <a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a>) =&gt; void): void</p>     <p>取消订阅任务暂停事件。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.92.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>取消订阅的事件类型。</p>          <p>- 取值为'pause'，表示任务暂停。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，发生相关的事件时触发该回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.92.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">progress</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示任务的进度信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.92.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOffTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOffTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOffTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOffTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback1</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task pause.'</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback2</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task pause.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pause'</span>, createOffCallback1);</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pause'</span>, createOffCallback2);</li><li>  <span class="hljs-comment">//表示取消createOffCallback1的订阅</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'pause'</span>, createOffCallback1);</li><li>  <span class="hljs-comment">//表示取消订阅任务暂停的所有回调</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'pause'</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2445px;">     <h3 id="offresume11" device-type="phone,2in1,tablet,wearable,tv">off('resume')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offresume11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'resume', callback?: (progress: <a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a>) =&gt; void): void</p>     <p>取消订阅任务恢复事件。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.93.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>取消订阅的事件类型。</p>          <p>- 取值为'resume'，表示任务恢复。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，发生相关的事件时触发该回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.93.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">progress</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示任务的进度信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.93.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOffTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOffTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOffTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOffTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback1</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task resume.'</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback2</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task resume.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'resume'</span>, createOffCallback1);</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'resume'</span>, createOffCallback2);</li><li>  <span class="hljs-comment">//表示取消createOffCallback1的订阅</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'resume'</span>, createOffCallback1);</li><li>  <span class="hljs-comment">//表示取消订阅任务恢复的所有回调</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'resume'</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2445px;">     <h3 id="offremove11" device-type="phone,2in1,tablet,wearable,tv">off('remove')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offremove11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'remove', callback?: (progress: <a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a>) =&gt; void): void</p>     <p>取消订阅任务移除事件。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.94.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>取消订阅的事件类型。</p>          <p>- 取值为'remove'，表示任务被移除。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数，发生相关的事件时触发该回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p>回调函数的参数：</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.94.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">progress</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentprogress10">Progress</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示任务的进度信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.94.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOffTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOffTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOffTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOffTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback1</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task remove.'</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback2</span> = (<span class="hljs-params">progress: request.agent.Progress</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task remove.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'remove'</span>, createOffCallback1);</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'remove'</span>, createOffCallback2);</li><li>  <span class="hljs-comment">//表示取消createOffCallback1的订阅</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'remove'</span>, createOffCallback1);</li><li>  <span class="hljs-comment">//表示取消订阅任务移除的所有回调</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'remove'</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2366px;">     <h3 id="offresponse12" device-type="phone,2in1,tablet,wearable,tv">off('response')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offresponse12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'response', callback?: Callback&lt;HttpResponse&gt;): void</p>     <p>取消订阅任务响应事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.95.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.95.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.95.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.95.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>取消订阅的事件类型。</p>          <p>- 取值为'response'，表示任务响应。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenthttpresponse12">HttpResponse</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消订阅的回调函数。若无此参数，则取消订阅当前类型的所有回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.95.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.95.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOffTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOffTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOffTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOffTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback1</span> = (<span class="hljs-params">progress: request.agent.HttpResponse</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task response.'</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">createOffCallback2</span> = (<span class="hljs-params">progress: request.agent.HttpResponse</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task response.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'response'</span>, createOffCallback1);</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'response'</span>, createOffCallback2);</li><li>  <span class="hljs-comment">//表示取消createOffCallback1的订阅</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'response'</span>, createOffCallback1);</li><li>  <span class="hljs-comment">//表示取消订阅任务移除的所有回调</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'response'</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2342px;">     <h3 id="offfaultoccur20" device-type="phone,2in1,tablet,wearable,tv">off('faultOccur')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offfaultoccur20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'faultOccur', callback?: Callback&lt;Faults&gt;): void</p>     <p>取消订阅任务失败原因相关的事件。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.96.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.96.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.96.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.96.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'faultOccur'，表示任务失败。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentfaults10">Faults</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消订阅的回调函数。若无此参数，则默认取消订阅当前类型的所有回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.96.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.96.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOffTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOffTest.avi"</span>,</li><li>    <span class="hljs-attr">mimeType</span>: <span class="hljs-string">"application/octet-stream"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOffTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOffTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">faultOffCallback1</span> = (<span class="hljs-params">faults: request.agent.Faults</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task failed.'</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">faultOffCallback2</span> = (<span class="hljs-params">faults: request.agent.Faults</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task failed.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'faultOccur'</span>, faultOffCallback1);</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'faultOccur'</span>, faultOffCallback2);</li><li>  <span class="hljs-comment">// 表示取消faultOffCallback1的订阅</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'faultOccur'</span>, faultOffCallback1);</li><li>  <span class="hljs-comment">// 表示取消订阅任务移除的所有回调</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'faultOccur'</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2342px;">     <h3 id="offwait20" device-type="phone,2in1,tablet,wearable,tv">off('wait')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offwait20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: 'wait', callback?: Callback&lt;WaitingReason&gt;): void</p>     <p>取消订阅任务等待原因相关的事件。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.97.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.97.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.97.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.97.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>订阅的事件类型。</p>          <p>- 取值为'wait'，表示任务等待。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentwaitingreason20">WaitingReason</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要取消订阅的回调函数。若无此参数，则默认取消订阅当前类型的所有回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.97.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.97.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"taskOffTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"taskOffTest.avi"</span>,</li><li>    <span class="hljs-attr">mimeType</span>: <span class="hljs-string">"application/octet-stream"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./taskOffTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskOffTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for event listening'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">FOREGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">waitOffCallback1</span> = (<span class="hljs-params">reason: request.agent.WaitingReason</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task waiting.'</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">waitOffCallback2</span> = (<span class="hljs-params">reason: request.agent.WaitingReason</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload task waiting.'</span>);</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'wait'</span>, waitOffCallback1);</li><li>  task.<span class="hljs-title function_">on</span>(<span class="hljs-string">'wait'</span>, waitOffCallback2);</li><li>  <span class="hljs-comment">// 表示取消waitOffCallback1的订阅</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'wait'</span>, waitOffCallback1);</li><li>  <span class="hljs-comment">// 表示取消订阅任务移除的所有回调</span></li><li>  task.<span class="hljs-title function_">off</span>(<span class="hljs-string">'wait'</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a upload task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2199px;">     <h3 id="start10" device-type="phone,2in1,tablet,wearable,tv">start<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="start10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start(callback: AsyncCallback&lt;void&gt;): void</p>     <p>启动一个任务，使用callback异步回调。</p>     <p>以下状态的任务可以被启动：</p>     <ol>      <li>刚被request.agent.create接口创建的任务。</li>      <li>使用request.agent.create接口创建的已经失败或者停止的下载任务。</li>     </ol>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.98.11.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.98.11.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.98.11.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.98.11.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当开启任务成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.98.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.98.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900007</td>         <td class="cellrowborder" width="50%">Operation with wrong task state.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">DOWNLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskStartTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for start the download task'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">BACKGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>,</li><li>  <span class="hljs-attr">data</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">start</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to start the download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in starting a download task.`</span>);</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a download task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2123px;">     <h3 id="start10-1" device-type="phone,2in1,tablet,wearable,tv">start<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="start10-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start(): Promise&lt;void&gt;</p>     <p>启动一个任务，使用Promise异步回调。</p>     <p>以下状态的任务可以被启动：</p>     <ol>      <li>刚被request.agent.create接口创建的任务。</li>      <li>使用request.agent.create接口创建的已经失败或者停止的下载任务。</li>     </ol>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.99.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.99.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900007</td>         <td class="cellrowborder" width="50%">Operation with wrong task state.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">DOWNLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskStartTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for start the download task'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">BACKGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>,</li><li>  <span class="hljs-attr">data</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  task.<span class="hljs-title function_">start</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in starting a download task.`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to start the download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a download task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1948px;">     <h3 id="pause10" device-type="phone,2in1,tablet,wearable,tv">pause<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pause10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pause(callback: AsyncCallback&lt;void&gt;): void</p>     <p>暂停任务，可以暂停正在等待/正在运行/正在重试的任务，已暂停的任务可被<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#resume10">resume</a>恢复。使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.100.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当暂停任务成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.100.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900007</td>         <td class="cellrowborder" width="50%">Operation with wrong task state.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">DOWNLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskPauseTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for pause the download task'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">BACKGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>,</li><li>  <span class="hljs-attr">data</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">task</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Task</span>) =&gt; {</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-comment">// 等待1秒再执行下一步操作，以防异步乱序</span></li><li>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(),<span class="hljs-number">1000</span>)</li><li>  })</li><li>  task.<span class="hljs-title function_">pause</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to pause the download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in pausing a download task. `</span>);</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a download task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1872px;">     <h3 id="pause10-1" device-type="phone,2in1,tablet,wearable,tv">pause<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pause10-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pause(): Promise&lt;void&gt;</p>     <p>暂停任务，可以暂停正在等待/正在运行/正在重试的任务，已暂停的任务可被<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#resume10">resume</a>恢复。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.101.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.101.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.101.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.101.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900007</td>         <td class="cellrowborder" width="50%">Operation with wrong task state.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">DOWNLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskPauseTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for pause the download task'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">BACKGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>,</li><li>  <span class="hljs-attr">data</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">task</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Task</span>) =&gt; {</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-comment">// 等待1秒再执行下一步操作，以防异步乱序</span></li><li>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(),<span class="hljs-number">1000</span>)</li><li>  })</li><li>  task.<span class="hljs-title function_">pause</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in pausing a download task. `</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to pause the download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a download task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2171px;">     <h3 id="resume10" device-type="phone,2in1,tablet,wearable,tv">resume<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resume10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>resume(callback: AsyncCallback&lt;void&gt;): void</p>     <p>重新启动任务，可以恢复被暂停的任务。使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.102.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.102.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.102.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.102.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当重新启动任务成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.102.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.102.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900007</td>         <td class="cellrowborder" width="50%">Operation with wrong task state.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">DOWNLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskResumeTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for resume the download task'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">BACKGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>,</li><li>  <span class="hljs-attr">data</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">task</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Task</span>) =&gt; {</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-comment">// 等待1秒再执行下一步操作，以防异步乱序</span></li><li>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(),<span class="hljs-number">1000</span>)</li><li>  })</li><li>  task.<span class="hljs-title function_">pause</span>();</li><li>  <span class="hljs-comment">// 等待1秒再执行下一步操作，以防异步乱序</span></li><li>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(),<span class="hljs-number">1000</span>)</li><li>  })</li><li>  task.<span class="hljs-title function_">resume</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to resume the download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in resuming a download task. `</span>);</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a download task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2095px;">     <h3 id="resume10-1" device-type="phone,2in1,tablet,wearable,tv">resume<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resume10-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>resume(): Promise&lt;void&gt;</p>     <p>重新启动任务，可以恢复被暂停的任务。使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.103.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.103.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.103.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.103.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900007</td>         <td class="cellrowborder" width="50%">Operation with wrong task state.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">DOWNLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskResumeTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for resume the download task'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">BACKGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>,</li><li>  <span class="hljs-attr">data</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">task</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Task</span>) =&gt; {</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-comment">// 等待1秒再执行下一步操作，以防异步乱序</span></li><li>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(),<span class="hljs-number">1000</span>)</li><li>  })</li><li>  task.<span class="hljs-title function_">pause</span>();</li><li>  <span class="hljs-comment">// 等待1秒再执行下一步操作，以防异步乱序</span></li><li>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(),<span class="hljs-number">1000</span>)</li><li>  })</li><li>  task.<span class="hljs-title function_">resume</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in resuming a download task. `</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to resume the download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a download task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1996px;">     <h3 id="stop10" device-type="phone,2in1,tablet,wearable,tv">stop<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(callback: AsyncCallback&lt;void&gt;): void</p>     <p>停止任务，可以停止正在运行/正在等待/正在重试的任务，已停止的任务可被<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#start10">start</a>恢复。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.104.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当停止任务成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.104.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900007</td>         <td class="cellrowborder" width="50%">Operation with wrong task state.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">DOWNLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskStopTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for stop the download task'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">BACKGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>,</li><li>  <span class="hljs-attr">data</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">task</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Task</span>) =&gt; {</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-comment">// 等待1秒再执行下一步操作，以防异步乱序</span></li><li>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(),<span class="hljs-number">1000</span>)</li><li>  })</li><li>  task.<span class="hljs-title function_">stop</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to stop the download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in stopping a download task. `</span>);</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a download task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1920px;">     <h3 id="stop10-1" device-type="phone,2in1,tablet,wearable,tv">stop<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop10-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(): Promise&lt;void&gt;</p>     <p>停止任务，可以停止正在运行/正在等待/正在重试的任务，已停止的任务可被<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#start10">start</a>恢复。使用Promise异步回调。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.105.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.105.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.105.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.105.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900007</td>         <td class="cellrowborder" width="50%">Operation with wrong task state.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">DOWNLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'taskStopTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for stop the download task'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">BACKGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>,</li><li>  <span class="hljs-attr">data</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">task</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Task</span>) =&gt; {</li><li>  task.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-comment">// 等待1秒再执行下一步操作，以防异步乱序</span></li><li>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {</li><li>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(),<span class="hljs-number">1000</span>)</li><li>  })</li><li>  task.<span class="hljs-title function_">stop</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in stopping a download task. `</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to stop the download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a download task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1639px;">     <h3 id="setmaxspeed18" device-type="phone,2in1,tablet,wearable,tv">setMaxSpeed<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setmaxspeed18" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setMaxSpeed(speed: number): Promise&lt;void&gt;</p>     <p>设置任务每秒能传输的字节数上限。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.106.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">speed</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设置任务每秒能传输的字节数上限，单位为字节（B），最小值为16384字节，同时该值不得低于<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentminspeed20">MinSpeed</a>设置的最低速度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.106.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.106.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.106.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.106.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">DOWNLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  <span class="hljs-comment">// 设置任务速度上限。</span></li><li>  task.<span class="hljs-title function_">setMaxSpeed</span>(<span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in setting the max speed of the task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to set the max speed of the task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>  });</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2550px;">     <h2 id="requestagentcreate10" device-type="phone,2in1,tablet,wearable,tv">request.agent.create<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentcreate10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>create(context: BaseContext, config: Config, callback: AsyncCallback&lt;Task&gt;): void</p>     <p>创建需要上传或下载的任务，并将其排入队列。支持HTTP/HTTPS协议，使用callback异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.107.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.107.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.107.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.107.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">基于应用程序的上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentconfig10">Config</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">上传/下载任务的配置信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttask10">Task</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当创建上传或下载任务成功，err为undefined，data为获取到的Task对象；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.107.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.107.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400001</td>         <td class="cellrowborder" width="50%">Invalid file or file system error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900004</td>         <td class="cellrowborder" width="50%">The application task queue is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900005</td>         <td class="cellrowborder" width="50%">Operation with wrong task mode.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"createTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"createTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./createTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'createTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for create task'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">BACKGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config, <span class="hljs-keyword">async</span> (<span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span>, <span class="hljs-attr">task</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Task</span>) =&gt; {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a download task. result: <span class="hljs-subst">${task.config}</span>`</span>);</li><li>  <span class="hljs-keyword">await</span> task.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-comment">//用户需要手动调用remove从而结束task对象的生命周期</span></li><li>  request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">remove</span>(task.<span class="hljs-property">tid</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2532px;">     <h2 id="requestagentcreate10-1" device-type="phone,2in1,tablet,wearable,tv">request.agent.create<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentcreate10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>create(context: BaseContext, config: Config): Promise&lt;Task&gt;</p>     <p>创建需要上传或下载的任务，并将其排入队列。支持HTTP/HTTPS协议，使用Promise异步回调。</p>     <p><strong>需要权限</strong>：ohos.permission.INTERNET</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>示例中context的获取方式请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#获取uiability的上下文信息" target="_blank">获取UIAbility的上下文信息</a>。</p>      </div></div></div>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.108.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.108.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.108.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.108.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">基于应用程序的上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentconfig10">Config</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">上传/下载任务的配置信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.108.11.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.108.11.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttask10">Task</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回任务配置信息的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.108.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.108.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400001</td>         <td class="cellrowborder" width="50%">Invalid file or file system error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900004</td>         <td class="cellrowborder" width="50%">The application task queue is full.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900005</td>         <td class="cellrowborder" width="50%">Operation with wrong task mode.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">attachments</span>: <span class="hljs-title class_">Array</span>&lt;request.<span class="hljs-property">agent</span>.<span class="hljs-property">FormItem</span>&gt; = [{</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-string">"createTest"</span>,</li><li>  <span class="hljs-attr">value</span>: {</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"createTest.avi"</span>,</li><li>    <span class="hljs-attr">path</span>: <span class="hljs-string">"./createTest.avi"</span>,</li><li>  }</li><li>}];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Config</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://127.0.0.1'</span>, <span class="hljs-comment">// 需要手动将url替换为真实服务器的HTTP协议地址</span></li><li>  <span class="hljs-attr">title</span>: <span class="hljs-string">'createTest'</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'Sample code for create task'</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">BACKGROUND</span>,</li><li>  <span class="hljs-attr">overwrite</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">"PUT"</span>,</li><li>  <span class="hljs-attr">data</span>: attachments,</li><li>  <span class="hljs-attr">saveas</span>: <span class="hljs-string">"./"</span>,</li><li>  <span class="hljs-attr">network</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Network</span>.<span class="hljs-property">CELLULAR</span>,</li><li>  <span class="hljs-attr">metered</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">roaming</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">retry</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">redirect</span>: <span class="hljs-literal">true</span>,</li><li>  <span class="hljs-attr">index</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">begins</span>: <span class="hljs-number">0</span>,</li><li>  <span class="hljs-attr">ends</span>: -<span class="hljs-number">1</span>,</li><li>  <span class="hljs-attr">gauge</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">precise</span>: <span class="hljs-literal">false</span>,</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">"it is a secret"</span></li><li>};</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">create</span>(context, config).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">task</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Task</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a download task. result: <span class="hljs-subst">${task.config}</span>`</span>);</li><li>  <span class="hljs-keyword">await</span> task.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-comment">//用户需要手动调用remove从而结束task对象的生命周期</span></li><li>  request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">remove</span>(task.<span class="hljs-property">tid</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1456px;">     <h2 id="requestagentgettask11" device-type="phone,2in1,tablet,wearable,tv">request.agent.getTask<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentgettask11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getTask(context: BaseContext, id: string, token?: string): Promise&lt;Task&gt;</p>     <p>根据任务id查询任务。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">context</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext">BaseContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">基于应用程序的上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">任务id。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">token</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">任务查询token。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.109.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttask10">Task</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回任务配置信息的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.109.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900006</td>         <td class="cellrowborder" width="50%">Task removed or not found.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext</span></li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">getTask</span>(context, <span class="hljs-string">"123456"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">task: request.agent.Task</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in querying a task. result: <span class="hljs-subst">${task.tid}</span>`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to query a task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1300px;">     <h2 id="requestagentremove10" device-type="phone,2in1,tablet,wearable,tv">request.agent.remove<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentremove10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>remove(id: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>移除属于调用方的指定任务，如果正在处理中，该任务将被迫停止。使用callback异步回调。在调用后任务对象和其回调函数会被释放。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.110.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.110.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.110.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.110.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">任务id。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当移除指定任务成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.110.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.110.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900006</td>         <td class="cellrowborder" width="50%">Task removed or not found.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">"123456"</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in removing a download task.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1330px;">     <h2 id="requestagentremove10-1" device-type="phone,2in1,tablet,wearable,tv">request.agent.remove<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentremove10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>remove(id: string): Promise&lt;void&gt;</p>     <p>移除属于调用方的指定任务，如果正在处理中，该任务将被迫停止。使用Promise异步回调。在调用后任务对象和其回调函数会被释放。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.111.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">任务id。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.111.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.111.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900006</td>         <td class="cellrowborder" width="50%">Task removed or not found.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">"123456"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in removing a download task. `</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to remove a download task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1276px;">     <h2 id="requestagentshow10" device-type="phone,2in1,tablet,wearable,tv">request.agent.show<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentshow10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>show(id: string, callback: AsyncCallback&lt;TaskInfo&gt;): void</p>     <p>根据任务id查询任务的详细信息。使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.112.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.112.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.112.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.112.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">任务id。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttaskinfo10">TaskInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当查询任务操作成功，err为undefined，data为查询到的任务TaskInfo信息；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.112.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.112.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900006</td>         <td class="cellrowborder" width="50%">Task removed or not found.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">show</span>(<span class="hljs-string">"123456"</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, taskInfo: request.agent.TaskInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to show a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in showing a upload task.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1258px;">     <h2 id="requestagentshow10-1" device-type="phone,2in1,tablet,wearable,tv">request.agent.show<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentshow10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>show(id: string): Promise&lt;TaskInfo&gt;</p>     <p>根据任务id查询任务的详细信息。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.113.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">任务id。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.113.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttaskinfo10">TaskInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回任务详细信息TaskInfo的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.113.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900006</td>         <td class="cellrowborder" width="50%">Task removed or not found.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">show</span>(<span class="hljs-string">"123456"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">taskInfo: request.agent.TaskInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in showing a upload task.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to show a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1345px;">     <h2 id="requestagenttouch10" device-type="phone,2in1,tablet,wearable,tv">request.agent.touch<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagenttouch10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>touch(id: string, token: string, callback: AsyncCallback&lt;TaskInfo&gt;): void</p>     <p>根据任务id和token查询任务的详细信息。使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.114.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.114.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.114.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.114.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">任务id。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">token</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">任务查询token。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttaskinfo10">TaskInfo</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当查询任务操作成功，err为undefined，data为查询到的任务TaskInfo信息；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.114.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.114.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900006</td>         <td class="cellrowborder" width="50%">Task removed or not found.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">touch</span>(<span class="hljs-string">"123456"</span>, <span class="hljs-string">"token"</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, taskInfo: request.agent.TaskInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to touch a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in touching a upload task.`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1327px;">     <h2 id="requestagenttouch10-1" device-type="phone,2in1,tablet,wearable,tv">request.agent.touch<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagenttouch10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>touch(id: string, token: string): Promise&lt;TaskInfo&gt;</p>     <p>根据任务id和token查询任务的详细信息。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.115.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">id</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">任务id。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">token</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">任务查询token。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.115.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagenttaskinfo10">TaskInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回任务详细信息TaskInfo的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.115.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900006</td>         <td class="cellrowborder" width="50%">Task removed or not found.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">touch</span>(<span class="hljs-string">"123456"</span>, <span class="hljs-string">"token"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">taskInfo: request.agent.TaskInfo</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in touching a upload task. `</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to touch a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1176px;">     <h2 id="requestagentsearch10" device-type="phone,2in1,tablet,wearable,tv">request.agent.search<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentsearch10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>search(callback: AsyncCallback&lt;Array&lt;string&gt;&gt;): void</p>     <p>根据默认<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentfilter10">Filter</a>过滤条件查找任务id，即查询调用时刻至24小时前的所有任务的任务id。使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.116.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;string&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当根据过滤条件查找任务成功，err为undefined，data为满足条件的任务id；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.116.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Incorrect parameter type. 2. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">search</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to search a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in searching a upload task. `</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1317px;">     <h2 id="requestagentsearch10-1" device-type="phone,2in1,tablet,wearable,tv">request.agent.search<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentsearch10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>search(filter: Filter, callback: AsyncCallback&lt;Array&lt;string&gt;&gt;): void</p>     <p>根据<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentfilter10">Filter</a>过滤条件查找任务id。使用callback异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.117.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.117.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.117.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.117.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">filter</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentfilter10">Filter</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">过滤条件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;string&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当根据过滤条件查找任务成功，err为undefined，data为满足条件的任务id；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.117.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.117.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Incorrect parameter type. 2. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">filter</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Filter</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">BACKGROUND</span></li><li>}</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">search</span>(filter, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-keyword">if</span> (err) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to search a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in searching a upload task. `</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1299px;">     <h2 id="requestagentsearch10-2" device-type="phone,2in1,tablet,wearable,tv">request.agent.search<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentsearch10-2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>search(filter?: Filter): Promise&lt;Array&lt;string&gt;&gt;</p>     <p>根据<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentfilter10">Filter</a>过滤条件查找任务id。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.118.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.118.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.118.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.118.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">filter</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentfilter10">Filter</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">过滤条件。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.118.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.118.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;string&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回满足条件任务id的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.118.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.118.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Incorrect parameter type. 2. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">filter</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Filter</span> = {</li><li>  <span class="hljs-attr">action</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Action</span>.<span class="hljs-property">UPLOAD</span>,</li><li>  <span class="hljs-attr">mode</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">Mode</span>.<span class="hljs-property">BACKGROUND</span></li><li>}</li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">search</span>(filter).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in searching a upload task. `</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to search a upload task, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1347px;">     <h2 id="requestagentcreategroup15" device-type="phone,2in1,tablet,wearable,tv">request.agent.createGroup<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentcreategroup15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createGroup(config: GroupConfig): Promise&lt;string&gt;</p>     <p>根据<a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentgroupconfig15">GroupConfig</a>分组条件创建分组，并返回分组id。使用Promise异步回调。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.119.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.119.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.119.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.119.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">config</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-request#requestagentgroupconfig15">GroupConfig<sup>15+</sup></a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载任务分组选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.119.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.119.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回创建完成的分组id。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.119.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.119.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 准备分组配置选项 GroupConfig 对象。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">config</span>: request.<span class="hljs-property">agent</span>.<span class="hljs-property">GroupConfig</span> = {</li><li>    <span class="hljs-attr">notification</span>: {},</li><li>};</li><li><span class="hljs-comment">// 调用 createGroup 接口创建分组。</span></li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">createGroup</span>(config).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">gid: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in creating a download task group. `</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create a download group, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1636px;">     <h2 id="requestagentattachgroup15" device-type="phone,2in1,tablet,wearable,tv">request.agent.attachGroup<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentattachgroup15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>attachGroup(gid: string, tids: string[]): Promise&lt;void&gt;</p>     <p>向指定分组id中绑定多个下载任务id。使用Promise异步回调。</p>     <p>如果任意一个任务id不满足添加条件，则所有列表中的任务都不会添加到分组中。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.120.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.120.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.120.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.120.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">gid</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标分组id。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">tids</td>         <td class="cellrowborder" width="25%">string[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">待绑定的任务id列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.120.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.120.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.120.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.120.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900005</td>         <td class="cellrowborder" width="50%">Operation with wrong task mode.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900006</td>         <td class="cellrowborder" width="50%">Task removed or not found.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900007</td>         <td class="cellrowborder" width="50%">Operation with wrong task state.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900008</td>         <td class="cellrowborder" width="50%">Group deleted or not found.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 准备分组id和任务id列表。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">groupId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"123456789"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskIds</span>: <span class="hljs-built_in">string</span>[] = [<span class="hljs-string">"1111"</span>, <span class="hljs-string">"2222"</span>, <span class="hljs-string">"3333"</span>, <span class="hljs-string">"4444"</span>];</li><li><span class="hljs-comment">// 调用 attachGroup 接口向分组中添加任务id列表。</span></li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">attachGroup</span>(groupId, taskIds).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in attaching tasks to the download task group.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to attach tasks to the download group, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1426px;">     <h2 id="requestagentdeletegroup15" device-type="phone,2in1,tablet,wearable,tv">request.agent.deleteGroup<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestagentdeletegroup15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteGroup(gid: string): Promise&lt;void&gt;</p>     <p>移除指定分组，后续不能再往该分组中添加任务id。使用Promise异步回调。</p>     <p>当分组中的所有任务处于完成、失败或移除状态，并且分组被移除时，显示该分组的完成或失败通知。</p>     <p><strong>系统能力</strong>：SystemCapability.Request.FileTransferAgent</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.121.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.121.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.121.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.121.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">gid</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标分组id。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.121.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.121.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-request">上传下载错误码</a>与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.121.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.121.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Missing mandatory parameters. 2. Incorrect parameter type. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">13400003</td>         <td class="cellrowborder" width="50%">Task service ability error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">21900008</td>         <td class="cellrowborder" width="50%">Group deleted or not found.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-obo-c106="" class="highlight-div"><div _ngcontent-obo-c106="" class="highlight-div-header"><div _ngcontent-obo-c106="" class="highlight-div-header-left"><div _ngcontent-obo-c106="" class="handle-button expand-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-obo-c106="" class="highlight-div-header-right"><div _ngcontent-obo-c106="" class="handle-button ai-button"></div><div _ngcontent-obo-c106="" class="handle-button line-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-obo-c106="" class="handle-button theme-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-obo-c106="" class="handle-button copy-button"><div _ngcontent-obo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-obo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 准备分组id。</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">groupId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"123456789"</span>;</li><li>
</li><li><span class="hljs-comment">// 调用 deleteGroup 接口移除分组。</span></li><li>request.<span class="hljs-property">agent</span>.<span class="hljs-title function_">deleteGroup</span>(groupId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in deleting the download task group.`</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to delete the download group, Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>   </div>   <div></div></div>