<h1 _ngcontent-dqy-c119="" class="doc-title ng-star-inserted" title="@ohos.secureElement (安全单元的通道管理)"> @ohos.secureElement (安全单元的通道管理) </h1>

<div _ngcontent-dqy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块主要用于操作及管理安全单元（SecureElement，简称SE），电子设备上可能存在的安全单元有eSE（Embedded SE）和SIM卡。文档中出现的SE服务为SEService实例，参见<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#omapicreateservice12">createService</a>。</p> <p>对于文档中出现以下类型说明：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.3.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.3.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Reader</td> <td class="cellrowborder" width="50%">此类的实例表示该设备支持的SE，如果支持eSE、SIM和SIM2，则返回3个实例。</td> </tr> <tr><td class="cellrowborder" width="50%">Session</td> <td class="cellrowborder" width="50%">此类的实例表示在某个SE Reader实例上创建连接会话。</td> </tr> <tr><td class="cellrowborder" width="50%">Channel</td> <td class="cellrowborder" width="50%">此类的实例表示在某个Session实例上创建通道，可能为基础通道或逻辑通道。</td> </tr>  </tbody></table></div> </div> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>本模块首批接口从API version 10开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>  </div></div></div>  <div class="tiledSection"><h2 id="导入模块" device-type="phone"><strong>导入模块</strong><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="servicestate" device-type="phone">ServiceState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="servicestate" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>定义不同的SE服务状态值。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">DISCONNECTED</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">SE服务状态已断开。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CONNECTED</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">SE服务状态已连接。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="omapinewseservicedeprecated" device-type="phone">omapi.newSEService<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="omapinewseservicedeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>newSEService(type: 'serviceState', callback: Callback&lt;ServiceState&gt;): SEService</p> <p>建立一个可用于连接到系统中所有可用SE的新连接（服务）。连接过程较为耗时，所以此方法仅提供异步方式进行的。使用callback异步回调。</p> <p>仅当指定的回调或者当<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#seserviceisconnected">isConnected</a>方法返回true时，该返回SEService对象是可用的。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>从 API version 10 开始支持，从 API version 12 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#omapicreateservice12">createService</a>替代。</p>  </div></div></div> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="25%"><strong>参数名</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="25%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="25%"><strong>必填</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="25%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">固定填'serviceState' 。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#servicestate">ServiceState</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">返回SE服务状态的回调 。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">SEService</td> <td class="cellrowborder" width="50%">SE服务实例。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seService : omapi.<span class="hljs-property">SEService</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 获取 service</span></li><li>    <span class="hljs-keyword">try</span> {</li><li>        seService = omapi.<span class="hljs-title function_">newSEService</span>(<span class="hljs-string">"serviceState"</span>, <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> {</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'se service state = %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(state));</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'newSEService error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (seService == <span class="hljs-literal">undefined</span> || !seService.<span class="hljs-title function_">isConnected</span>()) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'secure element service disconnected.'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="omapicreateservice12" device-type="phone">omapi.createService<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="omapicreateservice12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>createService(): Promise&lt;SEService&gt;;</p> <p>建立一个可用于连接到系统中所有可用SE的新连接（服务）。连接过程较为耗时，所以此方法仅提供异步方式。使用Promise异步回调。</p> <p>仅当<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#seserviceisconnected">isConnected</a>方法返回true时，该返回SEService对象是可用的。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#seservice">SEService</a>&gt;</td> <td class="cellrowborder" width="50%">以Promise形式异步返回可用的SE服务实例。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seService : omapi.<span class="hljs-property">SEService</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    omapi.<span class="hljs-title function_">createService</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>        seService = data;</li><li>        <span class="hljs-keyword">if</span> (seService == <span class="hljs-literal">undefined</span> || !seService.<span class="hljs-title function_">isConnected</span>()) {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seservice state disconnected'</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seservice state connected'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>)=&gt;</span> {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'createService error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    });</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="omapion18" device-type="phone">omapi.on<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="omapion18" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>on(type: 'stateChanged', callback: Callback&lt;ServiceState&gt;): void;</p> <p>注册监听服务状态变化事件。</p> <p>调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#omapinewseservicedeprecated">omapi.newSEService</a>或<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#omapicreateservice12">omapi.createService</a>创建服务成功后再用on接口注册回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%"><strong>参数名</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%"><strong>必填</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">订阅监听的事件类型，固定填'stateChanged' 。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#servicestate">ServiceState</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">返回SE服务状态的回调 。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>示例请参见<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#omapioff18">off</a>接口的示例。</p> </div>  <div class="tiledSection"><h2 id="omapioff18" device-type="phone">omapi.off<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="omapioff18" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>off(type: 'stateChanged', callback?: Callback&lt;ServiceState&gt;): void;</p> <p>取消订阅服务状态更改事件。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.1" width="25%"><strong>参数名</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.2" width="25%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.3" width="25%"><strong>必填</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.4" width="25%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">取消订阅监听的事件类型，固定填'stateChanged' 。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#servicestate">ServiceState</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">返回SE服务状态的回调 。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">seService</span>: omapi.<span class="hljs-property">SEService</span>;</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">seStateOnCb</span>(<span class="hljs-params">data: omapi.ServiceState</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"omapi.on ServiceState: "</span>, data);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">seStateOffCb</span>(<span class="hljs-params">data: omapi.ServiceState</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"omapi.off ServiceState: "</span>, data);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span>{</li><li>        omapi.<span class="hljs-title function_">createService</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>            seService = data;</li><li>            <span class="hljs-keyword">if</span> (seService == <span class="hljs-literal">undefined</span> || !seService.<span class="hljs-title function_">isConnected</span>()) {</li><li>                hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seservice state disconnected'</span>);</li><li>                <span class="hljs-keyword">return</span>;</li><li>            }</li><li>            hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seservice state connected'</span>);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>)=&gt;</span> {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'createService error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>        });</li><li>        omapi.<span class="hljs-title function_">on</span>(<span class="hljs-string">'stateChanged'</span>, seStateOnCb);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>        <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`omapi on error catch Code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, `</span> + <span class="hljs-string">`message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>        }</li><li>    }</li><li>    <span class="hljs-keyword">try</span>{</li><li>        omapi.<span class="hljs-title function_">off</span>(<span class="hljs-string">'stateChanged'</span>, seStateOffCb);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>        <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`omapi off error catch Code: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, `</span> + <span class="hljs-string">`message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>        }</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="seservice" device-type="phone">SEService<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="seservice" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>SEService表示可用于连接到系统中所有可用SE的连接（服务），通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#omapicreateservice12">createService</a>获取SEService实例。</p> </div>  <div class="tiledSection"><h3 id="seservicegetreaders" device-type="phone" class="firsth2">SEService.getReaders<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="seservicegetreaders" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>getReaders(): Reader[]</p> <p>返回可用SE Reader的数组，包含该设备上支持的所有的安全单元。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.6.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#reader">Reader</a>[]</td> <td class="cellrowborder" width="50%">返回可用Reader对象数组。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seService : omapi.<span class="hljs-property">SEService</span>;</li><li><span class="hljs-keyword">let</span> seReaders : omapi.<span class="hljs-property">Reader</span>[];</li><li>
</li><li><span class="hljs-comment">// 在使用seService之前，需要对seService进行初始化</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 获取readers</span></li><li>    <span class="hljs-keyword">try</span> {</li><li>        seReaders = seService.<span class="hljs-title function_">getReaders</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'getReaders error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (seReaders == <span class="hljs-literal">undefined</span> || seReaders.<span class="hljs-property">length</span> == <span class="hljs-number">0</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'no valid reader found.'</span>);</li><li>        <span class="hljs-comment">// 释放SeService资源</span></li><li>        seService.<span class="hljs-title function_">shutdown</span>();</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="seserviceisconnected" device-type="phone">SEService.isConnected<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="seserviceisconnected" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>isConnected(): boolean</p> <p>检查SE服务是否已连接。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.6.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">true: SE服务状态已连接，false: SE服务状态已断开。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.13.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="JS prettyprint linenums hljs language-JS" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seService : omapi.<span class="hljs-property">SEService</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    omapi.<span class="hljs-title function_">createService</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>        seService = data;</li><li>        <span class="hljs-keyword">if</span> (seService == <span class="hljs-literal">undefined</span> || !seService.<span class="hljs-title function_">isConnected</span>()) {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seservice state disconnected'</span>);</li><li>            <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seservice state connected'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>)=&gt;</span> {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'createService error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    });</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="seserviceshutdown" device-type="phone">SEService.shutdown<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="seserviceshutdown" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>shutdown(): void</p> <p>释放该Service分配的所有SE资源。此后<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#seserviceisconnected">isConnected</a>将返回false。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seService : omapi.<span class="hljs-property">SEService</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seService之前，需要对seService进行初始化</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    seService.<span class="hljs-title function_">shutdown</span>();</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'shutdown error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="seservicegetversion" device-type="phone">SEService.getVersion<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="seservicegetversion" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>getVersion(): string</p> <p>返回此实现所基于的Open Mobile API规范的版本号。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.6.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">string</td> <td class="cellrowborder" width="50%">OMA版本号（例如，“3.3”表示Open Mobile API规范版本3.3）</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="JS prettyprint linenums hljs language-JS" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seService : omapi.<span class="hljs-property">SEService</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seService之前，需要对seService进行初始化</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> version = seService.<span class="hljs-title function_">getVersion</span>();</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'version %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(version));</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'getVersion error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="reader" device-type="phone">Reader<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="reader" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>Reader的实例表示该设备支持的SE，如果支持eSE、SIM和SIM2，则返回3个实例。通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#seservicegetreaders">SEService.getReaders</a>获取Reader实例。</p> </div>  <div class="tiledSection"><h3 id="readergetname" device-type="phone" class="firsth2">Reader.getName<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readergetname" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>getName(): string</p> <p>返回此Reader的名称。如果此读卡器是SIM Reader，则其名称必须为“SIM”。如果此读卡器是SIM2 Reader，则其名称必须为“SIM2”。如果读卡器是eSE，则其名称须为“eSE”。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.6.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">string</td> <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#reader">Reader</a>名称。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-nfc">NFC错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seReaders : omapi.<span class="hljs-property">Reader</span>[];</li><li>
</li><li><span class="hljs-comment">// 在使用seReaders之前，需要对seReaders进行初始化</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> reader = seReaders[<span class="hljs-number">0</span>]; <span class="hljs-comment">// 将其更改为所选的reader：eSE、SIM、SIM2</span></li><li>    <span class="hljs-keyword">let</span> name = reader.<span class="hljs-title function_">getName</span>();</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'name %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(name));</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'getName error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="readerissecureelementpresent" device-type="phone">Reader.isSecureElementPresent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readerissecureelementpresent" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>isSecureElementPresent(): boolean</p> <p>检查当前Reader所对应的安全单元是否可用。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">true: 安全单元可用， false: 安全单元不可用。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, service state exception.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seReaders : omapi.<span class="hljs-property">Reader</span>[];</li><li>
</li><li><span class="hljs-comment">// 在使用seReaders之前，需要对seReaders进行初始化</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> reader = seReaders[<span class="hljs-number">0</span>]; <span class="hljs-comment">// 将其更改为所选的reader：eSE、SIM、SIM2</span></li><li>    <span class="hljs-keyword">let</span> isPresent = reader.<span class="hljs-title function_">isSecureElementPresent</span>();</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'isPresent %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(isPresent));</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'isSecureElementPresent error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="readeropensession" device-type="phone">Reader.openSession<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readeropensession" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p> openSession(): Session</p> <p>在SE Reader实例上创建连接会话，返回Session实例。在一个Reader上可能同时打开多个会话。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.6.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#session">Session</a></td> <td class="cellrowborder" width="50%">连接会话Session实例。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, service state exception.</td> </tr> <tr><td class="cellrowborder" width="50%">3300104</td> <td class="cellrowborder" width="50%">IOError, there is a communication problem to the reader or the SE.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seReaders : omapi.<span class="hljs-property">Reader</span>[];</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seReaders之前，需要对seReaders进行初始化</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> reader = seReaders[<span class="hljs-number">0</span>]; <span class="hljs-comment">// 将其更改为所选的reader：eSE、SIM、SIM2</span></li><li>        seSession = reader.<span class="hljs-title function_">openSession</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openSession error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (seSession == <span class="hljs-literal">undefined</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seSession invalid.'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="readerclosesessions" device-type="phone">Reader.closeSessions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readerclosesessions" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p> closeSessions(): void</p> <p>关闭在此Reader上打开的所有Session。所有这些Session打开的所有Channel都将关闭。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.7.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, service state exception.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seReaders : omapi.<span class="hljs-property">Reader</span>[];</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li><span class="hljs-keyword">let</span> reader : omapi.<span class="hljs-property">Reader</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seReaders之前，需要对seReaders进行初始化</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>        reader = seReaders[<span class="hljs-number">0</span>]; <span class="hljs-comment">// 将其更改为所选的reader：eSE、SIM、SIM2</span></li><li>        seSession = reader.<span class="hljs-title function_">openSession</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openSession error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (seSession == <span class="hljs-literal">undefined</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seSession invalid.'</span>);</li><li>        <span class="hljs-comment">// 释放SeService资源</span></li><li>        seService.<span class="hljs-title function_">shutdown</span>();</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">try</span> {</li><li>        reader.<span class="hljs-title function_">closeSessions</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'closeSessions error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="session" device-type="phone">Session<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="session" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>Session的实例表示在某个SE Reader实例上创建连接会话。通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#readeropensession">Reader.openSession</a>获取Session实例。</p> </div>  <div class="tiledSection"><h3 id="sessiongetreader" device-type="phone" class="firsth2">Session.getReader<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sessiongetreader" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>getReader(): Reader</p> <p>获取提供此Session的Reader实例。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.6.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.22.6.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#reader">Reader</a></td> <td class="cellrowborder" width="50%">返回此Session的Reader实例。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seReaders : omapi.<span class="hljs-property">Reader</span>[];</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li><span class="hljs-keyword">let</span> reader : omapi.<span class="hljs-property">Reader</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seReaders之前，需要对seReaders进行初始化</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>        reader = seReaders[<span class="hljs-number">0</span>]; <span class="hljs-comment">// 将其更改为所选的reader：eSE、SIM、SIM2</span></li><li>        seSession = reader.<span class="hljs-title function_">openSession</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openSession error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (seSession == <span class="hljs-literal">undefined</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seSession invalid.'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-keyword">let</span> sessionReader = seSession.<span class="hljs-title function_">getReader</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'getReader error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="sessiongetatr" device-type="phone">Session.getATR<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sessiongetatr" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>getATR(): number[]</p> <p>获取该SE的ATR。如果该SE的ATR不可用，则应返回空数组。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.6.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.23.6.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">number[]</td> <td class="cellrowborder" width="50%">返回SE的ATR，SE的ATR不可用时，返回空的数组。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, service state exception.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seSession之前，需要对seSession进行初始化</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> atr = seSession.<span class="hljs-title function_">getATR</span>();</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'atr %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(atr));</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'getATR error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="sessionclose" device-type="phone">Session.close<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sessionclose" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>close(): void</p> <p>关闭与SE的当前会话连接。这将关闭此Session打开的所有Channel。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, service state exception.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seSession之前，需要对seSession进行初始化</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    seSession.<span class="hljs-title function_">close</span>();</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'close error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="session-isclosed" device-type="phone">Session. isClosed<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="session-isclosed" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>isClosed(): boolean</p> <p>检查Session是否关闭。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.6.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">true：Session状态已关闭，false：Session是打开的。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="Js prettyprint linenums hljs language-Js" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seSession之前，需要对seSession进行初始化</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> isClosed = seSession.<span class="hljs-title function_">isClosed</span>();</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'isClosed %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(isClosed));</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'isClosed error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="sessionclosechannels" device-type="phone">Session.closeChannels<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sessionclosechannels" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>closeChannels(): void</p> <p>关闭此Session上打开的所有Channel。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, service state exception.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seSession之前，需要对seSession进行初始化</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    seSession.<span class="hljs-title function_">closeChannels</span>();</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'closeChannels error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="sessionopenbasicchannel" device-type="phone">Session.openBasicChannel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sessionopenbasicchannel" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>openBasicChannel(aid: number[]): Promise&lt;Channel&gt;</p> <p>打开基础通道，参考[ISO 7816-4]协议，返回基础Channel实例对象。SE不能提供基础Channel或应用程序没有访问SE的权限时，返回null。使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.1" width="25%"><strong>参数名</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.2" width="25%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.3" width="25%"><strong>必填</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.5.1.4" width="25%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">aid</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">在此Channel上选择的Applet的AID或如果没有Applet被选择时空的数组。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.27.8.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#channel">Channel</a>&gt;</td> <td class="cellrowborder" width="50%">以Promise形式异步返回可用的基础Channel对象实例。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.27.11.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, an attempt is made to use an SE session that has been closed.</td> </tr> <tr><td class="cellrowborder" width="50%">3300102</td> <td class="cellrowborder" width="50%">NoSuchElementError, the AID on the SE is not available or cannot be selected.</td> </tr> <tr><td class="cellrowborder" width="50%">3300103</td> <td class="cellrowborder" width="50%">SecurityError, the calling application cannot be granted access to this AID or the default applet on this session.</td> </tr> <tr><td class="cellrowborder" width="50%">3300104</td> <td class="cellrowborder" width="50%">IOError, there is a communication problem to the reader or the SE.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li><span class="hljs-keyword">let</span> aidArray : number[] = [<span class="hljs-number">0xA0</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x10</span>, <span class="hljs-number">0x10</span>];</li><li>
</li><li><span class="hljs-comment">// 在使用seSession之前，需要对seSession进行初始化</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">// 改为在此channel上选择的App的aid</span></li><li>        seSession.<span class="hljs-title function_">openBasicChannel</span>(aidArray).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>            seChannel = data;</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>)=&gt;</span> {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openBasicChannel error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (exception) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openBasicChannel exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (seChannel == <span class="hljs-literal">undefined</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seChannel invalid.'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="sessionopenbasicchannel-1" device-type="phone">Session.openBasicChannel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sessionopenbasicchannel-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p> openBasicChannel(aid: number[], callback: AsyncCallback&lt;Channel&gt;): void</p> <p>打开基础通道，参考[ISO 7816-4]协议，返回基础Channel实例对象。SE不能提供基础Channel或应用程序没有访问SE的权限时，返回null。使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.1" width="25%"><strong>参数名</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.2" width="25%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.3" width="25%"><strong>必填</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.4" width="25%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">aid</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">在此Channel上选择的Applet的AID或如果没有Applet被选择时空的数组。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#channel">Channel</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">以callback形式异步返回可用的基础Channel对象实例。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, an attempt is made to use an SE session that has been closed.</td> </tr> <tr><td class="cellrowborder" width="50%">3300102</td> <td class="cellrowborder" width="50%">NoSuchElementError, the AID on the SE is not available or cannot be selected.</td> </tr> <tr><td class="cellrowborder" width="50%">3300103</td> <td class="cellrowborder" width="50%">SecurityError, the calling application cannot be granted access to this AID or the default applet on this session.</td> </tr> <tr><td class="cellrowborder" width="50%">3300104</td> <td class="cellrowborder" width="50%">IOError, there is a communication problem to the reader or the SE.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li><span class="hljs-keyword">let</span> aidArray : number[] = [<span class="hljs-number">0xA0</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x10</span>, <span class="hljs-number">0x10</span>];</li><li>
</li><li><span class="hljs-comment">// 在使用seSession之前，需要对seSession进行初始化</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">// 改为在此channel上选择的App的aid</span></li><li>        seSession.<span class="hljs-title function_">openBasicChannel</span>(aidArray, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (error) {</li><li>                hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openBasicChannel error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                seChannel = data;</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (exception) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openBasicChannel exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (seChannel == <span class="hljs-literal">undefined</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seChannel invalid.'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="sessionopenbasicchannel-2" device-type="phone">Session.openBasicChannel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sessionopenbasicchannel-2" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>openBasicChannel(aid: number[], p2: number): Promise&lt;Channel&gt;</p> <p>打开基础通道，参考[ISO 7816-4]协议，返回基础Channel实例对象。SE不能提供基础Channel或应用程序没有访问SE的权限时，返回null。使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.1" width="25%"><strong>参数名</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.2" width="25%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.3" width="25%"><strong>必填</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.29.6.1.5.1.4" width="25%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">aid</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">在此Channel上选择的Applet的AID或如果没有Applet被选择时空的数组。</td> </tr> <tr><td class="cellrowborder" width="25%">p2</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">在该Channel上执行的SELECT APDU的P2参数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.8.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.29.8.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#channel">Channel</a>&gt;</td> <td class="cellrowborder" width="50%">以Promise形式异步返回可用的基础Channel对象实例。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.29.11.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, an attempt is made to use an SE session that has been closed.</td> </tr> <tr><td class="cellrowborder" width="50%">3300102</td> <td class="cellrowborder" width="50%">NoSuchElementError, the AID on the SE is not available or cannot be selected.</td> </tr> <tr><td class="cellrowborder" width="50%">3300103</td> <td class="cellrowborder" width="50%">SecurityError, the calling application cannot be granted access to this AID or the default applet on this session.</td> </tr> <tr><td class="cellrowborder" width="50%">3300104</td> <td class="cellrowborder" width="50%">IOError, there is a communication problem to the reader or the SE.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li><span class="hljs-keyword">let</span> aidArray : number[] = [<span class="hljs-number">0xA0</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x10</span>, <span class="hljs-number">0x10</span>];</li><li><span class="hljs-keyword">let</span> p2 : number = <span class="hljs-number">0x00</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seSession之前，需要对seSession进行初始化</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">// 改为在此channel上选择的App的aid</span></li><li>        seSession.<span class="hljs-title function_">openBasicChannel</span>(aidArray, p2).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>            seChannel = data;</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>)=&gt;</span> {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openBasicChannel error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (exception) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openBasicChannel exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (seChannel == <span class="hljs-literal">undefined</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seChannel invalid.'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="sessionopenbasicchannel-3" device-type="phone">Session.openBasicChannel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sessionopenbasicchannel-3" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>openBasicChannel(aid: number[], p2:number, callback: AsyncCallback&lt;Channel&gt;): void</p> <p>打开基础通道，参考[ISO 7816-4]协议，返回基础Channel实例对象。SE不能提供基础Channel或应用程序没有访问SE的权限时，返回null。使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.1" width="25%"><strong>参数名</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.2" width="25%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.3" width="25%"><strong>必填</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.5.1.4" width="25%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">aid</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">在此Channel上选择的Applet的AID或如果没有Applet被选择时空的数组。</td> </tr> <tr><td class="cellrowborder" width="25%">p2</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">此Channel上执行SELECT APDU命令的P2参数。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#channel">Channel</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">以callback形式异步返回可用的基础Channel对象实例。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, an attempt is made to use an SE session that has been closed.</td> </tr> <tr><td class="cellrowborder" width="50%">3300102</td> <td class="cellrowborder" width="50%">NoSuchElementError, the AID on the SE is not available or cannot be selected.</td> </tr> <tr><td class="cellrowborder" width="50%">3300103</td> <td class="cellrowborder" width="50%">SecurityError, the calling application cannot be granted access to this AID or the default applet on this session.</td> </tr> <tr><td class="cellrowborder" width="50%">3300104</td> <td class="cellrowborder" width="50%">IOError, there is a communication problem to the reader or the SE.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li><span class="hljs-keyword">let</span> aidArray : number[] = [<span class="hljs-number">0xA0</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x10</span>, <span class="hljs-number">0x10</span>];</li><li><span class="hljs-keyword">let</span> p2 : number = <span class="hljs-number">0x00</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seSession之前，需要对seSession进行初始化</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">// 改为在此channel上选择的App的aid</span></li><li>        seSession.<span class="hljs-title function_">openBasicChannel</span>(aidArray, p2, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (error) {</li><li>                hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openBasicChannel error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                seChannel = data;</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (exception) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openBasicChannel exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (seChannel == <span class="hljs-literal">undefined</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seChannel invalid.'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="sessionopenlogicalchannel" device-type="phone">Session.openLogicalChannel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sessionopenlogicalchannel" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>openLogicalChannel(aid: number[]): Promise&lt;Channel&gt;</p> <p>打开逻辑通道，参考[ISO 7816-4]协议，返回逻辑Channel实例对象。SE不能提供逻辑Channel或应用程序没有访问SE的权限时，返回null。使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.1" width="25%"><strong>参数名</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.2" width="25%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.3" width="25%"><strong>必填</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.4" width="25%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">aid</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">在此Channel上选择的Applet的AID或如果没有Applet被选择时空的数组。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.8.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#channel">Channel</a>&gt;</td> <td class="cellrowborder" width="50%">以Promise形式异步返回可用的逻辑Channel对象实例。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, an attempt is made to use an SE session that has been closed.</td> </tr> <tr><td class="cellrowborder" width="50%">3300102</td> <td class="cellrowborder" width="50%">NoSuchElementError, the AID on the SE is not available or cannot be selected or a logical channel is already open to a non-multi-selectable applet.</td> </tr> <tr><td class="cellrowborder" width="50%">3300103</td> <td class="cellrowborder" width="50%">SecurityError, the calling application cannot be granted access to this AID or the default applet on this session.</td> </tr> <tr><td class="cellrowborder" width="50%">3300104</td> <td class="cellrowborder" width="50%">IOError, there is a communication problem to the reader or the SE.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li><span class="hljs-keyword">let</span> aidArray : number[] = [<span class="hljs-number">0xA0</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x10</span>, <span class="hljs-number">0x10</span>];</li><li>
</li><li><span class="hljs-comment">// 在使用seSession之前，需要对seSession进行初始化</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">// 改为在此channel上选择的App的aid</span></li><li>        seSession.<span class="hljs-title function_">openLogicalChannel</span>(aidArray).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>            seChannel = data;</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>)=&gt;</span> {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openLogicalChannel error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (exception) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openLogicalChannel exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (seChannel == <span class="hljs-literal">undefined</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seChannel invalid.'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="sessionopenlogicalchannel-1" device-type="phone">Session.openLogicalChannel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sessionopenlogicalchannel-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p> openLogicalChannel(aid: number[], callback: AsyncCallback&lt;Channel&gt;): void</p> <p>打开逻辑通道，参考[ISO 7816-4]协议，返回逻辑Channel实例对象。SE不能提供逻辑Channel或应用程序没有访问SE的权限时，返回null。使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.1" width="25%"><strong>参数名</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.2" width="25%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.3" width="25%"><strong>必填</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.4" width="25%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">aid</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">在此Channel上选择的Applet的AID或如果没有Applet被选择时空的数组。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#channel">Channel</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">以callback形式异步返回可用的逻辑Channel对象实例。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, an attempt is made to use an SE session that has been closed.</td> </tr> <tr><td class="cellrowborder" width="50%">3300102</td> <td class="cellrowborder" width="50%">NoSuchElementError, the AID on the SE is not available or cannot be selected or a logical channel is already open to a non-multi-selectable applet.</td> </tr> <tr><td class="cellrowborder" width="50%">3300103</td> <td class="cellrowborder" width="50%">SecurityError, the calling application cannot be granted access to this AID or the default applet on this session.</td> </tr> <tr><td class="cellrowborder" width="50%">3300104</td> <td class="cellrowborder" width="50%">IOError, there is a communication problem to the reader or the SE.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li><span class="hljs-keyword">let</span> aidArray : number[] = [<span class="hljs-number">0xA0</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x10</span>, <span class="hljs-number">0x10</span>];</li><li>
</li><li><span class="hljs-comment">// 在使用seSession之前，需要对seSession进行初始化</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">// 改为在此channel上选择的App的aid</span></li><li>        seSession.<span class="hljs-title function_">openLogicalChannel</span>(aidArray, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (error) {</li><li>                hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openLogicalChannel error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                seChannel = data;</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (exception) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openLogicalChannel exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (seChannel == <span class="hljs-literal">undefined</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seChannel invalid.'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="sessionopenlogicalchannel-2" device-type="phone">Session.openLogicalChannel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sessionopenlogicalchannel-2" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>openLogicalChannel(aid: number[], p2: number): Promise&lt;Channel&gt;</p> <p>打开逻辑通道，参考[ISO 7816-4]协议，返回逻辑Channel实例对象。SE不能提供逻辑Channel或应用程序没有访问SE的权限时，返回null。使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.1" width="25%"><strong>参数名</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.2" width="25%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.3" width="25%"><strong>必填</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.4" width="25%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">aid</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">在此Channel上选择的Applet的AID或如果没有Applet被选择时空的数组。</td> </tr> <tr><td class="cellrowborder" width="25%">p2</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">此Channel上执行SELECT APDU命令的P2参数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.8.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#channel">Channel</a>&gt;</td> <td class="cellrowborder" width="50%">以Promise形式异步返回可用的逻辑Channel实例对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, an attempt is made to use an SE session that has been closed.</td> </tr> <tr><td class="cellrowborder" width="50%">3300102</td> <td class="cellrowborder" width="50%">NoSuchElementError, the AID on the SE is not available or cannot be selected or a logical channel is already open to a non-multi-selectable applet.</td> </tr> <tr><td class="cellrowborder" width="50%">3300103</td> <td class="cellrowborder" width="50%">SecurityError, the calling application cannot be granted access to this AID or the default applet on this session.</td> </tr> <tr><td class="cellrowborder" width="50%">3300104</td> <td class="cellrowborder" width="50%">IOError, there is a communication problem to the reader or the SE.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li><span class="hljs-keyword">let</span> aidArray : number[] = [<span class="hljs-number">0xA0</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x10</span>, <span class="hljs-number">0x10</span>];</li><li><span class="hljs-keyword">let</span> p2 : number = <span class="hljs-number">0x00</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seSession之前，需要对seSession进行初始化</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">// 改为在此channel上选择的App的aid</span></li><li>        seSession.<span class="hljs-title function_">openLogicalChannel</span>(aidArray, p2).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>            seChannel = data;</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>)=&gt;</span> {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openLogicalChannel error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (exception) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openLogicalChannel exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (seChannel == <span class="hljs-literal">undefined</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seChannel invalid.'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="sessionopenlogicalchannel-3" device-type="phone">Session.openLogicalChannel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sessionopenlogicalchannel-3" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>openLogicalChannel(aid: number[], p2: number, callback: AsyncCallback&lt;Channel&gt;):void</p> <p>打开逻辑通道，参考[ISO 7816-4]协议，返回Channel实例对象。SE不能提供逻辑Channel或应用程序没有访问SE的权限时，返回null。使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.1" width="25%"><strong>参数名</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.2" width="25%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.3" width="25%"><strong>必填</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.4" width="25%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">aid</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">在此Channel上选择的Applet的AID或如果没有Applet被选择时空的数组。</td> </tr> <tr><td class="cellrowborder" width="25%">p2</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">此Channel上执行SELECT APDU命令的P2参数。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#channel">Channel</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">以callback形式异步返回可用的逻辑Channel对象实例。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, an attempt is made to use an SE session that has been closed.</td> </tr> <tr><td class="cellrowborder" width="50%">3300102</td> <td class="cellrowborder" width="50%">NoSuchElementError, the AID on the SE is not available or cannot be selected or a logical channel is already open to a non-multi-selectable applet.</td> </tr> <tr><td class="cellrowborder" width="50%">3300103</td> <td class="cellrowborder" width="50%">SecurityError, the calling application cannot be granted access to this AID or the default applet on this session.</td> </tr> <tr><td class="cellrowborder" width="50%">3300104</td> <td class="cellrowborder" width="50%">IOError, there is a communication problem to the reader or the SE.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li><span class="hljs-keyword">let</span> aidArray : number[] = [<span class="hljs-number">0xA0</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x10</span>, <span class="hljs-number">0x10</span>];</li><li><span class="hljs-keyword">let</span> p2 : number = <span class="hljs-number">0x00</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seSession之前，需要对seSession进行初始化</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">secureElementDemo</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-comment">// 改为在此channel上选择的App的aid</span></li><li>        seSession.<span class="hljs-title function_">openLogicalChannel</span>(aidArray, p2, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (error) {</li><li>                hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openLogicalChannel error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>            } <span class="hljs-keyword">else</span> {</li><li>                seChannel = data;</li><li>            }</li><li>        });</li><li>    } <span class="hljs-keyword">catch</span> (exception) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'openLogicalChannel exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (seChannel == <span class="hljs-literal">undefined</span>) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'seChannel invalid.'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>    }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="channel" device-type="phone">Channel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="channel" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>Channel的实例表示在某个Session实例上创建通道，可能为基础通道或逻辑通道。通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#sessionopenbasicchannel">Session.openBasicChannel</a>或<a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#sessionopenlogicalchannel">Session.openLogicalChannel</a>获取Channel实例。</p> </div>  <div class="tiledSection"><h3 id="channelgetsession" device-type="phone" class="firsth2">Channel.getSession<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="channelgetsession" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p> getSession(): Session</p> <p>获取打开该Channel的Session对象。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.6.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-secureelement#session">Session</a></td> <td class="cellrowborder" width="50%">该Channel绑定的Session 对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seSession : omapi.<span class="hljs-property">Session</span>;</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seChannel之前，需要对seChannel进行初始化</span></li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>    seSession = seChannel.<span class="hljs-title function_">getSession</span>();</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'getSession exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="channelclose" device-type="phone">Channel.close<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="channelclose" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>close(): void</p> <p>关闭Channel。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.7.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seChannel之前，需要对seChannel进行初始化</span></li><li><span class="hljs-keyword">try</span> {</li><li>    seChannel.<span class="hljs-title function_">close</span>();</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'close exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="channelisbasicchannel" device-type="phone">Channel.isBasicChannel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="channelisbasicchannel" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>isBasicChannel(): boolean</p> <p>检查该Channel是否为基础Channel。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.6.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">true: 该Channel是基础Channel, false：该Channel逻辑Channel 。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seChannel之前，需要对seChannel进行初始化</span></li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> isBasic = seChannel.<span class="hljs-title function_">isBasicChannel</span>();</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'isBasic = %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(isBasic));</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'isBasicChannel exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="channelisclosed" device-type="phone">Channel.isClosed<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="channelisclosed" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>isClosed(): boolean</p> <p>检查该Channel是否已被关闭。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">boolean</td> <td class="cellrowborder" width="50%">true: Channel是关闭的，false: 不是关闭的。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seChannel之前，需要对seChannel进行初始化</span></li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> isClosed = seChannel.<span class="hljs-title function_">isClosed</span>();</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'isClosed = %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(isClosed));</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'isClosed exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="channelgetselectresponse" device-type="phone">Channel.getSelectResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="channelgetselectresponse" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>getSelectResponse(): number[]</p> <p>获取SELECT Applet时的响应数据，包含状态字。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">number[]</td> <td class="cellrowborder" width="50%">SELECT Applet时的响应数据，包含状态字。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seChannel之前，需要对seChannel进行初始化</span></li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> response = seChannel.<span class="hljs-title function_">getSelectResponse</span>();</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'response = %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(response));</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'getSelectResponse exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="channeltransmit" device-type="phone">Channel.transmit<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="channeltransmit" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>transmit(command: number[]): Promise&lt;number[]&gt;</p> <p>向SE发送APDU数据，数据符合ISO/IEC 7816规范。使用Promise异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.1" width="25%"><strong>参数名</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.2" width="25%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.3" width="25%"><strong>必填</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.4" width="25%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">command</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">需要发送到SE的APDU数据。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.8.1.3.1.1" width="50%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.3.1.2" width="50%"><strong>说明</strong></th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;number[]&gt;</td> <td class="cellrowborder" width="50%">以Promise形式异步返回接收到的响应APDU数据，number数组。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, an attempt is made to use an SE session or channel that has been closed.</td> </tr> <tr><td class="cellrowborder" width="50%">3300103</td> <td class="cellrowborder" width="50%">SecurityError, the command is filtered by the security policy.</td> </tr> <tr><td class="cellrowborder" width="50%">3300104</td> <td class="cellrowborder" width="50%">IOError, there is a communication problem to the reader or the SE.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seChannel之前，需要对seChannel进行初始化</span></li><li><span class="hljs-keyword">let</span> cmdData = [<span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>]; <span class="hljs-comment">// 请更改为正确的data</span></li><li><span class="hljs-keyword">try</span> {</li><li>    seChannel.<span class="hljs-title function_">transmit</span>(cmdData).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'transmit response = %{public}s.'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(response));</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>) =&gt;</span> {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'transmit error = %{public}s.'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'transmit exception = %{public}s.'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h3 id="channeltransmit-1" device-type="phone">Channel.transmit<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="channeltransmit-1" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>transmit(command: number[], callback: AsyncCallback&lt;number[]&gt;): void</p> <p>向SE发送APDU数据，数据符合ISO/IEC 7816规范。使用callback异步回调。</p> <p><strong>系统能力：</strong> SystemCapability.Communication.SecureElement</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.1" width="25%"><strong>参数名</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.2" width="25%"><strong>类型</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.3" width="25%"><strong>必填</strong></th> <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.5.1.4" width="25%"><strong>说明</strong></th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">command</td> <td class="cellrowborder" width="25%">number[]</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">需要发送到SE的APDU数据。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number[]&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">返回接收到的响应APDU数据，number数组。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-se">SE错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%"><p>The parameter check failed. Possible causes: </p> <p>1. Mandatory parameters are left unspecified.</p> <p>2. Incorrect parameters types.</p> <p>3. Parameter verification failed.</p> </td> </tr> <tr><td class="cellrowborder" width="50%">801</td> <td class="cellrowborder" width="50%">Capability not supported.</td> </tr> <tr><td class="cellrowborder" width="50%">3300101</td> <td class="cellrowborder" width="50%">IllegalStateError, an attempt is made to use an SE session or channel that has been closed.</td> </tr> <tr><td class="cellrowborder" width="50%">3300103</td> <td class="cellrowborder" width="50%">SecurityError, the command is filtered by the security policy.</td> </tr> <tr><td class="cellrowborder" width="50%">3300104</td> <td class="cellrowborder" width="50%">IOError, there is a communication problem to the reader or the SE.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-dqy-c106="" class="highlight-div"><div _ngcontent-dqy-c106="" class="highlight-div-header"><div _ngcontent-dqy-c106="" class="highlight-div-header-left"><div _ngcontent-dqy-c106="" class="handle-button expand-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-dqy-c106="" class="highlight-div-header-right"><div _ngcontent-dqy-c106="" class="handle-button ai-button"></div><div _ngcontent-dqy-c106="" class="handle-button line-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-dqy-c106="" class="handle-button theme-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-dqy-c106="" class="handle-button copy-button"><div _ngcontent-dqy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-dqy-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { omapi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ConnectivityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> seChannel : omapi.<span class="hljs-property">Channel</span>;</li><li>
</li><li><span class="hljs-comment">// 在使用seChannel之前，需要对seChannel进行初始化</span></li><li><span class="hljs-keyword">let</span> cmdData = [<span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>]; <span class="hljs-comment">// 请更改为正确的data</span></li><li><span class="hljs-keyword">try</span> {</li><li>    seChannel.<span class="hljs-title function_">transmit</span>(cmdData, <span class="hljs-function">(<span class="hljs-params">error, response</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error) {</li><li>        hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'transmit error %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'transmit response = %{public}s.'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(response));</li><li>    }</li><li>    });</li><li>} <span class="hljs-keyword">catch</span> (exception) {</li><li>    hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">'transmit exception %{public}s'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(exception));</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>