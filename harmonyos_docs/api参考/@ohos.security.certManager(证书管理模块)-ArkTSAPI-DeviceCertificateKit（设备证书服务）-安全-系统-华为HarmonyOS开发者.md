<h1 _ngcontent-vof-c119="" class="doc-title ng-star-inserted" title="@ohos.security.certManager (证书管理模块)"> @ohos.security.certManager (证书管理模块) </h1>

<div _ngcontent-vof-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;"> <div><p>证书管理主要提供系统级的证书管理能力，实现证书全生命周期（安装，存储，使用，销毁）的管理和安全使用。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>本模块首批接口从API version 11开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>  </div></div></div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;"><h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 378px;"><h2 id="cmkeypurpose" device-type="phone,2in1,tablet,wearable,tv">CmKeyPurpose<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cmkeypurpose" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示密钥使用目的的枚举，用于签名、验签。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">CM_KEY_PURPOSE_SIGN</td> <td class="cellrowborder" width="33.33333333333333%">4</td> <td class="cellrowborder" width="33.33333333333333%">签名。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_KEY_PURPOSE_VERIFY</td> <td class="cellrowborder" width="33.33333333333333%">8</td> <td class="cellrowborder" width="33.33333333333333%">验签。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 696px;"><h2 id="cmkeydigest" device-type="phone,2in1,tablet,wearable,tv">CmKeyDigest<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cmkeydigest" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示签名、验签使用的摘要算法的枚举。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">CM_DIGEST_NONE</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">不需要摘要算法，选用此项时，需要业务传入已经计算过摘要的数据进行签名、验签。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_DIGEST_MD5</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">MD5摘要算法。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_DIGEST_SHA1</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">SHA1摘要算法。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_DIGEST_SHA224</td> <td class="cellrowborder" width="33.33333333333333%">3</td> <td class="cellrowborder" width="33.33333333333333%">SHA224摘要算法。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_DIGEST_SHA256</td> <td class="cellrowborder" width="33.33333333333333%">4</td> <td class="cellrowborder" width="33.33333333333333%">SHA256摘要算法。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_DIGEST_SHA384</td> <td class="cellrowborder" width="33.33333333333333%">5</td> <td class="cellrowborder" width="33.33333333333333%">SHA384摘要算法。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_DIGEST_SHA512</td> <td class="cellrowborder" width="33.33333333333333%">6</td> <td class="cellrowborder" width="33.33333333333333%">SHA512摘要算法。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_DIGEST_SM3<sup>18+</sup></td> <td class="cellrowborder" width="33.33333333333333%">7</td> <td class="cellrowborder" width="33.33333333333333%">SM3摘要算法。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 423px;"><h2 id="cmkeypadding" device-type="phone,2in1,tablet,wearable,tv">CmKeyPadding<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cmkeypadding" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示签名、验签使用的填充方式的枚举。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">CM_PADDING_NONE</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">无填充。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_PADDING_PSS</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">PSS方式填充。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_PADDING_PKCS1_V1_5</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">PKCS1_V1_5方式填充。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 495px;"><h2 id="cmsignaturespec" device-type="phone,2in1,tablet,wearable,tv">CMSignatureSpec<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cmsignaturespec" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示签名、验签操作使用的参数集合，包括密钥使用目的、填充方式和摘要算法。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.7.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">purpose</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmkeypurpose">CmKeyPurpose</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示密钥使用目的的枚举。</td> </tr> <tr><td class="cellrowborder" width="20%">padding</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmkeypadding">CmKeyPadding</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示填充方式的枚举。</td> </tr> <tr><td class="cellrowborder" width="20%">digest</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmkeydigest">CmKeyDigest</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示摘要算法的枚举。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1242px;"><h2 id="certinfo" device-type="phone,2in1,tablet,wearable,tv">CertInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certinfo" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示证书详细信息。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">uri</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书的唯一标识符，最大长度为256字节。</td> </tr> <tr><td class="cellrowborder" width="20%">certAlias</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书的别名，最大长度为128字节。</td> </tr> <tr><td class="cellrowborder" width="20%">state</td> <td class="cellrowborder" width="20%">boolean</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书的状态，true为启用状态、false为禁用状态。</td> </tr> <tr><td class="cellrowborder" width="20%">issuerName</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书的颁发者名称，最大长度为256字节。</td> </tr> <tr><td class="cellrowborder" width="20%">subjectName</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书的使用者名称，最大长度为1024字节。</td> </tr> <tr><td class="cellrowborder" width="20%">serial</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书的序列号，最大长度为64字节。格式为16进制字符串，例如：62C2CB4DE8405E96。</td> </tr> <tr><td class="cellrowborder" width="20%">notBefore</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书有效期起始日期，最大长度为32字节。</td> </tr> <tr><td class="cellrowborder" width="20%">notAfter</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书有效期截止日期，最大长度为32字节。</td> </tr> <tr><td class="cellrowborder" width="20%">fingerprintSha256</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书的指纹值，最大长度为128字节。</td> </tr> <tr><td class="cellrowborder" width="20%">cert</td> <td class="cellrowborder" width="20%">Uint8Array</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书二进制数据，最大长度为8196字节。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 636px;"><h2 id="certabstract" device-type="phone,2in1,tablet,wearable,tv">CertAbstract<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certabstract" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示证书简要信息。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.9.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">uri</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书的唯一标识符，最大长度为256字节。</td> </tr> <tr><td class="cellrowborder" width="20%">certAlias</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书的别名，最大长度为128字节。</td> </tr> <tr><td class="cellrowborder" width="20%">state</td> <td class="cellrowborder" width="20%">boolean</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书的状态，true为启用状态、false为禁用状态。</td> </tr> <tr><td class="cellrowborder" width="20%">subjectName</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书的使用者名称，最大长度为1024字节。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 750px;"><h2 id="credential" device-type="phone,2in1,tablet,wearable,tv">Credential<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="credential" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示凭据详细信息。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.10.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">type</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示凭据的类型，最大长度为8字节。</td> </tr> <tr><td class="cellrowborder" width="20%">alias</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示凭据的别名，最大长度为128字节。</td> </tr> <tr><td class="cellrowborder" width="20%">keyUri</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示凭据的唯一标识符，最大长度为256字节。</td> </tr> <tr><td class="cellrowborder" width="20%">certNum</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示凭据中包含的证书个数。</td> </tr> <tr><td class="cellrowborder" width="20%">keyNum</td> <td class="cellrowborder" width="20%">number</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示凭据中包含的密钥个数。</td> </tr> <tr><td class="cellrowborder" width="20%">credentialData</td> <td class="cellrowborder" width="20%">Uint8Array</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示凭据二进制数据，最大长度为20480字节。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 519px;"><h2 id="credentialabstract" device-type="phone,2in1,tablet,wearable,tv">CredentialAbstract<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="credentialabstract" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示凭据的简要信息。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">type</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示凭据的类型，最大长度为8字节。</td> </tr> <tr><td class="cellrowborder" width="20%">alias</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示凭据的别名，最大长度为128字节。</td> </tr> <tr><td class="cellrowborder" width="20%">keyUri</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示凭据的唯一标识符，最大长度为256字节。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 699px;"><h2 id="cmresult" device-type="phone,2in1,tablet,wearable,tv">CMResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cmresult" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示接口的返回结果。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">certList</td> <td class="cellrowborder" width="20%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#certabstract">CertAbstract</a>&gt;</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示证书简要信息的列表。</td> </tr> <tr><td class="cellrowborder" width="20%">certInfo</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#certinfo">CertInfo</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示证书详情。</td> </tr> <tr><td class="cellrowborder" width="20%">credentialList</td> <td class="cellrowborder" width="20%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#credentialabstract">CredentialAbstract</a>&gt;</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示凭据简要信息的列表。</td> </tr> <tr><td class="cellrowborder" width="20%">credential</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#credential">Credential</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示凭据详情。</td> </tr> <tr><td class="cellrowborder" width="20%">appUidList</td> <td class="cellrowborder" width="20%">Array&lt;string&gt;</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示授权应用列表。</td> </tr> <tr><td class="cellrowborder" width="20%">uri</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示证书或凭据的唯一标识符，最大长度为256字节。</td> </tr> <tr><td class="cellrowborder" width="20%">outData</td> <td class="cellrowborder" width="20%">Uint8Array</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示签名结果。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 381px;"><h2 id="cmhandle" device-type="phone,2in1,tablet,wearable,tv">CMHandle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cmhandle" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示签名、验签的初始化操作句柄。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.13.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">handle</td> <td class="cellrowborder" width="20%">Uint8Array</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">签名、验签的初始化操作句柄，最大长度为8字节。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 765px;"><h2 id="cmerrorcode" device-type="phone,2in1,tablet,wearable,tv">CMErrorCode<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cmerrorcode" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示调用证书管理相关API的错误码。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.14.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">CM_ERROR_NO_PERMISSION</td> <td class="cellrowborder" width="33.33333333333333%">201</td> <td class="cellrowborder" width="33.33333333333333%">表示应用程序无权限调用接口。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_ERROR_INVALID_PARAMS</td> <td class="cellrowborder" width="33.33333333333333%">401</td> <td class="cellrowborder" width="33.33333333333333%">表示输入参数无效。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_ERROR_GENERIC</td> <td class="cellrowborder" width="33.33333333333333%">17500001</td> <td class="cellrowborder" width="33.33333333333333%">表示调用接口时发生内部错误。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_ERROR_NO_FOUND</td> <td class="cellrowborder" width="33.33333333333333%">17500002</td> <td class="cellrowborder" width="33.33333333333333%">表示证书或凭据不存在。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_ERROR_INCORRECT_FORMAT</td> <td class="cellrowborder" width="33.33333333333333%">17500003</td> <td class="cellrowborder" width="33.33333333333333%">表示输入证书或凭据的数据格式无效。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_ERROR_MAX_CERT_COUNT_REACHED<sup>12+</sup></td> <td class="cellrowborder" width="33.33333333333333%">17500004</td> <td class="cellrowborder" width="33.33333333333333%">表示证书或凭据数量达到上限。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_ERROR_NO_AUTHORIZATION<sup>12+</sup></td> <td class="cellrowborder" width="33.33333333333333%">17500005</td> <td class="cellrowborder" width="33.33333333333333%">表示应用未经用户授权。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_ERROR_DEVICE_ENTER_ADVSECMODE<sup>18+</sup></td> <td class="cellrowborder" width="33.33333333333333%">17500007</td> <td class="cellrowborder" width="33.33333333333333%">表示设备进入坚盾守护模式。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CM_ERROR_STORE_PATH_NOT_SUPPORTED<sup>20+</sup></td> <td class="cellrowborder" width="33.33333333333333%">17500009</td> <td class="cellrowborder" width="33.33333333333333%">表示不支持指定的证书存储路径。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 378px;"><h2 id="certtype18" device-type="phone,2in1,tablet,wearable,tv">CertType<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certtype18" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示证书类型。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.15.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">CA_CERT_SYSTEM</td> <td class="cellrowborder" width="33.33333333333333%">0</td> <td class="cellrowborder" width="33.33333333333333%">表示系统CA证书。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">CA_CERT_USER</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">表示用户CA证书。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 402px;"><h2 id="certscope18" device-type="phone,2in1,tablet,wearable,tv">CertScope<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certscope18" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示证书的位置。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.16.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.16.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">CURRENT_USER</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">表示当前用户。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">GLOBAL_USER</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">表示设备公共，即所有用户都可以访问的位置。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 402px;"><h2 id="certalgorithm20" device-type="phone,2in1,tablet,wearable,tv">CertAlgorithm<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certalgorithm20" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示证书的算法类型。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">INTERNATIONAL</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">表示国际密码算法，如RSA、NIST ECC等。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">SM</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">表示商用密码算法，如SM2、SM4等。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 591px;"><h2 id="certstoreproperty18" device-type="phone,2in1,tablet,wearable,tv">CertStoreProperty<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certstoreproperty18" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示获取证书存储位置的参数集合，包括证书的类型及证书的位置。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">certType</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#certtype18">CertType</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">表示证书的类型。</td> </tr> <tr><td class="cellrowborder" width="20%">certScope</td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#certscope18">CertScope</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示证书的存储位置。当证书类型为CA_CERT_USER时，此项为必选项。</td> </tr> <tr><td class="cellrowborder" width="20%">certAlg<sup>20+</sup></td> <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#certalgorithm20">CertAlgorithm</a></td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">表示证书算法类型。仅当certType为CA_CERT_SYSTEM时有效，默认值为INTERNATIONAL。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 447px;"><h2 id="authstoragelevel18" device-type="phone,2in1,tablet,wearable,tv">AuthStorageLevel<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="authstoragelevel18" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示凭据的存储级别。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.4.1.4.1.1" width="33.33333333333333%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.4.1.2" width="33.33333333333333%">值</th> <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.4.1.3" width="33.33333333333333%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%">EL1</td> <td class="cellrowborder" width="33.33333333333333%">1</td> <td class="cellrowborder" width="33.33333333333333%">EL1级别，表示设备启动后可以访问。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">EL2</td> <td class="cellrowborder" width="33.33333333333333%">2</td> <td class="cellrowborder" width="33.33333333333333%">EL2级别，表示设备首次解锁后可以访问。</td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%">EL4</td> <td class="cellrowborder" width="33.33333333333333%">4</td> <td class="cellrowborder" width="33.33333333333333%">EL4级别，表示设备解锁时可以访问。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 2004px;"><h2 id="certificatemanagerinstallprivatecertificate" device-type="phone,2in1,tablet,wearable,tv">certificateManager.installPrivateCertificate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerinstallprivatecertificate" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>installPrivateCertificate(keystore: Uint8Array, keystorePwd: string, certAlias: string, callback: AsyncCallback&lt;CMResult&gt;): void</p> <p>表示安装私有凭据，使用Callback回调异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keystore</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示带有密钥对和证书的密钥库文件，最大长度为20480字节。</td> </tr> <tr><td class="cellrowborder" width="25%">keystorePwd</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示密钥库文件的密码，长度限制32字节以内。</td> </tr> <tr><td class="cellrowborder" width="25%">certAlias</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示用户输入的凭据别名，当前仅支持传入数字、字母或下划线，长度建议32字节以内。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。当安装私有凭据成功时，err为null，data为<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>对象中的uri属性；否则为错误对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500003</td> <td class="cellrowborder" width="50%">The keystore is in an invalid format or the keystore password is incorrect.</td> </tr> <tr><td class="cellrowborder" width="50%">17500004</td> <td class="cellrowborder" width="50%">The number of certificates or credentials reaches the maximum allowed.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-comment">/* 安装的凭据数据需要业务赋值，本例数据非凭据数据 */</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">keystore</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>  <span class="hljs-number">0x30</span>, <span class="hljs-number">0x82</span>, <span class="hljs-number">0x0b</span>, <span class="hljs-number">0xc1</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x01</span>,</li><li>]);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">keystorePwd</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"123456"</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">installPrivateCertificate</span>(keystore, keystorePwd, <span class="hljs-string">"test"</span>, <span class="hljs-function">(<span class="hljs-params">err, cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to install private certificate. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = (cmResult?.<span class="hljs-property">uri</span> == <span class="hljs-literal">undefined</span>) ? <span class="hljs-string">''</span> : cmResult.<span class="hljs-property">uri</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in installing private certificate.'</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to install private certificate. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 2058px;"><h2 id="certificatemanagerinstallprivatecertificate-1" device-type="phone,2in1,tablet,wearable,tv">certificateManager.installPrivateCertificate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerinstallprivatecertificate-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>installPrivateCertificate(keystore: Uint8Array, keystorePwd: string, certAlias: string): Promise&lt;CMResult&gt;</p> <p>表示安装私有凭据，使用Promise方式异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keystore</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示带有密钥对和证书的密钥库文件，最大长度为20480字节。</td> </tr> <tr><td class="cellrowborder" width="25%">keystorePwd</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示密钥库文件的密码，长度限制32字节以内。</td> </tr> <tr><td class="cellrowborder" width="25%">certAlias</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示用户输入的凭据别名，当前仅支持传入数字、字母或下划线，长度建议32字节以内。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。表示安装私有凭据的结果，返回值为<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>对象中的uri属性。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.21.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.21.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500003</td> <td class="cellrowborder" width="50%">The keystore is in an invalid format or the keystore password is incorrect.</td> </tr> <tr><td class="cellrowborder" width="50%">17500004</td> <td class="cellrowborder" width="50%">The number of certificates or credentials reaches the maximum allowed.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">/* 安装的凭据数据需要业务赋值，本例数据非凭据数据 */</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">keystore</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>  <span class="hljs-number">0x30</span>, <span class="hljs-number">0x82</span>, <span class="hljs-number">0x0b</span>, <span class="hljs-number">0xc1</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x01</span>,</li><li>]);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">keystorePwd</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"123456"</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">installPrivateCertificate</span>(keystore, keystorePwd, <span class="hljs-string">'test'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = (cmResult?.<span class="hljs-property">uri</span> == <span class="hljs-literal">undefined</span>) ? <span class="hljs-string">''</span> : cmResult.<span class="hljs-property">uri</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in installing private certificate.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to install private certificate. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to install private certificate. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 2175px;"><h2 id="certificatemanagerinstallprivatecertificate18" device-type="phone,2in1,tablet,wearable,tv">certificateManager.installPrivateCertificate<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerinstallprivatecertificate18" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>installPrivateCertificate(keystore: Uint8Array, keystorePwd: string, certAlias: string, level: AuthStorageLevel): Promise&lt;CMResult&gt;</p> <p>表示安装私有凭据并指定凭据的存储级别。使用Promise异步回调。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keystore</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示带有密钥对和证书的密钥库文件，最大长度为20480字节。</td> </tr> <tr><td class="cellrowborder" width="25%">keystorePwd</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>表示密钥库文件的密码。</p> <p>长度限制：32字节以内。</p> </td> </tr> <tr><td class="cellrowborder" width="25%">certAlias</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>表示用户输入的凭据别名，当前仅支持传入数字、字母或下划线。</p> <p>长度建议：32字节以内。</p> </td> </tr> <tr><td class="cellrowborder" width="25%">level</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#authstoragelevel18">AuthStorageLevel</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示凭据的存储级别。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。表示安装私有凭据的结果，返回值为<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>对象中的uri属性。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.22.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500003</td> <td class="cellrowborder" width="50%">The keystore is in an invalid format or the keystore password is incorrect.</td> </tr> <tr><td class="cellrowborder" width="50%">17500004</td> <td class="cellrowborder" width="50%">The number of certificates or credentials reaches the maximum allowed.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">/* 安装的凭据数据需要业务赋值，本例数据非凭据数据。 */</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">keystore</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>  <span class="hljs-number">0x30</span>, <span class="hljs-number">0x82</span>, <span class="hljs-number">0x0b</span>, <span class="hljs-number">0xc1</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x01</span>,</li><li>]);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">keystorePwd</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"123456"</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">/* 安装凭据在首次解锁设备后可以使用。 */</span></li><li>  <span class="hljs-keyword">let</span> level = certificateManager.<span class="hljs-property">AuthStorageLevel</span>.<span class="hljs-property">EL2</span>;</li><li>  certificateManager.<span class="hljs-title function_">installPrivateCertificate</span>(keystore, keystorePwd, <span class="hljs-string">'test'</span>, level).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = (cmResult?.<span class="hljs-property">uri</span> == <span class="hljs-literal">undefined</span>) ? <span class="hljs-string">''</span> : cmResult.<span class="hljs-property">uri</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in installing private certificate.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to install private certificate. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to install private certificate. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1715px;"><h2 id="certificatemanagergetprivatecertificate" device-type="phone,2in1,tablet,wearable,tv">certificateManager.getPrivateCertificate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagergetprivatecertificate" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPrivateCertificate(keyUri: string, callback: AsyncCallback&lt;CMResult&gt;): void</p> <p>表示获取私有凭据的详细信息，使用Callback回调异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keyUri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待获取凭据的唯一标识符，长度限制256字节以内。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。当获取私有凭据的详细信息成功时，err为null，data为<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>对象中的credential属性；否则为错误对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500002</td> <td class="cellrowborder" width="50%">The certificate does not exist.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'test'</span>; <span class="hljs-comment">/* 业务获取私有凭据详情，需要使用凭据的唯一标识符，此处省略 */</span></li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">getPrivateCertificate</span>(uri, <span class="hljs-function">(<span class="hljs-params">err, cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get private certificate. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">if</span> (cmResult?.<span class="hljs-property">credential</span> == <span class="hljs-literal">undefined</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The result of getting private certificate is undefined.'</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-keyword">let</span> list = cmResult.<span class="hljs-property">credential</span>;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting private certificate.'</span>);</li><li>      }</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get private certificate. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1745px;"><h2 id="certificatemanagergetprivatecertificate-1" device-type="phone,2in1,tablet,wearable,tv">certificateManager.getPrivateCertificate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagergetprivatecertificate-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPrivateCertificate(keyUri: string): Promise&lt;CMResult&gt;</p> <p>表示获取私有凭据详情，使用Promise方式异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keyUri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待获取凭据的唯一标识符，长度限制256字节以内。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。表示获取私有凭据详细信息的结果，返回值为<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>对象中的credential属性。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.24.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500002</td> <td class="cellrowborder" width="50%">The certificate does not exist.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'test'</span>; <span class="hljs-comment">/* 业务获取私有凭据详情，需要使用凭据的唯一标识符，此处省略 */</span></li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">getPrivateCertificate</span>(uri).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (cmResult?.<span class="hljs-property">credential</span> == <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The result of getting private certificate is undefined.'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">let</span> list = cmResult.<span class="hljs-property">credential</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting private certificate.'</span>);</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get private certificate. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get private certificate. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1547px;"><h2 id="certificatemanageruninstallprivatecertificate" device-type="phone,2in1,tablet,wearable,tv">certificateManager.uninstallPrivateCertificate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanageruninstallprivatecertificate" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>uninstallPrivateCertificate(keyUri: string, callback: AsyncCallback&lt;void&gt;): void</p> <p>表示卸载指定的私有凭据，使用Callback回调异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keyUri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待卸载凭据的唯一标识符，长度限制256字节以内。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。当卸载私有凭据成功时，err为null，否则为错误对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500002</td> <td class="cellrowborder" width="50%">The certificate does not exist.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'test'</span>; <span class="hljs-comment">/* 业务删除私有凭据，需要使用凭据的唯一标识符，此处省略 */</span></li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">uninstallPrivateCertificate</span>(uri, <span class="hljs-function">(<span class="hljs-params">err, result</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to uninstall private certificate. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in uninstalling private certificate.'</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to uninstall private certificate. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1601px;"><h2 id="certificatemanageruninstallprivatecertificate-1" device-type="phone,2in1,tablet,wearable,tv">certificateManager.uninstallPrivateCertificate<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanageruninstallprivatecertificate-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>uninstallPrivateCertificate(keyUri: string): Promise&lt;void&gt;</p> <p>表示卸载指定的私有凭据，使用Promise方式异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keyUri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待卸载凭据的唯一标识符，长度限制256字节以内。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.26.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.26.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500002</td> <td class="cellrowborder" width="50%">The certificate does not exist.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'test'</span>; <span class="hljs-comment">/* 业务删除私有凭据，需要使用凭据的唯一标识符，此处省略 */</span></li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">uninstallPrivateCertificate</span>(uri).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in uninstalling private certificate.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to uninstall private certificate. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to uninstall private certificate. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1900px;"><h2 id="certificatemanagerinstallusertrustedcertificatesync18" device-type="phone,2in1,tablet,wearable,tv">certificateManager.installUserTrustedCertificateSync<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerinstallusertrustedcertificatesync18" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>installUserTrustedCertificateSync(cert: Uint8Array, certScope: CertScope) : CMResult</p> <p>表示安装用户CA证书。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_ENTERPRISE_USER_TRUSTED_CERT</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">cert</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示CA证书数据，最大长度为8196字节。</td> </tr> <tr><td class="cellrowborder" width="25%">certScope</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#certscope18">CertScope</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示CA证书安装的位置。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a></td> <td class="cellrowborder" width="50%">表示CA证书的安装结果，返回值CMResult对象中的uri属性。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.27.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500003</td> <td class="cellrowborder" width="50%">Indicates that the certificate is in an invalid format.</td> </tr> <tr><td class="cellrowborder" width="50%">17500004</td> <td class="cellrowborder" width="50%">Indicates that the number of certificates reaches the maximum allowed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500007</td> <td class="cellrowborder" width="50%">Indicates that the device enters advanced security mode. In this mode, the user CA certificate cannot be installed.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> {certificateManager} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-comment">/* 安装的CA证书数据需要业务赋值，本例数据非CA证书数据 */</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">certData</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>    <span class="hljs-number">0x30</span>, <span class="hljs-number">0x82</span>, <span class="hljs-number">0x0b</span>, <span class="hljs-number">0xc1</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x01</span>,</li><li>]);</li><li><span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: certificateManager.<span class="hljs-property">CMResult</span> = certificateManager.<span class="hljs-title function_">installUserTrustedCertificateSync</span>(certData, certificateManager.<span class="hljs-property">CertScope</span>.<span class="hljs-property">CURRENT_USER</span>);</li><li>    <span class="hljs-keyword">let</span> certUri = result.<span class="hljs-property">uri</span>;</li><li>    <span class="hljs-keyword">if</span> (certUri === <span class="hljs-literal">undefined</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"The result of install user trusted certificate is undefined."</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Successed to install user trusted certificate."</span>);</li><li>    }</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to install user trusted certificate. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1334px;"><h2 id="certificatemanageruninstallusertrustedcertificatesync18" device-type="phone,2in1,tablet,wearable,tv">certificateManager.uninstallUserTrustedCertificateSync<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanageruninstallusertrustedcertificatesync18" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>uninstallUserTrustedCertificateSync(certUri: string) : void</p> <p>表示删除用户CA证书。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_ENTERPRISE_USER_TRUSTED_CERT</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">certUri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待卸删除证书的唯一标识符，长度限制256字节以内。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500002</td> <td class="cellrowborder" width="50%">Indicates that the certificate does not exist.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> {certificateManager} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">certUri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"test"</span>; <span class="hljs-comment">/* 业务删除证书，需要使用证书的标识符，此处省略 */</span></li><li><span class="hljs-keyword">try</span> {</li><li>    certificateManager.<span class="hljs-title function_">uninstallUserTrustedCertificateSync</span>(certUri);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to uninstall user trusted certificate. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1815px;"><h2 id="certificatemanagerinit" device-type="phone,2in1,tablet,wearable,tv">certificateManager.init<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerinit" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>init(authUri: string, spec: CMSignatureSpec, callback: AsyncCallback&lt;CMHandle&gt;): void</p> <p>表示使用凭据进行签名、验签的初始化操作，使用Callback回调异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">authUri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示使用凭据的唯一标识符，长度限制256字节以内。</td> </tr> <tr><td class="cellrowborder" width="25%">spec</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmsignaturespec">CMSignatureSpec</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示签名、验签的属性。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmhandle">CMHandle</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。当签名、验签的初始化操作成功时，err为null，data为获取到的CMHandle；否则为错误对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500002</td> <td class="cellrowborder" width="50%">The certificate does not exist.</td> </tr> <tr><td class="cellrowborder" width="50%">17500005<sup>12+</sup></td> <td class="cellrowborder" width="50%">The application is not authorized by the user.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'test'</span>; <span class="hljs-comment">/* 业务使用凭据进行签名、验签的初始化操作，需要使用凭据的唯一标识符，此处省略 */</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">req</span>: certificateManager.<span class="hljs-property">CMSignatureSpec</span> = {</li><li>  <span class="hljs-attr">purpose</span>: certificateManager.<span class="hljs-property">CmKeyPurpose</span>.<span class="hljs-property">CM_KEY_PURPOSE_SIGN</span>,</li><li>  <span class="hljs-attr">padding</span>: certificateManager.<span class="hljs-property">CmKeyPadding</span>.<span class="hljs-property">CM_PADDING_PSS</span>,</li><li>  <span class="hljs-attr">digest</span>: certificateManager.<span class="hljs-property">CmKeyDigest</span>.<span class="hljs-property">CM_DIGEST_SHA256</span></li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">init</span>(uri, req, <span class="hljs-function">(<span class="hljs-params">err, cmHandle</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to init. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in initiating.'</span>);</li><li>    }</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to init. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1845px;"><h2 id="certificatemanagerinit-1" device-type="phone,2in1,tablet,wearable,tv">certificateManager.init<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerinit-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>init(authUri: string, spec: CMSignatureSpec): Promise&lt;CMHandle&gt;</p> <p>表示使用凭据进行签名、验签的初始化操作，使用Promise方式异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">authUri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示使用凭据的唯一标识符，长度限制256字节以内。</td> </tr> <tr><td class="cellrowborder" width="25%">spec</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmsignaturespec">CMSignatureSpec</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示签名、验签的属性。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmhandle">CMHandle</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。表示签名、验签的初始化操作结果，返回CMHandle对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.30.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.30.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500002</td> <td class="cellrowborder" width="50%">The certificate does not exist.</td> </tr> <tr><td class="cellrowborder" width="50%">17500005<sup>12+</sup></td> <td class="cellrowborder" width="50%">The application is not authorized by the user.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'test'</span>; <span class="hljs-comment">/* 业务使用凭据进行签名、验签的初始化操作，需要使用凭据的唯一标识符，此处省略 */</span></li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">req</span>: certificateManager.<span class="hljs-property">CMSignatureSpec</span> = {</li><li>  <span class="hljs-attr">purpose</span>: certificateManager.<span class="hljs-property">CmKeyPurpose</span>.<span class="hljs-property">CM_KEY_PURPOSE_VERIFY</span>,</li><li>  <span class="hljs-attr">padding</span>: certificateManager.<span class="hljs-property">CmKeyPadding</span>.<span class="hljs-property">CM_PADDING_PSS</span>,</li><li>  <span class="hljs-attr">digest</span>: certificateManager.<span class="hljs-property">CmKeyDigest</span>.<span class="hljs-property">CM_DIGEST_MD5</span></li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">init</span>(uri, req).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">handle</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in initiating.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to init. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to init. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1681px;"><h2 id="certificatemanagerupdate" device-type="phone,2in1,tablet,wearable,tv">certificateManager.update<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerupdate" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>update(handle: Uint8Array, data: Uint8Array, callback: AsyncCallback&lt;void&gt;): void</p> <p>表示签名、验签的数据更新操作，使用Callback回调异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">handle</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示初始化操作返回的句柄，最大长度为8字节。</td> </tr> <tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待签名、验签的数据。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。当签名、验签的数据更新操作成功时，err为null，否则为错误对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-comment">/* cmHandle为业务调用init接口的返回值，此处仅为示例 */</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cmHandle</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>  <span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x08</span></li><li>]);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">srcData</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>  <span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x08</span></li><li>]);</li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">update</span>(cmHandle, srcData, <span class="hljs-function">(<span class="hljs-params">err, result</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to update. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in updating.'</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to update. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1735px;"><h2 id="certificatemanagerupdate-1" device-type="phone,2in1,tablet,wearable,tv">certificateManager.update<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerupdate-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>update(handle: Uint8Array, data: Uint8Array): Promise&lt;void&gt;</p> <p>表示签名、验签的数据更新操作，使用Promise方式异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">handle</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示初始化操作返回的句柄，最大长度为8字节。</td> </tr> <tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待签名、验签的数据。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.32.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.32.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">/* cmHandle为业务调用init接口的返回值，此处仅为示例 */</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cmHandle</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>  <span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x08</span></li><li>]);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">srcData</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>  <span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x08</span></li><li>]);</li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">update</span>(cmHandle, srcData).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in updating.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to update. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to update. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1732px;"><h2 id="certificatemanagerfinish" device-type="phone,2in1,tablet,wearable,tv">certificateManager.finish<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerfinish" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>finish(handle: Uint8Array, callback: AsyncCallback&lt;CMResult&gt;): void</p> <p>表示完成签名的操作，Callback回调异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">handle</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示初始化操作返回的句柄，最大长度为8字节。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。当签名成功时，err为null，data为<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>对象中的outData属性，表示签名数据；否则为错误对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-comment">/* cmHandle为业务调用init接口的返回值，此处仅为示例 */</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cmHandle</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>  <span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x08</span></li><li>]);</li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">finish</span>(cmHandle, <span class="hljs-function">(<span class="hljs-params">err, cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to finish. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">if</span> (cmResult?.<span class="hljs-property">outData</span> != <span class="hljs-literal">undefined</span>) {</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">signRes</span>: <span class="hljs-title class_">Uint8Array</span> = cmResult.<span class="hljs-property">outData</span>;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in finishing.'</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The result of finishing is undefined.'</span>);</li><li>      }</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span>(error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to finish. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1681px;"><h2 id="certificatemanagerfinish-1" device-type="phone,2in1,tablet,wearable,tv">certificateManager.finish<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerfinish-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>finish(handle: Uint8Array, signature: Uint8Array, callback: AsyncCallback&lt;CMResult&gt;): void</p> <p>表示完成验签的操作，使用Callback回调异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">handle</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示初始化操作返回的句柄，最大长度为8字节。</td> </tr> <tr><td class="cellrowborder" width="25%">signature</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示签名数据。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。当验签成功时，err为null；否则为错误对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.34.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-comment">/* cmHandle为业务调用init接口的返回值，此处仅为示例 */</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cmHandle</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>  <span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x08</span></li><li>]);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">signRes</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>  <span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x08</span></li><li>]);</li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">finish</span>(cmHandle, signRes, <span class="hljs-function">(<span class="hljs-params">err, cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to finish. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in finishing.'</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span>(error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to finish. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 2119px;"><h2 id="certificatemanagerfinish-2" device-type="phone,2in1,tablet,wearable,tv">certificateManager.finish<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerfinish-2" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>finish(handle: Uint8Array, signature?: Uint8Array): Promise&lt;CMResult&gt;</p> <p>表示完成签名、验签的操作，使用Promise方式异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">handle</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示初始化操作返回的句柄，最大长度为8字节。</td> </tr> <tr><td class="cellrowborder" width="25%">signature</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">表示签名数据。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。执行签名操作时，表示签名的结果，返回值为<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>对象中的outData属性；执行验签操作时，无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.35.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">/* cmHandle为业务调用init接口的返回值，此处仅为示例 */</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cmHandle</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>  <span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x08</span></li><li>]);</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">/* 签名的finish操作 */</span></li><li>  certificateManager.<span class="hljs-title function_">finish</span>(cmHandle).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (cmResult?.<span class="hljs-property">outData</span> != <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">signRes1</span>: <span class="hljs-title class_">Uint8Array</span> = cmResult.<span class="hljs-property">outData</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in finishing signature.'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The result of signature is undefined.'</span>);</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to finish signature. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>
</li><li>  <span class="hljs-comment">/* 签名的结果 */</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">signRes</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>    <span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x08</span></li><li>  ]);</li><li>  <span class="hljs-comment">/* 验签的finish操作 */</span></li><li>  certificateManager.<span class="hljs-title function_">finish</span>(cmHandle, signRes).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in finishing verification.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to finish verification. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span>(error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to finish. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1564px;"><h2 id="certificatemanagerabort" device-type="phone,2in1,tablet,wearable,tv">certificateManager.abort<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerabort" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>abort(handle: Uint8Array, callback: AsyncCallback&lt;void&gt;): void</p> <p>表示中止签名、验签的操作，使用Callback回调异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">handle</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示初始化操作返回的句柄，最大长度为8字节。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。当中止签名、验签成功时，err为null，否则为错误对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-comment">/* cmHandle为业务调用init接口的返回值，此处仅为示例 */</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cmHandle</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>  <span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x08</span></li><li>]);</li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">abort</span>(cmHandle, <span class="hljs-function">(<span class="hljs-params">err, cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (err != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to abort. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in aborting.'</span>);</li><li>    }</li><li>  });</li><li>} <span class="hljs-keyword">catch</span>(error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to abort. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1618px;"><h2 id="certificatemanagerabort-1" device-type="phone,2in1,tablet,wearable,tv">certificateManager.abort<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerabort-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>abort(handle: Uint8Array): Promise&lt;void&gt;</p> <p>表示中止签名、验签的操作，使用Promise方式异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">handle</td> <td class="cellrowborder" width="25%">Uint8Array</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示初始化操作返回的句柄，最大长度为8字节。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.37.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">/* cmHandle为业务调用init接口的返回值，此处仅为示例 */</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">cmHandle</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([</li><li>  <span class="hljs-number">0x01</span>, <span class="hljs-number">0x02</span>, <span class="hljs-number">0x03</span>, <span class="hljs-number">0x04</span>, <span class="hljs-number">0x05</span>, <span class="hljs-number">0x06</span>, <span class="hljs-number">0x07</span>, <span class="hljs-number">0x08</span></li><li>]);</li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">abort</span>(cmHandle).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in aborting.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to abort. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to abort. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1824px;"><h2 id="certificatemanagergetpubliccertificate12" device-type="phone,2in1,tablet,wearable,tv">certificateManager.getPublicCertificate<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagergetpubliccertificate12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPublicCertificate(keyUri: string): Promise&lt;CMResult&gt;</p> <p>表示获取用户公共凭据的详细信息，使用Promise方式异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keyUri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示用户公共凭据的唯一标识符，长度限制256字节以内。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。表示获取用户公共凭据详细信息的结果，返回值为<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>对象中的credential属性。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.38.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.38.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500002</td> <td class="cellrowborder" width="50%">The certificate does not exist.</td> </tr> <tr><td class="cellrowborder" width="50%">17500005</td> <td class="cellrowborder" width="50%">The application is not authorized by the user.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'test'</span>; <span class="hljs-comment">/* 用户获取公共凭据详情，需要使用凭据的唯一标识符，此处省略 */</span></li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">getPublicCertificate</span>(uri).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (cmResult?.<span class="hljs-property">credential</span> == <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The result of getting public certificate is undefined.'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">let</span> cred = cmResult.<span class="hljs-property">credential</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting Public certificate.'</span>);</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Public certificate. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get Public certificate. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1690px;"><h2 id="certificatemanagerisauthorizedapp12" device-type="phone,2in1,tablet,wearable,tv">certificateManager.isAuthorizedApp<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagerisauthorizedapp12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isAuthorizedApp(keyUri: string): Promise&lt;boolean&gt;</p> <p>表示当前应用是否由指定的用户凭据授权，使用Promise方式异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">keyUri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示用户授权给应用使用的凭据的唯一标识符，长度限制256字节以内。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td> <td class="cellrowborder" width="50%">Promise对象。表示查询应用是否被授权的结果，true为已授权，false为未授权。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'test'</span>; <span class="hljs-comment">/* 用户授权给应用使用的凭据的唯一标识符，此处省略 */</span></li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">isAuthorizedApp</span>(uri).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (res) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The application is authorized by the user.'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The application is not authorized by the user.'</span>);</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to check if the application is authorized. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to check if the application is authorized. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1436px;"><h2 id="certificatemanagergetallusertrustedcertificates12" device-type="phone,2in1,tablet,wearable,tv">certificateManager.getAllUserTrustedCertificates<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagergetallusertrustedcertificates12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAllUserTrustedCertificates(): Promise&lt;CMResult&gt;</p> <p>表示获取当前用户和设备公共位置的所有用户根CA证书列表，使用Promise方式异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。表示获取用户根CA证书列表的结果，返回值<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>对象中的certList属性。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.40.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.40.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">getAllUserTrustedCertificates</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (cmResult === <span class="hljs-literal">undefined</span>) { <span class="hljs-comment">// 用户根CA证书个数为0时，返回cmResult为undefined。</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'the count of the user trusted certificates is 0'</span>);</li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmResult.<span class="hljs-property">certList</span> == <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The result of getting all user trusted certificates is undefined.'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">let</span> list = cmResult.<span class="hljs-property">certList</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting all user trusted certificates.'</span>);</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get all user trusted certificates. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get all user trusted certificates. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1738px;"><h2 id="certificatemanagergetallusertrustedcertificates18" device-type="phone,2in1,tablet,wearable,tv">certificateManager.getAllUserTrustedCertificates<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagergetallusertrustedcertificates18" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAllUserTrustedCertificates(scope: CertScope): Promise&lt;CMResult&gt;</p> <p>表示根据证书的位置获取用户根CA证书列表，使用Promise方式异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">scope</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#certscope18">CertScope</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示证书的位置。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。表示获取用户根CA证书列表的结果，返回值<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>对象中的certList属性。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.41.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.41.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">/* 获取当前用户下的用户根CA证书列表; 如果需要获取设备公共位置的用户根CA列表，则传入GLOBAL_USER */</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">scope</span>: certificateManager.<span class="hljs-property">CertScope</span> = certificateManager.<span class="hljs-property">CertScope</span>.<span class="hljs-property">CURRENT_USER</span>;</li><li>  certificateManager.<span class="hljs-title function_">getAllUserTrustedCertificates</span>(scope).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (cmResult === <span class="hljs-literal">undefined</span>) { <span class="hljs-comment">// 用户根CA证书个数为0时，返回cmResult为undefined。</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'the count of the user trusted certificates is 0'</span>);</li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmResult.<span class="hljs-property">certList</span> == <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The result of getting current user trusted certificates is undefined.'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">let</span> list = cmResult.<span class="hljs-property">certList</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting current user trusted certificates.'</span>);</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get current user trusted certificates. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get current user trusted certificates. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1769px;"><h2 id="certificatemanagergetusertrustedcertificate12" device-type="phone,2in1,tablet,wearable,tv">certificateManager.getUserTrustedCertificate<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagergetusertrustedcertificate12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getUserTrustedCertificate(certUri: string): Promise&lt;CMResult&gt;</p> <p>表示获取用户根CA证书的详细信息，使用Promise方式异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">certUri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示用户根CA证书的唯一标识符，长度限制256字节以内。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。表示获取用户根CA证书详细信息的结果，返回值为<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>对象中的certInfo属性。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.42.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.42.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500002</td> <td class="cellrowborder" width="50%">The certificate does not exist.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">certUri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'testUserCert'</span>; <span class="hljs-comment">/* 用户获取用户根CA证书详情，需要使用CA证书的唯一标识符，此处省略 */</span></li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">getUserTrustedCertificate</span>(certUri).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (cmResult?.<span class="hljs-property">certInfo</span> == <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The result of getting user trusted certificate is undefined.'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">let</span> cert = cmResult.<span class="hljs-property">certInfo</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting user trusted certificate.'</span>);</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get user trusted certificate. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get user trusted certificate. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1436px;"><h2 id="certificatemanagergetprivatecertificates13" device-type="phone,2in1,tablet,wearable,tv">certificateManager.getPrivateCertificates<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagergetprivatecertificates13" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPrivateCertificates(): Promise&lt;CMResult&gt;</p> <p>表示获取应用安装的凭据列表，使用Promise方式异步返回结果。</p> <p><strong>需要权限：</strong> ohos.permission.ACCESS_CERT_MANAGER</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.43.7.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象。表示获取应用安装的凭据列表的结果，返回值<a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#cmresult">CMResult</a>对象中的credentialList属性。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">201</td> <td class="cellrowborder" width="50%">Permission verification failed. The application does not have the permission required to call the API.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  certificateManager.<span class="hljs-title function_">getPrivateCertificates</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cmResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (cmResult === <span class="hljs-literal">undefined</span>) { <span class="hljs-comment">// 应用安装的凭据个数为0时，返回cmResult为undefined。</span></li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'the count of the private certificates is 0'</span>);</li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cmResult.<span class="hljs-property">credentialList</span> == <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The result of getting all private certificates installed by the application is undefined.'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">let</span> list = cmResult.<span class="hljs-property">credentialList</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in getting all private certificates installed by the application.'</span>);</li><li>    }</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get all private certificates installed by the application. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get all private certificates installed by the application. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 2074px;"><h2 id="certificatemanagergetcertificatestorepath18" device-type="phone,2in1,tablet,wearable,tv">certificateManager.getCertificateStorePath<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="certificatemanagergetcertificatestorepath18" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCertificateStorePath(property: CertStoreProperty): string;</p> <p>表示获取证书的存储路径。</p> <p><strong>系统能力：</strong> SystemCapability.Security.CertificateManager</p> <p><strong>参数</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.44.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.44.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.44.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.44.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">property</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-certmanager#certstoreproperty18">CertStoreProperty</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示获取证书存储路径的参数集合。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值</strong>：</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.44.8.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">string</td> <td class="cellrowborder" width="50%">表示证书的存储路径。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-certmanager">证书管理错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.44.11.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">401</td> <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td> </tr> <tr><td class="cellrowborder" width="50%">17500001</td> <td class="cellrowborder" width="50%">Internal error. Possible causes: 1. IPC communication failed; 2. Memory operation error; 3. File operation error.</td> </tr> <tr><td class="cellrowborder" width="50%">17500009</td> <td class="cellrowborder" width="50%">The device does not support the specified certificate store path, such as the overseas device does not support the certificate which algorithm is SM.</td> </tr>  </tbody></table></div> </div> <p><strong>示例</strong>：</p> <div _ngcontent-vof-c106="" class="highlight-div"><div _ngcontent-vof-c106="" class="highlight-div-header"><div _ngcontent-vof-c106="" class="highlight-div-header-left"><div _ngcontent-vof-c106="" class="handle-button expand-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-vof-c106="" class="highlight-div-header-right"><div _ngcontent-vof-c106="" class="handle-button ai-button"></div><div _ngcontent-vof-c106="" class="handle-button line-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-vof-c106="" class="handle-button theme-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-vof-c106="" class="handle-button copy-button"><div _ngcontent-vof-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-vof-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { certificateManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-comment">/* 获取系统CA的存储位置 */</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">property1</span>: certificateManager.<span class="hljs-property">CertStoreProperty</span> = {</li><li>    <span class="hljs-attr">certType</span>: certificateManager.<span class="hljs-property">CertType</span>.<span class="hljs-property">CA_CERT_SYSTEM</span>,</li><li>  }</li><li>  <span class="hljs-keyword">let</span> systemCAPath = certificateManager.<span class="hljs-title function_">getCertificateStorePath</span>(property1);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Success to get system ca path: <span class="hljs-subst">${systemCAPath}</span>`</span>);</li><li>
</li><li>  <span class="hljs-comment">/* 获取当前用户的用户CA存储位置 */</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">property2</span>: certificateManager.<span class="hljs-property">CertStoreProperty</span> = {</li><li>    <span class="hljs-attr">certType</span>: certificateManager.<span class="hljs-property">CertType</span>.<span class="hljs-property">CA_CERT_USER</span>,</li><li>    <span class="hljs-attr">certScope</span>: certificateManager.<span class="hljs-property">CertScope</span>.<span class="hljs-property">CURRENT_USER</span>,</li><li>  }</li><li>  <span class="hljs-keyword">let</span> userCACurrentPath = certificateManager.<span class="hljs-title function_">getCertificateStorePath</span>(property2);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Success to get current user's user ca path: <span class="hljs-subst">${userCACurrentPath}</span>`</span>);</li><li>
</li><li>  <span class="hljs-comment">/* 获取设备公共的用户CA存储位置 */</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">property3</span>: certificateManager.<span class="hljs-property">CertStoreProperty</span> = {</li><li>    <span class="hljs-attr">certType</span>: certificateManager.<span class="hljs-property">CertType</span>.<span class="hljs-property">CA_CERT_USER</span>,</li><li>    <span class="hljs-attr">certScope</span>: certificateManager.<span class="hljs-property">CertScope</span>.<span class="hljs-property">GLOBAL_USER</span>,</li><li>  }</li><li>  <span class="hljs-keyword">let</span> globalCACurrentPath = certificateManager.<span class="hljs-title function_">getCertificateStorePath</span>(property3);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Success to get global user's user ca path: <span class="hljs-subst">${globalCACurrentPath}</span>`</span>);</li><li>
</li><li>  <span class="hljs-comment">/* 获取SM算法系统CA的存储位置 */</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">property4</span>: certificateManager.<span class="hljs-property">CertStoreProperty</span> = {</li><li>    <span class="hljs-attr">certType</span>: certificateManager.<span class="hljs-property">CertType</span>.<span class="hljs-property">CA_CERT_SYSTEM</span>,</li><li>    <span class="hljs-attr">certAlg</span>: certificateManager.<span class="hljs-property">CertAlgorithm</span>.<span class="hljs-property">SM</span>,</li><li>  }</li><li>  <span class="hljs-keyword">let</span> smSystemCAPath = certificateManager.<span class="hljs-title function_">getCertificateStorePath</span>(property4);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Success to get SM system ca path: <span class="hljs-subst">${smSystemCAPath}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get store path. Code: <span class="hljs-subst">${error.code}</span>, message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>