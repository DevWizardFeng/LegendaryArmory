<h1 _ngcontent-lgi-c119="" class="doc-title ng-star-inserted" title="@ohos.taskpool（启动任务池）"> @ohos.taskpool（启动任务池） </h1>

<div _ngcontent-lgi-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>任务池（taskpool）的作用是为应用程序提供多线程运行环境，降低资源消耗并提升系统性能，且您无需关心线程的生命周期。您可以使用任务池API创建后台任务（Task），并进行如执行任务或取消任务等操作。理论上，任务池API允许创建的任务数量不受限制，但由于内存限制，不建议这样做。此外，不建议在任务中执行阻塞操作，尤其是无限期阻塞操作，因为长时间的阻塞操作会占用工作线程，可能阻塞其他任务的调度，影响应用性能。</p>    <p>创建同一优先级的任务时，可以自行决定其执行顺序。任务的实际执行顺序与调用任务池API提供的任务执行接口的顺序一致。任务的默认优先级为MEDIUM。</p>    <p>当同一时间待执行的任务数量大于任务池工作线程数量，任务池会根据负载均衡机制进行扩容，增加工作线程数量，减少整体等待时长。同样，当执行的任务数量减少，工作线程数量大于执行任务数量，部分工作线程处于空闲状态，任务池会根据负载均衡机制进行缩容，减少工作线程数量。</p>    <p>任务池API返回错误码。如需了解各错误码的详细信息，请参阅文档<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>    <p>请查阅<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/taskpool-introduction#taskpool注意事项" target="_blank">TaskPool注意事项</a>，了解使用TaskPool时的相关注意点。</p>    <p>文档中涉及以下任务概念：</p>    <ul>     <li>任务组任务：对应为<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#taskgroup10">TaskGroup</a>任务。</li>     <li>串行队列任务：对应为<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#sequencerunner-11">SequenceRunner</a>任务。</li>     <li>异步队列任务：对应为<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#asyncrunner18">AsyncRunner</a>任务。</li>     <li>周期任务：由<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#taskpoolexecuteperiodically12">executePeriodically</a>执行的任务。</li>    </ul>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 9开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { taskpool } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1615px;">     <h2 id="taskpoolexecute" device-type="phone,2in1,tablet,wearable,tv">taskpool.execute<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolexecute" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>execute(func: Function, ...args: Object[]): Promise&lt;Object&gt;</p>     <p>将待执行的函数放入taskpool的内部任务队列，函数不会立即执行，而是等待分发到工作线程执行。在当前执行模式下，不支持取消任务。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">func</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">执行的逻辑需要传入一个函数，该函数必须使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/taskpool-introduction#concurrent装饰器" target="_blank">@Concurrent装饰器</a>装饰。支持的函数返回值类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">Object[]</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">执行逻辑的函数所需要的入参，支持的参数类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。默认值为undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Object&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回任务函数的执行结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200006</td>         <td class="cellrowborder" width="50%">An exception occurred during serialization.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200014</td>         <td class="cellrowborder" width="50%">The function is not marked as concurrent.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>    <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li>taskpool.<span class="hljs-title function_">execute</span>(printArgs, <span class="hljs-number">100</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">Object</span></span>) =&gt;</span> { <span class="hljs-comment">// 100: test number</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool result: "</span> + value);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1975px;">     <h2 id="taskpoolexecute13" device-type="phone,2in1,tablet,wearable,tv">taskpool.execute<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolexecute13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>execute&lt;A extends Array&lt;Object&gt;, R&gt;(func: (...args: A) =&gt; R | Promise&lt;R&gt;, ...args: A): Promise&lt;R&gt;</p>     <p>校验并发函数的参数类型和返回类型后，将函数添加到taskpool的任务队列。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 13开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">func</td>         <td class="cellrowborder" width="25%">(...args: A) =&gt; R | Promise&lt;R&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">执行的逻辑需要传入函数，必须使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/taskpool-introduction#concurrent装饰器" target="_blank">@Concurrent装饰器</a>装饰，支持的函数返回值类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">A</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">执行逻辑的函数所需要的入参，支持的参数类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。默认值为undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;R&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回任务函数的执行结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Incorrect parameter types; 2.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200006</td>         <td class="cellrowborder" width="50%">An exception occurred during serialization.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200014</td>         <td class="cellrowborder" width="50%">The function is not marked as concurrent.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">testWithThreeParams</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">string</span>, c: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span> {</li><li>  <span class="hljs-keyword">return</span> b;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">testWithArray</span>(<span class="hljs-params">args: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>]</span>): <span class="hljs-built_in">string</span> {</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;</li><li>}</li><li>
</li><li>taskpool.<span class="hljs-property">execute</span>&lt;[<span class="hljs-built_in">number</span>], <span class="hljs-built_in">number</span>&gt;(printArgs, <span class="hljs-number">100</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> { <span class="hljs-comment">// 100: test number</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool result: "</span> + value); <span class="hljs-comment">// "taskpool result: 100"</span></li><li>});</li><li>
</li><li>taskpool.<span class="hljs-property">execute</span>&lt;[<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>], <span class="hljs-built_in">string</span>&gt;(testWithThreeParams, <span class="hljs-number">100</span>, <span class="hljs-string">"test"</span>, <span class="hljs-number">100</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool result: "</span> + value); <span class="hljs-comment">// "taskpool result: test"</span></li><li>});</li><li>
</li><li>taskpool.<span class="hljs-property">execute</span>&lt;[[<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>]], <span class="hljs-built_in">string</span>&gt;(testWithArray, [<span class="hljs-number">100</span>, <span class="hljs-string">"test"</span>]).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool result: "</span> + value); <span class="hljs-comment">// "taskpool result: success"</span></li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1869px;">     <h2 id="taskpoolexecute-1" device-type="phone,2in1,tablet,wearable,tv">taskpool.execute<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolexecute-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>execute(task: Task, priority?: Priority): Promise&lt;Object&gt;</p>     <p>将创建好的任务添加到taskpool的内部任务队列中，任务不会立即执行，而是等待分发到工作线程执行。当前模式支持设置任务优先级和通过cancel取消任务。任务不能是任务组任务、串行队列任务或异步队列任务。非长时任务可以多次调用执行。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">task</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#task">Task</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要在任务池中执行的任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">priority</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#priority">Priority</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">该参数表示等待执行的任务的优先级，默认值为taskpool.Priority.MEDIUM。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Object&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回任务函数的执行结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200006</td>         <td class="cellrowborder" width="50%">An exception occurred during serialization.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200014</td>         <td class="cellrowborder" width="50%">The function is not marked as concurrent.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200051</td>         <td class="cellrowborder" width="50%">The periodic task cannot be executed again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200057</td>         <td class="cellrowborder" width="50%">The task cannot be executed by two APIs.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>    <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task1</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task2</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-number">200</span>); <span class="hljs-comment">// 200: test number</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task3</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-number">300</span>); <span class="hljs-comment">// 300: test number</span></li><li>taskpool.<span class="hljs-title function_">execute</span>(task1, taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">LOW</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool result1: "</span> + value);</li><li>});</li><li>taskpool.<span class="hljs-title function_">execute</span>(task2, taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">MEDIUM</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool result2: "</span> + value);</li><li>});</li><li>taskpool.<span class="hljs-title function_">execute</span>(task3, taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">HIGH</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool result3: "</span> + value);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1845px;">     <h2 id="taskpoolexecute13-1" device-type="phone,2in1,tablet,wearable,tv">taskpool.execute<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolexecute13-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>execute&lt;A extends Array&lt;Object&gt;, R&gt;(task: GenericsTask&lt;A, R&gt;, priority?: Priority): Promise&lt;R&gt;</p>     <p>将创建好的泛型任务放入taskpool的内部任务队列，不校验任务的参数类型和返回值类型。使用Promise异步回调。</p>     <p>execute任务的校验是结合new GenericsTask一起用的，参数、返回值类型需与new GenericsTask中的类型保持一致。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 13开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">task</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#genericstask13">GenericsTask&lt;A, R&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要在任务池中执行的泛型任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">priority</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#priority">Priority</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">等待执行的任务的优先级，默认值为taskpool.Priority.MEDIUM。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;R&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回任务函数的执行结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Incorrect parameter types; 2.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200006</td>         <td class="cellrowborder" width="50%">An exception occurred during serialization.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200014</td>         <td class="cellrowborder" width="50%">The function is not marked as concurrent.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200051</td>         <td class="cellrowborder" width="50%">The periodic task cannot be executed again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200057</td>         <td class="cellrowborder" width="50%">The task cannot be executed by two APIs.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>    <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task1</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-property">GenericsTask</span>&lt;[<span class="hljs-built_in">number</span>], <span class="hljs-built_in">number</span>&gt;(printArgs, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task2</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-property">GenericsTask</span>&lt;[<span class="hljs-built_in">number</span>], <span class="hljs-built_in">number</span>&gt;(printArgs, <span class="hljs-number">200</span>); <span class="hljs-comment">// 200: test number</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task3</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-property">GenericsTask</span>&lt;[<span class="hljs-built_in">number</span>], <span class="hljs-built_in">number</span>&gt;(printArgs, <span class="hljs-number">300</span>); <span class="hljs-comment">// 300: test number</span></li><li>taskpool.<span class="hljs-property">execute</span>&lt;[<span class="hljs-built_in">number</span>], <span class="hljs-built_in">number</span>&gt;(task1, taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">LOW</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool result1: "</span> + value);</li><li>});</li><li>taskpool.<span class="hljs-property">execute</span>&lt;[<span class="hljs-built_in">number</span>], <span class="hljs-built_in">number</span>&gt;(task2, taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">MEDIUM</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool result2: "</span> + value);</li><li>});</li><li>taskpool.<span class="hljs-property">execute</span>&lt;[<span class="hljs-built_in">number</span>], <span class="hljs-built_in">number</span>&gt;(task3, taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">HIGH</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool result3: "</span> + value);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1824px;">     <h2 id="taskpoolexecute10" device-type="phone,2in1,tablet,wearable,tv">taskpool.execute<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolexecute10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>execute(group: TaskGroup, priority?: Priority): Promise&lt;Object[]&gt;</p>     <p>将创建好的任务组放入taskpool内部任务队列，任务组中的任务不会立即执行，而是等待分发到工作线程执行。任务组中任务全部执行完成后，结果数组统一返回。此模式适用于执行关联任务。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">group</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#taskgroup10">TaskGroup</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要在任务池中执行的任务组。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">priority</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#priority">Priority</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">等待执行的任务组的优先级，该参数默认值为taskpool.Priority.MEDIUM。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Object[]&gt;</td>         <td class="cellrowborder" width="50%">Promise对象数组，返回任务函数的执行结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200006</td>         <td class="cellrowborder" width="50%">An exception occurred during serialization.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>    <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskGroup1</span>: taskpool.<span class="hljs-property">TaskGroup</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">TaskGroup</span>();</li><li>taskGroup1.<span class="hljs-title function_">addTask</span>(printArgs, <span class="hljs-number">10</span>); <span class="hljs-comment">// 10: test number</span></li><li>taskGroup1.<span class="hljs-title function_">addTask</span>(printArgs, <span class="hljs-number">20</span>); <span class="hljs-comment">// 20: test number</span></li><li>taskGroup1.<span class="hljs-title function_">addTask</span>(printArgs, <span class="hljs-number">30</span>); <span class="hljs-comment">// 30: test number</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskGroup2</span>: taskpool.<span class="hljs-property">TaskGroup</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">TaskGroup</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task1</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task2</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-number">200</span>); <span class="hljs-comment">// 200: test number</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task3</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-number">300</span>); <span class="hljs-comment">// 300: test number</span></li><li>taskGroup2.<span class="hljs-title function_">addTask</span>(task1);</li><li>taskGroup2.<span class="hljs-title function_">addTask</span>(task2);</li><li>taskGroup2.<span class="hljs-title function_">addTask</span>(task3);</li><li>taskpool.<span class="hljs-title function_">execute</span>(taskGroup1).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">Object</span>&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool execute res is:"</span> + res);</li><li>});</li><li>taskpool.<span class="hljs-title function_">execute</span>(taskGroup2).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">Object</span>&gt;</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool execute res is:"</span> + res);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1945px;">     <h2 id="taskpoolexecutedelayed11" device-type="phone,2in1,tablet,wearable,tv">taskpool.executeDelayed<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolexecutedelayed11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>executeDelayed(delayTime: number, task: Task, priority?: Priority): Promise&lt;Object&gt;</p>     <p>延时执行任务。当前执行模式可以设置任务优先级，并且可以尝试调用cancel取消任务。该任务不能是任务组任务、串行队列任务、异步队列任务或周期任务。如果任务不是长时任务，可以多次调用executeDelayed执行；如果是长时任务，则仅支持执行一次。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">delayTime</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">延时时间。单位为ms。delayTime值必须要大于等于0。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">task</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#task">Task</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要延时执行的任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">priority</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#priority">Priority</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">延时执行的任务的优先级，该参数默认值为taskpool.Priority.MEDIUM。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Object&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回任务函数的执行结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200006</td>         <td class="cellrowborder" width="50%">An exception occurred during serialization.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200014</td>         <td class="cellrowborder" width="50%">The function is not marked as concurrent.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200028</td>         <td class="cellrowborder" width="50%">The delayTime is less than zero.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200051</td>         <td class="cellrowborder" width="50%">The periodic task cannot be executed again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200057</td>         <td class="cellrowborder" width="50%">The task cannot be executed by two APIs.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// import BusinessError</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool start time is: "</span> + t);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li>taskpool.<span class="hljs-title function_">executeDelayed</span>(<span class="hljs-number">1000</span>, task).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">// 1000: delayTime is 1000ms</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool execute success"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool execute: Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1787px;">     <h2 id="taskpoolexecutedelayed13" device-type="phone,2in1,tablet,wearable,tv">taskpool.executeDelayed<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolexecutedelayed13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>executeDelayed&lt;A extends Array&lt;Object&gt;, R&gt;(delayTime: number, task: GenericsTask&lt;A, R&gt;, priority?: Priority): Promise&lt;R&gt;</p>     <p>延时执行泛型任务，不校验任务的参数类型和返回值类型。使用Promise异步回调。</p>     <p>executeDelayed任务的校验是结合new GenericsTask一起用的，参数、返回值类型需与new GenericsTask中的类型保持一致。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 13开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">delayTime</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">延时时间。单位为ms。delayTime值必须要大于等于0。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">task</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#genericstask13">GenericsTask&lt;A, R&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要延时执行的泛型任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">priority</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#priority">Priority</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">延时执行的任务的优先级，默认值为taskpool.Priority.MEDIUM。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;R&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回任务函数的执行结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Incorrect parameter types; 2.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200028</td>         <td class="cellrowborder" width="50%">The delayTime is less than zero.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200051</td>         <td class="cellrowborder" width="50%">The periodic task cannot be executed again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200057</td>         <td class="cellrowborder" width="50%">The task cannot be executed by two APIs.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// import BusinessError</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span></li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-property">GenericsTask</span>&lt;[<span class="hljs-built_in">number</span>], <span class="hljs-built_in">string</span>&gt;(printArgs, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li>taskpool.<span class="hljs-property">executeDelayed</span>&lt;[<span class="hljs-built_in">number</span>], <span class="hljs-built_in">string</span>&gt;(<span class="hljs-number">1000</span>, task).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">string</span></span>) =&gt;</span> { <span class="hljs-comment">// 1000: delayTime is 1000ms</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool execute success"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool execute: Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2230px;">     <h2 id="taskpoolexecuteperiodically12" device-type="phone,2in1,tablet,wearable,tv">taskpool.executePeriodically<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolexecuteperiodically12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>executePeriodically(period: number, task: Task, priority?: Priority): void</p>     <p>周期任务每隔period时长执行一次。当前执行模式支持设置任务优先级，并可以通过调用cancel取消周期任务的执行。周期任务不能是任务组任务、串行队列任务或异步队列任务，不能再次调用执行接口，且执行的任务不能拥有依赖关系。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">period</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">周期时长。单位为ms。period值必须要大于等于0。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">task</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#task">Task</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要周期执行的任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">priority</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#priority">Priority</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">周期执行的任务的优先级，该参数默认值为taskpool.Priority.MEDIUM。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍，请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200006</td>         <td class="cellrowborder" width="50%">An exception occurred during serialization.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200014</td>         <td class="cellrowborder" width="50%">The function is not marked as concurrent.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200028</td>         <td class="cellrowborder" width="50%">The period is less than zero.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200050</td>         <td class="cellrowborder" width="50%">The concurrent task has been executed and cannot be executed periodically.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200057</td>         <td class="cellrowborder" width="50%">The task cannot be executed by two APIs.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>}</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">testExecutePeriodically</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">let</span> t = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> ((<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t) &lt; args) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">sendData</span>(args); <span class="hljs-comment">// 向宿主线程发送消息</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printResult</span>(<span class="hljs-params">data: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool: data is: "</span> + data);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">taskpoolTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li>    taskpool.<span class="hljs-title function_">executePeriodically</span>(<span class="hljs-number">1000</span>, task); <span class="hljs-comment">// 1000: period is 1000ms</span></li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool execute-1: Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">periodicTask</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(testExecutePeriodically, <span class="hljs-number">200</span>); <span class="hljs-comment">// 200: test number</span></li><li>    periodicTask.<span class="hljs-title function_">onReceiveData</span>(printResult);</li><li>    taskpool.<span class="hljs-title function_">executePeriodically</span>(<span class="hljs-number">1000</span>, periodicTask); <span class="hljs-comment">// 1000: period is 1000ms</span></li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool execute-2: Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-title function_">taskpoolTest</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2230px;">     <h2 id="taskpoolexecuteperiodically13" device-type="phone,2in1,tablet,wearable,tv">taskpool.executePeriodically<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolexecuteperiodically13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>executePeriodically&lt;A extends Array&lt;Object&gt;, R&gt;(period: number, task: GenericsTask&lt;A, R&gt;, priority?: Priority): void</p>     <p>周期执行泛型任务，每隔period时长执行一次。不校验任务的参数类型和返回值类型。</p>     <p>executePeriodically任务的校验是结合new GenericsTask一起用的，参数、返回值类型需与new GenericsTask中的类型保持一致。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 13开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">period</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">周期时长。单位为ms。period值必须要大于等于0。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">task</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#genericstask13">GenericsTask&lt;A, R&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要周期执行的泛型任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">priority</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#priority">Priority</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">周期执行的任务的优先级，该参数默认值为taskpool.Priority.MEDIUM。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Incorrect parameter types; 2.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200006</td>         <td class="cellrowborder" width="50%">An exception occurred during serialization.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200014</td>         <td class="cellrowborder" width="50%">The function is not marked as concurrent.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200028</td>         <td class="cellrowborder" width="50%">The period is less than zero.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200050</td>         <td class="cellrowborder" width="50%">The concurrent task has been executed and cannot be executed periodically.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200057</td>         <td class="cellrowborder" width="50%">The task cannot be executed by two APIs.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>}</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">testExecutePeriodically</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">let</span> t = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> ((<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t) &lt; args) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">sendData</span>(args); <span class="hljs-comment">// 向宿主线程发送消息</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printResult</span>(<span class="hljs-params">data: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool: data is: "</span> + data);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">taskpoolTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-property">GenericsTask</span>&lt;[<span class="hljs-built_in">number</span>], <span class="hljs-built_in">void</span>&gt;(printArgs, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li>    taskpool.<span class="hljs-property">executePeriodically</span>&lt;[<span class="hljs-built_in">number</span>], <span class="hljs-built_in">void</span>&gt;(<span class="hljs-number">1000</span>, task); <span class="hljs-comment">// 1000: period is 1000ms</span></li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool execute-1: Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">periodicTask</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-property">GenericsTask</span>&lt;[<span class="hljs-built_in">number</span>], <span class="hljs-built_in">void</span>&gt;(testExecutePeriodically, <span class="hljs-number">200</span>); <span class="hljs-comment">// 200: test number</span></li><li>    periodicTask.<span class="hljs-title function_">onReceiveData</span>(printResult);</li><li>    taskpool.<span class="hljs-property">executePeriodically</span>&lt;[<span class="hljs-built_in">number</span>], <span class="hljs-built_in">void</span>&gt;(<span class="hljs-number">1000</span>, periodicTask); <span class="hljs-comment">// 1000: period is 1000ms</span></li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool execute-2: Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-title function_">taskpoolTest</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2256px;">     <h2 id="taskpoolcancel" device-type="phone,2in1,tablet,wearable,tv">taskpool.cancel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolcancel" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cancel(task: Task): void</p>     <p>取消任务池中的任务。当任务在taskpool等待队列中，取消该任务后该任务将不再执行，并返回任务被取消的异常；当任务已经在taskpool工作线程执行，取消该任务并不影响任务继续执行，执行结果在catch分支返回，搭配isCanceled使用可以对任务取消行为作出响应。taskpool.cancel对其之前的taskpool.execute、taskpool.executeDelayed或taskpool.executePeriodically生效。</p>     <p>从API version 20开始，支持在执行cancel操作后，在catch分支里使用BusinessError&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#taskresult20">taskpool.TaskResult</a>&gt;的泛型标记，来获取任务中抛出的异常信息或最终的执行结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">task</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#task">Task</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要取消执行的任务。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">10200015</td>         <td class="cellrowborder" width="50%">The task to cancel does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200055</td>         <td class="cellrowborder" width="50%">The asyncRunner task has been canceled.</td>        </tr>             </tbody></table></div>     </div>     <p>从API version 10开始，此接口调用时不再涉及上报错误码10200016。</p>     <p><strong>正在执行的任务取消示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">inspectStatus</span>(<span class="hljs-params">arg: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-comment">// 第一次检查任务是否已经取消并作出响应</span></li><li>  <span class="hljs-keyword">if</span> (taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">isCanceled</span>()) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"task has been canceled before 2s sleep."</span>);</li><li>    <span class="hljs-keyword">return</span> arg + <span class="hljs-number">2</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 2s sleep</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t &lt; <span class="hljs-number">2000</span>) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 第二次检查任务是否已经取消并作出响应</span></li><li>  <span class="hljs-keyword">if</span> (taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">isCanceled</span>()) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"task has been canceled after 2s sleep."</span>);</li><li>    <span class="hljs-keyword">return</span> arg + <span class="hljs-number">3</span>;</li><li>  }</li><li>  <span class="hljs-keyword">return</span> arg + <span class="hljs-number">1</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">concurrentFunc</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task1</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(inspectStatus, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task2</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(inspectStatus, <span class="hljs-number">200</span>); <span class="hljs-comment">// 200: test number</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task3</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(inspectStatus, <span class="hljs-number">300</span>); <span class="hljs-comment">// 300: test number</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task4</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(inspectStatus, <span class="hljs-number">400</span>); <span class="hljs-comment">// 400: test number</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task5</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(inspectStatus, <span class="hljs-number">500</span>); <span class="hljs-comment">// 500: test number</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task6</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(inspectStatus, <span class="hljs-number">600</span>); <span class="hljs-comment">// 600: test number</span></li><li>  taskpool.<span class="hljs-title function_">execute</span>(task1).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool test result: "</span> + res);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"taskpool catch err: "</span> + err.<span class="hljs-property">message</span>);</li><li>  });</li><li>  taskpool.<span class="hljs-title function_">execute</span>(task2);</li><li>  taskpool.<span class="hljs-title function_">execute</span>(task3);</li><li>  taskpool.<span class="hljs-title function_">execute</span>(task4);</li><li>  taskpool.<span class="hljs-title function_">execute</span>(task5);</li><li>  taskpool.<span class="hljs-title function_">execute</span>(task6);</li><li>  <span class="hljs-comment">// 1s后取消task</span></li><li>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      taskpool.<span class="hljs-title function_">cancel</span>(task1);</li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool: cancel error code: <span class="hljs-subst">${e.code}</span>, info: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>    }</li><li>  }, <span class="hljs-number">1000</span>);</li><li>}</li><li>
</li><li><span class="hljs-title function_">concurrentFunc</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1848px;">     <h2 id="taskpoolcancel10" device-type="phone,2in1,tablet,wearable,tv">taskpool.cancel<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolcancel10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cancel(group: TaskGroup): void</p>     <p>取消任务池中的任务组。如果任务组中的任务未全部执行结束，返回undefined作为任务组结果。</p>     <p>从API version 20开始，支持在执行cancel操作后，在catch分支里使用BusinessError&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#taskresult20">taskpool.TaskResult</a>&gt;的泛型标记，来获取任务中抛出的异常信息或最终的执行结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">group</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#taskgroup10">TaskGroup</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要取消执行的任务组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200018</td>         <td class="cellrowborder" width="50%">The task group to cancel does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t &lt; <span class="hljs-number">2000</span>) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">concurrentFunc</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskGroup1</span>: taskpool.<span class="hljs-property">TaskGroup</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">TaskGroup</span>();</li><li>  taskGroup1.<span class="hljs-title function_">addTask</span>(printArgs, <span class="hljs-number">10</span>); <span class="hljs-comment">// 10: test number</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskGroup2</span>: taskpool.<span class="hljs-property">TaskGroup</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">TaskGroup</span>();</li><li>  taskGroup2.<span class="hljs-title function_">addTask</span>(printArgs, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li>  taskpool.<span class="hljs-title function_">execute</span>(taskGroup1).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">Object</span>&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskGroup1 res is:"</span> + res);</li><li>  });</li><li>  taskpool.<span class="hljs-title function_">execute</span>(taskGroup2).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">Object</span>&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskGroup2 res is:"</span> + res);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"taskGroup2 catch err: "</span> + err.<span class="hljs-property">message</span>);</li><li>  });</li><li>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      taskpool.<span class="hljs-title function_">cancel</span>(taskGroup2);</li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool: cancel error code: <span class="hljs-subst">${e.code}</span>, info: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>    }</li><li>  }, <span class="hljs-number">1000</span>);</li><li>}</li><li>
</li><li><span class="hljs-title function_">concurrentFunc</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1920px;">     <h2 id="taskpoolcancel18" device-type="phone,2in1,tablet,wearable,tv">taskpool.cancel<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolcancel18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cancel(taskId: number): void</p>     <p>通过任务ID取消任务池中的任务。如果任务在taskpool等待队列中，取消后任务将不再执行，并返回任务取消的异常。如果任务已在taskpool工作线程中执行，取消不影响任务继续执行，执行结果在catch分支返回。使用isCanceled可以对任务取消行为作出响应。taskpool.cancel对其之前的taskpool.execute或taskpool.executeDelayed生效。在其他线程调用taskpool.cancel时，需注意其行为是异步的，可能影响之后的taskpool.execute或taskpool.executeDelayed。</p>     <p>从API version 20开始，支持在执行cancel操作后，在catch分支里使用BusinessError&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#taskresult20">taskpool.TaskResult</a>&gt;的泛型标记。这可以用来获取任务中抛出的异常信息或最终的执行结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">taskId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要取消执行的任务的ID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">10200015</td>         <td class="cellrowborder" width="50%">The task to cancel does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200055</td>         <td class="cellrowborder" width="50%">The asyncRunner task has been canceled.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t &lt; <span class="hljs-number">2000</span>) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">isCanceled</span>()) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"task has been canceled after 2s sleep."</span>);</li><li>    <span class="hljs-keyword">return</span> args + <span class="hljs-number">1</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">cancelFunction</span>(<span class="hljs-params">taskId: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    taskpool.<span class="hljs-title function_">cancel</span>(taskId);</li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool: cancel error code: <span class="hljs-subst">${e.code}</span>, info: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">concurrentFunc</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> task = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li>  taskpool.<span class="hljs-title function_">execute</span>(task).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"taskpool catch err: "</span> + err.<span class="hljs-property">message</span>);</li><li>  });</li><li>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> cancelTask = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(cancelFunction, task.<span class="hljs-property">taskId</span>);</li><li>    taskpool.<span class="hljs-title function_">execute</span>(cancelTask);</li><li>  }, <span class="hljs-number">1000</span>);</li><li>}</li><li>
</li><li><span class="hljs-title function_">concurrentFunc</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1337px;">     <h2 id="taskpoolterminatetask12" device-type="phone,2in1,tablet,wearable,tv">taskpool.terminateTask<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolterminatetask12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>terminateTask(longTask: LongTask): void</p>     <p>中止任务池中的长时任务，在长时任务执行完成后调用。中止后，执行长时任务的线程可能会被回收。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API</strong>： 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">longTask</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#longtask12">LongTask</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要中止的长时任务。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">longTask</span>(<span class="hljs-params">arg: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t &lt; arg) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"longTask has been executed."</span>);</li><li>  <span class="hljs-keyword">return</span> arg;</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">concurrentFunc</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task1</span>: taskpool.<span class="hljs-property">LongTask</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">LongTask</span>(longTask, <span class="hljs-number">1000</span>); <span class="hljs-comment">// 1000: sleep time</span></li><li>  taskpool.<span class="hljs-title function_">execute</span>(task1).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>    taskpool.<span class="hljs-title function_">terminateTask</span>(task1);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool longTask result: "</span> + res);</li><li>  });</li><li>}</li><li>
</li><li><span class="hljs-title function_">concurrentFunc</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1196px;">     <h2 id="taskpoolisconcurrent12" device-type="phone,2in1,tablet,wearable,tv">taskpool.isConcurrent<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolisconcurrent12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isConcurrent(func: Function): boolean</p>     <p>检查函数是否为并发函数。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API</strong>： 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">func</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要检查的函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">如果被检查函数标注了<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/taskpool-introduction#concurrent装饰器" target="_blank">@Concurrent装饰器</a>，则返回true，否则返回false。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) {}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">result</span>: <span class="hljs-title class_">Boolean</span> = taskpool.<span class="hljs-title function_">isConcurrent</span>(test);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"result is: "</span> + result);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 658px;">     <h2 id="taskpoolgettaskpoolinfo10" device-type="phone,2in1,tablet,wearable,tv">taskpool.getTaskPoolInfo<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolgettaskpoolinfo10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getTaskPoolInfo(): TaskPoolInfo</p>     <p>获取任务池的线程信息和任务信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#taskpoolinfo10">TaskPoolInfo</a></td>         <td class="cellrowborder" width="50%">任务池的内部信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskpoolInfo</span>: taskpool.<span class="hljs-property">TaskPoolInfo</span> = taskpool.<span class="hljs-title function_">getTaskPoolInfo</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1541px;">     <h2 id="priority" device-type="phone,2in1,tablet,wearable,tv">Priority<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="priority" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示所创建任务（Task）执行时的优先级。工作线程优先级跟随任务优先级更新，对应关系参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/qos-guidelines#qos等级定义" target="_blank">QoS等级定义</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">HIGH</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>任务为高优先级。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MEDIUM</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>任务为中优先级。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">LOW</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>任务为低优先级。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">IDLE<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>任务为后台任务。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t &lt; <span class="hljs-number">1000</span>) { <span class="hljs-comment">// 1000: delay 1s</span></li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> allCount = <span class="hljs-number">100</span>; <span class="hljs-comment">// 100: test number</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskArray</span>: <span class="hljs-title class_">Array</span>&lt;taskpool.<span class="hljs-property">Task</span>&gt; = [];</li><li><span class="hljs-comment">// 创建400个任务并添加至taskArray</span></li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-attr">i</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>; i &lt; allCount; i++) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task1</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, i);</li><li>  taskArray.<span class="hljs-title function_">push</span>(task1);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task2</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, i * <span class="hljs-number">10</span>); <span class="hljs-comment">// 10: test number</span></li><li>  taskArray.<span class="hljs-title function_">push</span>(task2);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task3</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, i * <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li>  taskArray.<span class="hljs-title function_">push</span>(task3);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task4</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, i * <span class="hljs-number">1000</span>); <span class="hljs-comment">// 1000: test number</span></li><li>  taskArray.<span class="hljs-title function_">push</span>(task4);</li><li>}</li><li>
</li><li><span class="hljs-comment">// 从taskArray中获取不同的任务并给定不同优先级执行</span></li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> <span class="hljs-attr">i</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>; i &lt; taskArray.<span class="hljs-property">length</span>; i+=<span class="hljs-number">4</span>) { <span class="hljs-comment">// 4: 每次执行4个任务，循环取任务时需后移4项，确保执行的是不同的任务</span></li><li>  taskpool.<span class="hljs-title function_">execute</span>(taskArray[i], taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">HIGH</span>);</li><li>  taskpool.<span class="hljs-title function_">execute</span>(taskArray[i + <span class="hljs-number">1</span>], taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">LOW</span>);</li><li>  taskpool.<span class="hljs-title function_">execute</span>(taskArray[i + <span class="hljs-number">2</span>], taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">MEDIUM</span>);</li><li>  taskpool.<span class="hljs-title function_">execute</span>(taskArray[i + <span class="hljs-number">3</span>], taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">IDLE</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="task" device-type="phone,2in1,tablet,wearable,tv">Task<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="task" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>任务可以多次执行，也可以放入任务组、串行队列或异步队列执行，还支持添加依赖关系。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1611px;">     <h3 id="属性" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">function</td>         <td class="cellrowborder" width="20%">Function</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>创建任务时需要传入的函数，支持的函数返回值类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">arguments</td>         <td class="cellrowborder" width="20%">Object[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>创建任务传入函数所需的参数，支持的参数类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">name<sup>11+</sup></td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>创建任务时指定的任务名称。不建议修改此值。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">taskId<sup>18+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>任务的ID。任务的标识符，系统默认提供全局唯一值，不建议修改此值。</p>          <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">totalDuration<sup>11+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>执行任务总耗时。单位为ms。不建议修改此值。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">ioDuration<sup>11+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>执行任务异步IO耗时。单位为ms。不建议修改此值。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">cpuDuration<sup>11+</sup></td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>执行任务CPU耗时。单位为ms。不建议修改此值。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1237px;">     <h3 id="constructor" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(func: Function, ...args: Object[])</p>     <p>Task的构造函数。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">func</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">执行的逻辑需要传入函数，必须使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/taskpool-introduction#concurrent装饰器" target="_blank">@Concurrent装饰器</a>装饰，支持的函数返回值类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">Object[]</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">任务执行传入函数的入参，支持的参数类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。默认值为undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameters are invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200014</td>         <td class="cellrowborder" width="50%">The function is not marked as concurrent.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-string">"this is my first Task"</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1330px;">     <h3 id="constructor11" device-type="phone,2in1,tablet,wearable,tv">constructor<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(name: string, func: Function, ...args: Object[])</p>     <p>Task的构造函数用于创建任务，并可指定任务名称。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">任务名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">func</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">执行的逻辑需要传入函数，必须使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/taskpool-introduction#concurrent装饰器" target="_blank">@Concurrent装饰器</a>装饰，支持的函数返回值类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">Object[]</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">任务执行时传入函数的参数。支持的类型请参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。默认值为undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameters are invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200014</td>         <td class="cellrowborder" width="50%">The function is not marked as concurrent.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"taskName"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(taskName, printArgs, <span class="hljs-string">"this is my first Task"</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = task.<span class="hljs-property">name</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1762px;">     <h3 id="iscanceled10" device-type="phone,2in1,tablet,wearable,tv">isCanceled<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="iscanceled10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static isCanceled(): boolean</p>     <p>检查当前正在运行的任务是否已取消。使用此方法前，需要先创建一个Task对象。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">如果当前正在运行的任务被取消返回true，否则返回false。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">inspectStatus</span>(<span class="hljs-params">arg: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-comment">// do something</span></li><li>    <span class="hljs-keyword">if</span> (taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">isCanceled</span>()) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"task has been canceled."</span>);</li><li>      <span class="hljs-comment">// do something</span></li><li>      <span class="hljs-keyword">return</span> arg + <span class="hljs-number">1</span>;</li><li>    }</li><li>    <span class="hljs-comment">// do something</span></li><li>    <span class="hljs-keyword">return</span> arg;</li><li>}</li></ol></pre></div></div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>isCanceled方法需要和taskpool.cancel方法搭配使用，如果不调用cancel方法，isCanceled方法默认返回false。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">inspectStatus</span>(<span class="hljs-params">arg: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-comment">// 第一次检查任务是否已经取消并作出响应</span></li><li>  <span class="hljs-keyword">if</span> (taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">isCanceled</span>()) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"task has been canceled before 2s sleep."</span>);</li><li>    <span class="hljs-keyword">return</span> arg + <span class="hljs-number">2</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 延时2s</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t &lt; <span class="hljs-number">2000</span>) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 第二次检查任务是否已经取消并作出响应</span></li><li>  <span class="hljs-keyword">if</span> (taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">isCanceled</span>()) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"task has been canceled after 2s sleep."</span>);</li><li>    <span class="hljs-keyword">return</span> arg + <span class="hljs-number">3</span>;</li><li>  }</li><li>  <span class="hljs-keyword">return</span> arg + <span class="hljs-number">1</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(inspectStatus, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li>taskpool.<span class="hljs-title function_">execute</span>(task).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool test result: "</span> + res);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"taskpool test occur error: "</span> + err);</li><li>});</li><li><span class="hljs-comment">// 不调用cancel，isCanceled()默认返回false，task执行的结果为101</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1788px;">     <h3 id="settransferlist10" device-type="phone,2in1,tablet,wearable,tv">setTransferList<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="settransferlist10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setTransferList(transfer?: ArrayBuffer[]): void</p>     <p>设置任务的传输列表。使用该方法前需要先构造Task。不调用该接口，则传给任务的数据中的ArrayBuffer默认transfer转移。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>此接口可以设置任务池中ArrayBuffer的transfer列表，transfer列表中的ArrayBuffer对象在传输时不会复制buffer内容到工作线程而是转移buffer控制权至工作线程，传输后当前的ArrayBuffer失效。若ArrayBuffer为空，则不会transfer转移。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">transfer</td>         <td class="cellrowborder" width="25%">ArrayBuffer[]</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">可传输对象是ArrayBuffer的实例对象，默认为空数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Incorrect parameter types; 2. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200029</td>         <td class="cellrowborder" width="50%">An ArrayBuffer cannot be set as both a transfer list and a clone list.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">testTransfer</span>(<span class="hljs-params">arg1: <span class="hljs-built_in">ArrayBuffer</span>, arg2: <span class="hljs-built_in">ArrayBuffer</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"testTransfer arg1 byteLength: "</span> + arg1.<span class="hljs-property">byteLength</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"testTransfer arg2 byteLength: "</span> + arg2.<span class="hljs-property">byteLength</span>);</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">buffer</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">8</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">view</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">buffer1</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">view1</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer1);</li><li>
</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"testTransfer view byteLength: "</span> + view.<span class="hljs-property">byteLength</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"testTransfer view1 byteLength: "</span> + view1.<span class="hljs-property">byteLength</span>);</li><li><span class="hljs-comment">// 执行结果为：</span></li><li><span class="hljs-comment">// testTransfer view byteLength: 8</span></li><li><span class="hljs-comment">// testTransfer view1 byteLength: 16</span></li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(testTransfer, view, view1);</li><li>task.<span class="hljs-title function_">setTransferList</span>([view.<span class="hljs-property">buffer</span>, view1.<span class="hljs-property">buffer</span>]);</li><li>taskpool.<span class="hljs-title function_">execute</span>(task).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"test result: "</span> + res);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"test catch: "</span> + e);</li><li>})</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"testTransfer view2 byteLength: "</span> + view.<span class="hljs-property">byteLength</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"testTransfer view3 byteLength: "</span> + view1.<span class="hljs-property">byteLength</span>);</li><li><span class="hljs-comment">// 经过transfer转移之后值为0，执行结果为：</span></li><li><span class="hljs-comment">// testTransfer view2 byteLength: 0</span></li><li><span class="hljs-comment">// testTransfer view3 byteLength: 0</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4248px;">     <h3 id="setclonelist11" device-type="phone,2in1,tablet,wearable,tv">setCloneList<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setclonelist11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setCloneList(cloneList: Object[] | ArrayBuffer[]): void</p>     <p>设置任务的拷贝列表。在使用该方法前，需先构造Task对象。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>需搭配<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#sendable装饰器" target="_blank">@Sendable装饰器</a>使用，否则会抛异常。建议开发者使用该装饰器以避免异常。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">cloneList</td>         <td class="cellrowborder" width="25%">Object[] | ArrayBuffer[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>- 传入数组的类型必须为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#sendable支持的数据类型" target="_blank">Sendable支持的数据类型</a>或ArrayBuffer。</p>          <p>- 所有传入cloneList的对象持有的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-sendable#sendable-class" target="_blank">Sendable class</a>实例或ArrayBuffer类型对象，在线程间传输的行为都会变成拷贝传递，即修改传输后的对象不会对原有对象产生任何影响。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200029</td>         <td class="cellrowborder" width="50%">An ArrayBuffer cannot be set as both a transfer list and a clone list.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// sendable.ets</span></li><li><span class="hljs-comment">// 定义两个Sendable class：BaseClass及其子类DeriveClass</span></li><li><span class="hljs-meta">@Sendable</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseClass</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">str</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"sendable: BaseClass"</span>;</li><li>  <span class="hljs-keyword">static</span> num :<span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;</li><li>  <span class="hljs-attr">str1</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"sendable: this is BaseClass's string"</span>;</li><li>  <span class="hljs-attr">num1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>;</li><li>  <span class="hljs-attr">isDone1</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">fibonacciRecursive</span>(<span class="hljs-attr">n</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) {</li><li>      <span class="hljs-keyword">return</span> n;</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fibonacciRecursive</span>(n - <span class="hljs-number">1</span>) + <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fibonacciRecursive</span>(n - <span class="hljs-number">2</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">privateFunc</span>(<span class="hljs-attr">num</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span>{</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">number</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fibonacciRecursive</span>(num);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"sendable: BaseClass privateFunc res is: "</span> + res);</li><li>    <span class="hljs-keyword">return</span> res;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">publicFunc</span>(<span class="hljs-attr">num</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">privateFunc</span>(num);</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">get</span> <span class="hljs-title function_">GetNum</span>(): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">num1</span>;</li><li>  }</li><li>  <span class="hljs-keyword">set</span> <span class="hljs-title function_">SetNum</span>(<span class="hljs-params">num: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">num1</span> = num;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">str</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isDone1</span> = <span class="hljs-literal">true</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Sendable</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeriveClass</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BaseClass</span> {</li><li>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"sendable: this is DeriveClass"</span>;</li><li>  <span class="hljs-title function_">printName</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);</li><li>  }</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// index.ets</span></li><li><span class="hljs-comment">// 宿主线程（这里的宿主线程为UI主线程）调用taskpool，在taskpool线程中调用BaseClass和DeriveClass的方法、访问对应属性</span></li><li><span class="hljs-keyword">import</span> { taskpool } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BaseClass</span>, <span class="hljs-title class_">DeriveClass</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./sendable'</span>;</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">testFunc</span>(<span class="hljs-params">arr: <span class="hljs-built_in">Array</span>&lt;BaseClass&gt;, num: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> baseInstance1 = arr[<span class="hljs-number">0</span>];</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"sendable: str1 is: "</span> + baseInstance1.<span class="hljs-property">str1</span>);</li><li>  baseInstance1.<span class="hljs-property">SetNum</span> = <span class="hljs-number">100</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"sendable: num1 is: "</span> + baseInstance1.<span class="hljs-property">GetNum</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"sendable: isDone1 is: "</span> + baseInstance1.<span class="hljs-property">isDone1</span>);</li><li>  <span class="hljs-comment">// 获取斐波那契数列第num项的结果</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">number</span> = baseInstance1.<span class="hljs-title function_">publicFunc</span>(num);</li><li>  <span class="hljs-keyword">return</span> res;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printLog</span>(<span class="hljs-params">arr: <span class="hljs-built_in">Array</span>&lt;DeriveClass&gt;</span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">let</span> deriveInstance = arr[<span class="hljs-number">0</span>];</li><li>  deriveInstance.<span class="hljs-title function_">printName</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        <span class="hljs-title class_">Button</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">"TaskPool Test"</span>);</li><li>        }.<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// task1访问调用BaseClass.str1/BaseClass.SetNum/BaseClass.GetNum/BaseClass.isDone1/BaseClass.publicFunc</span></li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">baseInstance1</span>: <span class="hljs-title class_">BaseClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaseClass</span>();</li><li>          <span class="hljs-keyword">let</span> array1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">BaseClass</span>&gt;();</li><li>          array1.<span class="hljs-title function_">push</span>(baseInstance1);</li><li>          <span class="hljs-keyword">let</span> task1 = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(testFunc, array1, <span class="hljs-number">10</span>);</li><li>          task1.<span class="hljs-title function_">setCloneList</span>(array1);</li><li>          taskpool.<span class="hljs-title function_">execute</span>(task1).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"sendable: task1 res is: "</span> + res);</li><li>          }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e:BusinessError</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`sendable: task1 execute Code is <span class="hljs-subst">${e.code}</span>, message is <span class="hljs-subst">${e.message}</span>`</span>);</li><li>          })</li><li>
</li><li>          <span class="hljs-comment">// task2调用DeriveClass.printName</span></li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">deriveInstance</span>: <span class="hljs-title class_">DeriveClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeriveClass</span>();</li><li>          <span class="hljs-keyword">let</span> array2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">DeriveClass</span>&gt;();</li><li>          array2.<span class="hljs-title function_">push</span>(deriveInstance);</li><li>          <span class="hljs-keyword">let</span> task2 = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printLog, array2);</li><li>          task2.<span class="hljs-title function_">setCloneList</span>(array2);</li><li>          taskpool.<span class="hljs-title function_">execute</span>(task2).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"sendable: task2 execute success"</span>);</li><li>          }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e:BusinessError</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`sendable: task2 execute Code is <span class="hljs-subst">${e.code}</span>, message is <span class="hljs-subst">${e.message}</span>`</span>);</li><li>          })</li><li>        })</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'15%'</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'30%'</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2597px;">     <h3 id="senddata11" device-type="phone,2in1,tablet,wearable,tv">sendData<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="senddata11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static sendData(...args: Object[]): void</p>     <p>任务执行过程中向宿主线程发送消息并触发回调。使用此方法前需构造Task。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>该接口应在taskpool的线程中调用。</li>        <li>避免在回调函数中调用该方法，否则可能导致消息无法传递到宿主线程。</li>        <li>避免在异步函数中调用该方法，否则可能导致消息无法传递到宿主线程。如果在异步函数中使用，则需要使用await来确保该异步函数在任务中同步执行完成。</li>        <li>调用该接口时，请确保处理数据的回调函数已在宿主线程注册。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">Object[]</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">可传输对象默认转移，作为回调函数的参数。支持的参数类型请参见<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>，默认值为undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameters are invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200006</td>         <td class="cellrowborder" width="50%">An exception occurred during serialization.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200022</td>         <td class="cellrowborder" width="50%">The function is not called in the TaskPool thread.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200023</td>         <td class="cellrowborder" width="50%">The function is not called in the concurrent function.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200024</td>         <td class="cellrowborder" width="50%">The callback is not registered on the host side.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">sendDataTest</span>(<span class="hljs-params">num: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">number</span> = num * <span class="hljs-number">10</span>;</li><li>  taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">sendData</span>(res);</li><li>  <span class="hljs-keyword">return</span> num;</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printLog</span>(<span class="hljs-params">data: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool: data is: "</span> + data);</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">taskpoolTest</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(sendDataTest, <span class="hljs-number">1</span>);</li><li>    task.<span class="hljs-title function_">onReceiveData</span>(printLog);</li><li>    <span class="hljs-keyword">await</span> taskpool.<span class="hljs-title function_">execute</span>(task);</li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool: error code: <span class="hljs-subst">${e.code}</span>, info: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-title function_">taskpoolTest</span>();</li></ol></pre></div></div>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 异步函数中调用该方法</span></li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendDataTest</span>(<span class="hljs-params">num: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title function_">func</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; {</li><li>    <span class="hljs-keyword">let</span> asyncSleep = <span class="hljs-keyword">async</span> (<span class="hljs-attr">time</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Object</span>&gt; =&gt; {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, time));</li><li>    }</li><li>    <span class="hljs-keyword">await</span> <span class="hljs-title function_">asyncSleep</span>(<span class="hljs-number">10000</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">number</span> = num * <span class="hljs-number">10</span>;</li><li>    taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">sendData</span>(res);</li><li>  }</li><li>  <span class="hljs-keyword">await</span> <span class="hljs-title function_">func</span>(); <span class="hljs-comment">// 需要使用await来确保该异步函数在任务中同步执行完成。</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">taskpoolTest</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(sendDataTest, <span class="hljs-number">10</span>);</li><li>    task.<span class="hljs-title function_">onReceiveData</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool: data is: "</span> + data);</li><li>    });</li><li>    taskpool.<span class="hljs-title function_">execute</span>(task);</li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool: error code: <span class="hljs-subst">${e.code}</span>, info: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-title function_">taskpoolTest</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1565px;">     <h3 id="onreceivedata11" device-type="phone,2in1,tablet,wearable,tv">onReceiveData<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onreceivedata11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onReceiveData(callback?: Function): void</p>     <p>为任务注册回调函数，接收并处理任务池工作线程的数据。使用此方法前，需构造Task。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>不支持为同一任务定义多种回调函数。如果多次赋值，只有最后一次赋值的回调函数会生效。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">处理数据的回调函数，发送到宿主线程的数据将会作为入参传入该回调函数。不传参可以取消注册的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Incorrect parameter types; 2. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ConcurrentFunc</span>(<span class="hljs-params">num: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">number</span> = num * <span class="hljs-number">10</span>;</li><li>  taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">sendData</span>(res);</li><li>  <span class="hljs-keyword">return</span> num;</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printLog</span>(<span class="hljs-params">data: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool: data is: "</span> + data);</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">testFunc</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(<span class="hljs-title class_">ConcurrentFunc</span>, <span class="hljs-number">1</span>);</li><li>    task.<span class="hljs-title function_">onReceiveData</span>(printLog);</li><li>    <span class="hljs-keyword">await</span> taskpool.<span class="hljs-title function_">execute</span>(task);</li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool: error code: <span class="hljs-subst">${e.code}</span>, info: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-title function_">testFunc</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1758px;">     <h3 id="adddependency11" device-type="phone,2in1,tablet,wearable,tv">addDependency<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="adddependency11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>addDependency(...tasks: Task[]): void</p>     <p>为当前任务添加对其他任务的依赖。使用该方法前需先构造Task。该任务和被依赖的任务不能是任务组任务、串行队列任务、异步队列任务、已执行任务或周期任务。存在依赖关系的任务（依赖其他任务的任务或被依赖的任务）执行后不可再次执行。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">tasks</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#task">Task</a>[]</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">被依赖的任务数组。默认值为undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200026</td>         <td class="cellrowborder" width="50%">There is a circular dependency.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200052</td>         <td class="cellrowborder" width="50%">The periodic task cannot have a dependency.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200056</td>         <td class="cellrowborder" width="50%">The task has been executed by the AsyncRunner.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">delay</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> ((<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t) &lt; <span class="hljs-number">1000</span>) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task1</span>:taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(delay, <span class="hljs-number">100</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task2</span>:taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(delay, <span class="hljs-number">200</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task3</span>:taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(delay, <span class="hljs-number">200</span>);</li><li>
</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: add dependency start"</span>);</li><li>task1.<span class="hljs-title function_">addDependency</span>(task2);</li><li>task2.<span class="hljs-title function_">addDependency</span>(task3);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: add dependency end"</span>);</li><li>
</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: start execute second"</span>);</li><li>taskpool.<span class="hljs-title function_">execute</span>(task1).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: second task1 success"</span>);</li><li>})</li><li>taskpool.<span class="hljs-title function_">execute</span>(task2).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: second task2 success"</span>);</li><li>})</li><li>taskpool.<span class="hljs-title function_">execute</span>(task3).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: second task3 success"</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1830px;">     <h3 id="removedependency11" device-type="phone,2in1,tablet,wearable,tv">removeDependency<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removedependency11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeDependency(...tasks: Task[]): void</p>     <p>删除当前任务对其他任务的依赖。在使用该方法之前，需要先构造Task对象。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">tasks</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#task">Task</a>[]</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">被依赖的任务数组。默认值为undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200027</td>         <td class="cellrowborder" width="50%">The dependency does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200052</td>         <td class="cellrowborder" width="50%">The periodic task cannot have a dependency.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200056</td>         <td class="cellrowborder" width="50%">The task has been executed by the AsyncRunner.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">delay</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> ((<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t) &lt; <span class="hljs-number">1000</span>) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task1</span>:taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(delay, <span class="hljs-number">100</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task2</span>:taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(delay, <span class="hljs-number">200</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task3</span>:taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(delay, <span class="hljs-number">200</span>);</li><li>
</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: add dependency start"</span>);</li><li>task1.<span class="hljs-title function_">addDependency</span>(task2);</li><li>task2.<span class="hljs-title function_">addDependency</span>(task3);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: add dependency end"</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: remove dependency start"</span>);</li><li>task1.<span class="hljs-title function_">removeDependency</span>(task2);</li><li>task2.<span class="hljs-title function_">removeDependency</span>(task3);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: remove dependency end"</span>);</li><li>
</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: start execute"</span>);</li><li>taskpool.<span class="hljs-title function_">execute</span>(task1).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: task1 success"</span>);</li><li>})</li><li>taskpool.<span class="hljs-title function_">execute</span>(task2).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: task2 success"</span>);</li><li>})</li><li>taskpool.<span class="hljs-title function_">execute</span>(task3).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"dependency: task3 success"</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1336px;">     <h3 id="onenqueued12" device-type="phone,2in1,tablet,wearable,tv">onEnqueued<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onenqueued12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onEnqueued(callback: CallbackFunction): void</p>     <p>注册回调函数，任务入队时将调用该函数。若任务执行前未注册回调函数，将抛出异常。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#callbackfunction12">CallbackFunction</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需注册的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameters are invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200034</td>         <td class="cellrowborder" width="50%">The executed task does not support the registration of listeners.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { taskpool } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">delay</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> ((<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t) &lt; <span class="hljs-number">1000</span>) {</li><li>      <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(delay, <span class="hljs-number">1</span>);</li><li>task.<span class="hljs-title function_">onEnqueued</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool: onEnqueued"</span>);</li><li>});</li><li>taskpool.<span class="hljs-title function_">execute</span>(task).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool: execute task success"</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1336px;">     <h3 id="onstartexecution12" device-type="phone,2in1,tablet,wearable,tv">onStartExecution<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onstartexecution12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onStartExecution(callback: CallbackFunction): void</p>     <p>注册回调函数，任务执行前将调用该函数。若任务执行前未注册回调函数，将抛出异常。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#callbackfunction12">CallbackFunction</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需注册的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameters are invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200034</td>         <td class="cellrowborder" width="50%">The executed task does not support the registration of listeners.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { taskpool } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">delay</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> ((<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t) &lt; <span class="hljs-number">1000</span>) {</li><li>      <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(delay, <span class="hljs-number">1</span>);</li><li>task.<span class="hljs-title function_">onStartExecution</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool: onStartExecution"</span>);</li><li>});</li><li>taskpool.<span class="hljs-title function_">execute</span>(task).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool: execute task success"</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1480px;">     <h3 id="onexecutionfailed12" device-type="phone,2in1,tablet,wearable,tv">onExecutionFailed<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onexecutionfailed12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onExecutionFailed(callback: CallbackFunctionWithError): void</p>     <p>注册一个回调函数，并在任务执行失败时调用它（周期任务不支持）。需在任务执行前注册，否则会抛异常。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#callbackfunctionwitherror12">CallbackFunctionWithError</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需注册的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameters are invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200034</td>         <td class="cellrowborder" width="50%">The executed task does not support the registration of listeners.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { taskpool } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HashMap</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-keyword">let</span> t = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> ((<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t) &lt; <span class="hljs-number">100</span>) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">hashMap1</span>: <span class="hljs-title class_">HashMap</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>();</li><li>  hashMap1.<span class="hljs-title function_">set</span>(<span class="hljs-string">'a'</span>, args);</li><li>  <span class="hljs-keyword">return</span> hashMap1;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> task2 = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(test, <span class="hljs-number">1</span>);</li><li>task2.<span class="hljs-title function_">onExecutionFailed</span>(<span class="hljs-function">(<span class="hljs-params">e: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool: onExecutionFailed error is "</span> + e);</li><li>})</li><li>taskpool.<span class="hljs-title function_">execute</span>(task2).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool: execute task success"</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e:BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool: error code: <span class="hljs-subst">${e.code}</span>, error info: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1336px;">     <h3 id="onexecutionsucceeded12" device-type="phone,2in1,tablet,wearable,tv">onExecutionSucceeded<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onexecutionsucceeded12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onExecutionSucceeded(callback: CallbackFunction): void</p>     <p>注册一个回调函数，并在任务执行成功时调用它（周期任务不支持）。需在任务执行前注册，否则会抛异常。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#callbackfunction12">CallbackFunction</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需注册的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The input parameters are invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200034</td>         <td class="cellrowborder" width="50%">The executed task does not support the registration of listeners.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { taskpool } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">delay</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> ((<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t) &lt; <span class="hljs-number">1000</span>) {</li><li>      <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(delay, <span class="hljs-number">1</span>);</li><li>task.<span class="hljs-title function_">onExecutionSucceeded</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool: onExecutionSucceeded"</span>);</li><li>});</li><li>taskpool.<span class="hljs-title function_">execute</span>(task).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool: execute task success"</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1250px;">     <h3 id="isdone12" device-type="phone,2in1,tablet,wearable,tv">isDone<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isdone12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isDone(): boolean</p>     <p>检查任务是否已完成。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">任务执行完成时返回true，任务未执行完成时返回false。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">inspectStatus</span>(<span class="hljs-params">arg: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-comment">// 1s sleep</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t &lt; <span class="hljs-number">1000</span>) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-keyword">return</span> arg + <span class="hljs-number">1</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">taskpoolCancel</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(inspectStatus, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li>  taskpool.<span class="hljs-title function_">execute</span>(task).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool test result: "</span> + res);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"taskpool test occur error: "</span> + err);</li><li>  });</li><li>
</li><li>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (!task.<span class="hljs-title function_">isDone</span>()) {</li><li>      taskpool.<span class="hljs-title function_">cancel</span>(task);</li><li>    }</li><li>  }, <span class="hljs-number">3000</span>); <span class="hljs-comment">// 延时3s，确保任务已执行</span></li><li>}</li><li>
</li><li><span class="hljs-title function_">taskpoolCancel</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 326px;">     <h2 id="callbackfunction12" device-type="phone,2in1,tablet,wearable,tv">CallbackFunction<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="callbackfunction12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type CallbackFunction = () =&gt; void</p>     <p>注册的回调函数类型。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 477px;">     <h2 id="callbackfunctionwitherror12" device-type="phone,2in1,tablet,wearable,tv">CallbackFunctionWithError<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="callbackfunctionwitherror12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type CallbackFunctionWithError = (e: Error) =&gt; void</p>     <p>注册带有错误码的回调函数类型。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">e</td>         <td class="cellrowborder" width="25%">Error</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">错误信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 703px;">     <h2 id="longtask12" device-type="phone,2in1,tablet,wearable,tv">LongTask<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="longtask12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示长时任务。LongTask继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#task">Task</a>。</p>     <p>长时任务不设置执行时间上限，长时间运行不会触发超时异常，但不支持将同一任务多次执行或者将该任务加入任务组（TaskGroup）。</p>     <p>执行长时任务的线程会持续存在，直到任务完成并调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#taskpoolterminatetask12">terminateTask</a>后，该线程在空闲时被回收。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">LongTask</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">LongTask</span>(printArgs, <span class="hljs-string">"this is my first LongTask"</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 278px;">     <h2 id="genericstask13" device-type="phone,2in1,tablet,wearable,tv">GenericsTask<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="genericstask13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示泛型任务。GenericsTask继承自<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#task">Task</a>。</p>     <p>相比创建Task，创建GenericsTask可以在编译阶段校验并发函数的传参和返回值类型。其余行为与Task相同。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1581px;">     <h3 id="constructor13" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor13" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(func: (...args: A) =&gt; R | Promise&lt;R&gt;, ...args: A)</p>     <p>GenericsTask的构造函数。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 13开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">func</td>         <td class="cellrowborder" width="25%">(...args: A) =&gt; R | Promise&lt;R&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">执行的逻辑需要传入函数，必须使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/taskpool-introduction#concurrent装饰器" target="_blank">@Concurrent装饰器</a>装饰，支持的函数返回值类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">A</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">任务执行传入函数的入参，支持的参数类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。默认值为undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Incorrect parameter types; 2.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200014</td>         <td class="cellrowborder" width="50%">The function is not marked as concurrent.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">testWithThreeParams</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">string</span>, c: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span> {</li><li>  <span class="hljs-keyword">return</span> b;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">testWithArray</span>(<span class="hljs-params">args: [<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>]</span>): <span class="hljs-built_in">string</span> {</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task1</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-property">GenericsTask</span>&lt;[<span class="hljs-built_in">string</span>], <span class="hljs-built_in">string</span>&gt;(printArgs, <span class="hljs-string">"this is my first LongTask"</span>);</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task2</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-property">GenericsTask</span>&lt;[<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>], <span class="hljs-built_in">string</span>&gt;(testWithThreeParams, <span class="hljs-number">100</span>, <span class="hljs-string">"test"</span>, <span class="hljs-number">100</span>);</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task3</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-property">GenericsTask</span>&lt;[[<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>]], <span class="hljs-built_in">string</span>&gt;(testWithArray, [<span class="hljs-number">100</span>, <span class="hljs-string">"test"</span>]);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1354px;">     <h3 id="constructor13-1" device-type="phone,2in1,tablet,wearable,tv">constructor<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor13-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(name: string, func: (...args: A) =&gt; R | Promise&lt;R&gt;, ...args: A)</p>     <p>GenericsTask的构造函数，可以指定任务名称。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 13开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">泛型任务名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">func</td>         <td class="cellrowborder" width="25%">(...args: A) =&gt; R | Promise&lt;R&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">执行的逻辑需要传入函数，必须使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/taskpool-introduction#concurrent装饰器" target="_blank">@Concurrent装饰器</a>装饰，支持的函数返回值类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">A</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">任务执行传入函数的入参，支持的参数类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。默认值为undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Incorrect parameter types; 2.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200014</td>         <td class="cellrowborder" width="50%">The function is not marked as concurrent.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"taskName"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-property">GenericsTask</span>&lt;[<span class="hljs-built_in">string</span>], <span class="hljs-built_in">string</span>&gt;(taskName, printArgs, <span class="hljs-string">"this is my first Task"</span>);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = task.<span class="hljs-property">name</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="taskgroup10" device-type="phone,2in1,tablet,wearable,tv">TaskGroup<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskgroup10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示任务组，一次执行一组任务，适用于执行一组有关联的任务。如果所有任务正常执行，异步执行完毕后返回所有任务结果的数组，数组中元素的顺序与<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#addtask10-1">addTask</a>的顺序相同；如果任意任务失败，则会抛出对应异常。如果任务组中存在多个任务失败的情况，则会抛出第一个失败任务的异常。任务组可以多次执行，但执行后不能新增任务。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 463px;">     <h3 id="constructor10" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p>     <p>TaskGroup的构造函数。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> taskGroup = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">TaskGroup</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 945px;">     <h3 id="constructor11-1" device-type="phone,2in1,tablet,wearable,tv">constructor<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor11-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(name: string)</p>     <p>TaskGroup的构造函数，支持指定任务组名称。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">任务组名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskGroupName</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"groupName"</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskGroup</span>: taskpool.<span class="hljs-property">TaskGroup</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">TaskGroup</span>(taskGroupName);</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = taskGroup.<span class="hljs-property">name</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1285px;">     <h3 id="addtask10" device-type="phone,2in1,tablet,wearable,tv">addTask<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="addtask10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>addTask(func: Function, ...args: Object[]): void</p>     <p>将待执行的函数添加到任务组中。使用该方法前需要先构造TaskGroup。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">func</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要传入使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/taskpool-introduction#concurrent装饰器" target="_blank">@Concurrent装饰器</a>装饰的函数。支持的返回值类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">Object[]</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">任务执行函数的入参，支持的类型请查<a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#序列化支持类型">序列化支持类型</a>，默认值为undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200014</td>         <td class="cellrowborder" width="50%">The function is not marked as concurrent.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskGroup</span>: taskpool.<span class="hljs-property">TaskGroup</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">TaskGroup</span>();</li><li>taskGroup.<span class="hljs-title function_">addTask</span>(printArgs, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1302px;">     <h3 id="addtask10-1" device-type="phone,2in1,tablet,wearable,tv">addTask<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="addtask10-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>addTask(task: Task): void</p>     <p>将创建好的任务添加到任务组中。使用此方法前需要先构造TaskGroup。任务组不能添加其他任务组中的任务、串行队列任务、异步队列任务、有依赖关系的任务、长时任务、周期任务和已执行的任务。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">task</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#task">Task</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要添加到任务组中的任务。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200014</td>         <td class="cellrowborder" width="50%">The function is not marked as concurrent.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200051</td>         <td class="cellrowborder" width="50%">The periodic task cannot be executed again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200057</td>         <td class="cellrowborder" width="50%">The task cannot be executed by two APIs.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskGroup</span>: taskpool.<span class="hljs-property">TaskGroup</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">TaskGroup</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-number">200</span>); <span class="hljs-comment">// 200: test number</span></li><li>taskGroup.<span class="hljs-title function_">addTask</span>(task);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 349px;">     <h3 id="属性-1" device-type="phone,2in1,tablet,wearable,tv">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.53.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">name<sup>11+</sup></td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">创建任务组时指定的任务组名称。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="sequencerunner-11" device-type="phone,2in1,tablet,wearable,tv">SequenceRunner <sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sequencerunner-11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示串行队列的任务，用于执行一组需要串行执行的任务。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 905px;">     <h3 id="constructor11-2" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor11-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(priority?: Priority)</p>     <p>SequenceRunner的构造函数。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">priority</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#priority">Priority</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指定任务的优先级，该参数默认值为taskpool.Priority.MEDIUM。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Incorrect parameter types; 2. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">runner</span>: taskpool.<span class="hljs-property">SequenceRunner</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">SequenceRunner</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1122px;">     <h3 id="constructor12" device-type="phone,2in1,tablet,wearable,tv">constructor<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(name: string, priority?: Priority)</p>     <p>SequenceRunner的构造函数。构造一个全局串行队列，如果名字相同，将返回同一个串行队列。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>底层通过单例模式保证了：创建同名串行队列时，获取到同一个实例。</li>        <li>无法修改串行队列的优先级。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">串行队列的名字。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">priority</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#priority">Priority</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指定任务的优先级，该参数默认值为taskpool.Priority.MEDIUM。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">runner</span>:taskpool.<span class="hljs-property">SequenceRunner</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">SequenceRunner</span>(<span class="hljs-string">"runner1"</span>, taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">LOW</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2260px;">     <h3 id="execute11" device-type="phone,2in1,tablet,wearable,tv">execute<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="execute11" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>execute(task: Task): Promise&lt;Object&gt;</p>     <p>执行串行任务。使用该方法前需先构造SequenceRunner。串行队列不能执行任务组任务、其他串行队列任务、异步队列任务、有依赖关系的任务和已执行的任务。使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>不支持加入存在依赖的任务。</li>        <li>前面的任务执行失败或取消不会影响后续任务的执行。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.57.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">task</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#task">Task</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要添加到串行任务队列中的任务。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Object&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回任务执行的结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200006</td>         <td class="cellrowborder" width="50%">An exception occurred during serialization.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200025</td>         <td class="cellrowborder" width="50%">dependent task not allowed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200051</td>         <td class="cellrowborder" width="50%">The periodic task cannot be executed again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200057</td>         <td class="cellrowborder" width="50%">The task cannot be executed by two APIs.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">additionDelay</span>(<span class="hljs-params">delay: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">start</span>: <span class="hljs-built_in">number</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>() - start &lt; delay) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>}</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">waitForRunner</span>(<span class="hljs-params">finalString: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {</li><li>  <span class="hljs-keyword">return</span> finalString;</li><li>}</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">seqRunner</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">finalString</span>:<span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task1</span>:taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(additionDelay, <span class="hljs-number">3000</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task2</span>:taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(additionDelay, <span class="hljs-number">2000</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task3</span>:taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(additionDelay, <span class="hljs-number">1000</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task4</span>:taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(waitForRunner, finalString);</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">runner</span>:taskpool.<span class="hljs-property">SequenceRunner</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">SequenceRunner</span>();</li><li>  runner.<span class="hljs-title function_">execute</span>(task1).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    finalString += <span class="hljs-string">'a'</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"seqrunner: task1 done."</span>);</li><li>  });</li><li>  runner.<span class="hljs-title function_">execute</span>(task2).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    finalString += <span class="hljs-string">'b'</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"seqrunner: task2 done"</span>);</li><li>  });</li><li>  runner.<span class="hljs-title function_">execute</span>(task3).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    finalString += <span class="hljs-string">'c'</span>;</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"seqrunner: task3 done"</span>);</li><li>  });</li><li>  <span class="hljs-keyword">await</span> runner.<span class="hljs-title function_">execute</span>(task4);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"seqrunner: task4 done, finalString is "</span> + finalString);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="asyncrunner18" device-type="phone,2in1,tablet,wearable,tv">AsyncRunner<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="asyncrunner18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示异步队列。可以指定任务执行的并发度和排队策略。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1214px;">     <h3 id="constructor18" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor18" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(runningCapacity: number, waitingCapacity?: number)</p>     <p>AsyncRunner的构造函数。构造一个非全局的异步队列，如果参数相同，返回的是不同的异步队列。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">runningCapacity</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定任务执行的最大并发度，该参数应为正整数，负数时报错，非整数时会向下取整。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">waitingCapacity</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指定等待任务的列表容量，取值需大于等于0，负数时报错，输入非整数时会向下取整。默认值为0，表示等待任务列表的容量没有限制。如果设置大于0的值，则表示排队策略为丢弃策略，当加入的任务数量超过该值时，等待列表中处于队头的任务会被丢弃。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.59.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">runner</span>: taskpool.<span class="hljs-property">AsyncRunner</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">AsyncRunner</span>(<span class="hljs-number">5</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1407px;">     <h3 id="constructor18-1" device-type="phone,2in1,tablet,wearable,tv">constructor<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor18-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(name: string, runningCapacity: number, waitingCapacity?: number)</p>     <p>AsyncRunner的构造函数用于构造一个全局异步队列。如果队列名称相同，将返回同一个异步队列实例。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>底层通过单例模式确保创建同名的异步队列时，获取同一个实例。</li>        <li>无法修改并发度和等待任务列表容量。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步队列的名字。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">runningCapacity</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定任务执行的最大并发度，该参数应为正整数。负数时报错，非整数会向下取整。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">waitingCapacity</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指定等待任务的列表容量，取值需大于等于0，负数时报错，非整数时会向下取整。默认值为0，表示等待任务列表的容量没有限制。如果设置大于0的值，则表示排队策略为丢弃策略，当加入的任务数量超过该值时，等待列表中处于队头的任务会被丢弃。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.60.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">runner</span>:taskpool.<span class="hljs-property">AsyncRunner</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">AsyncRunner</span>(<span class="hljs-string">"runner1"</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2369px;">     <h3 id="execute18" device-type="phone,2in1,tablet,wearable,tv">execute<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="execute18" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>execute(task: Task, priority?: Priority): Promise&lt;Object&gt;</p>     <p>执行异步任务。使用该方法前需要先构造AsyncRunner。使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>不支持执行任务组中的任务。</li>        <li>不支持执行串行队列中的任务。</li>        <li>不支持执行其他异步队列任务。</li>        <li>不支持执行周期性任务。</li>        <li>不支持执行延迟任务。</li>        <li>不支持执行存在依赖的任务。</li>        <li>不支持执行已执行过的任务。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.61.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">task</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#task">Task</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要添加到异步队列中的任务。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">priority</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#priority">Priority</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指定任务的优先级，该参数默认值为taskpool.Priority.MEDIUM。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.61.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Object&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回任务执行的结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.61.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">10200006</td>         <td class="cellrowborder" width="50%">An exception occurred during serialization.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200025</td>         <td class="cellrowborder" width="50%">dependent task not allowed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200051</td>         <td class="cellrowborder" width="50%">The periodic task cannot be executed again.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200054</td>         <td class="cellrowborder" width="50%">The asyncRunner task is discarded.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200057</td>         <td class="cellrowborder" width="50%">The task cannot be executed by two APIs.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { taskpool } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">additionDelay</span>(<span class="hljs-params">delay: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">start</span>: <span class="hljs-built_in">number</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>() - start &lt; delay) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>}</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">asyRunner</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">runner</span>:taskpool.<span class="hljs-property">AsyncRunner</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">AsyncRunner</span>(<span class="hljs-string">"runner1"</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">30</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>:taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(additionDelay, <span class="hljs-number">1000</span>);</li><li>    runner.<span class="hljs-title function_">execute</span>(task).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"asyncRunner: task"</span> + i + <span class="hljs-string">" done."</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"asyncRunner: task"</span> + i + <span class="hljs-string">" error."</span> + e.<span class="hljs-property">code</span> + <span class="hljs-string">"-"</span> + e.<span class="hljs-property">message</span>);</li><li>    });</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">asyRunner2</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">runner</span>:taskpool.<span class="hljs-property">AsyncRunner</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">AsyncRunner</span>(<span class="hljs-number">5</span>);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">20</span>; i++) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>:taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(additionDelay, <span class="hljs-number">1000</span>);</li><li>    runner.<span class="hljs-title function_">execute</span>(task).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"asyncRunner: task"</span> + i + <span class="hljs-string">" done."</span>);</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 519px;">     <h2 id="state10" device-type="phone,2in1,tablet,wearable,tv">State<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="state10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示任务（Task）状态的枚举。当任务创建成功后，调用execute，任务进入taskpool等待队列，状态设置为WAITING；任务从等待队列出来进入taskpool工作线程中，任务状态更新为RUNNING；当任务执行完成，返回结果后任务状态重置为WAITING；当主动cancel任务时，将任务状态更新为CANCELED。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.62.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">WAITING</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">任务正在等待。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">RUNNING</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">任务正在执行。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CANCELED</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">任务已被取消。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="taskinfo10" device-type="phone,2in1,tablet,wearable,tv">TaskInfo<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskinfo10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>任务的内部信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1068px;">     <h3 id="属性-2" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.64.3.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.3.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.3.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.3.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.3.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">name<sup>12+</sup></td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>任务的名字，不建议修改此值。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">taskId</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>任务的ID。任务的标识符，系统默认提供全局唯一值，不建议修改此值。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">state</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#state10">State</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>任务的状态。state标识任务的当前状态，不建议修改此值。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">duration</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>任务执行至当前所用的时间，默认为0，单位为ms。当返回为0时，表示任务未执行；返回为空时，表示没有任务执行。不建议修改此值。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="threadinfo10" device-type="phone,2in1,tablet,wearable,tv">ThreadInfo<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="threadinfo10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>工作线程的内部信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 639px;">     <h3 id="属性-3" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-3" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">tid</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">工作线程的标识符。如果返回为空，表示当前没有任务执行。不建议修改此值。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">taskIds</td>         <td class="cellrowborder" width="20%">number[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">在当前线程上运行的任务ID列表。返回为空时，代表没有任务执行。不建议修改此值。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">priority</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#priority">Priority</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">当前线程的优先级。返回为空时，代表没有任务执行。 不建议修改此值。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="taskpoolinfo10" device-type="phone,2in1,tablet,wearable,tv">TaskPoolInfo<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskpoolinfo10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>任务池的内部信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 426px;">     <h3 id="属性-4" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-4" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.68.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">threadInfos</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#threadinfo10">ThreadInfo[]</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">工作线程的内部信息。不建议修改此值。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">taskInfos</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-taskpool#taskinfo10">TaskInfo[]</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">任务的内部信息。不建议修改此值。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 254px;">     <h2 id="taskresult20" device-type="phone,2in1,tablet,wearable,tv">TaskResult<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="taskresult20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>处于等待或执行过程中的任务进行取消操作后，在catch分支里捕获到BusinessError里的补充信息。其他场景下该信息为undefined。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2375px;">     <h3 id="属性-5" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-5" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.70.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">result</td>         <td class="cellrowborder" width="20%">Object</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">任务执行结果。默认为undefined。 不建议修改此值。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">error</td>         <td class="cellrowborder" width="20%">Error | Object</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">错误信息。默认和BusinessError的message字段一致。不建议修改此值。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>任务被取消后，有如下两种情况：</p>       <ul>        <li>如果当前任务是处于等待阶段，则result的值为undefined，error的值和BusinessError的message字段一致；</li>        <li>如果当前任务正在运行，有异常抛出的情况下result的值为undefined，error的值为抛出的异常信息；没有异常的情况下，result为任务执行完成后的结果，error的值和BusinessError的message字段一致。</li>       </ul>      </div></div></div>     <p><strong>示例</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { taskpool } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span></li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">loop</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Error</span> | <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">start</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - start &lt; <span class="hljs-number">1500</span>) {</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">isCanceled</span>()) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</li><li>  }</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - start &lt; <span class="hljs-number">3000</span>) {</li><li>  }</li><li>  <span class="hljs-keyword">if</span> (taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">isCanceled</span>()) {</li><li>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"this is loop error"</span>);</li><li>  }</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;</li><li>}</li><li>
</li><li><span class="hljs-comment">// 执行前取消</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">waitingCancel</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> task = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(loop);</li><li>  taskpool.<span class="hljs-title function_">executeDelayed</span>(<span class="hljs-number">2000</span>, task).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e:BusinessError&lt;taskpool.TaskResult&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`waitingCancel task catch code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>    <span class="hljs-comment">// waitingCancel task catch code: 0, message: taskpool:: task has been canceled</span></li><li>    <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span> !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`waitingCancel task catch data: result: <span class="hljs-subst">${e.data.result}</span>, error: <span class="hljs-subst">${e.data.error}</span>`</span>);</li><li>      <span class="hljs-comment">// waitingCancel task catch data: result: undefined, error: taskpool:: task has been canceled</span></li><li>    }</li><li>  })</li><li>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    taskpool.<span class="hljs-title function_">cancel</span>(task);</li><li>  }, <span class="hljs-number">1000</span>);</li><li>}</li><li>
</li><li><span class="hljs-comment">// 执行过程中取消</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">runningCancel</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> task = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(loop);</li><li>  taskpool.<span class="hljs-title function_">execute</span>(task).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e:BusinessError&lt;taskpool.TaskResult&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`runningCancel task catch code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>    <span class="hljs-comment">// runningCancel task catch code: 0, message: taskpool:: task has been canceled</span></li><li>    <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span> !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`runningCancel task catch data: result: <span class="hljs-subst">${e.data.result}</span>, error: <span class="hljs-subst">${e.data.error}</span>`</span>);</li><li>      <span class="hljs-comment">// runningCancel task catch data: result: 0, error: taskpool:: task has been canceled</span></li><li>    }</li><li>  })</li><li>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    taskpool.<span class="hljs-title function_">cancel</span>(task);</li><li>  }, <span class="hljs-number">1000</span>);</li><li>}</li><li>
</li><li><span class="hljs-comment">// 执行过程中抛异常</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">runningCancelError</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> task = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(loop);</li><li>  taskpool.<span class="hljs-title function_">execute</span>(task).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e:BusinessError&lt;taskpool.TaskResult&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`runningCancelError task catch code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>    <span class="hljs-comment">// runningCancelError task catch code: 0, message: taskpool:: task has been canceled</span></li><li>    <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span> !== <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`runningCancelError task catch data: result: <span class="hljs-subst">${e.data.result}</span>, error: <span class="hljs-subst">${e.data.error}</span>`</span>);</li><li>      <span class="hljs-comment">// runningCancelError task catch data: result: undefined, error: Error: this is loop error</span></li><li>    }</li><li>  })</li><li>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    taskpool.<span class="hljs-title function_">cancel</span>(task);</li><li>  }, <span class="hljs-number">2000</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 146px;">     <h2 id="其他说明" device-type="phone,2in1,tablet,wearable,tv">其他说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="其他说明" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div></div>    <div class="tiledSection" style="contain-intrinsic-size: auto 92px;">     <h3 id="序列化支持类型" class="firsth2">序列化支持类型<i class="anchor-icon anchor-icon-link" anchorid="序列化支持类型" tips="复制节点链接"></i></h3>          <p>序列化支持类型参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/serializable-overview" target="_blank">线程间通信对象概述</a>里的介绍。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 7697px;">     <h3 id="简单使用">简单使用<i class="anchor-icon anchor-icon-link" anchorid="简单使用" tips="复制节点链接"></i></h3>          <p><strong>示例一</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 支持普通函数、引用入参传递</span></li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"func: "</span> + args);</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">taskpoolExecute</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>  <span class="hljs-comment">// taskpool.execute(task)</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-string">"create task, then execute"</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool.execute(task) result: "</span> + <span class="hljs-keyword">await</span> taskpool.<span class="hljs-title function_">execute</span>(task));</li><li>  <span class="hljs-comment">// taskpool.execute(function)</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool.execute(function) result: "</span> + <span class="hljs-keyword">await</span> taskpool.<span class="hljs-title function_">execute</span>(printArgs, <span class="hljs-string">"execute task by func"</span>));</li><li>}</li><li>
</li><li><span class="hljs-title function_">taskpoolExecute</span>();</li></ol></pre></div></div>     <p><strong>示例二</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// b.ets</span></li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> <span class="hljs-attr">c</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"hello"</span>;</li></ol></pre></div></div>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 引用import变量</span></li><li><span class="hljs-comment">// a.ets(与b.ets位于同一目录中)</span></li><li><span class="hljs-keyword">import</span> { c } <span class="hljs-keyword">from</span> <span class="hljs-string">"./b"</span>;</li><li>
</li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">a: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(a);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(c);</li><li>  <span class="hljs-keyword">return</span> a;</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">taskpoolExecute</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>  <span class="hljs-comment">// taskpool.execute(task)</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-string">"create task, then execute"</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool.execute(task) result: "</span> + <span class="hljs-keyword">await</span> taskpool.<span class="hljs-title function_">execute</span>(task));</li><li>
</li><li>  <span class="hljs-comment">// taskpool.execute(function)</span></li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool.execute(function) result: "</span> + <span class="hljs-keyword">await</span> taskpool.<span class="hljs-title function_">execute</span>(printArgs, <span class="hljs-string">"execute task by func"</span>));</li><li>}</li><li>
</li><li><span class="hljs-title function_">taskpoolExecute</span>();</li></ol></pre></div></div>     <p><strong>示例三</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 支持async函数</span></li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">delayExecute</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Object</span>&gt;&gt; {</li><li>  <span class="hljs-keyword">let</span> ret = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-property">all</span>&lt;<span class="hljs-title class_">Object</span>&gt;([</li><li>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Object</span>&gt;(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>, <span class="hljs-string">"resolved"</span>))</li><li>  ]);</li><li>  <span class="hljs-keyword">return</span> ret;</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">taskpoolExecute</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>  taskpool.<span class="hljs-title function_">execute</span>(delayExecute).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskPoolTest task result: "</span> + result);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"taskpool test occur error: "</span> + err);</li><li>  });</li><li>}</li><li>
</li><li><span class="hljs-title function_">taskpoolExecute</span>();</li></ol></pre></div></div>     <p><strong>示例四</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// c.ets</span></li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">strSort</span>(<span class="hljs-params">inPutArr: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;</span>): <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; {</li><li>  <span class="hljs-keyword">let</span> newArr = inPutArr.<span class="hljs-title function_">sort</span>();</li><li>  <span class="hljs-keyword">return</span> newArr;</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">func1</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpoolTest start"</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">strArray</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">'c test string'</span>, <span class="hljs-string">'b test string'</span>, <span class="hljs-string">'a test string'</span>];</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(strSort, strArray);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"func1 result:"</span> + <span class="hljs-keyword">await</span> taskpool.<span class="hljs-title function_">execute</span>(task));</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">func2</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpoolTest2 start"</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">strArray</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt; = [<span class="hljs-string">'c test string'</span>, <span class="hljs-string">'b test string'</span>, <span class="hljs-string">'a test string'</span>];</li><li>  taskpool.<span class="hljs-title function_">execute</span>(strSort, strArray).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"func2 result: "</span> + result);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"taskpool test occur error: "</span> + err);</li><li>  });</li><li>}</li></ol></pre></div></div>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// index.ets</span></li><li><span class="hljs-keyword">import</span> { func1, func2 } <span class="hljs-keyword">from</span> <span class="hljs-string">"./c"</span>;</li><li>
</li><li><span class="hljs-title function_">func1</span>();</li><li><span class="hljs-title function_">func2</span>();</li></ol></pre></div></div>     <p><strong>示例五</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 任务取消成功</span></li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">inspectStatus</span>(<span class="hljs-params">arg: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-comment">// 第一次检查任务是否已经取消并作出响应</span></li><li>  <span class="hljs-keyword">if</span> (taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">isCanceled</span>()) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"task has been canceled before 2s sleep."</span>);</li><li>    <span class="hljs-keyword">return</span> arg + <span class="hljs-number">2</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 2s sleep</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t &lt; <span class="hljs-number">2000</span>) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 第二次检查任务是否已经取消并作出响应</span></li><li>  <span class="hljs-keyword">if</span> (taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">isCanceled</span>()) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"task has been canceled after 2s sleep."</span>);</li><li>    <span class="hljs-keyword">return</span> arg + <span class="hljs-number">3</span>;</li><li>  }</li><li>  <span class="hljs-keyword">return</span> arg + <span class="hljs-number">1</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">taskpoolCancel</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(inspectStatus, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li>  taskpool.<span class="hljs-title function_">execute</span>(task).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool test result: "</span> + res);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"taskpool test occur error: "</span> + err);</li><li>  });</li><li>  <span class="hljs-comment">// 1s后取消task</span></li><li>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      taskpool.<span class="hljs-title function_">cancel</span>(task);</li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool: cancel error code: <span class="hljs-subst">${e.code}</span>, info: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>    }</li><li>  }, <span class="hljs-number">1000</span>);</li><li>}</li><li>
</li><li><span class="hljs-title function_">taskpoolCancel</span>();</li></ol></pre></div></div>     <p><strong>示例六</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 已执行的任务取消失败</span></li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">inspectStatus</span>(<span class="hljs-params">arg: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-comment">// 第一次检查任务是否已经取消并作出响应</span></li><li>  <span class="hljs-keyword">if</span> (taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">isCanceled</span>()) {</li><li>    <span class="hljs-keyword">return</span> arg + <span class="hljs-number">2</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 延时0.5s</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t &lt; <span class="hljs-number">500</span>) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-comment">// 第二次检查任务是否已经取消并作出响应</span></li><li>  <span class="hljs-keyword">if</span> (taskpool.<span class="hljs-property">Task</span>.<span class="hljs-title function_">isCanceled</span>()) {</li><li>    <span class="hljs-keyword">return</span> arg + <span class="hljs-number">3</span>;</li><li>  }</li><li>  <span class="hljs-keyword">return</span> arg + <span class="hljs-number">1</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">taskpoolCancel</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(inspectStatus, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li>  taskpool.<span class="hljs-title function_">execute</span>(task).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Object</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool test result: "</span> + res);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"taskpool test occur error: "</span> + err);</li><li>  });</li><li>
</li><li>  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      taskpool.<span class="hljs-title function_">cancel</span>(task); <span class="hljs-comment">// 任务已执行,取消失败</span></li><li>    } <span class="hljs-keyword">catch</span> (e) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool: cancel error code: <span class="hljs-subst">${e.code}</span>, info: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>    }</li><li>  }, <span class="hljs-number">3000</span>); <span class="hljs-comment">// 延时3s，确保任务已执行</span></li><li>}</li><li>
</li><li><span class="hljs-title function_">taskpoolCancel</span>();</li></ol></pre></div></div>     <p><strong>示例七</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 待执行的任务组取消成功</span></li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">printArgs</span>(<span class="hljs-params">args: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">t</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - t &lt; <span class="hljs-number">1000</span>) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"printArgs: "</span> + args);</li><li>  <span class="hljs-keyword">return</span> args;</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">taskpoolGroupCancelTest</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskGroup1</span>: taskpool.<span class="hljs-property">TaskGroup</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">TaskGroup</span>();</li><li>  taskGroup1.<span class="hljs-title function_">addTask</span>(printArgs, <span class="hljs-number">10</span>); <span class="hljs-comment">// 10: test number</span></li><li>  taskGroup1.<span class="hljs-title function_">addTask</span>(printArgs, <span class="hljs-number">20</span>); <span class="hljs-comment">// 20: test number</span></li><li>  taskGroup1.<span class="hljs-title function_">addTask</span>(printArgs, <span class="hljs-number">30</span>); <span class="hljs-comment">// 30: test number</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">taskGroup2</span>: taskpool.<span class="hljs-property">TaskGroup</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">TaskGroup</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task1</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100: test number</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task2</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-number">200</span>); <span class="hljs-comment">// 200: test number</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task3</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(printArgs, <span class="hljs-number">300</span>); <span class="hljs-comment">// 300: test number</span></li><li>  taskGroup2.<span class="hljs-title function_">addTask</span>(task1);</li><li>  taskGroup2.<span class="hljs-title function_">addTask</span>(task2);</li><li>  taskGroup2.<span class="hljs-title function_">addTask</span>(task3);</li><li>  taskpool.<span class="hljs-title function_">execute</span>(taskGroup1).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">Object</span>&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool execute res is:"</span> + res);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"taskpool execute error is:"</span> + e);</li><li>  });</li><li>  taskpool.<span class="hljs-title function_">execute</span>(taskGroup2).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res: <span class="hljs-built_in">Array</span>&lt;<span class="hljs-built_in">Object</span>&gt;</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool execute res is:"</span> + res);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"taskpool execute error is:"</span> + e);</li><li>  });</li><li>
</li><li>  <span class="hljs-keyword">try</span> {</li><li>    taskpool.<span class="hljs-title function_">cancel</span>(taskGroup2);</li><li>  } <span class="hljs-keyword">catch</span> (e) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`taskpool: cancel error code: <span class="hljs-subst">${e.code}</span>, info: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-title function_">taskpoolGroupCancelTest</span>()</li></ol></pre></div></div>     <p><strong>示例八</strong></p>     <div _ngcontent-lgi-c106="" class="highlight-div"><div _ngcontent-lgi-c106="" class="highlight-div-header"><div _ngcontent-lgi-c106="" class="highlight-div-header-left"><div _ngcontent-lgi-c106="" class="handle-button expand-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-lgi-c106="" class="highlight-div-header-right"><div _ngcontent-lgi-c106="" class="handle-button ai-button"></div><div _ngcontent-lgi-c106="" class="handle-button line-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-lgi-c106="" class="handle-button theme-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-lgi-c106="" class="handle-button copy-button"><div _ngcontent-lgi-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-lgi-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 分别创建执行100个高、中、低优先级的任务，查看其各项信息</span></li><li><span class="hljs-meta">@Concurrent</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">delay</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span> {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">start</span>: <span class="hljs-built_in">number</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();</li><li>  <span class="hljs-keyword">while</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>() - start &lt; <span class="hljs-number">500</span>) {</li><li>    <span class="hljs-keyword">continue</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">highCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">mediumCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">lowCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">allCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; allCount; i++) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task1</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(delay);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task2</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(delay);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">task3</span>: taskpool.<span class="hljs-property">Task</span> = <span class="hljs-keyword">new</span> taskpool.<span class="hljs-title class_">Task</span>(delay);</li><li>  taskpool.<span class="hljs-title function_">execute</span>(task1, taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">LOW</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    lowCount++;</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"low task error: "</span> + e);</li><li>  })</li><li>  taskpool.<span class="hljs-title function_">execute</span>(task2, taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">MEDIUM</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    mediumCount++;</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"medium task error: "</span> + e);</li><li>  })</li><li>  taskpool.<span class="hljs-title function_">execute</span>(task3, taskpool.<span class="hljs-property">Priority</span>.<span class="hljs-property">HIGH</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    highCount++;</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">e: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"high task error: "</span> + e);</li><li>  })</li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">start</span>: <span class="hljs-built_in">number</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();</li><li><span class="hljs-keyword">while</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>() - start &lt; <span class="hljs-number">1000</span>) {</li><li>  <span class="hljs-keyword">continue</span>;</li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskpoolInfo</span>: taskpool.<span class="hljs-property">TaskPoolInfo</span> = taskpool.<span class="hljs-title function_">getTaskPoolInfo</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">tid</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskIds</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">priority</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">taskId</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">state</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">duration</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li><span class="hljs-keyword">let</span> threadIS = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(taskpoolInfo.<span class="hljs-property">threadInfos</span>);</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> threadInfo <span class="hljs-keyword">of</span> threadIS) {</li><li>  tid = threadInfo.<span class="hljs-property">tid</span>;</li><li>  <span class="hljs-keyword">if</span> (threadInfo.<span class="hljs-property">taskIds</span> != <span class="hljs-literal">undefined</span> &amp;&amp; threadInfo.<span class="hljs-property">priority</span> != <span class="hljs-literal">undefined</span>) {</li><li>    taskIds.<span class="hljs-property">length</span> = threadInfo.<span class="hljs-property">taskIds</span>.<span class="hljs-property">length</span>;</li><li>    priority = threadInfo.<span class="hljs-property">priority</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool---tid is:"</span> + tid + <span class="hljs-string">", taskIds is:"</span> + taskIds + <span class="hljs-string">", priority is:"</span> + priority);</li><li>}</li><li><span class="hljs-keyword">let</span> taskIS = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(taskpoolInfo.<span class="hljs-property">taskInfos</span>);</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> taskInfo <span class="hljs-keyword">of</span> taskIS) {</li><li>  taskId = taskInfo.<span class="hljs-property">taskId</span>;</li><li>  state = taskInfo.<span class="hljs-property">state</span>;</li><li>  <span class="hljs-keyword">if</span> (taskInfo.<span class="hljs-property">duration</span> != <span class="hljs-literal">undefined</span>) {</li><li>    duration = taskInfo.<span class="hljs-property">duration</span>;</li><li>    name = taskInfo.<span class="hljs-property">name</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"taskpool---taskId is:"</span> + taskId + <span class="hljs-string">", state is:"</span> + state + <span class="hljs-string">", duration is:"</span> + duration + <span class="hljs-string">", name is:"</span> + name);</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>