<h1 _ngcontent-tad-c119="" class="doc-title ng-star-inserted" title="@ohos.usbManager.serial (串口管理)"> @ohos.usbManager.serial (串口管理) </h1>

<div _ngcontent-tad-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本模块主要提供串口管理功能，包括打开和关闭设备的串口、写入和读取数据、设置和获取串口的配置参数、权限管理等。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 19开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="2in1">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><div _ngcontent-tad-c106="" class="highlight-div"><div _ngcontent-tad-c106="" class="highlight-div-header"><div _ngcontent-tad-c106="" class="highlight-div-header-left"><div _ngcontent-tad-c106="" class="handle-button expand-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tad-c106="" class="highlight-div-header-right"><div _ngcontent-tad-c106="" class="handle-button ai-button"></div><div _ngcontent-tad-c106="" class="handle-button line-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tad-c106="" class="handle-button theme-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tad-c106="" class="handle-button copy-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { serialManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="serialmanagergetportlist" device-type="2in1">serialManager.getPortList<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialmanagergetportlist" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>getPortList(): Readonly&lt;SerialPort&gt;[]</p>     <p>查询串口设备清单，包括设备名称和对应的端口号。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Readonly&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-serialmanager#serialport">SerialPort</a>&gt;[]</td>         <td class="cellrowborder" width="50%">串口信息列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下示例代码只是调用getPortList接口的必要流程，需要放入具体的方法中执行。实际调用时，设备开发者需要遵循设备相关协议进行调用。</p>      </div></div></div>     <div _ngcontent-tad-c106="" class="highlight-div"><div _ngcontent-tad-c106="" class="highlight-div-header"><div _ngcontent-tad-c106="" class="highlight-div-header-left"><div _ngcontent-tad-c106="" class="handle-button expand-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tad-c106="" class="highlight-div-header-right"><div _ngcontent-tad-c106="" class="handle-button ai-button"></div><div _ngcontent-tad-c106="" class="handle-button line-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tad-c106="" class="handle-button theme-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tad-c106="" class="handle-button copy-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { serialManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取串口设备清单</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getPortList</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portList</span>: serialManager.<span class="hljs-property">SerialPort</span>[] = serialManager.<span class="hljs-title function_">getPortList</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(portList));</li><li>  <span class="hljs-keyword">if</span> (portList === <span class="hljs-literal">undefined</span> || portList.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList is empty'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portId</span>: <span class="hljs-built_in">number</span> = portList[<span class="hljs-number">0</span>].<span class="hljs-property">portId</span>;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="serialmanagerhasserialright" device-type="2in1">serialManager.hasSerialRight<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialmanagerhasserialright" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>hasSerialRight(portId: number): boolean</p>     <p>检查应用程序是否具有访问串口设备的权限。应用退出后再拉起时，需要重新申请授权。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">portId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">端口号。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">true表示已授权，false表示未授权。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-usb">USB服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14400005</td>         <td class="cellrowborder" width="50%">Database operation exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400001</td>         <td class="cellrowborder" width="50%">Serial port management exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400003</td>         <td class="cellrowborder" width="50%">PortId does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下示例代码只是调用hasSerialRight接口的必要流程，需要放入具体的方法中执行。实际调用时，设备开发者需要遵循设备相关协议进行调用。</p>      </div></div></div>     <div _ngcontent-tad-c106="" class="highlight-div"><div _ngcontent-tad-c106="" class="highlight-div-header"><div _ngcontent-tad-c106="" class="highlight-div-header-left"><div _ngcontent-tad-c106="" class="handle-button expand-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tad-c106="" class="highlight-div-header-right"><div _ngcontent-tad-c106="" class="handle-button ai-button"></div><div _ngcontent-tad-c106="" class="handle-button line-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tad-c106="" class="handle-button theme-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tad-c106="" class="handle-button copy-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { serialManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取串口列表</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">hasSerialRight</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portList</span>: serialManager.<span class="hljs-property">SerialPort</span>[] = serialManager.<span class="hljs-title function_">getPortList</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'portList: '</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(portList));</li><li>  <span class="hljs-keyword">if</span> (portList === <span class="hljs-literal">undefined</span> || portList.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'portList is empty'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portId</span>: <span class="hljs-built_in">number</span> = portList[<span class="hljs-number">0</span>].<span class="hljs-property">portId</span>;</li><li>
</li><li>  <span class="hljs-comment">// 检测设备是否可被应用访问</span></li><li>  <span class="hljs-keyword">if</span> (serialManager.<span class="hljs-title function_">hasSerialRight</span>(portId)) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'The serial port is accessible'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'No permission to access the serial port'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="serialmanagerrequestserialright" device-type="2in1">serialManager.requestSerialRight<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialmanagerrequestserialright" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>requestSerialRight(portId: number): Promise&lt;boolean&gt;</p>     <p>请求应用程序访问串口设备的权限。应用退出自动移除对串口设备的访问权限，在应用重启后需要重新申请授权。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">portId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">端口号。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，true表示请求权限成功，false表示请求权限失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-usb">USB服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14400005</td>         <td class="cellrowborder" width="50%">Database operation exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400001</td>         <td class="cellrowborder" width="50%">Serial port management exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400003</td>         <td class="cellrowborder" width="50%">PortId does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下示例代码只是调用requestSerialRight接口的必要流程，需要放入具体的方法中执行。实际调用时，设备开发者需要遵循设备相关协议进行调用。</p>      </div></div></div>     <div _ngcontent-tad-c106="" class="highlight-div"><div _ngcontent-tad-c106="" class="highlight-div-header"><div _ngcontent-tad-c106="" class="highlight-div-header-left"><div _ngcontent-tad-c106="" class="handle-button expand-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tad-c106="" class="highlight-div-header-right"><div _ngcontent-tad-c106="" class="handle-button ai-button"></div><div _ngcontent-tad-c106="" class="handle-button line-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tad-c106="" class="handle-button theme-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tad-c106="" class="handle-button copy-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { serialManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取串口列表</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">requestSerialRight</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portList</span>: serialManager.<span class="hljs-property">SerialPort</span>[] = serialManager.<span class="hljs-title function_">getPortList</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(portList));</li><li>  <span class="hljs-keyword">if</span> (portList === <span class="hljs-literal">undefined</span> || portList.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList is empty'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portId</span>: <span class="hljs-built_in">number</span> = portList[<span class="hljs-number">0</span>].<span class="hljs-property">portId</span>;</li><li>
</li><li>  <span class="hljs-comment">// 检测设备是否可被应用访问</span></li><li>  <span class="hljs-keyword">if</span> (!serialManager.<span class="hljs-title function_">hasSerialRight</span>(portId)) {</li><li>    serialManager.<span class="hljs-title function_">requestSerialRight</span>(portId).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (!result) {</li><li>        <span class="hljs-comment">// 没有访问设备的权限且用户不授权则退出</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'user is not granted the operation permission'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'grant permission successfully'</span>);</li><li>      }</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="serialmanageropen" device-type="2in1">serialManager.open<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialmanageropen" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>open(portId: number): void</p>     <p>打开串口设备。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">portId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">端口号。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-usb">USB服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400001</td>         <td class="cellrowborder" width="50%">Serial port management exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400002</td>         <td class="cellrowborder" width="50%">Access denied. Call requestSerialRight to request user authorization first.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400003</td>         <td class="cellrowborder" width="50%">PortId does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400004</td>         <td class="cellrowborder" width="50%">The serial port device is occupied.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下示例代码只是调用open接口的必要流程，需要放入具体的方法中执行。实际调用时，设备开发者需要遵循设备相关协议进行调用。</p>      </div></div></div>     <div _ngcontent-tad-c106="" class="highlight-div"><div _ngcontent-tad-c106="" class="highlight-div-header"><div _ngcontent-tad-c106="" class="highlight-div-header-left"><div _ngcontent-tad-c106="" class="handle-button expand-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tad-c106="" class="highlight-div-header-right"><div _ngcontent-tad-c106="" class="handle-button ai-button"></div><div _ngcontent-tad-c106="" class="handle-button line-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tad-c106="" class="handle-button theme-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tad-c106="" class="handle-button copy-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { serialManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取串口列表</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">open</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portList</span>: serialManager.<span class="hljs-property">SerialPort</span>[] = serialManager.<span class="hljs-title function_">getPortList</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(portList));</li><li>  <span class="hljs-keyword">if</span> (portList === <span class="hljs-literal">undefined</span> || portList.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList is empty'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portId</span>: <span class="hljs-built_in">number</span> = portList[<span class="hljs-number">0</span>].<span class="hljs-property">portId</span>;</li><li>
</li><li>  <span class="hljs-comment">// 检测设备是否可被应用访问</span></li><li>  <span class="hljs-keyword">if</span> (!serialManager.<span class="hljs-title function_">hasSerialRight</span>(portId)) {</li><li>    serialManager.<span class="hljs-title function_">requestSerialRight</span>(portId).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (!result) {</li><li>        <span class="hljs-comment">// 没有访问设备的权限且用户不授权则退出</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'user is not granted the operation  permission'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'grant permission successfully'</span>);</li><li>      }</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 打开设备</span></li><li>  <span class="hljs-keyword">try</span> {</li><li>    serialManager.<span class="hljs-title function_">open</span>(portId)</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'open usbSerial success, portId: '</span> + portId);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'open usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="serialmanagergetattribute" device-type="2in1">serialManager.getAttribute<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialmanagergetattribute" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>getAttribute(portId: number): Readonly&lt;SerialAttribute&gt;</p>     <p>获取指定串口的配置参数。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">portId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">端口号。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Readonly&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-serialmanager#serialattribute">SerialAttribute</a>&gt;</td>         <td class="cellrowborder" width="50%">返回串口的配置参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-usb">USB服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400001</td>         <td class="cellrowborder" width="50%">Serial port management exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400003</td>         <td class="cellrowborder" width="50%">PortId does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400005</td>         <td class="cellrowborder" width="50%">The serial port device is not opened. Call the open API first.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下示例代码只是调用getAttribute接口的必要流程，需要放入具体的方法中执行。实际调用时，设备开发者需要遵循设备相关协议进行调用。</p>      </div></div></div>     <div _ngcontent-tad-c106="" class="highlight-div"><div _ngcontent-tad-c106="" class="highlight-div-header"><div _ngcontent-tad-c106="" class="highlight-div-header-left"><div _ngcontent-tad-c106="" class="handle-button expand-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tad-c106="" class="highlight-div-header-right"><div _ngcontent-tad-c106="" class="handle-button ai-button"></div><div _ngcontent-tad-c106="" class="handle-button line-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tad-c106="" class="handle-button theme-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tad-c106="" class="handle-button copy-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { serialManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取串口列表</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getAttribute</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portList</span>: serialManager.<span class="hljs-property">SerialPort</span>[] = serialManager.<span class="hljs-title function_">getPortList</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(portList));</li><li>  <span class="hljs-keyword">if</span> (portList === <span class="hljs-literal">undefined</span> || portList.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList is empty'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portId</span>: <span class="hljs-built_in">number</span> = portList[<span class="hljs-number">0</span>].<span class="hljs-property">portId</span>;</li><li>
</li><li>  <span class="hljs-comment">// 检测设备是否可被应用访问</span></li><li>  <span class="hljs-keyword">if</span> (!serialManager.<span class="hljs-title function_">hasSerialRight</span>(portId)) {</li><li>    serialManager.<span class="hljs-title function_">requestSerialRight</span>(portId).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (!result) {</li><li>        <span class="hljs-comment">// 没有访问设备的权限且用户不授权则退出</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'user is not granted the operation  permission'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'grant permission successfully'</span>);</li><li>      }</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 打开设备</span></li><li>  <span class="hljs-keyword">try</span> {</li><li>    serialManager.<span class="hljs-title function_">open</span>(portId)</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'open usbSerial success, portId: '</span> + portId);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'open usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 获取串口配置</span></li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">attribute</span>: serialManager.<span class="hljs-property">SerialAttribute</span> = serialManager.<span class="hljs-title function_">getAttribute</span>(portId);</li><li>    <span class="hljs-keyword">if</span> (attribute === <span class="hljs-literal">undefined</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAttribute usbSerial error, attribute is undefined'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getAttribute usbSerial success, attribute: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(attribute));</li><li>    }</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'getAttribute usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="serialmanagersetattribute" device-type="2in1">serialManager.setAttribute<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialmanagersetattribute" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>setAttribute(portId: number, attribute: SerialAttribute): void</p>     <p>设置串口的配置参数。如果未调用该方法，使用默认配置参数（波特率：9600bps；据位：8；校验位：0；停止位：1）。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">portId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">端口号。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">attribute</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-serialmanager#serialattribute">SerialAttribute</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">串口参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-usb">USB服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400001</td>         <td class="cellrowborder" width="50%">Serial port management exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400003</td>         <td class="cellrowborder" width="50%">PortId does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400005</td>         <td class="cellrowborder" width="50%">The serial port device is not opened. Call the open API first.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下示例代码只是调用setAttribute接口的必要流程，需要放入具体的方法中执行。实际调用时，设备开发者需要遵循设备相关协议进行调用。</p>      </div></div></div>     <div _ngcontent-tad-c106="" class="highlight-div"><div _ngcontent-tad-c106="" class="highlight-div-header"><div _ngcontent-tad-c106="" class="highlight-div-header-left"><div _ngcontent-tad-c106="" class="handle-button expand-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tad-c106="" class="highlight-div-header-right"><div _ngcontent-tad-c106="" class="handle-button ai-button"></div><div _ngcontent-tad-c106="" class="handle-button line-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tad-c106="" class="handle-button theme-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tad-c106="" class="handle-button copy-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { serialManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取串口列表</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">setAttribute</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portList</span>: serialManager.<span class="hljs-property">SerialPort</span>[] = serialManager.<span class="hljs-title function_">getPortList</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(portList));</li><li>  <span class="hljs-keyword">if</span> (portList === <span class="hljs-literal">undefined</span> || portList.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList is empty'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portId</span>: <span class="hljs-built_in">number</span> = portList[<span class="hljs-number">0</span>].<span class="hljs-property">portId</span>;</li><li>
</li><li>  <span class="hljs-comment">// 检测设备是否可被应用访问</span></li><li>  <span class="hljs-keyword">if</span> (!serialManager.<span class="hljs-title function_">hasSerialRight</span>(portId)) {</li><li>    serialManager.<span class="hljs-title function_">requestSerialRight</span>(portId).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (!result) {</li><li>        <span class="hljs-comment">// 没有访问设备的权限且用户不授权则退出</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'user is not granted the operation  permission'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'grant permission successfully'</span>);</li><li>      }</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 打开设备</span></li><li>  <span class="hljs-keyword">try</span> {</li><li>    serialManager.<span class="hljs-title function_">open</span>(portId)</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'open usbSerial success, portId: '</span> + portId);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'open usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 设置串口配置</span></li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">attribute</span>: serialManager.<span class="hljs-property">SerialAttribute</span> = {</li><li>      <span class="hljs-attr">baudRate</span>: serialManager.<span class="hljs-property">BaudRates</span>.<span class="hljs-property">BAUDRATE_9600</span>,</li><li>      <span class="hljs-attr">dataBits</span>: serialManager.<span class="hljs-property">DataBits</span>.<span class="hljs-property">DATABIT_8</span>,</li><li>      <span class="hljs-attr">parity</span>: serialManager.<span class="hljs-property">Parity</span>.<span class="hljs-property">PARITY_NONE</span>,</li><li>      <span class="hljs-attr">stopBits</span>: serialManager.<span class="hljs-property">StopBits</span>.<span class="hljs-property">STOPBIT_1</span></li><li>    }</li><li>    serialManager.<span class="hljs-title function_">setAttribute</span>(portId, attribute);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'setAttribute usbSerial success, attribute: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(attribute));</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'setAttribute usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="serialmanagerread" device-type="2in1">serialManager.read<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialmanagerread" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>read(portId: number, buffer: Uint8Array, timeout?: number): Promise&lt;number&gt;</p>     <p>从串口设备异步读取数据。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">portId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">端口号。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">buffer</td>         <td class="cellrowborder" width="25%">Uint8Array</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">读取数据的缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">timeout</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">超时时间（单位：ms），可选参数，默认为0不超时，用户按需选择。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回读取数据长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-usb">USB服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400001</td>         <td class="cellrowborder" width="50%">Serial port management exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400003</td>         <td class="cellrowborder" width="50%">PortId does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400005</td>         <td class="cellrowborder" width="50%">The serial port device is not opened. Call the open API first.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400006</td>         <td class="cellrowborder" width="50%">Data transfer timed out.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400007</td>         <td class="cellrowborder" width="50%">I/O exception. Possible causes: 1. The transfer was canceled. 2. The device offered more data than allowed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下示例代码只是调用read接口的必要流程，需要放入具体的方法中执行。实际调用时，设备开发者需要遵循设备相关协议进行调用。</p>      </div></div></div>     <div _ngcontent-tad-c106="" class="highlight-div"><div _ngcontent-tad-c106="" class="highlight-div-header"><div _ngcontent-tad-c106="" class="highlight-div-header-left"><div _ngcontent-tad-c106="" class="handle-button expand-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tad-c106="" class="highlight-div-header-right"><div _ngcontent-tad-c106="" class="handle-button ai-button"></div><div _ngcontent-tad-c106="" class="handle-button line-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tad-c106="" class="handle-button theme-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tad-c106="" class="handle-button copy-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { serialManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取串口列表</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">read</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portList</span>: serialManager.<span class="hljs-property">SerialPort</span>[] = serialManager.<span class="hljs-title function_">getPortList</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(portList));</li><li>  <span class="hljs-keyword">if</span> (portList === <span class="hljs-literal">undefined</span> || portList.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList is empty'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portId</span>: <span class="hljs-built_in">number</span> = portList[<span class="hljs-number">0</span>].<span class="hljs-property">portId</span>;</li><li>
</li><li>  <span class="hljs-comment">// 检测设备是否可被应用访问</span></li><li>  <span class="hljs-keyword">if</span> (!serialManager.<span class="hljs-title function_">hasSerialRight</span>(portId)) {</li><li>    serialManager.<span class="hljs-title function_">requestSerialRight</span>(portId).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (!result) {</li><li>        <span class="hljs-comment">// 没有访问设备的权限且用户不授权则退出</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'user is not granted the operation  permission'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'grant permission successfully'</span>);</li><li>      }</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 打开设备</span></li><li>  <span class="hljs-keyword">try</span> {</li><li>    serialManager.<span class="hljs-title function_">open</span>(portId)</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'open usbSerial success, portId: '</span> + portId);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'open usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 异步读取</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">readBuffer</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(<span class="hljs-number">64</span>);</li><li>  serialManager.<span class="hljs-title function_">read</span>(portId, readBuffer, <span class="hljs-number">2000</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'read usbSerial success, readBuffer: '</span> + readBuffer.<span class="hljs-title function_">toString</span>());</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'read usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="serialmanagerreadsync" device-type="2in1">serialManager.readSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialmanagerreadsync" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>readSync(portId: number, buffer: Uint8Array, timeout?: number): number</p>     <p>从串口设备同步读取数据。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">portId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">端口号。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">buffer</td>         <td class="cellrowborder" width="25%">Uint8Array</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">读取数据的缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">timeout</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">超时时间（单位：ms），可选参数，默认为0不超时，用户按需选择。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">返回读取数据长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-usb">USB服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400001</td>         <td class="cellrowborder" width="50%">Serial port management exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400003</td>         <td class="cellrowborder" width="50%">PortId does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400005</td>         <td class="cellrowborder" width="50%">The serial port device is not opened. Call the open API first.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400006</td>         <td class="cellrowborder" width="50%">Data transfer timed out.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400007</td>         <td class="cellrowborder" width="50%">I/O exception. Possible causes: 1. The transfer was canceled. 2. The device offered more data than allowed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下示例代码只是调用readSync接口的必要流程，需要放入具体的方法中执行。实际调用时，设备开发者需要遵循设备相关协议进行调用。</p>      </div></div></div>     <div _ngcontent-tad-c106="" class="highlight-div"><div _ngcontent-tad-c106="" class="highlight-div-header"><div _ngcontent-tad-c106="" class="highlight-div-header-left"><div _ngcontent-tad-c106="" class="handle-button expand-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tad-c106="" class="highlight-div-header-right"><div _ngcontent-tad-c106="" class="handle-button ai-button"></div><div _ngcontent-tad-c106="" class="handle-button line-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tad-c106="" class="handle-button theme-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tad-c106="" class="handle-button copy-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { serialManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取串口列表</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">readSync</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portList</span>: serialManager.<span class="hljs-property">SerialPort</span>[] = serialManager.<span class="hljs-title function_">getPortList</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(portList));</li><li>  <span class="hljs-keyword">if</span> (portList === <span class="hljs-literal">undefined</span> || portList.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList is empty'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portId</span>: <span class="hljs-built_in">number</span> = portList[<span class="hljs-number">0</span>].<span class="hljs-property">portId</span>;</li><li>
</li><li>  <span class="hljs-comment">// 检测设备是否可被应用访问</span></li><li>  <span class="hljs-keyword">if</span> (!serialManager.<span class="hljs-title function_">hasSerialRight</span>(portId)) {</li><li>    serialManager.<span class="hljs-title function_">requestSerialRight</span>(portId).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (!result) {</li><li>        <span class="hljs-comment">// 没有访问设备的权限且用户不授权则退出</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'user is not granted the operation  permission'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'grant permission successfully'</span>);</li><li>      }</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 打开设备</span></li><li>  <span class="hljs-keyword">try</span> {</li><li>    serialManager.<span class="hljs-title function_">open</span>(portId)</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'open usbSerial success, portId: '</span> + portId);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'open usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 同步读取</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">readSyncBuffer</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(<span class="hljs-number">64</span>);</li><li>  <span class="hljs-keyword">try</span> {</li><li>    serialManager.<span class="hljs-title function_">readSync</span>(portId, readSyncBuffer, <span class="hljs-number">2000</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'readSync usbSerial success, readSyncBuffer: '</span> + readSyncBuffer.<span class="hljs-title function_">toString</span>());</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'readSync usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="serialmanagerwrite" device-type="2in1">serialManager.write<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialmanagerwrite" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>write(portId: number, buffer: Uint8Array, timeout?: number): Promise&lt;number&gt;</p>     <p>向串口设备异步写入数据。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">portId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">端口号。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">buffer</td>         <td class="cellrowborder" width="25%">Uint8Array</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">写入数据的缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">timeout</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">超时时间（单位：ms），可选参数，默认为0不超时，用户按需选择。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回写入数据长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-usb">USB服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400001</td>         <td class="cellrowborder" width="50%">Serial port management exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400003</td>         <td class="cellrowborder" width="50%">PortId does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400005</td>         <td class="cellrowborder" width="50%">The serial port device is not opened. Call the open API first.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400006</td>         <td class="cellrowborder" width="50%">Data transfer timed out.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400007</td>         <td class="cellrowborder" width="50%">I/O exception. Possible causes: 1. The transfer was canceled. 2. The device offered more data than allowed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下示例代码只是调用addSerialRight接口的必要流程，需要放入具体的方法中执行。实际调用时，设备开发者需要遵循设备相关协议进行调用。</p>      </div></div></div>     <div _ngcontent-tad-c106="" class="highlight-div"><div _ngcontent-tad-c106="" class="highlight-div-header"><div _ngcontent-tad-c106="" class="highlight-div-header-left"><div _ngcontent-tad-c106="" class="handle-button expand-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tad-c106="" class="highlight-div-header-right"><div _ngcontent-tad-c106="" class="handle-button ai-button"></div><div _ngcontent-tad-c106="" class="handle-button line-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tad-c106="" class="handle-button theme-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tad-c106="" class="handle-button copy-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { buffer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { serialManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取串口列表</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">write</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portList</span>: serialManager.<span class="hljs-property">SerialPort</span>[] = serialManager.<span class="hljs-title function_">getPortList</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(portList));</li><li>  <span class="hljs-keyword">if</span> (portList === <span class="hljs-literal">undefined</span> || portList.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList is empty'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portId</span>: <span class="hljs-built_in">number</span> = portList[<span class="hljs-number">0</span>].<span class="hljs-property">portId</span>;</li><li>
</li><li>  <span class="hljs-comment">// 检测设备是否可被应用访问</span></li><li>  <span class="hljs-keyword">if</span> (!serialManager.<span class="hljs-title function_">hasSerialRight</span>(portId)) {</li><li>    serialManager.<span class="hljs-title function_">requestSerialRight</span>(portId).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (!result) {</li><li>        <span class="hljs-comment">// 没有访问设备的权限且用户不授权则退出</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'user is not granted the operation  permission'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'grant permission successfully'</span>);</li><li>      }</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 打开设备</span></li><li>  <span class="hljs-keyword">try</span> {</li><li>    serialManager.<span class="hljs-title function_">open</span>(portId)</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'open usbSerial success, portId: '</span> + portId);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'open usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 异步写入</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">writeBuffer</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello World'</span>, <span class="hljs-string">'utf-8'</span>).<span class="hljs-property">buffer</span>)</li><li>  serialManager.<span class="hljs-title function_">write</span>(portId, writeBuffer, <span class="hljs-number">2000</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'write usbSerial success, writeBuffer: '</span> + writeBuffer.<span class="hljs-title function_">toString</span>());</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'write usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="serialmanagerwritesync" device-type="2in1">serialManager.writeSync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialmanagerwritesync" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>writeSync(portId: number, buffer: Uint8Array, timeout?: number): number</p>     <p>向串口设备同步写数据。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">portId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">端口号。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">buffer</td>         <td class="cellrowborder" width="25%">Uint8Array</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">写入目标缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">timeout</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">超时时间（单位：ms），可选参数，默认为0不超时，用户按需选择。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">返回写入数据长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-usb">USB服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400001</td>         <td class="cellrowborder" width="50%">Serial port management exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400003</td>         <td class="cellrowborder" width="50%">PortId does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400005</td>         <td class="cellrowborder" width="50%">The serial port device is not opened. Call the open API first.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400006</td>         <td class="cellrowborder" width="50%">Data transfer timed out.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400007</td>         <td class="cellrowborder" width="50%">I/O exception. Possible causes: 1. The transfer was canceled. 2. The device offered more data than allowed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下示例代码只是调用writeSync接口的必要流程，需要放入具体的方法中执行。实际调用时，设备开发者需要遵循设备相关协议进行调用。</p>      </div></div></div>     <div _ngcontent-tad-c106="" class="highlight-div"><div _ngcontent-tad-c106="" class="highlight-div-header"><div _ngcontent-tad-c106="" class="highlight-div-header-left"><div _ngcontent-tad-c106="" class="handle-button expand-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tad-c106="" class="highlight-div-header-right"><div _ngcontent-tad-c106="" class="handle-button ai-button"></div><div _ngcontent-tad-c106="" class="handle-button line-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tad-c106="" class="handle-button theme-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tad-c106="" class="handle-button copy-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { buffer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { serialManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取串口列表</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">writeSync</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portList</span>: serialManager.<span class="hljs-property">SerialPort</span>[] = serialManager.<span class="hljs-title function_">getPortList</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(portList));</li><li>  <span class="hljs-keyword">if</span> (portList === <span class="hljs-literal">undefined</span> || portList.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList is empty'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portId</span>: <span class="hljs-built_in">number</span> = portList[<span class="hljs-number">0</span>].<span class="hljs-property">portId</span>;</li><li>
</li><li>  <span class="hljs-comment">// 检测设备是否可被应用访问</span></li><li>  <span class="hljs-keyword">if</span> (!serialManager.<span class="hljs-title function_">hasSerialRight</span>(portId)) {</li><li>    serialManager.<span class="hljs-title function_">requestSerialRight</span>(portId).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (!result) {</li><li>        <span class="hljs-comment">// 没有访问设备的权限且用户不授权则退出</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'user is not granted the operation  permission'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'grant permission successfully'</span>);</li><li>      }</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 打开设备</span></li><li>  <span class="hljs-keyword">try</span> {</li><li>    serialManager.<span class="hljs-title function_">open</span>(portId)</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'open usbSerial success, portId: '</span> + portId);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'open usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 同步写入</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">writeSyncBuffer</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer.<span class="hljs-title function_">from</span>(<span class="hljs-string">'Hello World'</span>, <span class="hljs-string">'utf-8'</span>).<span class="hljs-property">buffer</span>)</li><li>  <span class="hljs-keyword">try</span> {</li><li>    serialManager.<span class="hljs-title function_">writeSync</span>(portId, writeSyncBuffer, <span class="hljs-number">2000</span>);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'writeSync usbSerial success, writeSyncBuffer: '</span> + writeSyncBuffer.<span class="hljs-title function_">toString</span>());</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'writeSync usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="serialmanagerclose" device-type="2in1">serialManager.close<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialmanagerclose" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>close(portId: number): void</p>     <p>关闭串口。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">portId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">端口号。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-usb">USB服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400001</td>         <td class="cellrowborder" width="50%">Serial port management exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400003</td>         <td class="cellrowborder" width="50%">PortId does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400005</td>         <td class="cellrowborder" width="50%">The serial port device is not opened. Call the open API first.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下示例代码只是调用close接口的必要流程，需要放入具体的方法中执行。实际调用时，设备开发者需要遵循设备相关协议进行调用。</p>      </div></div></div>     <div _ngcontent-tad-c106="" class="highlight-div"><div _ngcontent-tad-c106="" class="highlight-div-header"><div _ngcontent-tad-c106="" class="highlight-div-header-left"><div _ngcontent-tad-c106="" class="handle-button expand-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tad-c106="" class="highlight-div-header-right"><div _ngcontent-tad-c106="" class="handle-button ai-button"></div><div _ngcontent-tad-c106="" class="handle-button line-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tad-c106="" class="handle-button theme-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tad-c106="" class="handle-button copy-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { serialManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取串口列表</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">close</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portList</span>: serialManager.<span class="hljs-property">SerialPort</span>[] = serialManager.<span class="hljs-title function_">getPortList</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(portList));</li><li>  <span class="hljs-keyword">if</span> (portList === <span class="hljs-literal">undefined</span> || portList.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList is empty'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portId</span>: <span class="hljs-built_in">number</span> = portList[<span class="hljs-number">0</span>].<span class="hljs-property">portId</span>;</li><li>
</li><li>  <span class="hljs-comment">// 检测设备是否可被应用访问</span></li><li>  <span class="hljs-keyword">if</span> (!serialManager.<span class="hljs-title function_">hasSerialRight</span>(portId)) {</li><li>    serialManager.<span class="hljs-title function_">requestSerialRight</span>(portId).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (!result) {</li><li>        <span class="hljs-comment">// 没有访问设备的权限且用户不授权则退出</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'user is not granted the operation  permission'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'grant permission successfully'</span>);</li><li>      }</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 打开设备</span></li><li>  <span class="hljs-keyword">try</span> {</li><li>    serialManager.<span class="hljs-title function_">open</span>(portId)</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'open usbSerial success, portId: '</span> + portId);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'open usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 关闭串口</span></li><li>  <span class="hljs-keyword">try</span> {</li><li>    serialManager.<span class="hljs-title function_">close</span>(portId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'close usbSerial success, portId: '</span> + portId);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'close usbSerial error, '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="serialmanagercancelserialright" device-type="2in1">serialManager.cancelSerialRight<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialmanagercancelserialright" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>cancelSerialRight(portId: number): void</p>     <p>移除应用程序运行时访问串口设备的权限。此接口会调用close关闭已打开的串口。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">portId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">端口号。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-usb">USB服务错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">14400005</td>         <td class="cellrowborder" width="50%">Database operation exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400001</td>         <td class="cellrowborder" width="50%">Serial port management exception.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400002</td>         <td class="cellrowborder" width="50%">Access denied. Call requestSerialRight to request user authorization first.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">31400003</td>         <td class="cellrowborder" width="50%">PortId does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>以下示例代码只是调用cancelSerialRight接口的必要流程，需要放入具体的方法中执行。实际调用时，设备开发者需要遵循设备相关协议进行调用。</p>      </div></div></div>     <div _ngcontent-tad-c106="" class="highlight-div"><div _ngcontent-tad-c106="" class="highlight-div-header"><div _ngcontent-tad-c106="" class="highlight-div-header-left"><div _ngcontent-tad-c106="" class="handle-button expand-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tad-c106="" class="highlight-div-header-right"><div _ngcontent-tad-c106="" class="handle-button ai-button"></div><div _ngcontent-tad-c106="" class="handle-button line-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tad-c106="" class="handle-button theme-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tad-c106="" class="handle-button copy-button"><div _ngcontent-tad-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tad-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">JSON</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li><li><span class="hljs-keyword">import</span> { serialManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-comment">// 获取串口列表</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">cancelSerialRight</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portList</span>: serialManager.<span class="hljs-property">SerialPort</span>[] = serialManager.<span class="hljs-title function_">getPortList</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(portList));</li><li>  <span class="hljs-keyword">if</span> (portList === <span class="hljs-literal">undefined</span> || portList.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'usbSerial portList is empty'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">portId</span>: <span class="hljs-built_in">number</span> = portList[<span class="hljs-number">0</span>].<span class="hljs-property">portId</span>;</li><li>
</li><li>  <span class="hljs-comment">// 检测设备是否可被应用访问</span></li><li>  <span class="hljs-keyword">if</span> (!serialManager.<span class="hljs-title function_">hasSerialRight</span>(portId)) {</li><li>    serialManager.<span class="hljs-title function_">requestSerialRight</span>(portId).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (!result) {</li><li>        <span class="hljs-comment">// 没有访问设备的权限且用户不授权则退出</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'user is not granted the operation  permission'</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'grant permission successfully'</span>);</li><li>      }</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// 取消已经授予的权限</span></li><li>  <span class="hljs-keyword">try</span> {</li><li>    serialManager.<span class="hljs-title function_">cancelSerialRight</span>(portId);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'cancelSerialRight success, portId: '</span>, portId);</li><li>  } <span class="hljs-keyword">catch</span> (error) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'cancelSerialRight error, '</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="serialattribute" device-type="2in1">SerialAttribute<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialattribute" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>串口的配置参数。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">baudRate</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-serialmanager#baudrates">BaudRates</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">串口波特率。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dataBits</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-serialmanager#databits">DataBits</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">串口数据位，默认值为8位。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">parity</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-serialmanager#parity">Parity</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">串口奇偶校验，默认值为None，无奇偶校验。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">stopBits</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-serialmanager#stopbits">StopBits</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">串口停止位，默认值为1位。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="serialport" device-type="2in1">SerialPort<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serialport" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>串口参数。</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">portId</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">端口号。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">deviceName</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">串口设备名称。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="baudrates" device-type="2in1">BaudRates<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="baudrates" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>表示波特率的枚举</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_50</td>         <td class="cellrowborder" width="33.33333333333333%">50</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为50。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_75</td>         <td class="cellrowborder" width="33.33333333333333%">75</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为75。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_110</td>         <td class="cellrowborder" width="33.33333333333333%">110</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为110。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_134</td>         <td class="cellrowborder" width="33.33333333333333%">134</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为134。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_150</td>         <td class="cellrowborder" width="33.33333333333333%">150</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为150。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_200</td>         <td class="cellrowborder" width="33.33333333333333%">200</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为200。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_300</td>         <td class="cellrowborder" width="33.33333333333333%">300</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为300。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_600</td>         <td class="cellrowborder" width="33.33333333333333%">600</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为600。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_1200</td>         <td class="cellrowborder" width="33.33333333333333%">1200</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为1200。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_1800</td>         <td class="cellrowborder" width="33.33333333333333%">1800</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为1800。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_2400</td>         <td class="cellrowborder" width="33.33333333333333%">2400</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为2400。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_4800</td>         <td class="cellrowborder" width="33.33333333333333%">4800</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为4800。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_9600</td>         <td class="cellrowborder" width="33.33333333333333%">9600</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为9600。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_19200</td>         <td class="cellrowborder" width="33.33333333333333%">19200</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为19200。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_38400</td>         <td class="cellrowborder" width="33.33333333333333%">38400</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为38400。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_57600</td>         <td class="cellrowborder" width="33.33333333333333%">57600</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为57600。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_115200</td>         <td class="cellrowborder" width="33.33333333333333%">115200</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为115200。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_230400</td>         <td class="cellrowborder" width="33.33333333333333%">230400</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为230400。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_460800</td>         <td class="cellrowborder" width="33.33333333333333%">460800</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为460800。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_500000</td>         <td class="cellrowborder" width="33.33333333333333%">500000</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为500000。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_576000</td>         <td class="cellrowborder" width="33.33333333333333%">576000</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为576000。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_921600</td>         <td class="cellrowborder" width="33.33333333333333%">921600</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为921600。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_1000000</td>         <td class="cellrowborder" width="33.33333333333333%">1000000</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为1000000。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_1152000</td>         <td class="cellrowborder" width="33.33333333333333%">1152000</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为1152000。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_1500000</td>         <td class="cellrowborder" width="33.33333333333333%">1500000</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为1500000。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_2000000</td>         <td class="cellrowborder" width="33.33333333333333%">2000000</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为2000000。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_2500000</td>         <td class="cellrowborder" width="33.33333333333333%">2500000</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为2500000。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_3000000</td>         <td class="cellrowborder" width="33.33333333333333%">3000000</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为3000000。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_3500000</td>         <td class="cellrowborder" width="33.33333333333333%">3500000</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为3500000。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BAUDRATE_4000000</td>         <td class="cellrowborder" width="33.33333333333333%">4000000</td>         <td class="cellrowborder" width="33.33333333333333%">传输波特率为4000000。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="databits" device-type="2in1">DataBits<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="databits" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>表示数据位宽的枚举</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">DATABIT_8</td>         <td class="cellrowborder" width="33.33333333333333%">8</td>         <td class="cellrowborder" width="33.33333333333333%">报文的有效数据位宽为8比特。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DATABIT_7</td>         <td class="cellrowborder" width="33.33333333333333%">7</td>         <td class="cellrowborder" width="33.33333333333333%">报文的有效数据位宽为7比特。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DATABIT_6</td>         <td class="cellrowborder" width="33.33333333333333%">6</td>         <td class="cellrowborder" width="33.33333333333333%">报文的有效数据位宽为6比特。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">DATABIT_5</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">报文的有效数据位宽为5比特。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="parity" device-type="2in1">Parity<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="parity" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>表示校验位的校验方式的枚举</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">PARITY_NONE</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">无校验。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PARITY_ODD</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">奇检验。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PARITY_EVEN</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">偶校验。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PARITY_MARK</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">固定为1。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PARITY_SPACE</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">固定为0。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="stopbits" device-type="2in1">StopBits<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stopbits" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">PC/2in1</span></div><p>表示停止位宽的枚举</p>     <p><strong>系统能力：</strong> SystemCapability.USB.USBManager.Serial</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">STOPBIT_1</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">报文的有效停止位宽为1比特。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">STOPBIT_2</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">报文的有效停止位宽为2比特。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>