<h1 _ngcontent-ndf-c119="" class="doc-title ng-star-inserted" title="@ohos.userIAM.userAuth (用户认证)"> @ohos.userIAM.userAuth (用户认证) </h1>

<div _ngcontent-ndf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>提供用户认证能力，应用于设备解锁、支付、应用登录等场景。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 6开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 522px;">     <h2 id="常量" device-type="phone,2in1,tablet,wearable,tv">常量<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="常量" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.5.1.1" width="25%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.5.1.3" width="25%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.3.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">MAX_ALLOWABLE_REUSE_DURATION<sup>12+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">300000</td>         <td class="cellrowborder" width="25%">          <p>复用解锁认证结果最大有效时长，值为300000毫秒。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">PERMANENT_LOCKOUT_DURATION<sup>22+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">0x7fffffff</td>         <td class="cellrowborder" width="25%">          <p>永久冻结时间，值为0x7fffffff毫秒。</p>          <p><strong>元服务API：</strong> 从API version 22开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 711px;">     <h2 id="authlockstate22" device-type="phone,2in1,tablet,wearable,tv">AuthLockState<sup>22+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="authlockstate22" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>认证类型的身份认证冻结状态。</p>     <p><strong>元服务API：</strong> 从API version 22开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">isLocked</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示认证是否已被冻结。true表示已冻结；false表示未冻结。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">remainingAuthAttempts</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">认证未被冻结时的剩余尝试次数，最大为5次。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">lockoutDuration</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>认证被冻结时的剩余冻结时间，单位为毫秒。</p>          <p>当永久冻结时，值为PERMANENT_LOCKOUT_DURATION，需要PIN认证解锁。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 675px;">     <h2 id="userauthtipcode20" device-type="phone,2in1,tablet,wearable,tv">UserAuthTipCode<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="userauthtipcode20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示身份认证中间状态的枚举。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">COMPARE_FAILURE</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">认证失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TIMEOUT</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">认证超时。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TEMPORARILY_LOCKED</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">临时冻结。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PERMANENTLY_LOCKED</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">永久冻结。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">WIDGET_LOADED</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">身份认证界面加载完毕。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">WIDGET_RELEASED</td>         <td class="cellrowborder" width="33.33333333333333%">6</td>         <td class="cellrowborder" width="33.33333333333333%">当前的身份认证界面退出，切换其他认证界面或身份认证控件关闭。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COMPARE_FAILURE_WITH_FROZEN</td>         <td class="cellrowborder" width="33.33333333333333%">7</td>         <td class="cellrowborder" width="33.33333333333333%">认证失败并触发了认证冻结。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 474px;">     <h2 id="enrolledstate12" device-type="phone,2in1,tablet,wearable,tv">EnrolledState<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enrolledstate12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用户注册凭据的状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">credentialDigest</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">注册的凭据摘要，在凭据增加时随机生成。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">credentialCount</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">注册的凭据数量。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 876px;">     <h2 id="reusemode12" device-type="phone,2in1,tablet,wearable,tv">ReuseMode<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="reusemode12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>复用解锁认证结果的模式。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">AUTH_TYPE_RELEVANT</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>与认证类型相关，只有当设备解锁认证结果在有效时间内，并且设备解锁的认证类型匹配上本次认证指定认证类型之一时，可以复用该结果。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">AUTH_TYPE_IRRELEVANT</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>与认证类型无关，设备解锁认证结果在有效时间内，可以重复使用。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CALLER_IRRELEVANT_AUTH_TYPE_RELEVANT<sup>14+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>与认证类型相关，任意身份认证（包括设备解锁）结果在有效时间内，并且身份认证的认证类型匹配上本次认证指定认证类型之一时，可以复用该结果。</p>          <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CALLER_IRRELEVANT_AUTH_TYPE_IRRELEVANT<sup>14+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>与认证类型无关，任意身份认证（包括设备解锁）结果在有效时间内，可以重复使用。</p>          <p><strong>元服务API：</strong> 从API version 14开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 734px;">     <h2 id="reuseunlockresult12" device-type="phone,2in1,tablet,wearable,tv">ReuseUnlockResult<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="reuseunlockresult12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>复用解锁认证结果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>如果身份认证解锁（包括设备解锁）后，在有效时间内凭据发生了变化，身份认证的结果依然可以复用，认证结果中返回当前实际的EnrolledState。若复用认证结果时，之前认证时所使用的身份认证凭据已经被删除，如果删除的是人脸、指纹，则认证结果依然可以复用，只是返回的EnrolledState中credentialCount和credentialDigest均为0；如果删除的是锁屏口令，则此次复用会失败。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">reuseMode</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#reusemode12">ReuseMode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">复用解锁认证结果的模式。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">reuseDuration</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">允许复用解锁认证结果的有效时长，有效时长的值应大于0，最大值为<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#常量">MAX_ALLOWABLE_REUSE_DURATION</a>。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1536px;">     <h2 id="userauthgetenrolledstate12" device-type="phone,2in1,tablet,wearable,tv">userAuth.getEnrolledState<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="userauthgetenrolledstate12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getEnrolledState(authType: UserAuthType): EnrolledState</p>     <p>查询凭据注册的状态，以检测用户注册凭据的变更。</p>     <p><strong>需要权限：</strong> ohos.permission.ACCESS_BIOMETRIC</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">authType</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthtype8">UserAuthType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#enrolledstate12">EnrolledState</a></td>         <td class="cellrowborder" width="50%">当查询成功时，返回值为用户注册凭据的状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-useriam">用户认证错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500005</td>         <td class="cellrowborder" width="50%">The authentication type is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500010</td>         <td class="cellrowborder" width="50%">The type of credential has not been enrolled.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> enrolledState = userAuth.<span class="hljs-title function_">getEnrolledState</span>(userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FACE</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`get current enrolled state success, enrolledState = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(enrolledState)}</span>`</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`get current enrolled state failed, Code is <span class="hljs-subst">${err?.code}</span>, message is <span class="hljs-subst">${err?.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1569px;">     <h2 id="authparam10" device-type="phone,2in1,tablet,wearable,tv">AuthParam<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="authparam10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用户认证相关参数。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">challenge</td>         <td class="cellrowborder" width="20%">Uint8Array</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>随机挑战值，可用于防重放攻击。最大长度为32字节，可传Uint8Array([])。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">authType</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthtype8">UserAuthType</a>[]</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>认证类型列表，用来指定用户认证界面提供的认证方法。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">authTrustLevel</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authtrustlevel8">AuthTrustLevel</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>期望达到的认证可信等级。典型操作需要的身份认证可信等级，以及身份认证可信等级的划分请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/user-authentication-overview#生物认证可信等级划分原则" target="_blank">认证可信等级划分原则</a>。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">reuseUnlockResult<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#reuseunlockresult12">ReuseUnlockResult</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>表示可以复用解锁认证的结果。默认为不复用。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">skipLockedBiometricAuth<sup>20+</sup></td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>是否跳过已禁用的认证方式自动切换至其它方式的认证。若无可切换的认证方式则关闭控件，返回认证冻结错误码。</p>          <p>true表示生物认证冻结时，跳过倒计时界面直接切换到其他方式的认证；</p>          <p>false表示不跳过；默认为false。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1191px;">     <h2 id="widgetparam10" device-type="phone,2in1,tablet,wearable,tv">WidgetParam<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="widgetparam10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用户认证界面配置相关参数。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">title</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">          <p>用户认证界面的标题，建议传入认证目的，例如用于支付、登录应用等，不支持传空字串，最大长度为500字符。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">navigationButtonText</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>导航按键的说明文本，最大长度为60字符。在单指纹、单人脸场景下支持，从API 18开始，增加支持人脸+指纹场景。默认为不展示自定义导航按键。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">uiContext<sup>18+</sup></td>         <td class="cellrowborder" width="20%">Context</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>以模应用方式显示身份认证对话框，仅支持在2in1设备上使用，如果没有此参数或其他类型的设备，身份认证对话框将以模系统方式显示。 默认以模系统方式显示身份认证对话框。</p>          <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 756px;">     <h2 id="userauthresult10" device-type="phone,2in1,tablet,wearable,tv">UserAuthResult<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="userauthresult10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用户认证结果。认证成功时，返回认证类型和认证成功的令牌信息。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">result</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">用户认证结果。若成功返回SUCCESS，若失败返回相应错误码，参见<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthresultcode9">UserAuthResultCode</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">token</td>         <td class="cellrowborder" width="20%">Uint8Array</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">认证成功时，返回认证成功的令牌信息。最大长度为1024字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">authType</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthtype8">UserAuthType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">认证成功时，返回认证类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">enrolledState<sup>12+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#enrolledstate12">EnrolledState</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">认证成功时，返回注册凭据的状态。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="iauthcallback10" device-type="phone,2in1,tablet,wearable,tv">IAuthCallback<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="iauthcallback10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>返回认证结果的回调对象。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4286px;">     <h3 id="onresult10" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">onResult<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onresult10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onResult(result: UserAuthResult): void</p>     <p>回调函数，返回认证结果。认证成功时，可以通过UserAuthResult获取到认证成功的令牌信息。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">result</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthresult10">UserAuthResult</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例1：</strong></p>     <p>发起用户认证，采用认证可信等级≥ATL3的锁屏口令认证，获取认证结果。</p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">randData</span>: <span class="hljs-title class_">Uint8Array</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">while</span>(retryCount &lt; <span class="hljs-number">3</span>){</li><li>    randData = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li>    <span class="hljs-keyword">if</span>(randData){</li><li>      <span class="hljs-keyword">break</span>;</li><li>    }</li><li>    retryCount++;</li><li>  }</li><li>  <span class="hljs-keyword">if</span>(!randData){</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">authParam</span>: userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>    <span class="hljs-attr">challenge</span>: randData,</li><li>    <span class="hljs-attr">authType</span>: [userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">PIN</span>],</li><li>    <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL3</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">widgetParam</span>: userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入密码'</span>,</li><li>  };</li><li>
</li><li>  <span class="hljs-keyword">const</span> userAuthInstance = userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get userAuth instance success'</span>);</li><li>  <span class="hljs-comment">// 需要调用UserAuthInstance的start()接口，启动认证后，才能通过onResult获取到认证结果。</span></li><li>  userAuthInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'result'</span>, {</li><li>    onResult (result) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`userAuthInstance callback result = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>    }</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth on success'</span>);</li><li>  userAuthInstance.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth start success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth catch error. Code is <span class="hljs-subst">${err?.code}</span>, message is <span class="hljs-subst">${err?.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>     <p><strong>示例2：</strong></p>     <p>发起用户认证，采用认证可信等级≥ATL3的锁屏口令+认证类型相关+复用设备解锁最大有效时长认证，获取认证结果。</p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">reuseUnlockResult</span>: userAuth.<span class="hljs-property">ReuseUnlockResult</span> = {</li><li>  <span class="hljs-attr">reuseMode</span>: userAuth.<span class="hljs-property">ReuseMode</span>.<span class="hljs-property">AUTH_TYPE_RELEVANT</span>,</li><li>  <span class="hljs-attr">reuseDuration</span>: userAuth.<span class="hljs-property">MAX_ALLOWABLE_REUSE_DURATION</span>,</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">randData</span>: <span class="hljs-title class_">Uint8Array</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">while</span>(retryCount &lt; <span class="hljs-number">3</span>){</li><li>    randData = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li>    <span class="hljs-keyword">if</span>(randData){</li><li>      <span class="hljs-keyword">break</span>;</li><li>    }</li><li>    retryCount++;</li><li>  }</li><li>  <span class="hljs-keyword">if</span>(!randData){</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">authParam</span>: userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>    <span class="hljs-attr">challenge</span>: randData,</li><li>    <span class="hljs-attr">authType</span>: [userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">PIN</span>],</li><li>    <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL3</span>,</li><li>    <span class="hljs-attr">reuseUnlockResult</span>: reuseUnlockResult,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">widgetParam</span>: userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入密码'</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> userAuthInstance = userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get userAuth instance success'</span>);</li><li>  <span class="hljs-comment">// 需要调用UserAuthInstance的start()接口，启动认证后，才能通过onResult获取到认证结果。</span></li><li>  userAuthInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'result'</span>, {</li><li>    onResult (result) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`userAuthInstance callback result = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>    }</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth on success'</span>);</li><li>  userAuthInstance.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth start success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth catch error. Code is <span class="hljs-subst">${err?.code}</span>, message is <span class="hljs-subst">${err?.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>     <p><strong>示例3：</strong></p>     <p>发起用户认证，采用认证可信等级≥ATL3的锁屏口令+任意应用认证类型相关+复用任意应用最大有效时长认证，获取认证结果。</p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">reuseUnlockResult</span>: userAuth.<span class="hljs-property">ReuseUnlockResult</span> = {</li><li>  <span class="hljs-attr">reuseMode</span>: userAuth.<span class="hljs-property">ReuseMode</span>.<span class="hljs-property">CALLER_IRRELEVANT_AUTH_TYPE_RELEVANT</span>,</li><li>  <span class="hljs-attr">reuseDuration</span>: userAuth.<span class="hljs-property">MAX_ALLOWABLE_REUSE_DURATION</span>,</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">randData</span>: <span class="hljs-title class_">Uint8Array</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">while</span>(retryCount &lt; <span class="hljs-number">3</span>){</li><li>    randData = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li>    <span class="hljs-keyword">if</span>(randData){</li><li>      <span class="hljs-keyword">break</span>;</li><li>    }</li><li>    retryCount++;</li><li>  }</li><li>  <span class="hljs-keyword">if</span>(!randData){</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">authParam</span>: userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>    <span class="hljs-attr">challenge</span>: randData,</li><li>    <span class="hljs-attr">authType</span>: [userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">PIN</span>],</li><li>    <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL3</span>,</li><li>    <span class="hljs-attr">reuseUnlockResult</span>: reuseUnlockResult,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">widgetParam</span>: userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入密码'</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> userAuthInstance = userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get userAuth instance success'</span>);</li><li>  <span class="hljs-comment">// 需要调用UserAuthInstance的start()接口，启动认证后，才能通过onResult获取到认证结果。</span></li><li>  userAuthInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'result'</span>, {</li><li>    onResult (result) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`userAuthInstance callback result = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>    }</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth on success'</span>);</li><li>  userAuthInstance.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth start success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth catch error. Code is <span class="hljs-subst">${err?.code}</span>, message is <span class="hljs-subst">${err?.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 450px;">     <h2 id="authtipinfo20" device-type="phone,2in1,tablet,wearable,tv">AuthTipInfo<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="authtipinfo20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用户认证中间状态。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">tipType</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthtype8">UserAuthType</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">中间状态对应的认证类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">tipCode</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthtipcode20">UserAuthTipCode</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">中间状态值。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1598px;">     <h2 id="authtipcallback20" device-type="phone,2in1,tablet,wearable,tv">AuthTipCallback<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="authtipcallback20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type AuthTipCallback = (authTipInfo: AuthTipInfo) =&gt; void</p>     <p>回调函数，返回认证中间状态。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">authTipInfo</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authtipinfo20">AuthTipInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证中间状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">randData</span>: <span class="hljs-title class_">Uint8Array</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">while</span>(retryCount &lt; <span class="hljs-number">3</span>){</li><li>    randData = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li>    <span class="hljs-keyword">if</span>(randData){</li><li>      <span class="hljs-keyword">break</span>;</li><li>    }</li><li>    retryCount++;</li><li>  }</li><li>  <span class="hljs-keyword">if</span>(!randData){</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">authParam</span>: userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>    <span class="hljs-attr">challenge</span>: randData,</li><li>    <span class="hljs-attr">authType</span>: [userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">PIN</span>],</li><li>    <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL3</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">widgetParam</span>: userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入密码'</span>,</li><li>  };</li><li>
</li><li>  <span class="hljs-keyword">const</span> userAuthInstance = userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get userAuth instance success'</span>);</li><li>  <span class="hljs-comment">// 需要调用UserAuthInstance的start()接口，启动认证后，才能通过onAuthTip获取到认证中间状态。</span></li><li>  userAuthInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'authTip'</span>, <span class="hljs-function">(<span class="hljs-params">authTipInfo: userAuth.AuthTipInfo</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`userAuthInstance callback authTipInfo = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(authTipInfo)}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth on success'</span>);</li><li>  userAuthInstance.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth start success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth catch error. Code is <span class="hljs-subst">${err?.code}</span>, message is <span class="hljs-subst">${err?.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="userauthinstance10" device-type="phone,2in1,tablet,wearable,tv">UserAuthInstance<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="userauthinstance10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用于执行用户身份认证，并支持使用统一用户身份认证控件。</p>     <p>使用以下接口前，需先通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthgetuserauthinstance10">getUserAuthInstance</a>方法获取UserAuthInstance对象。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3893px;">     <h3 id="on10" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">on<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="on10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'result', callback: IAuthCallback): void</p>     <p>订阅用户身份认证的最终结果。通过该接口获取到的是用户在认证控件完成身份认证交互后的最终身份认证结果。认证控件消失前，用户中间的认证失败尝试并不会通过该接口返回。如果需要感知整个认证过程中用户的每一次认证失败尝试，请通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#on20">on('authTip')</a>接口订阅。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>在PC/2in1设备上，应用如果使用模应用方式发起认证（即配置用户界面参数<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#widgetparam10">widgetParam</a>时传入了有效的uiContext），收到认证结果后，若需弹出其他窗口，应先获取控件弹窗释放的标志消息，通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#on20">on('authTip')</a>接口订阅控件释放消息（authTipInfo.tipCode = UserAuthTipCode.WIDGET_RELEASED）。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">'result'</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">订阅事件类型，表明该事件用来返回认证结果。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#iauthcallback10">IAuthCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证接口的回调函数，用于返回认证结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-useriam">用户认证错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameter types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例1：</strong></p>     <p>以模系统方式进行用户身份认证。</p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">randData</span>: <span class="hljs-title class_">Uint8Array</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">while</span>(retryCount &lt; <span class="hljs-number">3</span>){</li><li>    randData = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li>    <span class="hljs-keyword">if</span>(randData){</li><li>      <span class="hljs-keyword">break</span>;</li><li>    }</li><li>    retryCount++;</li><li>  }</li><li>  <span class="hljs-keyword">if</span>(!randData){</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">authParam</span>: userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>    <span class="hljs-attr">challenge</span>: randData,</li><li>    <span class="hljs-attr">authType</span>: [userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">PIN</span>],</li><li>    <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL3</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">widgetParam</span>: userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入密码'</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> userAuthInstance = userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get userAuth instance success'</span>);</li><li>  <span class="hljs-comment">// 需要调用UserAuthInstance的start()接口，启动认证后，才能通过onResult获取到认证结果。</span></li><li>  userAuthInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'result'</span>, {</li><li>    onResult (result) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`userAuthInstance callback result = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>    }</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth on success'</span>);</li><li>  userAuthInstance.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth start success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth catch error. Code is <span class="hljs-subst">${err?.code}</span>, message is <span class="hljs-subst">${err?.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>     <p><strong>示例2：</strong></p>     <p>以模应用方式进行用户身份认证。</p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">modelApplicationAuth</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li>      <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>      <span class="hljs-keyword">let</span> <span class="hljs-attr">randData</span>: <span class="hljs-title class_">Uint8Array</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>      <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>;</li><li>      <span class="hljs-keyword">while</span>(retryCount &lt; <span class="hljs-number">3</span>){</li><li>        randData = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li>        <span class="hljs-keyword">if</span>(randData){</li><li>          <span class="hljs-keyword">break</span>;</li><li>        }</li><li>        retryCount++;</li><li>      }</li><li>      <span class="hljs-keyword">if</span>(!randData){</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-keyword">const</span> <span class="hljs-attr">authParam</span>: userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>        <span class="hljs-attr">challenge</span>: randData,</li><li>        <span class="hljs-attr">authType</span>: [userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">PIN</span>],</li><li>        <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL3</span>,</li><li>      };</li><li>      <span class="hljs-keyword">const</span> <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>      <span class="hljs-keyword">const</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">Context</span> | <span class="hljs-literal">undefined</span> = uiContext.<span class="hljs-title function_">getHostContext</span>();</li><li>      <span class="hljs-keyword">const</span> <span class="hljs-attr">widgetParam</span>: userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>        <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入密码'</span>,</li><li>        <span class="hljs-attr">uiContext</span>: context,</li><li>      };</li><li>      <span class="hljs-keyword">const</span> userAuthInstance = userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get userAuth instance success'</span>);</li><li>      <span class="hljs-comment">// 需要调用UserAuthInstance的start()接口，启动认证后，才能通过onResult获取到认证结果。</span></li><li>      userAuthInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'result'</span>, {</li><li>        onResult (result) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`userAuthInstance callback result = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>        }</li><li>      });</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth on success'</span>);</li><li>      userAuthInstance.<span class="hljs-title function_">start</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth start success'</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth catch error. Code is <span class="hljs-subst">${err?.code}</span>, message is <span class="hljs-subst">${err?.message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'start auth'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">modelApplicationAuth</span>();</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2073px;">     <h3 id="off10" device-type="phone,2in1,tablet,wearable,tv">off<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="off10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'result', callback?: IAuthCallback): void</p>     <p>取消订阅用户身份认证的结果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>需要使用已经成功订阅事件的<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthinstance10">UserAuthInstance</a>对象调用该接口进行取消订阅。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">'result'</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">订阅事件类型，表明该事件用来返回认证结果。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#iauthcallback10">IAuthCallback</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">认证接口的回调函数，用于返回认证结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-useriam">用户认证错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameter types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">randData</span>: <span class="hljs-title class_">Uint8Array</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">while</span>(retryCount &lt; <span class="hljs-number">3</span>){</li><li>    randData = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li>    <span class="hljs-keyword">if</span>(randData){</li><li>      <span class="hljs-keyword">break</span>;</li><li>    }</li><li>    retryCount++;</li><li>  }</li><li>  <span class="hljs-keyword">if</span>(!randData){</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">authParam</span>: userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>    <span class="hljs-attr">challenge</span>: randData,</li><li>    <span class="hljs-attr">authType</span>: [userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">PIN</span>],</li><li>    <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL3</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">widgetParam</span>: userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入密码'</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> userAuthInstance = userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get userAuth instance success'</span>);</li><li>  userAuthInstance.<span class="hljs-title function_">off</span>(<span class="hljs-string">'result'</span>, {</li><li>    onResult (result) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`auth off result = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>);</li><li>    }</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth off success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth catch error. Code is <span class="hljs-subst">${err?.code}</span>, message is <span class="hljs-subst">${err?.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2293px;">     <h3 id="start10" device-type="phone,2in1,tablet,wearable,tv">start<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="start10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start(): void</p>     <p>开始认证。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>每个UserAuthInstance只能进行一次认证，需要再次认证时，必须重新获取UserAuthInstance。</p>      </div></div></div>     <p><strong>需要权限：</strong> ohos.permission.ACCESS_BIOMETRIC 或 ohos.permission.USER_AUTH_FROM_BACKGROUND（仅向系统应用开放）</p>     <p>从API 20开始，仅系统应用可以通过申请ohos.permission.USER_AUTH_FROM_BACKGROUND，在后台发起认证。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-useriam">用户认证错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">          <p>Permission denied. Possible causes:</p>          <p>1. No permission to access biometric.</p>          <p>2. No permission to start authentication from background.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes:</p>          <p>1. Incorrect parameter types.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500003</td>         <td class="cellrowborder" width="50%">Authentication canceled.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500005</td>         <td class="cellrowborder" width="50%">The authentication type is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500006</td>         <td class="cellrowborder" width="50%">The authentication trust level is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500009</td>         <td class="cellrowborder" width="50%">Authentication is locked out.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500010</td>         <td class="cellrowborder" width="50%">The type of credential has not been enrolled.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500011</td>         <td class="cellrowborder" width="50%">Switched to the customized authentication process.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500013</td>         <td class="cellrowborder" width="50%">Operation failed because of PIN expired.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">randData</span>: <span class="hljs-title class_">Uint8Array</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">while</span>(retryCount &lt; <span class="hljs-number">3</span>){</li><li>    randData = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li>    <span class="hljs-keyword">if</span>(randData){</li><li>      <span class="hljs-keyword">break</span>;</li><li>    }</li><li>    retryCount++;</li><li>  }</li><li>  <span class="hljs-keyword">if</span>(!randData){</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">authParam</span>: userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>    <span class="hljs-attr">challenge</span>: randData,</li><li>    <span class="hljs-attr">authType</span>: [userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">PIN</span>],</li><li>    <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL3</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">widgetParam</span>: userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入密码'</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> userAuthInstance = userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get userAuth instance success'</span>);</li><li>  userAuthInstance.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth start success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth catch error. Code is <span class="hljs-subst">${err?.code}</span>, message is <span class="hljs-subst">${err?.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1812px;">     <h3 id="cancel10" device-type="phone,2in1,tablet,wearable,tv">cancel<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cancel10" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cancel(): void</p>     <p>取消认证。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>此时UserAuthInstance必须是正在进行认证的对象。</p>      </div></div></div>     <p><strong>需要权限：</strong> ohos.permission.ACCESS_BIOMETRIC</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>错误码：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes:</p>          <p>1. Incorrect parameter types.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">randData</span>: <span class="hljs-title class_">Uint8Array</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">while</span>(retryCount &lt; <span class="hljs-number">3</span>){</li><li>    randData = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li>    <span class="hljs-keyword">if</span>(randData){</li><li>      <span class="hljs-keyword">break</span>;</li><li>    }</li><li>    retryCount++;</li><li>  }</li><li>  <span class="hljs-keyword">if</span>(!randData){</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">const</span> authParam : userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>    <span class="hljs-attr">challenge</span>: randData,</li><li>    <span class="hljs-attr">authType</span>: [userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">PIN</span>],</li><li>    <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL3</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">widgetParam</span>: userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入密码'</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> userAuthInstance = userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get userAuth instance success'</span>);</li><li>  <span class="hljs-comment">// 需要调用UserAuthInstance的start()接口，启动认证后，才能调用cancel()接口。</span></li><li>  userAuthInstance.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth start success'</span>);</li><li>  userAuthInstance.<span class="hljs-title function_">cancel</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth cancel success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth catch error. Code is <span class="hljs-subst">${err?.code}</span>, message is <span class="hljs-subst">${err?.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2090px;">     <h3 id="on20" device-type="phone,2in1,tablet,wearable,tv">on<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="on20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'authTip', callback: AuthTipCallback): void</p>     <p>订阅身份认证过程中的提示信息。通过该接口可以获取到认证过程中控件的拉起和退出提示，以及认证过程中用户的每一次认证失败尝试。使用callback异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>在PC/2in1设备上，应用如果使用模应用方式发起认证（即配置用户界面参数<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#widgetparam10">widgetParam</a>时传入了有效的uiContext），收到认证结果后，若需弹出其他窗口，应先获取控件弹窗释放的标志消息，通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#on20">on('authTip')</a>接口订阅控件释放消息（authTipInfo.tipCode = UserAuthTipCode.WIDGET_RELEASED）。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">订阅事件类型，支持的事件为'authTip'，当<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#start10">start()</a>调用完成，发起身份认证，触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authtipcallback20">AuthTipCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证接口的回调函数，用于返回认证中间状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-useriam">用户认证错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">randData</span>: <span class="hljs-title class_">Uint8Array</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">while</span>(retryCount &lt; <span class="hljs-number">3</span>){</li><li>    randData = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li>    <span class="hljs-keyword">if</span>(randData){</li><li>      <span class="hljs-keyword">break</span>;</li><li>    }</li><li>    retryCount++;</li><li>  }</li><li>  <span class="hljs-keyword">if</span>(!randData){</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">authParam</span>: userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>    <span class="hljs-attr">challenge</span>: randData,</li><li>    <span class="hljs-attr">authType</span>: [userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">PIN</span>],</li><li>    <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL3</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">widgetParam</span>: userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入密码'</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> userAuthInstance = userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get userAuth instance success'</span>);</li><li>  <span class="hljs-comment">// 需要调用UserAuthInstance的start()接口，启动认证后，才能通过onAuthTip获取到认证中间状态。</span></li><li>  userAuthInstance.<span class="hljs-title function_">on</span>(<span class="hljs-string">'authTip'</span>, <span class="hljs-function">(<span class="hljs-params">authTipInfo: userAuth.AuthTipInfo</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`userAuthInstance callback authTipInfo = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(authTipInfo)}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth on success'</span>);</li><li>  userAuthInstance.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth start success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth catch error. Code is <span class="hljs-subst">${err?.code}</span>, message is <span class="hljs-subst">${err?.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2042px;">     <h3 id="off20" device-type="phone,2in1,tablet,wearable,tv">off<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="off20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'authTip', callback?: AuthTipCallback): void</p>     <p>取消订阅用户身份认证中间状态。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>需要使用已经成功订阅事件的<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthinstance10">UserAuthInstance</a>对象调用该接口进行取消订阅。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">取消订阅的事件类型，支持的事件为'authTip'，当<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#start10">start()</a>调用完成，发起身份认证并调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#on20">on()</a>订阅该事件后，调用该方法可取消订阅，不会再触发该事件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authtipcallback20">AuthTipCallback</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">认证接口的回调函数，用于返回认证中间状态。 当不传该参数时默认值为调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#on20">on()</a>接口时传递的参数值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-useriam">用户认证错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">randData</span>: <span class="hljs-title class_">Uint8Array</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">while</span>(retryCount &lt; <span class="hljs-number">3</span>){</li><li>    randData = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li>    <span class="hljs-keyword">if</span>(randData){</li><li>      <span class="hljs-keyword">break</span>;</li><li>    }</li><li>    retryCount++;</li><li>  }</li><li>  <span class="hljs-keyword">if</span>(!randData){</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">authParam</span>: userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>    <span class="hljs-attr">challenge</span>: randData,</li><li>    <span class="hljs-attr">authType</span>: [userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">PIN</span>],</li><li>    <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL3</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">widgetParam</span>: userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入密码'</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> userAuthInstance = userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get userAuth instance success'</span>);</li><li>  userAuthInstance.<span class="hljs-title function_">off</span>(<span class="hljs-string">'authTip'</span>, <span class="hljs-function">(<span class="hljs-params">authTipInfo: userAuth.AuthTipInfo</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`userAuthInstance callback authTipInfo = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(authTipInfo)}</span>`</span>);</li><li>  });</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth off success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth catch error. Code is <span class="hljs-subst">${err?.code}</span>, message is <span class="hljs-subst">${err?.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2194px;">     <h2 id="userauthgetuserauthinstance10" device-type="phone,2in1,tablet,wearable,tv">userAuth.getUserAuthInstance<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="userauthgetuserauthinstance10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getUserAuthInstance(authParam: AuthParam, widgetParam: WidgetParam): UserAuthInstance</p>     <p>获取<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthinstance10">UserAuthInstance</a>对象，执行用户身份认证，并支持使用统一用户身份认证控件。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>每个UserAuthInstance只能进行一次认证，需要再次认证时，必须重新获取UserAuthInstance。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">authParam</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authparam10">AuthParam</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户认证相关参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">widgetParam</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#widgetparam10">WidgetParam</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户认证界面配置相关参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthinstance10">UserAuthInstance</a></td>         <td class="cellrowborder" width="50%">支持用户界面的认证器对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-useriam">用户认证错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameter types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500005</td>         <td class="cellrowborder" width="50%">The authentication type is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500006</td>         <td class="cellrowborder" width="50%">The authentication trust level is not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cryptoFramework } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CryptoArchitectureKit'</span>;</li><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">const</span> rand = cryptoFramework.<span class="hljs-title function_">createRandom</span>();</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">len</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">16</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">randData</span>: <span class="hljs-title class_">Uint8Array</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">while</span>(retryCount &lt; <span class="hljs-number">3</span>){</li><li>    randData = rand?.<span class="hljs-title function_">generateRandomSync</span>(len)?.<span class="hljs-property">data</span>;</li><li>    <span class="hljs-keyword">if</span>(randData){</li><li>      <span class="hljs-keyword">break</span>;</li><li>    }</li><li>    retryCount++;</li><li>  }</li><li>  <span class="hljs-keyword">if</span>(!randData){</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">authParam</span>: userAuth.<span class="hljs-property">AuthParam</span> = {</li><li>    <span class="hljs-attr">challenge</span>: randData,</li><li>    <span class="hljs-attr">authType</span>: [userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">PIN</span>],</li><li>    <span class="hljs-attr">authTrustLevel</span>: userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL3</span>,</li><li>  };</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">widgetParam</span>: userAuth.<span class="hljs-property">WidgetParam</span> = {</li><li>    <span class="hljs-attr">title</span>: <span class="hljs-string">'请输入密码'</span>,</li><li>  };</li><li>  <span class="hljs-keyword">let</span> userAuthInstance = userAuth.<span class="hljs-title function_">getUserAuthInstance</span>(authParam, widgetParam);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'get userAuth instance success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth catch error. Code is <span class="hljs-subst">${err?.code}</span>, message is <span class="hljs-subst">${err?.message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 656px;">     <h2 id="authresultinfodeprecated" device-type="phone,2in1,tablet,wearable,tv">AuthResultInfo<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="authresultinfodeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示认证结果信息，用于描述认证结果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 9 开始支持，从 API version 11 开始废弃。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">result</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">认证结果。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">token</td>         <td class="cellrowborder" width="20%">Uint8Array</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">用户身份认证通过的凭证。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">remainAttempts</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">剩余的认证尝试次数。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">lockoutDuration</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">认证操作的锁定时长，时间单位为毫秒ms。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 494px;">     <h2 id="tipinfodeprecated" device-type="phone,2in1,tablet,wearable,tv">TipInfo<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="tipinfodeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示认证过程中的提示信息，用于提供认证过程的反馈。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 9 开始支持，从 API version 11 开始废弃。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">module</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">发送提示信息的模块标识。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">tip</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">认证过程提示信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 596px;">     <h2 id="eventinfodeprecated" device-type="phone,2in1,tablet,wearable,tv">EventInfo<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="eventinfodeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type EventInfo = AuthResultInfo | TipInfo</p>     <p>表示认证过程中事件信息的类型。</p>     <p>该类型为下表类型取值中的联合类型。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 9 开始支持，从 API version 11 开始废弃，请使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthresult10">UserAuthResult</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authresultinfodeprecated">AuthResultInfo</a></td>         <td class="cellrowborder" width="50%">获取到的认证结果信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#tipinfodeprecated">TipInfo</a></td>         <td class="cellrowborder" width="50%">认证过程中的提示信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 644px;">     <h2 id="autheventkeydeprecated" device-type="phone,2in1,tablet,wearable,tv">AuthEventKey<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="autheventkeydeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type AuthEventKey = 'result' | 'tip'</p>     <p>表示认证事件类型的关键字，作为<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#ondeprecated">on</a>接口的参数。</p>     <p>该类型为下表类型取值中的联合类型。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 9 开始支持，从 API version 11 开始废弃。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">'result'</td>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#ondeprecated">on</a>接口第一个参数为"result"时，<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#callbackdeprecated">callback</a>回调返回认证的结果信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">'tip'</td>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#ondeprecated">on</a>接口第一个参数为"tip"时，<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#callbackdeprecated">callback</a>回调返回认证操作中的提示信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 274px;">     <h2 id="autheventdeprecated" device-type="phone,2in1,tablet,wearable,tv">AuthEvent<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="autheventdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>认证接口的异步回调对象。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 9 开始支持，从 API version 11 开始废弃，请使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#iauthcallback10">IAuthCallback</a>替代。</p>      </div></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1738px;">     <h3 id="callbackdeprecated" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">callback<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="callbackdeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>callback(result : EventInfo) : void</p>     <p>通过该回调获取认证结果信息或认证过程中的提示信息。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 9 开始支持，从 API version 11 开始废弃，请使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#onresult10">onResult</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">result</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#eventinfodeprecated">EventInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">返回的认证结果信息或提示信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> challenge = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]);</li><li><span class="hljs-keyword">let</span> authType = userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FACE</span>;</li><li><span class="hljs-keyword">let</span> authTrustLevel = userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL1</span>;</li><li><span class="hljs-comment">// 通过callback获取认证结果。</span></li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> auth = userAuth.<span class="hljs-title function_">getAuthInstance</span>(challenge, authType, authTrustLevel);</li><li>  auth.<span class="hljs-title function_">on</span>(<span class="hljs-string">'result'</span>, {</li><li>    <span class="hljs-attr">callback</span>: <span class="hljs-function">(<span class="hljs-params">result: userAuth.AuthResultInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`authV9 result <span class="hljs-subst">${result.result}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`authV9 token <span class="hljs-subst">${result.token}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`authV9 remainAttempts <span class="hljs-subst">${result.remainAttempts}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`authV9 lockoutDuration <span class="hljs-subst">${result.lockoutDuration}</span>`</span>);</li><li>    }</li><li>  } <span class="hljs-keyword">as</span> userAuth.<span class="hljs-property">AuthEvent</span>);</li><li>  auth.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'authV9 start success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`authV9 error = <span class="hljs-subst">${error}</span>`</span>);</li><li>  <span class="hljs-comment">// do error.</span></li><li>}</li><li><span class="hljs-comment">// 通过callback获取认证过程中的提示信息。</span></li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> auth = userAuth.<span class="hljs-title function_">getAuthInstance</span>(challenge, authType, authTrustLevel);</li><li>  auth.<span class="hljs-title function_">on</span>(<span class="hljs-string">'tip'</span>, {</li><li>    callback : <span class="hljs-function">(<span class="hljs-params">result : userAuth.TipInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">switch</span> (result.<span class="hljs-property">tip</span>) {</li><li>        <span class="hljs-keyword">case</span> userAuth.<span class="hljs-property">FaceTips</span>.<span class="hljs-property">FACE_AUTH_TIP_TOO_BRIGHT</span>:</li><li>          <span class="hljs-comment">// do something;</span></li><li>          <span class="hljs-keyword">break</span>;</li><li>        <span class="hljs-keyword">case</span> userAuth.<span class="hljs-property">FaceTips</span>.<span class="hljs-property">FACE_AUTH_TIP_TOO_DARK</span>:</li><li>          <span class="hljs-comment">// do something;</span></li><li>          <span class="hljs-keyword">break</span>;</li><li>        <span class="hljs-attr">default</span>:</li><li>          <span class="hljs-comment">// do others.</span></li><li>      }</li><li>    }</li><li>  } <span class="hljs-keyword">as</span> userAuth.<span class="hljs-property">AuthEvent</span>);</li><li>  auth.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'authV9 start success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`authV9 error = <span class="hljs-subst">${error}</span>`</span>);</li><li>  <span class="hljs-comment">// do error.</span></li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 274px;">     <h2 id="authinstancedeprecated" device-type="phone,2in1,tablet,wearable,tv">AuthInstance<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="authinstancedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>执行用户认证的对象。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 9 开始支持，从 API version 10 开始废弃，请使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthinstance10">UserAuthInstance</a>替代。</p>      </div></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2025px;">     <h3 id="ondeprecated" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">on<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on : (name : AuthEventKey, callback : AuthEvent) =&gt; void</p>     <p>订阅指定类型的用户认证事件。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>从 API version 9 开始支持，从 API version 10 开始废弃。</li>        <li>使用获取到的<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authinstancedeprecated">AuthInstance</a>对象调用该接口进行订阅。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#autheventkeydeprecated">AuthEventKey</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示认证事件类型，取值为"result"时，回调函数返回认证结果；取值为"tip"时，回调函数返回认证过程中的提示信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#autheventdeprecated">AuthEvent</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证接口的回调函数，用于返回认证结果或认证过程中的提示信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-useriam">用户认证错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> challenge = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]);</li><li><span class="hljs-keyword">let</span> authType = userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FACE</span>;</li><li><span class="hljs-keyword">let</span> authTrustLevel = userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL1</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> auth = userAuth.<span class="hljs-title function_">getAuthInstance</span>(challenge, authType, authTrustLevel);</li><li>  <span class="hljs-comment">// 订阅认证结果。</span></li><li>  auth.<span class="hljs-title function_">on</span>(<span class="hljs-string">'result'</span>, {</li><li>    <span class="hljs-attr">callback</span>: <span class="hljs-function">(<span class="hljs-params">result: userAuth.AuthResultInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`authV9 result <span class="hljs-subst">${result.result}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`authV9 token <span class="hljs-subst">${result.token}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`authV9 remainAttempts <span class="hljs-subst">${result.remainAttempts}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`authV9 lockoutDuration <span class="hljs-subst">${result.lockoutDuration}</span>`</span>);</li><li>    }</li><li>  });</li><li>  <span class="hljs-comment">// 订阅认证过程中的提示信息。</span></li><li>  auth.<span class="hljs-title function_">on</span>(<span class="hljs-string">'tip'</span>, {</li><li>    callback : <span class="hljs-function">(<span class="hljs-params">result : userAuth.TipInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">switch</span> (result.<span class="hljs-property">tip</span>) {</li><li>        <span class="hljs-keyword">case</span> userAuth.<span class="hljs-property">FaceTips</span>.<span class="hljs-property">FACE_AUTH_TIP_TOO_BRIGHT</span>:</li><li>          <span class="hljs-comment">// do something;</span></li><li>          <span class="hljs-keyword">break</span>;</li><li>        <span class="hljs-keyword">case</span> userAuth.<span class="hljs-property">FaceTips</span>.<span class="hljs-property">FACE_AUTH_TIP_TOO_DARK</span>:</li><li>          <span class="hljs-comment">// do something;</span></li><li>          <span class="hljs-keyword">break</span>;</li><li>        <span class="hljs-attr">default</span>:</li><li>          <span class="hljs-comment">// do others.</span></li><li>      }</li><li>    }</li><li>  } <span class="hljs-keyword">as</span> userAuth.<span class="hljs-property">AuthEvent</span>);</li><li>  auth.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'authV9 start success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`authV9 error = <span class="hljs-subst">${error}</span>`</span>);</li><li>  <span class="hljs-comment">// do error.</span></li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1564px;">     <h3 id="offdeprecated" device-type="phone,2in1,tablet,wearable,tv">off<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off : (name : AuthEventKey) =&gt; void</p>     <p>取消订阅特定类型的认证事件。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>从 API version 9 开始支持，从 API version 10 开始废弃。</li>        <li>需要使用已经成功订阅事件的<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authinstancedeprecated">AuthInstance</a>对象调用该接口进行取消订阅。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.1" width="25%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#autheventkeydeprecated">AuthEventKey</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示认证事件类型，取值为"result"时，取消订阅认证结果；取值为"tip"时，取消订阅认证过程中的提示信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-useriam">用户认证错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> challenge = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]);</li><li><span class="hljs-keyword">let</span> authType = userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FACE</span>;</li><li><span class="hljs-keyword">let</span> authTrustLevel = userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL1</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> auth = userAuth.<span class="hljs-title function_">getAuthInstance</span>(challenge, authType, authTrustLevel);</li><li>  <span class="hljs-comment">// 订阅认证结果。</span></li><li>  auth.<span class="hljs-title function_">on</span>(<span class="hljs-string">'result'</span>, {</li><li>    <span class="hljs-attr">callback</span>: <span class="hljs-function">(<span class="hljs-params">result: userAuth.AuthResultInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`authV9 result <span class="hljs-subst">${result.result}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`authV9 token <span class="hljs-subst">${result.token}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`authV9 remainAttempts <span class="hljs-subst">${result.remainAttempts}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`authV9 lockoutDuration <span class="hljs-subst">${result.lockoutDuration}</span>`</span>);</li><li>    }</li><li>  });</li><li>  <span class="hljs-comment">// 取消订阅结果。</span></li><li>  auth.<span class="hljs-title function_">off</span>(<span class="hljs-string">'result'</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'cancel subscribe authentication event success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`cancel subscribe authentication event failed, error = <span class="hljs-subst">${error}</span>`</span>);</li><li>  <span class="hljs-comment">// do error.</span></li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1668px;">     <h3 id="startdeprecated" device-type="phone,2in1,tablet,wearable,tv">start<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="startdeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>start : () =&gt; void</p>     <p>开始认证。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>从 API version 9 开始支持，从 API version 10 开始废弃。</li>        <li>使用获取到的<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authinstancedeprecated">AuthInstance</a>对象调用该接口进行认证。</li>       </ul>      </div></div></div>     <p><strong>需要权限：</strong> ohos.permission.ACCESS_BIOMETRIC</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-useriam">用户认证错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500001</td>         <td class="cellrowborder" width="50%">Authentication failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500003</td>         <td class="cellrowborder" width="50%">The operation is canceled.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500004</td>         <td class="cellrowborder" width="50%">The operation is time-out.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500005</td>         <td class="cellrowborder" width="50%">The authentication type is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500006</td>         <td class="cellrowborder" width="50%">The authentication trust level is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500007</td>         <td class="cellrowborder" width="50%">The authentication task is busy.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500009</td>         <td class="cellrowborder" width="50%">The authenticator is locked.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500010</td>         <td class="cellrowborder" width="50%">The type of credential has not been enrolled.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> challenge = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]);</li><li><span class="hljs-keyword">let</span> authType = userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FACE</span>;</li><li><span class="hljs-keyword">let</span> authTrustLevel = userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL1</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> auth = userAuth.<span class="hljs-title function_">getAuthInstance</span>(challenge, authType, authTrustLevel);</li><li>  auth.<span class="hljs-title function_">start</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'authV9 start auth success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`authV9 start auth failed, error = <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1228px;">     <h3 id="canceldeprecated" device-type="phone,2in1,tablet,wearable,tv">cancel<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="canceldeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cancel : () =&gt; void</p>     <p>取消认证。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>从 API version 9 开始支持，从 API version 10 开始废弃。</li>        <li>使用获取到的<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authinstancedeprecated">AuthInstance</a>对象调用该接口进行取消认证，此<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authinstancedeprecated">AuthInstance</a>需要是正在进行认证的对象。</li>       </ul>      </div></div></div>     <p><strong>需要权限：</strong> ohos.permission.ACCESS_BIOMETRIC</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-useriam">用户认证错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> challenge = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]);</li><li><span class="hljs-keyword">let</span> authType = userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FACE</span>;</li><li><span class="hljs-keyword">let</span> authTrustLevel = userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL1</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> auth = userAuth.<span class="hljs-title function_">getAuthInstance</span>(challenge, authType, authTrustLevel);</li><li>  auth.<span class="hljs-title function_">cancel</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'cancel auth success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`cancel auth failed, error = <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1679px;">     <h2 id="userauthgetauthinstancedeprecated" device-type="phone,2in1,tablet,wearable,tv">userAuth.getAuthInstance<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="userauthgetauthinstancedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAuthInstance(challenge : Uint8Array, authType : UserAuthType, authTrustLevel : AuthTrustLevel): AuthInstance</p>     <p>获取AuthInstance对象，用于执行用户身份认证。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>从 API version 9 开始支持，从 API version 10 开始废弃，请使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthgetuserauthinstance10">getUserAuthInstance</a>替代。</li>        <li>每个AuthInstance只能进行一次认证，若需要再次进行认证则需重新获取AuthInstance。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">challenge</td>         <td class="cellrowborder" width="25%">Uint8Array</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">挑战值，最大长度为32字节，可以传Uint8Array([])。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">authType</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthtype8">UserAuthType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证类型，当前支持FACE和FINGERPRINT。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">authTrustLevel</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authtrustlevel8">AuthTrustLevel</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证信任等级。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authinstancedeprecated">AuthInstance</a></td>         <td class="cellrowborder" width="50%">认证器对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-useriam">用户认证错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500005</td>         <td class="cellrowborder" width="50%">The authentication type is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500006</td>         <td class="cellrowborder" width="50%">The authentication trust level is not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> challenge = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>]);</li><li><span class="hljs-keyword">let</span> authType = userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FACE</span>;</li><li><span class="hljs-keyword">let</span> authTrustLevel = userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL1</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> auth = userAuth.<span class="hljs-title function_">getAuthInstance</span>(challenge, authType, authTrustLevel);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'let auth instance success'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`get auth instance success failed, error = <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1816px;">     <h2 id="userauthgetavailablestatus9" device-type="phone,2in1,tablet,wearable,tv">userAuth.getAvailableStatus<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="userauthgetavailablestatus9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAvailableStatus(authType : UserAuthType, authTrustLevel : AuthTrustLevel): void</p>     <p>查询指定类型和等级的认证能力是否支持。</p>     <p><strong>需要权限：</strong> ohos.permission.ACCESS_BIOMETRIC</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">authType</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthtype8">UserAuthType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证类型。从 API version 11 开始支持PIN查询。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">authTrustLevel</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authtrustlevel8">AuthTrustLevel</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证信任等级。</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>如果未注册对应执行器，系统不支持该认证能力，需返回12500005。</li>        <li>如果已注册对应执行器，功能未禁用，但认证安全等级低于业务指定时，需返回12500006。</li>        <li>如果已注册对应执行器，功能未禁用，但用户未注册凭据时，需返回12500010。</li>        <li>如果已注册对应执行器，功能未禁用，但密码过期时，需返回12500013。</li>       </ul>      </div></div></div>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <ul>        <li>若用户注册的锁屏口令是4位PIN时，其认证可信等级为ATL3，调用该接口查询是否支持ATL4级别的密码认证时，需返回12500010。</li>       </ul>      </div></div></div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-useriam">用户认证错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">201</td>         <td class="cellrowborder" width="50%">Permission denied.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>Parameter error. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500002</td>         <td class="cellrowborder" width="50%">General operation error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500005</td>         <td class="cellrowborder" width="50%">The authentication type is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500006</td>         <td class="cellrowborder" width="50%">The authentication trust level is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500010</td>         <td class="cellrowborder" width="50%">The type of credential has not been enrolled.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">12500013</td>         <td class="cellrowborder" width="50%">Operation failed because of PIN expired.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  userAuth.<span class="hljs-title function_">getAvailableStatus</span>(userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FACE</span>, userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL3</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'current auth trust level is supported'</span>);</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`current auth trust level is not supported, error = <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1569px;">     <h2 id="userauthresultcode9" device-type="phone,2in1,tablet,wearable,tv">UserAuthResultCode<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="userauthresultcode9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示返回码的枚举。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">SUCCESS</td>         <td class="cellrowborder" width="33.33333333333333%">12500000</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>执行成功。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FAIL</td>         <td class="cellrowborder" width="33.33333333333333%">12500001</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>认证失败。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">GENERAL_ERROR</td>         <td class="cellrowborder" width="33.33333333333333%">12500002</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>操作通用错误。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CANCELED</td>         <td class="cellrowborder" width="33.33333333333333%">12500003</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>认证取消。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TIMEOUT</td>         <td class="cellrowborder" width="33.33333333333333%">12500004</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>认证超时。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TYPE_NOT_SUPPORT</td>         <td class="cellrowborder" width="33.33333333333333%">12500005</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>认证类型不支持。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TRUST_LEVEL_NOT_SUPPORT</td>         <td class="cellrowborder" width="33.33333333333333%">12500006</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>认证等级不支持。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BUSY</td>         <td class="cellrowborder" width="33.33333333333333%">12500007</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>系统繁忙。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">INVALID_PARAMETERS<sup>20+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">12500008</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>参数校验失败。</p>          <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">LOCKED</td>         <td class="cellrowborder" width="33.33333333333333%">12500009</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>认证器已锁定。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">NOT_ENROLLED</td>         <td class="cellrowborder" width="33.33333333333333%">12500010</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>用户未录入指定的系统身份认证凭据。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CANCELED_FROM_WIDGET<sup>10+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">12500011</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>用户取消了系统认证方式，选择应用自定义认证。需调用者拉起自定义认证界面。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PIN_EXPIRED<sup>12+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">12500013</td>         <td class="cellrowborder" width="33.33333333333333%">          <p>当前的认证操作执行失败。返回这个错误码，表示系统锁屏口令过期。</p>          <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="userauthdeprecated" device-type="phone,2in1,tablet,wearable,tv">UserAuth<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="userauthdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>认证器对象。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 555px;">     <h3 id="constructordeprecated" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructordeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p>     <p>创建认证器对象。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始支持，从 API version 9 开始废弃，请使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthgetauthinstancedeprecated">getAuthInstance</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> auth = <span class="hljs-keyword">new</span> userAuth.<span class="hljs-title class_">UserAuth</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 838px;">     <h3 id="getversiondeprecated" device-type="phone,2in1,tablet,wearable,tv">getVersion<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getversiondeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getVersion() : number</p>     <p>获取认证器的版本信息。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始支持，从 API version 9 开始废弃。</p>      </div></div></div>     <p><strong>需要权限：</strong> ohos.permission.ACCESS_BIOMETRIC</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">认证器版本信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> auth = <span class="hljs-keyword">new</span> userAuth.<span class="hljs-title class_">UserAuth</span>();</li><li><span class="hljs-keyword">let</span> version = auth.<span class="hljs-title function_">getVersion</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`auth version = <span class="hljs-subst">${version}</span>`</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1178px;">     <h3 id="getavailablestatusdeprecated" device-type="phone,2in1,tablet,wearable,tv">getAvailableStatus<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getavailablestatusdeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAvailableStatus(authType : UserAuthType, authTrustLevel : AuthTrustLevel) : number</p>     <p>查询指定类型和等级的认证能力是否支持。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始支持，从 API version 9 开始废弃，请使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthgetavailablestatus9">getAvailableStatus</a>替代。</p>      </div></div></div>     <p><strong>需要权限：</strong> ohos.permission.ACCESS_BIOMETRIC</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">authType</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthtype8">UserAuthType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证类型，当前支持FACE和FINGERPRINT。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">authTrustLevel</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authtrustlevel8">AuthTrustLevel</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证信任等级。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">查询结果，结果为SUCCESS时表示支持，其他返回值参见<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#resultcodedeprecated">ResultCode</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> auth = <span class="hljs-keyword">new</span> userAuth.<span class="hljs-title class_">UserAuth</span>();</li><li><span class="hljs-keyword">let</span> checkCode = auth.<span class="hljs-title function_">getAvailableStatus</span>(userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FACE</span>, userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL1</span>);</li><li><span class="hljs-keyword">if</span> (checkCode == userAuth.<span class="hljs-property">ResultCode</span>.<span class="hljs-property">SUCCESS</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'check auth support success'</span>);</li><li>} <span class="hljs-keyword">else</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`check auth support fail, code = <span class="hljs-subst">${checkCode}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1532px;">     <h3 id="authdeprecated" device-type="phone,2in1,tablet,wearable,tv">auth<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="authdeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>auth(challenge: Uint8Array, authType: UserAuthType, authTrustLevel: AuthTrustLevel, callback: IUserAuthCallback): Uint8Array</p>     <p>执行用户认证，使用回调函数返回结果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#startdeprecated">start</a>代替。</p>      </div></div></div>     <p><strong>需要权限：</strong> ohos.permission.ACCESS_BIOMETRIC</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">challenge</td>         <td class="cellrowborder" width="25%">Uint8Array</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">挑战值，可以传Uint8Array([])。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">authType</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthtype8">UserAuthType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证类型，当前支持FACE和FINGERPRINT。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">authTrustLevel</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authtrustlevel8">AuthTrustLevel</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证信任等级。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#iuserauthcallbackdeprecated">IUserAuthCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Uint8Array</td>         <td class="cellrowborder" width="50%">ContextId，作为取消认证<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#cancelauthdeprecated">cancelAuth</a>接口的入参。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> auth = <span class="hljs-keyword">new</span> userAuth.<span class="hljs-title class_">UserAuth</span>();</li><li><span class="hljs-keyword">let</span> challenge = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([]);</li><li>auth.<span class="hljs-title function_">auth</span>(challenge, userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FACE</span>, userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL1</span>, {</li><li>  <span class="hljs-attr">onResult</span>: <span class="hljs-function">(<span class="hljs-params">result, extraInfo</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`auth onResult result = <span class="hljs-subst">${result}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`auth onResult extraInfo = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(extraInfo)}</span>`</span>);</li><li>      <span class="hljs-keyword">if</span> (result == userAuth.<span class="hljs-property">ResultCode</span>.<span class="hljs-property">SUCCESS</span>) {</li><li>        <span class="hljs-comment">// 此处添加认证成功逻辑。</span></li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 此处添加认证失败逻辑。</span></li><li>      }</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth onResult error = <span class="hljs-subst">${error}</span>`</span>);</li><li>    }</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1181px;">     <h3 id="cancelauthdeprecated" device-type="phone,2in1,tablet,wearable,tv">cancelAuth<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cancelauthdeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cancelAuth(contextID : Uint8Array) : number</p>     <p>表示通过contextID取消本次认证。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#canceldeprecated">cancel</a>代替。</p>      </div></div></div>     <p><strong>需要权限：</strong> ohos.permission.ACCESS_BIOMETRIC</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">contextID</td>         <td class="cellrowborder" width="25%">Uint8Array</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">上下文的标识，通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authdeprecated">auth</a>接口获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">取消认证的结果，结果为SUCCESS时表示取消成功，其他返回值参见<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#resultcodedeprecated">ResultCode</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-comment">// contextId可通过auth接口获取，此处直接定义。</span></li><li><span class="hljs-keyword">let</span> contextId = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>]);</li><li><span class="hljs-keyword">let</span> auth = <span class="hljs-keyword">new</span> userAuth.<span class="hljs-title class_">UserAuth</span>();</li><li><span class="hljs-keyword">let</span> cancelCode = auth.<span class="hljs-title function_">cancelAuth</span>(contextId);</li><li><span class="hljs-keyword">if</span> (cancelCode == userAuth.<span class="hljs-property">ResultCode</span>.<span class="hljs-property">SUCCESS</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'cancel auth success'</span>);</li><li>} <span class="hljs-keyword">else</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'cancel auth fail'</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 274px;">     <h2 id="iuserauthcallbackdeprecated" device-type="phone,2in1,tablet,wearable,tv">IUserAuthCallback<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="iuserauthcallbackdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>返回认证结果的回调对象。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#autheventdeprecated">AuthEvent</a>代替。</p>      </div></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1399px;">     <h3 id="onresultdeprecated" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">onResult<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onresultdeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onResult: (result : number, extraInfo : AuthResult) =&gt; void</p>     <p>回调函数，返回认证结果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#callbackdeprecated">callback</a>代替。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">result</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证结果，参见<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#resultcodedeprecated">ResultCode</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">extraInfo</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authresultdeprecated">AuthResult</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>扩展信息，不同情况下的具体信息，</p>          <p>如果身份验证通过，则在extraInfo中返回用户认证令牌，</p>          <p>如果身份验证失败，则在extraInfo中返回剩余的用户认证次数，</p>          <p>如果身份验证执行器被锁定，则在extraInfo中返回冻结时间。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> auth = <span class="hljs-keyword">new</span> userAuth.<span class="hljs-title class_">UserAuth</span>();</li><li><span class="hljs-keyword">let</span> challenge = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([]);</li><li>auth.<span class="hljs-title function_">auth</span>(challenge, userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FACE</span>, userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL1</span>, {</li><li>  <span class="hljs-attr">onResult</span>: <span class="hljs-function">(<span class="hljs-params">result, extraInfo</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`auth onResult result = <span class="hljs-subst">${result}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`auth onResult extraInfo = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(extraInfo)}</span>`</span>);</li><li>      <span class="hljs-keyword">if</span> (result == userAuth.<span class="hljs-property">ResultCode</span>.<span class="hljs-property">SUCCESS</span>) {</li><li>        <span class="hljs-comment">// 此处添加认证成功逻辑。</span></li><li>      }  <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 此处添加认证失败逻辑。</span></li><li>      }</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth onResult error = <span class="hljs-subst">${error}</span>`</span>);</li><li>    }</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1412px;">     <h3 id="onacquireinfodeprecated" device-type="phone,2in1,tablet,wearable,tv">onAcquireInfo<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onacquireinfodeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onAcquireInfo ?: (module : number, acquire : number, extraInfo : any) =&gt; void</p>     <p>回调函数，返回认证过程中的提示信息，非必须实现。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#callbackdeprecated">callback</a>代替。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">module</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">发送提示信息的模块标识。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">acquire</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">认证执过程中的提示信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">extraInfo</td>         <td class="cellrowborder" width="25%">any</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">预留字段。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> auth = <span class="hljs-keyword">new</span> userAuth.<span class="hljs-title class_">UserAuth</span>();</li><li><span class="hljs-keyword">let</span> challenge = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>([]);</li><li>auth.<span class="hljs-title function_">auth</span>(challenge, userAuth.<span class="hljs-property">UserAuthType</span>.<span class="hljs-property">FACE</span>, userAuth.<span class="hljs-property">AuthTrustLevel</span>.<span class="hljs-property">ATL1</span>, {</li><li>  <span class="hljs-attr">onResult</span>: <span class="hljs-function">(<span class="hljs-params">result, extraInfo</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`auth onResult result = <span class="hljs-subst">${result}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`auth onResult extraInfo = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(extraInfo)}</span>`</span>);</li><li>      <span class="hljs-keyword">if</span> (result == userAuth.<span class="hljs-property">ResultCode</span>.<span class="hljs-property">SUCCESS</span>) {</li><li>        <span class="hljs-comment">// 此处添加认证成功逻辑。</span></li><li>      }  <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-comment">// 此处添加认证失败逻辑。</span></li><li>      }</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth onResult error = <span class="hljs-subst">${error}</span>`</span>);</li><li>    }</li><li>  },</li><li>  <span class="hljs-attr">onAcquireInfo</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-variable language_">module</span>, acquire, extraInfo : userAuth.AuthResult</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`auth onAcquireInfo module = <span class="hljs-subst">${<span class="hljs-variable language_">module</span>}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`auth onAcquireInfo acquire = <span class="hljs-subst">${acquire}</span>`</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`auth onAcquireInfo extraInfo = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(extraInfo)}</span>`</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth onAcquireInfo error = <span class="hljs-subst">${error}</span>`</span>);</li><li>    }</li><li>  }</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 587px;">     <h2 id="authresultdeprecated" device-type="phone,2in1,tablet,wearable,tv">AuthResult<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="authresultdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示认证结果的对象。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始支持，从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authresultinfodeprecated">AuthResultInfo</a>代替。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.49.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">token</td>         <td class="cellrowborder" width="20%">Uint8Array</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">认证成功的令牌信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">remainTimes</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">剩余的认证操作次数。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">freezingTime</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">认证操作的冻结时间。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 875px;">     <h2 id="resultcodedeprecated" device-type="phone,2in1,tablet,wearable,tv">ResultCode<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resultcodedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示返回码的枚举。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 9 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthresultcode9">UserAuthResultCode</a>代替。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.50.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">SUCCESS</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">执行成功。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FAIL</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">认证失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">GENERAL_ERROR</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">操作通用错误。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CANCELED</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">操作取消。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TIMEOUT</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">操作超时。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TYPE_NOT_SUPPORT</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">不支持的认证类型。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TRUST_LEVEL_NOT_SUPPORT</td>         <td class="cellrowborder" width="33.33333333333333%">6</td>         <td class="cellrowborder" width="33.33333333333333%">不支持的认证等级。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BUSY</td>         <td class="cellrowborder" width="33.33333333333333%">7</td>         <td class="cellrowborder" width="33.33333333333333%">忙碌状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">INVALID_PARAMETERS</td>         <td class="cellrowborder" width="33.33333333333333%">8</td>         <td class="cellrowborder" width="33.33333333333333%">无效参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">LOCKED</td>         <td class="cellrowborder" width="33.33333333333333%">9</td>         <td class="cellrowborder" width="33.33333333333333%">认证器已锁定。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">NOT_ENROLLED</td>         <td class="cellrowborder" width="33.33333333333333%">10</td>         <td class="cellrowborder" width="33.33333333333333%">用户未录入认证信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 899px;">     <h2 id="facetipsdeprecated" device-type="phone,2in1,tablet,wearable,tv">FaceTips<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="facetipsdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示人脸认证过程中提示码的枚举。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始支持，从 API version 11 开始废弃。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">FACE_AUTH_TIP_TOO_BRIGHT</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">光线太强，获取的图像太亮。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FACE_AUTH_TIP_TOO_DARK</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">光线太暗，获取的图像太暗。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FACE_AUTH_TIP_TOO_CLOSE</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">人脸距离设备过近。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FACE_AUTH_TIP_TOO_FAR</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">人脸距离设备过远。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FACE_AUTH_TIP_TOO_HIGH</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">设备太高，仅获取到人脸上部。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FACE_AUTH_TIP_TOO_LOW</td>         <td class="cellrowborder" width="33.33333333333333%">6</td>         <td class="cellrowborder" width="33.33333333333333%">设备太低，仅获取到人脸下部。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FACE_AUTH_TIP_TOO_RIGHT</td>         <td class="cellrowborder" width="33.33333333333333%">7</td>         <td class="cellrowborder" width="33.33333333333333%">设备太靠右，仅获取到人脸右部。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FACE_AUTH_TIP_TOO_LEFT</td>         <td class="cellrowborder" width="33.33333333333333%">8</td>         <td class="cellrowborder" width="33.33333333333333%">设备太靠左，仅获取到人脸左部。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FACE_AUTH_TIP_TOO_MUCH_MOTION</td>         <td class="cellrowborder" width="33.33333333333333%">9</td>         <td class="cellrowborder" width="33.33333333333333%">在图像采集过程中，用户人脸移动太快。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FACE_AUTH_TIP_POOR_GAZE</td>         <td class="cellrowborder" width="33.33333333333333%">10</td>         <td class="cellrowborder" width="33.33333333333333%">没有正视摄像头。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FACE_AUTH_TIP_NOT_DETECTED</td>         <td class="cellrowborder" width="33.33333333333333%">11</td>         <td class="cellrowborder" width="33.33333333333333%">没有检测到人脸信息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 698px;">     <h2 id="fingerprinttipsdeprecated" device-type="phone,2in1,tablet,wearable,tv">FingerprintTips<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="fingerprinttipsdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示指纹认证过程中提示码的枚举。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始支持，从 API version 11 开始废弃。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">FINGERPRINT_AUTH_TIP_GOOD</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">获取的指纹图像良好。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FINGERPRINT_AUTH_TIP_DIRTY</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">由于传感器上可疑或检测到的污垢，指纹图像噪音过大。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FINGERPRINT_AUTH_TIP_INSUFFICIENT</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">由于检测到的情况，指纹图像噪声太大，无法处理。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FINGERPRINT_AUTH_TIP_PARTIAL</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">仅检测到部分指纹图像。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FINGERPRINT_AUTH_TIP_TOO_FAST</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">快速移动，指纹图像不完整。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FINGERPRINT_AUTH_TIP_TOO_SLOW</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">缺少运动，指纹图像无法读取。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 471px;">     <h2 id="userauthtype8" device-type="phone,2in1,tablet,wearable,tv">UserAuthType<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="userauthtype8" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示身份认证的凭据类型枚举。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.53.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">PIN<sup>10+</sup></td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">口令认证。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FACE</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">人脸认证。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FINGERPRINT</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">指纹认证。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 852px;">     <h2 id="authtrustlevel8" device-type="phone,2in1,tablet,wearable,tv">AuthTrustLevel<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="authtrustlevel8" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示认证结果的信任等级枚举。</p>     <p>典型场景及举例可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/user-authentication-overview#生物认证可信等级划分原则" target="_blank">认证可信等级划分原则</a>。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.54.6.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.6.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.6.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">ATL1</td>         <td class="cellrowborder" width="33.33333333333333%">10000</td>         <td class="cellrowborder" width="33.33333333333333%">认证结果的信任等级级别1，表示该认证方案能够识别用户个体，具备一定的活体检测能力。适用于业务风控、一般个人数据查询等场景。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">ATL2</td>         <td class="cellrowborder" width="33.33333333333333%">20000</td>         <td class="cellrowborder" width="33.33333333333333%">认证结果的信任等级级别2，表示该认证方案能够精确识别用户个体，具备一定的活体检测能力。适用于维持设备解锁状态、应用登录等场景。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">ATL3</td>         <td class="cellrowborder" width="33.33333333333333%">30000</td>         <td class="cellrowborder" width="33.33333333333333%">认证结果的信任等级级别3，表示该认证方案能够精确识别用户个体，具备较强的活体检测能力。适用于设备解锁等场景。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">ATL4</td>         <td class="cellrowborder" width="33.33333333333333%">40000</td>         <td class="cellrowborder" width="33.33333333333333%">认证结果的信任等级级别4，表示该认证方案能够高精度的识别用户个体，具备很强的活体检测能力。适用于小额支付等场景。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 737px;">     <h2 id="secureleveldeprecated" device-type="phone,2in1,tablet,wearable,tv">SecureLevel<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="secureleveldeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type SecureLevel = string</p>     <p>表示认证的安全级别。</p>     <p><strong>元服务API：</strong> 从 API version 6 开始支持，从 API version 8 开始废弃。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">          <p>表示类型为字符，认证的安全级别包括：'S1' | 'S2'|'S3'|'S4'。</p>          <p>- 'S1'：认证结果的信任等级级别1，代表该认证方案能够识别用户个体，有一定的活体检测能力。常用的业务场景有业务风控、一般个人数据查询等。</p>          <p>- 'S2'：认证结果的信任等级级别2，代表该认证方案能够精确识别用户个体，有一定的活体检测能力。常用的业务场景有维持设备解锁状态，应用登录等。</p>          <p>- 'S3'：认证结果的信任等级级别3，代表该认证方案能够精确识别用户个体，有较强的活体检测能力。常用的业务场景有设备解锁等。</p>          <p>- 'S4'：认证结果的信任等级级别4，代表该认证方案能够高精度的识别用户个体，有很强的活体检测能力。常用的业务场景有小额支付等。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 497px;">     <h2 id="authtypedeprecated" device-type="phone,2in1,tablet,wearable,tv">AuthType<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="authtypedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type AuthType = string</p>     <p>表示认证类型。</p>     <p><strong>元服务API：</strong> 从 API version 6 开始支持，从 API version 8 开始废弃。</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">          <p>表示认证类型为字符，认证类型包括：'ALL'|'FACE_ONLY'。</p>          <p>- 'ALL'：预留参数，当前版本暂不支持ALL类型的认证。</p>          <p>- 'FACE_ONLY'：人脸认证。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 750px;">     <h2 id="userauthgetauthenticatordeprecated" device-type="phone,2in1,tablet,wearable,tv">userAuth.getAuthenticator<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="userauthgetauthenticatordeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAuthenticator(): Authenticator</p>     <p>获取Authenticator对象，用于执行用户身份认证。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#constructordeprecated">constructor</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authenticatordeprecated">Authenticator</a></td>         <td class="cellrowborder" width="50%">认证器对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> authenticator = userAuth.<span class="hljs-title function_">getAuthenticator</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 274px;">     <h2 id="authenticatordeprecated" device-type="phone,2in1,tablet,wearable,tv">Authenticator<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="authenticatordeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>认证器对象。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#userauthdeprecated">UserAuth</a>替代。</p>      </div></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1348px;">     <h3 id="executedeprecated" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">execute<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="executedeprecated" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>execute(type: AuthType, level: SecureLevel, callback: AsyncCallback&lt;number&gt;): void</p>     <p>执行用户认证，使用callback方式作为异步方法。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authdeprecated">auth</a>替代。</p>      </div></div></div>     <p><strong>需要权限：</strong> ohos.permission.ACCESS_BIOMETRIC</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.59.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">AuthType</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>认证类型，当前只支持"FACE_ONLY"。</p>          <p>ALL为预留参数。当前版本暂不支持ALL类型的认证。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">level</td>         <td class="cellrowborder" width="25%">SecureLevel</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>安全级别，对应认证的安全级别，有效值为"S1"（最低）、"S2"、"S3"、"S4"（最高）。</p>          <p>具备3D人脸识别能力的设备支持"S3"及以下安全级别的认证。</p>          <p>具备2D人脸识别能力的设备支持"S2"及以下安全级别的认证。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。number表示认证结果，参见<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authenticationresultdeprecated">AuthenticationResult</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> authenticator = userAuth.<span class="hljs-title function_">getAuthenticator</span>();</li><li>authenticator.<span class="hljs-title function_">execute</span>(<span class="hljs-string">'FACE_ONLY'</span>, <span class="hljs-string">'S2'</span>, <span class="hljs-function">(<span class="hljs-params">error, code</span>)=&gt;</span>{</li><li>  <span class="hljs-keyword">if</span> (code === userAuth.<span class="hljs-property">ResultCode</span>.<span class="hljs-property">SUCCESS</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth success'</span>);</li><li>    <span class="hljs-keyword">return</span>;</li><li>  }</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth fail, code = <span class="hljs-subst">${code}</span>`</span>);</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1466px;">     <h3 id="executedeprecated-1" device-type="phone,2in1,tablet,wearable,tv">execute<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="executedeprecated-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>execute(type : AuthType, level : SecureLevel): Promise&lt;number&gt;</p>     <p>执行用户认证，使用promise方式作为异步方法。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authdeprecated">auth</a>替代。</p>      </div></div></div>     <p><strong>需要权限：</strong> ohos.permission.ACCESS_BIOMETRIC</p>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">AuthType</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>认证类型，当前只支持"FACE_ONLY"。</p>          <p>ALL为预留参数。当前版本暂不支持ALL类型的认证。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">level</td>         <td class="cellrowborder" width="25%">SecureLevel</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>安全级别，对应认证的安全级别，有效值为"S1"（最低）、"S2"、"S3"、"S4"（最高）。</p>          <p>具备3D人脸识别能力的设备支持"S3"及以下安全级别的认证。</p>          <p>具备2D人脸识别能力的设备支持"S2"及以下安全级别的认证。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.60.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">返回携带一个number的Promise。number 为认证结果，参见<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#authenticationresultdeprecated">AuthenticationResult</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ndf-c106="" class="highlight-div"><div _ngcontent-ndf-c106="" class="highlight-div-header"><div _ngcontent-ndf-c106="" class="highlight-div-header-left"><div _ngcontent-ndf-c106="" class="handle-button expand-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ndf-c106="" class="highlight-div-header-right"><div _ngcontent-ndf-c106="" class="handle-button ai-button"></div><div _ngcontent-ndf-c106="" class="handle-button line-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ndf-c106="" class="handle-button theme-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ndf-c106="" class="handle-button copy-button"><div _ngcontent-ndf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ndf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { userAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.UserAuthenticationKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> authenticator = userAuth.<span class="hljs-title function_">getAuthenticator</span>();</li><li>  authenticator.<span class="hljs-title function_">execute</span>(<span class="hljs-string">'FACE_ONLY'</span>, <span class="hljs-string">'S2'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">code</span>)=&gt;</span>{</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'auth success'</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`auth fail, code = <span class="hljs-subst">${error}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 875px;">     <h2 id="authenticationresultdeprecated" device-type="phone,2in1,tablet,wearable,tv">AuthenticationResult<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="authenticationresultdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示认证结果的枚举。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从 API version 8 开始废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-useriam-userauth#resultcodedeprecated">ResultCode</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.UserIAM.UserAuth.Core</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.61.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">NO_SUPPORT</td>         <td class="cellrowborder" width="33.33333333333333%">-1</td>         <td class="cellrowborder" width="33.33333333333333%">设备不支持当前的认证方式。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SUCCESS</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">认证成功。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COMPARE_FAILURE</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">比对失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CANCELED</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">用户取消认证。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TIMEOUT</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">认证超时。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">CAMERA_FAIL</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">开启相机失败。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BUSY</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">认证服务忙，请稍后重试。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">INVALID_PARAMETERS</td>         <td class="cellrowborder" width="33.33333333333333%">6</td>         <td class="cellrowborder" width="33.33333333333333%">认证参数无效。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">LOCKED</td>         <td class="cellrowborder" width="33.33333333333333%">7</td>         <td class="cellrowborder" width="33.33333333333333%">认证失败次数过多，已锁定。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">NOT_ENROLLED</td>         <td class="cellrowborder" width="33.33333333333333%">8</td>         <td class="cellrowborder" width="33.33333333333333%">未录入认证凭据。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">GENERAL_ERROR</td>         <td class="cellrowborder" width="33.33333333333333%">100</td>         <td class="cellrowborder" width="33.33333333333333%">其他错误。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>