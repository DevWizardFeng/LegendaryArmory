<h1 _ngcontent-tgk-c119="" class="doc-title ng-star-inserted" title="@ohos.util.stream (数据流基类stream)"> @ohos.util.stream (数据流基类stream) </h1>

<div _ngcontent-tgk-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>本模块提供基本流类型的处理能力，支持数据分块读取或写入，避免一次性加载整个数据到内存。</p>    <p>包括可写流（<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#writable">Writable</a>）、可读流（<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#readable">Readable</a>）、双工流（<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#duplex">Duplex</a>）和转换流（<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#transform">Transform</a>）。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 12开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { stream  } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkTS'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 182px;">     <h2 id="writable" device-type="phone,2in1,tablet,wearable,tv">Writable<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="writable" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>可写入数据的流。可写流允许将数据写入到目标中，这个目标可以是文件、HTTP 响应、标准输出、另一个流等。</p>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1563px;">     <h3 id="属性" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">writableObjectMode</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">指定可写流是否以对象模式工作。true表示流被配置为对象模式，false表示流处于非对象模式。当前版本只支持原始数据（字符串和Uint8Array），返回值为false。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">writableHighWatermark</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">定义可写流缓冲区数据量的水位线大小。当前版本不支持开发者自定义修改水位线大小。调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#write">write()</a>写入数据后，若缓冲区数据量达到该值，<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#write">write()</a>会返回false。默认值为16 * 1024字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">writable</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示可写流是否处于可写状态。true表示流当前是可写的，false表示流当前不再接受写入操作。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">writableLength</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示可写流缓冲区中待写入的字节数。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">writableCorked</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示可写流cork状态计数。值大于0时，可写流处于强制写入缓冲区状态；值为0时，该状态解除。使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#cork">cork()</a>方法时计数加一，使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#uncork">uncork()</a>方法时计数减一，使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#end">end()</a>方法时计数清零。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">writableEnded</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示当前可写流的<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#end">end()</a>是否被调用，该状态不代表数据已经全部写入。true表示<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#end">end()</a>已被调用，false表示<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#end">end()</a>未被调用。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">writableFinished</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示当前可写流是否处于写入完成状态。true表示当前流已处于写入完成状态，false表示当前流的写入操作可能还在进行中。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 479px;">     <h3 id="constructor" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p>     <p>Writable的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> writableStream = <span class="hljs-keyword">new</span> stream.<span class="hljs-title class_">Writable</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1803px;">     <h3 id="write" device-type="phone,2in1,tablet,wearable,tv">write<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="write" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>write(chunk?: string | Uint8Array, encoding?: string, callback?: Function): boolean</p>     <p>将数据写入流的缓冲区中。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">chunk</td>         <td class="cellrowborder" width="25%">string | Uint8Array</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要写入的数据。当前版本不支持null、undefined和空字符串。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">encoding</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">字符编码类型。默认值是'utf8'，当前版本支持'utf8'、'gb18030'、'gbk'以及'gb2312'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数。默认不调用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">可写流的缓冲区中是否还有空间。true表示缓冲区还有空间，false表示流的内部缓冲区数据量已达到设定水位线，不建议继续写入，如果连续调用写入函数，数据仍会被添加到缓冲区中，直到内存溢出为止。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200035</td>         <td class="cellrowborder" width="50%">The doWrite method has not been implemented.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200036</td>         <td class="cellrowborder" width="50%">The stream has been ended.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200037</td>         <td class="cellrowborder" width="50%">The callback is invoked multiple times consecutively.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestWritable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Writable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Writable chunk is"</span>, chunk); <span class="hljs-comment">// Writable chunk is test</span></li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> writableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestWritable</span>();</li><li>writableStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'test'</span>, <span class="hljs-string">'utf8'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1765px;">     <h3 id="end" device-type="phone,2in1,tablet,wearable,tv">end<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="end" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>end(chunk?: string | Uint8Array, encoding?: string, callback?: Function): Writable</p>     <p>结束可写流的写入操作。如果属性writableCorked的值大于0，会置零该值并输出缓冲区剩余数据。如果传入chunk参数，则根据实际运行情况，通过write或者doWrite将其作为最后一块数据写入。其中通过doWrite写入时，encoding参数的合法性检查依赖doWrite。end单独使用（不使用write）并传入chunk参数的情况下，必然通过doWrite写入。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">chunk</td>         <td class="cellrowborder" width="25%">string | Uint8Array</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要写入的数据。默认为undefined。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">encoding</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">字符编码类型。默认值是'utf8'，当前版本支持'utf8'、'gb18030'、'gbk'以及'gb2312'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#writable">Writable</a></td>         <td class="cellrowborder" width="50%">返回当前可写流对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200035</td>         <td class="cellrowborder" width="50%">The doWrite method has not been implemented.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestWritable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Writable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Writable chunk is"</span>, chunk);</li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>  <span class="hljs-comment">// Writable chunk is test</span></li><li>  <span class="hljs-comment">// Writable chunk is finish</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> writableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestWritable</span>();</li><li>writableStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'test'</span>, <span class="hljs-string">'utf8'</span>);</li><li>writableStream.<span class="hljs-title function_">end</span>(<span class="hljs-string">'finish'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Writable is end"</span>); <span class="hljs-comment">// Writable is end</span></li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1428px;">     <h3 id="setdefaultencoding" device-type="phone,2in1,tablet,wearable,tv">setDefaultEncoding<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setdefaultencoding" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setDefaultEncoding(encoding?: string): boolean</p>     <p>设置可写流的默认字符编码。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">encoding</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">设置默认字符编码。默认值是'utf8'，当前版本支持'utf8'、'gb18030'、'gbk'以及'gb2312'。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回是否设置成功。true表示成功，false表示失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestWritable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Writable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> writableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestWritable</span>();</li><li><span class="hljs-keyword">let</span> result = writableStream.<span class="hljs-title function_">setDefaultEncoding</span>(<span class="hljs-string">'utf8'</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Writable is result"</span>, result); <span class="hljs-comment">// Writable is result true</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 986px;">     <h3 id="cork" device-type="phone,2in1,tablet,wearable,tv">cork<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cork" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cork(): boolean</p>     <p>使后续写入的数据强制写入缓冲区，优化连续写入操作的性能。使用后属性writableCorked的值会加一。建议和<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#uncork">uncork()</a>成对使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回设置cork状态是否成功。true表示成功，false表示失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestWritable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Writable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> writableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestWritable</span>();</li><li><span class="hljs-keyword">let</span> result = writableStream.<span class="hljs-title function_">cork</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Writable cork result"</span>, result); <span class="hljs-comment">// Writable cork result true</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1130px;">     <h3 id="uncork" device-type="phone,2in1,tablet,wearable,tv">uncork<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="uncork" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>uncork(): boolean</p>     <p>解除cork状态，解除后刷新缓冲区数据并写入目标位置。使用后属性writableCorked的值会减一，如果该值降为0，则解除cork状态，否则流依然处于cork状态。建议和<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#cork">cork()</a>成对使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回解除cork状态是否成功。true表示成功，false表示失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestWritable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Writable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> writableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestWritable</span>();</li><li>writableStream.<span class="hljs-title function_">cork</span>();</li><li>writableStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data1'</span>, <span class="hljs-string">'utf8'</span>);</li><li>writableStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data2'</span>, <span class="hljs-string">'utf8'</span>);</li><li>writableStream.<span class="hljs-title function_">uncork</span>();</li><li>writableStream.<span class="hljs-title function_">end</span>();</li><li>writableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'finish'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"all Data is End"</span>); <span class="hljs-comment">// all Data is End</span></li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1614px;">     <h3 id="on" device-type="phone,2in1,tablet,wearable,tv">on<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="on" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: string, callback: Callback&lt;emitter.EventData&gt;): void</p>     <p>注册事件处理函数来监听可写流上的不同事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>事件回调类型，支持的事件包括：'close' | 'drain' |'error' | 'finish' 。</p>          <p>- 'close'：完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#end">end()</a>调用，结束写入操作，触发该事件。</p>          <p>- 'drain'：在可写流缓冲区中数据清空时触发该事件。</p>          <p>- 'error'：在可写流发生异常时触发该事件。</p>          <p>- 'finish'：在数据缓冲区全部写入到目标后触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-emitter#eventdata">emitter.EventData</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回事件传输的数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestWritable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Writable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>());</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> callbackCalled = <span class="hljs-literal">false</span>;</li><li><span class="hljs-keyword">let</span> writable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestWritable</span>();</li><li>writable.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Writable event test"</span>, callbackCalled.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// Writable event test false</span></li><li>});</li><li>writable.<span class="hljs-title function_">write</span>(<span class="hljs-string">'hello'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1734px;">     <h3 id="off" device-type="phone,2in1,tablet,wearable,tv">off<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="off" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: string, callback?: Callback&lt;emitter.EventData&gt;): void</p>     <p>移除通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#on">on</a>注册的事件处理函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>事件回调类型，支持的事件包括：'close' | 'drain' |'error' | 'finish' 。</p>          <p>- 'close'：完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#end">end()</a>调用，结束写入操作，触发该事件。</p>          <p>- 'drain'：在可写流缓冲区中数据清空时触发该事件。</p>          <p>- 'error'：在可写流发生异常时触发该事件。</p>          <p>- 'finish'：在数据缓冲区全部写入到目标后触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-emitter#eventdata">emitter.EventData</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestWritable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Writable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li> }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> writableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestWritable</span>();</li><li><span class="hljs-keyword">let</span> testListenerCalled = <span class="hljs-literal">false</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">testListener</span> = (<span class="hljs-params"></span>) =&gt; {</li><li>  testListenerCalled = <span class="hljs-literal">true</span>;</li><li>};</li><li>writableStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'finish'</span>, testListener);</li><li>writableStream.<span class="hljs-title function_">off</span>(<span class="hljs-string">'finish'</span>);</li><li>writableStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'test'</span>);</li><li>writableStream.<span class="hljs-title function_">end</span>();</li><li><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Writable off test"</span>, testListenerCalled.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// Writable off test false</span></li><li>}, <span class="hljs-number">0</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1161px;">     <h3 id="doinitialize" device-type="phone,2in1,tablet,wearable,tv">doInitialize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="doinitialize" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>doInitialize(callback: Function): void</p>     <p>用户实现这个函数。该函数在可写流初始化阶段被调用，无需用户调用。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyWritable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Writable</span> {</li><li>  <span class="hljs-title function_">doInitialize</span>(<span class="hljs-params">callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">doInitialize</span>(callback);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Writable doInitialize"</span>); <span class="hljs-comment">// Writable doInitialize</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">doWrite</span>(chunk, encoding, callback);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">new</span> <span class="hljs-title class_">MyWritable</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1323px;">     <h3 id="dowrite" device-type="phone,2in1,tablet,wearable,tv">doWrite<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dowrite" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>doWrite(chunk: string | Uint8Array, encoding: string, callback: Function): void</p>     <p>提供一个数据写出接口供开发者实现，该接口函数会在数据被成功写出时自动调用，无需手动触发。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">chunk</td>         <td class="cellrowborder" width="25%">string | Uint8Array</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要写出的数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">encoding</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">字符编码类型。当前版本支持'utf8'、'gb18030'、'gbk'以及'gb2312'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestWritable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Writable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Writable chunk is"</span>, chunk); <span class="hljs-comment">// Writable chunk is data</span></li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> writableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestWritable</span>();</li><li>writableStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data'</span>, <span class="hljs-string">'utf8'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1374px;">     <h3 id="dowritev" device-type="phone,2in1,tablet,wearable,tv">doWritev<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dowritev" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>doWritev(chunks: string[] | Uint8Array[], callback: Function): void</p>     <p>提供一个数据批量写出接口供使用者实现，该接口函数会在数据被成功写出时自动调用，无需用户手动触发。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">chunks</td>         <td class="cellrowborder" width="25%">string[] | Uint8Array[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">被批量写出的数据数组。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestWritable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Writable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWritev</span>(<span class="hljs-params">chunks: <span class="hljs-built_in">string</span>[] | <span class="hljs-built_in">Uint8Array</span>[], callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Writable chunk"</span>, chunks);</li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>  <span class="hljs-comment">// Writable chunk data1</span></li><li>  <span class="hljs-comment">// Writable chunk data2</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> writableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestWritable</span>();</li><li>writableStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data1'</span>, <span class="hljs-string">'utf8'</span>);</li><li>writableStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data2'</span>, <span class="hljs-string">'utf8'</span>);</li><li>writableStream.<span class="hljs-title function_">uncork</span>();</li><li>writableStream.<span class="hljs-title function_">end</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1221px;">     <h2 id="readableoptions" device-type="phone,2in1,tablet,wearable,tv">ReadableOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readableoptions" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>Readable构造函数的选项信息。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.5.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">encoding</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>指定数据的编码格式，如果传入非法字符串，将会在Readable构造函数中抛出异常。</p>          <p>- 支持格式：utf-8、UTF-8、GBK、GB2312、gb2312、GB18030、gb18030、ibm866、iso-8859-2、iso-8859-3、iso-8859-4、iso-8859-5、iso-8859-6、iso-8859-7、iso-8859-8、iso-8859-8-i、iso-8859-10、iso-8859-13、iso-8859-14、iso-8859-15、koi8-r、koi8-u、macintosh、windows-874、windows-1250、windows-1251、windows-1252、windows-1253、windows-1254、windows-1255、windows-1256、windows-1257、windows-1258、gbk、big5、euc-jp、iso-2022-jp、shift_jis、euc-kr、x-mac-cyrillic、utf-16be、utf-16le。</p>          <p>- 默认值是：'utf-8'。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="readable" device-type="phone,2in1,tablet,wearable,tv">Readable<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="readable" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>表示可读取数据的流。可读流用于从数据源（如文件、网络套接字等）读取数据。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1299px;">     <h3 id="属性-1" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">readableObjectMode</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">用于指定可读流是否以对象模式工作。true表示流被配置为对象模式，false表示流处于非对象模式。当前版本只支持原始数据（字符串和Uint8Array），返回值为false。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">readable</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示可读流是否处于可读状态。true表示流处于可读状态，false表示流中没有更多数据可供读取。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">readableHighWatermark</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">定义缓冲区的最大数据量。默认值为16 * 1024字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">readableFlowing</td>         <td class="cellrowborder" width="20%">boolean | null</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示当前可读流的状态。true表示流处于流动模式，false表示流处于非流动模式。默认值是true。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">readableLength</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示缓冲区的当前字节数。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">readableEncoding</td>         <td class="cellrowborder" width="20%">string | null</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">被解码成字符串时所使用的字符编码。默认值是'utf8'，当前版本支持'utf8'、'gb18030'、'gbk'以及'gb2312'。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">readableEnded</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示当前可读流是否已经结束。true表示流已经没有更多数据可读且已结束，false表示流尚未结束，仍有数据可读或等待读取。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 479px;">     <h3 id="constructor-1" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p>     <p>Readable的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> readableStream = <span class="hljs-keyword">new</span> stream.<span class="hljs-title class_">Readable</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 993px;">     <h3 id="constructor-2" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(options: ReadableOptions)</p>     <p>Readable的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#readableoptions">ReadableOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Readable构造函数的选项信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> option : stream.<span class="hljs-property">ReadableOptions</span> = {</li><li>  encoding : <span class="hljs-string">'utf-8'</span></li><li>};</li><li><span class="hljs-keyword">let</span> readableStream = <span class="hljs-keyword">new</span> stream.<span class="hljs-title class_">Readable</span>(option);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1459px;">     <h3 id="read" device-type="phone,2in1,tablet,wearable,tv">read<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="read" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>read(size?: number): string | null</p>     <p>从可读流缓冲区读取数据，并返回读取到的数据，如果未读取到数据，则返回null。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">size</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">读取数据的字节数。默认为undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string | null</td>         <td class="cellrowborder" width="50%">可读流读取出的数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200038</td>         <td class="cellrowborder" width="50%">The doRead method has not been implemented.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestReadable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Readable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> readableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestReadable</span>();</li><li>readableStream.<span class="hljs-title function_">push</span>(<span class="hljs-string">'test'</span>);</li><li>readableStream.<span class="hljs-title function_">pause</span>();</li><li><span class="hljs-keyword">let</span> dataChunk = readableStream.<span class="hljs-title function_">read</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Readable data is'</span>, dataChunk); <span class="hljs-comment">// Readable data is test</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 914px;">     <h3 id="resume" device-type="phone,2in1,tablet,wearable,tv">resume<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resume" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>resume(): Readable</p>     <p>将流的读取模式从暂停切换到流动模式，可用接口isPaused判断是否已切换。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#readable">Readable</a></td>         <td class="cellrowborder" width="50%">当前可读流本身。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestReadable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Readable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> readableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestReadable</span>();</li><li>readableStream.<span class="hljs-title function_">resume</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Readable test resume"</span>, !readableStream.<span class="hljs-title function_">isPaused</span>()); <span class="hljs-comment">// 切换流动模式成功时，此处日志将打印"Readable test resume true"</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 914px;">     <h3 id="pause" device-type="phone,2in1,tablet,wearable,tv">pause<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pause" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pause(): Readable</p>     <p>将流的读取模式从流动切换到暂停模式，可用接口isPaused判断是否已切换。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#readable">Readable</a></td>         <td class="cellrowborder" width="50%">当前可读流本身。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestReadable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Readable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> readableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestReadable</span>();</li><li>readableStream.<span class="hljs-title function_">pause</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Readable test pause"</span>, readableStream.<span class="hljs-title function_">isPaused</span>()); <span class="hljs-comment">// Readable test pause true</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1476px;">     <h3 id="setencoding" device-type="phone,2in1,tablet,wearable,tv">setEncoding<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setencoding" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setEncoding(encoding?: string): boolean</p>     <p>设置可读流的字符编码。</p>     <p>当缓冲区有数据时，不允许设置字符编码，返回值为false。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">encoding</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要设置的字符编码。默认值是'utf8'，当前版本支持'utf8'、'gb18030'、'gbk'以及'gb2312'。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回是否设置成功。true表示设置成功，false表示设置失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestReadable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Readable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> readableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestReadable</span>();</li><li><span class="hljs-keyword">let</span> result = readableStream.<span class="hljs-title function_">setEncoding</span>(<span class="hljs-string">'utf8'</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Readable result"</span>, result); <span class="hljs-comment">// Readable result true</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 962px;">     <h3 id="ispaused" device-type="phone,2in1,tablet,wearable,tv">isPaused<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ispaused" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isPaused(): boolean</p>     <p>检查流是否处于暂停模式，调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#pause">pause()</a>后，返回值为true；调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#resume">resume()</a>后，返回值为false。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回流是否处于暂停模式。true表示流处于暂停模式，false表示流未处于暂停模式。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestReadable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Readable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> readableStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestReadable</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Readable isPaused"</span>, readableStream.<span class="hljs-title function_">isPaused</span>()); <span class="hljs-comment">// Readable isPaused false</span></li><li>readableStream.<span class="hljs-title function_">pause</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Readable isPaused"</span>, readableStream.<span class="hljs-title function_">isPaused</span>()); <span class="hljs-comment">// Readable isPaused true</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1689px;">     <h3 id="pipe" device-type="phone,2in1,tablet,wearable,tv">pipe<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pipe" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pipe(destination: Writable, options?: Object): Writable</p>     <p>将一个可读流与一个可写流连接起来，实现数据的自动传输。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">destination</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#writable">Writable</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">接收数据的可写流。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%">Object</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">预留字段，暂不支持使用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#writable">Writable</a></td>         <td class="cellrowborder" width="50%">返回当前可写流对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestReadable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Readable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'test'</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-literal">null</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestWritable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Writable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Readable test pipe"</span>, chunk); <span class="hljs-comment">// Readable test pipe test</span></li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> readable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestReadable</span>();</li><li><span class="hljs-keyword">let</span> writable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestWritable</span>();</li><li>readable.<span class="hljs-title function_">pipe</span>(writable);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1788px;">     <h3 id="unpipe" device-type="phone,2in1,tablet,wearable,tv">unpipe<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="unpipe" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unpipe(destination?: Writable): Readable</p>     <p>从可写流中移除所有或指定的已连接的可读流。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">destination</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#writable">Writable</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">从当前可写流中移除指定的这个可读流。默认为undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#readable">Readable</a></td>         <td class="cellrowborder" width="50%">返回当前可读流对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestReadable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Readable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'test'</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(<span class="hljs-literal">null</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestWritable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Writable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> readable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestReadable</span>();</li><li><span class="hljs-keyword">let</span> writable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestWritable</span>();</li><li>readable.<span class="hljs-title function_">pipe</span>(writable);</li><li>readable.<span class="hljs-title function_">unpipe</span>(writable);</li><li>readable.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Readable test unpipe data event triggered"</span>);</li><li>});</li><li><span class="hljs-comment">// unpipe成功断开连接之后，data事件将不会触发，不会打印"Readable test unpipe data event triggered"</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1710px;">     <h3 id="on-1" device-type="phone,2in1,tablet,wearable,tv">on<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="on-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(event: string, callback: Callback&lt;emitter.EventData&gt;): void</p>     <p>注册事件处理函数来监听可读流上的不同事件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>事件回调类型，支持的事件包括：'close' | 'data' |'end' | 'error'|'readable'|'pause'|'resume' 。</p>          <p>- 'close'：完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#push">push()</a>调用，传入null值，触发该事件。</p>          <p>- 'data'：当流传递给消费者一个数据块时触发该事件。</p>          <p>- 'end'：完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#push">push()</a>调用，传入null值，触发该事件。</p>          <p>- 'error'：流发生异常时触发。</p>          <p>- 'readable'：当有可从流中读取的数据时触发该事件。</p>          <p>- 'pause'：完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#pause">pause()</a>调用，触发该事件。</p>          <p>- 'resume'：完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#resume">resume()</a>调用，触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-emitter#eventdata">emitter.EventData</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回事件数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestReadable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Readable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Simulated error'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> readable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestReadable</span>();</li><li>readable.<span class="hljs-title function_">push</span>(<span class="hljs-string">'test'</span>);</li><li>readable.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"error event called"</span>); <span class="hljs-comment">// error event called</span></li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1830px;">     <h3 id="off-1" device-type="phone,2in1,tablet,wearable,tv">off<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="off-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(event: string, callback?: Callback&lt;emitter.EventData&gt;): void</p>     <p>移除通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#on">on</a>注册的事件处理函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">event</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>事件回调类型，支持的事件包括：'close' | 'data' |'end' | 'error'|'readable'|'pause'|'resume' 。</p>          <p>- 'close'：完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#push">push()</a>调用，传入null值，触发该事件。</p>          <p>- 'data'：当流传递给消费者一个数据块时触发该事件。</p>          <p>- 'end'：完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#push">push()</a>调用，传入null值，触发该事件。</p>          <p>- 'error'：流发生异常时触发。</p>          <p>- 'readable'：当有可从流中读取的数据时触发该事件。</p>          <p>- 'pause'：完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#pause">pause()</a>调用，触发该事件。</p>          <p>- 'resume'：完成<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#resume">resume()</a>调用，触发该事件。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-emitter#eventdata">emitter.EventData</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestReadable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Readable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> readable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestReadable</span>();</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">read</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"read() called"</span>);</li><li>}</li><li>
</li><li>readable.<span class="hljs-title function_">setEncoding</span>(<span class="hljs-string">'utf8'</span>);</li><li>readable.<span class="hljs-title function_">on</span>(<span class="hljs-string">'readable'</span>, read);</li><li>readable.<span class="hljs-title function_">off</span>(<span class="hljs-string">'readable'</span>);</li><li>readable.<span class="hljs-title function_">push</span>(<span class="hljs-string">'test'</span>);</li><li><span class="hljs-comment">// off注销对readable事件的监听后，read函数不会被调用，"read() called"也不会被打印</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1185px;">     <h3 id="doinitialize-1" device-type="phone,2in1,tablet,wearable,tv">doInitialize<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="doinitialize-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>doInitialize(callback: Function): void</p>     <p>使用者实现这个函数，这个函数在可读流第一次使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#on-1">on</a>监听时被调用。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyReadable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Readable</span> {</li><li>  <span class="hljs-title function_">doInitialize</span>(<span class="hljs-params">callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">doInitialize</span>(callback);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Readable doInitialize"</span>); <span class="hljs-comment">// Readable doInitialize</span></li><li>}</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> myReadable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyReadable</span>();</li><li>myReadable.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1233px;">     <h3 id="doread" device-type="phone,2in1,tablet,wearable,tv">doRead<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="doread" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>doRead(size: number): void</p>     <p>数据读取接口，需要在子类中被实现。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">size</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">读取数据的字节数。 取值范围：0 &lt;= size &lt;= Number.MAX_VALUE。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestReadable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Readable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"doRead called"</span>); <span class="hljs-comment">// doRead called</span></li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> readable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestReadable</span>();</li><li>readable.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1521px;">     <h3 id="push" device-type="phone,2in1,tablet,wearable,tv">push<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="push" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>push(chunk: Uint8Array | string | null, encoding?: string): boolean</p>     <p>将数据推送到可读流缓冲区中。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">chunk</td>         <td class="cellrowborder" width="25%">Uint8Array | string | null</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">读取的数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">encoding</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">数据的编码格式。默认值是'utf8'，当前版本支持'utf8'、'gb18030'、'gbk'以及'gb2312'。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">可读流的缓冲区中是否还有空间。true表示缓冲区还有空间，false表示流的内部缓冲区已满。输入null时，固定返回false表示推送结束，没有数据块可推送。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestReadable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Readable</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> readable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestReadable</span>();</li><li><span class="hljs-keyword">let</span> testData = <span class="hljs-string">'Hello world'</span>;</li><li>readable.<span class="hljs-title function_">push</span>(testData);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Readable push test"</span>, readable.<span class="hljs-property">readableLength</span>); <span class="hljs-comment">// Readable push test 11</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 230px;">     <h2 id="duplex" device-type="phone,2in1,tablet,wearable,tv">Duplex<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="duplex" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>双工流是一个同时支持可读和可写能力的流。双工流允许数据在两个方向上进行传输，既可以读取数据，又可以写入数据。</p>     <p>Duplex类继承<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#readable">Readable</a>，支持Readable中所有的方法。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1587px;">     <h3 id="属性-2" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">属性<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="属性-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">writableObjectMode</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">用于指定双工流的写模式是否以对象模式工作。true表示流的写模式被配置为对象模式，false表示流的写模式处于非对象模式。当前版本只支持原始数据（字符串和Uint8Array），返回值为false。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">writableHighWatermark</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">定义双工流的写模式下缓冲区数据量的水位线大小。当前版本不支持开发者自定义修改设置水位线大小。调用<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#write-1">write()</a>写入后，若缓冲区数据量达到该值，<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#write-1">write()</a>会返回false。默认值为16 * 1024字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">writable</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示双工流是否处于可写状态。true表示当前流是可写的，false表示流当前不再接受写入操作。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">writableLength</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示双工流缓冲区中待写入的字节数。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">writableCorked</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示双工流cork状态计数。值大于0时，双工流处于强制写入缓冲区状态，值为0时，该状态解除。使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#cork-1">cork()</a>方法时计数加一，使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#uncork-1">uncork()</a>方法时计数减一，使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#end-1">end()</a>方法时计数清零。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">writableEnded</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示当前双工流的<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#end-1">end()</a>是否被调用，该状态不代表数据已经全部写入。true表示<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#end-1">end()</a>已被调用，false表示<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#end-1">end()</a>未被调用。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">writableFinished</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">表示当前双工流是否处于写入完成状态。true表示当前流已处于写入完成状态，false表示当前流的写入操作可能还在进行中。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 479px;">     <h3 id="constructor-3" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-3" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p>     <p>Duplex的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> duplex = <span class="hljs-keyword">new</span> stream.<span class="hljs-title class_">Duplex</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1899px;">     <h3 id="write-1" device-type="phone,2in1,tablet,wearable,tv">write<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="write-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>write(chunk?: string | Uint8Array, encoding?: string, callback?: Function): boolean</p>     <p>将数据写入流的缓冲区中。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">chunk</td>         <td class="cellrowborder" width="25%">string | Uint8Array</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要写入的数据。当前版本不支持null、undefined和空字符串。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">encoding</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">字符编码类型。默认值是'utf8'，当前版本支持'utf8'、'gb18030'、'gbk'以及'gb2312'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数。默认不调用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">可写流的缓冲区中是否还有空间。true表示缓冲区还有空间，false表示流的内部缓冲区数据量已达到设定水位线，不建议继续写入。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200036</td>         <td class="cellrowborder" width="50%">The stream has been ended.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200037</td>         <td class="cellrowborder" width="50%">The callback is invoked multiple times consecutively.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200039</td>         <td class="cellrowborder" width="50%">The doTransform method has not been implemented for a class that inherits from Transform.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDuplex</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Duplex</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"duplexStream chunk is"</span>, chunk); <span class="hljs-comment">// duplexStream chunk is test</span></li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> duplexStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestDuplex</span>();</li><li><span class="hljs-keyword">let</span> result = duplexStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'test'</span>, <span class="hljs-string">'utf8'</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"duplexStream result"</span>, result); <span class="hljs-comment">// duplexStream result true</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1789px;">     <h3 id="end-1" device-type="phone,2in1,tablet,wearable,tv">end<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="end-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>end(chunk?: string | Uint8Array, encoding?: string, callback?: Function): Writable</p>     <p>结束双工流的写入操作。如果属性writableCorked的值大于0，会置零该值并输出缓冲区剩余数据。如果传入chunk参数，则根据实际运行情况，通过write或者doWrite将其作为最后一块数据写入。其中通过doWrite写入时，encoding参数的合法性检查依赖doWrite。end单独使用（不使用write）并传入chunk参数的情况下，必然通过doWrite写入。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">chunk</td>         <td class="cellrowborder" width="25%">string | Uint8Array</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要写入的数据。默认为undefined。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">encoding</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">字符编码类型。默认值是'utf8'，当前版本支持'utf8'、'gb18030'、'gbk'以及'gb2312'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">回调函数。默认不调用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#writable">Writable</a></td>         <td class="cellrowborder" width="50%">返回可写流对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-utils">语言基础类库错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">10200039</td>         <td class="cellrowborder" width="50%">The doTransform method has not been implemented for a class that inherits from Transform.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDuplex</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Duplex</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Duplex chunk is"</span>, chunk); <span class="hljs-comment">// Duplex chunk is test</span></li><li>  <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> duplexStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestDuplex</span>();</li><li>duplexStream.<span class="hljs-title function_">end</span>(<span class="hljs-string">'test'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Duplex is end"</span>); <span class="hljs-comment">// Duplex is end</span></li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1524px;">     <h3 id="setdefaultencoding-1" device-type="phone,2in1,tablet,wearable,tv">setDefaultEncoding<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setdefaultencoding-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setDefaultEncoding(encoding?: string): boolean</p>     <p>设置双工流的默认字符编码，确保在读取数据时正确解析字符。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">encoding</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">需要设置的默认字符编码。默认值是'utf8'，当前版本支持'utf8'、'gb18030'、'gbk'以及'gb2312'。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回是否设置成功。true表示设置成功，false表示设置失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDuplex</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Duplex</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> duplexStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestDuplex</span>();</li><li><span class="hljs-keyword">let</span> result = duplexStream.<span class="hljs-title function_">setDefaultEncoding</span>(<span class="hljs-string">'utf8'</span>);</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"duplexStream is result"</span>, result); <span class="hljs-comment">// duplexStream is result true</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 746px;">     <h3 id="cork-1" device-type="phone,2in1,tablet,wearable,tv">cork<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cork-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>cork(): boolean</p>     <p>将写入的数据强制写入缓冲区暂存，用来优化连续写入操作的性能。使用后属性writableCorked的值会加一。建议和<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#uncork-1">uncork()</a>成对使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回设置cork状态是否成功。true表示设置成功，false表示设置失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> duplexStream = <span class="hljs-keyword">new</span> stream.<span class="hljs-title class_">Duplex</span>();</li><li><span class="hljs-keyword">let</span> result = duplexStream.<span class="hljs-title function_">cork</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"duplexStream cork result"</span>, result); <span class="hljs-comment">// duplexStream cork result true</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1178px;">     <h3 id="uncork-1" device-type="phone,2in1,tablet,wearable,tv">uncork<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="uncork-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>uncork(): boolean</p>     <p>解除cork状态，解除后将缓冲区中的数据全部刷新，并将其写入目标位置。使用后属性writableCorked的值会减一，如果该值降为0，则解除cork状态，否则流依然处于cork状态。建议和<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#cork-1">cork()</a>成对使用。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回解除cork状态是否成功。true表示成功，false表示失败。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> dataWritten = <span class="hljs-string">''</span>;</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDuplex</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Duplex</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    dataWritten += chunk;</li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> duplexStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestDuplex</span>();</li><li>duplexStream.<span class="hljs-title function_">cork</span>();</li><li>duplexStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'a'</span>);</li><li>duplexStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'b'</span>);</li><li>duplexStream.<span class="hljs-title function_">uncork</span>();</li><li><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Duplex test uncork"</span>, dataWritten); <span class="hljs-comment">// Duplex test uncork ab</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1395px;">     <h3 id="dowrite-1" device-type="phone,2in1,tablet,wearable,tv">doWrite<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dowrite-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>doWrite(chunk: string | Uint8Array, encoding: string, callback: Function): void</p>     <p>数据写出接口是一个由使用者实现的函数，在数据被写出时自动调用，而不需要用户手动调用。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">chunk</td>         <td class="cellrowborder" width="25%">string | Uint8Array</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要写出的数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">encoding</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">字符编码类型。当前版本支持'utf8'、'gb18030'、'gbk'以及'gb2312'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDuplex</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Duplex</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"duplexStream chunk is"</span>, chunk); <span class="hljs-comment">// duplexStream chunk is data</span></li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> duplexStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestDuplex</span>();</li><li>duplexStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data'</span>, <span class="hljs-string">'utf8'</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1494px;">     <h3 id="dowritev-1" device-type="phone,2in1,tablet,wearable,tv">doWritev<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dowritev-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>doWritev(chunks: string[] | Uint8Array[], callback: Function): void</p>     <p>数据分批写出接口是一个由使用者实现的函数，在数据被写出时自动调用，而不需要用户手动调用。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">chunks</td>         <td class="cellrowborder" width="25%">string[] | Uint8Array[]</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">被批量写出的数据数组。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestDuplex</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Duplex</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doRead</span>(<span class="hljs-params">size: <span class="hljs-built_in">number</span></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWrite</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doWritev</span>(<span class="hljs-params">chunks: <span class="hljs-built_in">string</span>[] | <span class="hljs-built_in">Uint8Array</span>[], callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"duplexStream chunk"</span>, chunks[<span class="hljs-number">0</span>]); <span class="hljs-comment">// duplexStream chunk data1</span></li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> duplexStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestDuplex</span>();</li><li>duplexStream.<span class="hljs-title function_">cork</span>();</li><li>duplexStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data1'</span>, <span class="hljs-string">'utf8'</span>);</li><li>duplexStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'data2'</span>, <span class="hljs-string">'utf8'</span>);</li><li>duplexStream.<span class="hljs-title function_">uncork</span>();</li><li>duplexStream.<span class="hljs-title function_">end</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 206px;">     <h2 id="transform" device-type="phone,2in1,tablet,wearable,tv">Transform<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="transform" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>转换流是一个特殊的双工流，支持可读和可写能力的流，可以对数据进行转换并输出结果。Transform类继承<a href="/consumer/cn/doc/harmonyos-references/js-apis-stream#duplex">Duplex</a>，支持Duplex中所有的方法。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 463px;">     <h3 id="constructor-4" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-4" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor()</p>     <p>Transform的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> transform = <span class="hljs-keyword">new</span> stream.<span class="hljs-title class_">Transform</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1371px;">     <h3 id="dotransform" device-type="phone,2in1,tablet,wearable,tv">doTransform<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dotransform" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>doTransform(chunk: string, encoding: string, callback: Function): void</p>     <p>对输入的数据块进行转换或处理，并通过回调函数通知操作完成。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">chunk</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要写入的数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">encoding</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">字符编码类型。当前版本支持'utf8'、'gb18030'、'gbk'以及'gb2312'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestTransform</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Transform</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doTransform</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-keyword">let</span> stringChunk = chunk.<span class="hljs-title function_">toString</span>().<span class="hljs-title function_">toUpperCase</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Transform test doTransform"</span>, stringChunk); <span class="hljs-comment">// Transform test doTransform HELLO</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">push</span>(stringChunk);</li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> tr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestTransform</span>();</li><li>tr.<span class="hljs-title function_">write</span>(<span class="hljs-string">"hello"</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1329px;">     <h3 id="doflush" device-type="phone,2in1,tablet,wearable,tv">doFlush<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="doflush" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>doFlush(callback: Function): void</p>     <p>该函数会在流结束时被调用，用于处理剩余的数据。使用callback异步回调。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Utils.Lang</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Function</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-tgk-c106="" class="highlight-div"><div _ngcontent-tgk-c106="" class="highlight-div-header"><div _ngcontent-tgk-c106="" class="highlight-div-header-left"><div _ngcontent-tgk-c106="" class="handle-button expand-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-tgk-c106="" class="highlight-div-header-right"><div _ngcontent-tgk-c106="" class="handle-button ai-button"></div><div _ngcontent-tgk-c106="" class="handle-button line-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-tgk-c106="" class="handle-button theme-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-tgk-c106="" class="handle-button copy-button"><div _ngcontent-tgk-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-tgk-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestTransform</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">stream.Transform</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">super</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doTransform</span>(<span class="hljs-params">chunk: <span class="hljs-built_in">string</span>, encoding: <span class="hljs-built_in">string</span>, callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-title function_">callback</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doFlush</span>(<span class="hljs-params">callback: <span class="hljs-built_in">Function</span></span>) {</li><li>    <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">'test'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> transform = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestTransform</span>();</li><li>transform.<span class="hljs-title function_">end</span>(<span class="hljs-string">'my test'</span>);</li><li>transform.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"data is"</span>, data.<span class="hljs-property">data</span>); <span class="hljs-comment">// data is test</span></li><li>});</li></ol></pre></div></div>    </div>   </div>   <div></div></div>