<h1 _ngcontent-ccp-c119="" class="doc-title ng-star-inserted" title="@ohos.zlib (Zip模块)"> @ohos.zlib (Zip模块) </h1>

<div _ngcontent-ccp-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>本模块提供压缩解压缩文件的能力。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 7开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="javascript prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1423px;">     <h2 id="zlibzipfiledeprecated" device-type="phone,2in1,tablet,wearable,tv">zlib.zipFile<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibzipfiledeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>zipFile(inFile: string, outFile: string, options: Options): Promise&lt;void&gt;</p>     <p>压缩接口，压缩完成后返回执行结果，使用Promise异步返回。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 7开始支持，从API version 9开始废弃。建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zlibcompressfile9">zlib.compressFile</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">inFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定压缩的文件夹路径或者文件路径，路径必须为沙箱路径，沙箱路径可以通过context获取，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">FA模型</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Stage模型</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">outFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定压缩结果的文件路径（文件的扩展名zip）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#options">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">压缩的可选参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 代码中使用的路径需为应用的沙箱路径，如/data/storage/el2/base/temp,也可以通过context获取。</span></li><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> inFile = <span class="hljs-string">'/data/storage/el2/base/temp/filename.xxx'</span>;</li><li><span class="hljs-keyword">let</span> outFile = <span class="hljs-string">'/data/storage/el2/base/temp/xxx.zip'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: zlib.<span class="hljs-property">Options</span> = {</li><li>  <span class="hljs-attr">level</span>: zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_DEFAULT_COMPRESSION</span>,</li><li>  <span class="hljs-attr">memLevel</span>: zlib.<span class="hljs-property">MemLevel</span>.<span class="hljs-property">MEM_LEVEL_DEFAULT</span>,</li><li>  <span class="hljs-attr">strategy</span>: zlib.<span class="hljs-property">CompressStrategy</span>.<span class="hljs-property">COMPRESS_STRATEGY_DEFAULT_STRATEGY</span></li><li>};</li><li>
</li><li>zlib.<span class="hljs-title function_">zipFile</span>(inFile, outFile, options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">void</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'zipFile result is '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'error is '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>});</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1519px;">     <h2 id="zlibunzipfiledeprecated" device-type="phone,2in1,tablet,wearable,tv">zlib.unzipFile<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibunzipfiledeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>unzipFile(inFile:string, outFile:string, options: Options): Promise&lt;void&gt;</p>     <p>解压文件，解压完成后返回执行结果，使用Promise异步返回。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 7开始支持，从API version 9开始废弃。建议使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zlibdecompressfile9">zlib.decompressFile</a>。</p>       <p>传入的压缩包内部文件或者文件夹名称不能包含“../”，否则会返回-1错误码。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">inFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的待解压缩文件的文件路径，路径必须为沙箱路径，沙箱路径可以通过context获取，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">FA模型</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Stage模型</a>。如果待解压的.zip文件中包含中文的文件名或目录名，需使用UTF8进行编码，避免解压时文件名或目录名出现中文乱码。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">outFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的解压文件路径。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#options">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">解压的可选参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 代码中使用的路径需为应用的沙箱路径，如/data/storage/el2/base/temp,也可以通过context获取。</span></li><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> inFile = <span class="hljs-string">'/data/storage/el2/base/temp/xxx.zip'</span>;</li><li><span class="hljs-keyword">let</span> outFile = <span class="hljs-string">'/data/storage/el2/base/temp/xxx'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: zlib.<span class="hljs-property">Options</span> = {</li><li>  <span class="hljs-attr">level</span>: zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_DEFAULT_COMPRESSION</span>,</li><li>  <span class="hljs-attr">memLevel</span>: zlib.<span class="hljs-property">MemLevel</span>.<span class="hljs-property">MEM_LEVEL_DEFAULT</span>,</li><li>  <span class="hljs-attr">strategy</span>: zlib.<span class="hljs-property">CompressStrategy</span>.<span class="hljs-property">COMPRESS_STRATEGY_DEFAULT_STRATEGY</span></li><li>};</li><li>
</li><li>zlib.<span class="hljs-title function_">unzipFile</span>(inFile, outFile, options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">void</span></span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'unzipFile result is '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'error is '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2082px;">     <h2 id="zlibcompressfile9" device-type="phone,2in1,tablet,wearable,tv">zlib.compressFile<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibcompressfile9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>compressFile(inFile: string, outFile: string, options: Options, callback: AsyncCallback&lt;void&gt;): void</p>     <p>压缩文件，压缩的结果，使用callback异步回调返回。成功返回null，失败返回错误码。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>为了避免路径穿越，从API version 13开始，inFile和outFile传入的参数不允许包含“../”，否则会返回900001、900002错误码。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">inFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定压缩的文件夹路径或者文件路径，路径必须为沙箱路径，沙箱路径可以通过context获取，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">FA模型</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Stage模型</a>。待压缩的文件夹不可为空，否则使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zlibdecompressfile9">decompressFile</a>对压缩后的文件解压时会报错。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">outFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的压缩结果的文件路径。多个线程同时压缩文件时，outFile不能相同。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#options">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">压缩的配置参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步获取压缩结果之后的回调。成功返回null，失败返回错误码。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900001</td>         <td class="cellrowborder" width="50%">The input source file is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900002</td>         <td class="cellrowborder" width="50%">The input destination file is invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 代码中使用的路径需为应用的沙箱路径，如/data/storage/el2/base/temp,也可以通过context获取。</span></li><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> inFile = <span class="hljs-string">'/data/storage/el2/base/temp/filename.xxx'</span>;</li><li><span class="hljs-keyword">let</span> outFile = <span class="hljs-string">'/data/storage/el2/base/temp/xxx.zip'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: zlib.<span class="hljs-property">Options</span> = {</li><li>  <span class="hljs-attr">level</span>: zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_DEFAULT_COMPRESSION</span>,</li><li>  <span class="hljs-attr">memLevel</span>: zlib.<span class="hljs-property">MemLevel</span>.<span class="hljs-property">MEM_LEVEL_DEFAULT</span>,</li><li>  <span class="hljs-attr">strategy</span>: zlib.<span class="hljs-property">CompressStrategy</span>.<span class="hljs-property">COMPRESS_STRATEGY_DEFAULT_STRATEGY</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  zlib.<span class="hljs-title function_">compressFile</span>(inFile, outFile, options, <span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (errData !== <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`compressFile errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`compressFile success.`</span>);</li><li>    }</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (errData) {</li><li>  <span class="hljs-keyword">let</span> code = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> message = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`compressFile errData is errCode:<span class="hljs-subst">${code}</span>  message:<span class="hljs-subst">${message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2112px;">     <h2 id="zlibcompressfile9-1" device-type="phone,2in1,tablet,wearable,tv">zlib.compressFile<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibcompressfile9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>compressFile(inFile: string, outFile: string, options: Options): Promise&lt;void&gt;</p>     <p>压缩文件，压缩的结果，使用Promise异步返回。成功时返回null，失败时返回错误码。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>为了避免路径穿越，从API version 13开始，inFile和outFile传入的参数不允许包含“../”，否则会返回900001、900002错误码。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">inFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定压缩的文件夹路径或者文件路径，路径必须为沙箱路径，沙箱路径可以通过context获取，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">FA模型</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Stage模型</a>。待压缩的文件夹不可为空，否则使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zlibdecompressfile9">decompressFile</a>对压缩后的文件解压时会报错。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">outFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的压缩结果的文件路径。多个线程同时压缩文件时，outFile不能相同。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#options">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">压缩的配置参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900001</td>         <td class="cellrowborder" width="50%">The input source file is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900002</td>         <td class="cellrowborder" width="50%">The input destination file is invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 代码中使用的路径需为应用的沙箱路径，如/data/storage/el2/base/temp,也可以通过context获取。</span></li><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> inFile = <span class="hljs-string">'/data/storage/el2/base/temp/filename.xxx'</span>;</li><li><span class="hljs-keyword">let</span> outFile = <span class="hljs-string">'/data/storage/el2/base/temp/xxx.zip'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: zlib.<span class="hljs-property">Options</span> = {</li><li>  <span class="hljs-attr">level</span>: zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_DEFAULT_COMPRESSION</span>,</li><li>  <span class="hljs-attr">memLevel</span>: zlib.<span class="hljs-property">MemLevel</span>.<span class="hljs-property">MEM_LEVEL_DEFAULT</span>,</li><li>  <span class="hljs-attr">strategy</span>: zlib.<span class="hljs-property">CompressStrategy</span>.<span class="hljs-property">COMPRESS_STRATEGY_DEFAULT_STRATEGY</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  zlib.<span class="hljs-title function_">compressFile</span>(inFile, outFile, options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">void</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'compressFile success. data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (errData) {</li><li>  <span class="hljs-keyword">let</span> code = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> message = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${code}</span>  message:<span class="hljs-subst">${message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2473px;">     <h2 id="zlibdecompressfile9" device-type="phone,2in1,tablet,wearable,tv">zlib.decompressFile<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibdecompressfile9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>decompressFile(inFile: string, outFile: string, options: Options, callback: AsyncCallback&lt;void&gt;): void</p>     <p>解压文件，解压的结果，使用callback异步回调返回。成功时返回null，失败时返回错误码。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>为了避免路径穿越，从API version 13开始，inFile和outFile传入的参数不允许包含“../”，否则会返回900001、900002错误码。</p>       <p>传入的压缩包内部文件或者文件夹名称不能包含“../”，否则会返回900003错误码。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">inFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的待解压缩文件的文件路径，文件后缀需要以.zip结尾。文件路径必须为沙箱路径，沙箱路径可以通过context获取，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">FA模型</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Stage模型</a>。如果待解压的.zip文件中包含中文的文件名或目录名，需使用UTF8进行编码，避免解压时文件名或目录名出现中文乱码。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">outFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的解压后的文件夹路径，文件夹目录路径需要在系统中存在，不存在则会解压失败。路径必须为沙箱路径，沙箱路径可以通过context获取，具体方法可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">application/context（Stage模型）</a>或 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">app/context（FA模型）</a>。如果待解压的文件或文件夹在解压后的路径下已经存在，则会直接覆盖同名文件或同名文件夹中的同名文件。多个线程同时解压文件时，outFile不能相同。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#options">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">解压的配置参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步获取解压结果之后的回调。成功返回null，失败返回错误码。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900001</td>         <td class="cellrowborder" width="50%">The input source file is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900002</td>         <td class="cellrowborder" width="50%">The input destination file is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900003</td>         <td class="cellrowborder" width="50%">The input source file is not in ZIP format or is damaged.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 代码中使用的路径需为应用的沙箱路径，如/data/storage/el2/base/temp,也可以通过context获取。</span></li><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> inFile = <span class="hljs-string">'/data/storage/el2/base/temp/xxx.zip'</span>;</li><li><span class="hljs-keyword">let</span> outFileDir = <span class="hljs-string">'/data/storage/el2/base/temp'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: zlib.<span class="hljs-property">Options</span> = {</li><li>  <span class="hljs-attr">level</span>: zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_DEFAULT_COMPRESSION</span>,</li><li>  <span class="hljs-attr">parallel</span>: zlib.<span class="hljs-property">ParallelStrategy</span>.<span class="hljs-property">PARALLEL_STRATEGY_PARALLEL_DECOMPRESSION</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  zlib.<span class="hljs-title function_">decompressFile</span>(inFile, outFileDir, options, <span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (errData !== <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`decompressFile errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`decompressFile success.`</span>);</li><li>    }</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (errData) {</li><li>  <span class="hljs-keyword">let</span> code = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> message = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`decompressFile errData is errCode:<span class="hljs-subst">${code}</span>  message:<span class="hljs-subst">${message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2479px;">     <h2 id="zlibdecompressfile9-1" device-type="phone,2in1,tablet,wearable,tv">zlib.decompressFile<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibdecompressfile9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>decompressFile(inFile: string, outFile: string, options?: Options): Promise&lt;void&gt;</p>     <p>解压文件，解压的结果，使用Promise异步返回，成功时返回null，失败时返回错误码。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>为了避免路径穿越，从API version 13开始，inFile和outFile传入的参数不允许包含“../”，否则会返回900001、900002错误码。</p>       <p>传入的压缩包内部文件或者文件夹名称不能包含“../”，否则会返回900003错误码。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">inFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的待解压缩文件的文件路径，文件后缀需要以.zip结尾。文件路径必须为沙箱路径，沙箱路径可以通过context获取，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">FA模型</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Stage模型</a>。如果待解压的.zip文件中包含中文的文件名或目录名，需使用UTF8进行编码，避免解压时文件名或目录名出现中文乱码。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">outFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的解压后的文件夹路径，文件夹目录路径需要在系统中存在，不存在则会解压失败。路径必须为沙箱路径，沙箱路径可以通过context获取，具体方法可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">application/context（Stage模型）</a>或 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">app/context（FA模型）</a>。如果待解压的文件或文件夹在解压后的路径下已经存在，则会直接覆盖同名文件或同名文件夹中的同名文件。多个线程同时解压文件时，outFile不能相同。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#options">Options</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">解压时的配置参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900001</td>         <td class="cellrowborder" width="50%">The input source file is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900002</td>         <td class="cellrowborder" width="50%">The input destination file is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900003</td>         <td class="cellrowborder" width="50%">The input source file is not in ZIP format or is damaged.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 代码中使用的路径需为应用的沙箱路径，如/data/storage/el2/base/temp,也可以通过context获取。</span></li><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> inFile = <span class="hljs-string">'/data/storage/el2/base/temp/xxx.zip'</span>;</li><li><span class="hljs-keyword">let</span> outFileDir = <span class="hljs-string">'/data/storage/el2/base/temp'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: zlib.<span class="hljs-property">Options</span> = {</li><li>  <span class="hljs-attr">level</span>: zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_DEFAULT_COMPRESSION</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  zlib.<span class="hljs-title function_">decompressFile</span>(inFile, outFileDir, options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">void</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'decompressFile success. data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (errData) {</li><li>  <span class="hljs-keyword">let</span> code = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> message = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${code}</span>  message:<span class="hljs-subst">${message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2332px;">     <h2 id="zlibdecompressfile10" device-type="phone,2in1,tablet,wearable,tv">zlib.decompressFile<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibdecompressfile10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>decompressFile(inFile: string, outFile: string, callback: AsyncCallback&lt;void&gt;): void</p>     <p>解压文件，解压的结果，使用callback异步回调返回。成功时返回null，失败时返回错误码。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>为了避免路径穿越，从API version 13开始，inFile和outFile传入的参数不允许包含“../”，否则会返回900001、900002错误码。</p>       <p>传入的压缩包内部文件或者文件夹名称不能包含“../”，否则会返回900003错误码。</p>      </div></div></div>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">inFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的待解压缩文件的文件路径，文件后缀需要以.zip结尾。文件路径必须为沙箱路径，沙箱路径可以通过context获取，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">FA模型</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Stage模型</a>。如果待解压的.zip文件中包含中文的文件名或目录名，需使用UTF8进行编码，避免解压时文件名或目录名出现中文乱码。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">outFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的解压后的文件夹路径，文件夹目录路径需要在系统中存在，不存在则会解压失败。路径必须为沙箱路径，沙箱路径可以通过context获取，具体方法可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">application/context（Stage模型）</a>或 <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">app/context（FA模型）</a>。如果待解压的文件或文件夹在解压后的路径下已经存在，则会直接覆盖同名文件或同名文件夹中的同名文件。多个线程同时解压文件时，outFile不能相同。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">异步获取解压结果之后的回调。成功返回null，失败返回错误码。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900001</td>         <td class="cellrowborder" width="50%">The input source file is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900002</td>         <td class="cellrowborder" width="50%">The input destination file is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900003</td>         <td class="cellrowborder" width="50%">The input source file is not in ZIP format or is damaged.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 代码中使用的路径需为应用的沙箱路径，如/data/storage/el2/base/temp,也可以通过context获取。</span></li><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> inFile = <span class="hljs-string">'/data/storage/el2/base/temp/xxx.zip'</span>;</li><li><span class="hljs-keyword">let</span> outFileDir = <span class="hljs-string">'/data/storage/el2/base/temp'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  zlib.<span class="hljs-title function_">decompressFile</span>(inFile, outFileDir, <span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (errData !== <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`decompressFile failed. code is <span class="hljs-subst">${errData.code}</span>, message is <span class="hljs-subst">${errData.message}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`decompressFile success.`</span>);</li><li>    }</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (errData) {</li><li>  <span class="hljs-keyword">let</span> code = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> message = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`decompressFile failed. code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1666px;">     <h2 id="zlibgetoriginalsize12" device-type="phone,2in1,tablet,wearable,tv">zlib.getOriginalSize<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibgetoriginalsize12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getOriginalSize(compressedFile: string): Promise&lt;number&gt;</p>     <p>获取压缩文件的原始大小，使用Promise异步返回。成功时返回压缩文件的原始大小，失败时返回错误码。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">compressedFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的压缩文件的文件路径，只支持zip格式压缩文件。文件路径必须为沙箱路径，沙箱路径可以通过context获取，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">FA模型</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Stage模型</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回压缩文件的原始大小，单位字节。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">The parameter check failed. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900001</td>         <td class="cellrowborder" width="50%">The input source file is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900003</td>         <td class="cellrowborder" width="50%">The input source file is not in ZIP format or is damaged.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 代码中使用的路径需为应用的沙箱路径，如/data/storage/el2/base/temp，也可以通过context获取。</span></li><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> compressedFile = <span class="hljs-string">'/data/storage/el2/base/temp/test.zip'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  zlib.<span class="hljs-title function_">getOriginalSize</span>(compressedFile).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getOriginalSize success. getOriginalSize: <span class="hljs-subst">${data}</span>`</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (errData) {</li><li>  <span class="hljs-keyword">let</span> code = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> message = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${code}</span>  message:<span class="hljs-subst">${message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2020px;">     <h2 id="zlibcompressfiles12" device-type="phone,2in1,tablet,wearable,tv">zlib.compressFiles<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibcompressfiles12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>compressFiles(inFiles: Array&lt;string&gt;, outFile: string, options: Options): Promise&lt;void&gt;</p>     <p>压缩指定的多个文件，使用Promise异步返回。成功时返回null，失败时返回错误码。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">inFiles</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定压缩的文件夹路径或者文件路径，路径必须为沙箱路径，沙箱路径可以通过context获取，可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-app-context">FA模型</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Stage模型</a>。待压缩的文件夹不可为空，否则使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zlibdecompressfile9">decompressFile</a>对压缩后的文件解压时会报错。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">outFile</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定的压缩结果的文件路径。多个线程同时压缩文件时，outFile不能相同。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#options">Options</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">压缩的配置参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900001</td>         <td class="cellrowborder" width="50%">The input source file is invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">900002</td>         <td class="cellrowborder" width="50%">The input destination file is invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 代码中使用的路径需为应用的沙箱路径，如/data/storage/el2/base/temp，也可以通过context获取。</span></li><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> inFile = <span class="hljs-string">'/data/storage/el2/base/temp/filename.xxx'</span>;</li><li><span class="hljs-keyword">let</span> pathDir = <span class="hljs-string">'data/storage/el2/base/temp/xxx'</span>;</li><li><span class="hljs-keyword">let</span> outFile = <span class="hljs-string">'/data/storage/el2/base/temp/xxx.zip'</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">options</span>: zlib.<span class="hljs-property">Options</span> = {</li><li>  <span class="hljs-attr">level</span>: zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_DEFAULT_COMPRESSION</span>,</li><li>  <span class="hljs-attr">memLevel</span>: zlib.<span class="hljs-property">MemLevel</span>.<span class="hljs-property">MEM_LEVEL_DEFAULT</span>,</li><li>  <span class="hljs-attr">strategy</span>: zlib.<span class="hljs-property">CompressStrategy</span>.<span class="hljs-property">COMPRESS_STRATEGY_DEFAULT_STRATEGY</span></li><li>};</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  zlib.<span class="hljs-title function_">compressFiles</span>([inFile, pathDir], outFile, options).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">void</span></span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'compressFiles success. data: '</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>} <span class="hljs-keyword">catch</span> (errData) {</li><li>  <span class="hljs-keyword">let</span> code = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>  <span class="hljs-keyword">let</span> message = (errData <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${code}</span>  message:<span class="hljs-subst">${message}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 754px;">     <h2 id="zlibcreatechecksum12" device-type="phone,2in1,tablet,wearable,tv">zlib.createChecksum<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibcreatechecksum12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createChecksum(): Promise&lt;Checksum&gt;</p>     <p>创建校验对象，使用Promise异步返回。成功时返回Checksum对象实例。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#checksum12">Checksum</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回校验对象实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>zlib.<span class="hljs-title function_">createChecksum</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createChecksum success'</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 706px;">     <h2 id="zlibcreatechecksumsync12" device-type="phone,2in1,tablet,wearable,tv">zlib.createChecksumSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibcreatechecksumsync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createChecksumSync(): Checksum</p>     <p>创建校验对象。成功时返回Checksum对象实例。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#checksum12">Checksum</a></td>         <td class="cellrowborder" width="50%">校验对象实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> checksum = zlib.<span class="hljs-title function_">createChecksumSync</span>()</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="checksum12" device-type="phone,2in1,tablet,wearable,tv">Checksum<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="checksum12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>校验对象。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1433px;">     <h3 id="adler3212" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">adler32<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="adler3212" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>adler32(adler: number, buf: ArrayBuffer): Promise&lt;number&gt;</p>     <p>计算Adler-32校验和，使用Promise异步返回。成功时返回计算后的Adler-32校验和，失败时返回错误码。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">adler</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Adler-32校验和的初始值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">计算校验和数据缓冲区。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回计算后的Adler-32校验和。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li><span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">12</span>);</li><li><span class="hljs-keyword">let</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>
</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>  data[i] = str.<span class="hljs-title function_">charCodeAt</span>(i);</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> checksum = zlib.<span class="hljs-title function_">createChecksumSync</span>()</li><li>
</li><li>checksum.<span class="hljs-title function_">adler32</span>(<span class="hljs-number">0</span>, arrayBufferIn).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'adler32 success'</span>, data);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1830px;">     <h3 id="adler32combine12" device-type="phone,2in1,tablet,wearable,tv">adler32Combine<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="adler32combine12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>adler32Combine(adler1: number, adler2: number, len2: number): Promise&lt;number&gt;</p>     <p>将两个Adler-32校验和合并，使用Promise异步返回。成功时返回合并后的Adler-32校验和，失败时返回错误码。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">adler1</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">第一个要合并的Adler-32校验和。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">adler2</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">第二个要合并的Adler-32校验和。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">len2</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">第二个Adler-32校验和的数据块的长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回合并后的Adler-32校验和。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">12</span>);</li><li>  <span class="hljs-keyword">let</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    data[i] = str.<span class="hljs-title function_">charCodeAt</span>(i);</li><li>  }</li><li>  <span class="hljs-keyword">let</span> checksum = zlib.<span class="hljs-title function_">createChecksumSync</span>()</li><li>  <span class="hljs-keyword">let</span> adler1 = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">let</span> adler2 = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-keyword">await</span> checksum.<span class="hljs-title function_">adler32</span>(<span class="hljs-number">0</span>, arrayBufferIn).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'adler32 success'</span>, data);</li><li>    adler1 = data;</li><li>  })</li><li>  <span class="hljs-keyword">await</span> checksum.<span class="hljs-title function_">adler32</span>(<span class="hljs-number">1</span>, arrayBufferIn).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'adler32 success'</span>, data);</li><li>    adler2 = data;</li><li>  })</li><li>  <span class="hljs-keyword">await</span> checksum.<span class="hljs-title function_">adler32Combine</span>(adler1, adler2, <span class="hljs-number">12</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'adler32Combine success'</span>, data);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1497px;">     <h3 id="crc3212" device-type="phone,2in1,tablet,wearable,tv">crc32<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="crc3212" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>crc32(crc: number, buf: ArrayBuffer): Promise&lt;number&gt;</p>     <p>更新CRC-32校验，使用Promise异步返回。成功时返回更新后的CRC-32校验，失败时返回错误码。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">crc</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">CRC-32校验的初始值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">计算校验数据缓冲区。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回更新后的CRC-32校验。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li><span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">12</span>);</li><li><span class="hljs-keyword">let</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>
</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>  data[i] = str.<span class="hljs-title function_">charCodeAt</span>(i);</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> checksum = zlib.<span class="hljs-title function_">createChecksumSync</span>()</li><li>
</li><li>checksum.<span class="hljs-title function_">crc32</span>(<span class="hljs-number">0</span>, arrayBufferIn).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'crc32 success'</span>, data);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1830px;">     <h3 id="crc32combine12" device-type="phone,2in1,tablet,wearable,tv">crc32Combine<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="crc32combine12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>crc32Combine(crc1: number, crc2: number, len2: number): Promise&lt;number&gt;</p>     <p>将两个CRC-32校验合并，使用Promise异步返回。成功时返回合并后的CRC-32校验，失败时返回错误码。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">crc1</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">第一个要合并的CRC-32校验。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">crc2</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">第二个要合并的CRC-32校验。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">len2</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">第二个CRC-32校验的数据块的长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回合并后的CRC-32校验。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">12</span>);</li><li>  <span class="hljs-keyword">let</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    data[i] = str.<span class="hljs-title function_">charCodeAt</span>(i);</li><li>  }</li><li>  <span class="hljs-keyword">let</span> checksum = zlib.<span class="hljs-title function_">createChecksumSync</span>()</li><li>  <span class="hljs-keyword">let</span> crc1 = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">let</span> crc2 = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-keyword">await</span> checksum.<span class="hljs-title function_">crc32</span>(<span class="hljs-number">0</span>, arrayBufferIn).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'crc32 success'</span>, data);</li><li>    crc1 = data;</li><li>  })</li><li>  <span class="hljs-keyword">await</span> checksum.<span class="hljs-title function_">crc32</span>(<span class="hljs-number">1</span>, arrayBufferIn).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'crc32 success'</span>, data);</li><li>    crc2 = data;</li><li>  })</li><li>  <span class="hljs-keyword">await</span> checksum.<span class="hljs-title function_">crc32Combine</span>(crc1, crc2, <span class="hljs-number">12</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'crc32Combine success'</span>, data);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1497px;">     <h3 id="crc6412" device-type="phone,2in1,tablet,wearable,tv">crc64<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="crc6412" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>crc64(crc: number, buf: ArrayBuffer): Promise&lt;number&gt;</p>     <p>更新CRC-64校验，使用Promise异步返回。成功时返回更新后的CRC-64校验，失败时返回错误码。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">crc</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">CRC-64校验的初始值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">计算校验数据缓冲区。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回更新后的CRC-64校验。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified; 2. Incorrect parameter types; 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li><span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">12</span>);</li><li><span class="hljs-keyword">let</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>
</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>  data[i] = str.<span class="hljs-title function_">charCodeAt</span>(i);</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> checksum = zlib.<span class="hljs-title function_">createChecksumSync</span>()</li><li>
</li><li>checksum.<span class="hljs-title function_">crc64</span>(<span class="hljs-number">0</span>, arrayBufferIn).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'crc64 success'</span>, data);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 842px;">     <h3 id="getcrctable12" device-type="phone,2in1,tablet,wearable,tv">getCrcTable<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcrctable12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCrcTable(): Promise&lt;Array&lt;number&gt;&gt;</p>     <p>输出CRC-32校验表，使用Promise异步返回。成功时返回CRC-32校验表。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;number&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回CRC-32校验表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> checksum = zlib.<span class="hljs-title function_">createChecksumSync</span>()</li><li>
</li><li>checksum.<span class="hljs-title function_">getCrcTable</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getCrcTable success'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 842px;">     <h3 id="getcrc64table12" device-type="phone,2in1,tablet,wearable,tv">getCrc64Table<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcrc64table12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCrc64Table(): Promise&lt;Array&lt;number&gt;&gt;</p>     <p>输出CRC-64校验表，使用Promise异步返回。成功时返回CRC-64校验表。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;number&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回CRC-64校验表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> checksum = zlib.<span class="hljs-title function_">createChecksumSync</span>()</li><li>
</li><li>checksum.<span class="hljs-title function_">getCrc64Table</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getCrc64Table success'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 802px;">     <h2 id="zlibcreatezip12" device-type="phone,2in1,tablet,wearable,tv">zlib.createZip<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibcreatezip12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createZip(): Promise&lt;Zip&gt;</p>     <p>创建压缩解压缩对象实例，使用Promise异步返回，成功时返回压缩解压缩对象实例。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zip12">Zip</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回压缩解压缩对象实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>zlib.<span class="hljs-title function_">createZip</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createZip success'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 706px;">     <h2 id="zlibcreatezipsync12" device-type="phone,2in1,tablet,wearable,tv">zlib.createZipSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibcreatezipsync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createZipSync(): Zip</p>     <p>创建压缩解压缩对象实例，成功时返回压缩解压缩对象实例。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zip12">Zip</a></td>         <td class="cellrowborder" width="50%">返回压缩解压缩对象实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="zip12" device-type="phone,2in1,tablet,wearable,tv">Zip<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zip12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>压缩解压缩对象实例，支持以zlib、deflate、gzip格式对数据进行压缩与解压。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 778px;">     <h3 id="getzstream12" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">getZStream<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getzstream12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getZStream(): Promise&lt;ZStream&gt;</p>     <p>输出流，使用Promise异步返回。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回ZStream流。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>
</li><li>zip.<span class="hljs-title function_">getZStream</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getZStream success'</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 794px;">     <h3 id="zlibversion12" device-type="phone,2in1,tablet,wearable,tv">zlibVersion<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibversion12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>zlibVersion(): Promise&lt;string&gt;</p>     <p>获取当前链接的zlib库的版本信息，使用Promise异步返回。成功时返回当前zlib库的版本信息。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回当前zlib库的版本信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>
</li><li>zip.<span class="hljs-title function_">zlibVersion</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'zlibVersion success'</span>)</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 794px;">     <h3 id="zlibcompileflags12" device-type="phone,2in1,tablet,wearable,tv">zlibCompileFlags<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibcompileflags12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>zlibCompileFlags(): Promise&lt;number&gt;</p>     <p>返回指示编译时选项的标志，使用Promise异步返回。成功时返回指示编译时选项的标志。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回指示编译时选项的标志。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>
</li><li>zip.<span class="hljs-title function_">zlibCompileFlags</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'zlibCompileFlags success'</span>)</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1693px;">     <h3 id="compress12" device-type="phone,2in1,tablet,wearable,tv">compress<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="compress12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>compress(dest: ArrayBuffer, source: ArrayBuffer, sourceLen?: number): Promise&lt;ZipOutputInfo&gt;</p>     <p>将源缓冲区压缩到目标缓冲区，使用Promise异步返回。成功时返回结果状态和目标缓冲区的总大小。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">dest</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">source</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">源数据缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">sourceLen</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">源数据长度。默认值为0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zipoutputinfo12">ZipOutputInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态和目标缓冲区的总大小。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800007</td>         <td class="cellrowborder" width="50%">The input buffer is incorrect, and the output buffer is too small to accommodate the compressed or decompressed data.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li><span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li><span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>
</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>  byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li><span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>
</li><li>zip.<span class="hljs-title function_">compress</span>(arrayBufferOut, arrayBufferIn, <span class="hljs-number">20</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'compress success:'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1865px;">     <h3 id="compress212" device-type="phone,2in1,tablet,wearable,tv">compress2<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="compress212" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>compress2(dest: ArrayBuffer, source: ArrayBuffer, level: CompressLevel, sourceLen?: number): Promise&lt;ZipOutputInfo&gt;</p>     <p>将源缓冲区压缩到目标缓冲区，使用Promise异步返回。成功时返回结果状态和目标缓冲区的总大小。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">dest</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">source</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">源数据缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">level</td>         <td class="cellrowborder" width="25%">CompressLevel</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compresslevel">CompressLevel枚举定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">sourceLen</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">源数据长度。默认值为0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zipoutputinfo12">ZipOutputInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态和目标缓冲区的总大小。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800007</td>         <td class="cellrowborder" width="50%">The input buffer is incorrect, and the output buffer is too small to accommodate the compressed or decompressed data.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li><span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li><span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>
</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>  byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li><span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>
</li><li>zip.<span class="hljs-title function_">compress2</span>(arrayBufferOut, arrayBufferIn, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'compress2 success'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1916px;">     <h3 id="uncompress12" device-type="phone,2in1,tablet,wearable,tv">uncompress<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="uncompress12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>uncompress(dest:ArrayBuffer, source: ArrayBuffer, sourceLen?: number): Promise&lt;ZipOutputInfo&gt;</p>     <p>将压缩后的数据解压缩为原始的未压缩形式，使用Promise异步返回。成功时返回结果状态和目标缓冲区的总大小。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">dest</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">source</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">源数据缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">sourceLen</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">源数据长度。默认值为0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zipoutputinfo12">ZipOutputInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态和目标缓冲区的总大小。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800005</td>         <td class="cellrowborder" width="50%">The input data is incorrect. For example, the data does not conform to the zlib compression format, the compressed data is corrupted, or the data is not compressed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800007</td>         <td class="cellrowborder" width="50%">The input buffer is incorrect, and the output buffer is too small to accommodate the compressed or decompressed data.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">compress</span>(arrayBufferOut, arrayBufferIn, <span class="hljs-number">12</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'compress success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">uncompress</span>(arrayBufferIn, arrayBufferOut, <span class="hljs-number">20</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'uncompress success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1940px;">     <h3 id="uncompress212" device-type="phone,2in1,tablet,wearable,tv">uncompress2<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="uncompress212" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>uncompress2(dest: ArrayBuffer, source: ArrayBuffer, sourceLen?: number): Promise&lt;DecompressionOutputInfo&gt;</p>     <p>将压缩后的数据解压缩为原始的未压缩形式，使用Promise异步返回。成功时返回结果状态、目标缓冲区的总大小和源数据长度。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">dest</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">source</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">源数据缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">sourceLen</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">源数据长度。默认值为0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#decompressionoutputinfo12">DecompressionOutputInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态、目标缓冲区的总大小和源数据长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800005</td>         <td class="cellrowborder" width="50%">The input data is incorrect. For example, the data does not conform to the zlib compression format, the compressed data is corrupted, or the data is not compressed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800007</td>         <td class="cellrowborder" width="50%">The input buffer is incorrect, and the output buffer is too small to accommodate the compressed or decompressed data.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">compress2</span>(arrayBufferOut, arrayBufferIn, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'compress2 success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">uncompress2</span>(arrayBufferIn, arrayBufferOut, <span class="hljs-number">20</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'uncompress2 success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1476px;">     <h3 id="compressbound12" device-type="phone,2in1,tablet,wearable,tv">compressBound<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="compressbound12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>compressBound(sourceLen: number): Promise&lt;number&gt;</p>     <p>计算返回压缩大小的上限，使用Promise异步返回。成功时返回压缩大小的上限。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sourceLen</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">源数据长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回压缩大小的上限。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li><span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li><span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>
</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>  byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>
</li><li>zip.<span class="hljs-title function_">compressBound</span>(str.<span class="hljs-property">length</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'compressBound success'</span>)</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1768px;">     <h3 id="inflatevalidate12" device-type="phone,2in1,tablet,wearable,tv">inflateValidate<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflatevalidate12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateValidate(strm: ZStream, check: number): Promise&lt;ReturnStatus&gt;</p>     <p>验证压缩流结构内部的校验和，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">check</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">预期的校验和。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }</li><li>  ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateValidate</span>({ <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span> }, <span class="hljs-number">1</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateValidate success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1723px;">     <h3 id="inflatesyncpoint12" device-type="phone,2in1,tablet,wearable,tv">inflateSyncPoint<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflatesyncpoint12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateSyncPoint(strm: ZStream): Promise&lt;ReturnStatus&gt;</p>     <p>查找当前解压缩流的同步点，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }</li><li>  ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateSyncPoint</span>({ <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateSyncPoint success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2697px;">     <h3 id="inflatesync12" device-type="phone,2in1,tablet,wearable,tv">inflateSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflatesync12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateSync(strm: ZStream): Promise&lt;ReturnStatus&gt;</p>     <p>跳过无效的压缩数据，直到找到一个可能的完整刷新点为止，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800005</td>         <td class="cellrowborder" width="50%">The input data is incorrect. For example, the data does not conform to the zlib compression format, the compressed data is corrupted, or the data is not compressed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800007</td>         <td class="cellrowborder" width="50%">The input buffer is incorrect, and the output buffer is too small to accommodate the compressed or decompressed data.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello, hello!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>({}, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_DEFAULT_COMPRESSION</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflate</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">100</span> }, zlib.<span class="hljs-property">CompressFlushMode</span>.<span class="hljs-property">FULL_FLUSH</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflate success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflate</span>({ <span class="hljs-attr">availableIn</span>: <span class="hljs-number">11</span> }, zlib.<span class="hljs-property">CompressFlushMode</span>.<span class="hljs-property">FINISH</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflate success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateEnd</span>({}).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateEnd success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferOut, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">2</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit2 success'</span>)</li><li>    })</li><li>  } <span class="hljs-keyword">catch</span> (errData) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  }</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflate</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferIn, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">28</span> }, zlib.<span class="hljs-property">CompressFlushMode</span>.<span class="hljs-property">NO_FLUSH</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflate success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateSync</span>({ <span class="hljs-attr">availableIn</span>: <span class="hljs-number">26</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateSync success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateEnd</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateEnd success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1723px;">     <h3 id="inflateresetkeep12" device-type="phone,2in1,tablet,wearable,tv">inflateResetKeep<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflateresetkeep12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateResetKeep(strm: ZStream): Promise&lt;ReturnStatus&gt;</p>     <p>重置解压缩流的状态，以保留分配的霍夫曼解码树和预设字典，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }</li><li>  ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateResetKeep</span>({ <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateResetKeep success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2783px;">     <h3 id="inflatesetdictionary12" device-type="phone,2in1,tablet,wearable,tv">inflateSetDictionary<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflatesetdictionary12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateSetDictionary(strm: ZStream, dictionary: ArrayBuffer): Promise&lt;ReturnStatus&gt;</p>     <p>从给定的未压缩字节序列初始化解压缩字典，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">dictionary</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">字典数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800005</td>         <td class="cellrowborder" width="50%">The input data is incorrect. For example, the data does not conform to the zlib compression format, the compressed data is corrupted, or the data is not compressed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello, hello!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">let</span> dictionary = <span class="hljs-string">'hello'</span></li><li>  <span class="hljs-keyword">let</span> dictionarybuf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(dictionary.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> dictionarybufdata = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(dictionarybuf);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = dictionary.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    dictionarybufdata[i] = str.<span class="hljs-title function_">charCodeAt</span>(i);</li><li>  }</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>({}, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_COMPRESSION</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateSetDictionary</span>({}, dictionarybuf).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateSetDictionary success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflate</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">14</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">100</span> }, zlib.<span class="hljs-property">CompressFlushMode</span>.<span class="hljs-property">FINISH</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflate success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateEnd</span>({}).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateEnd success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferOut, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">100</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit success'</span>)</li><li>    })</li><li>  } <span class="hljs-keyword">catch</span> (errData) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  }</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflate</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferIn, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">28</span> }, zlib.<span class="hljs-property">CompressFlushMode</span>.<span class="hljs-property">NO_FLUSH</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflate success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateSetDictionary</span>({}, dictionarybuf).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateSetDictionary success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateEnd</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateEnd success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1912px;">     <h3 id="inflatereset212" device-type="phone,2in1,tablet,wearable,tv">inflateReset2<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflatereset212" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateReset2(strm: ZStream, windowBits: number): Promise&lt;ReturnStatus&gt;</p>     <p>从给定的未压缩字节序列初始化解压缩字典，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">windowBits</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>控制内存窗口的大小，并指定数据的格式（zlib、gzip、raw deflate）。取值如下：</p>          <p>zlib格式：[1, 15]。</p>          <p>gzip格式：大于15。</p>          <p>raw deflate格式：[-15, -1]。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }</li><li>  ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateReset2</span>({ <span class="hljs-attr">availableOut</span>: <span class="hljs-number">8</span> }, <span class="hljs-number">15</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateReset2 success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1747px;">     <h3 id="inflatereset12" device-type="phone,2in1,tablet,wearable,tv">inflateReset<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflatereset12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateReset(strm: ZStream): Promise&lt;ReturnStatus&gt;</p>     <p>这个函数相当于先调用inflateEnd再调用inflateInit，但是并不会释放和重新分配内部解压缩状态，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }</li><li>  ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateReset</span>({ <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">8</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateReset success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1813px;">     <h3 id="inflateprime12" device-type="phone,2in1,tablet,wearable,tv">inflatePrime<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflateprime12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflatePrime(strm: ZStream, bits: number, value: number): Promise&lt;ReturnStatus&gt;</p>     <p>从给定的未压缩字节序列初始化解压缩字典，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">bits</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">提供的位。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">提供的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }</li><li>  ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflatePrime</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflatePrime success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1620px;">     <h3 id="inflatemark12" device-type="phone,2in1,tablet,wearable,tv">inflateMark<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflatemark12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateMark(strm: ZStream): Promise&lt;number&gt;</p>     <p>用于标记输入数据中的位置以供随机访问，使用Promise异步返回。成功时返回位置信息。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回位置信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }</li><li>  ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateMark</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateMark success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1816px;">     <h3 id="inflateinit212" device-type="phone,2in1,tablet,wearable,tv">inflateInit2<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflateinit212" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateInit2(strm: ZStream, windowBits: number): Promise&lt;ReturnStatus&gt;</p>     <p>初始化内部流状态以进行解压缩，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">windowBits</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>控制内存窗口的大小，并指定数据的格式（zlib、gzip、raw deflate）。取值如下：</p>          <p>zlib格式：[1, 15]。</p>          <p>gzip格式：大于15。</p>          <p>raw deflate格式：[-15, -1]。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li><span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li><span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>
</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>  byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li><span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>
</li><li>zip.<span class="hljs-title function_">inflateInit2</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }, <span class="hljs-number">28</span></li><li>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit2 success'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1524px;">     <h3 id="inflateinit12" device-type="phone,2in1,tablet,wearable,tv">inflateInit<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflateinit12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateInit(strm: ZStream): Promise&lt;ReturnStatus&gt;</p>     <p>初始化内部流状态以进行解压缩，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li><span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li><span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>
</li><li><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>  byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li><span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>
</li><li>zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }</li><li>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit success'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1792px;">     <h3 id="inflategetheader12" device-type="phone,2in1,tablet,wearable,tv">inflateGetHeader<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflategetheader12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateGetHeader(strm: ZStream, header: GzHeader): Promise&lt;ReturnStatus&gt;</p>     <p>用于在解压缩数据前设置gzip文件头部信息，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">header</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#gzheader12">GzHeader</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">从压缩数据流中提取的gzip头信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit2</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }, <span class="hljs-number">28</span></li><li>  ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit2 success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateGetHeader</span>({ <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">isText</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">os</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">time</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">xflags</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">extra</span>: arrayBufferIn, <span class="hljs-attr">extraLen</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">name</span>: arrayBufferIn, <span class="hljs-attr">comment</span>: arrayBufferOut, <span class="hljs-attr">hcrc</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateGetHeader success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1792px;">     <h3 id="inflategetdictionary12" device-type="phone,2in1,tablet,wearable,tv">inflateGetDictionary<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflategetdictionary12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateGetDictionary(strm: ZStream, dictionary: ArrayBuffer): Promise&lt;DictionaryOutputInfo&gt;</p>     <p>获取当前解压缩流中使用的解压缩字典内容及其长度，使用Promise异步返回。成功时返回结果状态和字典的长度。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">dictionary</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">接收解压缩字典的实际内容。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#dictionaryoutputinfo12">DictionaryOutputInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态和字典的长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit2</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }, <span class="hljs-number">28</span></li><li>  ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit2 success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateGetDictionary</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }, arrayBufferOut).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateGetDictionary success:'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1843px;">     <h3 id="inflateend12" device-type="phone,2in1,tablet,wearable,tv">inflateEnd<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflateend12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateEnd(strm: ZStream): Promise&lt;ReturnStatus&gt;</p>     <p>解压流的所有动态分配的数据结构都被释放，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }</li><li>  ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflate</span>({ <span class="hljs-attr">availableIn</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">8</span> }, <span class="hljs-number">0</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflate success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateEnd</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateEnd success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1747px;">     <h3 id="inflatecopy12" device-type="phone,2in1,tablet,wearable,tv">inflateCopy<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflatecopy12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateCopy(source: Zip): Promise&lt;ReturnStatus&gt;</p>     <p>复制解压流，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">source</td>         <td class="cellrowborder" width="25%">Zip</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zip12">Zip定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }</li><li>  ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">let</span> destZip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> destZip.<span class="hljs-title function_">inflateCopy</span>(zip).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateCopy success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1620px;">     <h3 id="inflatecodesused12" device-type="phone,2in1,tablet,wearable,tv">inflateCodesUsed<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflatecodesused12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateCodesUsed(strm: ZStream): Promise&lt;number&gt;</p>     <p>当前解压缩流中使用的霍夫曼编码树的数量，使用Promise异步返回。成功时返回已使用的霍夫曼编码树的数量。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.49.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回已使用的霍夫曼编码树的数量。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.49.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }</li><li>  ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateCodesUsed</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">8</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateCodesUsed success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1364px;">     <h3 id="inflatebackinit12" device-type="phone,2in1,tablet,wearable,tv">inflateBackInit<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflatebackinit12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateBackInit(strm: ZStream, windowBits: number, window: ArrayBuffer): Promise&lt;ReturnStatus&gt;</p>     <p>使用inflateBack()函数前初始化内部流状态以进行解压缩，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">windowBits</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>控制内存窗口的大小，并指定数据的格式（zlib、gzip、raw deflate）。取值如下：</p>          <p>zlib格式：[1, 15]。</p>          <p>gzip格式：大于15。</p>          <p>raw deflate格式：[-15, -1]。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">window</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">预设的窗口缓冲区。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#inflateback12">inflateBack</a>中的示例代码。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1130px;">     <h3 id="inflatebackend12" device-type="phone,2in1,tablet,wearable,tv">inflateBackEnd<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflatebackend12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateBackEnd(strm: ZStream): Promise&lt;ReturnStatus&gt;</p>     <p>inflateBackInit()函数分配的所有内存都被释放，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#inflateback12">inflateBack</a>中的示例代码。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4615px;">     <h3 id="inflateback12" device-type="phone,2in1,tablet,wearable,tv">inflateBack<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflateback12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflateBack(strm: ZStream, backIn: InflateBackInputCallback, inDesc: object, backOut: InflateBackOutputCallback, outDesc: object): Promise&lt;ReturnStatus&gt;</p>     <p>实现原始解压缩，采用回调接口来处理输入和输出，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">backIn</td>         <td class="cellrowborder" width="25%">InflateBackInputCallback</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">一种函数，用于从末尾解压缩数据，以从输入源读取原始压缩数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">inDesc</td>         <td class="cellrowborder" width="25%">object</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">通用对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">backOut</td>         <td class="cellrowborder" width="25%">InflateBackOutputCallback</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">将解压缩的数据写入目标输出。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">outDesc</td>         <td class="cellrowborder" width="25%">object</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">通用对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified.</p>          <p>2. Incorrect parameter types.</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">readIn</span>: <span class="hljs-function">(<span class="hljs-params">inDesc: <span class="hljs-built_in">object</span></span>) =&gt;</span> <span class="hljs-title class_">ArrayBuffer</span> = (<span class="hljs-attr">inDesc</span>: <span class="hljs-built_in">object</span>): <span class="hljs-function"><span class="hljs-params">ArrayBuffer</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"inDesc = "</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(inDesc));</li><li>    <span class="hljs-keyword">let</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">26</span>)</li><li>    <span class="hljs-keyword">let</span> array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer);</li><li>    array.<span class="hljs-title function_">set</span>([<span class="hljs-number">31</span>, <span class="hljs-number">139</span>, <span class="hljs-number">8</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">243</span>, <span class="hljs-number">72</span>, <span class="hljs-number">205</span>, <span class="hljs-number">201</span>, <span class="hljs-number">201</span>, <span class="hljs-number">231</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">22</span>, <span class="hljs-number">53</span>, <span class="hljs-number">150</span>, <span class="hljs-number">49</span>, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]);</li><li>    <span class="hljs-keyword">return</span> buffer;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">writeOut</span>: <span class="hljs-function">(<span class="hljs-params">outDesc: <span class="hljs-built_in">object</span>, buffer: <span class="hljs-built_in">ArrayBuffer</span>, length: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span> = (<span class="hljs-attr">outDesc</span>: <span class="hljs-built_in">object</span>, <span class="hljs-attr">buffer</span>: <span class="hljs-title class_">ArrayBuffer</span>, <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"outDesc = "</span>, outDesc);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"buffer = "</span>, buffer);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"length = "</span>, length);</li><li>    <span class="hljs-keyword">let</span> array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer);</li><li>    <span class="hljs-keyword">let</span> dataString = <span class="hljs-string">""</span>;</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; length; i++) {</li><li>      dataString += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(array[i]);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'writeOut '</span>, dataString);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">let</span> have = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">let</span> first = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">26</span>);</li><li>  <span class="hljs-keyword">let</span> next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBuffer);</li><li>  <span class="hljs-keyword">let</span> last = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">let</span> flags = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-title class_">NEXT2</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">number</span> = (): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">o6</span>: <span class="hljs-built_in">object</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>()</li><li>    <span class="hljs-keyword">if</span> (!have) {</li><li>      arrayBuffer = <span class="hljs-title function_">readIn</span>(o6)</li><li>      next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBuffer);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'readIn next = '</span>, next.<span class="hljs-property">length</span>)</li><li>      have = next.<span class="hljs-property">length</span>;</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (have) {</li><li>      have--;</li><li>      last = next[index];</li><li>      index++;</li><li>    }</li><li>    <span class="hljs-keyword">else</span> {</li><li>      last = -<span class="hljs-number">1</span>;</li><li>    }</li><li>    <span class="hljs-keyword">return</span> last;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">inflateBackTest</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> = (<span class="hljs-keyword">async</span> () =&gt; {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      have = <span class="hljs-number">0</span>;</li><li>      first = <span class="hljs-number">1</span>;</li><li>      arrayBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">26</span>);</li><li>      next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBuffer);</li><li>      last = <span class="hljs-number">0</span>;</li><li>      index = <span class="hljs-number">0</span>;</li><li>      flags = <span class="hljs-number">0</span>;</li><li>      <span class="hljs-keyword">let</span> sr = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>      <span class="hljs-keyword">let</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">1024</span>)</li><li>      <span class="hljs-keyword">await</span> sr.<span class="hljs-title function_">inflateBackInit</span>({}, <span class="hljs-number">15</span>, buffer).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateBackInit Call result res'</span>, result)</li><li>      })</li><li>      <span class="hljs-keyword">let</span> ret = <span class="hljs-number">0</span>;</li><li>      <span class="hljs-keyword">for</span> (; ;) {</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">NEXT2</span>() == -<span class="hljs-number">1</span>) {</li><li>          ret = <span class="hljs-number">0</span>;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateBackTest Call result NEXT2() == -1'</span>)</li><li>          <span class="hljs-keyword">break</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'have =  last = '</span>, have, last)</li><li>        <span class="hljs-keyword">if</span> (last != <span class="hljs-number">31</span> || <span class="hljs-title class_">NEXT2</span>() != <span class="hljs-number">139</span> ) {</li><li>          ret = first ? -<span class="hljs-number">3</span> : -<span class="hljs-number">1</span>;</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateBackTest Call result last != 31 || (NEXT2() != 139 &amp;&amp; last != 157)'</span>)</li><li>          <span class="hljs-keyword">break</span>;</li><li>        }</li><li>        first = <span class="hljs-number">0</span>;</li><li>        ret = -<span class="hljs-number">5</span>;</li><li>        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">NEXT2</span>() != <span class="hljs-number">8</span>) {</li><li>          <span class="hljs-keyword">if</span> (last &lt; <span class="hljs-number">0</span>) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateBackTest Call result 1 last == -1'</span>)</li><li>            <span class="hljs-keyword">break</span>;</li><li>          }</li><li>        }</li><li>        flags = <span class="hljs-title class_">NEXT2</span>();</li><li>        <span class="hljs-title class_">NEXT2</span>();</li><li>        <span class="hljs-title class_">NEXT2</span>();</li><li>        <span class="hljs-title class_">NEXT2</span>();</li><li>        <span class="hljs-title class_">NEXT2</span>();</li><li>        <span class="hljs-title class_">NEXT2</span>();</li><li>        <span class="hljs-title class_">NEXT2</span>();</li><li>        <span class="hljs-keyword">if</span> (last &lt; <span class="hljs-number">0</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateBackTest Call result 2 last == -1'</span>)</li><li>          <span class="hljs-keyword">break</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'index =  have = '</span>, next[index], have)</li><li>        <span class="hljs-keyword">let</span> newArrayBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(have);</li><li>        <span class="hljs-keyword">let</span> newNext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(newArrayBuffer);</li><li>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; have; i++) {</li><li>          newNext[i] = next[<span class="hljs-number">26</span> - have + i];</li><li>        }</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'newArrayBuffer.length = '</span>, newArrayBuffer.<span class="hljs-property">byteLength</span>)</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'newNext.length = '</span>, newNext.<span class="hljs-property">length</span>)</li><li>        <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>          <span class="hljs-attr">nextIn</span>: newArrayBuffer,</li><li>          <span class="hljs-attr">availableIn</span>: have,</li><li>        };</li><li>        <span class="hljs-keyword">await</span> sr.<span class="hljs-title function_">inflateBack</span>(</li><li>          zStream,</li><li>          readIn,</li><li>          { <span class="hljs-attr">fileName</span>: <span class="hljs-string">'test.gz'</span> },</li><li>          writeOut,</li><li>          { <span class="hljs-attr">fileName</span>: <span class="hljs-string">'test.gz'</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>            ret = result;</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateBack Call result res'</span>, result)</li><li>          })</li><li>        <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">1</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateBackTest Call result success'</span>)</li><li>          <span class="hljs-keyword">break</span>;</li><li>        }</li><li>      }</li><li>      <span class="hljs-keyword">await</span> sr.<span class="hljs-title function_">inflateBackEnd</span>({}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateBackEnd Call result res'</span>, result)</li><li>      })</li><li>    }</li><li>    <span class="hljs-keyword">catch</span> (errData) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is message:<span class="hljs-subst">${errData}</span>`</span>);</li><li>    }</li><li>  })</li><li>  <span class="hljs-title function_">inflateBackTest</span>();</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 640px;">     <h3 id="inflatebackinputcallback12" device-type="phone,2in1,tablet,wearable,tv">InflateBackInputCallback<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflatebackinputcallback12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type InflateBackInputCallback = (inDesc: object) =&gt; ArrayBuffer</p>     <p>用于输入数据的回调函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">inDesc</td>         <td class="cellrowborder" width="25%">object</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户定义数据对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">ArrayBuffer</td>         <td class="cellrowborder" width="50%">从输入数据源成功读取的内容缓冲区。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 730px;">     <h3 id="inflatebackoutputcallback12" device-type="phone,2in1,tablet,wearable,tv">InflateBackOutputCallback<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflatebackoutputcallback12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>type InflateBackOutputCallback = (outDesc: object, buf: ArrayBuffer, length: number) =&gt; number</p>     <p>用于输出数据的回调函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">outDesc</td>         <td class="cellrowborder" width="25%">object</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户定义数据对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用于存储要写入的数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">length</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">写入输出缓冲区的长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">输出缓冲区的字节数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2543px;">     <h3 id="inflate12" device-type="phone,2in1,tablet,wearable,tv">inflate<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inflate12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inflate(strm: ZStream, flush: CompressFlushMode): Promise&lt;ReturnStatus&gt;</p>     <p>解压数据，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">flush</td>         <td class="cellrowborder" width="25%">CompressFlushMode</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compressflushmode12">CompressFlushMode定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800005</td>         <td class="cellrowborder" width="50%">The input data is incorrect. For example, the data does not conform to the zlib compression format, the compressed data is corrupted, or the data is not compressed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflate</span>({ <span class="hljs-attr">availableOut</span>: <span class="hljs-number">8</span> }, zlib.<span class="hljs-property">CompressFlushMode</span>.<span class="hljs-property">FINISH</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflate success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateEnd</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateEnd success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateInit</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }</li><li>  ).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateInit success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflate</span>({ <span class="hljs-attr">availableIn</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">8</span> }, <span class="hljs-number">0</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflate success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">inflateEnd</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'inflateEnd success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1792px;">     <h3 id="deflateinit12" device-type="phone,2in1,tablet,wearable,tv">deflateInit<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflateinit12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflateInit(strm: ZStream, level: CompressLevel): Promise&lt;ReturnStatus&gt;</p>     <p>初始化内部流状态以进行压缩，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">level</td>         <td class="cellrowborder" width="25%">CompressLevel</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compresslevel">CompressLevel枚举定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2212px;">     <h3 id="deflateinit212" device-type="phone,2in1,tablet,wearable,tv">deflateInit2<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflateinit212" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflateInit2(strm: ZStream, level: CompressLevel, method: CompressMethod, windowBits: number, memLevel: MemLevel, strategy: CompressStrategy): Promise&lt;ReturnStatus&gt;</p>     <p>初始化内部流状态以进行压缩，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">level</td>         <td class="cellrowborder" width="25%">CompressLevel</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compresslevel">CompressLevel枚举定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">method</td>         <td class="cellrowborder" width="25%">CompressMethod</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compressmethod12">CompressMethod枚举定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">windowBits</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>控制内存窗口的大小，并指定数据的格式（zlib、gzip、raw deflate）。取值如下：</p>          <p>zlib格式：[1, 15]。</p>          <p>gzip格式：大于15。</p>          <p>raw deflate格式：[-15, -1]。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">memLevel</td>         <td class="cellrowborder" width="25%">MemLevel</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#memlevel">MemLevel枚举定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">strategy</td>         <td class="cellrowborder" width="25%">CompressStrategy</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compressstrategy">CompressStrategy枚举定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>()</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit2</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>, zlib.<span class="hljs-property">CompressMethod</span>.<span class="hljs-property">DEFLATED</span>, <span class="hljs-number">28</span>,</li><li>    zlib.<span class="hljs-property">MemLevel</span>.<span class="hljs-property">MEM_LEVEL_DEFAULT</span>, zlib.<span class="hljs-property">CompressStrategy</span>.<span class="hljs-property">COMPRESS_STRATEGY_DEFAULT_STRATEGY</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit2 success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>    })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2015px;">     <h3 id="deflate12" device-type="phone,2in1,tablet,wearable,tv">deflate<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflate12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflate(strm: ZStream, flush: CompressFlushMode): Promise&lt;ReturnStatus&gt;</p>     <p>压缩数据，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">flush</td>         <td class="cellrowborder" width="25%">CompressFlushMode</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compressflushmode12">CompressFlushMode定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.58.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.58.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800007</td>         <td class="cellrowborder" width="50%">The input buffer is incorrect, and the output buffer is too small to accommodate the compressed or decompressed data.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflate</span>({ <span class="hljs-attr">availableOut</span>: <span class="hljs-number">8</span> }, zlib.<span class="hljs-property">CompressFlushMode</span>.<span class="hljs-property">FINISH</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflate success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1963px;">     <h3 id="deflateend12" device-type="phone,2in1,tablet,wearable,tv">deflateEnd<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflateend12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflateEnd(strm: ZStream): Promise&lt;ReturnStatus&gt;</p>     <p>压缩流的所有动态分配的数据结构都被释放，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.59.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.59.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflate</span>({ <span class="hljs-attr">availableOut</span>: <span class="hljs-number">8</span> }, zlib.<span class="hljs-property">CompressFlushMode</span>.<span class="hljs-property">FINISH</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflate success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateEnd</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateEnd success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1785px;">     <h3 id="deflatebound12" device-type="phone,2in1,tablet,wearable,tv">deflateBound<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflatebound12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflateBound(strm: ZStream, sourceLength: number): Promise&lt;number&gt;</p>     <p>计算压缩大小的上限，使用Promise异步返回。成功时返回压缩大小的上限。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">sourceLength</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">源数据长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.60.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回压缩大小的上限。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.60.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateBound</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }, <span class="hljs-number">12</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateBound success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1936px;">     <h3 id="deflatesetheader12" device-type="phone,2in1,tablet,wearable,tv">deflateSetHeader<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflatesetheader12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflateSetHeader(strm: ZStream, head: GzHeader): Promise&lt;ReturnStatus&gt;</p>     <p>当deflateInit2()请求gzip流时，提供gzip标头信息，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">head</td>         <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#gzheader12">GzHeader</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">从压缩数据流中提取的gzip头信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.61.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.61.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>()</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit2</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>, zlib.<span class="hljs-property">CompressMethod</span>.<span class="hljs-property">DEFLATED</span>, <span class="hljs-number">28</span>,</li><li>    zlib.<span class="hljs-property">MemLevel</span>.<span class="hljs-property">MEM_LEVEL_DEFAULT</span>, zlib.<span class="hljs-property">CompressStrategy</span>.<span class="hljs-property">COMPRESS_STRATEGY_DEFAULT_STRATEGY</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit2 success'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>    })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateSetHeader</span>({ <span class="hljs-attr">nextIn</span>: arrayBufferIn, <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">nextOut</span>: arrayBufferOut, <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">isText</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">os</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">time</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">xflags</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">extra</span>: arrayBufferIn, <span class="hljs-attr">extraLen</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">name</span>: arrayBufferIn, <span class="hljs-attr">comment</span>: arrayBufferOut, <span class="hljs-attr">hcrc</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateSetHeader success'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>)</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1843px;">     <h3 id="deflatecopy12" device-type="phone,2in1,tablet,wearable,tv">deflateCopy<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflatecopy12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflateCopy(source: Zip): Promise&lt;ReturnStatus&gt;</p>     <p>复制压缩流，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">source</td>         <td class="cellrowborder" width="25%">Zip</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zip12">Zip定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.62.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.62.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateCopy</span>(zip).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateCopy success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1888px;">     <h3 id="deflatesetdictionary12" device-type="phone,2in1,tablet,wearable,tv">deflateSetDictionary<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflatesetdictionary12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflateSetDictionary(strm: ZStream, dictionary: ArrayBuffer): Promise&lt;ReturnStatus&gt;</p>     <p>从给定的字节序列初始化压缩字典，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">dictionary</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">字典数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.63.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.63.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateSetDictionary</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }, arrayBufferOut).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateSetDictionary success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2032px;">     <h3 id="deflategetdictionary12" device-type="phone,2in1,tablet,wearable,tv">deflateGetDictionary<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflategetdictionary12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflateGetDictionary(strm: ZStream, dictionary: ArrayBuffer): Promise&lt;DictionaryOutputInfo&gt;</p>     <p>获取当前解压缩流中使用的解压缩字典内容及其长度，使用Promise异步返回。成功时返回结果状态和字典的长度。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">dictionary</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">接收解压缩字典的实际内容。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.64.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#dictionaryoutputinfo12">DictionaryOutputInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态和字典的长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.64.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateSetDictionary</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }, arrayBufferOut).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateSetDictionary success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateGetDictionary</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }, arrayBufferOut).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateGetDictionary success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2239px;">     <h3 id="deflatetune12" device-type="phone,2in1,tablet,wearable,tv">deflateTune<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflatetune12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflateTune(strm: ZStream, goodLength: number, maxLazy: number, niceLength: number, maxChain: number): Promise&lt;ReturnStatus&gt;</p>     <p>微调deflate的内部压缩参数，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">goodLength</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">匹配的长度阈值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">maxLazy</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">压缩算法在构建哈夫曼树时的延迟匹配策略，取值范围为0到4的整数。1到4，值越大，算法越‘懒’，匹配过程越慢，但可能生成更优的压缩结果。0：禁用懒惰匹配，算法会尽快构建哈夫曼树，压缩速度快，但压缩率低。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">niceLength</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">适合的延迟长度阈值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">maxChain</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">最大链条长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.65.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.65.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateTune</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateTune success:'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1867px;">     <h3 id="deflatereset12" device-type="phone,2in1,tablet,wearable,tv">deflateReset<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflatereset12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflateReset(strm: ZStream): Promise&lt;ReturnStatus&gt;</p>     <p>这个函数相当于先调用deflateEnd再调用deflateInit，但是并不会释放和重新分配内部解压缩状态，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.66.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.66.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateReset</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateReset success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1843px;">     <h3 id="deflateresetkeep12" device-type="phone,2in1,tablet,wearable,tv">deflateResetKeep<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflateresetkeep12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflateResetKeep(strm: ZStream): Promise&lt;ReturnStatus&gt;</p>     <p>重置初始化的deflate压缩流，但保留其设置的压缩参数和字典，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.67.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.67.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateResetKeep</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateResetKeep success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1867px;">     <h3 id="deflatepending12" device-type="phone,2in1,tablet,wearable,tv">deflatePending<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflatepending12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflatePending(strm: ZStream): Promise&lt;DeflatePendingOutputInfo&gt;</p>     <p>返回已生成但尚未在可用输出中提供的输出的字节数和位数，使用Promise异步返回。成功时返回结果状态、输出位数和输出字节数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.68.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#deflatependingoutputinfo12">DeflatePendingOutputInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态、输出位数和输出字节数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.68.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflatePending</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflatePending success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1981px;">     <h3 id="deflateparams12" device-type="phone,2in1,tablet,wearable,tv">deflateParams<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflateparams12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflateParams(strm: ZStream, level: CompressLevel, strategy: CompressStrategy): Promise&lt;ReturnStatus&gt;</p>     <p>动态更新压缩级别和压缩策略，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">level</td>         <td class="cellrowborder" width="25%">CompressLevel</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compresslevel">CompressLevel枚举定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">strategy</td>         <td class="cellrowborder" width="25%">CompressStrategy</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compressstrategy">CompressStrategy枚举定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.69.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.69.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>()</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateParams</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_DEFAULT_COMPRESSION</span>, zlib.<span class="hljs-property">CompressStrategy</span>.<span class="hljs-property">COMPRESS_STRATEGY_DEFAULT_STRATEGY</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateParams success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1957px;">     <h3 id="deflateprime12" device-type="phone,2in1,tablet,wearable,tv">deflatePrime<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflateprime12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deflatePrime(strm: ZStream, bits: number, value: number): Promise&lt;ReturnStatus&gt;</p>     <p>在压缩流中插入位和值，使用Promise异步返回。成功时返回结果状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">strm</td>         <td class="cellrowborder" width="25%">ZStream</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#zstream12">ZStream定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">bits</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要插入的位数，取值范围在0~16。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">value</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">与位数相对应的位值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.70.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.70.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib, <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> str = <span class="hljs-string">'hello world!'</span>;</li><li>  <span class="hljs-keyword">let</span> arrayBufferIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>  <span class="hljs-keyword">let</span> byteArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBufferIn);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, j = str.<span class="hljs-property">length</span>; i &lt; j; i++) {</li><li>    byteArray[i] = str.<span class="hljs-title function_">charCodeAt</span>(i)</li><li>  }</li><li>  <span class="hljs-keyword">let</span> arrayBufferOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">100</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">zStream</span>: zlib.<span class="hljs-property">ZStream</span> = {</li><li>    <span class="hljs-attr">nextIn</span>: arrayBufferIn,</li><li>    <span class="hljs-attr">availableIn</span>: <span class="hljs-number">1</span>,</li><li>    <span class="hljs-attr">nextOut</span>: arrayBufferOut,</li><li>    <span class="hljs-attr">availableOut</span>: <span class="hljs-number">1</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> zip = zlib.<span class="hljs-title function_">createZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflateInit</span>(zStream, zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_BEST_SPEED</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflateInit success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>  <span class="hljs-keyword">await</span> zip.<span class="hljs-title function_">deflatePrime</span>({ <span class="hljs-attr">nextOut</span>: arrayBufferOut }, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'deflatePrime success'</span>)</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errData: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`errData is errCode:<span class="hljs-subst">${errData.code}</span>  message:<span class="hljs-subst">${errData.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1137px;">     <h2 id="options" device-type="phone,2in1,tablet,wearable,tv">Options<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="options" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>Options用于指定在压缩或解压Zip文件时的选项。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.71.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">level</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compresslevel">CompressLevel</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>压缩或解压时指定的压缩等级。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">memLevel</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#memlevel">MemLevel</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>压缩时指定的使用内存等级。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">strategy</td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compressstrategy">CompressStrategy</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>压缩时指定的压缩策略。</p>          <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">parallel<sup>18+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#parallelstrategy18">ParallelStrategy</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>压缩或解压时指定的串行或并行策略。</p>          <p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="20%">pathSeparatorStrategy<sup>21+</sup></td>         <td class="cellrowborder" width="20%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#pathseparatorstrategy21">PathSeparatorStrategy</a></td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">          <p>解压时指定的压缩包内文件路径中分隔符的处理策略。</p>          <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 540px;">     <h2 id="compresslevel" device-type="phone,2in1,tablet,wearable,tv">CompressLevel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="compresslevel" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.72.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">COMPRESS_LEVEL_NO_COMPRESSION</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">压缩率为0压缩等级。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COMPRESS_LEVEL_BEST_SPEED</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">最佳速度压缩等级。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COMPRESS_LEVEL_BEST_COMPRESSION</td>         <td class="cellrowborder" width="33.33333333333333%">9</td>         <td class="cellrowborder" width="33.33333333333333%">最佳压缩等级。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COMPRESS_LEVEL_DEFAULT_COMPRESSION</td>         <td class="cellrowborder" width="33.33333333333333%">-1</td>         <td class="cellrowborder" width="33.33333333333333%">默认压缩等级。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 423px;">     <h2 id="memlevel" device-type="phone,2in1,tablet,wearable,tv">MemLevel<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="memlevel" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.73.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">MEM_LEVEL_MIN</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">zlib接口在压缩过程中最小使用内存。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MEM_LEVEL_MAX</td>         <td class="cellrowborder" width="33.33333333333333%">9</td>         <td class="cellrowborder" width="33.33333333333333%">zlib接口在压缩过程中最大使用内存。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">MEM_LEVEL_DEFAULT</td>         <td class="cellrowborder" width="33.33333333333333%">8</td>         <td class="cellrowborder" width="33.33333333333333%">zlib接口在压缩过程中默认使用内存。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 561px;">     <h2 id="compressstrategy" device-type="phone,2in1,tablet,wearable,tv">CompressStrategy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="compressstrategy" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.74.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">COMPRESS_STRATEGY_DEFAULT_STRATEGY</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">常规数据策略。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COMPRESS_STRATEGY_FILTERED</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">过滤器产生的数据压缩策略。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COMPRESS_STRATEGY_HUFFMAN_ONLY</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">霍夫曼编码格式压缩策略。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COMPRESS_STRATEGY_RLE</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">游标编码压缩策略。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">COMPRESS_STRATEGY_FIXED</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">固定的压缩策略。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 402px;">     <h2 id="parallelstrategy18" device-type="phone,2in1,tablet,wearable,tv">ParallelStrategy<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="parallelstrategy18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 18开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.75.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.75.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.75.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">PARALLEL_STRATEGY_SEQUENTIAL</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">默认值，串行压缩/解压策略。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PARALLEL_STRATEGY_PARALLEL_DECOMPRESSION</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">并行解压策略。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 474px;">     <h2 id="pathseparatorstrategy21" device-type="phone,2in1,tablet,wearable,tv">PathSeparatorStrategy<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pathseparatorstrategy21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>PathSeparatorStrategy作为<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#options">Options</a>的一个属性，用于指定解压时目标压缩包内文件路径中分隔符的处理策略。</p>     <p><strong>元服务API：</strong> 从API version 21开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.76.5.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.5.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.5.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">PATH_SEPARATOR_STRATEGY_DEFAULT</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">默认值，压缩包内文件路径中的分隔符不做处理。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PATH_SEPARATOR_STRATEGY_REPLACE_BACKSLASH</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">压缩包内文件路径中的反斜杠'\'替换为斜杠'/'。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 446px;">     <h2 id="errorcodedeprecated" device-type="phone,2in1,tablet,wearable,tv">ErrorCode<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="errorcodedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>本模块首批接口从API version 7 开始支持。</p>       <p>从API Version 9开始，该模块不再维护。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.77.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">ERROR_CODE_OK</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">函数调用成功。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">ERROR_CODE_ERRNO</td>         <td class="cellrowborder" width="33.33333333333333%">-1</td>         <td class="cellrowborder" width="33.33333333333333%">函数调用失败。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 627px;">     <h2 id="compressflushmode12" device-type="phone,2in1,tablet,wearable,tv">CompressFlushMode<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="compressflushmode12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.78.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.78.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.78.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">NO_FLUSH</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">默认值，表示正常操作。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">PARTIAL_FLUSH</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">在流中生成部分刷新点。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SYNC_FLUSH</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">在保持压缩流状态的同时强制输出所有压缩数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FULL_FLUSH</td>         <td class="cellrowborder" width="33.33333333333333%">3</td>         <td class="cellrowborder" width="33.33333333333333%">重置压缩状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">FINISH</td>         <td class="cellrowborder" width="33.33333333333333%">4</td>         <td class="cellrowborder" width="33.33333333333333%">压缩或解压缩过程结束。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">BLOCK</td>         <td class="cellrowborder" width="33.33333333333333%">5</td>         <td class="cellrowborder" width="33.33333333333333%">允许更精确的控制。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">TREES</td>         <td class="cellrowborder" width="33.33333333333333%">6</td>         <td class="cellrowborder" width="33.33333333333333%">实施过程中有特殊目的。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 333px;">     <h2 id="compressmethod12" device-type="phone,2in1,tablet,wearable,tv">CompressMethod<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="compressmethod12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.79.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">DEFLATED</td>         <td class="cellrowborder" width="33.33333333333333%">8</td>         <td class="cellrowborder" width="33.33333333333333%">压缩方法。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 471px;">     <h2 id="returnstatus12" device-type="phone,2in1,tablet,wearable,tv">ReturnStatus<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="returnstatus12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.80.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">OK</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">函数调用成功。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">STREAM_END</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">函数调用成功，表示已处理了整个数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">NEED_DICT</td>         <td class="cellrowborder" width="33.33333333333333%">2</td>         <td class="cellrowborder" width="33.33333333333333%">函数调用成功，表示需要预设字典才能继续解压缩。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 840px;">     <h2 id="zstream12" device-type="phone,2in1,tablet,wearable,tv">ZStream<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zstream12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.81.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">nextIn</td>         <td class="cellrowborder" width="20%">ArrayBuffer</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">需要压缩的输入字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">availableIn</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">nextIn可用的字节数。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">totalIn</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">到目前为止读取的输入字节总数。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">nextOut</td>         <td class="cellrowborder" width="20%">ArrayBuffer</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">压缩后的输出字节。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">availableOut</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">nextOut的剩余可用字节数。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">totalOut</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">到目前为止输出字节总数。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dataType</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">关于数据类型的最佳猜测：deflate的二进制或文本，或inflate的解码状态。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">adler</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">未压缩数据的Adler-32或CRC-32值。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 426px;">     <h2 id="zipoutputinfo12" device-type="phone,2in1,tablet,wearable,tv">ZipOutputInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zipoutputinfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.82.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">status</td>         <td class="cellrowborder" width="20%">ReturnStatus</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus枚举定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">destLen</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">目标缓冲区的总长度。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 402px;">     <h2 id="dictionaryoutputinfo12" device-type="phone,2in1,tablet,wearable,tv">DictionaryOutputInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dictionaryoutputinfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.83.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">status</td>         <td class="cellrowborder" width="20%">ReturnStatus</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus枚举定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">dictionaryLength</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">字典的长度。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 447px;">     <h2 id="decompressionoutputinfo12" device-type="phone,2in1,tablet,wearable,tv">DecompressionOutputInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="decompressionoutputinfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.84.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">status</td>         <td class="cellrowborder" width="20%">ReturnStatus</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus枚举定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">destLength</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">目标缓冲区的长度。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">sourceLength</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">源缓冲区的长度。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 471px;">     <h2 id="deflatependingoutputinfo12" device-type="phone,2in1,tablet,wearable,tv">DeflatePendingOutputInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deflatependingoutputinfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.85.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">status</td>         <td class="cellrowborder" width="20%">ReturnStatus</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus枚举定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">pending</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">已生成的输出字节数。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">bits</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">已生成的输出位数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 810px;">     <h2 id="gzheader12" device-type="phone,2in1,tablet,wearable,tv">GzHeader<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzheader12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.86.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">isText</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">如果压缩数据被认为是文本，则为True。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">os</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">操作系统。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">time</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">修改时间。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">xflags</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">额外标志。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">extra</td>         <td class="cellrowborder" width="20%">ArrayBuffer</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">额外字段。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">extraLen</td>         <td class="cellrowborder" width="20%">number</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">额外字段的长度。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">name</td>         <td class="cellrowborder" width="20%">ArrayBuffer</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">文件名。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">comment</td>         <td class="cellrowborder" width="20%">ArrayBuffer</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">注释。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">hcrc</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">如果存在crc标头，则为True。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">done</td>         <td class="cellrowborder" width="20%">boolean</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">是</td>         <td class="cellrowborder" width="20%">读取gzip标头后为True。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 754px;">     <h2 id="zlibcreategzip12" device-type="phone,2in1,tablet,wearable,tv">zlib.createGZip<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibcreategzip12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createGZip(): Promise&lt;GZip&gt;</p>     <p>创建GZip对象，使用Promise异步返回。成功时返回Gzip对象实例。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.87.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#gzip12">GZip</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。返回GZip对象实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li>zlib.<span class="hljs-title function_">createGZip</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'createGZip success'</span>);</li><li>})</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 706px;">     <h2 id="zlibcreategzipsync12" device-type="phone,2in1,tablet,wearable,tv">zlib.createGZipSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zlibcreategzipsync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createGZipSync(): GZip</p>     <p>创建GZip对象。成功时返回GZip对象实例。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.88.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#gzip12">GZip</a></td>         <td class="cellrowborder" width="50%">GZip对象实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 182px;">     <h2 id="gzip12" device-type="phone,2in1,tablet,wearable,tv">GZip<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzip12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>Gzip相关接口。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2016px;">     <h3 id="gzdopen12" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">gzdopen<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzdopen12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzdopen(fd: number, mode: string): Promise&lt;void&gt;</p>     <p>将gzFile与文件描述符fd相关联，打开文件，用于进行读取并解压缩，或者压缩并写入。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.90.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">fd</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文件描述符。通常情况下，通过系统调用“open”或其他方法获得的。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">mode</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用于指定访问模式。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.90.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.90.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800002</td>         <td class="cellrowborder" width="50%">No such file or access mode error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzdopenDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzdopen"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzdopen/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> file = fs.<span class="hljs-title function_">openSync</span>(path, fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span> | fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span>);</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzdopen</span>(file.<span class="hljs-property">fd</span>, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzdopenDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2011px;">     <h3 id="gzbuffer12" device-type="phone,2in1,tablet,wearable,tv">gzbuffer<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzbuffer12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzbuffer(size: number):Promise&lt;number&gt;</p>     <p>为当前库函数设置内部缓冲区尺寸。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.91.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">size</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要设置的内部缓冲区尺寸。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.91.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，成功时，返回0。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.91.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzbufferDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzbuffer"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzbuffer/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"rb"</span>);</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzbuffer</span>(<span class="hljs-number">648</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzbufferDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1960px;">     <h3 id="gzopen12" device-type="phone,2in1,tablet,wearable,tv">gzopen<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzopen12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzopen(path: string, mode: string): Promise&lt;void&gt;</p>     <p>打开位于指定路径的gzip(.gz)文件，用于进行读取并解压缩，或者压缩并写入。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.92.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">path</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要打开的文件路径。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">mode</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">指定文件打开方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.92.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.92.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800002</td>         <td class="cellrowborder" width="50%">No such file or access mode error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzopenDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzopen"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzopen/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzopenDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1706px;">     <h3 id="gzeof12" device-type="phone,2in1,tablet,wearable,tv">gzeof<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzeof12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzeof(): Promise&lt;number&gt;</p>     <p>检查gzip压缩文件的读取位置是否已到达文件的末尾。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.93.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，如果在读取时设置了文件的文件结束指示符，则返回1。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzeofDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzeof"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzeof/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> writeBufferWithData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>);</li><li>  <span class="hljs-keyword">let</span> uint8View = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(writeBufferWithData);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; uint8View.<span class="hljs-property">length</span>; i++) {</li><li>    uint8View[i] = i;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> writeNum = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzwrite</span>(writeBufferWithData, <span class="hljs-number">16</span>)</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"rb"</span>);</li><li>  <span class="hljs-keyword">let</span> readBufferWithData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">20</span>);</li><li>  <span class="hljs-keyword">let</span> readNum = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzread</span>(readBufferWithData);</li><li>  <span class="hljs-keyword">let</span> eofNum = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzeof</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzeofDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1442px;">     <h3 id="gzdirect12" device-type="phone,2in1,tablet,wearable,tv">gzdirect<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzdirect12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzdirect(): Promise&lt;number&gt;</p>     <p>检查指定的gzip文件句柄文件是否直接访问原始未压缩数据，重新分配缓冲区。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.94.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，如果直接访问原始未压缩数据，则返回1。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzdirectDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzdirect"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzdirect/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> directNum = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzdirect</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzdirectDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1740px;">     <h3 id="gzclose12" device-type="phone,2in1,tablet,wearable,tv">gzclose<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzclose12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzclose(): Promise&lt;ReturnStatus&gt;</p>     <p>清除文件的所有挂起输出，如有必要，关闭文件和释放（解）压缩状态。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.95.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.95.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.95.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.95.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800006</td>         <td class="cellrowborder" width="50%">Memory allocation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzcloseDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzclose"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzclose/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzcloseDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1730px;">     <h3 id="gzclearerr12" device-type="phone,2in1,tablet,wearable,tv">gzclearerr<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzclearerr12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzclearerr(): Promise&lt;void&gt;</p>     <p>清除文件的错误和文件结束标志。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.96.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.96.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzclearerrDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzclearerr"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzclearerr/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> writeBufferWithData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>);</li><li>  <span class="hljs-keyword">let</span> uint8View = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(writeBufferWithData);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; uint8View.<span class="hljs-property">length</span>; i++) {</li><li>    uint8View[i] = i;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> writeNum = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzwrite</span>(writeBufferWithData, <span class="hljs-number">16</span>)</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"rb"</span>);</li><li>  <span class="hljs-keyword">let</span> readBufferWithData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">20</span>);</li><li>  <span class="hljs-keyword">let</span> readNum = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzread</span>(readBufferWithData);</li><li>  <span class="hljs-keyword">let</span> eofNum = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzeof</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclearerr</span>();</li><li>  <span class="hljs-keyword">let</span> eofNumClear = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzeof</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzclearerrDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2021px;">     <h3 id="gzerror12" device-type="phone,2in1,tablet,wearable,tv">gzerror<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzerror12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzerror(): Promise&lt;GzErrorOutputInfo&gt;</p>     <p>文件上发生的最后一个错误的错误消息。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.97.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.97.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#gzerroroutputinfo12">GzErrorOutputInfo</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回结果状态和出现的最后一个状态的状态消息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.97.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.97.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzerrorDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzerror"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzerror/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> writeBufferWithData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>);</li><li>  <span class="hljs-keyword">let</span> uint8View = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(writeBufferWithData);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; uint8View.<span class="hljs-property">length</span>; i++) {</li><li>    uint8View[i] = i;</li><li>  }</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzwrite</span>(writeBufferWithData, -<span class="hljs-number">1</span>);</li><li>  } <span class="hljs-keyword">catch</span> (errData) {</li><li>    <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzerror</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">GzErrorOutputInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'errCode'</span>, <span class="hljs-title class_">GzErrorOutputInfo</span>.<span class="hljs-property">status</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'errMsg'</span>, <span class="hljs-title class_">GzErrorOutputInfo</span>.<span class="hljs-property">statusMsg</span>);</li><li>    })</li><li>  }</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzerrorDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1733px;">     <h3 id="gzgetc12" device-type="phone,2in1,tablet,wearable,tv">gzgetc<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzgetc12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzgetc(): Promise&lt;number&gt;</p>     <p>从文件中读取并解压缩一个字节。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.98.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.98.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回读取字符的ASCII值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.98.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.98.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzgetcDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzgetc"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzgetc/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzputc</span>(<span class="hljs-number">1</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"rb"</span>);</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzgetc</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzgetcDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2035px;">     <h3 id="gzflush12" device-type="phone,2in1,tablet,wearable,tv">gzflush<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzflush12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzflush(flush: CompressFlushMode): Promise&lt;ReturnStatus&gt;</p>     <p>将所有挂起的输出刷新到文件中。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.99.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">flush</td>         <td class="cellrowborder" width="25%">CompressFlushMode</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">控制刷新操作的行为，参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compressflushmode12">CompressFlushMode枚举</a>的定义。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.99.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.99.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzflushDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzflush"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzflush/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> flushNum = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzflush</span>(zlib.<span class="hljs-property">CompressFlushMode</span>.<span class="hljs-property">NO_FLUSH</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzflushDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2149px;">     <h3 id="gzfwrite12" device-type="phone,2in1,tablet,wearable,tv">gzfwrite<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzfwrite12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzfwrite(buf: ArrayBuffer, size: number, nitems: number): Promise&lt;number&gt;</p>     <p>将大小为size，数量为nitems的数据块从buf压缩并写入文件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.100.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要将数据写入的缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">size</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">单个数据块中的字节数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">nitems</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要写入的数据块数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.100.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回写入大小为size的完整数据块的数目。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.100.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzfwriteDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzfwrite"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzfwrite/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> bufferWithData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>);</li><li>  <span class="hljs-keyword">let</span> uint8View = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(bufferWithData);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; uint8View.<span class="hljs-property">length</span>; i++) {</li><li>    uint8View[i] = i;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzfwrite</span>(bufferWithData, <span class="hljs-number">8</span>, <span class="hljs-number">2</span>)</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzfwriteDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2269px;">     <h3 id="gzfread12" device-type="phone,2in1,tablet,wearable,tv">gzfread<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzfread12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzfread(buf: ArrayBuffer, size: number, nitems: number): Promise&lt;number&gt;</p>     <p>从gzip压缩文件中解压缩并读取数据。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.101.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.101.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.101.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.101.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用于存储读取结果的目标缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">size</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">单个数据块中的字节数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">nitems</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要写入的数据块数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.101.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.101.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回读取大小为size的完整数据块的数目。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.101.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.101.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzfreadDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzfread"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzfread/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> writeBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>);</li><li>  <span class="hljs-keyword">let</span> uint8View = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(writeBuffer);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; uint8View.<span class="hljs-property">length</span>; i++) {</li><li>    uint8View[i] = i;</li><li>  }</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzfwrite</span>(writeBuffer, <span class="hljs-number">8</span>, <span class="hljs-number">2</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"rb"</span>);</li><li>  <span class="hljs-keyword">let</span> readBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>);</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzfread</span>(readBuffer, <span class="hljs-number">8</span>, <span class="hljs-number">2</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzfreadDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1740px;">     <h3 id="gzclosew12" device-type="phone,2in1,tablet,wearable,tv">gzclosew<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzclosew12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzclosew(): Promise&lt;ReturnStatus&gt;</p>     <p>与gzclose()功能相同，仅适用于写入或追加时。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.102.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.102.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.102.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.102.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800006</td>         <td class="cellrowborder" width="50%">Memory allocation failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzclosewDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzclosew"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzclosew/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclosew</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzclosewDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1733px;">     <h3 id="gzcloser12" device-type="phone,2in1,tablet,wearable,tv">gzcloser<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzcloser12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzcloser(): Promise&lt;ReturnStatus&gt;</p>     <p>与gzclose()功能相同，仅适用于读取时。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.103.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.103.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.103.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.103.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzcloserDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzcloser"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzcloser/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"rb"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzcloser</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzcloserDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2128px;">     <h3 id="gzwrite12" device-type="phone,2in1,tablet,wearable,tv">gzwrite<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzwrite12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzwrite(buf: ArrayBuffer, len: number): Promise&lt;number&gt;</p>     <p>将buf中的len长度的未压缩字节进行压缩并将其写入文件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.104.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">对象指向要写入的数据缓冲区。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">len</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">未压缩字节长度。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.104.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回写入的未压缩字节数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.104.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzwriteDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzwrite"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzwrite/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> bufferWithData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>);</li><li>  <span class="hljs-keyword">let</span> uint8View = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(bufferWithData);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; uint8View.<span class="hljs-property">length</span>; i++) {</li><li>    uint8View[i] = i;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzwrite</span>(bufferWithData, <span class="hljs-number">16</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzwriteDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2011px;">     <h3 id="gzungetc12" device-type="phone,2in1,tablet,wearable,tv">gzungetc<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzungetc12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzungetc(c: number): Promise&lt;number&gt;</p>     <p>将c推回到流中，以便在下次读取文件时将作为第一个字符读取。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.105.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.105.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.105.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.105.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">c</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回退到输入流之前的字符。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.105.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.105.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回推送的字符。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.105.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.105.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzungetcDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzungetc"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzungetc/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"rb"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">1</span>));</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzungetc</span>(<span class="hljs-number">1</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzungetcDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1685px;">     <h3 id="gztell12" device-type="phone,2in1,tablet,wearable,tv">gztell<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gztell12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gztell(): Promise&lt;number&gt;</p>     <p>返回文件中下一个gzread或gzwrite的起始位置。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.106.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.106.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回文件种下一个gzread或gzwrite的起始位置。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.106.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.106.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gztellDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gztell"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gztell/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gztell</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gztellDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2128px;">     <h3 id="gzsetparams12" device-type="phone,2in1,tablet,wearable,tv">gzsetparams<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzsetparams12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzsetparams(level: CompressLevel, strategy: CompressStrategy): Promise&lt;ReturnStatus&gt;</p>     <p>动态更新文件的压缩级别和压缩策略。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.107.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.107.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.107.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.107.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">level</td>         <td class="cellrowborder" width="25%">CompressLevel</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">压缩级别，参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compresslevel">CompressLevel枚举定义</a>。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">strategy</td>         <td class="cellrowborder" width="25%">CompressStrategy</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">压缩策略，参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#compressstrategy">CompressStrategy枚举定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.107.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.107.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.107.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.107.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzsetparamsDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzsetparams"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzsetparams/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzsetparams</span>(zlib.<span class="hljs-property">CompressLevel</span>.<span class="hljs-property">COMPRESS_LEVEL_DEFAULT_COMPRESSION</span>,</li><li>    zlib.<span class="hljs-property">CompressStrategy</span>.<span class="hljs-property">COMPRESS_STRATEGY_DEFAULT_STRATEGY</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzsetparamsDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2056px;">     <h3 id="gzseek12" device-type="phone,2in1,tablet,wearable,tv">gzseek<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzseek12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzseek(offset: number, whence: OffsetReferencePoint): Promise&lt;number&gt;</p>     <p>将起始位置设置为相对于文件中下一个gzread或gzwrite的偏移位置。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.108.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.108.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.108.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.108.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">offset</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标偏移位置。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">whence</td>         <td class="cellrowborder" width="25%">OffsetReferencePoint</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">定义偏移的参考点，参考<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#offsetreferencepoint12">OffsetReferencePoint枚举定义</a>。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.108.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.108.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回从未压缩流开始以字节为单位测量的结果偏移位置。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.108.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.108.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzseekDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzseek"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzseek/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzseek</span>(<span class="hljs-number">2</span>, zlib.<span class="hljs-property">OffsetReferencePoint</span>.<span class="hljs-property">SEEK_CUR</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzseekDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1709px;">     <h3 id="gzrewind12" device-type="phone,2in1,tablet,wearable,tv">gzrewind<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzrewind12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzrewind(): Promise&lt;ReturnStatus&gt;</p>     <p>将文件指针重新定位到文件的开头，此功能仅用于读取。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.109.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-zlib#returnstatus12">ReturnStatus</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回结果状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.109.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzrewindDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzrewind"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzrewind/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"rb"</span>);</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzrewind</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzrewindDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2155px;">     <h3 id="gzread12" device-type="phone,2in1,tablet,wearable,tv">gzread<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzread12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzread(buf: ArrayBuffer): Promise&lt;number&gt;</p>     <p>从文件中读取最多len个未压缩字节并将其解压缩到buf中。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.110.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.110.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.110.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.110.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标偏移位置。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.110.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.110.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回实际读取的未压缩字节数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.110.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.110.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzreadDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzread"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzread/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> writeBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>);</li><li>  <span class="hljs-keyword">let</span> uint8View = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(writeBuffer);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; uint8View.<span class="hljs-property">length</span>; i++) {</li><li>    uint8View[i] = i;</li><li>  }</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzwrite</span>(writeBuffer, <span class="hljs-number">16</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"rb"</span>);</li><li>  <span class="hljs-keyword">let</span> readBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>);</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzread</span>(readBuffer);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzreadDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1939px;">     <h3 id="gzputs12" device-type="phone,2in1,tablet,wearable,tv">gzputs<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzputs12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzputs(str: string): Promise&lt;number&gt;</p>     <p>压缩给定的以null结尾的字符串并将其写入文件，不包括终止的null字符。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.111.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">str</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">格式化描述符和纯文本。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.111.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回写入的字符数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.111.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzputsDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzputs"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzputs/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzputs</span>(<span class="hljs-string">"hello"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzputsDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1939px;">     <h3 id="gzputc12" device-type="phone,2in1,tablet,wearable,tv">gzputc<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzputc12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzputc(char: number): Promise&lt;number&gt;</p>     <p>将转换为无符号字符的c压缩并写入文件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.112.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.112.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.112.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.112.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">char</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">写入字符ASCII。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.112.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.112.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回已写入的值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.112.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.112.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzputcDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzputc"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzputc/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzputc</span>(<span class="hljs-number">0</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzputcDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2087px;">     <h3 id="gzprintf12" device-type="phone,2in1,tablet,wearable,tv">gzprintf<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzprintf12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzprintf(format: string, ...args: Array&lt;string | number&gt;): Promise&lt;number&gt;</p>     <p>在字符串格式的控制下，将参数转换和格式化后，压缩并写入文件，如fprintf中所示。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.113.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">format</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">格式化描述符和纯文本。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">...args</td>         <td class="cellrowborder" width="25%">Array&lt;string | number&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">可变参数列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.113.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回实际写入的未压缩字节数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.113.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800004</td>         <td class="cellrowborder" width="50%">Compression or decompression stream error, which may be caused by an initialization error in the zlib stream structure or a modified structure.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzprintfDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzprintf"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzprintf/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzprintf</span>(<span class="hljs-string">"name is %s, age is %d"</span>, <span class="hljs-string">"Tom"</span>, <span class="hljs-number">23</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzprintfDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1661px;">     <h3 id="gzoffset12" device-type="phone,2in1,tablet,wearable,tv">gzoffset<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzoffset12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzoffset(): Promise&lt;number&gt;</p>     <p>返回文件的当前压缩（实际）读或写偏移量。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.114.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.114.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回文件的当前压缩（实际）读或写偏移量。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.114.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.114.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzoffsetDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzoffset"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzoffset/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzoffset</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzoffsetDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2035px;">     <h3 id="gzgets12" device-type="phone,2in1,tablet,wearable,tv">gzgets<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzgets12" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>gzgets(buf: ArrayBuffer): Promise&lt;string&gt;</p>     <p>从文件中读取字节并将其解压缩到buf中，直到读取len-1字符，或者直到读取换行符并将其传输到buf，或者遇到文件结束条件。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.115.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">存储读取的行数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.115.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回以null结尾的字符串。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-zlib">ohos.zlib错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.115.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">          <p>The parameter check failed. Possible causes:</p>          <p>1. Mandatory parameters are left unspecified;</p>          <p>2. Incorrect parameter types;</p>          <p>3. Parameter verification failed.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17800009</td>         <td class="cellrowborder" width="50%">Internal structure error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ccp-c106="" class="highlight-div"><div _ngcontent-ccp-c106="" class="highlight-div-header"><div _ngcontent-ccp-c106="" class="highlight-div-header-left"><div _ngcontent-ccp-c106="" class="handle-button expand-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ccp-c106="" class="highlight-div-header-right"><div _ngcontent-ccp-c106="" class="handle-button ai-button"></div><div _ngcontent-ccp-c106="" class="handle-button line-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ccp-c106="" class="handle-button theme-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ccp-c106="" class="handle-button copy-button"><div _ngcontent-ccp-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ccp-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { zlib } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">gzgetsDemo</span>(<span class="hljs-params">pathDir: <span class="hljs-built_in">string</span></span>) {</li><li>  fs.<span class="hljs-title function_">mkdirSync</span>(pathDir + <span class="hljs-string">"/gzgets"</span>);</li><li>  <span class="hljs-keyword">let</span> path = pathDir + <span class="hljs-string">"/gzgets/test.gz"</span>;</li><li>  <span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGZipSync</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"wb"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzputs</span>(<span class="hljs-string">"hello"</span>);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzopen</span>(path, <span class="hljs-string">"rb"</span>);</li><li>  <span class="hljs-keyword">let</span> bufferWithData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>);</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzgets</span>(bufferWithData);</li><li>  <span class="hljs-keyword">await</span> gzip.<span class="hljs-title function_">gzclose</span>();</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'test gzip interface'</span>)</li><li>          .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">60</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-number">200</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> pathDir = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">cacheDir</span>;</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> pathDir === <span class="hljs-string">'string'</span>) {</li><li>              <span class="hljs-title function_">gzgetsDemo</span>(pathDir);</li><li>            }</li><li>          })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 474px;">     <h2 id="gzerroroutputinfo12" device-type="phone,2in1,tablet,wearable,tv">GzErrorOutputInfo<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gzerroroutputinfo12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.116.4.1.6.1.1" width="20%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.4.1.6.1.2" width="20%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.4.1.6.1.3" width="20%">只读</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.4.1.6.1.4" width="20%">可选</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.4.1.6.1.5" width="20%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="20%">status</td>         <td class="cellrowborder" width="20%">ReturnStatus</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">返回zlib文件状态码，参考ReturnStatus的定义。</td>        </tr>        <tr>         <td class="cellrowborder" width="20%">statusMsg</td>         <td class="cellrowborder" width="20%">string</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">否</td>         <td class="cellrowborder" width="20%">zlib文件上发生的最后一个状态的状态消息。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 378px;">     <h2 id="offsetreferencepoint12" device-type="phone,2in1,tablet,wearable,tv">OffsetReferencePoint<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offsetreferencepoint12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.BundleManager.Zlib</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.117.4.1.4.1.1" width="33.33333333333333%">名称</th>         <th align="left" class="cellrowborder" id="mcps1.3.117.4.1.4.1.2" width="33.33333333333333%">值</th>         <th align="left" class="cellrowborder" id="mcps1.3.117.4.1.4.1.3" width="33.33333333333333%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="33.33333333333333%">SEEK_SET</td>         <td class="cellrowborder" width="33.33333333333333%">0</td>         <td class="cellrowborder" width="33.33333333333333%">从文件开头查找。</td>        </tr>        <tr>         <td class="cellrowborder" width="33.33333333333333%">SEEK_CUR</td>         <td class="cellrowborder" width="33.33333333333333%">1</td>         <td class="cellrowborder" width="33.33333333333333%">从当前位置查找。</td>        </tr>             </tbody></table></div>     </div>    </div>   </div>   <div></div></div>