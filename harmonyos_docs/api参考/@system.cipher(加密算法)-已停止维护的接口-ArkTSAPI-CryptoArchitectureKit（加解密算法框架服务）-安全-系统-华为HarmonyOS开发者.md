<h1 _ngcontent-nfx-c119="" class="doc-title ng-star-inserted" title="@system.cipher (加密算法)"> @system.cipher (加密算法) </h1>

<div _ngcontent-nfx-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>本模块首批接口从API version 3开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>  <p>从API version 9开始废弃， 建议使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cryptoframework#cipher">@ohos.security.cryptoFramework的Cipher</a>替代。</p>  </div></div></div>  <div class="tiledSection"><h2 id="导入模块" device-type="wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-nfx-c106="" class="highlight-div"><div _ngcontent-nfx-c106="" class="highlight-div-header"><div _ngcontent-nfx-c106="" class="highlight-div-header-left"><div _ngcontent-nfx-c106="" class="handle-button expand-button"><div _ngcontent-nfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfx-c106="" class="highlight-div-header-right"><div _ngcontent-nfx-c106="" class="handle-button ai-button"></div><div _ngcontent-nfx-c106="" class="handle-button line-button"><div _ngcontent-nfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfx-c106="" class="handle-button theme-button"><div _ngcontent-nfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfx-c106="" class="handle-button copy-button"><div _ngcontent-nfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfx-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> cipher <span class="hljs-keyword">from</span> <span class="hljs-string">'@system.cipher'</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="cipherresponse" device-type="wearable,tv">CipherResponse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cipherresponse" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>调用cipher接口后，返回的内容。</p> <p><strong>系统能力</strong>：SystemCapability.Security.Cipher</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.3.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.3.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.3.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.3.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">text</td> <td class="cellrowborder" width="20%">string</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">返回的内容。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="cipherrsaoptions" device-type="wearable,tv">CipherRsaOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cipherrsaoptions" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>调用cipher rsa方法时，传入的参数。</p> <p><strong>系统能力</strong>：SystemCapability.Security.Cipher</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.4.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.4.4.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">action</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>加密类型，可选项有：</p> <p>1. encrypt 加密；</p> <p>2. decrypt 解密。</p> </td> </tr> <tr><td class="cellrowborder" width="25%">text</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">待加密或解密的文本内容。待加密的文本内容应该是一段普通文本，长度不能超过 keySize / 8 - 66，其中 keySize 是密钥的长度（例如密钥长度为 1024 时，text 不能超过 62 个字节）。待解密的文本内容应该是经过 base64 编码的一段二进制值。base64 编码使用默认风格。</td> </tr> <tr><td class="cellrowborder" width="25%">key</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">加密的密钥，RSA的密钥。加密时key为公钥，解密时key为私钥。</td> </tr> <tr><td class="cellrowborder" width="25%">transformation</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">RSA算法的填充项，默认为RSA/None/OAEPWithSHA256AndMGF1Padding。</td> </tr> <tr><td class="cellrowborder" width="25%">success</td> <td class="cellrowborder" width="25%">(data: <a href="/consumer/cn/doc/harmonyos-references/js-apis-system-cipher#cipherresponse">CipherResponse</a>) =&gt; void</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用成功的回调函数。</td> </tr> <tr><td class="cellrowborder" width="25%">fail</td> <td class="cellrowborder" width="25%">(data: string, code: number) =&gt; void</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用失败的回调函数。</td> </tr> <tr><td class="cellrowborder" width="25%">complete</td> <td class="cellrowborder" width="25%">() =&gt; void</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用结束的回调函数。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="cipheraesoptions" device-type="wearable,tv">CipherAesOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cipheraesoptions" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>调用cipher aes方法时，传入的参数。</p> <p><strong>系统能力</strong>：SystemCapability.Security.Cipher</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.4.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.5.4.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">action</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%"><p>加密类型，可选项有：</p> <p>1. encrypt 加密；</p> <p>2. decrypt 解密。</p> </td> </tr> <tr><td class="cellrowborder" width="25%">text</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">待加密或解密的文本内容。待加密的文本内容应该是一段普通文本。待解密的文本内容应该是经过 base64 编码的一段二进制值。base64 编码使用默认风格。</td> </tr> <tr><td class="cellrowborder" width="25%">key</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">加密或解密使用到的密钥，经过 base64 编码后生成的字符串。</td> </tr> <tr><td class="cellrowborder" width="25%">transformation</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">AES算法的加密模式和填充项，默认AES/CBC/PKCS5Padding。</td> </tr> <tr><td class="cellrowborder" width="25%">iv</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">AES加解密的初始向量，经过base64编码后的字符串，默认值为key值。</td> </tr> <tr><td class="cellrowborder" width="25%">ivOffset</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">AES加解密的初始向量偏移，默认值0，仅支持0。</td> </tr> <tr><td class="cellrowborder" width="25%">ivLen</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">AES加解密的初始向量字节长度，当前为预留字段，默认值16，仅支持16。</td> </tr> <tr><td class="cellrowborder" width="25%">success</td> <td class="cellrowborder" width="25%">(data: <a href="/consumer/cn/doc/harmonyos-references/js-apis-system-cipher#cipherresponse">CipherResponse</a>) =&gt; void</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用成功的回调函数。</td> </tr> <tr><td class="cellrowborder" width="25%">fail</td> <td class="cellrowborder" width="25%">(data: string, code: number) =&gt; void</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用失败的回调函数。</td> </tr> <tr><td class="cellrowborder" width="25%">complete</td> <td class="cellrowborder" width="25%">() =&gt; void</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用结束的回调函数。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="cipherrsa" device-type="wearable,tv">cipher.rsa<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cipherrsa" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>rsa(options: CipherRsaOptions): void</p> <p>RSA 算法加解密。</p> <p><strong>系统能力：</strong> SystemCapability.Security.Cipher</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-system-cipher#cipherrsaoptions">CipherRsaOptions</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">rsa加解密需要设置的参数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nfx-c106="" class="highlight-div"><div _ngcontent-nfx-c106="" class="highlight-div-header"><div _ngcontent-nfx-c106="" class="highlight-div-header-left"><div _ngcontent-nfx-c106="" class="handle-button expand-button"><div _ngcontent-nfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfx-c106="" class="highlight-div-header-right"><div _ngcontent-nfx-c106="" class="handle-button ai-button"></div><div _ngcontent-nfx-c106="" class="handle-button line-button"><div _ngcontent-nfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfx-c106="" class="handle-button theme-button"><div _ngcontent-nfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfx-c106="" class="handle-button copy-button"><div _ngcontent-nfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfx-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>  <span class="hljs-title function_">rsa</span>(<span class="hljs-params"></span>) {</li><li>    cipher.<span class="hljs-title function_">rsa</span>({</li><li>      <span class="hljs-comment">//加密。</span></li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'encrypt'</span>,</li><li>      <span class="hljs-comment">//待加密的文本内容。</span></li><li>      <span class="hljs-attr">text</span>: <span class="hljs-string">'hello'</span>,</li><li>      <span class="hljs-comment">//base64编码后的加密公钥。</span></li><li>      <span class="hljs-attr">key</span>:</li><li>     <span class="hljs-string">'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCx414QSP3RsYWYzf9mkBMiBAXo\n'</span> +</li><li>     <span class="hljs-string">'6S7Lpva1fKlcuVxjoFC1iMnzD4mC0uiL4k5MNi43J64c7dbqi3qAJjdAtuwQ6NZJ\n'</span> +</li><li>     <span class="hljs-string">'+Enz0RzmVFh/4yk6lmqRzuEFQqhQqSZzaLq6sq2N2G0Sv2Xl3sLvqAfe2HNm2oBw\n'</span> +</li><li>     <span class="hljs-string">'jBpApTJ3TeneOo6Z5QIDAQAB'</span>,</li><li>      <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`handling success:<span class="hljs-subst">${data.text}</span>`</span>);</li><li>      },</li><li>      <span class="hljs-attr">fail</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">data, code</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`### cipher.rsa encrypt fail ### <span class="hljs-subst">${code}</span>:<span class="hljs-subst">${data}</span>`</span>);</li><li>      },</li><li>      <span class="hljs-attr">complete</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`operation complete!`</span>);</li><li>      }</li><li>      });</li><li>      cipher.<span class="hljs-title function_">rsa</span>({</li><li>        <span class="hljs-comment">//解密：</span></li><li>        <span class="hljs-attr">action</span>: <span class="hljs-string">'decrypt'</span>,</li><li>        <span class="hljs-comment">//待解密的内容，是base64编码后的一段二进制值，解密后是文本内容“hello”。</span></li><li>        <span class="hljs-attr">text</span>:</li><li>       <span class="hljs-string">'EPeCFPib6ayKbA0M6oSywARvFZ8dFYfjQv3nY8ikZGtS9UHq2sLPvAfpeIzggSiCxqbWeCftP1XQ\n'</span> +</li><li>       <span class="hljs-string">'Sa+jEpzFlT1qoSTunBbrYzugPTajIJDTg6R1IRsF/J+mmakn0POVPvi4jCo9wqavB324Bx0Wipnc\n'</span> +</li><li>       <span class="hljs-string">'EU5WO0oBHo5l4x6dTpU='</span>,</li><li>         <span class="hljs-comment">//base64编码后的解密私钥。</span></li><li>         <span class="hljs-attr">key</span>:</li><li>        <span class="hljs-string">'MIICXgIBAAKBgQCx414QSP3RsYWYzf9mkBMiBAXo6S7Lpva1fKlcuVxjoFC1iMnz\n'</span> +</li><li>        <span class="hljs-string">'D4mC0uiL4k5MNi43J64c7dbqi3qAJjdAtuwQ6NZJ+Enz0RzmVFh/4yk6lmqRzuEF\n'</span> +</li><li>        <span class="hljs-string">'QqhQqSZzaLq6sq2N2G0Sv2Xl3sLvqAfe2HNm2oBwjBpApTJ3TeneOo6Z5QIDAQAB\n'</span> +</li><li>        <span class="hljs-string">'AoGBAKPNtoRQcklxqo+2wQP0j2m3Qqnib1DggjVEgb/8f/LNYQSI3U2QdROemryU\n'</span> +</li><li>        <span class="hljs-string">'u3y6N3xacZ359PktTrRKfH5+8ohmHGhIuPAnefp6bLvAFUcl4t1xm74Cow62Kyw3\n'</span> +</li><li>        <span class="hljs-string">'aSbmuTG98dxPA1sXD0jiprdtsq2wQ9CoKNyY7/d/pKoqxNuBAkEA4GytZ60NCTj9\n'</span> +</li><li>        <span class="hljs-string">'w24jACFeko5YqCFY/TTLoc4SQvWtFMnimRPclLZhtUIK0P8dib71UFedx+AxklgL\n'</span> +</li><li>        <span class="hljs-string">'A5gjcfo+2QJBAMrqiwyCh3OQ5DhyRPDwt87x1/jg5fy4hhete2ufSf2FoQCVqO+w\n'</span> +</li><li>        <span class="hljs-string">'PKoljdXmJeS6rGgzGibstuHLrP3tcIho4+0CQD3ZFWzF/xq0jxKlrpWhnJuNCRfE\n'</span> +</li><li>        <span class="hljs-string">'oO6e9yNvVA8J/5oEDSOcmqSNIp4+RhbUx8InUxnCG6Ryv5aSFu71pYcKrPkCQQCL\n'</span> +</li><li>        <span class="hljs-string">'RUGcm3ZGTnslduB0knNF+V2ndwzDUQ7P74UXT+PjurTPhujFYiuxCEd6ORVnEOzG\n'</span> +</li><li>        <span class="hljs-string">'M9TORIgdH8MjIbWsGnndAkEAw9yURDaorE8IYPLF2IEn09g1uzvWPs3phDb6smVx\n'</span> +</li><li>        <span class="hljs-string">'8GfqIdUNf+aCG5TZK/kXBF1sqcsi7jXMAf4jBlejVbSVZg=='</span>,</li><li>         <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) {</li><li>           <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`handling success:<span class="hljs-subst">${data.text}</span>`</span>);</li><li>         },</li><li>         <span class="hljs-attr">fail</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">data, code</span>) {</li><li>           <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`### cipher.rsa decrypt fail ### <span class="hljs-subst">${code}</span>:<span class="hljs-subst">${data}</span>`</span>);</li><li>         },</li><li>         <span class="hljs-attr">complete</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</li><li>           <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`operation complete!`</span>);</li><li>         }</li><li>       });</li><li>   }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="cipheraes" device-type="wearable,tv">cipher.aes<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="cipheraes" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>aes(options: CipherAesOptions): void</p> <p>AES 算法加解密。</p> <p><strong>系统能力：</strong> SystemCapability.Security.Cipher</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-system-cipher#cipheraesoptions">CipherAesOptions</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">aes加解密需要设置的参数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-nfx-c106="" class="highlight-div"><div _ngcontent-nfx-c106="" class="highlight-div-header"><div _ngcontent-nfx-c106="" class="highlight-div-header-left"><div _ngcontent-nfx-c106="" class="handle-button expand-button"><div _ngcontent-nfx-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nfx-c106="" class="highlight-div-header-right"><div _ngcontent-nfx-c106="" class="handle-button ai-button"></div><div _ngcontent-nfx-c106="" class="handle-button line-button"><div _ngcontent-nfx-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nfx-c106="" class="handle-button theme-button"><div _ngcontent-nfx-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nfx-c106="" class="handle-button copy-button"><div _ngcontent-nfx-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nfx-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {</li><li>  <span class="hljs-title function_">aes</span>(<span class="hljs-params"></span>) {</li><li>    cipher.<span class="hljs-title function_">aes</span>({</li><li>      <span class="hljs-comment">//加密。</span></li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'encrypt'</span>,</li><li>      <span class="hljs-comment">//待加密的文本内容。</span></li><li>      <span class="hljs-attr">text</span>: <span class="hljs-string">'hello'</span>,</li><li>      <span class="hljs-comment">//base64编码后的密钥。</span></li><li>      <span class="hljs-attr">key</span>: <span class="hljs-string">'NDM5Qjk2UjAzMEE0NzVCRjlFMkQwQkVGOFc1NkM1QkQ='</span>,</li><li>      <span class="hljs-attr">transformation</span>: <span class="hljs-string">'AES/CBC/PKCS5Padding'</span>,</li><li>      <span class="hljs-attr">ivOffset</span>: <span class="hljs-string">'0'</span>,</li><li>      <span class="hljs-attr">ivLen</span>: <span class="hljs-string">'16'</span>,</li><li>      <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`handling success:<span class="hljs-subst">${data.text}</span>`</span>);</li><li>        },</li><li>      <span class="hljs-attr">fail</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">data, code</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`### cipher.aes encrypt fail ### <span class="hljs-subst">${code}</span>:<span class="hljs-subst">${data}</span>`</span>);</li><li>        },</li><li>      <span class="hljs-attr">complete</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`operation complete!`</span>);</li><li>      }</li><li>    });</li><li>    cipher.<span class="hljs-title function_">aes</span>({</li><li>      <span class="hljs-comment">//解密：</span></li><li>      <span class="hljs-attr">action</span>: <span class="hljs-string">'decrypt'</span>,</li><li>      <span class="hljs-comment">//待解密的内容，是base64编码后的一段二进制值。</span></li><li>      <span class="hljs-attr">text</span>: <span class="hljs-string">'1o0kf2HXwLxHkSh5W5NhzA=='</span>,</li><li>       <span class="hljs-comment">//base64编码后的密钥。</span></li><li>       <span class="hljs-attr">key</span>: <span class="hljs-string">'NDM5Qjk2UjAzMEE0NzVCRjlFMkQwQkVGOFc1NkM1QkQ='</span>,</li><li>       <span class="hljs-attr">transformation</span>: <span class="hljs-string">'AES/CBC/PKCS5Padding'</span>,</li><li>       <span class="hljs-attr">ivOffset</span>: <span class="hljs-string">'0'</span>,</li><li>       <span class="hljs-attr">ivLen</span>: <span class="hljs-string">'16'</span>,</li><li>       <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) {</li><li>         <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`handling success:<span class="hljs-subst">${data.text}</span>`</span>);</li><li>        },</li><li>       <span class="hljs-attr">fail</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">data, code</span>) {</li><li>         <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`### cipher.aes decrypt fail ### <span class="hljs-subst">${code}</span>:<span class="hljs-subst">${data}</span>`</span>);</li><li>       },</li><li>       <span class="hljs-attr">complete</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</li><li>         <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`operation complete!`</span>);</li><li>        }</li><li>     });</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div></div></div>