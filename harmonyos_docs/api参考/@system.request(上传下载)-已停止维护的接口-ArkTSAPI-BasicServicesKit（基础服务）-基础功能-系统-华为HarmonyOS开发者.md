<h1 _ngcontent-hkt-c119="" class="doc-title ng-star-inserted" title="@system.request (上传下载)"> @system.request (上传下载) </h1>

<div _ngcontent-hkt-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>system.request部件主要给应用提供上传下载文件的基础能力。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li><p>从API Version 9开始所有接口不再维护，推荐使用新接口<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-request">@ohos.request</a>。</p>  </li><li><p>本模块首批接口从API version 3开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>  </li></ul>  </div></div></div>  <div class="tiledSection"><h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-hkt-c106="" class="highlight-div"><div _ngcontent-hkt-c106="" class="highlight-div-header"><div _ngcontent-hkt-c106="" class="highlight-div-header-left"><div _ngcontent-hkt-c106="" class="handle-button expand-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hkt-c106="" class="highlight-div-header-right"><div _ngcontent-hkt-c106="" class="handle-button ai-button"></div><div _ngcontent-hkt-c106="" class="handle-button line-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hkt-c106="" class="handle-button theme-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hkt-c106="" class="handle-button copy-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hkt-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'@system.request'</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="requestuploaddeprecated" device-type="phone,2in1,tablet,wearable,tv">request.upload<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestuploaddeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>upload(options: UploadRequestOptions): void</p> <p>上传文件，无返回值。</p> <p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-system-request#uploadrequestoptionsdeprecated">UploadRequestOptions</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">上传的配置信息。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hkt-c106="" class="highlight-div"><div _ngcontent-hkt-c106="" class="highlight-div-header"><div _ngcontent-hkt-c106="" class="highlight-div-header-left"><div _ngcontent-hkt-c106="" class="handle-button expand-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hkt-c106="" class="highlight-div-header-right"><div _ngcontent-hkt-c106="" class="handle-button ai-button"></div><div _ngcontent-hkt-c106="" class="handle-button line-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hkt-c106="" class="handle-button theme-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hkt-c106="" class="handle-button copy-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hkt-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> request, { <span class="hljs-title class_">UploadRequestOptions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@system.request'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">uploadRequestOptions</span>: <span class="hljs-title class_">UploadRequestOptions</span> = {</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://www.path.com'</span>,</li><li>  <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,</li><li>  <span class="hljs-attr">files</span>: [{</li><li>    <span class="hljs-attr">filename</span>: <span class="hljs-string">"test"</span>,</li><li>    <span class="hljs-attr">name</span>: <span class="hljs-string">"test"</span>,</li><li>    <span class="hljs-attr">uri</span>: <span class="hljs-string">"internal://cache/test.jpg"</span>,</li><li>    <span class="hljs-attr">type</span>: <span class="hljs-string">"jpg"</span></li><li>  }],</li><li>  <span class="hljs-attr">data</span>: [{</li><li>    <span class="hljs-attr">name</span>: <span class="hljs-string">"name123"</span>,</li><li>    <span class="hljs-attr">value</span>: <span class="hljs-string">"123"</span></li><li>  }],</li><li>  <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">data: object</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">' upload success, code:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  },</li><li>  <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">data:string, code:number</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">' upload fail data: '</span> + data + <span class="hljs-string">'code: '</span> + code);</li><li>  },</li><li>  <span class="hljs-attr">complete</span>: <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">' upload complete'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  request.<span class="hljs-title function_">upload</span>(uploadRequestOptions);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'upload start '</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">' upload err:'</span> + err);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="uploadrequestoptionsdeprecated" device-type="phone,2in1,tablet,wearable,tv">UploadRequestOptions<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="uploadrequestoptionsdeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.3.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.5.3.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">url</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">上传服务器地址。</td> </tr> <tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-system-request#requestdatadeprecated">RequestData</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">请求的表单数据。</td> </tr> <tr><td class="cellrowborder" width="25%">files</td> <td class="cellrowborder" width="25%">Array&lt;<a href="/consumer/cn/doc/harmonyos-references/js-apis-system-request#requestfiledeprecated">RequestFile</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">待上传文件列表。请使用multipart/form-data进行提交。</td> </tr> <tr><td class="cellrowborder" width="25%">header</td> <td class="cellrowborder" width="25%">Object</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">请求头。</td> </tr> <tr><td class="cellrowborder" width="25%">method</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">请求方法：POST、PUT。缺省POST。</td> </tr> <tr><td class="cellrowborder" width="25%">success</td> <td class="cellrowborder" width="25%">Function</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用成功的回调函数。</td> </tr> <tr><td class="cellrowborder" width="25%">fail</td> <td class="cellrowborder" width="25%">Function</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用失败的回调函数。</td> </tr> <tr><td class="cellrowborder" width="25%">complete</td> <td class="cellrowborder" width="25%">Function</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用结束的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>success参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.5.5.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-system-request#uploadresponsedeprecated">UploadResponse</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">上传任务成功返回信息。</td> </tr>  </tbody></table></div> </div> <p><strong>fail参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%">any</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">上传任务失败返回header信息。</td> </tr> <tr><td class="cellrowborder" width="25%">code</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">上传任务失败返回HTTP状态码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="uploadresponsedeprecated" device-type="phone,2in1,tablet,wearable,tv">UploadResponse<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="uploadresponsedeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.6.3.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">code</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">服务器返回的HTTP状态码。</td> </tr> <tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">服务器返回的内容。根据返回头内容中的type决定该值的类型。</td> </tr> <tr><td class="cellrowborder" width="25%">headers</td> <td class="cellrowborder" width="25%">Object</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">服务器返回的返回头内容。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="requestfiledeprecated" device-type="phone,2in1,tablet,wearable,tv">RequestFile<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestfiledeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.3.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.7.3.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">filename</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">multipart 提交时，请求头中的文件名。</td> </tr> <tr><td class="cellrowborder" width="25%">name</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">multipart 提交时，表单项目的名称，缺省为file。</td> </tr> <tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">文件的本地存储路径。</td> </tr> <tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">文件的内容类型，默认根据文件名或路径的后缀获取。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="requestdatadeprecated" device-type="phone,2in1,tablet,wearable,tv">RequestData<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestdatadeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.MiscServices.Upload</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.3.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.8.3.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.3.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.8.3.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">name</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示form 元素的名称。</td> </tr> <tr><td class="cellrowborder" width="25%">value</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示form 元素的值。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="requestdownloaddeprecated" device-type="phone,2in1,tablet,wearable,tv">request.download<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestdownloaddeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>download(options: DownloadRequestOptions): void</p> <p>下载文件，无返回值。</p> <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-system-request#downloadrequestoptionsdeprecated">DownloadRequestOptions</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">下载的配置信息。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hkt-c106="" class="highlight-div"><div _ngcontent-hkt-c106="" class="highlight-div-header"><div _ngcontent-hkt-c106="" class="highlight-div-header-left"><div _ngcontent-hkt-c106="" class="handle-button expand-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hkt-c106="" class="highlight-div-header-right"><div _ngcontent-hkt-c106="" class="handle-button ai-button"></div><div _ngcontent-hkt-c106="" class="handle-button line-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hkt-c106="" class="handle-button theme-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hkt-c106="" class="handle-button copy-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hkt-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> request, { <span class="hljs-title class_">DownloadRequestOptions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@system.request'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">downloadRequestOptions</span>: <span class="hljs-title class_">DownloadRequestOptions</span> = {</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://www.path.com'</span>,</li><li>  <span class="hljs-attr">filename</span>: <span class="hljs-string">'requestSystenTest'</span>,</li><li>  <span class="hljs-attr">header</span>: <span class="hljs-string">""</span>,</li><li>  <span class="hljs-attr">description</span>: <span class="hljs-string">'this is requeSystem download response'</span>,</li><li>  <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">data:object</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">' download success, code:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  },</li><li>  <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">data:string, code:number</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">' download fail data: '</span> + data + <span class="hljs-string">'code: '</span> + code);</li><li>  },</li><li>  <span class="hljs-attr">complete</span>: <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">' download complete'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  request.<span class="hljs-title function_">download</span>(downloadRequestOptions);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'download start '</span>);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">' download err:'</span> + err);</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="downloadrequestoptionsdeprecated" device-type="phone,2in1,tablet,wearable,tv">DownloadRequestOptions<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="downloadrequestoptionsdeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.3.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.10.3.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">url</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">资源地址。</td> </tr> <tr><td class="cellrowborder" width="25%">filename</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">本次下载文件的名称。默认从本次请求或资源地址中获取。</td> </tr> <tr><td class="cellrowborder" width="25%">header</td> <td class="cellrowborder" width="25%">Object</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">请求头。</td> </tr> <tr><td class="cellrowborder" width="25%">description</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">资源地址的下载描述，默认为文件名称。</td> </tr> <tr><td class="cellrowborder" width="25%">success</td> <td class="cellrowborder" width="25%">Function</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用成功的回调函数。</td> </tr> <tr><td class="cellrowborder" width="25%">fail</td> <td class="cellrowborder" width="25%">Function</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用失败的回调函数。</td> </tr> <tr><td class="cellrowborder" width="25%">complete</td> <td class="cellrowborder" width="25%">Function</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用结束的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>success参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.5.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.10.5.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-system-request#downloadresponsedeprecated">DownloadResponse</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">下载任务成功返回信息。</td> </tr>  </tbody></table></div> </div> <p><strong>fail参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%">any</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">下载任务失败返回header信息。</td> </tr> <tr><td class="cellrowborder" width="25%">code</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">下载任务失败返回HTTP状态码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="downloadresponsedeprecated" device-type="phone,2in1,tablet,wearable,tv">DownloadResponse<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="downloadresponsedeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.3.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.11.3.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.3.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.11.3.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">token</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示下载的token，获取下载状态的依据。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="requestondownloadcompletedeprecated" device-type="phone,2in1,tablet,wearable,tv">request.onDownloadComplete<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestondownloadcompletedeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onDownloadComplete(options: OnDownloadCompleteOptions): void</p> <p>获取下载任务状态，无返回值。</p> <p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-system-request#ondownloadcompleteoptionsdeprecated">OnDownloadCompleteOptions</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听下载任务的配置信息。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-hkt-c106="" class="highlight-div"><div _ngcontent-hkt-c106="" class="highlight-div-header"><div _ngcontent-hkt-c106="" class="highlight-div-header-left"><div _ngcontent-hkt-c106="" class="handle-button expand-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-hkt-c106="" class="highlight-div-header-right"><div _ngcontent-hkt-c106="" class="handle-button ai-button"></div><div _ngcontent-hkt-c106="" class="handle-button line-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-hkt-c106="" class="handle-button theme-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-hkt-c106="" class="handle-button copy-button"><div _ngcontent-hkt-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-hkt-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> request, { <span class="hljs-title class_">OnDownloadCompleteOptions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@system.request'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">onDownloadCompleteOptions</span>: <span class="hljs-title class_">OnDownloadCompleteOptions</span> = {</li><li>  <span class="hljs-attr">token</span>: <span class="hljs-string">'token-index'</span>,</li><li>  <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">data:object</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">' download success, code:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>  },</li><li>  <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">data:string, code:number</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">' download fail data: '</span> + data + <span class="hljs-string">'code: '</span> + code);</li><li>  },</li><li>  <span class="hljs-attr">complete</span>: <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">' download complete'</span>);</li><li>  }</li><li>}</li><li>
</li><li>request.<span class="hljs-title function_">onDownloadComplete</span>(onDownloadCompleteOptions);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="ondownloadcompleteoptionsdeprecated" device-type="phone,2in1,tablet,wearable,tv">OnDownloadCompleteOptions<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondownloadcompleteoptionsdeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.3.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.13.3.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.3.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.13.3.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">token</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">download 接口返回的结果 token。</td> </tr> <tr><td class="cellrowborder" width="25%">success</td> <td class="cellrowborder" width="25%">Function</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用成功的回调函数。</td> </tr> <tr><td class="cellrowborder" width="25%">fail</td> <td class="cellrowborder" width="25%">Function</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用失败的回调函数。</td> </tr> <tr><td class="cellrowborder" width="25%">complete</td> <td class="cellrowborder" width="25%">Function</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">接口调用结束的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>success参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.5.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%"><a href="/consumer/cn/doc/harmonyos-references/js-apis-system-request#ondownloadcompleteresponsedeprecated">OnDownloadCompleteResponse</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">下载任务成功返回信息。</td> </tr>  </tbody></table></div> </div> <p><strong>fail参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">data</td> <td class="cellrowborder" width="25%">any</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">下载任务失败返回header信息。</td> </tr> <tr><td class="cellrowborder" width="25%">code</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">下载任务失败返回HTTP状态码。</td> </tr>  </tbody></table></div> </div> </div>  <div class="tiledSection"><h2 id="ondownloadcompleteresponsedeprecated" device-type="phone,2in1,tablet,wearable,tv">OnDownloadCompleteResponse<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondownloadcompleteresponsedeprecated" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p><strong>系统能力</strong>：SystemCapability.MiscServices.Download</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.3.1.5.1.1" width="25%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.14.3.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.3.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.14.3.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示下载文件的uri。</td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>