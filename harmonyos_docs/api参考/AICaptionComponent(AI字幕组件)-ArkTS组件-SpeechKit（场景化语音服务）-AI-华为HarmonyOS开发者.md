<h1 _ngcontent-kcn-c119="" class="doc-title ng-star-inserted" title="AICaptionComponent (AI字幕组件)"> AICaptionComponent (AI字幕组件) </h1>

<div _ngcontent-kcn-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>AI字幕控件使用AI能力将语音实时转化成文本并翻译，提供原文、译文的展示。适用于一些音乐类、视频类等音视频内容App，帮助用户在一些无法直接浏览音频内容或者对音频源语言不熟悉的场景下，通过字幕来高效获取信息。</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <div class="tiledSection"><h2 id="section10727191484112" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10727191484112" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-kcn-c106="" class="highlight-div"><div _ngcontent-kcn-c106="" class="highlight-div-header"><div _ngcontent-kcn-c106="" class="highlight-div-header-left"><div _ngcontent-kcn-c106="" class="handle-button expand-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kcn-c106="" class="highlight-div-header-right"><div _ngcontent-kcn-c106="" class="handle-button ai-button"></div><div _ngcontent-kcn-c106="" class="handle-button line-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kcn-c106="" class="handle-button theme-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kcn-c106="" class="handle-button copy-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kcn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { </li><li>  <span class="hljs-title class_">AICaptionComponent</span>, <span class="hljs-title class_">AudioInfo</span>, <span class="hljs-title class_">AudioData</span>, <span class="hljs-title class_">AICaptionOptions</span>, <span class="hljs-title class_">AICaptionController</span></li><li>} <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.SpeechKit"</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section7266241469" device-type="phone,2in1,tablet">AICaptionComponent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7266241469" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>AI字幕组件，可以作为动态组件加载。</p> <p><strong>装饰器类型：</strong>@Component</p> <p><strong>系统能力：</strong>SystemCapability.AI.AICaption</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.1" width="29.87%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.2" width="29.609999999999996%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.3" width="7.5200000000000005%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.4" width="10.14%"><p>装饰器类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.6.1.5" width="22.86%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="29.87%"><p>isShown</p> </td> <td class="cellrowborder" width="29.609999999999996%"><p>boolean</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>是</p> </td> <td class="cellrowborder" width="10.14%"><p>@Link</p> </td> <td class="cellrowborder" width="22.86%"><p>字幕显示状态</p> <p>true：显示，从5.1.0(18)开始支持自动识别应用音频生成字幕。</p> <p>false：隐藏</p> </td> </tr> <tr><td class="cellrowborder" width="29.87%"><p>controller</p> </td> <td class="cellrowborder" width="29.609999999999996%"><p><a href="/consumer/cn/doc/harmonyos-references/speech-aicaptioncomponent#section816451553012">AICaptionController</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>是</p> </td> <td class="cellrowborder" width="10.14%"><p>-</p> </td> <td class="cellrowborder" width="22.86%"><p>字幕控制器。</p> </td> </tr> <tr><td class="cellrowborder" width="29.87%"><p>options</p> </td> <td class="cellrowborder" width="29.609999999999996%"><p><a href="/consumer/cn/doc/harmonyos-references/speech-aicaptioncomponent#section15787428226">AICaptionOptions</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>是</p> </td> <td class="cellrowborder" width="10.14%"><p>-</p> </td> <td class="cellrowborder" width="22.86%"><p>字幕初始化参数。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h3 id="section1042393311394" device-type="phone,2in1,tablet" class="firsth2">build<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1042393311394" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>build(): void</p> <p>用于创建对象<a href="/consumer/cn/doc/harmonyos-references/speech-aicaptioncomponent#section7266241469">AICaptionComponent</a>的构造函数。</p> <p><strong>系统能力：</strong>SystemCapability.AI.AICaption</p> <p><strong>起始版本：</strong>5.0.0(12)</p> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kcn-c106="" class="highlight-div"><div _ngcontent-kcn-c106="" class="highlight-div-header"><div _ngcontent-kcn-c106="" class="highlight-div-header-left"><div _ngcontent-kcn-c106="" class="handle-button expand-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kcn-c106="" class="highlight-div-header-right"><div _ngcontent-kcn-c106="" class="handle-button ai-button"></div><div _ngcontent-kcn-c106="" class="handle-button line-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kcn-c106="" class="handle-button theme-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kcn-c106="" class="handle-button copy-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kcn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AICaptionComponent</span>, <span class="hljs-title class_">AICaptionController</span>, <span class="hljs-title class_">AICaptionOptions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.SpeechKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> captionOption?: <span class="hljs-title class_">AICaptionOptions</span>;</li><li>  <span class="hljs-keyword">private</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AICaptionController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isShow</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">captionOption</span> = {</li><li>      <span class="hljs-attr">initialOpacity</span>: <span class="hljs-number">1</span>,</li><li>      <span class="hljs-attr">onPrepared</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      },</li><li>      <span class="hljs-attr">onError</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      }</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 调用AICaptionComponent组件初始化字幕</span></li><li>      <span class="hljs-title class_">AICaptionComponent</span>({</li><li>        <span class="hljs-attr">isShown</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isShow</span>,</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>,</li><li>        <span class="hljs-attr">options</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">captionOption</span></li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section816451553012" device-type="phone,2in1,tablet">AICaptionController<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section816451553012" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>AI字幕控件的主要功能入口类。</p> <p><strong>系统能力：</strong> SystemCapability.AI.AICaption</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>示例：</strong></p> <div _ngcontent-kcn-c106="" class="highlight-div"><div _ngcontent-kcn-c106="" class="highlight-div-header"><div _ngcontent-kcn-c106="" class="highlight-div-header-left"><div _ngcontent-kcn-c106="" class="handle-button expand-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kcn-c106="" class="highlight-div-header-right"><div _ngcontent-kcn-c106="" class="handle-button ai-button"></div><div _ngcontent-kcn-c106="" class="handle-button line-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kcn-c106="" class="handle-button theme-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kcn-c106="" class="handle-button copy-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kcn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AICaptionComponent</span>, <span class="hljs-title class_">AICaptionOptions</span>, <span class="hljs-title class_">AICaptionController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.SpeechKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> options?: <span class="hljs-title class_">AICaptionOptions</span>;</li><li>  <span class="hljs-keyword">private</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AICaptionController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isShown</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = {</li><li>      <span class="hljs-attr">initialOpacity</span>: <span class="hljs-number">1</span>,</li><li>      <span class="hljs-attr">onPrepared</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      },</li><li>      <span class="hljs-attr">onError</span>: <span class="hljs-function">() =&gt;</span> {</li><li>      }</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 调用AICaptionComponent组件初始化字幕</span></li><li>      <span class="hljs-title class_">AICaptionComponent</span>({</li><li>        <span class="hljs-attr">isShown</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isShown</span>,</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>,</li><li>        <span class="hljs-attr">options</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span></li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section16367173452" device-type="phone,2in1,tablet" class="firsth2">getAudioInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16367173452" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>getAudioInfo(): AudioInfo</p> <p>获取要被识别的音频信息。</p> <p><strong>系统能力：</strong> SystemCapability.AI.AICaption</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p><a href="/consumer/cn/doc/harmonyos-references/speech-aicaptioncomponent#section73559613164">AudioInfo</a></p> </td> <td class="cellrowborder" width="50%"><p>获取当前版本字幕支持的音频信息。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kcn-c106="" class="highlight-div"><div _ngcontent-kcn-c106="" class="highlight-div-header"><div _ngcontent-kcn-c106="" class="highlight-div-header-left"><div _ngcontent-kcn-c106="" class="handle-button expand-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kcn-c106="" class="highlight-div-header-right"><div _ngcontent-kcn-c106="" class="handle-button ai-button"></div><div _ngcontent-kcn-c106="" class="handle-button line-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kcn-c106="" class="handle-button theme-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kcn-c106="" class="handle-button copy-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kcn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AICaptionController</span>, <span class="hljs-title class_">AudioInfo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.SpeechKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AICaptionController</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">audioInfo</span>: <span class="hljs-title class_">AudioInfo</span> = controller.<span class="hljs-title function_">getAudioInfo</span>();</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`GetAudioInfo failed. Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section272302165" device-type="phone,2in1,tablet">writeAudio<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section272302165" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>writeAudio(audioData: AudioData): void</p> <p>写入音频数据。音频流信息格式从<a href="/consumer/cn/doc/harmonyos-references/speech-aicaptioncomponent#section16367173452">getAudioInfo</a>方法获取（调用此方法会停止自动获取应用音频生成字幕，以写入的音频流为准）。</p> <p><strong>系统能力：</strong> SystemCapability.AI.AICaption</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="30.82691730826917%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="30.82691730826917%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="7.519248075192479%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="30.82691730826917%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="30.82691730826917%"><p>audioData</p> </td> <td class="cellrowborder" width="30.82691730826917%"><p><a href="/consumer/cn/doc/harmonyos-references/speech-aicaptioncomponent#section1869988122518">AudioData</a></p> </td> <td class="cellrowborder" width="7.519248075192479%"><p>是</p> </td> <td class="cellrowborder" width="30.82691730826917%"><p>音频数据</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/speech-errorcode">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="30.869999999999997%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="69.13%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30.869999999999997%"><p>401</p> </td> <td class="cellrowborder" width="69.13%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="30.869999999999997%"><p>1012900012</p> </td> <td class="cellrowborder" width="69.13%"><p>Audio recognition failed.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-kcn-c106="" class="highlight-div"><div _ngcontent-kcn-c106="" class="highlight-div-header"><div _ngcontent-kcn-c106="" class="highlight-div-header-left"><div _ngcontent-kcn-c106="" class="handle-button expand-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-kcn-c106="" class="highlight-div-header-right"><div _ngcontent-kcn-c106="" class="handle-button ai-button"></div><div _ngcontent-kcn-c106="" class="handle-button line-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-kcn-c106="" class="handle-button theme-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-kcn-c106="" class="handle-button copy-button"><div _ngcontent-kcn-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-kcn-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AICaptionController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.SpeechKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AudioData</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.SpeechKit'</span>;</li><li>
</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">audioData</span>: <span class="hljs-title class_">AudioData</span> = {</li><li>  <span class="hljs-attr">data</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>()</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AICaptionController</span>();</li><li>  controller.<span class="hljs-title function_">writeAudio</span>(audioData)</li><li>} <span class="hljs-keyword">catch</span> (e) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`WriteAudio failed. Code: <span class="hljs-subst">${e.code}</span>, message: <span class="hljs-subst">${e.message}</span>`</span>);</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section73559613164" device-type="phone,2in1,tablet">AudioInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section73559613164" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>音频流信息。</p> <p><strong>系统能力：</strong> SystemCapability.AI.AICaption</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.1" width="23.762376237623766%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.2" width="24.3024302430243%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.3" width="7.530753075307531%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.4" width="6.950695069506951%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.5.1.6.1.5" width="37.453745374537455%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.762376237623766%"><p>audioType</p> </td> <td class="cellrowborder" width="24.3024302430243%"><p>string</p> </td> <td class="cellrowborder" width="7.530753075307531%"><p>否</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="37.453745374537455%"><p>音频类型</p> <p>当前仅支持 "pcm"编码</p> </td> </tr> <tr><td class="cellrowborder" width="23.762376237623766%"><p>sampleRate</p> </td> <td class="cellrowborder" width="24.3024302430243%"><p>audio.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#audiosamplingrate8" target="_blank">AudioSamplingRate</a></p> </td> <td class="cellrowborder" width="7.530753075307531%"><p>否</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="37.453745374537455%"><p>音频采样率</p> <p>当前仅支持16000采样率</p> </td> </tr> <tr><td class="cellrowborder" width="23.762376237623766%"><p>soundChannel</p> </td> <td class="cellrowborder" width="24.3024302430243%"><p>audio.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-audio-e#audiochannel8" target="_blank">AudioChannel</a></p> </td> <td class="cellrowborder" width="7.530753075307531%"><p>否</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="37.453745374537455%"><p>音频声道</p> <p>当前仅支持1个通道</p> </td> </tr> <tr><td class="cellrowborder" width="23.762376237623766%"><p>sampleBit</p> </td> <td class="cellrowborder" width="24.3024302430243%"><p>number</p> </td> <td class="cellrowborder" width="7.530753075307531%"><p>否</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="37.453745374537455%"><p>音频采样字节</p> <p>当前仅支持16位</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1869988122518" device-type="phone,2in1,tablet">AudioData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1869988122518" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>音频数据。</p> <p><strong>系统能力：</strong> SystemCapability.AI.AICaption</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.1" width="29.872987298729875%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.2" width="18.19181918191819%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.3" width="7.530753075307531%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.4" width="6.950695069506951%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.5.1.6.1.5" width="37.453745374537455%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="29.872987298729875%"><p>data</p> </td> <td class="cellrowborder" width="18.19181918191819%"><p>Uint8Array</p> </td> <td class="cellrowborder" width="7.530753075307531%"><p>否</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="37.453745374537455%"><p>音频数据</p> <p>当前仅支持音频数据长度为640字节或1280字节。 建议每次发送音频调用间隔为20ms（传输音频长度为640字节）或40ms（传输音频长度为1280字节）。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section15787428226" device-type="phone,2in1,tablet">AICaptionOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section15787428226" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>字幕初始化选项。</p> <p><strong>系统能力：</strong> SystemCapability.AI.AICaption</p> <p><strong>起始版本：</strong>5.0.0(12)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.1" width="29.872987298729875%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.2" width="18.19181918191819%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.3" width="7.530753075307531%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.4" width="6.950695069506951%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.5.1.6.1.5" width="37.453745374537455%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="29.872987298729875%"><p>initialOpacity</p> </td> <td class="cellrowborder" width="18.19181918191819%"><p>number</p> </td> <td class="cellrowborder" width="7.530753075307531%"><p>否</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>是</p> </td> <td class="cellrowborder" width="37.453745374537455%"><p>字幕精简态下面板背景的不透明度</p> <ul><li>Phone和tablet的取值范围：[0, 1]，1表示不透明，0表示完全透明, 达到隐藏组件效果，但是在布局中占位，默认值：0。</li><li>2in1有全透明：0 、半透明：0.5 、不透明：1三个选项，默认值：全透明：0。</li></ul> </td> </tr> <tr><td class="cellrowborder" width="29.872987298729875%"><p>onPrepared</p> </td> <td class="cellrowborder" width="18.19181918191819%"><p>Callback&lt;void&gt;</p> </td> <td class="cellrowborder" width="7.530753075307531%"><p>否</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="37.453745374537455%"><p>监听控件初始化完成的回调函数</p> </td> </tr> <tr><td class="cellrowborder" width="29.872987298729875%"><p>onError</p> </td> <td class="cellrowborder" width="18.19181918191819%"><p>ErrorCallback</p> </td> <td class="cellrowborder" width="7.530753075307531%"><p>否</p> </td> <td class="cellrowborder" width="6.950695069506951%"><p>否</p> </td> <td class="cellrowborder" width="37.453745374537455%"><p>监听控件错误的回调函数</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/speech-errorcode">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="30.869999999999997%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="69.13%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="30.869999999999997%"><p>1012900010</p> </td> <td class="cellrowborder" width="69.13%"><p>AI caption service is busy.</p> </td> </tr> <tr><td class="cellrowborder" width="30.869999999999997%"><p>1012900011</p> </td> <td class="cellrowborder" width="69.13%"><p>AI caption controller initialized failed.</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>