<h1 _ngcontent-nvo-c119="" class="doc-title ng-star-inserted" title="ApplicationContext (应用上下文)"> ApplicationContext (应用上下文) </h1>

<div _ngcontent-nvo-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>ApplicationContext作为应用上下文，继承自<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context">Context</a>，提供了应用生命周期监听、进程管理、应用环境设置等应用级别的管控能力。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 9开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>      <p>本模块接口仅可在Stage模型下使用。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextonabilitylifecycle" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.on('abilityLifecycle')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextonabilitylifecycle" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'abilityLifecycle', callback: AbilityLifecycleCallback): number</p>     <p>注册监听应用内UIAbility的生命周期。使用callback异步回调。仅支持主线程调用。</p>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">此类型表示应用内UIAbility的生命周期，固定为'abilityLifecycle'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-abilitylifecyclecallback">AbilityLifecycleCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">UIAbility生命周期变化时触发的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">返回此次注册的callbackID，该ID用于在<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-application-applicationcontext#applicationcontextoffabilitylifecycle">ApplicationContext.off('abilityLifecycle')</a>方法中取消注册对应的callback。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">AbilityLifecycleCallback</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">lifecycleId</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'MyAbility onCreate'</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-title class_">AbilityLifecycleCallback</span>: <span class="hljs-title class_">AbilityLifecycleCallback</span> = {</li><li>      <span class="hljs-title function_">onAbilityCreate</span>(<span class="hljs-params">ability</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbilityLifecycleCallback onAbilityCreate ability: <span class="hljs-subst">${ability}</span>`</span>);</li><li>      },</li><li>      <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">ability, windowStage</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbilityLifecycleCallback onWindowStageCreate ability: <span class="hljs-subst">${ability}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbilityLifecycleCallback onWindowStageCreate windowStage: <span class="hljs-subst">${windowStage}</span>`</span>);</li><li>      },</li><li>      <span class="hljs-title function_">onWindowStageActive</span>(<span class="hljs-params">ability, windowStage</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbilityLifecycleCallback onWindowStageActive ability: <span class="hljs-subst">${ability}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbilityLifecycleCallback onWindowStageActive windowStage: <span class="hljs-subst">${windowStage}</span>`</span>);</li><li>      },</li><li>      <span class="hljs-title function_">onWindowStageInactive</span>(<span class="hljs-params">ability, windowStage</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbilityLifecycleCallback onWindowStageInactive ability: <span class="hljs-subst">${ability}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbilityLifecycleCallback onWindowStageInactive windowStage: <span class="hljs-subst">${windowStage}</span>`</span>);</li><li>      },</li><li>      <span class="hljs-title function_">onWindowStageDestroy</span>(<span class="hljs-params">ability, windowStage</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbilityLifecycleCallback onWindowStageDestroy ability: <span class="hljs-subst">${ability}</span>`</span>);</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbilityLifecycleCallback onWindowStageDestroy windowStage: <span class="hljs-subst">${windowStage}</span>`</span>);</li><li>      },</li><li>      <span class="hljs-title function_">onAbilityDestroy</span>(<span class="hljs-params">ability</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbilityLifecycleCallback onAbilityDestroy ability: <span class="hljs-subst">${ability}</span>`</span>);</li><li>      },</li><li>      <span class="hljs-title function_">onAbilityForeground</span>(<span class="hljs-params">ability</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbilityLifecycleCallback onAbilityForeground ability: <span class="hljs-subst">${ability}</span>`</span>);</li><li>      },</li><li>      <span class="hljs-title function_">onAbilityBackground</span>(<span class="hljs-params">ability</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbilityLifecycleCallback onAbilityBackground ability: <span class="hljs-subst">${ability}</span>`</span>);</li><li>      },</li><li>      <span class="hljs-title function_">onAbilityContinue</span>(<span class="hljs-params">ability</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`AbilityLifecycleCallback onAbilityContinue ability: <span class="hljs-subst">${ability}</span>`</span>);</li><li>      }</li><li>    }</li><li>    <span class="hljs-comment">// 1.通过context属性获取applicationContext</span></li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-comment">// 2.通过applicationContext注册监听应用内生命周期</span></li><li>      lifecycleId = applicationContext.<span class="hljs-title function_">on</span>(<span class="hljs-string">'abilityLifecycle'</span>, <span class="hljs-title class_">AbilityLifecycleCallback</span>);</li><li>    } <span class="hljs-keyword">catch</span> (paramError) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`registerAbilityLifecycleCallback lifecycleId: <span class="hljs-subst">${lifecycleId}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextoffabilitylifecycle" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.off('abilityLifecycle')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextoffabilitylifecycle" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'abilityLifecycle', callbackId: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>取消监听应用内UIAbility的生命周期。使用callback异步回调。仅支持主线程调用。</p>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">此类型表示应用内UIAbility的生命周期，固定为'abilityLifecycle'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callbackId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-application-applicationcontext#applicationcontextonabilitylifecycle">ApplicationContext.on('abilityLifecycle')</a>接口注册监听应用内UIAbility的生命周期时返回的ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调方法。当取消监听应用内生命周期成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">lifecycleId</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onDestroy</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`stage applicationContext: <span class="hljs-subst">${applicationContext}</span>`</span>);</li><li>    <span class="hljs-keyword">try</span> {</li><li>      applicationContext.<span class="hljs-title function_">off</span>(<span class="hljs-string">'abilityLifecycle'</span>, lifecycleId, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`unregisterAbilityLifecycleCallback fail, err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`unregisterAbilityLifecycleCallback success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>        }</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (paramError) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).code}</span>, error code: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextoffabilitylifecycle-1" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.off('abilityLifecycle')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextoffabilitylifecycle-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'abilityLifecycle', callbackId: number): Promise&lt;void&gt;</p>     <p>取消监听应用内UIAbility的生命周期。使用Promise异步回调。仅支持主线程调用。</p>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">此类型表示应用内UIAbility的生命周期，固定为'abilityLifecycle'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callbackId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-application-applicationcontext#applicationcontextonabilitylifecycle">ApplicationContext.on('abilityLifecycle')</a>接口注册监听应用内UIAbility的生命周期时返回的ID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">lifecycleId</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onDestroy</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`stage applicationContext: <span class="hljs-subst">${applicationContext}</span>`</span>);</li><li>    <span class="hljs-keyword">try</span> {</li><li>      applicationContext.<span class="hljs-title function_">off</span>(<span class="hljs-string">'abilityLifecycle'</span>, lifecycleId);</li><li>    } <span class="hljs-keyword">catch</span> (paramError) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextonenvironment" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.on('environment')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextonenvironment" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'environment', callback: EnvironmentCallback): number</p>     <p>注册对系统环境变化的监听。使用callback异步回调。仅支持主线程调用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-ability#abilityonconfigurationupdate">onConfigurationUpdate</a>也可以实现对系统环境变量的监听。相较于Ability的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-ability#abilityonconfigurationupdate">onConfigurationUpdate</a>接口，当前接口的使用场景更加灵活，不仅可以在应用组件中使用，还可以在页面中使用，但是支持订阅的环境变量与Ability的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-ability#abilityonconfigurationupdate">onConfigurationUpdate</a>接口存在差异，如不支持订阅direction、screenDensity、displayId，详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-configuration#configuration">Configuration</a>中各个环境变量的说明。</li>        <li>当前接口在实际触发时存在一定限制。例如如果开发者通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-applicationcontext#applicationcontextsetlanguage11">setLanguage</a>接口设置应用的语言，即便系统语言发生变化，系统也不再触发当前接口的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-environmentcallback">callback</a>回调。详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/subscribe-system-environment-variable-changes#使用场景" target="_blank">使用场景</a>。</li>       </ul>      </div></div></div>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">此类型表示系统环境变化，如系统深浅色发生变化，固定为'environment'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-environmentcallback">EnvironmentCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">系统环境变化时触发的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">返回此次注册的callbackID，该ID用于在<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-application-applicationcontext#applicationcontextoffenvironment">ApplicationContext.off('environment')</a>方法中取消注册对应的callback。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">EnvironmentCallback</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">callbackId</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'MyAbility onCreate'</span>)</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">environmentCallback</span>: <span class="hljs-title class_">EnvironmentCallback</span> = {</li><li>      <span class="hljs-title function_">onConfigurationUpdated</span>(<span class="hljs-params">config</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onConfigurationUpdated config: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(config)}</span>`</span>);</li><li>      },</li><li>      <span class="hljs-title function_">onMemoryLevel</span>(<span class="hljs-params">level</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onMemoryLevel level: <span class="hljs-subst">${level}</span>`</span>);</li><li>      }</li><li>    };</li><li>    <span class="hljs-comment">// 1.获取applicationContext</span></li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-comment">// 2.通过applicationContext注册监听系统环境变化</span></li><li>      callbackId = applicationContext.<span class="hljs-title function_">on</span>(<span class="hljs-string">'environment'</span>, environmentCallback);</li><li>    } <span class="hljs-keyword">catch</span> (paramError) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`registerEnvironmentCallback callbackId: <span class="hljs-subst">${callbackId}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextoffenvironment" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.off('environment')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextoffenvironment" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'environment', callbackId: number, callback: AsyncCallback&lt;void&gt;): void</p>     <p>取消对系统环境变化的监听。使用callback异步回调。仅支持主线程调用。</p>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">此类型表示系统环境变化，如系统深浅色发生变化，固定为'environment'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callbackId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-application-applicationcontext#applicationcontextonenvironment">ApplicationContext.on('environment')</a>接口注册监听系统环境变化时返回的ID。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调方法。当取消对系统环境变化的监听成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">callbackId</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onDestroy</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      applicationContext.<span class="hljs-title function_">off</span>(<span class="hljs-string">'environment'</span>, callbackId, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`unregisterEnvironmentCallback fail, err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`unregisterEnvironmentCallback success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>        }</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (paramError) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextoffenvironment-1" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.off('environment')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextoffenvironment-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'environment', callbackId: number): Promise&lt;void&gt;</p>     <p>取消对系统环境变化的监听。使用Promise异步回调。仅支持主线程调用。</p>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">此类型表示系统环境变化，如系统深浅色发生变化，固定为'environment'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callbackId</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">通过<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-application-applicationcontext#applicationcontextonenvironment">ApplicationContext.on('environment')</a>接口注册监听系统环境变化时返回的ID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">callbackId</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onDestroy</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      applicationContext.<span class="hljs-title function_">off</span>(<span class="hljs-string">'environment'</span>, callbackId);</li><li>    } <span class="hljs-keyword">catch</span> (paramError) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).code}</span>, <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextonapplicationstatechange10" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.on('applicationStateChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextonapplicationstatechange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'applicationStateChange', callback: ApplicationStateChangeCallback): void</p>     <p>注册对当前应用进程状态变化的监听。使用callback异步回调。仅支持主线程调用。</p>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">此类型表示当前应用进程状态变化，固定为'applicationStateChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-applicationstatechangecallback">ApplicationStateChangeCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">当前应用进程状态切换时触发的回调方法。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">ApplicationStateChangeCallback</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'MyAbility onCreate'</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">applicationStateChangeCallback</span>: <span class="hljs-title class_">ApplicationStateChangeCallback</span> = {</li><li>      <span class="hljs-title function_">onApplicationForeground</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'applicationStateChangeCallback onApplicationForeground'</span>);</li><li>      },</li><li>      <span class="hljs-title function_">onApplicationBackground</span>(<span class="hljs-params"></span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'applicationStateChangeCallback onApplicationBackground'</span>);</li><li>      }</li><li>    }</li><li>
</li><li>    <span class="hljs-comment">// 1.获取applicationContext</span></li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-comment">// 2.通过applicationContext注册当前应用进程状态监听</span></li><li>      applicationContext.<span class="hljs-title function_">on</span>(<span class="hljs-string">'applicationStateChange'</span>, applicationStateChangeCallback);</li><li>    } <span class="hljs-keyword">catch</span> (paramError) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).code}</span>, error msg: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Register applicationStateChangeCallback'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextoffapplicationstatechange10" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.off('applicationStateChange')<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextoffapplicationstatechange10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'applicationStateChange', callback?: ApplicationStateChangeCallback): void</p>     <p>取消对当前应用进程状态变化的监听。使用callback异步回调。仅支持主线程调用。</p>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">此类型表示当前应用进程状态变化，固定为'applicationStateChange'。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-applicationstatechangecallback">ApplicationStateChangeCallback</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>回调函数。取值可以为使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-application-applicationcontext#applicationcontextonapplicationstatechange10">ApplicationContext.on('applicationStateChange')</a>方法定义的callback回调，也可以为空。</p>          <p>- 如果传入已定义的回调，则取消该监听。</p>          <p>- 如果未传入参数，则取消所有已注册的该类型事件的监听。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>假定已使用<a href="/consumer/cn/doc/harmonyos-references/js-apis-inner-application-applicationcontext#applicationcontextonapplicationstatechange10">ApplicationContext.on('applicationStateChange')</a>方法注册名为applicationStateChangeCallback回调，下面示例展示如何取消对应的事件监听。</p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">ApplicationStateChangeCallback</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">applicationStateChangeCallback</span>: <span class="hljs-title class_">ApplicationStateChangeCallback</span> = {</li><li>  <span class="hljs-title function_">onApplicationForeground</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'applicationStateChangeCallback onApplicationForeground'</span>);</li><li>  },</li><li>  <span class="hljs-title function_">onApplicationBackground</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'applicationStateChangeCallback onApplicationBackground'</span>);</li><li>  }</li><li>};</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onDestroy</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-comment">// 本例中的callback字段取值为ApplicationStateChangeCallback，需要替换为实际值。</span></li><li>      <span class="hljs-comment">// 如果callback字段不传入参数，则取消所有已注册的该类型事件的监听。</span></li><li>      applicationContext.<span class="hljs-title function_">off</span>(<span class="hljs-string">'applicationStateChange'</span>, applicationStateChangeCallback);</li><li>    } <span class="hljs-keyword">catch</span> (paramError) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error: <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).code}</span>, <span class="hljs-subst">${(paramError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextgetrunningprocessinformation" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.getRunningProcessInformation<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextgetrunningprocessinformation" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getRunningProcessInformation(): Promise&lt;Array&lt;ProcessInformation&gt;&gt;</p>     <p>获取运行中的进程信息。使用Promise异步回调。</p>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-processinformation">ProcessInformation</a>&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回接口运行结果及有关运行进程的信息，可进行错误处理或其他自定义处理。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000050</td>         <td class="cellrowborder" width="50%">Internal error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onForeground</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    applicationContext.<span class="hljs-title function_">getRunningProcessInformation</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`The process running information is: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`error code: <span class="hljs-subst">${error.code}</span>, error msg: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextgetrunningprocessinformation-1" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.getRunningProcessInformation<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextgetrunningprocessinformation-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getRunningProcessInformation(callback: AsyncCallback&lt;Array&lt;ProcessInformation&gt;&gt;): void</p>     <p>获取运行中的进程信息。使用callback异步回调。</p>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-processinformation">ProcessInformation</a>&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，返回有关运行进程的信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000050</td>         <td class="cellrowborder" width="50%">Internal error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onForeground</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    applicationContext.<span class="hljs-title function_">getRunningProcessInformation</span>(<span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getRunningProcessInformation failed, err: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>      } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`The process running information is: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextkillallprocesses" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.killAllProcesses<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextkillallprocesses" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>killAllProcesses(): Promise&lt;void&gt;</p>     <p>终止应用的所有进程，进程退出时不会正常执行完整的应用生命周期流程。使用Promise异步回调。仅支持主线程调用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该接口用于应用异常场景中强制退出应用。如需正常退出应用，可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#terminateself-1">terminateSelf()</a>接口。</p>      </div></div></div>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onBackground</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    applicationContext.<span class="hljs-title function_">killAllProcesses</span>();</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextkillallprocesses14" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.killAllProcesses<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextkillallprocesses14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>killAllProcesses(clearPageStack: boolean): Promise&lt;void&gt;</p>     <p>终止应用的所有进程，进程退出时不会正常执行完整的应用生命周期流程。使用Promise异步回调。仅支持主线程调用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该接口用于应用异常场景中强制退出应用。如需正常退出应用，可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#terminateself-1">terminateSelf()</a>接口。</p>      </div></div></div>     <p><strong>元服务API</strong>：从API version 14开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">clearPageStack</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示是否清除页面堆栈。true表示清除，false表示不清除。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">If the input parameter is not valid parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> isClearPageStack = <span class="hljs-literal">false</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onBackground</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    applicationContext.<span class="hljs-title function_">killAllProcesses</span>(isClearPageStack);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextkillallprocesses-1" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.killAllProcesses<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextkillallprocesses-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>killAllProcesses(callback: AsyncCallback&lt;void&gt;)</p>     <p>终止应用的所有进程，进程退出时不会正常执行完整的应用生命周期流程。使用callback异步回调。仅支持主线程调用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该接口用于应用异常场景中强制退出应用。如需正常退出应用，可以使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-uiabilitycontext#terminateself-1">terminateSelf()</a>接口。</p>      </div></div></div>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数。当终止应用所在的进程成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onBackground</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    applicationContext.<span class="hljs-title function_">killAllProcesses</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`killAllProcesses fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>      }</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextsetcolormode11" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.setColorMode<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextsetcolormode11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setColorMode(colorMode: ConfigurationConstant.ColorMode): void</p>     <p>设置应用的深浅色模式。仅支持主线程调用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>调用该接口前，需要确保窗口已完成创建、且UIAbility对应的页面已完成加载，即在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#onwindowstagecreate">onWindowStageCreate()</a>生命周期中通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-windowstage#loadcontent9">loadContent</a>方法加载页面之后调用。</p>      </div></div></div>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">colorMode</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-configurationconstant#colormode">ConfigurationConstant.ColorMode</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">深浅色模式，包括：深色模式、浅色模式、跟随系统模式（默认）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">ConfigurationConstant</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onWindowStageCreate"</span>);</li><li>    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load the content. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in loading the content. Data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    });</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    applicationContext.<span class="hljs-title function_">setColorMode</span>(<span class="hljs-title class_">ConfigurationConstant</span>.<span class="hljs-property">ColorMode</span>.<span class="hljs-property">COLOR_MODE_DARK</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextsetlanguage11" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.setLanguage<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextsetlanguage11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setLanguage(language: string): void</p>     <p>设置应用的语言。仅支持主线程调用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>调用该接口前，需要确保窗口已完成创建、且UIAbility对应的页面已完成加载，即在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#onwindowstagecreate">onWindowStageCreate()</a>生命周期中通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-windowstage#loadcontent9">loadContent</a>方法加载页面之后调用。</p>      </div></div></div>     <p><strong>元服务API</strong>：从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">language</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设置语言，当前支持的语言列表可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-i18n#getsystemlanguages9">getSystemLanguages()</a>获取。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Ability onWindowStageCreate"</span>);</li><li>    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to load the content. Code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>);</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Succeeded in loading the content. Data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    });</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    applicationContext.<span class="hljs-title function_">setLanguage</span>(<span class="hljs-string">'zh-cn'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextclearupapplicationdata11" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.clearUpApplicationData<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextclearupapplicationdata11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearUpApplicationData(): Promise&lt;void&gt;</p>     <p>清理当前应用的应用文件路径下的所有数据，同时撤销应用向用户申请的权限。使用Promise异步回调。仅支持主线程调用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>应用文件路径详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory#应用文件目录与应用文件路径" target="_blank">应用文件目录信息</a>。图中仅标识了el1~el2目录下的应用文件路径，其他文件加密类型目录下的应用文件路径可以参考el1。</p>       <p>该接口会停止应用进程，应用进程停止后，后续的所有回调都不会再触发。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，无返回结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000050</td>         <td class="cellrowborder" width="50%">Internal error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onBackground</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    applicationContext.<span class="hljs-title function_">clearUpApplicationData</span>();</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextclearupapplicationdata11-1" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.clearUpApplicationData<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextclearupapplicationdata11-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearUpApplicationData(callback: AsyncCallback&lt;void&gt;): void</p>     <p>清理当前应用的应用文件路径下的所有数据，同时撤销应用向用户申请的权限。使用callback异步回调。仅支持主线程调用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>应用文件路径详见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory#应用文件目录与应用文件路径" target="_blank">应用文件目录信息</a>。图中仅标识了el1~el2目录下的应用文件路径，其他文件加密类型目录下的应用文件路径可以参考el1。</p>       <p>该接口会停止应用进程，应用进程停止后，后续的所有回调都不会再触发。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调方法。清理应用本身的数据成功时，error为undefined，否则返回错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000050</td>         <td class="cellrowborder" width="50%">Internal error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onBackground</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    applicationContext.<span class="hljs-title function_">clearUpApplicationData</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`clearUpApplicationData fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>      }</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextrestartapp12" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.restartApp<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextrestartapp12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>restartApp(want: Want): void</p>     <p>应用重启并拉起自身指定UIAbility。仅支持主线程调用，且待重启的应用需要处于获焦状态。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>通过该接口重启应用时，不会触发应用中Ability的onDestroy生命周期回调。</p>       <p>在元服务调用本接口成功后的3秒内，再次调用本接口或<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-abilitymanager#abilitymanagerrestartselfatomicservice20">restartSelfAtomicService()</a>接口，系统将返回错误码16000064。</p>       <p>在应用调用本接口成功后的3秒内，若再次调用本接口系统将返回错误码16000064。</p>      </div></div></div>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">want</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-want">Want</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">Want类型参数，传入需要启动的UIAbility信息，校验abilityName，不校验bundleName。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000050</td>         <td class="cellrowborder" width="50%">Internal error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000053</td>         <td class="cellrowborder" width="50%">The ability is not on the top of the UI.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000063</td>         <td class="cellrowborder" width="50%">The target to restart does not belong to the current application or is not a UIAbility.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000064</td>         <td class="cellrowborder" width="50%">Restart too frequently. Try again at least 3s later.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { common, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'restartApp'</span>;</li><li>  <span class="hljs-keyword">private</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-title function_">getApplicationContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">ApplicationContext</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">RelativeContainer</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'HelloWorld'</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>($r(<span class="hljs-string">'app.float.page_text_font_size'</span>))</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>        .<span class="hljs-title function_">alignRules</span>({</li><li>          <span class="hljs-attr">center</span>: { <span class="hljs-attr">anchor</span>: <span class="hljs-string">'__container__'</span>, <span class="hljs-attr">align</span>: <span class="hljs-title class_">VerticalAlign</span>.<span class="hljs-property">Center</span> },</li><li>          <span class="hljs-attr">middle</span>: { <span class="hljs-attr">anchor</span>: <span class="hljs-string">'__container__'</span>, <span class="hljs-attr">align</span>: <span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span> }</li><li>        })</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> <span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span> = {</li><li>            <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.myapplication'</span>,</li><li>            <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'EntryAbility'</span></li><li>          };</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>) {</li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">restartApp</span>(want);</li><li>            } <span class="hljs-keyword">catch</span> (err) {</li><li>              hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">`restart failed: <span class="hljs-subst">${err.code}</span>, <span class="hljs-subst">${err.message}</span>`</span>);</li><li>            }</li><li>          } <span class="hljs-keyword">else</span> {</li><li>            hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0000</span>, <span class="hljs-string">'testTag'</span>, <span class="hljs-string">"%{public}s"</span>, <span class="hljs-string">'AppContext is null'</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextgetcurrentappcloneindex12" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.getCurrentAppCloneIndex<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextgetcurrentappcloneindex12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCurrentAppCloneIndex(): number</p>     <p>获取当前应用的分身索引。</p>     <p><strong>元服务API</strong>：从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">当前应用的分身索引。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000071</td>         <td class="cellrowborder" width="50%">App clone is not supported.</td>        </tr>             </tbody></table></div>     </div>     <p>以上错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onBackground</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> appCloneIndex = applicationContext.<span class="hljs-title function_">getCurrentAppCloneIndex</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getCurrentAppCloneIndex fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextsetfont12" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.setFont<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextsetfont12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setFont(font: string): void</p>     <p>设置应用的字体类型。仅支持主线程调用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>调用该接口前，需要确保窗口已完成创建、且UIAbility对应的页面已完成加载，即在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-uiability#onwindowstagecreate">onWindowStageCreate()</a>生命周期中通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-window-windowstage#loadcontent9">loadContent</a>方法加载页面之后调用。</p>      </div></div></div>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">font</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设置字体类型，字体可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-font#registerfont">UIContext.registerFont</a>方法进行注册使用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000050</td>         <td class="cellrowborder" width="50%">Internal error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Hello World'</span>;</li><li>  context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getFont</span>().<span class="hljs-title function_">registerFont</span>({</li><li>      <span class="hljs-attr">familyName</span>: <span class="hljs-string">'fontName'</span>,</li><li>      <span class="hljs-attr">familySrc</span>: $rawfile(<span class="hljs-string">'font/medium.ttf'</span>)  <span class="hljs-comment">// 'font/medium.ttf'仅作为示例，实际使用时请替换为真实的字体资源文件。</span></li><li>    });</li><li>
</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-title function_">setFont</span>(<span class="hljs-string">'fontName'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-number">50</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextsetsupportedprocesscache12" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.setSupportedProcessCache<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextsetsupportedprocesscache12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSupportedProcessCache(isSupported : boolean): void</p>     <p>设置当前应用进程是否支持进程资源的缓存，便于应用再次启动时复用缓存的进程资源。仅支持主线程调用。</p>     <p>该接口仅对单个进程实例生效，不同进程实例互不影响。应用进程实例销毁后，已设置的状态不保留，需要重新设置。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>该接口仅表示应用自身是否为缓存后快速启动做好了准备，还需综合其他条件来判断最终是否为应用启用快速启动。</li>        <li>为了确保该接口在进程退出前生效，调用时机应尽量提前。建议在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-abilitystage">AbilityStage</a>的onCreate()中调用该接口。</li>        <li>在同一进程多次调用该接口时，会以最后一次调用的结果为准。当存在多个AbilityStage时，为了确保结果符合预期，需要在各个AbilityStage中分别调用该接口并配置相同的取值。</li>       </ul>      </div></div></div>     <p><strong>模型约束</strong>：此接口仅可在Stage模型下使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>设备行为差异</strong>：该接口仅在Phone和2in1设备中可正常调用，在其他设备中返回801错误码。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">isSupported</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示应用是否支持进程资源的缓存。true表示支持，false表示不支持。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-ability">元能力子系统错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000050</td>         <td class="cellrowborder" width="50%">Internal error.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityStage</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbilityStage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">AbilityStage</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      applicationContext.<span class="hljs-title function_">setSupportedProcessCache</span>(<span class="hljs-literal">true</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>      <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`setSupportedProcessCache fail, code: <span class="hljs-subst">${code}</span>, msg: <span class="hljs-subst">${message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextsetfontsizescale13" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.setFontSizeScale<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextsetfontsizescale13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setFontSizeScale(fontSizeScale: number): void</p>     <p>设置应用字体大小缩放比例。仅支持主线程调用。</p>     <p><strong>元服务API</strong>：从API version 13开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">fontSizeScale</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示字体缩放比例，取值为非负数。当应用字体<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file#configuration标签" target="_blank">跟随系统</a>且该字段取值超过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file#configuration标签" target="_blank">fontSizeMaxScale</a>取值时，实际生效值为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-configuration-file#configuration标签" target="_blank">fontSizeMaxScale</a>取值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>      <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>      applicationContext.<span class="hljs-title function_">setFontSizeScale</span>(<span class="hljs-number">2</span>);</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextgetcurrentinstancekey14" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.getCurrentInstanceKey<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextgetcurrentinstancekey14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCurrentInstanceKey(): string</p>     <p>获取当前应用多实例的唯一实例标识。仅支持主线程调用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>设备行为差异</strong>：该接口仅在2in1设备中可正常调用，在其他设备中返回16000078错误码。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">返回当前应用多实例的唯一实例标识。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000078</td>         <td class="cellrowborder" width="50%">The multi-instance is not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityStage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbilityStage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">AbilityStage</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    <span class="hljs-keyword">let</span> currentInstanceKey = <span class="hljs-string">''</span>;</li><li>    <span class="hljs-keyword">try</span> {</li><li>      currentInstanceKey = applicationContext.<span class="hljs-title function_">getCurrentInstanceKey</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>      <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getCurrentInstanceKey fail, code: <span class="hljs-subst">${code}</span>, msg: <span class="hljs-subst">${message}</span>`</span>);</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`currentInstanceKey: <span class="hljs-subst">${currentInstanceKey}</span>`</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="applicationcontextgetallrunninginstancekeys14" device-type="phone,2in1,tablet,wearable,tv">ApplicationContext.getAllRunningInstanceKeys<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="applicationcontextgetallrunninginstancekeys14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAllRunningInstanceKeys(): Promise&lt;Array&lt;string&gt;&gt;;</p>     <p>获取应用的所有多实例的唯一实例标识。使用Promise异步回调。仅支持主线程调用。</p>     <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;string&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回应用的所有多实例的唯一实例标识。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码</strong>：</p>     <p>以下错误码详细介绍请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">16000011</td>         <td class="cellrowborder" width="50%">The context does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000050</td>         <td class="cellrowborder" width="50%">Internal error.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">16000078</td>         <td class="cellrowborder" width="50%">The multi-instance is not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-nvo-c106="" class="highlight-div"><div _ngcontent-nvo-c106="" class="highlight-div-header"><div _ngcontent-nvo-c106="" class="highlight-div-header-left"><div _ngcontent-nvo-c106="" class="handle-button expand-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-nvo-c106="" class="highlight-div-header-right"><div _ngcontent-nvo-c106="" class="handle-button ai-button"></div><div _ngcontent-nvo-c106="" class="handle-button line-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-nvo-c106="" class="handle-button theme-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-nvo-c106="" class="handle-button copy-button"><div _ngcontent-nvo-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-nvo-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityStage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAbilityStage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">AbilityStage</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> applicationContext = <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">getApplicationContext</span>();</li><li>    <span class="hljs-keyword">try</span> {</li><li>      applicationContext.<span class="hljs-title function_">getAllRunningInstanceKeys</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>      <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getAllRunningInstanceKeys fail, code: <span class="hljs-subst">${code}</span>, msg: <span class="hljs-subst">${message}</span>`</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>