<h1 _ngcontent-ohf-c119="" class="doc-title ng-star-inserted" title="Class (UIObserver)"> Class (UIObserver) </h1>

<div _ngcontent-ohf-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;"> <div><p>提供UI组件行为变化的无感监听能力。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <ul><li><p>本模块首批接口从API version 10开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>  </li><li><p>本Class首批接口从API version 11开始支持。</p>  </li><li><p>以下API需先使用UIContext中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext#getuiobserver11">getUIObserver()</a>方法获取到UIObserver对象，再通过该对象调用对应方法。</p>  </li><li><p>UIObserver仅能监听到本进程内的相关信息，不支持获取跨进程场景的信息。</p>  </li></ul>  </div></div></div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 1955px;"><h2 id="onnavdestinationupdate11" device-type="phone,2in1,tablet,wearable,tv">on('navDestinationUpdate')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnavdestinationupdate11" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'navDestinationUpdate', callback: Callback&lt;observer.NavDestinationInfo&gt;): void</p> <p>监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件的状态变化。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.3.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.3.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.3.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'navDestinationUpdate'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件的状态变化。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationinfo">NavDestinationInfo</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回当前的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件状态。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示uiObserver.on('navDestinationUpdate', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('navDestinationUpdate', callback)</span></li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PageOne</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"pageOne"</span>)</li><li>    }.<span class="hljs-title function_">title</span>(<span class="hljs-string">"pageOne"</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">stack</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">PageBuilder</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>) {</li><li>    <span class="hljs-title class_">PageOne</span>()</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 添加监听</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">on</span>(<span class="hljs-string">'navDestinationUpdate'</span>, <span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'NavDestination state update'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(info));</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 取消监听，不选择回调时，取消所有监听的回调</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">off</span>(<span class="hljs-string">'navDestinationUpdate'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Navigation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>) {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"push"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 将PageOne的NavDestination入栈</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">pushPath</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"pageOne"</span> });</li><li>        })</li><li>      }</li><li>      .<span class="hljs-title function_">title</span>(<span class="hljs-string">"Navigation"</span>)</li><li>      .<span class="hljs-title function_">navDestination</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">PageBuilder</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 738px;"><h2 id="offnavdestinationupdate11" device-type="phone,2in1,tablet,wearable,tv">off('navDestinationUpdate')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offnavdestinationupdate11" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'navDestinationUpdate', callback?: Callback&lt;observer.NavDestinationInfo&gt;): void</p> <p>取消监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件的状态变化。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'navDestinationUpdate'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件的状态变化。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationinfo">NavDestinationInfo</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要取消的监听回调，不传参数时，取消所有的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onnavdestinationupdate11">on('navDestinationUpdate')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 2072px;"><h2 id="onnavdestinationupdate11-1" device-type="phone,2in1,tablet,wearable,tv">on('navDestinationUpdate')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnavdestinationupdate11-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'navDestinationUpdate', options: { navigationId: ResourceStr }, callback: Callback&lt;observer.NavDestinationInfo&gt;): void</p> <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的id监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件的状态变化。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'navDestinationUpdate'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件的状态变化。</td> </tr> <tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%">{ navigationId: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcestr">ResourceStr</a> }</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">指定监听的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的id。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationinfo">NavDestinationInfo</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回当前的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件状态。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示uiObserver.on('navDestinationUpdate', options, callback)</span></li><li><span class="hljs-comment">// uiObserver.off('navDestinationUpdate', options, callback)</span></li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PageOne</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"pageOne"</span>)</li><li>    }.<span class="hljs-title function_">title</span>(<span class="hljs-string">"pageOne"</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">stack</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">PageBuilder</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>) {</li><li>    <span class="hljs-title class_">PageOne</span>()</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 添加监听，指定Navigation的id</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">on</span>(<span class="hljs-string">'navDestinationUpdate'</span>, { <span class="hljs-attr">navigationId</span>: <span class="hljs-string">"testId"</span> }, <span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'NavDestination state update'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(info));</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 取消监听，不选择回调时，取消所有监听的回调</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">off</span>(<span class="hljs-string">'navDestinationUpdate'</span>, { <span class="hljs-attr">navigationId</span>: <span class="hljs-string">"testId"</span> });</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Navigation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>) {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"push"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 将PageOne的NavDestination入栈</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">pushPath</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"pageOne"</span> });</li><li>        })</li><li>      }</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">"testId"</span>)</li><li>      .<span class="hljs-title function_">title</span>(<span class="hljs-string">"Navigation"</span>)</li><li>      .<span class="hljs-title function_">navDestination</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">PageBuilder</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 831px;"><h2 id="offnavdestinationupdate11-1" device-type="phone,2in1,tablet,wearable,tv">off('navDestinationUpdate')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offnavdestinationupdate11-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'navDestinationUpdate', options: { navigationId: ResourceStr }, callback?: Callback&lt;observer.NavDestinationInfo&gt;): void</p> <p>取消通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的id监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件的状态变化。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'navDestinationUpdate'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件的状态变化。</td> </tr> <tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%">{ navigationId: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcestr">ResourceStr</a> }</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">指定监听的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的id。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationinfo">NavDestinationInfo</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要取消的监听回调，不传参数时，取消该<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>上所有的监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onnavdestinationupdate11-1">on('navDestinationUpdate')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 2432px;"><h2 id="onnavdestinationupdatebyuniqueid20" device-type="phone,2in1,tablet,wearable,tv">on('navDestinationUpdateByUniqueId')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnavdestinationupdatebyuniqueid20" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'navDestinationUpdateByUniqueId', navigationUniqueId: number, callback: Callback&lt;observer.NavDestinationInfo&gt;): void</p> <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的uniqueId监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件的状态变化，uniqueId可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-api#querynavigationinfo12">queryNavigationInfo</a>获取。</p> <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'navDestinationUpdateByUniqueId'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件的状态变化。</td> </tr> <tr><td class="cellrowborder" width="25%">navigationUniqueId</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">指定监听的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的uniqueId，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-api#querynavigationinfo12">queryNavigationInfo</a>获取。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationinfo">NavDestinationInfo</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回当前的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件状态。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的uniqueId，可以触发<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件的状态变化。</p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示on('navDestinationUpdateByUniqueId', navigationUniqueId, callback)</span></li><li><span class="hljs-comment">// off('navDestinationUpdateByUniqueId', navigationUniqueId, callback)</span></li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PageOne</span> {</li><li>  <span class="hljs-keyword">private</span> text = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> uniqueid = -<span class="hljs-number">1</span>;</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 获取Navigation的uniqueId</span></li><li>    <span class="hljs-keyword">let</span> navigationUniqueId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">queryNavigationInfo</span>()?.<span class="hljs-property">uniqueId</span>;</li><li>    <span class="hljs-keyword">if</span> (navigationUniqueId) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">uniqueid</span> = navigationUniqueId.<span class="hljs-title function_">valueOf</span>();</li><li>    }</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">uniqueid</span>);</li><li>    <span class="hljs-comment">// 添加监听，指定Navigation的uniqueId</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">on</span>(<span class="hljs-string">'navDestinationUpdateByUniqueId'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">uniqueid</span>, <span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'NavDestination state update navigationId'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(info));</li><li>    });</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 取消监听，不选择回调时，取消所有监听的回调</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">off</span>(<span class="hljs-string">'navDestinationUpdateByUniqueId'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">uniqueid</span>);</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"pageOne"</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'navigationUniqueId是:'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span>)</li><li>        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">50</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>    }.<span class="hljs-title function_">title</span>(<span class="hljs-string">"pageOne"</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">stack</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">PageBuilder</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>) {</li><li>    <span class="hljs-title class_">PageOne</span>()</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Navigation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>) {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"push"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 将PageOne的NavDestination入栈</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">pushPath</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"pageOne"</span> });</li><li>        })</li><li>      }</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">"testId"</span>)</li><li>      .<span class="hljs-title function_">title</span>(<span class="hljs-string">"Navigation"</span>)</li><li>      .<span class="hljs-title function_">navDestination</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">PageBuilder</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 879px;"><h2 id="offnavdestinationupdatebyuniqueid20" device-type="phone,2in1,tablet,wearable,tv">off('navDestinationUpdateByUniqueId')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offnavdestinationupdatebyuniqueid20" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'navDestinationUpdateByUniqueId', navigationUniqueId: number, callback?: Callback&lt;observer.NavDestinationInfo&gt;): void</p> <p>取消通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的uniqueId监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件的变化。</p> <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'navDestinationUpdateByUniqueId'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navdestination">NavDestination</a>组件的状态变化。</td> </tr> <tr><td class="cellrowborder" width="25%">navigationUniqueId</td> <td class="cellrowborder" width="25%">number</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">指定监听的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的uniqueId，可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-api#querynavigationinfo12">queryNavigationInfo</a>获取。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationinfo">NavDestinationInfo</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要取消的监听回调，不传参数时，取消该<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>上所有的监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onnavdestinationupdatebyuniqueid20">on('navDestinationUpdateByUniqueId')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 2411px;"><h2 id="onscrollevent12" device-type="phone,2in1,tablet,wearable,tv">on('scrollEvent')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onscrollevent12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'scrollEvent', callback: Callback&lt;observer.ScrollEventInfo&gt;): void</p> <p>监听所有滚动组件滚动事件的开始和结束。滚动组件包括<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list">List</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-grid">Grid</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll">Scroll</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-waterflow">WaterFlow</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-arclist">ArcList</a>。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'scrollEvent'，即滚动事件的开始和结束。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#scrolleventinfo12">ScrollEventInfo</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回滚动事件的信息。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示uiObserver.on('scrollEvent', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('scrollEvent', callback)</span></li><li><span class="hljs-comment">// uiObserver.on('scrollEvent', options, callback)</span></li><li><span class="hljs-comment">// uiObserver.off('scrollEvent', options, callback)</span></li><li>
</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIObserver</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">scroller</span>: <span class="hljs-title class_">Scroller</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scroller</span>();</li><li>  <span class="hljs-attr">observer</span>: <span class="hljs-title class_">UIObserver</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">arr</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>];</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Scroll</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scroller</span>) {</li><li>          <span class="hljs-title class_">Column</span>() {</li><li>            <span class="hljs-title class_">ForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">arr</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>              <span class="hljs-title class_">Text</span>(item.<span class="hljs-title function_">toString</span>())</li><li>                .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>                .<span class="hljs-title function_">height</span>(<span class="hljs-number">150</span>)</li><li>                .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-number">0xFFFFFF</span>)</li><li>                .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">15</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>                .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)</li><li>                .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span> })</li><li>            }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>          }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>        }</li><li>        .<span class="hljs-title function_">id</span>(<span class="hljs-string">'testId'</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'80%'</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>
</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'UIObserver on'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-comment">// 添加监听</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">observer</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'scrollEvent'</span>, <span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'scrollEventInfo'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(info));</li><li>            });</li><li>          })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'UIObserver off'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-comment">// 取消监听，不选择回调时，取消所有监听的回调</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">observer</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'scrollEvent'</span>);</li><li>          })</li><li>      }</li><li>
</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'UIObserverWithId on'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-comment">// 添加监听，指定滚动组件的id</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">observer</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'scrollEvent'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">'testId'</span> }, <span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'scrollEventInfo'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(info));</li><li>            });</li><li>          })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'UIObserverWithId off'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-comment">// 取消监听，不选择回调时，取消所有监听的回调</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">observer</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'scrollEvent'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">'testId'</span> });</li><li>          })</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 714px;"><h2 id="offscrollevent12" device-type="phone,2in1,tablet,wearable,tv">off('scrollEvent')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offscrollevent12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'scrollEvent', callback?: Callback&lt;observer.ScrollEventInfo&gt;): void</p> <p>取消监听所有滚动组件滚动事件的开始和结束。滚动组件包括<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list">List</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-grid">Grid</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll">Scroll</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-waterflow">WaterFlow</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-arclist">ArcList</a>。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'scrollEvent'，即滚动事件的开始和结束。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#scrolleventinfo12">ScrollEventInfo</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">回调函数。返回滚动事件的信息。不传参数时，取消所有滚动事件的监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onscrollevent12">on('scrollEvent')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 759px;"><h2 id="onscrollevent12-1" device-type="phone,2in1,tablet,wearable,tv">on('scrollEvent')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onscrollevent12-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'scrollEvent', options: observer.ObserverOptions, callback: Callback&lt;observer.ScrollEventInfo&gt;): void</p> <p>监听指定id的滚动组件滚动事件的开始和结束。滚动组件包括<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list">List</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-grid">Grid</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll">Scroll</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-waterflow">WaterFlow</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-arclist">ArcList</a>。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'scrollEvent'，即滚动事件的开始和结束。</td> </tr> <tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#observeroptions12">observer.ObserverOptions</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">Observer选项，包含指定监听的滚动组件的id。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#scrolleventinfo12">ScrollEventInfo</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。返回滚动事件的信息。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onscrollevent12">on('scrollEvent')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 783px;"><h2 id="offscrollevent12-1" device-type="phone,2in1,tablet,wearable,tv">off('scrollEvent')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offscrollevent12-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'scrollEvent', options: observer.ObserverOptions, callback?: Callback&lt;observer.ScrollEventInfo&gt;): void</p> <p>取消监听指定id的滚动组件滚动事件的开始和结束。滚动组件包括<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-list">List</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-grid">Grid</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-scroll">Scroll</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-waterflow">WaterFlow</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-arclist">ArcList</a>。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'scrollEvent'，即滚动事件的开始和结束。</td> </tr> <tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#observeroptions12">observer.ObserverOptions</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">Observer选项，包含指定监听的滚动组件的id。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#scrolleventinfo12">ScrollEventInfo</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">回调函数。返回滚动事件的信息。不传参数时，取消所有滚动事件的监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onscrollevent12">on('scrollEvent')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1847px;"><h2 id="onrouterpageupdate11" device-type="phone,2in1,tablet,wearable,tv">on('routerPageUpdate')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onrouterpageupdate11" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'routerPageUpdate', callback: Callback&lt;observer.RouterPageInfo&gt;): void</p> <p>监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-router">Router</a>中page页面的状态变化。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'routerPageUpdate'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-router">Router</a>中page页面的状态变化。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#routerpageinfo">RouterPageInfo</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。携带<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#routerpageinfo">RouterPageInfo</a>对象，返回当前的page页面状态。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// PageOne.ets</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PageOne</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"pageOne"</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示uiObserver.on('routerPageUpdate', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('routerPageUpdate', callback)</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 添加监听</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">on</span>(<span class="hljs-string">'routerPageUpdate'</span>, <span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'router page update'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(info));</li><li>    });</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 取消监听，不选择回调时，取消所有监听的回调</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">off</span>(<span class="hljs-string">'routerPageUpdate'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"pushUrl"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-comment">// router跳转到PageOne.ets页面</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getRouter</span>().<span class="hljs-title function_">pushUrl</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/PageOne'</span> })</li><li>      })</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 762px;"><h2 id="offrouterpageupdate11" device-type="phone,2in1,tablet,wearable,tv">off('routerPageUpdate')<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offrouterpageupdate11" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'routerPageUpdate', callback?: Callback&lt;observer.RouterPageInfo&gt;): void</p> <p>取消监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-router">Router</a>中page页面的状态变化。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'routerPageUpdate'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-router">Router</a>中page页面的状态变化。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#routerpageinfo">RouterPageInfo</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消所有<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-router">Router</a>中page页面状态变化的监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onrouterpageupdate11">on('routerPageUpdate')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1691px;"><h2 id="ondensityupdate12" device-type="phone,2in1,tablet,wearable,tv">on('densityUpdate')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondensityupdate12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'densityUpdate', callback: Callback&lt;observer.DensityInfo&gt;): void</p> <p>监听屏幕像素密度变化。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'densityUpdate'，即屏幕像素密度变化。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#densityinfo12">DensityInfo</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。携带<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#densityinfo12">DensityInfo</a>，返回变化后的屏幕像素密度。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示uiObserver.on('densityUpdate', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('densityUpdate', callback)</span></li><li>
</li><li><span class="hljs-keyword">import</span> { uiObserver } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">density</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'未注册监听'</span>;</li><li>
</li><li>  <span class="hljs-comment">// 定义监听回调函数</span></li><li>  densityUpdateCallback = <span class="hljs-function">(<span class="hljs-params">info: uiObserver.DensityInfo</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">density</span> = info.<span class="hljs-property">density</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'变化后的DPI：'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">density</span>.<span class="hljs-title function_">toString</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'注册屏幕像素密度变化监听'</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'已注册监听'</span>;</li><li>          <span class="hljs-comment">// 添加监听</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">on</span>(<span class="hljs-string">'densityUpdate'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">densityUpdateCallback</span>);</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'解除注册屏幕像素密度变化监听'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'未注册监听'</span>;</li><li>          <span class="hljs-comment">// 取消监听</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">off</span>(<span class="hljs-string">'densityUpdate'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">densityUpdateCallback</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 738px;"><h2 id="offdensityupdate12" device-type="phone,2in1,tablet,wearable,tv">off('densityUpdate')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdensityupdate12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'densityUpdate', callback?: Callback&lt;observer.DensityInfo&gt;): void</p> <p>取消监听屏幕像素密度的变化。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'densityUpdate'，即屏幕像素密度变化。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#densityinfo12">DensityInfo</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。若不指定具体的回调函数，则注销该<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext">UIContext</a>下所有屏幕像素密度变化事件监听。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#ondensityupdate12">on('densityUpdate')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1379px;"><h2 id="onwilldraw12" device-type="phone,2in1,tablet,wearable,tv">on('willDraw')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onwilldraw12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'willDraw', callback: Callback&lt;void&gt;): void</p> <p>监听每一帧绘制指令下发情况。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'willDraw'，即是否将要绘制。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示uiObserver.on('willDraw', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('willDraw', callback)</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-comment">// 定义监听回调函数</span></li><li>  willDrawCallback = <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"willDraw指令下发"</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'注册绘制指令下发监听'</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 添加监听</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">on</span>(<span class="hljs-string">'willDraw'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">willDrawCallback</span>);</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'解除注册绘制指令下发监听'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 取消监听</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">off</span>(<span class="hljs-string">'willDraw'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">willDrawCallback</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 714px;"><h2 id="offwilldraw12" device-type="phone,2in1,tablet,wearable,tv">off('willDraw')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offwilldraw12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'willDraw', callback?: Callback&lt;void&gt;): void</p> <p>取消监听每一帧绘制指令下发情况。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'willDraw'，即是否将要绘制。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消所有绘制指令下发事件的监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onwilldraw12">on('willDraw')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 1379px;"><h2 id="ondidlayout12" device-type="phone,2in1,tablet,wearable,tv">on('didLayout')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondidlayout12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'didLayout', callback: Callback&lt;void&gt;): void</p> <p>监听每一帧布局完成情况。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'didLayout'，即是否布局完成。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示uiObserver.on('didLayout', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('didLayout', callback)</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-comment">// 定义监听回调函数</span></li><li>  didLayoutCallback = <span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"layout布局完成"</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'注册布局完成监听'</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 添加监听</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">on</span>(<span class="hljs-string">'didLayout'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">didLayoutCallback</span>);</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'解除注册注册布局完成监听'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 取消监听</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>().<span class="hljs-title function_">off</span>(<span class="hljs-string">'didLayout'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">didLayoutCallback</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 714px;"><h2 id="offdidlayout12" device-type="phone,2in1,tablet,wearable,tv">off('didLayout')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdidlayout12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'didLayout', callback?: Callback&lt;void&gt;): void</p> <p>取消监听每一帧布局完成情况。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'didLayout'，即是否布局完成。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;void&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消所有布局完成的监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#ondidlayout12">on('didLayout')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 2171px;"><h2 id="onnavdestinationswitch12" device-type="phone,2in1,tablet,wearable,tv">on('navDestinationSwitch')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnavdestinationswitch12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'navDestinationSwitch', callback: Callback&lt;observer.NavDestinationSwitchInfo&gt;): void</p> <p>监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的页面切换事件。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'navDestinationSwitch'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的页面切换事件。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationswitchinfo12">NavDestinationSwitchInfo</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。携带<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationswitchinfo12">NavDestinationSwitchInfo</a>，返回页面切换事件的信息。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示UIObserver.on('navDestinationSwitch', callback)</span></li><li><span class="hljs-comment">// UIObserver.off('navDestinationSwitch', callback)</span></li><li>
</li><li><span class="hljs-keyword">import</span> { uiObserver } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PageOne</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"pageOne"</span>)</li><li>    }.<span class="hljs-title function_">title</span>(<span class="hljs-string">"pageOne"</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 定义监听回调函数</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">callbackFunc</span>(<span class="hljs-params">info: uiObserver.NavDestinationSwitchInfo</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`testTag navDestinationSwitch from: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(info.<span class="hljs-keyword">from</span>)}</span> to: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(info.to)}</span>`</span>);</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">stack</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">PageBuilder</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>) {</li><li>    <span class="hljs-title class_">PageOne</span>()</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> obs = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>    <span class="hljs-comment">// 添加监听</span></li><li>    obs.<span class="hljs-title function_">on</span>(<span class="hljs-string">'navDestinationSwitch'</span>, callbackFunc);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> obs = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>    <span class="hljs-comment">// 取消监听</span></li><li>    obs.<span class="hljs-title function_">off</span>(<span class="hljs-string">'navDestinationSwitch'</span>, callbackFunc);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Navigation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>) {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"push"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 将PageOne的NavDestination入栈</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">pushPath</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"pageOne"</span> });</li><li>        })</li><li>      }</li><li>      .<span class="hljs-title function_">title</span>(<span class="hljs-string">"Navigation"</span>)</li><li>      .<span class="hljs-title function_">navDestination</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">PageBuilder</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 762px;"><h2 id="offnavdestinationswitch12" device-type="phone,2in1,tablet,wearable,tv">off('navDestinationSwitch')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offnavdestinationswitch12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'navDestinationSwitch', callback?: Callback&lt;observer.NavDestinationSwitchInfo&gt;): void</p> <p>取消监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的页面切换事件。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'navDestinationSwitch'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的页面切换事件。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationswitchinfo12">NavDestinationSwitchInfo</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消该<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>上所有的监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onnavdestinationswitch12">on('navDestinationSwitch')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 2288px;"><h2 id="onnavdestinationswitch12-1" device-type="phone,2in1,tablet,wearable,tv">on('navDestinationSwitch')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnavdestinationswitch12-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'navDestinationSwitch', observerOptions: observer.NavDestinationSwitchObserverOptions, callback: Callback&lt;observer.NavDestinationSwitchInfo&gt;): void</p> <p>通过监听选项监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的页面切换事件。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'navDestinationSwitch'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的页面切换事件。</td> </tr> <tr><td class="cellrowborder" width="25%">observerOptions</td> <td class="cellrowborder" width="25%">observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationswitchobserveroptions12">NavDestinationSwitchObserverOptions</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听选项。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationswitchinfo12">NavDestinationSwitchInfo</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。携带<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationswitchinfo12">NavDestinationSwitchInfo</a>，返回页面切换事件的信息。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示UIObserver.on('navDestinationSwitch', observerOptions, callback)</span></li><li><span class="hljs-comment">// UIObserver.off('navDestinationSwitch', observerOptions, callback)</span></li><li>
</li><li><span class="hljs-keyword">import</span> { uiObserver } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PageOne</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">"pageOne"</span>)</li><li>    }.<span class="hljs-title function_">title</span>(<span class="hljs-string">"pageOne"</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 定义监听回调函数</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">callbackFunc</span>(<span class="hljs-params">info: uiObserver.NavDestinationSwitchInfo</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`testTag navDestinationSwitch from: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(info.<span class="hljs-keyword">from</span>)}</span> to: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(info.to)}</span>`</span>);</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">stack</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">PageBuilder</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>) {</li><li>    <span class="hljs-title class_">PageOne</span>()</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> obs = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>    <span class="hljs-comment">// 添加监听，指定Navigation的id</span></li><li>    obs.<span class="hljs-title function_">on</span>(<span class="hljs-string">'navDestinationSwitch'</span>, { <span class="hljs-attr">navigationId</span>: <span class="hljs-string">"myNavId"</span> }, callbackFunc);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> obs = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>    <span class="hljs-comment">// 取消监听</span></li><li>    obs.<span class="hljs-title function_">off</span>(<span class="hljs-string">'navDestinationSwitch'</span>, { <span class="hljs-attr">navigationId</span>: <span class="hljs-string">"myNavId"</span> }, callbackFunc);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Navigation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>) {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"push"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 将PageOne的NavDestination入栈</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">pushPath</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"pageOne"</span> });</li><li>        })</li><li>      }</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">"myNavId"</span>)</li><li>      .<span class="hljs-title function_">title</span>(<span class="hljs-string">"Navigation"</span>)</li><li>      .<span class="hljs-title function_">navDestination</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">PageBuilder</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 855px;"><h2 id="offnavdestinationswitch12-1" device-type="phone,2in1,tablet,wearable,tv">off('navDestinationSwitch')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offnavdestinationswitch12-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'navDestinationSwitch', observerOptions: observer.NavDestinationSwitchObserverOptions, callback?: Callback&lt;observer.NavDestinationSwitchInfo&gt;): void</p> <p>取消通过监听选项监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的页面切换事件。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'navDestinationSwitch'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>的页面切换事件。</td> </tr> <tr><td class="cellrowborder" width="25%">observerOptions</td> <td class="cellrowborder" width="25%">observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationswitchobserveroptions12">NavDestinationSwitchObserverOptions</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听选项。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#navdestinationswitchinfo12">NavDestinationSwitchInfo</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消该<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-navigation">Navigation</a>上所有的监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onnavdestinationswitch12-1">on('navDestinationSwitch')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 2819px;"><h2 id="onwillclick12" device-type="phone,2in1,tablet,wearable,tv">on('willClick')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onwillclick12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'willClick', callback: GestureEventListenerCallback): void</p> <p>监听点击事件指令下发情况，所注册回调将于点击事件触发前触发。回调类型为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#gestureeventlistenercallback12">GestureEventListenerCallback</a>。从API version 20开始支持屏幕朗读触控模式。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'willClick'，用于监听点击事件指令下发情况，所注册回调将于点击事件触发前触发。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#gestureeventlistenercallback12">GestureEventListenerCallback</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。可以获得点击事件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-common#gestureevent对象说明">GestureEvent</a>和组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode">FrameNode</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示uiObserver.on('willClick', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('willClick', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('didClick', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('didClick', callback)</span></li><li>
</li><li><span class="hljs-comment">// 定义监听回调函数</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">willClickGestureCallback</span>(<span class="hljs-params">event: GestureEvent, node?: FrameNode</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Example willClickCallback GestureEvent is called'</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">willClickCallback</span>(<span class="hljs-params">event: ClickEvent, node?: FrameNode</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Example willClickCallback ClickEvent is called'</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">didClickGestureCallback</span>(<span class="hljs-params">event: GestureEvent, node?: FrameNode</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Example didClickCallback GestureEvent is called'</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">didClickCallback</span>(<span class="hljs-params">event: ClickEvent, node?: FrameNode</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Example didClickCallback ClickEvent is called'</span>);</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ClickExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">clickCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">tapGestureCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 添加监听</span></li><li>    <span class="hljs-keyword">let</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>    observer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'willClick'</span>, willClickGestureCallback);</li><li>    observer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'willClick'</span>, willClickCallback);</li><li>    observer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'didClick'</span>, didClickGestureCallback);</li><li>    observer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'didClick'</span>, didClickCallback);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 取消监听</span></li><li>    <span class="hljs-keyword">let</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>    observer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'willClick'</span>, willClickGestureCallback);</li><li>    observer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'willClick'</span>, willClickCallback);</li><li>    <span class="hljs-comment">// 如果不选择回调，则会取消所有监听的回调</span></li><li>    observer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'didClick'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">/**</span></li><li><span class="hljs-comment">       * onClick和TapGesture在后端的处理是一致的</span></li><li><span class="hljs-comment">       * 所以无论是触发onClick还是触发TapGesture</span></li><li><span class="hljs-comment">       * on('willClick')两种类型入参的回调（GestureEvent和ClickEvent）都会被触发</span></li><li><span class="hljs-comment">       * 同理，on('didClick')的两种回调也会被触发</span></li><li><span class="hljs-comment">       */</span></li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Click Count: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">clickCount</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>      .<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">3</span> })</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">50</span>)</li><li>      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">(<span class="hljs-params">event: ClickEvent</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">clickCount</span>++;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Example Click event is called'</span>);</li><li>      })</li><li>
</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'TapGesture Count: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">tapGestureCount</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>      .<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">3</span> })</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">50</span>)</li><li>      .<span class="hljs-title function_">gesture</span>(<span class="hljs-title class_">TapGesture</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">2</span> }).<span class="hljs-title function_">onAction</span>(<span class="hljs-function">(<span class="hljs-params">event: TapGestureEvent</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tapGestureCount</span>++;</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Example Click event is called'</span>);</li><li>      }))</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 714px;"><h2 id="offwillclick12" device-type="phone,2in1,tablet,wearable,tv">off('willClick')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offwillclick12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'willClick', callback?: GestureEventListenerCallback): void</p> <p>取消监听<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onwillclick12">on('willClick')</a>中的点击事件指令下发情况。从API version 20开始，支持屏幕朗读触控模式。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'willClick'，即点击事件指令下发情况。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#gestureeventlistenercallback12">GestureEventListenerCallback</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消所有的点击事件指令下发监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onwillclick12">on('willClick')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 786px;"><h2 id="ondidclick12" device-type="phone,2in1,tablet,wearable,tv">on('didClick')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondidclick12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'didClick', callback: GestureEventListenerCallback): void</p> <p>监听点击事件指令下发情况，所注册回调将于点击事件触发后触发。回调类型为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#gestureeventlistenercallback12">GestureEventListenerCallback</a>。从API version 20开始支持屏幕朗读触控模式。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'didClick'，用于监听点击事件指令下发情况，所注册回调将于点击事件触发后触发。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#gestureeventlistenercallback12">GestureEventListenerCallback</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。可以获得点击事件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-common#gestureevent对象说明">GestureEvent</a>和组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode">FrameNode</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onwillclick12">on('willClick')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 714px;"><h2 id="offdidclick12" device-type="phone,2in1,tablet,wearable,tv">off('didClick')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdidclick12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'didClick', callback?: GestureEventListenerCallback): void</p> <p>取消监听<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#ondidclick12">on('didClick')</a>中的点击事件指令下发情况。从API version 20开始，支持屏幕朗读触控模式。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'didClick'，即点击事件指令下发情况。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#gestureeventlistenercallback12">GestureEventListenerCallback</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消所有的点击事件指令下发监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onwillclick12">on('willClick')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 786px;"><h2 id="onwillclick12-1" device-type="phone,2in1,tablet,wearable,tv">on('willClick')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onwillclick12-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'willClick', callback: ClickEventListenerCallback): void</p> <p>监听点击事件指令下发情况，所注册回调将于点击事件触发前触发。回调类型为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#clickeventlistenercallback12">ClickEventListenerCallback</a>。从API version 20开始支持屏幕朗读触控模式。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'willClick'，用于监听点击事件指令下发情况，所注册回调将于点击事件触发前触发。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#clickeventlistenercallback12">ClickEventListenerCallback</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。可以获得点击事件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-click#clickevent">ClickEvent</a>和组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode">FrameNode</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onwillclick12">on('willClick')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 714px;"><h2 id="offwillclick12-1" device-type="phone,2in1,tablet,wearable,tv">off('willClick')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offwillclick12-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'willClick', callback?: ClickEventListenerCallback): void</p> <p>取消监听<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onwillclick12-1">on('willClick')</a>中的点击事件指令下发情况。从API version 20开始，支持屏幕朗读触控模式。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'willClick'，即点击事件指令下发情况。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#clickeventlistenercallback12">ClickEventListenerCallback</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消所有的点击事件指令下发监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onwillclick12">on('willClick')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 786px;"><h2 id="ondidclick12-1" device-type="phone,2in1,tablet,wearable,tv">on('didClick')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ondidclick12-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'didClick', callback: ClickEventListenerCallback): void</p> <p>监听点击事件指令下发情况，所注册回调将于点击事件触发后触发。回调类型为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#clickeventlistenercallback12">ClickEventListenerCallback</a>。从API version 20开始支持屏幕朗读触控模式。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'didClick'，用于监听点击事件指令下发情况，所注册回调将于点击事件触发后触发。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#clickeventlistenercallback12">ClickEventListenerCallback</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。可以获得点击事件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-universal-events-click#clickevent">ClickEvent</a>和组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode">FrameNode</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onwillclick12">on('willClick')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 714px;"><h2 id="offdidclick12-1" device-type="phone,2in1,tablet,wearable,tv">off('didClick')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offdidclick12-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'didClick', callback?: ClickEventListenerCallback): void</p> <p>取消监听<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#ondidclick12-1">on('didClick')</a>中的点击事件指令下发情况。从API version 20开始，支持屏幕朗读触控模式。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'didClick'，即点击事件指令下发情况。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#clickeventlistenercallback12">ClickEventListenerCallback</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消所有的点击事件指令下发监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onwillclick12">on('willClick')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 2075px;"><h2 id="ontabcontentupdate12" device-type="phone,2in1,tablet,wearable,tv">on('tabContentUpdate')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ontabcontentupdate12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'tabContentUpdate', callback: Callback&lt;observer.TabContentInfo&gt;): void</p> <p>监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent">TabContent</a>页面的切换事件。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'tabContentUpdate'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent">TabContent</a>页面的切换事件。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#tabcontentinfo12">TabContentInfo</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。携带<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#tabcontentinfo12">TabContentInfo</a>，返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent">TabContent</a>页面切换事件的信息。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示uiObserver.on('tabContentUpdate', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('tabContentUpdate', callback)</span></li><li>
</li><li><span class="hljs-keyword">import</span> { uiObserver } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-comment">// 定义监听回调函数</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">callbackFunc</span>(<span class="hljs-params">info: uiObserver.TabContentInfo</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'tabContentUpdate'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(info));</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">TabsExample</span> {</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>    <span class="hljs-comment">// 添加监听</span></li><li>    observer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'tabContentUpdate'</span>, callbackFunc);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>    <span class="hljs-comment">// 取消监听</span></li><li>    observer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'tabContentUpdate'</span>, callbackFunc);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Tabs</span>() {</li><li>        <span class="hljs-title class_">TabContent</span>() {</li><li>          <span class="hljs-title class_">Column</span>().<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#00CB87'</span>)</li><li>        }.<span class="hljs-title function_">tabBar</span>(<span class="hljs-string">'green'</span>).<span class="hljs-title function_">id</span>(<span class="hljs-string">'tabContentId0'</span>)</li><li>
</li><li>        <span class="hljs-title class_">TabContent</span>() {</li><li>          <span class="hljs-title class_">Column</span>().<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#007DFF'</span>)</li><li>        }.<span class="hljs-title function_">tabBar</span>(<span class="hljs-string">'blue'</span>).<span class="hljs-title function_">id</span>(<span class="hljs-string">'tabContentId1'</span>)</li><li>
</li><li>        <span class="hljs-title class_">TabContent</span>() {</li><li>          <span class="hljs-title class_">Column</span>().<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFBF00'</span>)</li><li>        }.<span class="hljs-title function_">tabBar</span>(<span class="hljs-string">'yellow'</span>).<span class="hljs-title function_">id</span>(<span class="hljs-string">'tabContentId2'</span>)</li><li>
</li><li>        <span class="hljs-title class_">TabContent</span>() {</li><li>          <span class="hljs-title class_">Column</span>().<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#E67C92'</span>)</li><li>        }.<span class="hljs-title function_">tabBar</span>(<span class="hljs-string">'pink'</span>).<span class="hljs-title function_">id</span>(<span class="hljs-string">'tabContentId3'</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">360</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">296</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#F1F3F5'</span>)</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'tabsId'</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 738px;"><h2 id="offtabcontentupdate12" device-type="phone,2in1,tablet,wearable,tv">off('tabContentUpdate')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offtabcontentupdate12" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'tabContentUpdate', callback?: Callback&lt;observer.TabContentInfo&gt;): void</p> <p>取消监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent">TabContent</a>页面的切换事件。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'tabContentUpdate'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent">TabContent</a>页面的切换事件。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#tabcontentinfo12">TabContentInfo</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消该<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs">Tabs</a>上所有的监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#ontabcontentupdate12">on('tabContentUpdate')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 2120px;"><h2 id="ontabcontentupdate12-1" device-type="phone,2in1,tablet,wearable,tv">on('tabContentUpdate')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="ontabcontentupdate12-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'tabContentUpdate', options: observer.ObserverOptions, callback: Callback&lt;observer.TabContentInfo&gt;): void</p> <p>通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs">Tabs</a>组件的id监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent">TabContent</a>页面的切换事件。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'tabContentUpdate'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent">TabContent</a>页面的切换事件。</td> </tr> <tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%">observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#observeroptions12">ObserverOptions</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">指定监听的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs">Tabs</a>组件的id。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#tabcontentinfo12">TabContentInfo</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。携带TabContentInfo，返回<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent">TabContent</a>页面切换事件的信息。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示uiObserver.on('tabContentUpdate', options, callback)</span></li><li><span class="hljs-comment">// uiObserver.off('tabContentUpdate', options, callback)</span></li><li>
</li><li><span class="hljs-keyword">import</span> { uiObserver } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-comment">// 定义监听回调函数</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">callbackFunc</span>(<span class="hljs-params">info: uiObserver.TabContentInfo</span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'tabContentUpdate'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(info));</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">TabsExample</span> {</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>    <span class="hljs-comment">// 添加监听，指定Tabs的id</span></li><li>    observer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'tabContentUpdate'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">'tabsId'</span> }, callbackFunc);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>    <span class="hljs-comment">// 取消监听</span></li><li>    observer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'tabContentUpdate'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">'tabsId'</span> }, callbackFunc);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Tabs</span>() {</li><li>        <span class="hljs-title class_">TabContent</span>() {</li><li>          <span class="hljs-title class_">Column</span>().<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#00CB87'</span>)</li><li>        }.<span class="hljs-title function_">tabBar</span>(<span class="hljs-string">'green'</span>).<span class="hljs-title function_">id</span>(<span class="hljs-string">'tabContentId0'</span>)</li><li>
</li><li>        <span class="hljs-title class_">TabContent</span>() {</li><li>          <span class="hljs-title class_">Column</span>().<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#007DFF'</span>)</li><li>        }.<span class="hljs-title function_">tabBar</span>(<span class="hljs-string">'blue'</span>).<span class="hljs-title function_">id</span>(<span class="hljs-string">'tabContentId1'</span>)</li><li>
</li><li>        <span class="hljs-title class_">TabContent</span>() {</li><li>          <span class="hljs-title class_">Column</span>().<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFBF00'</span>)</li><li>        }.<span class="hljs-title function_">tabBar</span>(<span class="hljs-string">'yellow'</span>).<span class="hljs-title function_">id</span>(<span class="hljs-string">'tabContentId2'</span>)</li><li>
</li><li>        <span class="hljs-title class_">TabContent</span>() {</li><li>          <span class="hljs-title class_">Column</span>().<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#E67C92'</span>)</li><li>        }.<span class="hljs-title function_">tabBar</span>(<span class="hljs-string">'pink'</span>).<span class="hljs-title function_">id</span>(<span class="hljs-string">'tabContentId3'</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">360</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">296</span>)</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#F1F3F5'</span>)</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'tabsId'</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 783px;"><h2 id="offtabcontentupdate12-1" device-type="phone,2in1,tablet,wearable,tv">off('tabContentUpdate')<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offtabcontentupdate12-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'tabContentUpdate', options: observer.ObserverOptions, callback?: Callback&lt;observer.TabContentInfo&gt;): void</p> <p>取消通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs">Tabs</a>组件的id监听<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent">TabContent</a>页面的切换事件。</p> <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'tabContentUpdate'，即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabcontent">TabContent</a>页面的切换事件。</td> </tr> <tr><td class="cellrowborder" width="25%">options</td> <td class="cellrowborder" width="25%">observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#observeroptions12">ObserverOptions</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">指定监听的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs">Tabs</a>组件的id。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">Callback&lt;observer.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-observer#tabcontentinfo12">TabContentInfo</a>&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消该<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-tabs">Tabs</a>上所有的监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#ontabcontentupdate12-1">on('tabContentUpdate')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 3443px;"><h2 id="onbeforepanstart19" device-type="phone,2in1,tablet,wearable,tv">on('beforePanStart')<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onbeforepanstart19" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'beforePanStart', callback: PanListenerCallback): void</p> <p>监听Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionstart">onActionStart</a>事件，在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionstart">onActionStart</a>事件执行之前执行callback回调。支持手指滑动、鼠标滑动、鼠标滚轮和触摸板拖动，暂不支持屏幕朗读触控模式。</p> <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'beforePanStart'，用于监听Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionstart">onActionStart</a>事件执行前的指令下发情况，所注册回调将于Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionstart">onActionStart</a>事件触发前触发。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#panlistenercallback19">PanListenerCallback</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。可以获得Pan手势事件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-common#gestureevent对象说明">GestureEvent</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-common#gesturerecognizer12">GestureRecognizer</a>和组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode">FrameNode</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示uiObserver.on('beforePanStart', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('beforePanStart', callback)</span></li><li><span class="hljs-comment">// uiObserver.on('afterPanStart', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('afterPanStart', callback)</span></li><li><span class="hljs-comment">// uiObserver.on('beforePanEnd', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('beforePanEnd', callback)</span></li><li><span class="hljs-comment">// uiObserver.on('afterPanEnd', callback)</span></li><li><span class="hljs-comment">// uiObserver.off('afterPanEnd', callback)</span></li><li>
</li><li><span class="hljs-comment">// 在页面Component中使用</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">TEST_TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'node'</span>;</li><li>
</li><li><span class="hljs-comment">// 定义监听回调函数</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">callbackFunc</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'on == beforePanStart'</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">afterPanCallBack</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'on == afterPanStart'</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">beforeEndCallBack</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'on == beforeEnd'</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">afterEndCallBack</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'on == afterEnd'</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">beforeStartCallBack</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'on == beforeStartCallBack'</span>);</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">panGestureCallBack</span>(<span class="hljs-params">event: GestureEvent, current: GestureRecognizer, node?: FrameNode</span>) {</li><li>  <span class="hljs-variable constant_">TEST_TAG</span> = <span class="hljs-string">'panGestureEvent'</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'==='</span> + <span class="hljs-variable constant_">TEST_TAG</span> + <span class="hljs-string">'=== event.repeat is '</span> + event.<span class="hljs-property">repeat</span>);</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'==='</span> + <span class="hljs-variable constant_">TEST_TAG</span> + <span class="hljs-string">'=== event target is '</span> + event.<span class="hljs-property">target</span>.<span class="hljs-property">id</span>);</li><li>  <span class="hljs-variable constant_">TEST_TAG</span> = <span class="hljs-string">'panGestureCurrent'</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'==='</span> + <span class="hljs-variable constant_">TEST_TAG</span> + <span class="hljs-string">'=== current.getTag() is '</span> + current.<span class="hljs-title function_">getTag</span>());</li><li>  <span class="hljs-variable constant_">TEST_TAG</span> = <span class="hljs-string">'panGestureNode'</span>;</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'==='</span> + <span class="hljs-variable constant_">TEST_TAG</span> + <span class="hljs-string">'=== node?.getId() is '</span> + node?.<span class="hljs-title function_">getId</span>());</li><li>}</li><li>
</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">PanExample</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">offsetX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">offsetY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">positionX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">positionY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">panOption</span>: <span class="hljs-title class_">PanGestureOptions</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PanGestureOptions</span>({<span class="hljs-attr">direction</span>: <span class="hljs-title class_">PanDirection</span>.<span class="hljs-property">All</span> });</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>    <span class="hljs-comment">// 添加监听</span></li><li>    observer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'beforePanStart'</span>, callbackFunc);</li><li>    observer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'beforePanStart'</span>, panGestureCallBack);</li><li>    observer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'beforePanStart'</span>, beforeStartCallBack);</li><li>    observer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'afterPanStart'</span>, afterPanCallBack);</li><li>    observer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'beforePanEnd'</span>, beforeEndCallBack);</li><li>    observer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'afterPanEnd'</span>, afterEndCallBack);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>    <span class="hljs-comment">// 取消监听</span></li><li>    observer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'beforePanStart'</span>, callbackFunc);</li><li>    observer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'beforePanStart'</span>);</li><li>    observer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'afterPanStart'</span>, afterPanCallBack);</li><li>    observer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'beforePanEnd'</span>);</li><li>    observer.<span class="hljs-title function_">off</span>(<span class="hljs-string">'afterPanEnd'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>      <span class="hljs-title class_">Column</span>(){</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'PanGesture :\nX: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetX</span> + <span class="hljs-string">'\n'</span> + <span class="hljs-string">'Y: '</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetY</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">200</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">300</span>)</li><li>      .<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)</li><li>      .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">3</span> })</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">50</span>)</li><li>      .<span class="hljs-title function_">translate</span>({ <span class="hljs-attr">x</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetX</span>, <span class="hljs-attr">y</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetY</span>, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> })</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'columnOuter'</span>)</li><li>      .<span class="hljs-title function_">gesture</span>(</li><li>        <span class="hljs-title class_">PanGesture</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">panOption</span>)</li><li>          .<span class="hljs-title function_">onActionStart</span>(<span class="hljs-function">(<span class="hljs-params">event: GestureEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Pan start'</span>);</li><li>          })</li><li>          .<span class="hljs-title function_">onActionUpdate</span>(<span class="hljs-function">(<span class="hljs-params">event: GestureEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (event) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetX</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">positionX</span> + event.<span class="hljs-property">offsetX</span>;</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetY</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">positionY</span> + event.<span class="hljs-property">offsetY</span>;</li><li>            }</li><li>          })</li><li>          .<span class="hljs-title function_">onActionEnd</span>(<span class="hljs-function">(<span class="hljs-params">event: GestureEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">positionX</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetX</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">positionY</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">offsetY</span>;</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Pan end'</span>);</li><li>            }))</li><li>          }</li><li>  }</li><li>}</li></ol></pre></div></div> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 762px;"><h2 id="offbeforepanstart19" device-type="phone,2in1,tablet,wearable,tv">off('beforePanStart')<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offbeforepanstart19" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'beforePanStart', callback?: PanListenerCallback): void</p> <p>取消<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onbeforepanstart19">on('beforePanStart')</a>监听Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionstart">onActionStart</a>事件执行前的callback回调。</p> <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.38.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'beforePanStart'，即Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionstart">onActionStart</a>事件执行前的指令下发情况。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#panlistenercallback19">PanListenerCallback</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消所有的Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionstart">onActionStart</a>事件执行前的指令下发监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onbeforepanstart19">on('beforePanStart')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 858px;"><h2 id="onafterpanstart19" device-type="phone,2in1,tablet,wearable,tv">on('afterPanStart')<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onafterpanstart19" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'afterPanStart', callback: PanListenerCallback): void</p> <p>监听Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionstart">onActionStart</a>事件执行后的指令下发情况，在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionstart">onActionStart</a>事件执行之后执行callback回调。支持手指滑动、鼠标滑动、鼠标滚轮和触摸板拖动，暂不支持屏幕朗读触控模式。</p> <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.39.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'afterPanStart'，用于监听Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionstart">onActionStart</a>事件执行后的指令下发情况，所注册回调将于Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionstart">onActionStart</a>事件触发后触发。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#panlistenercallback19">PanListenerCallback</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。可以获得Pan手势事件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-common#gestureevent对象说明">GestureEvent</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-common#gesturerecognizer12">GestureRecognizer</a>和组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode">FrameNode</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onbeforepanstart19">on('beforePanStart')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 762px;"><h2 id="offafterpanstart19" device-type="phone,2in1,tablet,wearable,tv">off('afterPanStart')<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offafterpanstart19" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'afterPanStart', callback?: PanListenerCallback): void</p> <p>取消<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onafterpanstart19">on('afterPanStart')</a>监听Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#事件">onActionStart</a>事件执行后的callback回调。</p> <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.40.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'afterPanStart'，即Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionstart">onActionStart</a>事件执行后的指令下发情况。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#panlistenercallback19">PanListenerCallback</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消所有的Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionstart">onActionStart</a>事件执行后的指令下发监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onbeforepanstart19">on('beforePanStart')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 858px;"><h2 id="onbeforepanend19" device-type="phone,2in1,tablet,wearable,tv">on('beforePanEnd')<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onbeforepanend19" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'beforePanEnd', callback: PanListenerCallback): void</p> <p>监听Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件执行前的指令下发情况，在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件执行之前执行callback回调。支持手指滑动、鼠标滑动、鼠标滚轮和触摸板拖动，暂不支持屏幕朗读触控模式。</p> <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.41.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'beforePanEnd'，用于监听Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件执行前的指令下发情况，所注册回调将于Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件触发前触发。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#panlistenercallback19">PanListenerCallback</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。可以获得Pan手势事件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-common#gestureevent对象说明">GestureEvent</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-common#gesturerecognizer12">GestureRecognizer</a>和组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode">FrameNode</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onbeforepanstart19">on('beforePanStart')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 762px;"><h2 id="offbeforepanend19" device-type="phone,2in1,tablet,wearable,tv">off('beforePanEnd')<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offbeforepanend19" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'beforePanEnd', callback?: PanListenerCallback): void</p> <p>取消<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onbeforepanend19">on('beforePanEnd')</a>监听Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件执行前的callback回调。</p> <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.42.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'beforePanEnd'，即Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件执行前的指令下发情况。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#panlistenercallback19">PanListenerCallback</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消所有的Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件执行前的指令下发监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onbeforepanstart19">on('beforePanStart')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 858px;"><h2 id="onafterpanend19" device-type="phone,2in1,tablet,wearable,tv">on('afterPanEnd')<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onafterpanend19" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'afterPanEnd', callback: PanListenerCallback): void</p> <p>监听Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件执行后的指令下发情况，在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件执行之后执行callback回调。支持手指滑动、鼠标滑动、鼠标滚轮和触摸板拖动，暂不支持屏幕朗读触控模式。</p> <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'beforePanEnd'，用于监听Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件执行后的指令下发情况，所注册回调将于Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件触发后触发。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#panlistenercallback19">PanListenerCallback</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。可以获得Pan手势事件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-common#gestureevent对象说明">GestureEvent</a>，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesture-common#gesturerecognizer12">GestureRecognizer</a>和组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode">FrameNode</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onbeforepanstart19">on('beforePanStart')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 762px;"><h2 id="offafterpanend19" device-type="phone,2in1,tablet,wearable,tv">off('afterPanEnd')<sup>19+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offafterpanend19" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'afterPanEnd', callback?: PanListenerCallback): void</p> <p>取消<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onafterpanend19">on('afterPanEnd')</a>监听Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件执行后的callback回调。</p> <p><strong>元服务API：</strong> 从API version 19开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'afterPanEnd'，即Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件执行后的指令下发情况。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#panlistenercallback19">PanListenerCallback</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消所有的Pan手势<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-gestures-pangesture#onactionend">onActionEnd</a>事件执行后的指令下发监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onbeforepanstart19">on('beforePanStart')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 4244px;"><h2 id="onnoderenderstate20" device-type="phone,2in1,tablet,wearable,tv">on('nodeRenderState')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onnoderenderstate20" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'nodeRenderState', nodeIdentity: NodeIdentity, callback: NodeRenderStateChangeCallback): void</p> <p>注册一个回调函数，以便在特定节点的渲染状态发生变化时调用，当注册成功时，此回调将立即执行一次。</p> <p>注意节点数量的限制。出于性能考虑，在单个UI实例中，注册节点太多，将会抛出异常。</p> <p>通常，当组件被移动到屏幕外时，会收到RENDER_OUT的通知。但在某些情况下，即使组件移动到屏幕外也不会触发RENDER_OUT通知。例如，具有缓存功能的组件<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper">Swiper</a>，即使<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-container-swiper#cachedcount15">cachedCount</a>属性中的参数isShown配置为true，也不会触发RENDER_OUT通知。</p> <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.45.9.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'nodeRenderState'，用于监听节点渲染状态发生改变。</td> </tr> <tr><td class="cellrowborder" width="25%">nodeIdentity</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#nodeidentity20">NodeIdentity</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">节点标识。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#noderenderstatechangecallback20">NodeRenderStateChangeCallback</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。可以获得节点渲染状态改变事件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-e#noderenderstate20">NodeRenderState</a>和组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-framenode">FrameNode</a>。</td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-node-render-monitor">注册节点渲染状态监听错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.45.12.1.3.1.1" width="50%">错误码ID</th> <th align="left" class="cellrowborder" id="mcps1.3.45.12.1.3.1.2" width="50%">错误信息</th> </tr><tr><td class="cellrowborder" width="50%">161001</td> <td class="cellrowborder" width="50%">The count of nodes monitoring render state is over the limitation.</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>该示例展示了如何对目标组件添加监听和取消监听。当向左滑动，被监听组件从屏幕消失，会收到RENDER_OUT的通知，然后向右滑动，被监听组件重新出现在屏幕上，会收到RENDER_IN通知。</p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示uiObserver.on('nodeRenderState', nodeIdentity, callback)</span></li><li><span class="hljs-comment">// uiObserver.off('nodeRenderState', nodeIdentity, callback)</span></li><li>
</li><li><span class="hljs-comment">// 在页面Component中使用</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeRenderState</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">fontColor</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'#182431'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">selectedFontColor</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'#007DFF'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">currentIndex</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">selectedIndex</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">notice</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">TabsController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TabsController</span>();</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title function_">tabBuilder</span>(<span class="hljs-params">index: <span class="hljs-built_in">number</span>, name: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(name)</li><li>        .<span class="hljs-title function_">fontColor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedIndex</span> === index ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedFontColor</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-property">fontColor</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>        .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedIndex</span> === index ? <span class="hljs-number">500</span> : <span class="hljs-number">400</span>)</li><li>        .<span class="hljs-title function_">lineHeight</span>(<span class="hljs-number">22</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">17</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">7</span> })</li><li>      <span class="hljs-title class_">Divider</span>()</li><li>        .<span class="hljs-title function_">strokeWidth</span>(<span class="hljs-number">2</span>)</li><li>        .<span class="hljs-title function_">color</span>(<span class="hljs-string">'#007DFF'</span>)</li><li>        .<span class="hljs-title function_">opacity</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedIndex</span> === index ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Tabs</span>({ <span class="hljs-attr">barPosition</span>: <span class="hljs-title class_">BarPosition</span>.<span class="hljs-property">Start</span>, <span class="hljs-attr">index</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> }) {</li><li>        <span class="hljs-title class_">TabContent</span>() {</li><li>          <span class="hljs-title class_">Column</span>() {</li><li>            <span class="hljs-title class_">Column</span>() {</li><li>              <span class="hljs-title class_">Button</span>(<span class="hljs-string">"被监听节点"</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> }).<span class="hljs-title function_">id</span>(<span class="hljs-string">"button_1"</span>)</li><li>              <span class="hljs-title class_">Button</span>(<span class="hljs-string">"添加监听"</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> }).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-keyword">let</span> <span class="hljs-attr">node</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getFrameNodeById</span>(<span class="hljs-string">"button_1"</span>);</li><li>                <span class="hljs-keyword">if</span> (node) {</li><li>                  <span class="hljs-keyword">let</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>                  <span class="hljs-comment">// 添加监听</span></li><li>                  observer.<span class="hljs-title function_">on</span>(<span class="hljs-string">"nodeRenderState"</span>, node?.<span class="hljs-title function_">getUniqueId</span>(), <span class="hljs-function">(<span class="hljs-params">state: NodeRenderState, node?: FrameNode</span>) =&gt;</span> {</li><li>                    <span class="hljs-comment">// 根据节点状态修改通知信息</span></li><li>                    <span class="hljs-keyword">if</span> (state === <span class="hljs-number">0</span>) {</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">notice</span> = <span class="hljs-string">"RENDER_IN"</span>;</li><li>                    } <span class="hljs-keyword">else</span> {</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">notice</span> = <span class="hljs-string">"RENDER_OUT"</span>;</li><li>                    }</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"节点状态发生改变，当前状态："</span>, state);</li><li>                  })</li><li>                }</li><li>              })</li><li>              <span class="hljs-title class_">Button</span>(<span class="hljs-string">"取消监听"</span>).<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">5</span> }).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-keyword">let</span> <span class="hljs-attr">node</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getFrameNodeById</span>(<span class="hljs-string">"button_1"</span>);</li><li>                <span class="hljs-keyword">if</span> (node) {</li><li>                  <span class="hljs-keyword">let</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>                  <span class="hljs-comment">// 取消监听，不选择回调时，取消所有监听的回调</span></li><li>                  observer.<span class="hljs-title function_">off</span>(<span class="hljs-string">"nodeRenderState"</span>, node?.<span class="hljs-title function_">getUniqueId</span>());</li><li>                }</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">notice</span> = <span class="hljs-string">""</span>;</li><li>              })</li><li>            }</li><li>          }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#00CB87'</span>)</li><li>        }.<span class="hljs-title function_">tabBar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tabBuilder</span>(<span class="hljs-number">0</span>, <span class="hljs-string">'green'</span>))</li><li>
</li><li>        <span class="hljs-title class_">TabContent</span>() {</li><li>          <span class="hljs-title class_">Column</span>().<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#007DFF'</span>)</li><li>        }.<span class="hljs-title function_">tabBar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tabBuilder</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'blue'</span>))</li><li>
</li><li>        <span class="hljs-title class_">TabContent</span>() {</li><li>          <span class="hljs-title class_">Column</span>().<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFBF00'</span>)</li><li>        }.<span class="hljs-title function_">tabBar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tabBuilder</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'yellow'</span>))</li><li>
</li><li>        <span class="hljs-title class_">TabContent</span>() {</li><li>          <span class="hljs-title class_">Column</span>().<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#E67C92'</span>)</li><li>        }.<span class="hljs-title function_">tabBar</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">tabBuilder</span>(<span class="hljs-number">3</span>, <span class="hljs-string">'pink'</span>))</li><li>      }</li><li>      .<span class="hljs-title function_">vertical</span>(<span class="hljs-literal">false</span>)</li><li>      .<span class="hljs-title function_">barMode</span>(<span class="hljs-title class_">BarMode</span>.<span class="hljs-property">Fixed</span>)</li><li>      .<span class="hljs-title function_">barWidth</span>(<span class="hljs-number">360</span>)</li><li>      .<span class="hljs-title function_">barHeight</span>(<span class="hljs-number">56</span>)</li><li>      .<span class="hljs-title function_">animationDuration</span>(<span class="hljs-number">400</span>)</li><li>      .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentIndex</span> = index;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedIndex</span> = index;</li><li>      })</li><li>      .<span class="hljs-title function_">onAnimationStart</span>(<span class="hljs-function">(<span class="hljs-params">index: <span class="hljs-built_in">number</span>, targetIndex: <span class="hljs-built_in">number</span>, event: TabsAnimationEvent</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (index === targetIndex) {</li><li>          <span class="hljs-keyword">return</span>;</li><li>        }</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectedIndex</span> = targetIndex;</li><li>      })</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-number">360</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">296</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">52</span> })</li><li>      .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#F1F3F5'</span>)</li><li>
</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`收到的通知: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.notice}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>    }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="350" originwidth="369" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115856.25144155778213353660838767697143:50001231000000:2800:DB5F64B0380D5CD7476D4113E3D237D7072C031124D9AEA441223257469E28AD.gif" width="369" height="350"></span></p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 807px;"><h2 id="offnoderenderstate20" device-type="phone,2in1,tablet,wearable,tv">off('nodeRenderState')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offnoderenderstate20" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'nodeRenderState', nodeIdentity: NodeIdentity, callback?: NodeRenderStateChangeCallback): void</p> <p>取消监听节点渲染状态发生变化的callback回调。</p> <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.46.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">监听事件，固定为'nodeRenderState'，即节点渲染状态变化指令下发情况。</td> </tr> <tr><td class="cellrowborder" width="25%">nodeIdentity</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#nodeidentity20">NodeIdentity</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">节点标识。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#noderenderstatechangecallback20">NodeRenderStateChangeCallback</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">需要被注销的回调函数。不传参数时，取消该节点所有的渲染状态变化指令下发监听回调。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#onnoderenderstate20">on('nodeRenderState')</a>接口示例。</p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 5571px;"><h2 id="addglobalgesturelistener20" device-type="phone,2in1,tablet,wearable,tv">addGlobalGestureListener<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="addglobalgesturelistener20" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>addGlobalGestureListener(type: GestureListenerType, option: GestureObserverConfigs, callback: GestureListenerCallback): void</p> <p>注册回调函数以监听手势触发信息。</p> <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.47.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-e#gesturelistenertype20">GestureListenerType</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要监听的手势类型。</td> </tr> <tr><td class="cellrowborder" width="25%">option</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-i#gestureobserverconfigs20">GestureObserverConfigs</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">绑定全局监听器时的配置选项。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#gesturelistenercallback20">GestureListenerCallback</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">手势状态更新时的回调函数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>该示例使用全局手势监听器实时追踪Tap、Pan和LongPress三个独立区域的触发状态，记录各手势的触发次数和最后操作信息，并在组件生命周期内自动管理监听器的注册与注销。</p> <div _ngcontent-ohf-c106="" class="highlight-div"><div _ngcontent-ohf-c106="" class="highlight-div-header"><div _ngcontent-ohf-c106="" class="highlight-div-header-left"><div _ngcontent-ohf-c106="" class="handle-button expand-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ohf-c106="" class="highlight-div-header-right"><div _ngcontent-ohf-c106="" class="handle-button ai-button"></div><div _ngcontent-ohf-c106="" class="handle-button line-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ohf-c106="" class="handle-button theme-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ohf-c106="" class="handle-button copy-button"><div _ngcontent-ohf-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ohf-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-comment">// 演示uiObserver.addGlobalGestureListener(type, option, callback)</span></li><li><span class="hljs-comment">// uiObserver.removeGlobalGestureListener(type, callback)</span></li><li>
</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">GestureListenerType</span>, <span class="hljs-title class_">GestureActionPhase</span>, <span class="hljs-title class_">GestureTriggerInfo</span>, <span class="hljs-title class_">GestureListenerCallback</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'全局手势监控'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">tapCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">panCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">longPressCount</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">lastAction</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'无'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">lastArea</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'无'</span>;</li><li>
</li><li>  <span class="hljs-comment">// 存储监听器回调引用</span></li><li>  <span class="hljs-keyword">private</span> tapCallback?: <span class="hljs-title class_">GestureListenerCallback</span>;</li><li>  <span class="hljs-keyword">private</span> panCallback?: <span class="hljs-title class_">GestureListenerCallback</span>;</li><li>  <span class="hljs-keyword">private</span> longPressCallback?: <span class="hljs-title class_">GestureListenerCallback</span>;</li><li>
</li><li>  <span class="hljs-comment">// 启用全局监听</span></li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addGlobalListeners</span>();</li><li>  }</li><li>  <span class="hljs-comment">// 终止全局监听</span></li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeGlobalListeners</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">addGlobalListeners</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">const</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>
</li><li>    <span class="hljs-comment">// Tap监听任务</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tapCallback</span> = <span class="hljs-function">(<span class="hljs-params">info: GestureTriggerInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (info.<span class="hljs-property">event</span>?.<span class="hljs-property">target</span>?.<span class="hljs-property">id</span> === <span class="hljs-string">'tap-area'</span>) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tapCount</span>++;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastAction</span> = <span class="hljs-string">'点击'</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastArea</span> = <span class="hljs-string">'Tap区域'</span>;</li><li>      }</li><li>    };</li><li>    observer.<span class="hljs-title function_">addGlobalGestureListener</span>(</li><li>      <span class="hljs-title class_">GestureListenerType</span>.<span class="hljs-property">TAP</span>,</li><li>      { <span class="hljs-attr">actionPhases</span>: [<span class="hljs-title class_">GestureActionPhase</span>.<span class="hljs-property">WILL_START</span>, <span class="hljs-title class_">GestureActionPhase</span>.<span class="hljs-property">WILL_END</span>] },</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tapCallback</span></li><li>    );</li><li>
</li><li>    <span class="hljs-comment">// Pan监听任务</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">panCallback</span> = <span class="hljs-function">(<span class="hljs-params">info: GestureTriggerInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (info.<span class="hljs-property">event</span>?.<span class="hljs-property">target</span>?.<span class="hljs-property">id</span> === <span class="hljs-string">'pan-area'</span>) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">panCount</span>++;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastAction</span> = <span class="hljs-string">'平移'</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastArea</span> = <span class="hljs-string">'Pan区域'</span>;</li><li>      }</li><li>    };</li><li>    observer.<span class="hljs-title function_">addGlobalGestureListener</span>(</li><li>      <span class="hljs-title class_">GestureListenerType</span>.<span class="hljs-property">PAN</span>,</li><li>      {</li><li>        <span class="hljs-attr">actionPhases</span>: [<span class="hljs-title class_">GestureActionPhase</span>.<span class="hljs-property">WILL_START</span>, <span class="hljs-title class_">GestureActionPhase</span>.<span class="hljs-property">WILL_END</span>]</li><li>      },</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">panCallback</span></li><li>    );</li><li>
</li><li>    <span class="hljs-comment">// LongPress监听任务</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">longPressCallback</span> = <span class="hljs-function">(<span class="hljs-params">info: GestureTriggerInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (info.<span class="hljs-property">event</span>?.<span class="hljs-property">target</span>?.<span class="hljs-property">id</span> === <span class="hljs-string">'longpress-area'</span>) {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">longPressCount</span>++;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastAction</span> = <span class="hljs-string">'长按'</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastArea</span> = <span class="hljs-string">'LongPress区域'</span>;</li><li>      }</li><li>    };</li><li>    observer.<span class="hljs-title function_">addGlobalGestureListener</span>(</li><li>      <span class="hljs-title class_">GestureListenerType</span>.<span class="hljs-property">LONG_PRESS</span>,</li><li>      {</li><li>        <span class="hljs-attr">actionPhases</span>: [<span class="hljs-title class_">GestureActionPhase</span>.<span class="hljs-property">WILL_START</span>, <span class="hljs-title class_">GestureActionPhase</span>.<span class="hljs-property">WILL_END</span>]</li><li>      },</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">longPressCallback</span></li><li>    );</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">removeGlobalListeners</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">const</span> observer = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getUIObserver</span>();</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tapCallback</span>) {</li><li>      observer.<span class="hljs-title function_">removeGlobalGestureListener</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">tapCallback</span>);</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">panCallback</span>) {</li><li>      observer.<span class="hljs-title function_">removeGlobalGestureListener</span>(<span class="hljs-number">2</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">panCallback</span>);</li><li>    }</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">longPressCallback</span>) {</li><li>      observer.<span class="hljs-title function_">removeGlobalGestureListener</span>(<span class="hljs-number">1</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">longPressCallback</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 手势数据统计面板</span></li><li>      <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">30</span> }) {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'点击次数:'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.tapCount}</span>`</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#FF6B81'</span>)</li><li>        }</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'平移次数:'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.panCount}</span>`</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#7BED9F'</span>)</li><li>        }</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">'长按次数:'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">16</span>)</li><li>          <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.longPressCount}</span>`</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>).<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#70A1FF'</span>)</li><li>        }</li><li>      }</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>
</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`最后动作: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.lastAction}</span> (<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.lastArea}</span>)`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)</li><li>        .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>
</li><li>      <span class="hljs-comment">// 手势区域</span></li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Tap区域'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'tap-area'</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">120</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#FF6B81'</span> })</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>      .<span class="hljs-title function_">gesture</span>(<span class="hljs-title class_">TapGesture</span>().<span class="hljs-title function_">onAction</span>(<span class="hljs-function">(<span class="hljs-params">event: GestureEvent</span>)=&gt;</span>{</li><li>        <span class="hljs-comment">//具体实现内容</span></li><li>      }))</li><li>
</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Pan区域'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'pan-area'</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">120</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#7BED9F'</span> })</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>      .<span class="hljs-title function_">gesture</span>(</li><li>        <span class="hljs-title class_">PanGesture</span>()</li><li>          .<span class="hljs-title function_">onActionStart</span>(<span class="hljs-function">(<span class="hljs-params">event: GestureEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-comment">//具体实现内容</span></li><li>          })</li><li>          .<span class="hljs-title function_">onActionEnd</span>(<span class="hljs-function">(<span class="hljs-params">event: GestureEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-comment">//具体实现内容</span></li><li>          })</li><li>      )</li><li>
</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'LongPress区域'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">'longpress-area'</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'90%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-number">120</span>)</li><li>      .<span class="hljs-title function_">margin</span>(<span class="hljs-number">10</span>)</li><li>      .<span class="hljs-title function_">border</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#70A1FF'</span> })</li><li>      .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)</li><li>      .<span class="hljs-title function_">gesture</span>(</li><li>        <span class="hljs-title class_">LongPressGesture</span>()</li><li>          .<span class="hljs-title function_">onAction</span>(<span class="hljs-function">(<span class="hljs-params">event: GestureEvent</span>)=&gt;</span>{</li><li>            <span class="hljs-comment">//具体实现内容</span></li><li>          })</li><li>          .<span class="hljs-title function_">onActionEnd</span>(<span class="hljs-function">(<span class="hljs-params">event: GestureEvent</span>) =&gt;</span> {</li><li>            <span class="hljs-comment">//具体实现内容</span></li><li>          })</li><li>      )</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div> <p><span><img originheight="576" originwidth="498" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115856.37271636703005404495326604836394:50001231000000:2800:822EC79F1366077975F2B2990F57066252207D5B3E3C6317C97058960A77BAB6.gif" width="498" height="576"></span></p> </div>  <div class="tiledSection" style="contain-intrinsic-size: auto 666px;"><h2 id="removeglobalgesturelistener20" device-type="phone,2in1,tablet,wearable,tv">removeGlobalGestureListener<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removeglobalgesturelistener20" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeGlobalGestureListener(type: GestureListenerType, callback?: GestureListenerCallback): void</p> <p>移除某一手势监听器类型的回调函数。</p> <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.48.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-e#gesturelistenertype20">GestureListenerType</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">要移除监听器的事件类型。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-t#gesturelistenercallback20">GestureListenerCallback</a></td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">待移除的回调函数（未提供时将清除该手势类型的所有回调）。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <p>参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uiobserver#addglobalgesturelistener20">addGlobalGestureListener</a>接口示例。</p> </div> </div> <div></div></div>