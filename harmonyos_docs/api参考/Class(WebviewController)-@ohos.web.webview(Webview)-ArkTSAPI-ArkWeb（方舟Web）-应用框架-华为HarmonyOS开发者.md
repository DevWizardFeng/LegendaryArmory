<h1 _ngcontent-afw-c119="" class="doc-title ng-star-inserted" title="Class (WebviewController)"> Class (WebviewController) </h1>

<div _ngcontent-afw-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted renderOptimization" style="position: relative;">   <div>    <p>通过WebviewController可以控制Web组件各种行为（包括页面导航、生命周期状态、JavaScript交互等行为）。一个WebviewController对象只能控制一个Web组件，且必须在Web组件和WebviewController绑定后，才能调用WebviewController上的方法（静态方法除外）。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <ul>       <li>        <p>本模块首批接口从API version 9开始支持。后续版本如有新增内容，则采用上角标单独标记该内容的起始版本。</p></li>       <li>        <p>本Class首批接口从API version 9开始支持。</p></li>       <li>        <p>示例效果请以真机运行为准，当前DevEco Studio预览器不支持。</p></li>      </ul>     </div></div></div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 247px;">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection scroll-inwindow" style="contain-intrinsic-size: auto 2614px;">     <h2 id="constructor11" device-type="phone,2in1,tablet,wearable,tv">constructor<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(webTag?: string)</p>     <p>用于创建 WebviewController 对象的构造函数。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>不传参：new webview.WebviewController()表示构造函数为空，不使用C API时不需要传参。</p>       <p>传参且参数是合法字符串：new webview.WebviewController("xxx")，用于开发者区分多实例，并调用对应实例下的方法。</p>       <p>传入参数为空：new webview.WebviewController("")或new webview.WebviewController(undefined)，该场景下参数无意义，无法区分多个实例，直接返回undefined，需要开发者判断返回值是否正常。</p>       <p>Web组件销毁后会解绑WebViewController，之后调用WebviewController的非静态方法会抛出17100001异常，应注意调用时机和捕获异常，防止进程异常退出。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">webTag</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指定了 Web 组件的名称。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebObj</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">webTest</span>(): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web test'</span>);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-string">"Web test"</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">webString</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web test toString'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>()</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">webTestObj</span>: <span class="hljs-title class_">WebObj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebObj</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'deleteJavaScriptRegister'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"objTestName"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onControllerAttached</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>($rawfile(<span class="hljs-string">"index.html"</span>));</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">webTestObj</span>, <span class="hljs-string">"objTestName"</span>, [<span class="hljs-string">"webTest"</span>, <span class="hljs-string">"webString"</span>]);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"htmlTest()"</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"webDemo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">htmlTest</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">          <span class="hljs-comment">// This function call expects to return "Web test"</span></span></li><li><span class="language-javascript">          <span class="hljs-keyword">let</span> webStr = objTestName.<span class="hljs-title function_">webTest</span>();</span></li><li><span class="language-javascript">          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"webDemo"</span>).<span class="hljs-property">innerHTML</span>=webStr;</span></li><li><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'objTestName.webTest result:'</span>+ webStr)</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript">      </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 859px;">     <h2 id="initializewebengine" device-type="phone,2in1,tablet,wearable,tv">initializeWebEngine<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="initializewebengine" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static initializeWebEngine(): void</p>     <p>在 Web 组件初始化之前，通过此接口加载 Web 引擎的动态库文件，以提高启动性能。自动预连接历史访问过的高频网站。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>initializeWebEngine不支持在异步线程中调用，否则会造成崩溃。</li>        <li>initializeWebEngine全局生效，在整个APP生命周期中调用一次即可，不需要重复调用。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>示例：</strong></p>     <p>本示例以EntryAbility为例，描述了在 Ability 创建阶段完成 Web 组件动态库加载的功能。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate"</span>)</li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">initializeWebEngine</span>()</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate done"</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1358px;">     <h2 id="sethttpdns10" device-type="phone,2in1,tablet,wearable,tv">setHttpDns<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sethttpdns10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static setHttpDns(secureDnsMode:SecureDnsMode, secureDnsConfig:string): void</p>     <p>设置Web组件是否使用HTTPDNS解析DNS。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">secureDnsMode</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#securednsmode10">SecureDnsMode</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">使用HTTPDNS的模式。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">secureDnsConfig</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">HTTPDNS server的配置，必须是https协议并且只允许配置一个server。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate"</span>)</li><li>    <span class="hljs-keyword">try</span> {</li><li>      webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setHttpDns</span>(webview.<span class="hljs-property">SecureDnsMode</span>.<span class="hljs-property">AUTO</span>, <span class="hljs-string">"https://example1.test"</span>)</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>
</li><li>    <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">"abilityWant"</span>, want);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate done"</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1553px;">     <h2 id="setwebdebuggingaccess" device-type="phone,2in1,tablet,wearable,tv">setWebDebuggingAccess<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setwebdebuggingaccess" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static setWebDebuggingAccess(webDebuggingAccess: boolean): void</p>     <p>设置是否启用网页调试功能。详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-debugging-with-devtools" target="_blank">DevTools工具</a>。</p>     <p>安全提示：启用网页调试功能可以让用户检查修改Web页面内部状态，存在安全隐患，不建议在应用正式发布版本中启用。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">webDebuggingAccess</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>设置是否启用网页调试功能。</p>          <p>true表示启用网页调试功能。false表示不启用网页调试功能。</p>          <p>默认值：false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setWebDebuggingAccess</span>(<span class="hljs-literal">true</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4919px;">     <h2 id="loadurl" device-type="phone,2in1,tablet,wearable,tv">loadUrl<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="loadurl" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>loadUrl(url: string | Resource, headers?: Array&lt;WebHeader&gt;): void</p>     <p>加载指定的URL。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">url</td>         <td class="cellrowborder" width="25%">string | Resource</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要加载的 URL。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">headers</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#webheader">WebHeader</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>URL的附加HTTP请求头。</p>          <p>默认值： []</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100002</td>         <td class="cellrowborder" width="50%">URL error. The webpage corresponding to the URL is invalid, or the URL length exceeds 2048.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100003</td>         <td class="cellrowborder" width="50%">Invalid resource path or file type.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'loadUrl'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 需要加载的URL是string类型。</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">'www.example.com'</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'loadUrl'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 带参数headers。</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">'www.example.com'</span>, [{ <span class="hljs-attr">headerKey</span>: <span class="hljs-string">"headerKey"</span>, <span class="hljs-attr">headerValue</span>: <span class="hljs-string">"headerValue"</span> }]);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载本地网页，加载本地资源文件有三种方式。</p>     <p>1.$rawfile方式。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'loadUrl'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 通过$rawfile加载本地资源文件。</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>($rawfile(<span class="hljs-string">'index.html'</span>));</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>2.resources协议。</p>     <p>使用 resource://rawfile/ 协议前缀可以避免常规 $rawfile 方式在处理带有“#”路由链接时的局限性。当URL中包含“#”号时，“#”后面的内容会被视为锚点（fragment）。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'loadUrl'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 通过resource协议加载本地资源文件。</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">"resource://rawfile/index.html#home"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>在“src\main\resources\rawfile”文件夹下创建index.html：</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li>
</li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadContent</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">      <span class="hljs-keyword">var</span> hash = <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>;</span></li><li><span class="language-javascript">      <span class="hljs-keyword">var</span> contentDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>);</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">      <span class="hljs-keyword">if</span> (hash === <span class="hljs-string">'#home'</span>) {</span></li><li><span class="language-javascript">        contentDiv.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h1&gt;Home Page&lt;/h1&gt;&lt;p&gt;Welcome to the Home Page!&lt;/p&gt;'</span>;</span></li><li><span class="language-javascript">      } <span class="hljs-keyword">else</span> {</span></li><li><span class="language-javascript">        contentDiv.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;h1&gt;Default Page&lt;/h1&gt;&lt;p&gt;This is the default content.&lt;/p&gt;'</span>;</span></li><li><span class="language-javascript">      }</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-comment">// 加载界面</span></span></li><li><span class="language-javascript">    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, loadContent);</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-comment">// 当hash变化时，更新界面</span></span></li><li><span class="language-javascript">    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'hashchange'</span>, loadContent);</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>     <p>3.通过沙箱路径加载本地文件，可以参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-page-loading-with-web-components#加载本地页面" target="_blank">web</a>加载沙箱路径的示例代码。</p>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 5656px;">     <h2 id="loaddata" device-type="phone,2in1,tablet,wearable,tv">loadData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="loaddata" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>loadData(data: string, mimeType: string, encoding: string, baseUrl?: string, historyUrl?: string): void</p>     <p>加载指定的数据。</p>     <p>baseUrl与historyUrl同时为空的情况下：</p>     <p>encoding如果为非base64（包括空值），则假定数据对安全URL字符范围内的八位字节使用ASCII编码，对该范围外的八位字节使用URL的标准%xx十六进制编码。</p>     <p>data数据必须使用base64编码或将内容中的任何#字符编码为%23。否则#将被视为内容的结尾而剩余的文本将被用作文档片段标识符。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>         <p>若加载本地图片，可以给baseUrl或historyUrl任一参数赋值空格，详情请参考示例代码。</p></li>        <li>         <p>加载本地图片场景，baseUrl和historyUrl不能同时为空，否则图片无法成功加载。</p></li>        <li>         <p>若html中的富文本中带有注入#等特殊字符，建议将baseUrl和historyUrl两个参数的值设置为"空格"。</p></li>        <li>         <p>加载文字场景，需主动设置&lt;meta name="viewport" content="width=device-width, initial-scale=1.0" charset="utf-8"&gt;避免文本字体大小不一致。</p></li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">data</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">按照"base64"或者"URL"编码后的一段字符串。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">mimeType</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">媒体类型（MIME）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">encoding</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">编码类型，具体为"base64"或者"URL"编码。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">baseUrl</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">指定的一个URL路径（"http"/"https"/"data"协议），并由Web组件赋值给window.origin。当加载大量html文件时，需设置为"data"。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">historyUrl</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">用作历史记录所使用的URL。非空时，历史记录以此URL进行管理。当baseUrl为空时，此属性无效。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>baseUrl与historyUrl同时为空。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'loadData'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadData</span>(</li><li>              <span class="hljs-string">"&lt;html&gt;&lt;body bgcolor=\"white\"&gt;Source:&lt;pre&gt;source&lt;/pre&gt;&lt;/body&gt;&lt;/html&gt;"</span>,</li><li>              <span class="hljs-string">"text/html"</span>,</li><li>              <span class="hljs-comment">// UTF-8为charset。</span></li><li>              <span class="hljs-string">"UTF-8"</span></li><li>            );</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'loadData'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadData</span>(</li><li>              <span class="hljs-comment">// Coding tests通过base64编码后的字符串。</span></li><li>              <span class="hljs-string">"Q29kaW5nIHRlc3Rz"</span>,</li><li>              <span class="hljs-string">"text/html"</span>,</li><li>              <span class="hljs-string">"base64"</span></li><li>            );</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>指定baseURL。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'loadData'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadData</span>(</li><li>              <span class="hljs-string">"&lt;img src=aa/bb.jpg&gt;"</span>, <span class="hljs-comment">// 会尝试从"https://xxx.com/" + "aa/bb.jpg"加载该图片</span></li><li>              <span class="hljs-string">"text/html"</span>,</li><li>              <span class="hljs-string">"UTF-8"</span>,</li><li>              <span class="hljs-string">"https://xxx.com/"</span>,</li><li>              <span class="hljs-string">"about:blank"</span></li><li>            );</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载本地资源。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">updataContent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'&lt;body&gt;&lt;div&gt;&lt;image src="resource://rawfile/xxx.png" alt="image -- end" width="500" height="250"&gt;&lt;/image&gt;&lt;/div&gt;&lt;/body&gt;'</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'loadData'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// UTF-8为charset。</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadData</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">updataContent</span>, <span class="hljs-string">"text/html"</span>, <span class="hljs-string">"UTF-8"</span>, <span class="hljs-string">" "</span>, <span class="hljs-string">" "</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载沙箱图片。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'loadData'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadData</span>(</li><li>              <span class="hljs-string">"&lt;img src=bb.jpg&gt;"</span>, <span class="hljs-comment">// 尝试从"file:///xxx/" + "bb.jpg"加载该图片。</span></li><li>              <span class="hljs-string">"text/html"</span>,</li><li>              <span class="hljs-string">"UTF-8"</span>,</li><li>              <span class="hljs-comment">// 加载本地应用沙箱内的图片路径，请将路径改为实际使用的沙箱路径。</span></li><li>              <span class="hljs-string">"file:///data/storage/el2/base/haps/entry/files/data/.cache_dir/"</span>,</li><li>              <span class="hljs-string">""</span></li><li>            );</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">fileAccess</span>(<span class="hljs-literal">true</span>) <span class="hljs-comment">// 为了加载应用沙箱内的图片，需要启用文件访问功能。</span></li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1477px;">     <h2 id="accessforward" device-type="phone,2in1,tablet,wearable,tv">accessForward<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="accessforward" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>accessForward(): boolean</p>     <p>当前页面是否可前进，即当前页面是否有前进历史记录。</p>     <p>可以结合使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getbackforwardentries">getBackForwardEntries</a>来获取当前WebView的历史信息列表，以及使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#accessstep">accessStep</a>来判断是否可以按照给定的步数前进或后退。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">可以前进返回true，否则返回false。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'accessForward'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">accessForward</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'result:'</span> + result);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1210px;">     <h2 id="forward" device-type="phone,2in1,tablet,wearable,tv">forward<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="forward" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>forward(): void</p>     <p>按照历史栈，前进一个页面。一般结合accessForward一起使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'forward'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">forward</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1665px;">     <h2 id="accessbackward" device-type="phone,2in1,tablet,wearable,tv">accessBackward<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="accessbackward" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>accessBackward(): boolean</p>     <p>当前页面是否可后退，即当前页面是否有返回历史记录。</p>     <p>可以结合使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getbackforwardentries">getBackForwardEntries</a>来获取当前WebView的历史信息列表，以及使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#accessstep">accessStep</a>来判断是否可以按照给定的步数前进或后退。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>在Web组件首次加载过程中调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#setcustomuseragent10">setCustomUserAgent</a>，可能会导致在当前存在多个历史节点的情况下，获取的accessBackward实际为false，即没有后退节点。建议先调用setCustomUserAgent方法设置UserAgent，再通过loadUrl加载具体页面。</p>       <p>该现象是由于在Web组件首次加载时，调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#setcustomuseragent10">setCustomUserAgent</a>会导致组件重新加载并保持初始历史节点的状态。随后新增的节点将替换初始历史节点，不会生成新的历史节点，导致accessBackward为false。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">当前页面可以后退返回true,否则返回false。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'accessBackward'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">accessBackward</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'result:'</span> + result);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1210px;">     <h2 id="backward" device-type="phone,2in1,tablet,wearable,tv">backward<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backward" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>backward(): void</p>     <p>按照历史栈，后退一个页面。一般结合<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#accessbackward">accessBackward</a>一起使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'backward'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">backward</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1282px;">     <h2 id="onactive" device-type="phone,2in1,tablet,wearable,tv">onActive<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="onactive" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onActive(): void</p>     <p>调用此接口通知Web组件进入前台激活状态。</p>     <p>激活状态是应用与用户互动的状态。应用会保持这种状态，直到发生某些事件（例如收到来电或设备屏幕关闭）时将焦点从应用移开。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'onActive'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">onActive</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1282px;">     <h2 id="oninactive" device-type="phone,2in1,tablet,wearable,tv">onInactive<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oninactive" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onInactive(): void</p>     <p>调用此接口通知Web组件进入未激活状态。开发者可以在此回调中实现应用失去焦点时应表现的恰当行为。</p>     <p>此状态下会尽可能的暂停任何可以安全暂停的内容，例如动画和地理位置。但不会暂停JavaScript，要全局暂停JavaScript，请使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#pausealltimers12">pauseAllTimers</a>。要重新激活Web组件，请调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#onactive">onActive</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'onInactive'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">onInactive</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1210px;">     <h2 id="refresh" device-type="phone,2in1,tablet,wearable,tv">refresh<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="refresh" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>refresh(): void</p>     <p>调用此接口通知Web组件刷新网页。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1755px;">     <h2 id="accessstep" device-type="phone,2in1,tablet,wearable,tv">accessStep<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="accessstep" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>accessStep(step: number): boolean</p>     <p>当前页面是否可前进或者后退给定的step步。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">step</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要跳转的步数，正数代表前进，负数代表后退。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">          <p>页面是否前进或后退。</p>          <p>返回true表示可以前进或者后退，返回false表示不可以前进或后退。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">steps</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'accessStep'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">accessStep</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">steps</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'result:'</span> + result);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1210px;">     <h2 id="clearhistory" device-type="phone,2in1,tablet,wearable,tv">clearHistory<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearhistory" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearHistory(): void</p>     <p>删除所有前进后退记录，不建议在onErrorReceive与onPageBegin中调用clearHistory，会造成异常退出。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'clearHistory'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">clearHistory</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 5999px;">     <h2 id="registerjavascriptproxy" device-type="phone,2in1,tablet,wearable,tv">registerJavaScriptProxy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="registerjavascriptproxy" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>registerJavaScriptProxy(object: object, name: string, methodList: Array&lt;string&gt;, asyncMethodList?: Array&lt;string&gt;, permission?: string): void</p>     <p>registerJavaScriptProxy提供了应用与Web组件加载的网页之间强大的交互能力。注入JavaScript对象到window对象中，并在window对象中调用该对象的方法。</p>     <p>示例请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-in-page-app-function-invoking" target="_blank">前端页面调用应用侧函数</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>registerJavaScriptProxy需要和deleteJavaScriptRegister接口配合使用，防止内存泄漏。</li>        <li>请尽可能只在可信的URL及安全通信HTTPS场景下进行registerJavaScriptProxy注册。在非可信的Web组件中注入JavaScript对象，可能会导致应用被恶意攻击。</li>        <li>在注册registerJavaScriptProxy后，应用会将JavaScript对象暴露给所有的页面frames。</li>        <li>同一方法在同步与异步列表中重复注册，将默认异步调用。</li>        <li>同步函数列表和异步函数列表不可同时为空，否则此次调用接口注册失败。</li>        <li>异步的作用在于：H5线程将异步JavaScript任务提交给ETS主线程后，无需等待任务执行完成并返回结果，H5线程即可继续执行后续任务。这在执行耗时较长的JavaScript任务或ETS线程较为拥堵的情况下，可以有效减少H5线程因JavaScript任务而被阻塞的情况。然而，异步JavaScript任务无法返回值，且任务执行的顺序无法保证，因此需要根据具体情境判断是否使用同步或异步方式。</li>        <li>注入的对象在页面下一次（重新）加载前不会出现在JavaScript中。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">object</td>         <td class="cellrowborder" width="25%">object</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>参与注册的应用侧JavaScript对象。可以单独声明方法和属性，但无法同时进行注册与使用。对象只包含属性时，H5可以访问对象中的属性。对象只包含方法时，H5可以访问对象中的方法。</p>          <p>1. 方法的参数和返回类型可以为string，number，boolean。</p>          <p>2. 方法的参数和返回类型支持Dictionary，Array，最多嵌套10层，每层1w个数据。</p>          <p>3. 方法的参数和返回类型支持Object，需要在Object里添加属性methodNameListForJsProxy:[fun1, fun2]，fun1和fun2为可被调用的方法。</p>          <p>4. 方法的参数支持Function，Promise，它们的Callback不能有返回值。</p>          <p>5. 方法的返回类型支持Promise，Promise的Callback不能有返回值。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册对象的名称，与window中调用的对象名一致。注册后window对象可以通过此名字访问应用侧JavaScript对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">methodList</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">参与注册的应用侧JavaScript对象的同步方法。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">asyncMethodList<sup>12+</sup></td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">参与注册的应用侧JavaScript对象的异步方法，默认为空。异步方法无法获取返回值。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">permission<sup>12+</sup></td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>JSON字符串，默认为空，通过该字符串配置JSBridge的权限管控，可以定义object和method级别的URL白名单。</p>          <p>1. scheme（协议）和host（域名）参数不可为空，且host不支持通配符，只能填写完整的host。</p>          <p>2. 可以仅配置object级别的白名单，该白名单对所有JSBridge方法生效。</p>          <p>3. 若JSBridge方法A设置了method级别的白名单，那么方法A最终的白名单是object级别白名单与method级别白名单的交集。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestObj</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">test</span>(<span class="hljs-attr">testStr</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component str'</span> + testStr);</li><li>    <span class="hljs-keyword">return</span> testStr;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">toString</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component toString'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">testNumber</span>(<span class="hljs-attr">testNum</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component number'</span> + testNum);</li><li>    <span class="hljs-keyword">return</span> testNum;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">asyncTestBool</span>(<span class="hljs-attr">testBol</span>: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component boolean'</span> + testBol);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebObj</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">webTest</span>(): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web test'</span>);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-string">"Web test"</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">webString</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web test toString'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncObj</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">asyncTest</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Async test'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">asyncString</span>(<span class="hljs-attr">testStr</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web async string'</span> + testStr);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObjtest</span>: <span class="hljs-title class_">TestObj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestObj</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">webTestObj</span>: <span class="hljs-title class_">WebObj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebObj</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">asyncTestObj</span>: <span class="hljs-title class_">AsyncObj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncObj</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Register JavaScript To Window'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 同时注册同步和异步函数</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">testObjtest</span>, <span class="hljs-string">"objName"</span>, [<span class="hljs-string">"test"</span>, <span class="hljs-string">"toString"</span>, <span class="hljs-string">"testNumber"</span>], [<span class="hljs-string">"asyncTestBool"</span>]);</li><li>            <span class="hljs-comment">// 仅注册同步函数</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">webTestObj</span>, <span class="hljs-string">"objTestName"</span>, [<span class="hljs-string">"webTest"</span>, <span class="hljs-string">"webString"</span>]);</li><li>            <span class="hljs-comment">// 仅注册异步函数</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">asyncTestObj</span>, <span class="hljs-string">"objAsyncName"</span>, [], [<span class="hljs-string">"asyncTest"</span>, <span class="hljs-string">"asyncString"</span>]);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'deleteJavaScriptRegister'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"objName"</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"objTestName"</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"objAsyncName"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"htmlTest()"</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"webDemo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"asyncDemo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">htmlTest</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">          <span class="hljs-comment">// This function call expects to return "ArkUI Web Component"</span></span></li><li><span class="language-javascript">          <span class="hljs-keyword">let</span> str=objName.<span class="hljs-title function_">test</span>(<span class="hljs-string">"webtest data"</span>);</span></li><li><span class="language-javascript">          objName.<span class="hljs-title function_">testNumber</span>(<span class="hljs-number">1</span>);</span></li><li><span class="language-javascript">          objName.<span class="hljs-title function_">asyncTestBool</span>(<span class="hljs-literal">true</span>);</span></li><li><span class="language-javascript">          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"demo"</span>).<span class="hljs-property">innerHTML</span>=str;</span></li><li><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'objName.test result:'</span>+ str)</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">          <span class="hljs-comment">// This function call expects to return "Web test"</span></span></li><li><span class="language-javascript">          <span class="hljs-keyword">let</span> webStr = objTestName.<span class="hljs-title function_">webTest</span>();</span></li><li><span class="language-javascript">          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"webDemo"</span>).<span class="hljs-property">innerHTML</span>=webStr;</span></li><li><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'objTestName.webTest result:'</span>+ webStr)</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">          objAsyncName.<span class="hljs-title function_">asyncTest</span>();</span></li><li><span class="language-javascript">          objAsyncName.<span class="hljs-title function_">asyncString</span>(<span class="hljs-string">"async test data"</span>);</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript">      </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>     <p>更多示例，请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-in-page-app-function-invoking" target="_blank">前端页面调用应用侧函数</a>。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2709px;">     <h2 id="runjavascript" device-type="phone,2in1,tablet,wearable,tv">runJavaScript<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="runjavascript" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>runJavaScript(script: string, callback : AsyncCallback&lt;string&gt;): void</p>     <p>在当前显示页面的上下文中异步执行JavaScript脚本，脚本执行的结果将通过异步回调方式返回。此方法必须在用户界面（UI）线程上使用 ，并且回调也将在用户界面（UI）线程上调用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>跨导航操作（如loadUrl）时，JavaScript状态将不再保留。例如，调用loadUrl前定义的全局变量和函数在加载的页面中将不存在。</li>        <li>建议应用程序使用registerJavaScriptProxy来确保JavaScript状态能够在页面导航间保持。</li>        <li>目前不支持传递对象，支持传递结构体。</li>        <li>执行异步方法无法获取返回值，需要根据具体情境判断是否使用同步或异步方式。</li>        <li>前端页面传到Native的string数据类型会被视为json格式的数据，需要调用JSON.parse反序列化。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">script</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">JavaScript脚本。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调执行JavaScript脚本结果。JavaScript脚本若执行失败或无返回值时，返回null。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">webResult</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">webResult</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onPageEnd</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">runJavaScript</span>(</li><li>              <span class="hljs-string">'test()'</span>,</li><li>              <span class="hljs-function">(<span class="hljs-params">error, result</span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (error) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`run JavaScript error, ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>                  <span class="hljs-keyword">return</span>;</li><li>                }</li><li>                <span class="hljs-keyword">if</span> (result) {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">webResult</span> = result;</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`The test() return value is: <span class="hljs-subst">${result}</span>`</span>);</li><li>                }</li><li>              });</li><li>            <span class="hljs-keyword">if</span> (e) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url: '</span>, e.<span class="hljs-property">url</span>);</li><li>            }</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>    Hello world!</li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Ark WebComponent'</span>)</span></li><li><span class="language-javascript">        <span class="hljs-keyword">return</span> <span class="hljs-string">"This value is from index.html"</span></span></li><li><span class="language-javascript">      }</span></li><li><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2643px;">     <h2 id="runjavascript-1" device-type="phone,2in1,tablet,wearable,tv">runJavaScript<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="runjavascript-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>runJavaScript(script: string): Promise&lt;string&gt;</p>     <p>在当前显示页面的上下文中异步执行JavaScript脚本，脚本执行的结果将通过Promise方式返回。此方法必须在用户界面（UI）线程上使用 ，并且回调也将在用户界面（UI）线程上调用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>跨导航操作（如loadUrl）时，JavaScript状态 将不再保留，例如，调用loadUrl前定义的全局变量和函数在加载的页面中将不存在。</li>        <li>建议应用程序使用registerJavaScriptProxy来确保JavaScript状态能够在页面导航间保持。</li>        <li>目前不支持传递对象，支持传递结构体。</li>        <li>执行异步方法无法获取返回值，需要根据具体情境判断是否使用同步或异步方式。</li>        <li>前端页面传到Native的string数据类型会被视为json格式的数据，需要调用JSON.parse反序列化。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">script</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">JavaScript脚本。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，返回脚本执行的结果，执行失败返回null。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onPageEnd</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">runJavaScript</span>(<span class="hljs-string">'test()'</span>)</li><li>              .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'result: '</span> + result);</li><li>              })</li><li>              .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"error: "</span> + error);</li><li>              })</li><li>            <span class="hljs-keyword">if</span> (e) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url: '</span>, e.<span class="hljs-property">url</span>);</li><li>            }</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>    Hello world!</li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Ark WebComponent'</span>)</span></li><li><span class="language-javascript">        <span class="hljs-keyword">return</span> <span class="hljs-string">"This value is from index.html"</span></span></li><li><span class="language-javascript">      }</span></li><li><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 5521px;">     <h2 id="runjavascriptext10" device-type="phone,2in1,tablet,wearable,tv">runJavaScriptExt<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="runjavascriptext10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>runJavaScriptExt(script: string | ArrayBuffer, callback : AsyncCallback&lt;JsMessageExt&gt;): void</p>     <p>异步执行JavaScript脚本，并通过回调方式返回脚本执行的结果。runJavaScriptExt需要在loadUrl完成后，比如onPageEnd中调用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>前端页面传到Native的string数据类型会被视为json格式的数据，需要调用JSON.parse反序列化。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">script</td>         <td class="cellrowborder" width="25%">string | ArrayBuffer<sup>12+</sup></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">JavaScript脚本。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-jsmessageext">JsMessageExt</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调执行JavaScript脚本结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">msg1</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">msg2</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onPageEnd</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">runJavaScriptExt</span>(</li><li>              <span class="hljs-string">'test()'</span>,</li><li>              <span class="hljs-function">(<span class="hljs-params">error, result</span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (error) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`run JavaScript error, ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>)</li><li>                  <span class="hljs-keyword">return</span>;</li><li>                }</li><li>                <span class="hljs-keyword">if</span> (result) {</li><li>                  <span class="hljs-keyword">try</span> {</li><li>                    <span class="hljs-keyword">let</span> <span class="hljs-keyword">type</span> = result.<span class="hljs-title function_">getType</span>();</li><li>                    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">type</span>) {</li><li>                      <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">STRING</span>: {</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getString</span>());</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getString:"</span> + ((result.<span class="hljs-title function_">getString</span>()));</li><li>                        <span class="hljs-keyword">break</span>;</li><li>                      }</li><li>                      <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">NUMBER</span>: {</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getNumber</span>());</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getNumber:"</span> + ((result.<span class="hljs-title function_">getNumber</span>()));</li><li>                        <span class="hljs-keyword">break</span>;</li><li>                      }</li><li>                      <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">BOOLEAN</span>: {</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getBoolean</span>());</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getBoolean:"</span> + ((result.<span class="hljs-title function_">getBoolean</span>()));</li><li>                        <span class="hljs-keyword">break</span>;</li><li>                      }</li><li>                      <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">ARRAY_BUFFER</span>: {</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getArrayBuffer</span>());</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getArrayBuffer byteLength:"</span> + ((result.<span class="hljs-title function_">getArrayBuffer</span>().<span class="hljs-property">byteLength</span>));</li><li>                        <span class="hljs-keyword">break</span>;</li><li>                      }</li><li>                      <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">ARRAY</span>: {</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getArray</span>());</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getArray:"</span> + result.<span class="hljs-title function_">getArray</span>();</li><li>                        <span class="hljs-keyword">break</span>;</li><li>                      }</li><li>                      <span class="hljs-attr">default</span>: {</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"default break, type:"</span> + <span class="hljs-keyword">type</span>;</li><li>                        <span class="hljs-keyword">break</span>;</li><li>                      }</li><li>                    }</li><li>                  }</li><li>                  <span class="hljs-keyword">catch</span> (resError) {</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>                  }</li><li>                }</li><li>              });</li><li>            <span class="hljs-keyword">if</span> (e) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url: '</span>, e.<span class="hljs-property">url</span>);</li><li>            }</li><li>          } <span class="hljs-keyword">catch</span> (resError) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 使用ArrayBuffer入参，从文件中获取JavaScript脚本数据。</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">msg1</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">msg2</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'runJavaScriptExt'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> uiContext : <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>            <span class="hljs-keyword">let</span> context : <span class="hljs-title class_">Context</span> | <span class="hljs-literal">undefined</span> = uiContext.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>            <span class="hljs-keyword">let</span> filePath = context!.<span class="hljs-property">filesDir</span> + <span class="hljs-string">'test.txt'</span>;</li><li>            <span class="hljs-comment">// 新建并打开文件。</span></li><li>            <span class="hljs-keyword">let</span> file = fileIo.<span class="hljs-title function_">openSync</span>(filePath, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span> | fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span>);</li><li>            <span class="hljs-comment">// 写入一段内容至文件。</span></li><li>            fileIo.<span class="hljs-title function_">writeSync</span>(file.<span class="hljs-property">fd</span>, <span class="hljs-string">"test()"</span>);</li><li>            <span class="hljs-comment">// 从文件中读取内容。</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">arrayBuffer</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">6</span>);</li><li>            fileIo.<span class="hljs-title function_">readSync</span>(file.<span class="hljs-property">fd</span>, arrayBuffer, { <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">length</span>: arrayBuffer.<span class="hljs-property">byteLength</span> });</li><li>            <span class="hljs-comment">// 关闭文件。</span></li><li>            fileIo.<span class="hljs-title function_">closeSync</span>(file);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">runJavaScriptExt</span>(</li><li>              arrayBuffer,</li><li>              <span class="hljs-function">(<span class="hljs-params">error, result</span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (error) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`run JavaScript error, ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>)</li><li>                  <span class="hljs-keyword">return</span>;</li><li>                }</li><li>                <span class="hljs-keyword">if</span> (result) {</li><li>                  <span class="hljs-keyword">try</span> {</li><li>                    <span class="hljs-keyword">let</span> <span class="hljs-keyword">type</span> = result.<span class="hljs-title function_">getType</span>();</li><li>                    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">type</span>) {</li><li>                      <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">STRING</span>: {</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getString</span>());</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getString:"</span> + ((result.<span class="hljs-title function_">getString</span>()));</li><li>                        <span class="hljs-keyword">break</span>;</li><li>                      }</li><li>                      <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">NUMBER</span>: {</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getNumber</span>());</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getNumber:"</span> + ((result.<span class="hljs-title function_">getNumber</span>()));</li><li>                        <span class="hljs-keyword">break</span>;</li><li>                      }</li><li>                      <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">BOOLEAN</span>: {</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getBoolean</span>());</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getBoolean:"</span> + ((result.<span class="hljs-title function_">getBoolean</span>()));</li><li>                        <span class="hljs-keyword">break</span>;</li><li>                      }</li><li>                      <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">ARRAY_BUFFER</span>: {</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getArrayBuffer</span>());</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getArrayBuffer byteLength:"</span> + ((result.<span class="hljs-title function_">getArrayBuffer</span>().<span class="hljs-property">byteLength</span>));</li><li>                        <span class="hljs-keyword">break</span>;</li><li>                      }</li><li>                      <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">ARRAY</span>: {</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getArray</span>());</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getArray:"</span> + result.<span class="hljs-title function_">getArray</span>();</li><li>                        <span class="hljs-keyword">break</span>;</li><li>                      }</li><li>                      <span class="hljs-attr">default</span>: {</li><li>                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"default break, type:"</span> + <span class="hljs-keyword">type</span>;</li><li>                        <span class="hljs-keyword">break</span>;</li><li>                      }</li><li>                    }</li><li>                  }</li><li>                  <span class="hljs-keyword">catch</span> (resError) {</li><li>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>                  }</li><li>                }</li><li>              });</li><li>          } <span class="hljs-keyword">catch</span> (resError) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en-gb"</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>run JavaScript Ext demo<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">  <span class="hljs-keyword">return</span> <span class="hljs-string">"hello, world"</span>;</span></li><li><span class="language-javascript">}</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 5311px;">     <h2 id="runjavascriptext10-1" device-type="phone,2in1,tablet,wearable,tv">runJavaScriptExt<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="runjavascriptext10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>runJavaScriptExt(script: string | ArrayBuffer): Promise&lt;JsMessageExt&gt;</p>     <p>异步执行JavaScript脚本，并通过Promise方式返回脚本执行的结果。runJavaScriptExt需要在loadUrl完成后，比如onPageEnd中调用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>前端页面传到Native的string数据类型会被视为json格式的数据，需要调用JSON.parse反序列化。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">script</td>         <td class="cellrowborder" width="25%">string | ArrayBuffer<sup>12+</sup></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">JavaScript脚本。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-jsmessageext">JsMessageExt</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，返回脚本执行的结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">webResult</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">msg1</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">msg2</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">webResult</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">onPageEnd</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">runJavaScriptExt</span>(<span class="hljs-string">'test()'</span>)</li><li>            .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">try</span> {</li><li>                <span class="hljs-keyword">let</span> <span class="hljs-keyword">type</span> = result.<span class="hljs-title function_">getType</span>();</li><li>                <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">type</span>) {</li><li>                  <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">STRING</span>: {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getString</span>());</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getString:"</span> + ((result.<span class="hljs-title function_">getString</span>()));</li><li>                    <span class="hljs-keyword">break</span>;</li><li>                  }</li><li>                  <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">NUMBER</span>: {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getNumber</span>());</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getNumber:"</span> + ((result.<span class="hljs-title function_">getNumber</span>()));</li><li>                    <span class="hljs-keyword">break</span>;</li><li>                  }</li><li>                  <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">BOOLEAN</span>: {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getBoolean</span>());</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getBoolean:"</span> + ((result.<span class="hljs-title function_">getBoolean</span>()));</li><li>                    <span class="hljs-keyword">break</span>;</li><li>                  }</li><li>                  <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">ARRAY_BUFFER</span>: {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getArrayBuffer</span>());</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getArrayBuffer byteLength:"</span> + ((result.<span class="hljs-title function_">getArrayBuffer</span>().<span class="hljs-property">byteLength</span>));</li><li>                    <span class="hljs-keyword">break</span>;</li><li>                  }</li><li>                  <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">ARRAY</span>: {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getArray</span>());</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getArray:"</span> + result.<span class="hljs-title function_">getArray</span>();</li><li>                    <span class="hljs-keyword">break</span>;</li><li>                  }</li><li>                  <span class="hljs-attr">default</span>: {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"default break, type:"</span> + <span class="hljs-keyword">type</span>;</li><li>                    <span class="hljs-keyword">break</span>;</li><li>                  }</li><li>                }</li><li>              }</li><li>              <span class="hljs-keyword">catch</span> (resError) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>              }</li><li>            }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"error: "</span> + error);</li><li>          })</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// 使用ArrayBuffer入参，从文件中获取JavaScript脚本数据。</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">msg1</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">msg2</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'runJavaScriptExt'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> uiContext : <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>            <span class="hljs-keyword">let</span> context : <span class="hljs-title class_">Context</span> | <span class="hljs-literal">undefined</span> = uiContext.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>            <span class="hljs-keyword">let</span> filePath = context!.<span class="hljs-property">filesDir</span> + <span class="hljs-string">'test.txt'</span>;</li><li>            <span class="hljs-comment">// 新建并打开文件。</span></li><li>            <span class="hljs-keyword">let</span> file = fileIo.<span class="hljs-title function_">openSync</span>(filePath, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span> | fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span>);</li><li>            <span class="hljs-comment">// 写入一段内容至文件。</span></li><li>            fileIo.<span class="hljs-title function_">writeSync</span>(file.<span class="hljs-property">fd</span>, <span class="hljs-string">"test()"</span>);</li><li>            <span class="hljs-comment">// 从文件中读取内容。</span></li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">arrayBuffer</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">6</span>);</li><li>            fileIo.<span class="hljs-title function_">readSync</span>(file.<span class="hljs-property">fd</span>, arrayBuffer, { <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">length</span>: arrayBuffer.<span class="hljs-property">byteLength</span> });</li><li>            <span class="hljs-comment">// 关闭文件。</span></li><li>            fileIo.<span class="hljs-title function_">closeSync</span>(file);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">runJavaScriptExt</span>(arrayBuffer)</li><li>              .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">try</span> {</li><li>                  <span class="hljs-keyword">let</span> <span class="hljs-keyword">type</span> = result.<span class="hljs-title function_">getType</span>();</li><li>                  <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">type</span>) {</li><li>                    <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">STRING</span>: {</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getString</span>());</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getString:"</span> + ((result.<span class="hljs-title function_">getString</span>()));</li><li>                      <span class="hljs-keyword">break</span>;</li><li>                    }</li><li>                    <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">NUMBER</span>: {</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getNumber</span>());</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getNumber:"</span> + ((result.<span class="hljs-title function_">getNumber</span>()));</li><li>                      <span class="hljs-keyword">break</span>;</li><li>                    }</li><li>                    <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">BOOLEAN</span>: {</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getBoolean</span>());</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getBoolean:"</span> + ((result.<span class="hljs-title function_">getBoolean</span>()));</li><li>                      <span class="hljs-keyword">break</span>;</li><li>                    }</li><li>                    <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">ARRAY_BUFFER</span>: {</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getArrayBuffer</span>());</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getArrayBuffer byteLength:"</span> + ((result.<span class="hljs-title function_">getArrayBuffer</span>().<span class="hljs-property">byteLength</span>));</li><li>                      <span class="hljs-keyword">break</span>;</li><li>                    }</li><li>                    <span class="hljs-keyword">case</span> webview.<span class="hljs-property">JsMessageType</span>.<span class="hljs-property">ARRAY</span>: {</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"result type:"</span> + <span class="hljs-keyword">typeof</span> (result.<span class="hljs-title function_">getArray</span>());</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg2</span> = <span class="hljs-string">"result getArray:"</span> + result.<span class="hljs-title function_">getArray</span>();</li><li>                      <span class="hljs-keyword">break</span>;</li><li>                    }</li><li>                    <span class="hljs-attr">default</span>: {</li><li>                      <span class="hljs-variable language_">this</span>.<span class="hljs-property">msg1</span> = <span class="hljs-string">"default break, type:"</span> + <span class="hljs-keyword">type</span>;</li><li>                      <span class="hljs-keyword">break</span>;</li><li>                    }</li><li>                  }</li><li>                }</li><li>                <span class="hljs-keyword">catch</span> (resError) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>                }</li><li>              })</li><li>              .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"error: "</span> + error);</li><li>              })</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en-gb"</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>run JavaScript Ext demo<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">  <span class="hljs-keyword">return</span> <span class="hljs-string">"hello, world"</span>;</span></li><li><span class="language-javascript">}</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2875px;">     <h2 id="deletejavascriptregister" device-type="phone,2in1,tablet,wearable,tv">deleteJavaScriptRegister<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="deletejavascriptregister" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>deleteJavaScriptRegister(name: string): void</p>     <p>删除通过registerJavaScriptProxy注册到window上的指定name的应用侧JavaScript对象。删除后，须调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#refresh">refresh</a>接口。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">注册对象的名称，可在网页侧JavaScript中通过此名称调用应用侧JavaScript对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100008</td>         <td class="cellrowborder" width="50%">Failed to delete JavaScriptProxy because it does not exist.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestObj</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">test</span>(): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-string">"ArkUI Web Component"</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">toString</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component toString'</span>);</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObjtest</span>: <span class="hljs-title class_">TestObj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestObj</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'objName'</span>;</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Register JavaScript To Window'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">testObjtest</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>, [<span class="hljs-string">"test"</span>, <span class="hljs-string">"toString"</span>]);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'deleteJavaScriptRegister'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"htmlTest()"</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">htmlTest</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">          <span class="hljs-keyword">let</span> str=objName.<span class="hljs-title function_">test</span>();</span></li><li><span class="language-javascript">          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"demo"</span>).<span class="hljs-property">innerHTML</span>=str;</span></li><li><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'objName.test result:'</span>+ str)</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript">      </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1687px;">     <h2 id="zoom" device-type="phone,2in1,tablet,wearable,tv">zoom<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zoom" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>zoom(factor: number): void</p>     <p>调整当前网页的缩放比例，<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#zoomaccess">zoomAccess</a>需为true。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">factor</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>基于当前网页所需调整的相对缩放比例，入参要求大于0，当入参为1时为默认加载网页的缩放比例，入参小于1为缩小，入参大于1为放大。</p>          <p>取值范围：(0，100]。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100004</td>         <td class="cellrowborder" width="50%">Function not enabled.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">factor</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'zoom'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">zoom</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">factor</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">zoomAccess</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1932px;">     <h2 id="searchallasync" device-type="phone,2in1,tablet,wearable,tv">searchAllAsync<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="searchallasync" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>searchAllAsync(searchString: string): void</p>     <p>异步查找网页中所有匹配关键字'searchString'的内容并高亮，结果通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onsearchresultreceive9">onSearchResultReceive</a>异步返回。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">searchString</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">查找的关键字。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">searchString</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"Hello World"</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'searchString'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">searchAllAsync</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">searchString</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onSearchResultReceive</span>(<span class="hljs-function"><span class="hljs-params">ret</span> =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (ret) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"on search result receive:"</span> + <span class="hljs-string">"[cur]"</span> + ret.<span class="hljs-property">activeMatchOrdinal</span> +</li><li>              <span class="hljs-string">"[total]"</span> + ret.<span class="hljs-property">numberOfMatches</span> + <span class="hljs-string">"[isDone]"</span> + ret.<span class="hljs-property">isDoneCounting</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello World Highlight Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1253px;">     <h2 id="clearmatches" device-type="phone,2in1,tablet,wearable,tv">clearMatches<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearmatches" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearMatches(): void</p>     <p>清除所有通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#searchallasync">searchAllAsync</a>匹配到的高亮字符查找结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'clearMatches'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">clearMatches</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件，请参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#searchallasync">searchAllAsync</a>接口下加载的html文件。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1579px;">     <h2 id="searchnext" device-type="phone,2in1,tablet,wearable,tv">searchNext<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="searchnext" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>searchNext(forward: boolean): void</p>     <p>滚动到下一个匹配的查找结果并高亮。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">forward</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>从前向后或者逆向查找方式。</p>          <p>true表示从前向后查找，false表示从后向前查找。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'searchNext'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">searchNext</span>(<span class="hljs-literal">true</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件，请参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#searchallasync">searchAllAsync</a>接口下加载的html文件。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1210px;">     <h2 id="clearsslcache" device-type="phone,2in1,tablet,wearable,tv">clearSslCache<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearsslcache" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearSslCache(): void</p>     <p>清除Web组件记录的SSL证书错误事件对应的用户操作行为。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'clearSslCache'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">clearSslCache</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1210px;">     <h2 id="clearclientauthenticationcache" device-type="phone,2in1,tablet,wearable,tv">clearClientAuthenticationCache<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearclientauthenticationcache" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearClientAuthenticationCache(): void</p>     <p>清除Web组件记录的客户端证书请求事件对应的用户操作行为。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'clearClientAuthenticationCache'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">clearClientAuthenticationCache</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1138px;">     <h2 id="createwebmessageports" device-type="phone,2in1,tablet,wearable,tv">createWebMessagePorts<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createwebmessageports" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createWebMessagePorts(isExtentionType?: boolean): Array&lt;WebMessagePort&gt;</p>     <p>创建Web消息端口。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">isExtentionType<sup>10+</sup></td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>是否使用扩展增强接口。</p>          <p>true表示使用扩展增强接口，false表示不使用扩展增强接口。</p>          <p>默认值：false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webmessageport">WebMessagePort</a>&gt;</td>         <td class="cellrowborder" width="50%">web消息端口列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>完整示例代码参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webmessageport#onmessageeventext10">onMessageEventExt</a>。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4218px;">     <h2 id="postmessage" device-type="phone,2in1,tablet,wearable,tv">postMessage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="postmessage" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>postMessage(name: string, ports: Array&lt;WebMessagePort&gt;, uri: string): void</p>     <p>发送Web消息端口到HTML。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">name</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要发送的消息名称。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">ports</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webmessageport">WebMessagePort</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要发送的消息端口。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">接收该消息的URI。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">ports</span>: webview.<span class="hljs-property">WebMessagePort</span>[] = [];</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">sendFromEts</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Send this message from ets to HTML'</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">receivedFromHtml</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Display received message send from HTML'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 展示接收到的来自HTML的内容</span></li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">receivedFromHtml</span>)</li><li>      <span class="hljs-comment">// 输入框的内容发送到html</span></li><li>      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'Send this message from ets to HTML'</span> })</li><li>        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">sendFromEts</span> = value;</li><li>        })</li><li>
</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'postMessage'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 1、创建两个消息端口。</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">createWebMessagePorts</span>();</li><li>            <span class="hljs-comment">// 2、在应用侧的消息端口(如端口1)上注册回调事件。</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span>[<span class="hljs-number">1</span>].<span class="hljs-title function_">onMessageEvent</span>(<span class="hljs-function">(<span class="hljs-params">result: webview.WebMessage</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">let</span> msg = <span class="hljs-string">'Got msg from HTML:'</span>;</li><li>              <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (result) == <span class="hljs-string">"string"</span>) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"received string message from html5, string is:"</span> + result);</li><li>                msg = msg + result;</li><li>              } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (result) == <span class="hljs-string">"object"</span>) {</li><li>                <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">ArrayBuffer</span>) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"received arraybuffer from html5, length is:"</span> + result.<span class="hljs-property">byteLength</span>);</li><li>                  msg = msg + <span class="hljs-string">"length is "</span> + result.<span class="hljs-property">byteLength</span>;</li><li>                } <span class="hljs-keyword">else</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"not support"</span>);</li><li>                }</li><li>              } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"not support"</span>);</li><li>              }</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">receivedFromHtml</span> = msg;</li><li>            })</li><li>            <span class="hljs-comment">// 3、将另一个消息端口(如端口0)发送到HTML侧，由HTML侧保存并使用。</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">postMessage</span>(<span class="hljs-string">'__init_port__'</span>, [<span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span>[<span class="hljs-number">0</span>]], <span class="hljs-string">'*'</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>
</li><li>      <span class="hljs-comment">// 4、使用应用侧的端口给另一个已经发送到html的端口发送消息。</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'SendDataToHTML'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span>[<span class="hljs-number">1</span>]) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">ports</span>[<span class="hljs-number">1</span>].<span class="hljs-title function_">postMessageEvent</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sendFromEts</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ports is null, Please initialize first`</span>);</li><li>            }</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>WebView Message Port Demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>
</li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>WebView Message Port Demo<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"SendToEts"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"PostMsgToEts(msgFromJS.value);"</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"msgFromJS"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"send this message from HTML to ets"</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"output"</span>&gt;</span>display received message send from ets<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"xxx.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="js prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">//xxx.js</span></li><li><span class="hljs-keyword">var</span> h5Port;</li><li><span class="hljs-keyword">var</span> output = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.output'</span>);</li><li><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {</li><li>    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">data</span> == <span class="hljs-string">'__init_port__'</span>) {</li><li>        <span class="hljs-keyword">if</span> (event.<span class="hljs-property">ports</span>[<span class="hljs-number">0</span>] != <span class="hljs-literal">null</span>) {</li><li>            h5Port = event.<span class="hljs-property">ports</span>[<span class="hljs-number">0</span>]; <span class="hljs-comment">// 1. 保存从ets侧发送过来的端口</span></li><li>            h5Port.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {</li><li>              <span class="hljs-comment">// 2. 接收ets侧发送过来的消息.</span></li><li>              <span class="hljs-keyword">var</span> msg = <span class="hljs-string">'Got message from ets:'</span>;</li><li>              <span class="hljs-keyword">var</span> result = event.<span class="hljs-property">data</span>;</li><li>              <span class="hljs-keyword">if</span> (<span class="hljs-title function_">typeof</span>(result) == <span class="hljs-string">"string"</span>) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"received string message from html5, string is:"</span> + result);</li><li>                msg = msg + result;</li><li>              } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">typeof</span>(result) == <span class="hljs-string">"object"</span>) {</li><li>                <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">ArrayBuffer</span>) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"received arraybuffer from html5, length is:"</span> + result.<span class="hljs-property">byteLength</span>);</li><li>                  msg = msg + <span class="hljs-string">"length is "</span> + result.<span class="hljs-property">byteLength</span>;</li><li>                } <span class="hljs-keyword">else</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"not support"</span>);</li><li>                }</li><li>              } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"not support"</span>);</li><li>              }</li><li>              output.<span class="hljs-property">innerHTML</span> = msg;</li><li>            }</li><li>        }</li><li>    }</li><li>})</li><li>
</li><li><span class="hljs-comment">// 3. 使用h5Port往ets侧发送消息.</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">PostMsgToEts</span>(<span class="hljs-params">data</span>) {</li><li>    <span class="hljs-keyword">if</span> (h5Port) {</li><li>      h5Port.<span class="hljs-title function_">postMessage</span>(data);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"h5Port is null, Please initialize first"</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1210px;">     <h2 id="requestfocus" device-type="phone,2in1,tablet,wearable,tv">requestFocus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="requestfocus" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>requestFocus(): void</p>     <p>使当前web页面获取焦点。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'requestFocus'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">requestFocus</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        });</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1265px;">     <h2 id="zoomin" device-type="phone,2in1,tablet,wearable,tv">zoomIn<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zoomin" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>zoomIn(): void</p>     <p>调用此接口将当前网页进行放大，比例为25%。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100004</td>         <td class="cellrowborder" width="50%">Function not enabled.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'zoomIn'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">zoomIn</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1265px;">     <h2 id="zoomout" device-type="phone,2in1,tablet,wearable,tv">zoomOut<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="zoomout" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>zoomOut(): void</p>     <p>调用此接口将当前网页进行缩小，比例为20%。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100004</td>         <td class="cellrowborder" width="50%">Function not enabled.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'zoomOut'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">zoomOut</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1405px;">     <h2 id="getwebid" device-type="phone,2in1,tablet,wearable,tv">getWebId<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getwebid" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getWebId(): number</p>     <p>获取当前Web组件的索引值，用于多个Web组件的管理。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">当前Web组件的索引值。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getWebId'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> id = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getWebId</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"id: "</span> + id);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2257px;">     <h2 id="getuseragent" device-type="phone,2in1,tablet,wearable,tv">getUserAgent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getuseragent" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getUserAgent(): string</p>     <p>获取当前默认用户代理。</p>     <p>默认User-Agent定义与使用场景请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-default-useragent" target="_blank">User-Agent开发指导</a></p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">默认用户代理。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getUserAgent'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> userAgent = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getUserAgent</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"userAgent: "</span> + userAgent);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>支持开发者基于默认的User-Agent去定制User-Agent。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">ua</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    webview.<span class="hljs-title function_">once</span>(<span class="hljs-string">'webInited'</span>, <span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-keyword">try</span> {</li><li>        <span class="hljs-comment">// 应用侧用法示例，定制User-Agent。</span></li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">ua</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getUserAgent</span>() + <span class="hljs-string">'xxx'</span>;</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setCustomUserAgent</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">ua</span>);</li><li>      } <span class="hljs-keyword">catch</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>      }</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1405px;">     <h2 id="gettitle" device-type="phone,2in1,tablet,wearable,tv">getTitle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gettitle" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getTitle(): string</p>     <p>获取当前网页的标题。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">当前网页的标题。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.38.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例:</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getTitle'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> title = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getTitle</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"title: "</span> + title);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1405px;">     <h2 id="getpageheight" device-type="phone,2in1,tablet,wearable,tv">getPageHeight<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getpageheight" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPageHeight(): number</p>     <p>获取当前网页的页面高度。具体使用详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-getpage-height" target="_blank">获取网页内容高度</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">当前网页的页面高度。单位：vp。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.39.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例:</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getPageHeight'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> pageHeight = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getPageHeight</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"pageHeight : "</span> + pageHeight);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1969px;">     <h2 id="storewebarchive" device-type="phone,2in1,tablet,wearable,tv">storeWebArchive<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="storewebarchive" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>storeWebArchive(baseName: string, autoName: boolean, callback: AsyncCallback&lt;string&gt;): void</p>     <p>以回调方式异步保存当前页面。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">baseName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">生成的离线网页存储位置，该值不能为空。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">autoName</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>决定是否自动生成文件名。</p>          <p>false表示按baseName的文件名存储，true表示根据当前Url自动生成文件名，并按baseName的文件目录存储。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">返回文件存储路径，保存网页失败会返回null。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.40.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100003</td>         <td class="cellrowborder" width="50%">Invalid resource path or file type.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'storeWebArchive'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">storeWebArchive</span>(<span class="hljs-string">"/data/storage/el2/base/"</span>, <span class="hljs-literal">true</span>, <span class="hljs-function">(<span class="hljs-params">error, filename</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">if</span> (error) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`save web archive error, ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>                <span class="hljs-keyword">return</span>;</li><li>              }</li><li>              <span class="hljs-keyword">if</span> (filename != <span class="hljs-literal">null</span>) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`save web archive success: <span class="hljs-subst">${filename}</span>`</span>);</li><li>              }</li><li>            });</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2071px;">     <h2 id="storewebarchive-1" device-type="phone,2in1,tablet,wearable,tv">storeWebArchive<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="storewebarchive-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>storeWebArchive(baseName: string, autoName: boolean): Promise&lt;string&gt;</p>     <p>以Promise方式异步保存当前页面。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">baseName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">生成的离线网页存储位置，该值不能为空。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">autoName</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>决定是否自动生成文件名。</p>          <p>false表示按baseName的文件名存储，true表示根据当前Url自动生成文件名，并按baseName的文件目录存储。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;string&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，保存成功返回文件路径，保存失败返回null。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.41.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100003</td>         <td class="cellrowborder" width="50%">Invalid resource path or file type.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'storeWebArchive'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">storeWebArchive</span>(<span class="hljs-string">"/data/storage/el2/base/"</span>, <span class="hljs-literal">true</span>)</li><li>              .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">filename</span> =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (filename != <span class="hljs-literal">null</span>) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`save web archive success: <span class="hljs-subst">${filename}</span>`</span>)</li><li>                }</li><li>              })</li><li>              .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${error.code}</span>,  Message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>              })</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1405px;">     <h2 id="geturl" device-type="phone,2in1,tablet,wearable,tv">getUrl<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="geturl" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getUrl(): string</p>     <p>获取当前页面的url地址。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">当前页面的url地址。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.42.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getUrl'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> url = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getUrl</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"url: "</span> + url);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1210px;">     <h2 id="stop" device-type="phone,2in1,tablet,wearable,tv">stop<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stop" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stop(): void</p>     <p>停止页面加载。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.43.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'stop'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">stop</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        });</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1536px;">     <h2 id="backorforward" device-type="phone,2in1,tablet,wearable,tv">backOrForward<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="backorforward" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>backOrForward(step: number): void</p>     <p>按照历史栈，前进或者后退指定步长的页面，当历史栈中不存在对应步长的页面时，不会进行页面跳转。</p>     <p>前进或者后退页面时，直接使用已加载过的网页，无需重新加载网页。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">step</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要前进或后退的步长。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.44.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">step</span>: <span class="hljs-built_in">number</span> = -<span class="hljs-number">2</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'backOrForward'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">backOrForward</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">step</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2574px;">     <h2 id="scrollto" device-type="phone,2in1,tablet,wearable,tv">scrollTo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="scrollto" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>scrollTo(x:number, y:number, duration?:number): void</p>     <p>在指定时间内，将页面滚动到指定的绝对位置。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">x</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>绝对位置的水平坐标，当传入数值为负数时，按照传入0处理。</p>          <p>单位：vp。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">y</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>绝对位置的垂直坐标，当传入数值为负数时，按照传入0处理。</p>          <p>单位：vp。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">duration<sup>14+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>滚动动画时间。</p>          <p>单位：ms。</p>          <p>不传入为无动画，当传入数值为负数或传入0时，按照不传入处理。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.45.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'scrollTo'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">scrollTo</span>(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>, <span class="hljs-number">500</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'stopScroll'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">scrollBy</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">//如果想停止当前scroll产生的动画，可再次生成一个1ms的动画去打断该动画。</span></li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-tag">body</span> {</span></li><li><span class="language-css">            <span class="hljs-attribute">width</span>:<span class="hljs-number">2000px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">height</span>:<span class="hljs-number">2000px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">padding-right</span>:<span class="hljs-number">170px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">padding-left</span>:<span class="hljs-number">170px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">border</span>:<span class="hljs-number">5px</span> solid blueviolet;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>Scroll Test</li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2618px;">     <h2 id="scrollby" device-type="phone,2in1,tablet,wearable,tv">scrollBy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="scrollby" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>scrollBy(deltaX:number, deltaY:number,duration?:number): void</p>     <p>在指定时间内将页面滚动指定的偏移量。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deltaX</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>水平偏移量，其中水平向右为正方向。</p>          <p>单位：vp。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">deltaY</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>垂直偏移量，其中垂直向下为正方向。</p>          <p>单位：vp。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">duration<sup>14+</sup></td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>滚动动画时间。</p>          <p>单位：ms。</p>          <p>不传入为无动画，当传入数值为负数或传入0时，按照不传入处理。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.46.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.46.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>嵌套滚动场景中，调用scrollBy不会触发父组件的嵌套滚动。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'scrollBy'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">scrollBy</span>(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>, <span class="hljs-number">500</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'stopScroll'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">scrollBy</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>); <span class="hljs-comment">//如果想停止当前scroll产生的动画，可再次生成一个1ms的动画去打断该动画。</span></li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-tag">body</span> {</span></li><li><span class="language-css">            <span class="hljs-attribute">width</span>:<span class="hljs-number">2000px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">height</span>:<span class="hljs-number">2000px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">padding-right</span>:<span class="hljs-number">170px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">padding-left</span>:<span class="hljs-number">170px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">border</span>:<span class="hljs-number">5px</span> solid blueviolet;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>Scroll Test</li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2632px;">     <h2 id="scrollbywithresult12" device-type="phone,2in1,tablet,wearable,tv">scrollByWithResult<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="scrollbywithresult12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>scrollByWithResult(deltaX: number, deltaY: number): boolean</p>     <p>将页面滚动指定的偏移量，返回值表示此次滚动是否执行成功。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.47.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">deltaX</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>水平偏移量，其中水平向右为正方向。</p>          <p>单位：vp。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">deltaY</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>垂直偏移量，其中垂直向下为正方向。</p>          <p>单位：vp。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">          <p>true表示当前网页可以滑动，false表示当前网页不可以滑动。</p>          <p>默认为false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.47.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.47.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>返回值场景：Web页面处于触摸中状态时，返回false，否则返回true。</li>        <li>同层渲染场景中，Web的同层渲染区域处于触摸中状态时，返回值为true。</li>        <li>嵌套滚动场景中，调用scrollByWithResult不会触发父组件的嵌套滚动。</li>        <li>此接口不保证滑动帧率性能。</li>       </ul>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'scrollByWithResult'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>          <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">scrollByWithResult</span>(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>);</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"original result: "</span> + result);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-tag">body</span> {</span></li><li><span class="language-css">            <span class="hljs-attribute">width</span>:<span class="hljs-number">2000px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">height</span>:<span class="hljs-number">2000px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">padding-right</span>:<span class="hljs-number">170px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">padding-left</span>:<span class="hljs-number">170px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">border</span>:<span class="hljs-number">5px</span> solid blueviolet;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>Scroll Test</li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2241px;">     <h2 id="slidescroll" device-type="phone,2in1,tablet,wearable,tv">slideScroll<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="slidescroll" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>slideScroll(vx:number, vy:number): void</p>     <p>按照指定速度模拟对页面的轻扫滚动动作。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">vx</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>轻扫滚动的水平速度分量，其中水平向右为速度正方向。</p>          <p>单位：vp/ms。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">vy</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>轻扫滚动的垂直速度分量，其中垂直向下为速度正方向。</p>          <p>单位：vp/ms。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.48.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'slideScroll'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">slideScroll</span>(<span class="hljs-number">500</span>, <span class="hljs-number">500</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!--index.html--&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-tag">body</span> {</span></li><li><span class="language-css">            <span class="hljs-attribute">width</span>:<span class="hljs-number">3000px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">height</span>:<span class="hljs-number">3000px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">padding-right</span>:<span class="hljs-number">170px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">padding-left</span>:<span class="hljs-number">170px</span>;</span></li><li><span class="language-css">            <span class="hljs-attribute">border</span>:<span class="hljs-number">5px</span> solid blueviolet;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>Scroll Test</li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1453px;">     <h2 id="getoriginalurl" device-type="phone,2in1,tablet,wearable,tv">getOriginalUrl<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getoriginalurl" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getOriginalUrl(): string</p>     <p>获取当前页面的原始url地址。</p>     <p>风险提示：如果想获取url来做JavascriptProxy通信接口认证，请使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getlastjavascriptproxycallingframeurl12">getLastJavascriptProxyCallingFrameUrl<sup>12+</sup></a></p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">当前页面的原始url地址。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.49.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.49.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getOrgUrl'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> url = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getOriginalUrl</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"original url: "</span> + url);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1429px;">     <h2 id="getfavicon" device-type="phone,2in1,tablet,wearable,tv">getFavicon<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getfavicon" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getFavicon(): image.PixelMap</p>     <p>获取页面的favicon图标。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">image.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">页面favicon图标的PixelMap对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.50.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.50.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">pixelmap</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getFavicon'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixelmap</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getFavicon</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2244px;">     <h2 id="setnetworkavailable" device-type="phone,2in1,tablet,wearable,tv">setNetworkAvailable<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setnetworkavailable" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setNetworkAvailable(enable: boolean): void</p>     <p>设置JavaScript中的window.navigator.onLine属性。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enable</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>设置JavaScript中的window.navigator.onLine属性。</p>          <p>true表示设置JavaScript中的window.navigator.onLine属性为true，false表示设置JavaScript中的window.navigator.onLine属性为false。</p>          <p>默认值：true。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.51.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.51.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'setNetworkAvailable'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setNetworkAvailable</span>(<span class="hljs-literal">true</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>online 属性<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"func()"</span>&gt;</span>click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-comment">// 检测浏览器是否在线。</span></span></li><li><span class="language-javascript">    <span class="hljs-keyword">var</span> online1 = navigator.<span class="hljs-property">onLine</span>;</span></li><li><span class="language-javascript">    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"demo"</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">"浏览器在线："</span> + online1;</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">func</span>(<span class="hljs-params"></span>){</span></li><li><span class="language-javascript">      <span class="hljs-keyword">var</span> online2 = navigator.<span class="hljs-property">onLine</span>;</span></li><li><span class="language-javascript">      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"demo"</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">"浏览器在线："</span> + online2;</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1680px;">     <h2 id="hasimage" device-type="phone,2in1,tablet,wearable,tv">hasImage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hasimage" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>hasImage(callback: AsyncCallback&lt;boolean&gt;): void</p>     <p>通过Callback方式异步查找当前页面是否存在图像。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;boolean&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>返回查找页面是否存在图像。</p>          <p>true表示页面存在图像；false表示页面不存在图像。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.52.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.52.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'hasImageCb'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">hasImage</span>(<span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">if</span> (error) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`hasImage error, ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>                <span class="hljs-keyword">return</span>;</li><li>              }</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"hasImage: "</span> + data);</li><li>            });</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1580px;">     <h2 id="hasimage-1" device-type="phone,2in1,tablet,wearable,tv">hasImage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="hasimage-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>hasImage(): Promise&lt;boolean&gt;</p>     <p>通过Promise方式异步查找当前页面是否存在图像。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;boolean&gt;</td>         <td class="cellrowborder" width="50%">          <p>Promise实例，返回查找页面是否存在图像。</p>          <p>true表示页面存在图像；false表示页面不存在图像。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.53.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.53.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'hasImagePm'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">hasImage</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'hasImage: '</span> + data);</li><li>            }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"error: "</span> + error);</li><li>            })</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1628px;">     <h2 id="removecache" device-type="phone,2in1,tablet,wearable,tv">removeCache<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removecache" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>removeCache(clearRom: boolean): void</p>     <p>清除应用中的资源缓存文件，此方法将会清除同一应用中所有Webview的缓存文件。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>可以通过在data/storage/el2/base/cache/web/Cache目录下查看Webview的缓存。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">clearRom</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设置为true时同时清除ROM和RAM中的缓存，设置为false时只清除RAM中的缓存。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.54.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.54.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'removeCache'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">removeCache</span>(<span class="hljs-literal">false</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1549px;">     <h2 id="removeallcache18" device-type="phone,2in1,tablet,wearable,tv">removeAllCache<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removeallcache18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static removeAllCache(clearRom: boolean): void</p>     <p>清除应用中的资源缓存文件，此方法将会清除同一应用中所有Webview的缓存文件。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>可以通过在data/app/el2/100/base/&lt;applicationPackageName&gt;/cache/web/目录下查看Webview的缓存。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">clearRom</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">设置为true时同时清除ROM和RAM中的缓存，设置为false时只清除RAM中的缓存。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.55.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.55.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'removeAllCache'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">removeAllCache</span>(<span class="hljs-literal">false</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2340px;">     <h2 id="pageup" device-type="phone,2in1,tablet,wearable,tv">pageUp<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pageup" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pageUp(top: boolean): void</p>     <p>将Webview的内容向上滚动半个视框大小或者跳转到页面最顶部，通过top入参控制。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">top</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>是否跳转到页面最顶部。</p>          <p>false表示将页面内容向上滚动半个视框大小，true表示跳转到页面最顶部。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.56.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.56.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'pageUp'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">pageUp</span>(<span class="hljs-literal">false</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-class">.blue</span> {</span></li><li><span class="language-css">          <span class="hljs-attribute">background-color</span>: lightblue;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">        <span class="hljs-selector-class">.green</span> {</span></li><li><span class="language-css">          <span class="hljs-attribute">background-color</span>: lightgreen;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">        <span class="hljs-selector-class">.blue</span>, <span class="hljs-selector-class">.green</span> {</span></li><li><span class="language-css">         <span class="hljs-attribute">font-size</span>:<span class="hljs-number">16px</span>;</span></li><li><span class="language-css">         <span class="hljs-attribute">height</span>:<span class="hljs-number">200px</span>;</span></li><li><span class="language-css">         <span class="hljs-attribute">text-align</span>: center;       <span class="hljs-comment">/* 水平居中 */</span></span></li><li><span class="language-css">         <span class="hljs-attribute">line-height</span>: <span class="hljs-number">200px</span>;       <span class="hljs-comment">/* 垂直居中（值等于容器高度） */</span></span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blue"</span> &gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"green"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blue"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"green"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blue"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"green"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blue"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2388px;">     <h2 id="pagedown" device-type="phone,2in1,tablet,wearable,tv">pageDown<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pagedown" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pageDown(bottom: boolean): void</p>     <p>将Webview的内容向下滚动半个视框大小或者跳转到页面最底部，通过bottom入参控制。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">bottom</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>是否跳转到页面最底部。</p>          <p>false时表示将页面内容向下滚动半个视框大小，true表示跳转到页面最底部。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.57.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.57.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'pageDown'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">pageDown</span>(<span class="hljs-literal">false</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-class">.blue</span> {</span></li><li><span class="language-css">          <span class="hljs-attribute">background-color</span>: lightblue;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">        <span class="hljs-selector-class">.green</span> {</span></li><li><span class="language-css">          <span class="hljs-attribute">background-color</span>: lightgreen;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">        <span class="hljs-selector-class">.blue</span>, <span class="hljs-selector-class">.green</span> {</span></li><li><span class="language-css">         <span class="hljs-attribute">font-size</span>:<span class="hljs-number">16px</span>;</span></li><li><span class="language-css">         <span class="hljs-attribute">height</span>:<span class="hljs-number">200px</span>;</span></li><li><span class="language-css">         <span class="hljs-attribute">text-align</span>: center;       <span class="hljs-comment">/* 水平居中 */</span></span></li><li><span class="language-css">         <span class="hljs-attribute">line-height</span>: <span class="hljs-number">200px</span>;       <span class="hljs-comment">/* 垂直居中（值等于容器高度） */</span></span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blue"</span> &gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"green"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blue"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"green"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blue"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"green"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blue"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1497px;">     <h2 id="getbackforwardentries" device-type="phone,2in1,tablet,wearable,tv">getBackForwardEntries<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getbackforwardentries" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getBackForwardEntries(): BackForwardList</p>     <p>获取当前Webview的历史信息列表。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onloadintercept10">onLoadIntercept</a>在加载开始的时候触发，该时刻还未生成历史节点，所以在onLoadIntercept中调用getBackForwardEntries拿到的历史栈不包括当前正在加载中的跳转。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-backforwardlist">BackForwardList</a></td>         <td class="cellrowborder" width="50%">当前Webview的历史信息列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.58.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.58.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getBackForwardEntries'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> list = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getBackForwardEntries</span>()</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2041px;">     <h2 id="serializewebstate" device-type="phone,2in1,tablet,wearable,tv">serializeWebState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="serializewebstate" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>serializeWebState(): Uint8Array</p>     <p>将当前Webview的页面状态历史记录信息序列化。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Uint8Array</td>         <td class="cellrowborder" width="50%">当前Webview的页面状态历史记录序列化后的数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.59.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.59.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>1.对文件的操作需要导入文件管理模块，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-fs">文件管理</a>。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'serializeWebState'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> state = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">serializeWebState</span>();</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>:<span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"cacheDir"</span>);</li><li>            <span class="hljs-keyword">if</span> (path) {</li><li>              path += <span class="hljs-string">'/WebState'</span>;</li><li>              <span class="hljs-comment">// 以同步方法打开文件。</span></li><li>              <span class="hljs-keyword">let</span> file = fileIo.<span class="hljs-title function_">openSync</span>(path, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span> | fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span>);</li><li>              fileIo.<span class="hljs-title function_">writeSync</span>(file.<span class="hljs-property">fd</span>, state.<span class="hljs-property">buffer</span>);</li><li>              fileIo.<span class="hljs-title function_">closeSync</span>(file.<span class="hljs-property">fd</span>);</li><li>            }</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>2.修改EntryAbility.ets。</p>     <p>获取应用缓存文件路径。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>    <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>        <span class="hljs-comment">// 通过在AppStorage对象上绑定cacheDir，可以实现UIAbility组件与Page之间的数据同步。</span></li><li>        <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">"cacheDir"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">cacheDir</span>);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2412px;">     <h2 id="restorewebstate" device-type="phone,2in1,tablet,wearable,tv">restoreWebState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="restorewebstate" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>restoreWebState(state: Uint8Array): void</p>     <p>当前Webview从序列化数据中恢复页面状态历史记录。</p>     <p>如果state过大，可能会导致异常。建议state大于512k时，放弃恢复页面状态历史记录。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">state</td>         <td class="cellrowborder" width="25%">Uint8Array</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">页面状态历史记录序列化数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.60.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.60.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>1.对文件的操作需要导入文件管理模块，详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-fs">文件管理</a>。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { fileIo } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'RestoreWebState'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"cacheDir"</span>);</li><li>            <span class="hljs-keyword">if</span> (path) {</li><li>              path += <span class="hljs-string">'/WebState'</span>;</li><li>              <span class="hljs-comment">// 以同步方法打开文件。</span></li><li>              <span class="hljs-keyword">let</span> file = fileIo.<span class="hljs-title function_">openSync</span>(path, fileIo.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span>);</li><li>              <span class="hljs-keyword">let</span> stat = fileIo.<span class="hljs-title function_">statSync</span>(path);</li><li>              <span class="hljs-keyword">let</span> size = stat.<span class="hljs-property">size</span>;</li><li>              <span class="hljs-keyword">let</span> buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(size);</li><li>              fileIo.<span class="hljs-title function_">read</span>(file.<span class="hljs-property">fd</span>, buf, <span class="hljs-function">(<span class="hljs-params">err, readLen</span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">if</span> (err) {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"console error with error message: "</span> + err.<span class="hljs-property">message</span> + <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>                } <span class="hljs-keyword">else</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"read file data succeed"</span>);</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">restoreWebState</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buf.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, readLen)));</li><li>                  fileIo.<span class="hljs-title function_">closeSync</span>(file);</li><li>                }</li><li>              });</li><li>            }</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>2.修改EntryAbility.ets。</p>     <p>获取应用缓存文件路径。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-comment">// 通过在AppStorage对象上绑定cacheDir，可以实现UIAbility组件与Page之间的数据同步。</span></li><li>    <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">"cacheDir"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">cacheDir</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1728px;">     <h2 id="customizeschemes" device-type="phone,2in1,tablet,wearable,tv">customizeSchemes<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="customizeschemes" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static customizeSchemes(schemes: Array&lt;WebCustomScheme&gt;): void</p>     <p>对Web内核赋予自定义协议url的跨域请求与fetch请求的权限。当Web在跨域fetch自定义协议url时，该fetch请求可被<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#oninterceptrequest9">onInterceptRequest</a>事件接口所拦截，从而开发者可以进一步处理该请求。建议在任何Web组件初始化之前调用该接口。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">schemes</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#webcustomscheme">WebCustomScheme</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">自定义协议配置，最多支持同时配置10个自定义协议。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.61.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.61.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100020</td>         <td class="cellrowborder" width="50%">Failed to register custom schemes.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">responseWeb</span>: <span class="hljs-title class_">WebResourceResponse</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebResourceResponse</span>();</li><li>  <span class="hljs-attr">scheme1</span>: webview.<span class="hljs-property">WebCustomScheme</span> = { <span class="hljs-attr">schemeName</span>: <span class="hljs-string">"name1"</span>, <span class="hljs-attr">isSupportCORS</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">isSupportFetch</span>: <span class="hljs-literal">true</span> };</li><li>  <span class="hljs-attr">scheme2</span>: webview.<span class="hljs-property">WebCustomScheme</span> = { <span class="hljs-attr">schemeName</span>: <span class="hljs-string">"name2"</span>, <span class="hljs-attr">isSupportCORS</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">isSupportFetch</span>: <span class="hljs-literal">true</span> };</li><li>  <span class="hljs-attr">scheme3</span>: webview.<span class="hljs-property">WebCustomScheme</span> = { <span class="hljs-attr">schemeName</span>: <span class="hljs-string">"name3"</span>, <span class="hljs-attr">isSupportCORS</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">isSupportFetch</span>: <span class="hljs-literal">true</span> };</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">customizeSchemes</span>([<span class="hljs-variable language_">this</span>.<span class="hljs-property">scheme1</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">scheme2</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">scheme3</span>]);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onInterceptRequest</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'url:'</span> + event.<span class="hljs-property">request</span>.<span class="hljs-title function_">getRequestUrl</span>());</li><li>          }</li><li>          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">responseWeb</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1869px;">     <h2 id="customizeschemes21" device-type="phone,2in1,tablet,wearable,tv">customizeSchemes<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="customizeschemes21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static customizeSchemes(schemes: Array&lt;WebCustomScheme&gt;, lazyInitWebEngine: boolean): void</p>     <p>对Web内核赋予自定义协议url的跨域请求与fetch请求的权限。当Web在跨域fetch自定义协议url时，该fetch请求可被<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#oninterceptrequest9">onInterceptRequest</a>事件接口所拦截，从而开发者可以进一步处理该请求。建议在任何Web组件初始化之前调用该接口。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">schemes</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#webcustomscheme">WebCustomScheme</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">自定义协议配置，最多支持同时配置10个自定义协议。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">lazyInitWebEngine</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>表示接口内部是否跳过初始化WebEngine。</p>          <p>true表示接口内部跳过初始化WebEngine，并将注册的Schemes暂存，当它真正初始化时，这些Schemes将传递给WebEngine。false表示接口内部自动进行WebEngine初始化。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.62.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.62.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. The length of the schemes array is greater than 10. 2. The character length of the scheme is greater than 32. 3. The character in the scheme is not within the allowed range of lowercase English letters, numbers, and the symbols ".", "+", "-".</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100020</td>         <td class="cellrowborder" width="50%">Failed to register custom schemes.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">responseWeb</span>: <span class="hljs-title class_">WebResourceResponse</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebResourceResponse</span>();</li><li>  <span class="hljs-attr">scheme1</span>: webview.<span class="hljs-property">WebCustomScheme</span> = { <span class="hljs-attr">schemeName</span>: <span class="hljs-string">"name1"</span>, <span class="hljs-attr">isSupportCORS</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">isSupportFetch</span>: <span class="hljs-literal">true</span> };</li><li>  <span class="hljs-attr">scheme2</span>: webview.<span class="hljs-property">WebCustomScheme</span> = { <span class="hljs-attr">schemeName</span>: <span class="hljs-string">"name2"</span>, <span class="hljs-attr">isSupportCORS</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">isSupportFetch</span>: <span class="hljs-literal">true</span> };</li><li>  <span class="hljs-attr">scheme3</span>: webview.<span class="hljs-property">WebCustomScheme</span> = { <span class="hljs-attr">schemeName</span>: <span class="hljs-string">"name3"</span>, <span class="hljs-attr">isSupportCORS</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">isSupportFetch</span>: <span class="hljs-literal">true</span> };</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">customizeSchemes</span>([<span class="hljs-variable language_">this</span>.<span class="hljs-property">scheme1</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">scheme2</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">scheme3</span>], <span class="hljs-literal">true</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4093px;">     <h2 id="getcertificate10" device-type="phone,2in1,tablet,wearable,tv">getCertificate<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcertificate10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCertificate(): Promise&lt;Array&lt;cert.X509Cert&gt;&gt;</p>     <p>获取当前网站的证书信息。使用Web组件加载https网站，会进行SSL证书校验，该接口会通过Promise异步返回当前网站的X509格式证书（X509Cert证书类型定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cert#x509cert">X509Cert</a>定义），便于开发者展示网站证书信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.63.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;Array&lt;cert.X509Cert&gt;&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，用于获取当前加载的https网站的X509格式证书数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.63.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.63.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cert } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">Uint8ArrayToString</span>(<span class="hljs-params">dataArray: <span class="hljs-built_in">Uint8Array</span></span>) {</li><li>  <span class="hljs-keyword">let</span> dataString = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; dataArray.<span class="hljs-property">length</span>; i++) {</li><li>    dataString += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(dataArray[i]);</li><li>  }</li><li>  <span class="hljs-keyword">return</span> dataString;</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ParseX509CertInfo</span>(<span class="hljs-params">x509CertArray: <span class="hljs-built_in">Array</span>&lt;cert.X509Cert&gt;</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'getCertificate success: len = '</span> + x509CertArray.<span class="hljs-property">length</span>;</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; x509CertArray.<span class="hljs-property">length</span>; i++) {</li><li>    res += <span class="hljs-string">', index = '</span> + i + <span class="hljs-string">', issuer name = '</span></li><li>      + <span class="hljs-title class_">Uint8ArrayToString</span>(x509CertArray[i].<span class="hljs-title function_">getIssuerName</span>().<span class="hljs-property">data</span>) + <span class="hljs-string">', subject name = '</span></li><li>      + <span class="hljs-title class_">Uint8ArrayToString</span>(x509CertArray[i].<span class="hljs-title function_">getSubjectName</span>().<span class="hljs-property">data</span>) + <span class="hljs-string">', valid start = '</span></li><li>      + x509CertArray[i].<span class="hljs-title function_">getNotBeforeTime</span>()</li><li>      + <span class="hljs-string">', valid end = '</span> + x509CertArray[i].<span class="hljs-title function_">getNotAfterTime</span>();</li><li>  }</li><li>  <span class="hljs-keyword">return</span> res;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-comment">// outputStr在UI界面显示调试信息</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">outputStr</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-attr">webviewCtl</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">initialIndex</span>: <span class="hljs-number">0</span> }) {</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Button</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">'load bad ssl'</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>            }</li><li>            .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-comment">// 加载一个过期的证书网站，查看获取到的证书信息</span></li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewCtl</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">'https://expired.badssl.com'</span>);</li><li>            })</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          }</li><li>
</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Button</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">'load example'</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>            }</li><li>            .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-comment">// 加载一个https网站，查看网站的证书信息</span></li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewCtl</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">'https://www.example.com'</span>);</li><li>            })</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          }</li><li>
</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Button</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">'getCertificate Promise'</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>            }</li><li>            .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-keyword">try</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewCtl</span>.<span class="hljs-title function_">getCertificate</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">x509CertArray: <span class="hljs-built_in">Array</span>&lt;cert.X509Cert&gt;</span>) =&gt;</span> {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span> = <span class="hljs-title class_">ParseX509CertInfo</span>(x509CertArray);</li><li>                })</li><li>              } <span class="hljs-keyword">catch</span> (error) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span> = <span class="hljs-string">'getCertificate failed: '</span> + (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">", errMsg: "</span> + (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>              }</li><li>            })</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          }</li><li>
</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Button</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">'getCertificate AsyncCallback'</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>            }</li><li>            .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-keyword">try</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewCtl</span>.<span class="hljs-title function_">getCertificate</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, x509CertArray: <span class="hljs-built_in">Array</span>&lt;cert.X509Cert&gt;</span>) =&gt;</span> {</li><li>                  <span class="hljs-keyword">if</span> (error) {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span> = <span class="hljs-string">'getCertificate failed: '</span> + error.<span class="hljs-property">code</span> + <span class="hljs-string">", errMsg: "</span> + error.<span class="hljs-property">message</span>;</li><li>                  } <span class="hljs-keyword">else</span> {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span> = <span class="hljs-title class_">ParseX509CertInfo</span>(x509CertArray);</li><li>                  }</li><li>                })</li><li>              } <span class="hljs-keyword">catch</span> (error) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span> = <span class="hljs-string">'getCertificate failed: '</span> + (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">", errMsg: "</span> + (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>              }</li><li>            })</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          }</li><li>        }</li><li>        .<span class="hljs-title function_">listDirection</span>(<span class="hljs-title class_">Axis</span>.<span class="hljs-property">Horizontal</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'10%'</span>)</li><li>
</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>)</li><li>
</li><li>        <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'https://www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewCtl</span> })</li><li>          .<span class="hljs-title function_">fileAccess</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">domStorageAccess</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">onlineImageAccess</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">onPageEnd</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (e) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span> = <span class="hljs-string">'onPageEnd : url = '</span> + e.<span class="hljs-property">url</span>;</li><li>            }</li><li>          })</li><li>          .<span class="hljs-title function_">onSslErrorEventReceive</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {</li><li>            <span class="hljs-comment">// 忽略ssl证书错误，便于测试一些证书过期的网站，如：https://expired.badssl.com</span></li><li>            e.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleConfirm</span>();</li><li>          })</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'70%'</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 4176px;">     <h2 id="getcertificate10-1" device-type="phone,2in1,tablet,wearable,tv">getCertificate<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcertificate10-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCertificate(callback: AsyncCallback&lt;Array&lt;cert.X509Cert&gt;&gt;): void</p>     <p>获取当前网站的证书信息。使用Web组件加载https网站，会进行SSL证书校验，该接口会通过AsyncCallback异步返回当前网站的X509格式证书（X509Cert证书类型定义见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-cert">X509Cert定义</a>），便于开发者展示网站证书信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;cert.X509Cert&gt;&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">通过AsyncCallback异步返回当前网站的X509格式证书。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.64.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.64.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { cert } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceCertificateKit'</span>;</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">Uint8ArrayToString</span>(<span class="hljs-params">dataArray: <span class="hljs-built_in">Uint8Array</span></span>) {</li><li>  <span class="hljs-keyword">let</span> dataString = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; dataArray.<span class="hljs-property">length</span>; i++) {</li><li>    dataString += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(dataArray[i]);</li><li>  }</li><li>  <span class="hljs-keyword">return</span> dataString;</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">ParseX509CertInfo</span>(<span class="hljs-params">x509CertArray: <span class="hljs-built_in">Array</span>&lt;cert.X509Cert&gt;</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'getCertificate success: len = '</span> + x509CertArray.<span class="hljs-property">length</span>;</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; x509CertArray.<span class="hljs-property">length</span>; i++) {</li><li>    res += <span class="hljs-string">', index = '</span> + i + <span class="hljs-string">', issuer name = '</span></li><li>      + <span class="hljs-title class_">Uint8ArrayToString</span>(x509CertArray[i].<span class="hljs-title function_">getIssuerName</span>().<span class="hljs-property">data</span>) + <span class="hljs-string">', subject name = '</span></li><li>      + <span class="hljs-title class_">Uint8ArrayToString</span>(x509CertArray[i].<span class="hljs-title function_">getSubjectName</span>().<span class="hljs-property">data</span>) + <span class="hljs-string">', valid start = '</span></li><li>      + x509CertArray[i].<span class="hljs-title function_">getNotBeforeTime</span>()</li><li>      + <span class="hljs-string">', valid end = '</span> + x509CertArray[i].<span class="hljs-title function_">getNotAfterTime</span>();</li><li>  }</li><li>  <span class="hljs-keyword">return</span> res;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-comment">// outputStr在UI界面显示调试信息</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">outputStr</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-attr">webviewCtl</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">initialIndex</span>: <span class="hljs-number">0</span> }) {</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Button</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">'load bad ssl'</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>            }</li><li>            .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-comment">// 加载一个过期的证书网站，查看获取到的证书信息</span></li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewCtl</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">'https://expired.badssl.com'</span>);</li><li>            })</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          }</li><li>
</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Button</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">'load example'</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>            }</li><li>            .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-comment">// 加载一个https网站，查看网站的证书信息</span></li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewCtl</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">'https://www.example.com'</span>);</li><li>            })</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          }</li><li>
</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Button</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">'getCertificate Promise'</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>            }</li><li>            .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-keyword">try</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewCtl</span>.<span class="hljs-title function_">getCertificate</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">x509CertArray: <span class="hljs-built_in">Array</span>&lt;cert.X509Cert&gt;</span>) =&gt;</span> {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span> = <span class="hljs-title class_">ParseX509CertInfo</span>(x509CertArray);</li><li>                })</li><li>              } <span class="hljs-keyword">catch</span> (error) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span> = <span class="hljs-string">'getCertificate failed: '</span> + (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">", errMsg: "</span> + (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>              }</li><li>            })</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          }</li><li>
</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">Button</span>() {</li><li>              <span class="hljs-title class_">Text</span>(<span class="hljs-string">'getCertificate AsyncCallback'</span>)</li><li>                .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>)</li><li>                .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>            }</li><li>            .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-keyword">try</span> {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewCtl</span>.<span class="hljs-title function_">getCertificate</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError, x509CertArray: <span class="hljs-built_in">Array</span>&lt;cert.X509Cert&gt;</span>) =&gt;</span> {</li><li>                  <span class="hljs-keyword">if</span> (error) {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span> = <span class="hljs-string">'getCertificate failed: '</span> + error.<span class="hljs-property">code</span> + <span class="hljs-string">", errMsg: "</span> + error.<span class="hljs-property">message</span>;</li><li>                  } <span class="hljs-keyword">else</span> {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span> = <span class="hljs-title class_">ParseX509CertInfo</span>(x509CertArray);</li><li>                  }</li><li>                })</li><li>              } <span class="hljs-keyword">catch</span> (error) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span> = <span class="hljs-string">'getCertificate failed: '</span> + (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span> + <span class="hljs-string">", errMsg: "</span> + (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>              }</li><li>            })</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">50</span>)</li><li>          }</li><li>        }</li><li>        .<span class="hljs-title function_">listDirection</span>(<span class="hljs-title class_">Axis</span>.<span class="hljs-property">Horizontal</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'10%'</span>)</li><li>
</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span>)</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">10</span>)</li><li>
</li><li>        <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'https://www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">webviewCtl</span> })</li><li>          .<span class="hljs-title function_">fileAccess</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">domStorageAccess</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">onlineImageAccess</span>(<span class="hljs-literal">true</span>)</li><li>          .<span class="hljs-title function_">onPageEnd</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (e) {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">outputStr</span> = <span class="hljs-string">'onPageEnd : url = '</span> + e.<span class="hljs-property">url</span>;</li><li>            }</li><li>          })</li><li>          .<span class="hljs-title function_">onSslErrorEventReceive</span>(<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {</li><li>            <span class="hljs-comment">// 忽略ssl证书错误，便于测试一些证书过期的网站，如：https://expired.badssl.com</span></li><li>            e.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleConfirm</span>();</li><li>          })</li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'70%'</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1536px;">     <h2 id="setaudiomuted10" device-type="phone,2in1,tablet,wearable,tv">setAudioMuted<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setaudiomuted10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setAudioMuted(mute: boolean): void</p>     <p>设置网页静音。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">mute</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>表示是否将网页设置为静音状态。</p>          <p>true表示将网页设置为静音状态，false表示将网页取消静音状态。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.65.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.65.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">muted</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"Toggle Mute"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">muted</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">muted</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setAudioMuted</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">muted</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1886px;">     <h2 id="prefetchpage21" device-type="phone,2in1,tablet,wearable,tv">prefetchPage<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="prefetchpage21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>prefetchPage(url: string, additionalHeaders?: Array&lt;WebHeader&gt;, prefetchOptions?: PrefetchOptions): void</p>     <p>在预测到将要加载的页面之前调用，可提前下载页面所需的资源（包括：主资源和子资源），但不会执行网页JavaScript代码或呈现网页，以加快页面加载速度。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>         <p>下载的页面资源会缓存五分钟左右，超过这段时间Web组件会自动释放。</p></li>        <li>         <p>prefetchPage对302重定向页面同样正常预取。</p></li>        <li>         <p>先执行prefetchPage再加载页面时，已预取的资源将直接从缓存中加载。</p></li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">url</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">预加载的url。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">additionalHeaders</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#webheader">WebHeader</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>url的附加HTTP请求头。</p>          <p>默认值：[]。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">prefetchOptions</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-prefetchoptions">PrefetchOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>用来自定义预取行为的相关选项。</p>          <p>默认值：参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-prefetchoptions">PrefetchOptions</a></p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.66.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.66.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100002</td>         <td class="cellrowborder" width="50%">URL error. The webpage corresponding to the URL is invalid, or the URL length exceeds 210241024.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'prefetchPopularPage'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 预加载时，需要将'https://www.example.com'替换成一个真实的网站地址。</span></li><li>            <span class="hljs-keyword">let</span> options = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">PrefetchOptions</span>();</li><li>            options.<span class="hljs-property">ignoreCacheControlNoStore</span> = <span class="hljs-literal">true</span>;</li><li>            options.<span class="hljs-property">minTimeBetweenPrefetchesMs</span> = <span class="hljs-number">100</span>;</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">prefetchPage</span>(<span class="hljs-string">'https://www.example.com'</span>, [{ <span class="hljs-attr">headerKey</span>: <span class="hljs-string">"headerKey"</span>, <span class="hljs-attr">headerValue</span>: <span class="hljs-string">"headerValue"</span> }], options);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-comment">// 需要将'www.example1.com'替换成一个真实的网站地址。</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example1.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1809px;">     <h2 id="prefetchpage10" device-type="phone,2in1,tablet,wearable,tv">prefetchPage<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="prefetchpage10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>prefetchPage(url: string, additionalHeaders?: Array&lt;WebHeader&gt;): void</p>     <p>在预测到将要加载的页面之前调用，可提前下载页面所需的资源（包括：主资源和子资源），但不会执行网页JavaScript代码或呈现网页，以加快页面加载速度。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>         <p>下载的页面资源会缓存五分钟左右，超过这段时间Web组件会自动释放。</p></li>        <li>         <p>prefetchPage对302重定向页面同样正常预取。</p></li>        <li>         <p>先执行prefetchPage再加载页面时，已预取的资源将直接从缓存中加载。</p></li>        <li>         <p>连续prefetchPage多个url只有第一个生效。</p></li>        <li>         <p>prefetchPage有时间限制，500ms内不能多次预取。</p></li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">url</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">预加载的url。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">additionalHeaders</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#webheader">WebHeader</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>url的附加HTTP请求头。</p>          <p>默认值： []</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.67.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.67.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100002</td>         <td class="cellrowborder" width="50%">URL error. The webpage corresponding to the URL is invalid, or the URL length exceeds 2048.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'prefetchPopularPage'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 预加载时，需要将'https://www.example.com'替换成一个真实的网站地址。</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">prefetchPage</span>(<span class="hljs-string">'https://www.example.com'</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-comment">// 需要将'www.example1.com'替换成一个真实的网站地址。</span></li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example1.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1911px;">     <h2 id="prefetchresource12" device-type="phone,2in1,tablet,wearable,tv">prefetchResource<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="prefetchresource12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static prefetchResource(request: RequestInfo, additionalHeaders?: Array&lt;WebHeader&gt;, cacheKey?: string, cacheValidTime?: number): void</p>     <p>根据指定的请求信息和附加的http请求头去预获取资源请求，存入内存缓存，并指定其缓存key和有效期，以加快加载速度。目前仅支持Content-Type为application/x-www-form-urlencoded的post请求。最多可以预获取6个post请求。如果要预获取第7个，请通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#clearprefetchedresource12">clearPrefetchedResource</a>清除不需要的post请求缓存，否则会自动清除最早预获取的post缓存。如果要使用预获取的资源缓存，开发者需要在正式发起的post请求的请求头中增加键值“ArkWebPostCacheKey”，其内容为对应缓存的cacheKey。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.68.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">request</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#requestinfo12">RequestInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">预获取请求的信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">additionalHeaders</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#webheader">WebHeader</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">预获取请求的附加HTTP请求头。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">cacheKey</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">用于后续查询预获取资源缓存的key。仅支持字母和数字，未传入或传入空则取默认值url作为key。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">cacheValidTime</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>预获取资源缓存的有效期。</p>          <p>取值范围：(0, 2147483647]。</p>          <p>默认值：300秒。</p>          <p>单位：秒。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.68.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.68.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Invalid input parameter.Possible causes: 1. Mandatory parameters are left unspecified.2. Incorrect parameter types.3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100002</td>         <td class="cellrowborder" width="50%">URL error. The webpage corresponding to the URL is invalid, or the URL length exceeds 2048.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate"</span>);</li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">initializeWebEngine</span>();</li><li>    <span class="hljs-comment">// 预获取时，需要將"https://www.example1.com/post?e=f&amp;g=h"替换成真实要访问的网站地址。</span></li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">prefetchResource</span>(</li><li>      {</li><li>        <span class="hljs-attr">url</span>: <span class="hljs-string">"https://www.example1.com/post?e=f&amp;g=h"</span>,</li><li>        <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,</li><li>        <span class="hljs-attr">formData</span>: <span class="hljs-string">"a=x&amp;b=y"</span>,</li><li>      },</li><li>      [{</li><li>        <span class="hljs-attr">headerKey</span>: <span class="hljs-string">"c"</span>,</li><li>        <span class="hljs-attr">headerValue</span>: <span class="hljs-string">"z"</span>,</li><li>      },],</li><li>      <span class="hljs-string">"KeyX"</span>, <span class="hljs-number">500</span>);</li><li>    <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">"abilityWant"</span>, want);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate done"</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1406px;">     <h2 id="clearprefetchedresource12" device-type="phone,2in1,tablet,wearable,tv">clearPrefetchedResource<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearprefetchedresource12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static clearPrefetchedResource(cacheKeyList: Array&lt;string&gt;): void</p>     <p>根据指定的缓存key列表清除对应的预获取资源缓存。入参中的缓存key必须是<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#prefetchresource12">prefetchResource</a>指定预获取到的资源缓存key。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.69.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.69.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">cacheKeyList</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用于后续查询预获取资源缓存的key。仅支持字母和数字，未传入或传入空则取默认值url作为key。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">"https://www.example.com/"</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onAppear</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 预获取时，需要將"https://www.example1.com/post?e=f&amp;g=h"替换成真实要访问的网站地址。</span></li><li>          webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">prefetchResource</span>(</li><li>            {</li><li>              <span class="hljs-attr">url</span>: <span class="hljs-string">"https://www.example1.com/post?e=f&amp;g=h"</span>,</li><li>              <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,</li><li>              <span class="hljs-attr">formData</span>: <span class="hljs-string">"a=x&amp;b=y"</span>,</li><li>            },</li><li>            [{</li><li>              <span class="hljs-attr">headerKey</span>: <span class="hljs-string">"c"</span>,</li><li>              <span class="hljs-attr">headerValue</span>: <span class="hljs-string">"z"</span>,</li><li>            },],</li><li>            <span class="hljs-string">"KeyX"</span>, <span class="hljs-number">500</span>);</li><li>        })</li><li>        .<span class="hljs-title function_">onPageEnd</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 清除后续不再使用的预获取缓存。</span></li><li>          webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">clearPrefetchedResource</span>([<span class="hljs-string">"KeyX"</span>,]);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1458px;">     <h2 id="prepareforpageload10" device-type="phone,2in1,tablet,wearable,tv">prepareForPageLoad<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="prepareforpageload10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static prepareForPageLoad(url: string, preconnectable: boolean, numSockets: number): void</p>     <p>预连接url，在加载url之前调用此API，对url只进行DNS解析，socket建链操作，并不获取主资源子资源。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.70.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">url</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">预连接的url。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">preconnectable</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">是否进行预连接。如果preconnectable为true，则对url进行DNS解析，socket建链预连接；如果preconnectable为false，则不做任何预连接操作。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">numSockets</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要预连接的socket数。socket数目连接需要大于0，最多允许6个连接。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.70.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.70.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100002</td>         <td class="cellrowborder" width="50%">URL error. The webpage corresponding to the URL is invalid, or the URL length exceeds 2048.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100013</td>         <td class="cellrowborder" width="50%">The number of preconnect sockets is invalid.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate"</span>);</li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">initializeWebEngine</span>();</li><li>    <span class="hljs-comment">// 预连接时，需要將'https://www.example.com'替换成一个真实的网站地址。</span></li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">prepareForPageLoad</span>(<span class="hljs-string">"https://www.example.com"</span>, <span class="hljs-literal">true</span>, <span class="hljs-number">2</span>);</li><li>    <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">"abilityWant"</span>, want);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate done"</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1892px;">     <h2 id="setcustomuseragent10" device-type="phone,2in1,tablet,wearable,tv">setCustomUserAgent<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setcustomuseragent10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setCustomUserAgent(userAgent: string): void</p>     <p>设置自定义用户代理，会覆盖系统的用户代理。</p>     <p>当Web组件src设置了url时，建议在onControllerAttached回调事件中设置User-Agent，设置方式请参考示例。不建议将User-Agent设置在onLoadIntercept回调事件中，会概率性出现设置失败。</p>     <p>当Web组件src设置为空字符串时，建议先调用setCustomUserAgent方法设置User-Agent，再通过loadUrl加载具体页面。</p>     <p>默认User-Agent定义与使用场景请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-default-useragent" target="_blank">User-Agent开发指导</a></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当Web组件src设置了url，且未在onControllerAttached回调事件中设置User-Agent。再调用setCustomUserAgent方法时，可能会出现加载的页面与实际设置User-Agent不符的异常现象。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.71.10.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.10.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.10.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.10.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">userAgent</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户自定义代理信息。建议先使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getuseragent">getUserAgent</a>获取当前默认用户代理，在此基础上追加自定义用户代理信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.71.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.71.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">customUserAgent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">' DemoApp'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>      .<span class="hljs-title function_">onControllerAttached</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"onControllerAttached"</span>);</li><li>        <span class="hljs-keyword">try</span> {</li><li>          <span class="hljs-keyword">let</span> userAgent = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getUserAgent</span>() + <span class="hljs-variable language_">this</span>.<span class="hljs-property">customUserAgent</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setCustomUserAgent</span>(userAgent);</li><li>        } <span class="hljs-keyword">catch</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>        }</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1385px;">     <h2 id="setdownloaddelegate11" device-type="phone,2in1,tablet,wearable,tv">setDownloadDelegate<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setdownloaddelegate11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setDownloadDelegate(delegate: WebDownloadDelegate): void</p>     <p>为当前的Web组件设置一个WebDownloadDelegate，该delegate用来接收页面内触发的下载进度的委托。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">delegate</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webdownloaddelegate">WebDownloadDelegate</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用来接收下载进度的委托。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.72.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.72.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">delegate</span>: webview.<span class="hljs-property">WebDownloadDelegate</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebDownloadDelegate</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'setDownloadDelegate'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setDownloadDelegate</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">delegate</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1656px;">     <h2 id="startdownload11" device-type="phone,2in1,tablet,wearable,tv">startDownload<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="startdownload11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startDownload(url: string): void</p>     <p>使用Web组件的下载能力来下载指定的url, 比如下载网页中指定的图片。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.73.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">url</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">下载地址。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.73.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.73.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100002</td>         <td class="cellrowborder" width="50%">URL error. The webpage corresponding to the URL is invalid, or the URL length exceeds 2048.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">delegate</span>: webview.<span class="hljs-property">WebDownloadDelegate</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebDownloadDelegate</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'setDownloadDelegate'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setDownloadDelegate</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">delegate</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'startDownload'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">startDownload</span>(<span class="hljs-string">'https://www.example.com'</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1477px;">     <h2 id="getcustomuseragent10" device-type="phone,2in1,tablet,wearable,tv">getCustomUserAgent<sup>10+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getcustomuseragent10" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getCustomUserAgent(): string</p>     <p>获取自定义用户代理。</p>     <p>默认User-Agent定义与使用场景请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-default-useragent" target="_blank">User-Agent开发指导</a></p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.74.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">用户自定义代理信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.74.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.74.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">userAgent</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getCustomUserAgent'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">userAgent</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getCustomUserAgent</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"userAgent: "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">userAgent</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1406px;">     <h2 id="setappcustomuseragent20" device-type="phone,2in1,tablet,wearable,tv">setAppCustomUserAgent<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setappcustomuseragent20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static setAppCustomUserAgent(userAgent: string): void</p>     <p>设置应用级自定义用户代理，会覆盖系统的用户代理，应用内所有Web组件生效。</p>     <p>当需要设置应用级自定义用户代理时，建议在Web组件创建前调用setAppCustomUserAgent方法设置User-Agent，再创建指定src的Web组件或通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#loadurl">loadUrl</a>加载具体页面。</p>     <p>默认User-Agent定义与使用场景，及相关User-Agent接口定义优先级请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-default-useragent" target="_blank">User-Agent开发指导</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.75.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.75.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.75.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.75.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">userAgent</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户自定义代理信息。建议先使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getdefaultuseragent14">getDefaultUserAgent</a>获取当前默认用户代理，在此基础上追加自定义用户代理信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">initializeWebEngine</span>();</li><li>      <span class="hljs-keyword">let</span> defaultUserAgent = webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">getDefaultUserAgent</span>();</li><li>      <span class="hljs-keyword">let</span> appUA = defaultUserAgent + <span class="hljs-string">" appUA"</span>;</li><li>      webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setAppCustomUserAgent</span>(appUA);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1691px;">     <h2 id="setuseragentforhosts20" device-type="phone,2in1,tablet,wearable,tv">setUserAgentForHosts<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setuseragentforhosts20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static setUserAgentForHosts(userAgent: string, hosts: Array&lt;string&gt;): void</p>     <p>针对特定网站设置自定义用户代理，会覆盖系统的用户代理，应用内所有Web组件生效。</p>     <p>当需要对特定网站设置自定义用户代理时，建议在Web组件创建前调用setUserAgentForHosts方法设置User-Agent，再创建指定src的Web组件或通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#loadurl">loadUrl</a>加载具体页面。</p>     <p>默认User-Agent定义与使用场景，及相关User-Agent接口定义优先级请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-default-useragent" target="_blank">User-Agent开发指导</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.76.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.76.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">userAgent</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户自定义代理信息。建议先使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getdefaultuseragent14">getDefaultUserAgent</a>获取当前默认用户代理，在此基础上追加自定义用户代理信息。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">hosts</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用户自定义代理的相关域名列表，每次调用时仅保留最新传入的列表，并限制最大条目数为两万，超出部分自动截断。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">initializeWebEngine</span>();</li><li>      <span class="hljs-keyword">let</span> defaultUserAgent = webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">getDefaultUserAgent</span>();</li><li>      <span class="hljs-keyword">let</span> appUA = defaultUserAgent + <span class="hljs-string">" appUA"</span>;</li><li>      webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setUserAgentForHosts</span>(</li><li>        appUA,</li><li>        [</li><li>          <span class="hljs-string">"www.example.com"</span>,</li><li>          <span class="hljs-string">"www.baidu.com"</span></li><li>        ]</li><li>      );</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1601px;">     <h2 id="setconnectiontimeout11" device-type="phone,2in1,tablet,wearable,tv">setConnectionTimeout<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setconnectiontimeout11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static setConnectionTimeout(timeout: number): void</p>     <p>设置网络连接超时时间，使用者可通过Web组件中的onErrorReceive方法获取超时错误码。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.77.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">timeout</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">socket连接超时时间，以秒为单位，必须为大于0的整数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.77.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.77.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'setConnectionTimeout'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setConnectionTimeout</span>(<span class="hljs-number">5</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"setConnectionTimeout: 5s"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onErrorReceive</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getErrorInfo:'</span> + event.<span class="hljs-property">error</span>.<span class="hljs-title function_">getErrorInfo</span>());</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getErrorCode:'</span> + event.<span class="hljs-property">error</span>.<span class="hljs-title function_">getErrorCode</span>());</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1169px;">     <h2 id="warmupserviceworker12" device-type="phone,2in1,tablet,wearable,tv">warmupServiceWorker<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="warmupserviceworker12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static warmupServiceWorker(url: string): void</p>     <p>预热ServiceWorker，以提升首屏页面的加载速度（仅限于会使用ServiceWorker的页面）。在加载url之前调用此API。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.78.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.78.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.78.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.78.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">url</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要预热ServiceWorker的url。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.78.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.78.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100002</td>         <td class="cellrowborder" width="50%">URL error. The webpage corresponding to the URL is invalid, or the URL length exceeds 2048.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>    <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate"</span>);</li><li>        webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">initializeWebEngine</span>();</li><li>        webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">warmupServiceWorker</span>(<span class="hljs-string">"https://www.example.com"</span>);</li><li>        <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">"abilityWant"</span>, want);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1717px;">     <h2 id="enablesafebrowsing11" device-type="phone,2in1,tablet,wearable,tv">enableSafeBrowsing<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enablesafebrowsing11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>enableSafeBrowsing(enable: boolean): void</p>     <p>启用检查网站安全风险的功能，非法和欺诈网站是强制启用的，不能通过此功能禁用。</p>     <p>本功能默认不生效，HarmonyOS只提供恶意网址拦截页WebUI，网址风险检测以及显示WebUI的功能由Vendor实现。推荐在WebContentsObserver中监听跳转<a href="https://gitcode.com/openharmony-tpc/chromium_src/blob/master/content/public/browser/web_contents_observer.h" target="_blank">DidStartNavigation</a>、<a href="https://gitcode.com/openharmony-tpc/chromium_src/blob/master/content/public/browser/web_contents_observer.h" target="_blank">DidRedirectNavigation</a>进行检测。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>该接口不生效，调用不会产生任何实际效果。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.79.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enable</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>是否启用检查网站安全风险的功能。</p>          <p>true表示启用检查网站安全风险的功能，false表示不启用检查网站安全风险的功能。</p>          <p>默认值：false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.79.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.79.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'enableSafeBrowsing'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">enableSafeBrowsing</span>(<span class="hljs-literal">true</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"enableSafeBrowsing: true"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1114px;">     <h2 id="issafebrowsingenabled11" device-type="phone,2in1,tablet,wearable,tv">isSafeBrowsingEnabled<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="issafebrowsingenabled11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isSafeBrowsingEnabled(): boolean</p>     <p>获取当前网页是否启用了检查网站安全风险。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.80.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.80.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">          <p>当前网页是否启用了检查网站安全风险的功能。</p>          <p>true表示启用了检查网站安全风险的功能，false表示未启用检查网站安全风险的功能。</p>          <p>默认值：false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'isSafeBrowsingEnabled'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">isSafeBrowsingEnabled</span>();</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"result: "</span> + result);</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1687px;">     <h2 id="enableintelligenttrackingprevention12" device-type="phone,2in1,tablet,wearable,tv">enableIntelligentTrackingPrevention<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enableintelligenttrackingprevention12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>enableIntelligentTrackingPrevention(enable: boolean): void</p>     <p>启用智能防跟踪功能。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>设备行为差异：</strong> 该接口在Phone、Tablet、PC/2in1中可正常使用。从API version 18开始，在其他设备类型中返回801错误码。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.81.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enable</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>是否启用智能防跟踪功能。</p>          <p>true表示启用智能防跟踪功能，false表示不启用智能防跟踪功能。</p>          <p>默认值：false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.81.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.81.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'enableIntelligentTrackingPrevention'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">enableIntelligentTrackingPrevention</span>(<span class="hljs-literal">true</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"enableIntelligentTrackingPrevention: true"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1580px;">     <h2 id="isintelligenttrackingpreventionenabled12" device-type="phone,2in1,tablet,wearable,tv">isIntelligentTrackingPreventionEnabled<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isintelligenttrackingpreventionenabled12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isIntelligentTrackingPreventionEnabled(): boolean</p>     <p>获取当前Web是否启用了智能防跟踪功能。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>设备行为差异：</strong> 该接口在Phone、Tablet、PC/2in1中可正常使用。从API version 18开始，在其他设备类型中返回801错误码。</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.82.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">          <p>当前Web是否启用了智能防跟踪功能。</p>          <p>true表示启用了智能防跟踪功能，false表示未启用智能防跟踪功能。</p>          <p>默认值：false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.82.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.82.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'isIntelligentTrackingPreventionEnabled'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">isIntelligentTrackingPreventionEnabled</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"result: "</span> + result);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1536px;">     <h2 id="addintelligenttrackingpreventionbypassinglist12" device-type="phone,2in1,tablet,wearable,tv">addIntelligentTrackingPreventionBypassingList<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="addintelligenttrackingpreventionbypassinglist12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static addIntelligentTrackingPreventionBypassingList(hostList: Array&lt;string&gt;): void</p>     <p>添加智能防跟踪功能绕过的域名列表。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>设备行为差异：</strong> 该接口在Phone、Tablet、PC/2in1中可正常使用。从API version 18开始，在其他设备类型中返回801错误码。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.83.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">hostList</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">绕过智能防跟踪功能的域名列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.83.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.83.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'addIntelligentTrackingPreventionBypassingList'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> hostList = [<span class="hljs-string">"www.test1.com"</span>, <span class="hljs-string">"www.test2.com"</span>, <span class="hljs-string">"www.test3.com"</span>];</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">addIntelligentTrackingPreventionBypassingList</span>(hostList);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1536px;">     <h2 id="removeintelligenttrackingpreventionbypassinglist12" device-type="phone,2in1,tablet,wearable,tv">removeIntelligentTrackingPreventionBypassingList<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="removeintelligenttrackingpreventionbypassinglist12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static removeIntelligentTrackingPreventionBypassingList(hostList: Array&lt;string&gt;): void</p>     <p>删除通过addIntelligentTrackingPreventionBypassingList接口添加的部分域名列表。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>设备行为差异：</strong> 该接口在Phone、Tablet、PC/2in1中可正常使用。从API version 18开始，在其他设备类型中返回801错误码。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.84.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">hostList</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">绕过智能防跟踪功能的域名列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.84.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.84.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'removeIntelligentTrackingPreventionBypassingList'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> hostList = [<span class="hljs-string">"www.test1.com"</span>, <span class="hljs-string">"www.test2.com"</span>];</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">removeIntelligentTrackingPreventionBypassingList</span>(hostList);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1114px;">     <h2 id="clearintelligenttrackingpreventionbypassinglist12" device-type="phone,2in1,tablet,wearable,tv">clearIntelligentTrackingPreventionBypassingList<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearintelligenttrackingpreventionbypassinglist12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static clearIntelligentTrackingPreventionBypassingList(): void</p>     <p>删除通过addIntelligentTrackingPreventionBypassingList接口添加的所有域名。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>设备行为差异：</strong> 该接口在Phone、Tablet、PC/2in1中可正常使用。从API version 18开始，在其他设备类型中返回801错误码。</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.85.8.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.85.8.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'clearIntelligentTrackingPreventionBypassingList'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">clearIntelligentTrackingPreventionBypassingList</span>();</li><li>      })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 970px;">     <h2 id="getdefaultuseragent14" device-type="phone,2in1,tablet,wearable,tv">getDefaultUserAgent<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getdefaultuseragent14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static getDefaultUserAgent(): string</p>     <p>获取默认用户代理。</p>     <p>此接口只允许在UI线程调用。</p>     <p>默认User-Agent定义与使用场景请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-default-useragent" target="_blank">User-Agent开发指导</a></p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.86.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">ArkWeb默认User-Agent字符串。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate"</span>);</li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">initializeWebEngine</span>();</li><li>    <span class="hljs-keyword">let</span> defaultUserAgent = webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">getDefaultUserAgent</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"defaultUserAgent: "</span> + defaultUserAgent);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1831px;">     <h2 id="enableadsblock12" device-type="phone,2in1,tablet,wearable,tv">enableAdsBlock<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enableadsblock12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>enableAdsBlock(enable: boolean): void</p>     <p>启用广告过滤功能。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>广告过滤功能需要release包，使用debug包不生效。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.87.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enable</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>是否启用广告过滤功能。</p>          <p>true表示启用广告过滤功能，false表示取消广告过滤功能。</p>          <p>默认值：false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 18开始，在不支持广告过滤功能的设备上调用该API会抛出801异常。</p>      </div></div></div>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.87.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.87.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Parameter string is too long. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'enableAdsBlock'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">enableAdsBlock</span>(<span class="hljs-literal">true</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"enableAdsBlock: true"</span>)</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1521px;">     <h2 id="isadsblockenabled12" device-type="phone,2in1,tablet,wearable,tv">isAdsBlockEnabled<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isadsblockenabled12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isAdsBlockEnabled() : boolean</p>     <p>查询广告过滤功能是否开启。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.88.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">          <p>返回true代表广告过滤功能已开启，返回false代表广告过滤功能关闭。</p>          <p>默认值：false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 18开始，在不支持广告过滤功能的设备上调用该API会抛出801异常。</p>      </div></div></div>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.88.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.88.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'isAdsBlockEnabled'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">isAdsBlockEnabled</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">isAdsBlockEnabled</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"isAdsBlockEnabled:"</span>, isAdsBlockEnabled);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1569px;">     <h2 id="isadsblockenabledforcurpage12" device-type="phone,2in1,tablet,wearable,tv">isAdsBlockEnabledForCurPage<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isadsblockenabledforcurpage12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isAdsBlockEnabledForCurPage() : boolean</p>     <p>查询当前网页是否开启广告过滤功能。</p>     <p>当Web组件使能广告过滤功能后，默认所有页面都是开启广告过滤的，支持通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-adsblockmanager#addadsblockdisallowedlist12">addAdsBlockDisallowedList</a>指定域名禁用广告过滤。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.89.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回true代表此网页已开启广告过滤，返回false代表当前网页已关闭广告过滤。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 18开始，在不支持广告过滤功能的设备上调用该API会抛出801异常。</p>      </div></div></div>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.89.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.89.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'isAdsBlockEnabledForCurPage'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">isAdsBlockEnabledForCurPage</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">isAdsBlockEnabledForCurPage</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"isAdsBlockEnabledForCurPage:"</span>, isAdsBlockEnabledForCurPage);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1697px;">     <h2 id="setrenderprocessmode12" device-type="phone,2in1,tablet,wearable,tv">setRenderProcessMode<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setrenderprocessmode12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static setRenderProcessMode(mode: RenderProcessMode): void</p>     <p>设置ArkWeb渲染子进程模式。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.90.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">mode</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#renderprocessmode12">RenderProcessMode</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>渲染子进程模式。</p>          <p>可以先调用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getrenderprocessmode12">getRenderProcessMode()</a>查看当前设备的ArkWeb渲染子进程模式，枚举值0为单子进程模式，枚举值1为多子进程模式。</p>          <p>手机默认为单渲染子进程模式，平板和PC/2in1默认为多渲染子进程模式。</p>          <p>如果传入RenderProcessMode枚举值之外的非法数字，则默认识别为多渲染子进程模式。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.90.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.90.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'setRenderProcessMode'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setRenderProcessMode</span>(webview.<span class="hljs-property">RenderProcessMode</span>.<span class="hljs-property">MULTIPLE</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1162px;">     <h2 id="getrenderprocessmode12" device-type="phone,2in1,tablet,wearable,tv">getRenderProcessMode<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getrenderprocessmode12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static getRenderProcessMode(): RenderProcessMode</p>     <p>查询ArkWeb的渲染子进程模式。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.91.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.91.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#renderprocessmode12">RenderProcessMode</a></td>         <td class="cellrowborder" width="50%">          <p>渲染子进程模式类型。</p>          <p>调用getRenderProcessMode()获取当前设备的ArkWeb渲染子进程模式，枚举值0为单子进程模式，枚举值1为多子进程模式。</p>          <p>如果获取的值不在RenderProcessMode枚举值范围内，则默认为多渲染子进程模式。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getRenderProcessMode'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> mode = webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">getRenderProcessMode</span>();</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getRenderProcessMode: "</span> + mode);</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1405px;">     <h2 id="terminaterenderprocess12" device-type="phone,2in1,tablet,wearable,tv">terminateRenderProcess<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="terminaterenderprocess12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>terminateRenderProcess(): boolean</p>     <p>销毁渲染进程。</p>     <p>调用该接口将会主动销毁相关联的渲染进程。如果渲染进程尚未启动，或者已销毁则没有任何影响。此外销毁渲染进程会同时影响所有与该渲染进程关联的其他实例。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.92.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">          <p>返回销毁渲染进程的结果。</p>          <p>返回true表示渲染进程可以被销毁或已被销毁，返回false表示渲染进程不可以被销毁。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.92.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.92.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'terminateRenderProcess'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">terminateRenderProcess</span>();</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"terminateRenderProcess result: "</span> + result);</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2092px;">     <h2 id="posturl11" device-type="phone,2in1,tablet,wearable,tv">postUrl<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="posturl11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>postUrl(url: string, postData: ArrayBuffer): void</p>     <p>使用"POST"方法加载带有postData的url。如果url不是网络url，则会使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#loadurl">loadUrl</a>方法加载url，忽略postData参数。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.93.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">url</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要加载的 URL。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">postData</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">使用"POST"方法传递数据。 该请求必须采用"application/x-www-form-urlencoded"编码。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.93.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.93.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100002</td>         <td class="cellrowborder" width="50%">URL error. The webpage corresponding to the URL is invalid, or the URL length exceeds 2048.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestObj</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">test</span>(<span class="hljs-attr">str</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">ArrayBuffer</span> {</li><li>    <span class="hljs-keyword">let</span> buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(str.<span class="hljs-property">length</span>);</li><li>    <span class="hljs-keyword">let</span> buff = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buf);</li><li>
</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; str.<span class="hljs-property">length</span>; i++) {</li><li>      buff[i] = str.<span class="hljs-title function_">charCodeAt</span>(i);</li><li>    }</li><li>    <span class="hljs-keyword">return</span> buf;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObjtest</span>: <span class="hljs-title class_">TestObj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestObj</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'postUrl'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 数据转化为ArrayBuffer类型。</span></li><li>            <span class="hljs-keyword">let</span> postData = <span class="hljs-variable language_">this</span>.<span class="hljs-property">testObjtest</span>.<span class="hljs-title function_">test</span>(<span class="hljs-string">"Name=test&amp;Password=test"</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">postUrl</span>(<span class="hljs-string">'www.example.com'</span>, postData);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1659px;">     <h2 id="createwebprintdocumentadapter11" device-type="phone,2in1,tablet,wearable,tv">createWebPrintDocumentAdapter<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createwebprintdocumentadapter11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createWebPrintDocumentAdapter(jobName: string): print.PrintDocumentAdapter</p>     <p>创建web相关打印功能。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.94.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">jobName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要打印的文件名。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.94.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">print.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-print#printdocumentadapter11">PrintDocumentAdapter</a></td>         <td class="cellrowborder" width="50%">返回打印文档的适配器。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.94.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.94.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span>, print } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'createWebPrintDocumentAdapter'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> webPrintDocadapter = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">createWebPrintDocumentAdapter</span>(<span class="hljs-string">'example.pdf'</span>);</li><li>            print.<span class="hljs-title function_">print</span>(<span class="hljs-string">'example_jobid'</span>, webPrintDocadapter, <span class="hljs-literal">null</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>());</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1453px;">     <h2 id="isincognitomode11" device-type="phone,2in1,tablet,wearable,tv">isIncognitoMode<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isincognitomode11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isIncognitoMode(): boolean</p>     <p>查询当前是否是隐私模式的Webview。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.95.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.95.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">          <p>返回是否是隐私模式的Webview。</p>          <p>true表示是隐私模式，false表示不是隐私模式。</p>          <p>默认为false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.95.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.95.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'isIncognitoMode'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">isIncognitoMode</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'isIncognitoMode'</span> + result);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1309px;">     <h2 id="getsecuritylevel11" device-type="phone,2in1,tablet,wearable,tv">getSecurityLevel<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsecuritylevel11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSecurityLevel(): SecurityLevel</p>     <p>获取当前网页的安全级别。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.96.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.96.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#securitylevel11">SecurityLevel</a></td>         <td class="cellrowborder" width="50%">当前网页的安全级别，具体值为NONE、SECURE、WARNING、DANGEROUS。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.96.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.96.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onPageEnd</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-keyword">let</span> securityLevel = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getSecurityLevel</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'securityLevel: '</span>, securityLevel);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1869px;">     <h2 id="setscrollable12" device-type="phone,2in1,tablet,wearable,tv">setScrollable<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setscrollable12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setScrollable(enable: boolean, type?: ScrollType): void</p>     <p>设置网页是否允许滚动。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.97.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.97.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.97.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.97.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enable</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>表示是否将网页设置为允许滚动。</p>          <p>true表示设置为允许滚动，false表示禁止滚动。</p>          <p>默认值：true。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#scrolltype12">ScrollType</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>网页可触发的滚动类型，支持缺省配置。</p>          <p>- enable为false时，表示禁止ScrollType类型的滚动，当ScrollType缺省时表示禁止所有类型网页滚动。</p>          <p>- enable为true时，ScrollType缺省与否，都表示允许所有类型的网页滚动。</p>          <p><strong>说明：</strong></p>          <p>传入undefined会抛出异常错误码401。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.97.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.97.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'setScrollable'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setScrollable</span>(<span class="hljs-literal">true</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1429px;">     <h2 id="getscrollable12" device-type="phone,2in1,tablet,wearable,tv">getScrollable<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getscrollable12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getScrollable(): boolean</p>     <p>获取当前网页是否允许滚动。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.98.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.98.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">          <p>当前网页是否允许滚动。</p>          <p>true为允许滚动，false为禁止滚动。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.98.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.98.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getScrollable'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> scrollEnabled = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getScrollable</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"scrollEnabled: "</span> + scrollEnabled);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1512px;">     <h2 id="setprintbackground12" device-type="phone,2in1,tablet,wearable,tv">setPrintBackground<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setprintbackground12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setPrintBackground(enable: boolean): void</p>     <p>设置是否打印网页背景。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.99.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enable</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>表示是否打印网页背景。</p>          <p>true表示设置为打印网页背景，false表示取消网页背景打印。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.99.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.99.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'setPrintBackground'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setPrintBackground</span>(<span class="hljs-literal">false</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode:<span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1405px;">     <h2 id="getprintbackground12" device-type="phone,2in1,tablet,wearable,tv">getPrintBackground<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getprintbackground12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPrintBackground(): boolean</p>     <p>查询webview是否打印网页背景。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.100.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">          <p>返回Webview是否打印网页背景。</p>          <p>true:打印网页背景；false:不打印网页背景。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.100.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.100.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'setPrintBackground'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> enable = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getPrintBackground</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getPrintBackground: "</span> + enable);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode:<span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>, Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3721px;">     <h2 id="getlastjavascriptproxycallingframeurl12" device-type="phone,2in1,tablet,wearable,tv">getLastJavascriptProxyCallingFrameUrl<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getlastjavascriptproxycallingframeurl12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getLastJavascriptProxyCallingFrameUrl(): string</p>     <p>通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#registerjavascriptproxy">registerJavaScriptProxy</a>或者<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#javascriptproxy">javaScriptProxy</a>注入JavaScript对象到window对象中。该接口可以获取最后一次调用注入的对象的frame的url。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.101.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.101.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">最后一次调用注入的对象的frame的url。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.101.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.101.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestObj</span> {</li><li>  <span class="hljs-attr">mycontroller</span>: webview.<span class="hljs-property">WebviewController</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">controller: webview.WebviewController</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mycontroller</span> = controller;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">test</span>(<span class="hljs-attr">testStr</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component str'</span> + testStr + <span class="hljs-string">" url "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">mycontroller</span>.<span class="hljs-title function_">getLastJavascriptProxyCallingFrameUrl</span>());</li><li>    <span class="hljs-keyword">return</span> testStr;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">toString</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component toString '</span> + <span class="hljs-string">" url "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">mycontroller</span>.<span class="hljs-title function_">getLastJavascriptProxyCallingFrameUrl</span>());</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">testNumber</span>(<span class="hljs-attr">testNum</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component number'</span> + testNum + <span class="hljs-string">" url "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">mycontroller</span>.<span class="hljs-title function_">getLastJavascriptProxyCallingFrameUrl</span>());</li><li>    <span class="hljs-keyword">return</span> testNum;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">testBool</span>(<span class="hljs-attr">testBol</span>: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">boolean</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web Component boolean'</span> + testBol + <span class="hljs-string">" url "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">mycontroller</span>.<span class="hljs-title function_">getLastJavascriptProxyCallingFrameUrl</span>());</li><li>    <span class="hljs-keyword">return</span> testBol;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebObj</span> {</li><li>  <span class="hljs-attr">mycontroller</span>: webview.<span class="hljs-property">WebviewController</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">controller: webview.WebviewController</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mycontroller</span> = controller;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">webTest</span>(): <span class="hljs-built_in">string</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web test '</span> + <span class="hljs-string">" url "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">mycontroller</span>.<span class="hljs-title function_">getLastJavascriptProxyCallingFrameUrl</span>());</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-string">"Web test"</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">webString</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Web test toString '</span> + <span class="hljs-string">" url "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">mycontroller</span>.<span class="hljs-title function_">getLastJavascriptProxyCallingFrameUrl</span>());</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testObjtest</span>: <span class="hljs-title class_">TestObj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestObj</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>);</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">webTestObj</span>: <span class="hljs-title class_">WebObj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebObj</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>);</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'refresh'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">refresh</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Register JavaScript To Window'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">testObjtest</span>, <span class="hljs-string">"objName"</span>, [<span class="hljs-string">"test"</span>, <span class="hljs-string">"toString"</span>, <span class="hljs-string">"testNumber"</span>, <span class="hljs-string">"testBool"</span>]);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">registerJavaScriptProxy</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">webTestObj</span>, <span class="hljs-string">"objTestName"</span>, [<span class="hljs-string">"webTest"</span>, <span class="hljs-string">"webString"</span>]);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'deleteJavaScriptRegister'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"objName"</span>);</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">deleteJavaScriptRegister</span>(<span class="hljs-string">"objTestName"</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"htmlTest()"</span>&gt;</span>Click Me!<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"demo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"webDemo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></li><li>      <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">htmlTest</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">          <span class="hljs-comment">// This function call expects to return "ArkUI Web Component"</span></span></li><li><span class="language-javascript">          <span class="hljs-keyword">let</span> str=objName.<span class="hljs-title function_">test</span>(<span class="hljs-string">"webtest data"</span>);</span></li><li><span class="language-javascript">          objName.<span class="hljs-title function_">testNumber</span>(<span class="hljs-number">1</span>);</span></li><li><span class="language-javascript">          objName.<span class="hljs-title function_">testBool</span>(<span class="hljs-literal">true</span>);</span></li><li><span class="language-javascript">          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"demo"</span>).<span class="hljs-property">innerHTML</span>=str;</span></li><li><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'objName.test result:'</span>+ str)</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">          <span class="hljs-comment">// This function call expects to return "Web test"</span></span></li><li><span class="language-javascript">          <span class="hljs-keyword">let</span> webStr = objTestName.<span class="hljs-title function_">webTest</span>();</span></li><li><span class="language-javascript">          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"webDemo"</span>).<span class="hljs-property">innerHTML</span>=webStr;</span></li><li><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'objTestName.webTest result:'</span>+ webStr)</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript">      </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1798px;">     <h2 id="pausealltimers12" device-type="phone,2in1,tablet,wearable,tv">pauseAllTimers<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pausealltimers12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static pauseAllTimers(): void</p>     <p>暂停所有WebView的定时器。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.102.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.102.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'PauseAllTimers'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">pauseAllTimers</span>();</li><li>          })</li><li>      }</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width:300px;height:150px;font-size:50px"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"startTimer()"</span>&gt;</span>start<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width:300px;height:150px;font-size:50px"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"resetTimer()"</span>&gt;</span>reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width:300px;height:150px;font-size:50px"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"show_num"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">var</span> timer = <span class="hljs-literal">null</span>;</span></li><li><span class="language-javascript">    <span class="hljs-keyword">var</span> num = <span class="hljs-number">0</span>;</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">startTimer</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"show_num"</span>).<span class="hljs-property">value</span> = ++num;</span></li><li><span class="language-javascript">        }, <span class="hljs-number">1000</span>);</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript">    </span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">resetTimer</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-built_in">clearInterval</span>(timer);</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"show_num"</span>).<span class="hljs-property">value</span> = <span class="hljs-number">0</span>;</span></li><li><span class="language-javascript">        num = <span class="hljs-number">0</span>;</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1870px;">     <h2 id="resumealltimers12" device-type="phone,2in1,tablet,wearable,tv">resumeAllTimers<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resumealltimers12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static resumeAllTimers(): void</p>     <p>恢复从pauseAllTimers()接口中被暂停的所有的定时器。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.103.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.103.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'ResumeAllTimers'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">resumeAllTimers</span>();</li><li>          })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'PauseAllTimers'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">pauseAllTimers</span>();</li><li>          })</li><li>      }</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width:300px;height:150px;font-size:50px"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"startTimer()"</span>&gt;</span>start<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width:300px;height:150px;font-size:50px"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"resetTimer()"</span>&gt;</span>reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width:300px;height:150px;font-size:50px"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"show_num"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">var</span> timer = <span class="hljs-literal">null</span>;</span></li><li><span class="language-javascript">    <span class="hljs-keyword">var</span> num = <span class="hljs-number">0</span>;</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">startTimer</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"show_num"</span>).<span class="hljs-property">value</span> = ++num;</span></li><li><span class="language-javascript">        }, <span class="hljs-number">1000</span>);</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">resetTimer</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">        <span class="hljs-built_in">clearInterval</span>(timer);</span></li><li><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"show_num"</span>).<span class="hljs-property">value</span> = <span class="hljs-number">0</span>;</span></li><li><span class="language-javascript">        num = <span class="hljs-number">0</span>;</span></li><li><span class="language-javascript">    }</span></li><li><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1210px;">     <h2 id="stopallmedia12" device-type="phone,2in1,tablet,wearable,tv">stopAllMedia<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stopallmedia12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stopAllMedia(): void</p>     <p>控制网页所有音视频停止。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.104.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.104.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'stopAllMedia'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">stopAllMedia</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1210px;">     <h2 id="pauseallmedia12" device-type="phone,2in1,tablet,wearable,tv">pauseAllMedia<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pauseallmedia12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>pauseAllMedia(): void</p>     <p>控制网页所有音视频暂停。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.105.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.105.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'pauseAllMedia'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">pauseAllMedia</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1210px;">     <h2 id="resumeallmedia12" device-type="phone,2in1,tablet,wearable,tv">resumeAllMedia<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="resumeallmedia12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>resumeAllMedia(): void</p>     <p>控制网页被pauseAllMedia接口暂停的音视频继续播放。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.106.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.106.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'resumeAllMedia'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">resumeAllMedia</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1210px;">     <h2 id="closeallmediapresentations12" device-type="phone,2in1,tablet,wearable,tv">closeAllMediaPresentations<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="closeallmediapresentations12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>closeAllMediaPresentations(): void</p>     <p>控制网页所有全屏视频关闭。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.107.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.107.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'closeAllMediaPresentations'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">closeAllMediaPresentations</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1405px;">     <h2 id="getmediaplaybackstate12" device-type="phone,2in1,tablet,wearable,tv">getMediaPlaybackState<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getmediaplaybackstate12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getMediaPlaybackState(): MediaPlaybackState</p>     <p>查询当前网页音视频播放状态。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.108.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.108.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#mediaplaybackstate12">MediaPlaybackState</a></td>         <td class="cellrowborder" width="50%">当前网页的播放状态，具体值为NONE、PLAYING、PAUSED、STOPPED。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.108.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.108.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getMediaPlaybackState'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"MediaPlaybackState : "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getMediaPlaybackState</span>());</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1509px;">     <h2 id="setwebschemehandler12" device-type="phone,2in1,tablet,wearable,tv">setWebSchemeHandler<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setwebschemehandler12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setWebSchemeHandler(scheme: string, handler: WebSchemeHandler): void</p>     <p>为当前Web组件设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webschemehandler">WebSchemeHandler</a>, <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webschemehandler">WebSchemeHandler</a>类用于拦截指定scheme的请求。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">scheme</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要拦截的协议。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">handler</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webschemehandler">WebSchemeHandler</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">拦截此协议的拦截器。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.109.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.109.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Incorrect parameter types.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">schemeHandler</span>: webview.<span class="hljs-property">WebSchemeHandler</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebSchemeHandler</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'setWebSchemeHandler'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setWebSchemeHandler</span>(<span class="hljs-string">'http'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">schemeHandler</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1210px;">     <h2 id="clearwebschemehandler12" device-type="phone,2in1,tablet,wearable,tv">clearWebSchemeHandler<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearwebschemehandler12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearWebSchemeHandler(): void</p>     <p>清除当前Web组件设置的所有WebSchemeHandler。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.110.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.110.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'clearWebSchemeHandler'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">clearWebSchemeHandler</span>();</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1430px;">     <h2 id="setserviceworkerwebschemehandler12" device-type="phone,2in1,tablet,wearable,tv">setServiceWorkerWebSchemeHandler<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setserviceworkerwebschemehandler12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setServiceWorkerWebSchemeHandler(scheme: string, handler: WebSchemeHandler): void</p>     <p>为当前应用的所有Web组件设置用于拦截ServiceWorker的WebSchemeHandler。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.111.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">scheme</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要拦截的协议。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">handler</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webschemehandler">WebSchemeHandler</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">拦截此协议的拦截器。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.111.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.111.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Incorrect parameter types.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">schemeHandler</span>: webview.<span class="hljs-property">WebSchemeHandler</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebSchemeHandler</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'setWebSchemeHandler'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setServiceWorkerWebSchemeHandler</span>(<span class="hljs-string">'http'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">schemeHandler</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 847px;">     <h2 id="clearserviceworkerwebschemehandler12" device-type="phone,2in1,tablet,wearable,tv">clearServiceWorkerWebSchemeHandler<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearserviceworkerwebschemehandler12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>clearServiceWorkerWebSchemeHandler(): void</p>     <p>清除应用中设置的所有用于拦截ServiceWorker的WebSchemeHandler。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'clearServiceWorkerWebSchemeHandler'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">clearServiceWorkerWebSchemeHandler</span>();</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3238px;">     <h2 id="startcamera12" device-type="phone,2in1,tablet,wearable,tv">startCamera<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="startcamera12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>startCamera(): void</p>     <p>开启当前网页摄像头捕获。使用摄像头功能前请在module.json5中添加权限: ohos.permission.CAMERA，具体权限的添加方法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions#在配置文件中声明权限" target="_blank">在配置文件中声明权限</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.113.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.113.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { abilityAccessCtrl, <span class="hljs-title class_">PermissionRequestResult</span>, common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">atManager</span>: abilityAccessCtrl.<span class="hljs-property">AtManager</span> = abilityAccessCtrl.<span class="hljs-title function_">createAtManager</span>();</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">context</span>: <span class="hljs-title class_">Context</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>    atManager.<span class="hljs-title function_">requestPermissionsFromUser</span>(context, [<span class="hljs-string">'ohos.permission.CAMERA'</span>], <span class="hljs-function">(<span class="hljs-params">err: BusinessError, data: PermissionRequestResult</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'data:'</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'data permissions:'</span> + data.<span class="hljs-property">permissions</span>);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'data authResults:'</span> + data.<span class="hljs-property">authResults</span>);</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"startCamera"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">try</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">startCamera</span>();</li><li>        } <span class="hljs-keyword">catch</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>        }</li><li>      })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"stopCamera"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">try</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">stopCamera</span>();</li><li>        } <span class="hljs-keyword">catch</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>        }</li><li>      })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"closeCamera"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">try</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">closeCamera</span>();</li><li>        } <span class="hljs-keyword">catch</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>        }</li><li>      })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onPermissionRequest</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">if</span> (event) {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">showAlertDialog</span>({</li><li>              <span class="hljs-attr">title</span>: <span class="hljs-string">'title'</span>,</li><li>              <span class="hljs-attr">message</span>: <span class="hljs-string">'text'</span>,</li><li>              <span class="hljs-attr">primaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'deny'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">request</span>.<span class="hljs-title function_">deny</span>();</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">secondaryButton</span>: {</li><li>                <span class="hljs-attr">value</span>: <span class="hljs-string">'onConfirm'</span>,</li><li>                <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  event.<span class="hljs-property">request</span>.<span class="hljs-title function_">grant</span>(event.<span class="hljs-property">request</span>.<span class="hljs-title function_">getAccessibleResource</span>());</li><li>                }</li><li>              },</li><li>              <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                event.<span class="hljs-property">request</span>.<span class="hljs-title function_">deny</span>();</li><li>              }</li><li>            })</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li> <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>   <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span></li><li> <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li> <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>   <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"video"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"400px"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"400px"</span> <span class="hljs-attr">autoplay</span>&gt;</span></li><li>   <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span></li><li>   <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"HTML5摄像头"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"开启摄像头"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"getMedia()"</span> /&gt;</span></li><li>   <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">     <span class="hljs-keyword">function</span> <span class="hljs-title function_">getMedia</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">       <span class="hljs-keyword">let</span> constraints = {</span></li><li><span class="language-javascript">         <span class="hljs-attr">video</span>: {</span></li><li><span class="language-javascript">           <span class="hljs-attr">width</span>: <span class="hljs-number">500</span>,</span></li><li><span class="language-javascript">           <span class="hljs-attr">height</span>: <span class="hljs-number">500</span></span></li><li><span class="language-javascript">         },</span></li><li><span class="language-javascript">         <span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span></span></li><li><span class="language-javascript">       }</span></li><li><span class="language-javascript">       <span class="hljs-keyword">let</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"video"</span>);</span></li><li><span class="language-javascript">       <span class="hljs-keyword">let</span> promise = navigator.<span class="hljs-property">mediaDevices</span>.<span class="hljs-title function_">getUserMedia</span>(constraints);</span></li><li><span class="language-javascript">       promise.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">mediaStream</span>) {</span></li><li><span class="language-javascript">         video.<span class="hljs-property">srcObject</span> = mediaStream;</span></li><li><span class="language-javascript">         video.<span class="hljs-title function_">play</span>();</span></li><li><span class="language-javascript">       })</span></li><li><span class="language-javascript">     }</span></li><li><span class="language-javascript">   </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li> <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 617px;">     <h2 id="stopcamera12" device-type="phone,2in1,tablet,wearable,tv">stopCamera<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="stopcamera12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>stopCamera(): void</p>     <p>停止当前网页摄像头捕获。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.114.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.114.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>完整示例代码参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#startcamera12">startCamera</a>。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 617px;">     <h2 id="closecamera12" device-type="phone,2in1,tablet,wearable,tv">closeCamera<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="closecamera12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>closeCamera(): void</p>     <p>关闭当前网页摄像头捕获。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.115.7.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.115.7.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>完整示例代码参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#startcamera12">startCamera</a>。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 6492px;">     <h2 id="precompilejavascript12" device-type="phone,2in1,tablet,wearable,tv">precompileJavaScript<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="precompilejavascript12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>precompileJavaScript(url: string, script: string | Uint8Array, cacheOptions: CacheOptions): Promise&lt;number&gt;</p>     <p>预编译JavaScript生成字节码缓存或根据提供的参数更新已有的字节码缓存。</p>     <p>接口通过提供的文件信息、E-Tag响应头和Last-Modified响应头判断是否需要更新已有的字节码缓存。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.116.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">url</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">本地JavaScript文件对应的网络地址，即业务网页请求该文件的服务器版本时使用的网络地址。网络地址仅支持http或https协议，长度不超过2048。如果该网络地址对应的缓存失效，则业务网页将通过网络请求对应的资源。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">script</td>         <td class="cellrowborder" width="25%">string | Uint8Array</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">本地JavaScript的文本内容。内容不能为空。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">cacheOptions</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#cacheoptions12">CacheOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用于控制字节码缓存更新。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.116.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;number&gt;</td>         <td class="cellrowborder" width="50%">生成字节码缓存的错误码，0表示无错误，-1表示内部错误。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.116.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.116.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Invalid input parameter.Possible causes: 1. Mandatory parameters are left unspecified.2. Incorrect parameter types.3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>接口推荐配合动态组件使用，使用离线的Web组件用于生成字节码缓存，并在适当的时机加载业务用Web组件使用这些字节码缓存。下方是代码示例：</p>     <ol>      <li>       <p>首先，在EntryAbility中将UIContext存到localStorage中。</p>       <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">localStorage</span>: <span class="hljs-title class_">LocalStorage</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LocalStorage</span>(<span class="hljs-string">'uiContext'</span>);</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-attr">storage</span>: <span class="hljs-title class_">LocalStorage</span> = <span class="hljs-variable language_">localStorage</span>;</li><li>
</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>
</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-property">setOrCreate</span>&lt;<span class="hljs-title class_">UIContext</span>&gt;(<span class="hljs-string">"uiContext"</span>, windowStage.<span class="hljs-title function_">getMainWindowSync</span>().<span class="hljs-title function_">getUIContext</span>());</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>编写动态组件所需基础代码。</p>       <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// DynamicComponent.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">BuilderNode</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BuilderData</span> {</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">WebviewController</span>;</li><li>  <span class="hljs-attr">context</span>: <span class="hljs-title class_">UIContext</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> storage : <span class="hljs-title class_">LocalStorage</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NodeControllerImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">BuilderNode</span>&lt;<span class="hljs-title class_">BuilderData</span>[]&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">wrappedBuilder</span>: <span class="hljs-title class_">WrappedBuilder</span>&lt;<span class="hljs-title class_">BuilderData</span>[]&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">wrappedBuilder: WrappedBuilder&lt;BuilderData[]&gt;, context: UIContext</span>) {</li><li>    storage = context.<span class="hljs-title function_">getSharedLocalStorage</span>();</li><li>    <span class="hljs-variable language_">super</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wrappedBuilder</span> = wrappedBuilder;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(): <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getFrameNode</span>();</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">initWeb</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, controller: WebviewController</span>) {</li><li>    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = storage!.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">UIContext</span>&gt;(<span class="hljs-string">"uiContext"</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">UIContext</span>;</li><li>    <span class="hljs-keyword">if</span> (!uiContext) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BuilderNode</span>(uiContext);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">build</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">wrappedBuilder</span>, { <span class="hljs-attr">url</span>: url, <span class="hljs-attr">controller</span>: controller });</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">createNode</span> = (<span class="hljs-params">wrappedBuilder: WrappedBuilder&lt;BuilderData[]&gt;, data: BuilderData</span>) =&gt; {</li><li>  <span class="hljs-keyword">const</span> baseNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NodeControllerImpl</span>(wrappedBuilder, data.<span class="hljs-property">context</span>);</li><li>  baseNode.<span class="hljs-title function_">initWeb</span>(data.<span class="hljs-property">url</span>, data.<span class="hljs-property">controller</span>);</li><li>  <span class="hljs-keyword">return</span> baseNode;</li><li>}</li></ol></pre></div></div></li>      <li>       <p>编写用于生成字节码缓存的组件，本例中的本地Javascript资源内容通过文件读取接口读取rawfile目录下的本地文件。</p>       <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// PrecompileWebview.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BuilderData</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./DynamicComponent"</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Config</span>, configs } <span class="hljs-keyword">from</span> <span class="hljs-string">"./PrecompileConfig"</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">WebBuilder</span>(<span class="hljs-params">data: BuilderData</span>) {</li><li>  <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: data.<span class="hljs-property">url</span>, <span class="hljs-attr">controller</span>: data.<span class="hljs-property">controller</span> })</li><li>    .<span class="hljs-title function_">onControllerAttached</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-title function_">precompile</span>(data.<span class="hljs-property">controller</span>, configs, data.<span class="hljs-property">context</span>);</li><li>    })</li><li>    .<span class="hljs-title function_">fileAccess</span>(<span class="hljs-literal">true</span>)</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> precompileWebview = wrapBuilder&lt;<span class="hljs-title class_">BuilderData</span>[]&gt;(<span class="hljs-title class_">WebBuilder</span>);</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">precompile</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">controller: WebviewController, configs: <span class="hljs-built_in">Array</span>&lt;Config&gt;, context: UIContext</span>) =&gt; {</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> config <span class="hljs-keyword">of</span> configs) {</li><li>    <span class="hljs-keyword">let</span> content = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readRawFile</span>(config.<span class="hljs-property">localPath</span>, context);</li><li>
</li><li>    <span class="hljs-keyword">try</span> {</li><li>      controller.<span class="hljs-title function_">precompileJavaScript</span>(config.<span class="hljs-property">url</span>, content, config.<span class="hljs-property">options</span>)</li><li>        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">errCode</span> =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"precompile successfully! "</span> + errCode);</li><li>        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">errCode: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"precompile failed. "</span> + errCode);</li><li>      });</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"precompile failed. "</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">" "</span> + err.<span class="hljs-property">message</span>);</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">readRawFile</span>(<span class="hljs-params">path: <span class="hljs-built_in">string</span>, context: UIContext</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> context.<span class="hljs-title function_">getHostContext</span>()!.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(path);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(<span class="hljs-number">0</span>);</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ol>     <p>JavaScript资源的获取方式也可通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-http">网络请求</a>的方式获取，但此方法获取到的http响应头非标准HTTP响应头格式，需额外将响应头转换成标准HTTP响应头格式后使用。如通过网络请求获取到的响应头是e-tag，则需要将其转换成E-Tag后使用。</p>     <ol>      <li>       <p>编写业务用组件代码。</p>       <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// BusinessWebview.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BuilderData</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./DynamicComponent"</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">WebBuilder</span>(<span class="hljs-params">data: BuilderData</span>) {</li><li>  <span class="hljs-comment">// 此处组件可根据业务需要自行扩展</span></li><li>  <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: data.<span class="hljs-property">url</span>, <span class="hljs-attr">controller</span>: data.<span class="hljs-property">controller</span> })</li><li>    .<span class="hljs-title function_">cacheMode</span>(<span class="hljs-title class_">CacheMode</span>.<span class="hljs-property">Default</span>)</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> businessWebview = wrapBuilder&lt;<span class="hljs-title class_">BuilderData</span>[]&gt;(<span class="hljs-title class_">WebBuilder</span>);</li></ol></pre></div></div></li>      <li>       <p>编写资源配置信息。</p>       <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// PrecompileConfig.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span></li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> {</li><li>  <span class="hljs-attr">url</span>:  <span class="hljs-built_in">string</span>,</li><li>  <span class="hljs-attr">localPath</span>: <span class="hljs-built_in">string</span>, <span class="hljs-comment">// 本地资源路径</span></li><li>  <span class="hljs-attr">options</span>: webview.<span class="hljs-property">CacheOptions</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">let</span> <span class="hljs-attr">configs</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Config</span>&gt; = [</li><li>  {</li><li>    <span class="hljs-attr">url</span>: <span class="hljs-string">"https://www.example.com/example.js"</span>,</li><li>    <span class="hljs-attr">localPath</span>: <span class="hljs-string">"example.js"</span>,</li><li>    <span class="hljs-attr">options</span>: {</li><li>      <span class="hljs-attr">responseHeaders</span>: [</li><li>        { <span class="hljs-attr">headerKey</span>: <span class="hljs-string">"E-Tag"</span>, <span class="hljs-attr">headerValue</span>: <span class="hljs-string">"aWO42N9P9dG/5xqYQCxsx+vDOoU="</span>},</li><li>        { <span class="hljs-attr">headerKey</span>: <span class="hljs-string">"Last-Modified"</span>, <span class="hljs-attr">headerValue</span>: <span class="hljs-string">"Wed, 21 Mar 2024 10:38:41 GMT"</span>}</li><li>      ]</li><li>    }</li><li>  }</li><li>]</li></ol></pre></div></div></li>      <li>       <p>在页面中使用。</p>       <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { createNode } <span class="hljs-keyword">from</span> <span class="hljs-string">"./DynamicComponent"</span></li><li><span class="hljs-keyword">import</span> { precompileWebview } <span class="hljs-keyword">from</span> <span class="hljs-string">"./PrecompileWebview"</span></li><li><span class="hljs-keyword">import</span> { businessWebview } <span class="hljs-keyword">from</span> <span class="hljs-string">"./BusinessWebview"</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">precompileNode</span>: <span class="hljs-title class_">NodeController</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-attr">precompileController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">businessNode</span>: <span class="hljs-title class_">NodeController</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-attr">businessController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 初始化用于注入本地资源的Web组件</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">precompileNode</span> = <span class="hljs-title function_">createNode</span>(precompileWebview,</li><li>      { <span class="hljs-attr">url</span>: <span class="hljs-string">"https://www.example.com/empty.html"</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">precompileController</span>, <span class="hljs-attr">context</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()});</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 在适当的时机加载业务用Web组件，本例以Button点击触发为例</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"加载页面"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">businessNode</span> = <span class="hljs-title function_">createNode</span>(businessWebview, {</li><li>            <span class="hljs-attr">url</span>:  <span class="hljs-string">"https://www.example.com/business.html"</span>,</li><li>            <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">businessController</span>,</li><li>            <span class="hljs-attr">context</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()</li><li>          });</li><li>        })</li><li>      <span class="hljs-comment">// 用于业务的Web组件</span></li><li>      <span class="hljs-title class_">NodeContainer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">businessNode</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>     </ol>     <p>当需要更新本地已经生成的编译字节码时，修改cacheOptions参数中responseHeaders中的E-Tag或Last-Modified响应头对应的值，再次调用接口即可。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 5510px;">     <h2 id="oncreatenativemediaplayer12" device-type="phone,2in1,tablet,wearable,tv">onCreateNativeMediaPlayer<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oncreatenativemediaplayer12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>onCreateNativeMediaPlayer(callback: CreateNativeMediaPlayerCallback): void</p>     <p>注册回调函数，开启<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#enablenativemediaplayer12">应用接管网页媒体播放功能</a>后，当网页中有播放媒体时，触发注册的回调函数。</p>     <p>如果应用接管网页媒体播放功能未开启，则注册的回调函数不会被触发。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.117.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.117.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.117.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.117.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-t#createnativemediaplayercallback12">CreateNativeMediaPlayerCallback</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">接管网页媒体播放的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">ActualNativeMediaPlayerListener</span> {</li><li>  <span class="hljs-attr">handler</span>: webview.<span class="hljs-property">NativeMediaPlayerHandler</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">handler: webview.NativeMediaPlayerHandler</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span> = handler;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">onPlaying</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 本地播放器开始播放。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleStatusChanged</span>(webview.<span class="hljs-property">PlaybackStatus</span>.<span class="hljs-property">PLAYING</span>);</li><li>  }</li><li>  <span class="hljs-title function_">onPaused</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 本地播放器暂停播放。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleStatusChanged</span>(webview.<span class="hljs-property">PlaybackStatus</span>.<span class="hljs-property">PAUSED</span>);</li><li>  }</li><li>  <span class="hljs-title function_">onSeeking</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 本地播放器开始执行跳转到目标时间点。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleSeeking</span>();</li><li>  }</li><li>  <span class="hljs-title function_">onSeekDone</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 本地播放器 seek 完成。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleSeekFinished</span>();</li><li>  }</li><li>  <span class="hljs-title function_">onEnded</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 本地播放器播放完成。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleEnded</span>();</li><li>  }</li><li>  <span class="hljs-title function_">onVolumeChanged</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 获取本地播放器的音量。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">volume</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title function_">getVolume</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleVolumeChanged</span>(volume);</li><li>  }</li><li>  <span class="hljs-title function_">onCurrentPlayingTimeUpdate</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 更新播放时间。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">currentTime</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title function_">getCurrentPlayingTime</span>();</li><li>    <span class="hljs-comment">// 将时间单位换算成秒。</span></li><li>    <span class="hljs-keyword">let</span> currentTimeInSeconds = <span class="hljs-title function_">convertToSeconds</span>(currentTime);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleTimeUpdate</span>(currentTimeInSeconds);</li><li>  }</li><li>  <span class="hljs-title function_">onBufferedChanged</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 缓存发生了变化。</span></li><li>    <span class="hljs-comment">// 获取本地播放器的缓存时长。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferedEndTime</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title function_">getCurrentBufferedTime</span>();</li><li>    <span class="hljs-comment">// 将时间单位换算成秒。</span></li><li>    <span class="hljs-keyword">let</span> bufferedEndTimeInSeconds = <span class="hljs-title function_">convertToSeconds</span>(bufferedEndTime);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleBufferedEndTimeChanged</span>(bufferedEndTimeInSeconds);</li><li>
</li><li>    <span class="hljs-comment">// 检查缓存状态。</span></li><li>    <span class="hljs-comment">// 如果缓存状态发生了变化，则向 ArkWeb 内核通知缓存状态。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">lastReadyState</span>: webview.<span class="hljs-property">ReadyState</span> = <span class="hljs-title function_">getLastReadyState</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">currentReadyState</span>:  webview.<span class="hljs-property">ReadyState</span> = <span class="hljs-title function_">getCurrentReadyState</span>();</li><li>    <span class="hljs-keyword">if</span> (lastReadyState != currentReadyState) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleReadyStateChanged</span>(currentReadyState);</li><li>    }</li><li>  }</li><li>  <span class="hljs-title function_">onEnterFullscreen</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 本地播放器进入了全屏状态。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">isFullscreen</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleFullscreenChanged</span>(isFullscreen);</li><li>  }</li><li>  <span class="hljs-title function_">onExitFullscreen</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 本地播放器退出了全屏状态。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">isFullscreen</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleFullscreenChanged</span>(isFullscreen);</li><li>  }</li><li>  <span class="hljs-title function_">onUpdateVideoSize</span>(<span class="hljs-params">width: <span class="hljs-built_in">number</span>, height: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-comment">// 当本地播放器解析出视频宽高时， 通知 ArkWeb 内核。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleVideoSizeChanged</span>(width, height);</li><li>  }</li><li>  <span class="hljs-title function_">onDurationChanged</span>(<span class="hljs-params">duration: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-comment">// 本地播放器解析到了新的媒体时长， 通知 ArkWeb 内核。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleDurationChanged</span>(duration);</li><li>  }</li><li>  <span class="hljs-title function_">onError</span>(<span class="hljs-params">error: webview.MediaError, errorMessage: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-comment">// 本地播放器出错了，通知 ArkWeb 内核。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleError</span>(error, errorMessage);</li><li>  }</li><li>  <span class="hljs-title function_">onNetworkStateChanged</span>(<span class="hljs-params">state: webview.NetworkState</span>) {</li><li>    <span class="hljs-comment">// 本地播放器的网络状态发生了变化， 通知 ArkWeb 内核。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleNetworkStateChanged</span>(state);</li><li>  }</li><li>  <span class="hljs-title function_">onPlaybackRateChanged</span>(<span class="hljs-params">playbackRate: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-comment">// 本地播放器的播放速率发生了变化， 通知 ArkWeb 内核。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handlePlaybackRateChanged</span>(playbackRate);</li><li>  }</li><li>  <span class="hljs-title function_">onMutedChanged</span>(<span class="hljs-params">muted: <span class="hljs-built_in">boolean</span></span>) {</li><li>    <span class="hljs-comment">// 本地播放器的静音状态发生了变化， 通知 ArkWeb 内核。</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handler</span>.<span class="hljs-title function_">handleMutedChanged</span>(muted);</li><li>  }</li><li>
</li><li>  <span class="hljs-comment">// ... 监听本地播放器其他的状态 ...</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">NativeMediaPlayerImpl</span> <span class="hljs-keyword">implements</span> webview.<span class="hljs-property">NativeMediaPlayerBridge</span> {</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">handler: webview.NativeMediaPlayerHandler, mediaInfo: webview.MediaInfo</span>) {</li><li>    <span class="hljs-comment">// 1. 创建一个本地播放器的状态监听。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">listener</span>: <span class="hljs-title class_">ActualNativeMediaPlayerListener</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ActualNativeMediaPlayerListener</span>(handler);</li><li>    <span class="hljs-comment">// 2. 创建一个本地播放器。</span></li><li>    <span class="hljs-comment">// 3. 监听该本地播放器。</span></li><li>    <span class="hljs-comment">// ...</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">updateRect</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span>, width: <span class="hljs-built_in">number</span>, height: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-comment">// &lt;video&gt; 标签的位置和大小发生了变化。</span></li><li>    <span class="hljs-comment">// 根据该信息变化，作出相应的改变。</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">play</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 启动本地播放器播放。</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">pause</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 暂停本地播放器播放。</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">seek</span>(<span class="hljs-params">targetTime: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-comment">// 本地播放器跳转到指定的时间点。</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">release</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 销毁本地播放器。</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">setVolume</span>(<span class="hljs-params">volume: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-comment">// ArkWeb 内核要求调整本地播放器的音量。</span></li><li>    <span class="hljs-comment">// 设置本地播放器的音量。</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">setMuted</span>(<span class="hljs-params">muted: <span class="hljs-built_in">boolean</span></span>) {</li><li>    <span class="hljs-comment">// 将本地播放器静音或取消静音。</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">setPlaybackRate</span>(<span class="hljs-params">playbackRate: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-comment">// 调整本地播放器的播放速度。</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">enterFullscreen</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 将本地播放器设置为全屏播放。</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">exitFullscreen</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 将本地播放器退出全屏播放。</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">resumePlayer</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 重新创建应用内播放器。</span></li><li>    <span class="hljs-comment">// 恢复应用内播放器的状态信息。</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">suspendPlayer</span>(<span class="hljs-params"><span class="hljs-keyword">type</span>: webview.SuspendType</span>) {</li><li>    <span class="hljs-comment">// 记录应用内播放器的状态信息。</span></li><li>    <span class="hljs-comment">// 销毁应用内播放器。</span></li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>()</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">enableNativeMediaPlayer</span>({<span class="hljs-attr">enable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">shouldOverlay</span>: <span class="hljs-literal">false</span>})</li><li>        .<span class="hljs-title function_">onPageBegin</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">onCreateNativeMediaPlayer</span>(<span class="hljs-function">(<span class="hljs-params">handler: webview.NativeMediaPlayerHandler, mediaInfo: webview.MediaInfo</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">shouldHandle</span>(mediaInfo)) {</li><li>              <span class="hljs-comment">// 本地播放器不接管该媒体。</span></li><li>              <span class="hljs-comment">// ArkWeb 内核将用自己的播放器来播放该媒体。</span></li><li>              <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</li><li>            }</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">nativePlayer</span>: webview.<span class="hljs-property">NativeMediaPlayerBridge</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NativeMediaPlayerImpl</span>(handler, mediaInfo);</li><li>            <span class="hljs-keyword">return</span> nativePlayer;</li><li>          });</li><li>        })</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// stub</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getVolume</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getCurrentPlayingTime</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getCurrentBufferedTime</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">convertToSeconds</span>(<span class="hljs-params">input: <span class="hljs-built_in">number</span></span>) {</li><li>  <span class="hljs-keyword">return</span> input;</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getLastReadyState</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">return</span> webview.<span class="hljs-property">ReadyState</span>.<span class="hljs-property">HAVE_NOTHING</span>;</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">getCurrentReadyState</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">return</span> webview.<span class="hljs-property">ReadyState</span>.<span class="hljs-property">HAVE_NOTHING</span>;</li><li>}</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">shouldHandle</span>(<span class="hljs-params">mediaInfo: webview.MediaInfo</span>) {</li><li>  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 967px;">     <h2 id="enablewholewebpagedrawing12" device-type="phone,2in1,tablet,wearable,tv">enableWholeWebPageDrawing<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enablewholewebpagedrawing12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static enableWholeWebPageDrawing(): void</p>     <p>设置开启网页全量绘制能力。仅在web初始化时设置。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">enableWholeWebPageDrawing</span>();</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1519px;">     <h2 id="webpagesnapshot12" device-type="phone,2in1,tablet,wearable,tv">webPageSnapshot<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="webpagesnapshot12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>webPageSnapshot(info: SnapshotInfo, callback: AsyncCallback&lt;SnapshotResult&gt;): void</p>     <p>获取网页全量绘制结果。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>仅支持对渲染进程上的资源进行截图：静态图片和文本。</p>       <p>如果页面有视频则截图时会显示该视频的占位图片，没有占位图片则显示空白。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.119.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.119.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.119.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.119.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">info</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#snapshotinfo12">SnapshotInfo</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">全量绘制结果入参。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#snapshotresult12">SnapshotResult</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">全量绘制回调结果。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'webPageSnapshot'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">webPageSnapshot</span>({ <span class="hljs-attr">id</span>: <span class="hljs-string">"1234"</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">100</span> } }, <span class="hljs-function">(<span class="hljs-params">error, result</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">if</span> (error) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>                <span class="hljs-keyword">return</span>;</li><li>              }</li><li>              <span class="hljs-keyword">if</span> (result) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`return value is:<span class="hljs-subst">${result}</span>`</span>);</li><li>                <span class="hljs-comment">//开发者可以根据需要处理返回结果</span></li><li>              }</li><li>            });</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 7207px;">     <h2 id="injectofflineresources12" device-type="phone,2in1,tablet,wearable,tv">injectOfflineResources<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="injectofflineresources12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>injectOfflineResources(resourceMaps: Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#offlineresourcemap12">OfflineResourceMap</a>&gt;): void</p>     <p>将本地离线资源注入到内存缓存中，以提升页面首次启动速度。</p>     <p>内存缓存中的资源由内核自动管理，当注入的资源过多导致内存压力过大，内核自动释放未使用的资源，应避免注入大量资源到内存缓存中。</p>     <p>正常情况下，资源的有效期由提供的Cache-Control或Expires响应头控制其有效期，默认的有效期为86400秒，即1天。</p>     <p>资源的MIMEType通过提供的Content-Type响应头配置，Content-Type需符合标准，否则无法正常使用，MODULE_JS必须提供有效的MIMEType，其他类型可不提供。</p>     <p>以此方式注入的资源，仅支持通过HTML中的标签加载。如果业务网页中的script标签使用了crossorigin属性，则必须在接口的responseHeaders参数中设置Cross-Origin响应头的值为anonymous或use-credentials。</p>     <p>当调用webview.WebviewController.SetRenderProcessMode(webview.RenderProcessMode.MULTIPLE)接口后，应用会启动多渲染进程模式，此接口在此场景下不会生效。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.120.11.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.120.11.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.120.11.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.120.11.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">resourceMaps</td>         <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#offlineresourcemap12">OfflineResourceMap</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">本地离线资源配置对象，单次调用最大支持注入30个资源，单个资源最大支持10Mb。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.120.14.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.120.14.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Invalid input parameter.Possible causes: 1. Mandatory parameters are left unspecified.2. Incorrect parameter types.3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100002</td>         <td class="cellrowborder" width="50%">URL error. The webpage corresponding to the URL is invalid, or the URL length exceeds 2048.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>接口推荐配合动态组件使用，使用离线的Web组件用于将资源注入到内核的内存缓存中，并在适当的时机加载业务用Web组件使用这些资源。下方是代码示例：</p>     <ol>      <li>       <p>首先，在EntryAbility中将UIContext存到localStorage中。</p>       <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UIAbility</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">localStorage</span>: <span class="hljs-title class_">LocalStorage</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LocalStorage</span>(<span class="hljs-string">'uiContext'</span>);</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-attr">storage</span>: <span class="hljs-title class_">LocalStorage</span> = <span class="hljs-variable language_">localStorage</span>;</li><li>
</li><li>  <span class="hljs-title function_">onWindowStageCreate</span>(<span class="hljs-params">windowStage: <span class="hljs-variable language_">window</span>.WindowStage</span>) {</li><li>    windowStage.<span class="hljs-title function_">loadContent</span>(<span class="hljs-string">'pages/Index'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span>) {</li><li>        <span class="hljs-keyword">return</span>;</li><li>      }</li><li>
</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-property">setOrCreate</span>&lt;<span class="hljs-title class_">UIContext</span>&gt;(<span class="hljs-string">"uiContext"</span>, windowStage.<span class="hljs-title function_">getMainWindowSync</span>().<span class="hljs-title function_">getUIContext</span>());</li><li>    });</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>编写动态组件所需基础代码。</p>       <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// DynamicComponent.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">BuilderNode</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">UIContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BuilderData</span> {</li><li>  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">WebviewController</span>;</li><li>  <span class="hljs-attr">context</span>: <span class="hljs-title class_">UIContext</span>;</li><li>}</li><li>
</li><li><span class="hljs-keyword">let</span> storage : <span class="hljs-title class_">LocalStorage</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NodeControllerImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">BuilderNode</span>&lt;<span class="hljs-title class_">BuilderData</span>[]&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">wrappedBuilder</span>: <span class="hljs-title class_">WrappedBuilder</span>&lt;<span class="hljs-title class_">BuilderData</span>[]&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">wrappedBuilder: WrappedBuilder&lt;BuilderData[]&gt;, context: UIContext</span>) {</li><li>    storage = context.<span class="hljs-title function_">getSharedLocalStorage</span>();</li><li>    <span class="hljs-variable language_">super</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wrappedBuilder</span> = wrappedBuilder;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(): <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">getFrameNode</span>();</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">initWeb</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, controller: WebviewController</span>) {</li><li>    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>
</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = storage!.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">UIContext</span>&gt;(<span class="hljs-string">"uiContext"</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">UIContext</span>;</li><li>    <span class="hljs-keyword">if</span> (!uiContext) {</li><li>      <span class="hljs-keyword">return</span>;</li><li>    }</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BuilderNode</span>(uiContext);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">build</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">wrappedBuilder</span>, { <span class="hljs-attr">url</span>: url, <span class="hljs-attr">controller</span>: controller });</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">createNode</span> = (<span class="hljs-params">wrappedBuilder: WrappedBuilder&lt;BuilderData[]&gt;, data: BuilderData</span>) =&gt; {</li><li>  <span class="hljs-keyword">const</span> baseNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NodeControllerImpl</span>(wrappedBuilder, data.<span class="hljs-property">context</span>);</li><li>  baseNode.<span class="hljs-title function_">initWeb</span>(data.<span class="hljs-property">url</span>, data.<span class="hljs-property">controller</span>);</li><li>  <span class="hljs-keyword">return</span> baseNode;</li><li>}</li></ol></pre></div></div></li>      <li>       <p>编写用于注入资源的组件代码，本例中的本地资源内容通过文件读取接口读取rawfile目录下的本地文件。</p>       <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// InjectWebview.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { resourceConfigs } <span class="hljs-keyword">from</span> <span class="hljs-string">"./Resource"</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BuilderData</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./DynamicComponent"</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">WebBuilder</span>(<span class="hljs-params">data: BuilderData</span>) {</li><li>  <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: data.<span class="hljs-property">url</span>, <span class="hljs-attr">controller</span>: data.<span class="hljs-property">controller</span> })</li><li>    .<span class="hljs-title function_">onControllerAttached</span>(<span class="hljs-keyword">async</span> () =&gt; {</li><li>      <span class="hljs-keyword">try</span> {</li><li>        data.<span class="hljs-property">controller</span>.<span class="hljs-title function_">injectOfflineResources</span>(<span class="hljs-keyword">await</span> getData (data.<span class="hljs-property">context</span>));</li><li>      } <span class="hljs-keyword">catch</span> (err) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"error: "</span> + err.<span class="hljs-property">code</span> + <span class="hljs-string">" "</span> + err.<span class="hljs-property">message</span>);</li><li>      }</li><li>    })</li><li>    .<span class="hljs-title function_">fileAccess</span>(<span class="hljs-literal">true</span>)</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> injectWebview = wrapBuilder&lt;<span class="hljs-title class_">BuilderData</span>[]&gt;(<span class="hljs-title class_">WebBuilder</span>);</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params">context: UIContext</span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceMapArr</span>: <span class="hljs-title class_">Array</span>&lt;webview.<span class="hljs-property">OfflineResourceMap</span>&gt; = [];</li><li>
</li><li>  <span class="hljs-comment">// 读取配置，从rawfile目录中读取文件内容</span></li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> config <span class="hljs-keyword">of</span> resourceConfigs) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">buf</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(<span class="hljs-number">0</span>);</li><li>    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">localPath</span>) {</li><li>      buf = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readRawFile</span>(config.<span class="hljs-property">localPath</span>, context);</li><li>    }</li><li>
</li><li>    resourceMapArr.<span class="hljs-title function_">push</span>({</li><li>      <span class="hljs-attr">urlList</span>: config.<span class="hljs-property">urlList</span>,</li><li>      <span class="hljs-attr">resource</span>: buf,</li><li>      <span class="hljs-attr">responseHeaders</span>: config.<span class="hljs-property">responseHeaders</span>,</li><li>      <span class="hljs-attr">type</span>: config.<span class="hljs-property">type</span>,</li><li>    })</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">return</span> resourceMapArr;</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">readRawFile</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, context: UIContext</span>) {</li><li>  <span class="hljs-keyword">try</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> context.<span class="hljs-title function_">getHostContext</span>()!.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContent</span>(url);</li><li>  } <span class="hljs-keyword">catch</span> (err) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(<span class="hljs-number">0</span>);</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>编写业务用组件代码。</p>       <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// BusinessWebview.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BuilderData</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./DynamicComponent"</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">WebBuilder</span>(<span class="hljs-params">data: BuilderData</span>) {</li><li>  <span class="hljs-comment">// 此处组件可根据业务需要自行扩展</span></li><li>  <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: data.<span class="hljs-property">url</span>, <span class="hljs-attr">controller</span>: data.<span class="hljs-property">controller</span> })</li><li>    .<span class="hljs-title function_">cacheMode</span>(<span class="hljs-title class_">CacheMode</span>.<span class="hljs-property">Default</span>)</li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> businessWebview = wrapBuilder&lt;<span class="hljs-title class_">BuilderData</span>[]&gt;(<span class="hljs-title class_">WebBuilder</span>);</li></ol></pre></div></div></li>      <li>       <p>编写资源配置信息。</p>       <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Resource.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ResourceConfig</span> {</li><li>  <span class="hljs-attr">urlList</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;,</li><li>  <span class="hljs-attr">type</span>: webview.<span class="hljs-property">OfflineResourceType</span>,</li><li>  <span class="hljs-attr">responseHeaders</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">Header</span>&gt;,</li><li>  <span class="hljs-attr">localPath</span>: <span class="hljs-built_in">string</span>, <span class="hljs-comment">// 本地资源存放在rawfile目录下的路径</span></li><li>}</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceConfigs</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">ResourceConfig</span>&gt; = [</li><li>  {</li><li>    <span class="hljs-attr">localPath</span>: <span class="hljs-string">"example.png"</span>,</li><li>    <span class="hljs-attr">urlList</span>: [</li><li>      <span class="hljs-string">"https://www.example.com/"</span>,</li><li>      <span class="hljs-string">"https://www.example.com/path1/example.png"</span>,</li><li>      <span class="hljs-string">"https://www.example.com/path2/example.png"</span>,</li><li>    ],</li><li>    <span class="hljs-attr">type</span>: webview.<span class="hljs-property">OfflineResourceType</span>.<span class="hljs-property">IMAGE</span>,</li><li>    <span class="hljs-attr">responseHeaders</span>: [</li><li>      { <span class="hljs-attr">headerKey</span>: <span class="hljs-string">"Cache-Control"</span>, <span class="hljs-attr">headerValue</span>: <span class="hljs-string">"max-age=1000"</span> },</li><li>      { <span class="hljs-attr">headerKey</span>: <span class="hljs-string">"Content-Type"</span>, <span class="hljs-attr">headerValue</span>: <span class="hljs-string">"image/png"</span> },</li><li>    ]</li><li>  },</li><li>  {</li><li>    <span class="hljs-attr">localPath</span>: <span class="hljs-string">"example.js"</span>,</li><li>    <span class="hljs-attr">urlList</span>: [ <span class="hljs-comment">// 仅提供一个url，这个url既作为资源的源，也作为资源的网络请求地址</span></li><li>      <span class="hljs-string">"https://www.example.com/example.js"</span>,</li><li>    ],</li><li>    <span class="hljs-attr">type</span>: webview.<span class="hljs-property">OfflineResourceType</span>.<span class="hljs-property">CLASSIC_JS</span>,</li><li>    <span class="hljs-attr">responseHeaders</span>: [</li><li>      <span class="hljs-comment">// 以&lt;script crossorigin="anonymous" /&gt;方式使用，提供额外的响应头</span></li><li>      { <span class="hljs-attr">headerKey</span>: <span class="hljs-string">"Cross-Origin"</span>, <span class="hljs-attr">headerValue</span>:<span class="hljs-string">"anonymous"</span> }</li><li>    ]</li><li>  },</li><li>];</li></ol></pre></div></div></li>      <li>       <p>在页面中使用。</p>       <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// Index.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { createNode } <span class="hljs-keyword">from</span> <span class="hljs-string">"./DynamicComponent"</span></li><li><span class="hljs-keyword">import</span> { injectWebview } <span class="hljs-keyword">from</span> <span class="hljs-string">"./InjectWebview"</span></li><li><span class="hljs-keyword">import</span> { businessWebview } <span class="hljs-keyword">from</span> <span class="hljs-string">"./BusinessWebview"</span></li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">injectNode</span>: <span class="hljs-title class_">NodeController</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-attr">injectController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">businessNode</span>: <span class="hljs-title class_">NodeController</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-attr">businessController</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">// 初始化用于注入本地资源的Web组件, 提供一个空的html页面作为url即可</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">injectNode</span> = <span class="hljs-title function_">createNode</span>(injectWebview,</li><li>        { <span class="hljs-attr">url</span>: <span class="hljs-string">"https://www.example.com/empty.html"</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">injectController</span>, <span class="hljs-attr">context</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()});</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 在适当的时机加载业务用Web组件，本例以Button点击触发为例</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"加载页面"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">businessNode</span> = <span class="hljs-title function_">createNode</span>(businessWebview, {</li><li>            <span class="hljs-attr">url</span>: <span class="hljs-string">"https://www.example.com/business.html"</span>,</li><li>            <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">businessController</span>,</li><li>            <span class="hljs-attr">context</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()</li><li>          });</li><li>        })</li><li>      <span class="hljs-comment">// 用于业务的Web组件</span></li><li>      <span class="hljs-title class_">NodeContainer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">businessNode</span>);</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div></li>      <li>       <p>加载的HTML网页示例。</p>       <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="HTML prettyprint linenums hljs language-HTML" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://www.example.com/path1/request.png"</span> /&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://www.example.com/path2/request.png"</span> /&gt;</span></li><li>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://www.example.com/example.js"</span> <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div></li>     </ol>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 930px;">     <h2 id="sethostip12" device-type="phone,2in1,tablet,wearable,tv">setHostIP<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="sethostip12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static setHostIP(hostName: string, address: string, aliveTime: number): void</p>     <p>设置主机域名解析后的IP地址。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.121.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.121.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.121.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.121.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">hostName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要添加DNS记录的主机域名。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">address</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">主机域名解析地址（支持IPv4，IPv6）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">aliveTime</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">缓存有效时间（秒）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.121.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.121.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified.2. Incorrect parameter types.3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>请参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#clearhostip12">clearHostIP</a>。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1625px;">     <h2 id="clearhostip12" device-type="phone,2in1,tablet,wearable,tv">clearHostIP<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearhostip12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static clearHostIP(hostName: string): void</p>     <p>清除指定主机域名解析后的IP地址。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.122.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.122.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.122.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.122.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">hostName</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">要清除DNS记录的主机域名。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.122.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.122.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified.2. Incorrect parameter types.3. Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// url加载前设置生效.</span></li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'setHostIP'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setHostIP</span>(<span class="hljs-string">'www.example.com'</span>, <span class="hljs-string">'127.0.0.1'</span>, <span class="hljs-number">30</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'clearHostIP'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">clearHostIP</span>(<span class="hljs-string">'www.example.com'</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1470px;">     <h2 id="getsurfaceid12" device-type="phone,2in1,tablet,wearable,tv">getSurfaceId<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsurfaceid12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getSurfaceId(): string</p>     <p>获取ArkWeb对应Surface的ID，此ID可用于网页截图。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>仅Web组件渲染模式是ASYNC_RENDER时有效。getSurfaceId需要在Web组件初始化之后才能获取到值。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.123.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.123.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string</td>         <td class="cellrowborder" width="50%">ArkWeb持有Surface的ID。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Example</span>{</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">imagePixelMap</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>){</li><li>    <span class="hljs-title class_">Column</span>(){</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">"截图"</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">()=&gt;</span>{</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> surfaceId = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getSurfaceId</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"surfaceId: "</span> + surfaceId);</li><li>            <span class="hljs-keyword">if</span>(surfaceId.<span class="hljs-property">length</span> != <span class="hljs-number">0</span>) {</li><li>              <span class="hljs-keyword">let</span> <span class="hljs-attr">region</span>:image.<span class="hljs-property">Region</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">800</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">1000</span>}}</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span> = image.<span class="hljs-title function_">createPixelMapFromSurfaceSync</span>(surfaceId, region)</li><li>            }</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">imagePixelMap</span>)</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">100</span>)</li><li>      <span class="hljs-title class_">Web</span>({<span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>})</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3574px;">     <h2 id="seturltrustlist12" device-type="phone,2in1,tablet,wearable,tv">setUrlTrustList<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="seturltrustlist12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setUrlTrustList(urlTrustList: string): void</p>     <p>设置当前web的url白名单，只有白名单内的url才能允许加载/跳转，否则将拦截并弹出告警页。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.124.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.124.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.124.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.124.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">urlTrustList</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>url白名单列表，使用json格式配置，最大支持10MB。</p>          <p>白名单设置接口为覆盖方式，多次调用接口时，以最后一次设置为准。</p>          <p>当本参数为空字符串时，表示取消白名单，放行所有url的访问。</p>          <p>json格式示例：</p>          <p>{</p>          <p>"UrlPermissionList": [</p>          <p>{</p>          <p>"scheme": "https",</p>          <p>"host": "www.example1.com",</p>          <p>"port": 443,</p>          <p>"path": "pathA/pathB"</p>          <p>},</p>          <p>{</p>          <p>"scheme": "http",</p>          <p>"host": "www.example2.com",</p>          <p>"port": 80,</p>          <p>"path": "test1/test2/test3"</p>          <p>}</p>          <p>]</p>          <p>}</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>白名单json格式参数</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.124.8.1.5.1.1" width="25%">字段</th>         <th align="left" class="cellrowborder" id="mcps1.3.124.8.1.5.1.2" width="25%">参数类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.124.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.124.8.1.5.1.4" width="25%">参数描述</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">scheme</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">可选参数，不设置即不匹配该项，支持协议：http、https。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">host</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">必选参数，精准匹配，即url的host字段和规则字段完全一致才会放行，可允许同一host多条规则同时生效。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">port</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">可选字段，不设置即不匹配该项。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">path</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">可选字段，不设置即不匹配该项，匹配方式为前缀匹配，以"pathA/pathB/pathC"为例：pathA/pathB/pathC三级目录下全部允许访问，其中pathC必须是完整的目录名或者文件名，不允许部分匹配。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.124.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.124.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified.2. Parameter string is too long.3. Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">urltrustList</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"{\"UrlPermissionList\":[{\"scheme\":\"http\", \"host\":\"trust.example.com\", \"port\":80, \"path\":\"test\"}]}"</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Setting the trustlist'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 设置白名单，只允许访问trust网页</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setUrlTrustList</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">urltrustList</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Cancel the trustlist.'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 白名单传入空字符串表示关闭白名单机制，所有url都可以允许访问</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setUrlTrustList</span>(<span class="hljs-string">""</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Access the trust web'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 白名单生效，可以访问trust网页</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">'http://trust.example.com/test'</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Access the untrust web'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 白名单生效，此时不可以访问untrust网页，并弹出错误页</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">'http://untrust.example.com/test'</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'http://untrust.example.com/test'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> }).<span class="hljs-title function_">onControllerAttached</span>(<span class="hljs-function">() =&gt;</span> {</li><li>        <span class="hljs-keyword">try</span> {</li><li>          <span class="hljs-comment">// onControllerAttached回调中设置白名单，可以保证在加载url之前生效，此时不可以访问untrust网页，并弹出错误页</span></li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setUrlTrustList</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">urltrustList</span>);</li><li>        } <span class="hljs-keyword">catch</span> (error) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>        }</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 3664px;">     <h2 id="setpathallowinguniversalaccess12" device-type="phone,2in1,tablet,wearable,tv">setPathAllowingUniversalAccess<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setpathallowinguniversalaccess12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setPathAllowingUniversalAccess(pathList: Array&lt;string&gt;): void</p>     <p>设置一个路径列表，当file协议访问该路径列表中的资源时，允许跨域访问本地文件，也允许跨域访问其他在线资源。此外，当设置了路径列表时，file协议仅允许访问路径列表中的资源（<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#fileaccess">fileAccess</a>的行为将会被此接口行为覆盖）。路径列表中的路径必须满足以下路径格式之一：</p>     <p>1.应用文件目录的子目录（应用文件目录通过Ability Kit中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context">Context.filesDir</a>获取），例如：</p>     <ul>      <li>/data/storage/el2/base/files/example</li>      <li>/data/storage/el2/base/haps/entry/files/example</li>     </ul>     <p>2.应用资源目录及其子目录（应用资源目录通过Ability Kit中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context">Context.resourceDir</a>获取），例如：</p>     <ul>      <li>/data/storage/el1/bundle/entry/resource/resfile</li>      <li>/data/storage/el1/bundle/entry/resource/resfile/example</li>     </ul>     <p>3.从API version 21开始，还包括了应用缓存目录及其子目录（应用缓存目录通过Ability Kit中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context">Context.cacheDir</a>获取），例如：</p>     <ul>      <li>/data/storage/el2/base/cache</li>      <li>/data/storage/el2/base/haps/entry/cache/example</li>      <li>设置的目录路径中，不允许包含cache/web，否则会抛出异常码401。如果设置目录路径是cache，cache/web也不允许访问。</li>     </ul>     <p>4.从API version 21开始，还包括了应用临时目录及其子目录（应用临时目录通过Ability Kit中的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context">Context.tempDir</a>获取），例如：</p>     <ul>      <li>/data/storage/el2/base/temp</li>      <li>/data/storage/el2/base/haps/entry/temp/example</li>     </ul>     <p>当路径列表中有其中一个路径不满足以上条件之一，则会抛出异常码401，并且设置路径列表失败。当设置的路径列表为空，则file协议可访问范围以<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#fileaccess">fileAccess</a>的行为为准。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.125.15.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.125.15.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.125.15.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.125.15.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">pathList</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">路径列表</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.125.18.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.125.18.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Parameter string is too long. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onControllerAttached</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-comment">// 设置允许可以跨域访问的路径列表</span></li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setPathAllowingUniversalAccess</span>([</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getHostContext</span>()!.<span class="hljs-property">resourceDir</span>,</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">uiContext</span>.<span class="hljs-title function_">getHostContext</span>()!.<span class="hljs-property">filesDir</span> + <span class="hljs-string">"/example"</span></li><li>            ])</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">loadUrl</span>(<span class="hljs-string">"file://"</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()!.<span class="hljs-property">resourceDir</span> + <span class="hljs-string">"/index.html"</span>)</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">fileAccess</span>(<span class="hljs-literal">true</span>)</li><li>        .<span class="hljs-title function_">domStorageAccess</span>(<span class="hljs-literal">true</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件，位于应用资源目录resource/resfile/index.html。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span></li><li>
</li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></li><li><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">getFile</span>(<span class="hljs-params"></span>) {</span></li><li><span class="language-javascript">            <span class="hljs-keyword">var</span> file = <span class="hljs-string">"file:///data/storage/el1/bundle/entry/resources/resfile/js/script.js"</span>;</span></li><li><span class="language-javascript">            <span class="hljs-keyword">var</span> xmlHttpReq = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();</span></li><li><span class="language-javascript">            xmlHttpReq.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){</span></li><li><span class="language-javascript">                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"readyState:"</span> + xmlHttpReq.<span class="hljs-property">readyState</span>);</span></li><li><span class="language-javascript">                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"status:"</span> + xmlHttpReq.<span class="hljs-property">status</span>);</span></li><li><span class="language-javascript">                <span class="hljs-keyword">if</span>(xmlHttpReq.<span class="hljs-property">readyState</span> == <span class="hljs-number">4</span>){</span></li><li><span class="language-javascript">                    <span class="hljs-keyword">if</span> (xmlHttpReq.<span class="hljs-property">status</span> == <span class="hljs-number">200</span>) {</span></li><li><span class="language-javascript">                <span class="hljs-comment">// 如果ets侧正确设置路径列表，则此处能正常获取资源</span></span></li><li><span class="language-javascript">                        <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'text'</span>);</span></li><li><span class="language-javascript">                        element.<span class="hljs-property">textContent</span> = <span class="hljs-string">"load "</span> + file + <span class="hljs-string">" success"</span>;</span></li><li><span class="language-javascript">                    } <span class="hljs-keyword">else</span> {</span></li><li><span class="language-javascript">                <span class="hljs-comment">// 如果ets侧不设置路径列表，则此处会触发CORS跨域检查错误</span></span></li><li><span class="language-javascript">                        <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'text'</span>);</span></li><li><span class="language-javascript">                        element.<span class="hljs-property">textContent</span> = <span class="hljs-string">"load "</span> + file + <span class="hljs-string">" failed"</span>;</span></li><li><span class="language-javascript">                    }</span></li><li><span class="language-javascript">                }</span></li><li><span class="language-javascript">            }</span></li><li><span class="language-javascript">            xmlHttpReq.<span class="hljs-title function_">open</span>(<span class="hljs-string">"GET"</span>, file);</span></li><li><span class="language-javascript">            xmlHttpReq.<span class="hljs-title function_">send</span>(<span class="hljs-literal">null</span>);</span></li><li><span class="language-javascript">        }</span></li><li><span class="language-javascript"></span></li><li><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li>
</li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"example"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"getFile()"</span>&gt;</span>stealFile<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"text"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li>
</li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>     <p>html中使用file协议通过XMLHttpRequest跨域访问本地js文件，js文件位于resource/resfile/js/script.js。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="javascript prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">const</span> body = <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>;</li><li><span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);</li><li>element.<span class="hljs-property">textContent</span> = <span class="hljs-string">'success'</span>;</li><li>body.<span class="hljs-title function_">appendChild</span>(element);</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1070px;">     <h2 id="enablebackforwardcache12" device-type="phone,2in1,tablet,wearable,tv">enableBackForwardCache<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enablebackforwardcache12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static enableBackForwardCache(features: BackForwardCacheSupportedFeatures): void</p>     <p>开启Web组件前进后退缓存功能，通过参数指定是否允许使用特定的页面进入前进后退缓存。</p>     <p>需要在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#initializewebengine">initializeWebEngine()</a>初始化内核之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.126.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.126.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.126.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.126.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">features</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/kts-apis-webview-backforwardcachesupportedfeatures">BackForwardCacheSupportedFeatures</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">允许使用特定的页面进入前进后退缓存中。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>    <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>        <span class="hljs-keyword">let</span> features = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">BackForwardCacheSupportedFeatures</span>();</li><li>        features.<span class="hljs-property">nativeEmbed</span> = <span class="hljs-literal">true</span>;</li><li>        features.<span class="hljs-property">mediaTakeOver</span> = <span class="hljs-literal">true</span>;</li><li>        <span class="hljs-comment">// 如果一个页面同时使用了同层渲染和视频托管的能力，需要 nativeEmbed 和</span></li><li>        <span class="hljs-comment">// mediaTakeOver 同时设置为 true，该页面才可以进入前进后退缓存中。</span></li><li>        webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">enableBackForwardCache</span>(features);</li><li>        webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">initializeWebEngine</span>();</li><li>        <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">"abilityWant"</span>, want);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1553px;">     <h2 id="setbackforwardcacheoptions12" device-type="phone,2in1,tablet,wearable,tv">setBackForwardCacheOptions<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setbackforwardcacheoptions12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setBackForwardCacheOptions(options: BackForwardCacheOptions): void</p>     <p>可以设置Web组件中前进后退缓存的相关选项。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.127.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.127.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.127.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.127.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-backforwardcacheoptions">BackForwardCacheOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用来控制Web组件前进后退缓存相关选项。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.127.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.127.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ts</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"Add options"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">(<span class="hljs-params">event: ClickEvent</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> options = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">BackForwardCacheOptions</span>();</li><li>          options.<span class="hljs-property">size</span> = <span class="hljs-number">3</span>;</li><li>          options.<span class="hljs-property">timeToLive</span> = <span class="hljs-number">10</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setBackForwardCacheOptions</span>(options);</li><li>        })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"Backward"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">(<span class="hljs-params">event: ClickEvent</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">backward</span>();</li><li>        })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"Forward"</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">(<span class="hljs-params">event: ClickEvent</span>) =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">forward</span>();</li><li>        })</li><li>      }</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">"https://www.example.com"</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1457px;">     <h2 id="trimmemorybypressurelevel14" device-type="phone,2in1,tablet,wearable,tv">trimMemoryByPressureLevel<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="trimmemorybypressurelevel14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>trimMemoryByPressureLevel(level: PressureLevel): void</p>     <p>根据指定的内存压力等级，主动清理Web组件占用的缓存。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.128.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.128.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.128.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.128.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">level</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#pressurelevel14">PressureLevel</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">需要清理内存的内存等级。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.128.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.128.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1. Mandatory parameters are left unspecified. 2. Parameter string is too long. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: <span class="hljs-title class_">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'trim_Memory'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-comment">// 设置当前内存压力等级为适中，释放少量内存</span></li><li>              webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">trimMemoryByPressureLevel</span>(</li><li>                webview.<span class="hljs-property">PressureLevel</span>.<span class="hljs-property">MEMORY_PRESSURE_LEVEL_MODERATE</span>);</li><li>            } <span class="hljs-keyword">catch</span> (error) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>            }</li><li>          })</li><li>      }.<span class="hljs-title function_">height</span>(<span class="hljs-string">'10%'</span>)</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2085px;">     <h2 id="createpdf14" device-type="phone,2in1,tablet,wearable,tv">createPdf<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpdf14" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPdf(configuration: PdfConfiguration, callback: AsyncCallback&lt;PdfData&gt;): void</p>     <p>异步callback方式获取指定网页的数据流。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.129.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.129.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.129.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.129.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">configuration</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#pdfconfiguration14">PdfConfiguration</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">生成PDF所需参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-pdfdata">PdfData</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调返回网页PDF数据流。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.129.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.129.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Invalid input parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>:</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">pdfConfig</span>: webview.<span class="hljs-property">PdfConfiguration</span> = {</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-number">8.27</span>,</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">11.69</span>,</li><li>    <span class="hljs-attr">marginTop</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">marginBottom</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">marginRight</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">marginLeft</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">shouldPrintBackground</span>: <span class="hljs-literal">true</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'SavePDF'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">createPdf</span>(</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pdfConfig</span>,</li><li>            <span class="hljs-function">(<span class="hljs-params">error, result: webview.PdfData</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">try</span> {</li><li>                <span class="hljs-comment">// 获取组件上下文</span></li><li>                <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>                <span class="hljs-comment">// 获取沙箱路径，设置pdf文件名</span></li><li>                <span class="hljs-keyword">let</span> filePath = context.<span class="hljs-property">filesDir</span> + <span class="hljs-string">"/test.pdf"</span>;</li><li>                <span class="hljs-keyword">let</span> file = fs.<span class="hljs-title function_">openSync</span>(filePath, fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span> | fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span>);</li><li>                fs.<span class="hljs-title function_">write</span>(file.<span class="hljs-property">fd</span>, result.<span class="hljs-title function_">pdfArrayBuffer</span>().<span class="hljs-property">buffer</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">writeLen: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"createPDF write data to file succeed and size is:"</span> + writeLen);</li><li>                }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"createPDF write data to file failed with error message: "</span> + err.<span class="hljs-property">message</span> +</li><li>                    <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>                }).<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                  fs.<span class="hljs-title function_">closeSync</span>(file);</li><li>                });</li><li>              } <span class="hljs-keyword">catch</span> (resError) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>              }</li><li>            });</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">"www.example.com"</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2187px;">     <h2 id="createpdf14-1" device-type="phone,2in1,tablet,wearable,tv">createPdf<sup>14+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="createpdf14-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPdf(configuration: PdfConfiguration): Promise&lt;PdfData&gt;</p>     <p>以Promise方式异步获取指定网页的数据流。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.130.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.130.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.130.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.130.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">configuration</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#pdfconfiguration14">PdfConfiguration</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">生成PDF所需参数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.130.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.130.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-pdfdata">PdfData</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，返回网页数据流。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.130.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.130.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Invalid input parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong>:</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">pdfConfig</span>: webview.<span class="hljs-property">PdfConfiguration</span> = {</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-number">8.27</span>,</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">11.69</span>,</li><li>    <span class="hljs-attr">marginTop</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">marginBottom</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">marginRight</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">marginLeft</span>: <span class="hljs-number">0</span>,</li><li>    <span class="hljs-attr">shouldPrintBackground</span>: <span class="hljs-literal">true</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'SavePDF'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">createPdf</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pdfConfig</span>)</li><li>            .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result: webview.PdfData</span>) =&gt;</span> {</li><li>              <span class="hljs-keyword">try</span> {</li><li>                <span class="hljs-comment">// 获取组件上下文</span></li><li>                <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>                <span class="hljs-comment">// 获取沙箱路径，设置pdf文件名</span></li><li>                <span class="hljs-keyword">let</span> filePath = context.<span class="hljs-property">filesDir</span> + <span class="hljs-string">"/test.pdf"</span>;</li><li>                <span class="hljs-keyword">let</span> file = fs.<span class="hljs-title function_">openSync</span>(filePath, fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span> | fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span>);</li><li>                fs.<span class="hljs-title function_">write</span>(file.<span class="hljs-property">fd</span>, result.<span class="hljs-title function_">pdfArrayBuffer</span>().<span class="hljs-property">buffer</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">writeLen: <span class="hljs-built_in">number</span></span>) =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"createPDF write data to file succeed and size is:"</span> + writeLen);</li><li>                }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"createPDF write data to file failed with error message: "</span> + err.<span class="hljs-property">message</span> +</li><li>                    <span class="hljs-string">", error code: "</span> + err.<span class="hljs-property">code</span>);</li><li>                }).<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                  fs.<span class="hljs-title function_">closeSync</span>(file);</li><li>                });</li><li>              } <span class="hljs-keyword">catch</span> (resError) {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(resError <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>              }</li><li>            })</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">"www.example.com"</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2398px;">     <h2 id="getscrolloffset13" device-type="phone,2in1,tablet,wearable,tv">getScrollOffset<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getscrolloffset13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getScrollOffset(): ScrollOffset</p>     <p>获取网页当前的滚动偏移量（包含过滚动偏移量）。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.131.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.131.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#scrolloffset13">ScrollOffset</a></td>         <td class="cellrowborder" width="50%">网页当前的滚动偏移量（包含过滚动偏移量）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">testTitle</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'webScroll'</span></li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">controllerX</span>: <span class="hljs-built_in">number</span> =-<span class="hljs-number">100</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">controllerY</span>: <span class="hljs-built_in">number</span> =-<span class="hljs-number">100</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">mode</span>: <span class="hljs-title class_">OverScrollMode</span> = <span class="hljs-title class_">OverScrollMode</span>.<span class="hljs-property">ALWAYS</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Row</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">testTitle</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">5</span>)</li><li>      }</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">`controllerX: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.controllerX}</span>, controllerY: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.controllerY}</span>`</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">"index.html"</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">key</span>(<span class="hljs-string">"web_01"</span>)</li><li>        .<span class="hljs-title function_">overScrollMode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mode</span>)</li><li>        .<span class="hljs-title function_">onTouch</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controllerX</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getScrollOffset</span>().<span class="hljs-property">x</span>;</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-property">controllerY</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getScrollOffset</span>().<span class="hljs-property">y</span>;</li><li>          <span class="hljs-keyword">let</span> componentInfo = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getComponentUtils</span>().<span class="hljs-title function_">getRectangleById</span>(<span class="hljs-string">"web_01"</span>);</li><li>          <span class="hljs-keyword">let</span> webHeight = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">px2vp</span>(componentInfo.<span class="hljs-property">size</span>.<span class="hljs-property">height</span>);</li><li>          <span class="hljs-keyword">let</span> pageHeight = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getPageHeight</span>();</li><li>          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controllerY</span> &lt; <span class="hljs-number">0</span>) {</li><li>            <span class="hljs-comment">// case1：网页向下过滚动时，可直接使用ScrollOffset.y</span></li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`get downwards overscroll offsetY = <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.controllerY}</span>`</span>);</li><li>          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((<span class="hljs-variable language_">this</span>.<span class="hljs-property">controllerY</span> != <span class="hljs-number">0</span>) &amp;&amp; (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controllerY</span> &gt; (pageHeight - webHeight))) {</li><li>            <span class="hljs-comment">// case2：网页向上过滚动时，需计算出网页下边界与Web组件下边界的偏移量</span></li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`get upwards overscroll offsetY = <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.controllerY - (pageHeight &gt;= webHeight ? (pageHeight - webHeight) : <span class="hljs-number">0</span>)}</span>`</span>);</li><li>          } <span class="hljs-keyword">else</span> {</li><li>            <span class="hljs-comment">// case3：网页未发生过滚动时，可直接使用ScrollOffset.y</span></li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`get scroll offsetY = <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.controllerY}</span>`</span>);</li><li>          }</li><li>        })</li><li>        .<span class="hljs-title function_">height</span>(<span class="hljs-number">600</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p>加载的html文件。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width,initial-scale=1.0"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-tag">body</span> {</span></li><li><span class="language-css">          <span class="hljs-attribute">width</span>:<span class="hljs-number">3000px</span>;</span></li><li><span class="language-css">          <span class="hljs-attribute">height</span>:<span class="hljs-number">6000px</span>;</span></li><li><span class="language-css">          <span class="hljs-attribute">padding-right</span>:<span class="hljs-number">170px</span>;</span></li><li><span class="language-css">          <span class="hljs-attribute">padding-left</span>:<span class="hljs-number">170px</span>;</span></li><li><span class="language-css">          <span class="hljs-attribute">border</span>:<span class="hljs-number">5px</span> solid blueviolet;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li>Scroll Test</li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2161px;">     <h2 id="getpageoffset20" device-type="phone,2in1,tablet,wearable,tv">getPageOffset<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getpageoffset20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getPageOffset(): ScrollOffset</p>     <p>获取网页当前的滚动偏移量（不包含过滚动偏移量）。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.132.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.132.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#scrolloffset13">ScrollOffset</a></td>         <td class="cellrowborder" width="50%">网页当前的滚动偏移量（不包含过滚动偏移量）。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.132.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.132.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: $rawfile(<span class="hljs-string">'index.html'</span>), <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onScroll</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getPageOffset x:"</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getPageOffset</span>().<span class="hljs-property">x</span> + <span class="hljs-string">",y:"</span> +</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getPageOffset</span>().<span class="hljs-property">y</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="html prettyprint linenums hljs language-xml" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">&lt;!-- index.html --&gt;</span></li><li><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span></li><li>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></li><li><span class="language-css">        <span class="hljs-selector-class">.blue</span> {</span></li><li><span class="language-css">          <span class="hljs-attribute">background-color</span>: lightblue;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">        <span class="hljs-selector-class">.green</span> {</span></li><li><span class="language-css">          <span class="hljs-attribute">background-color</span>: lightgreen;</span></li><li><span class="language-css">        }</span></li><li><span class="language-css">        <span class="hljs-selector-class">.blue</span>, <span class="hljs-selector-class">.green</span> {</span></li><li><span class="language-css">         <span class="hljs-attribute">font-size</span>:<span class="hljs-number">16px</span>;</span></li><li><span class="language-css">         <span class="hljs-attribute">height</span>:<span class="hljs-number">200px</span>;</span></li><li><span class="language-css">         <span class="hljs-attribute">text-align</span>: center;       <span class="hljs-comment">/* 水平居中 */</span></span></li><li><span class="language-css">         <span class="hljs-attribute">line-height</span>: <span class="hljs-number">200px</span>;       <span class="hljs-comment">/* 垂直居中（值等于容器高度） */</span></span></li><li><span class="language-css">        }</span></li><li><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blue"</span> &gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"green"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blue"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"green"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blue"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"green"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"blue"</span>&gt;</span>webArea<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></li><li><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1429px;">     <h2 id="getlasthittest18" device-type="phone,2in1,tablet,wearable,tv">getLastHitTest<sup>18+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getlasthittest18" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getLastHitTest(): HitTestValue</p>     <p>获取上一次被点击区域的元素信息。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.133.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.133.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#hittestvalue">HitTestValue</a></td>         <td class="cellrowborder" width="50%">点击区域的元素信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.133.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.133.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getLastHitTest'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> hitValue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getLastHitTest</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"hitType: "</span> + hitValue.<span class="hljs-property">type</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"extra: "</span> + hitValue.<span class="hljs-property">extra</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1282px;">     <h2 id="getattachstate20" device-type="phone,2in1,tablet,wearable,tv">getAttachState<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getattachstate20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getAttachState(): ControllerAttachState</p>     <p>查询当前WebViewController是否绑定一个Web组件。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.134.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.134.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#controllerattachstate20">ControllerAttachState</a></td>         <td class="cellrowborder" width="50%">WebViewController与Web组件的绑定状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>点击Button可以获取当前WebViewController的绑定状态并输出日志。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getAttachState'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getAttachState</span>() == webview.<span class="hljs-property">ControllerAttachState</span>.<span class="hljs-property">ATTACHED</span>) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Controller is attached.'</span>);</li><li>            } <span class="hljs-keyword">else</span> {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Controller is unattached.'</span>);</li><li>            }</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 690px;">     <h2 id="oncontrollerattachstatechange20" device-type="phone,2in1,tablet,wearable,tv">on('controllerAttachStateChange')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="oncontrollerattachstatechange20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'controllerAttachStateChange', callback: Callback&lt;ControllerAttachState&gt;): void</p>     <p>注册WebViewController绑定状态事件，通过Callback方式获取WebViewController绑定状态的变化通知。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.135.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.135.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.135.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.135.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示注册WebViewController绑定状态事件，固定为"controllerAttachStateChange"。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#controllerattachstate20">ControllerAttachState</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WebViewController绑定状态改变时的回调函数。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>请参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#offcontrollerattachstatechange20">off</a>。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2075px;">     <h2 id="offcontrollerattachstatechange20" device-type="phone,2in1,tablet,wearable,tv">off('controllerAttachStateChange')<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="offcontrollerattachstatechange20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'controllerAttachStateChange', callback?: Callback&lt;ControllerAttachState&gt;): void</p>     <p>取消WebViewController绑定状态事件的注册，取消后将不再接收Callback通知。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.136.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.136.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.136.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.136.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示注册WebViewController绑定状态事件，固定为"controllerAttachStateChange"。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#controllerattachstate20">ControllerAttachState</a>&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">WebViewController绑定状态发生改变时的回调函数，默认情况下不填写回调函数。如果填写了Callback，将仅取消注册该特定的回调。如果不填写Callback，将取消注册所有回调。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>on可以注册多个回调，当绑定状态改变后会获取当前的绑定状态并触发这些回调。off可以取消注册某个回调，也可以取消注册所有回调。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-comment">// 构建回调函数</span></li><li>  handleControllerAttachStateChange = <span class="hljs-function">(<span class="hljs-params">state: webview.ControllerAttachState</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (state == webview.<span class="hljs-property">ControllerAttachState</span>.<span class="hljs-property">UNATTACHED</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'handleControllerAttachStateChange: Controller is unattached.'</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'handleControllerAttachStateChange: Controller is attached.'</span>);</li><li>    }</li><li>  };</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'controllerAttachStateChange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleControllerAttachStateChange</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-comment">// 注册回调以接收controller绑定状态更改通知</span></li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'controllerAttachStateChange'</span>, <span class="hljs-function">(<span class="hljs-params">state: webview.ControllerAttachState</span>) =&gt;</span> {</li><li>        <span class="hljs-keyword">if</span> (state == webview.<span class="hljs-property">ControllerAttachState</span>.<span class="hljs-property">UNATTACHED</span>) {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Controller is unattached.'</span>);</li><li>        } <span class="hljs-keyword">else</span> {</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Controller is attached.'</span>);</li><li>        }</li><li>      })</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-comment">// 取消指定注册回调</span></li><li>    <span class="hljs-comment">// this.controller.off('controllerAttachStateChange', this.handleControllerAttachStateChange);</span></li><li>    <span class="hljs-comment">// 取消所有注册回调</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'controllerAttachStateChange'</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1625px;">     <h2 id="waitforattached20" device-type="phone,2in1,tablet,wearable,tv">waitForAttached<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="waitforattached20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>waitForAttached(timeout: number):Promise&lt;ControllerAttachState&gt;</p>     <p>异步等待WebViewController与Web组件绑定完成，绑定完成或超时触发回调，通过Promise方式返回当前<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#controllerattachstate20">ControllerAttachState</a>状态。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.137.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.137.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.137.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.137.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">timeout</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>异步等待时长。</p>          <p>取值范围: [0, 65535]</p>          <p>单位: ms</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.137.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.137.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#controllerattachstate20">ControllerAttachState</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise实例，返回当前<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#controllerattachstate20">ControllerAttachState</a>状态。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>在初始化阶段设置WebViewController等待绑定完成，超时时间为1000ms。若绑定完成或者超时则会触发回调。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">waitForAttached</span>(<span class="hljs-number">1000</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">state: webview.ControllerAttachState</span>) =&gt;</span> {</li><li>      <span class="hljs-keyword">if</span> (state == webview.<span class="hljs-property">ControllerAttachState</span>.<span class="hljs-property">ATTACHED</span>) {</li><li>        <span class="hljs-comment">//绑定完成或者超时都会触发回调</span></li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Controller is attached.'</span>);</li><li>      }</li><li>    })</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">const</span> state = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">waitForAttached</span>(<span class="hljs-number">1000</span>);</li><li>      <span class="hljs-keyword">if</span> (state == webview.<span class="hljs-property">ControllerAttachState</span>.<span class="hljs-property">ATTACHED</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Controller is attached.'</span>);</li><li>      }</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1894px;">     <h2 id="setwebdebuggingaccess20" device-type="phone,2in1,tablet,wearable,tv">setWebDebuggingAccess<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setwebdebuggingaccess20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static setWebDebuggingAccess(webDebuggingAccess: boolean, port: number): void</p>     <p>设置是否启用无线网页调试功能，默认不开启。</p>     <ul>      <li>当没有指定端口port时，该接口等同于<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#setwebdebuggingaccess">setWebDebuggingAccess</a>接口，ArkWeb会启动一个本地domain socket监听。</li>      <li>当指定了端口port时，ArkWeb会启动一个tcp socket监听。这时可以无线调试网页。详情请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-debugging-with-devtools#无线调试" target="_blank">无线调试</a>。</li>     </ul>     <p>由于小于1024的端口号作为熟知或系统端口，在操作系统上需要特权才能开启，因此port的取值必须大于1024，否则该接口会抛出异常。</p>     <p>安全提示：启用网页调试功能可以让用户检查修改Web页面内部状态，存在安全隐患，不建议在应用正式发布版本中启用。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.138.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.138.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.138.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.138.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">webDebuggingAccess</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>设置是否启用网页调试功能。</p>          <p>true表示开启网页调试功能，false表示关闭网页调试功能。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">port</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>指定devtools服务的tcp端口号。如果没有指定port，那么该接口等同于<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#setwebdebuggingaccess">setWebDebuggingAccess</a>接口。</p>          <p>取值范围: (1024, 65535]</p>          <p>如果port的值在区间[0, 1024]内，则会抛出BusinessError异常，错误码为17100023。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.138.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.138.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100023</td>         <td class="cellrowborder" width="50%">The port number is not within the allowed range.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setWebDebuggingAccess</span>(<span class="hljs-literal">true</span>, <span class="hljs-number">8888</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1213px;">     <h2 id="getprogress20" device-type="phone,2in1,tablet,wearable,tv">getProgress<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getprogress20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getProgress(): number</p>     <p>获取当前网页加载进度。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.139.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.139.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">当前页面加载进度，取值范围[0, 100]</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.139.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.139.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onPageBegin</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> curProgress = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getProgress</span>();</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"current page loading progress is :"</span> + curProgress);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1497px;">     <h2 id="gethittestdeprecated" device-type="phone,2in1,tablet,wearable,tv">getHitTest<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gethittestdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getHitTest(): WebHitTestType</p>     <p>获取当前被点击区域的元素类型。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version11开始支持，从API version 18开始废弃。建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getlasthittest18">getLastHitTest</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.140.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.140.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#webhittesttype">WebHitTestType</a></td>         <td class="cellrowborder" width="50%">被点击区域的元素类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.140.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.140.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getHitTest'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> hitTestType = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getHitTest</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"hitTestType: "</span> + hitTestType);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1521px;">     <h2 id="gethittestvaluedeprecated" device-type="phone,2in1,tablet,wearable,tv">getHitTestValue<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="gethittestvaluedeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getHitTestValue(): HitTestValue</p>     <p>获取当前被点击区域的元素信息。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version11开始支持，从API version 18开始废弃。建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getlasthittest18">getLastHitTest</a>替代。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.141.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.141.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#hittestvalue">HitTestValue</a></td>         <td class="cellrowborder" width="50%">点击区域的元素信息。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.141.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.141.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getHitTestValue'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> hitValue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getHitTestValue</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"hitType: "</span> + hitValue.<span class="hljs-property">type</span>);</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"extra: "</span> + hitValue.<span class="hljs-property">extra</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2036px;">     <h2 id="avoidvisibleviewportbottom20" device-type="phone,2in1,tablet,wearable,tv">avoidVisibleViewportBottom<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="avoidvisibleviewportbottom20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>avoidVisibleViewportBottom(avoidHeight: number): void</p>     <p>设置Web网页可视视口底部避让高度。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>avoidHeight有效值区间为[0, Web组件高度]，超出有效值区间时取边界值。</li>        <li>该接口高度设置为非0时，Web组件位置和尺寸不变，可视视口向上避让avoidHeight，表现为Web网页内容抬升avoidHeight。该接口一般用于应用自定义网页底部避让区，不建议和点击web网页可编辑区拉起键盘的场景同时使用。同时使用时，键盘弹起避让模式将使用OVERLAYS_CONTENT。</li>        <li>该接口高度设置为0时，Web网页内容可恢复，键盘弹起避让模式将使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-attributes#keyboardavoidmode12">keyboardAvoidMode()</a>声明的模式。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.142.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.142.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.142.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.142.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">avoidHeight</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>设置Web网页可视视口底部避让高度。</p>          <p>默认值：0</p>          <p>单位：vp</p>          <p>合法取值范围：0~Web组件高度</p>          <p>非法值设置行为：小于0取值为0，大于Web组件高度取值为Web组件高度。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>、<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.142.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.142.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-attr">avoidHeight</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">100</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'avoid'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">avoidVisibleViewportBottom</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">avoidHeight</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'reset'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">avoidVisibleViewportBottom</span>(<span class="hljs-number">0</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1361px;">     <h2 id="seterrorpageenabled20" device-type="phone,2in1,tablet,wearable,tv">setErrorPageEnabled<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="seterrorpageenabled20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setErrorPageEnabled(enable: boolean): void</p>     <p>设置是否启用默认错误页。</p>     <p>在当前接口设置为true时如果页面加载发生错误将触发<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-basic-components-web-events#onoverrideerrorpage20">onOverrideErrorPage</a>回调，可在该回调接口中设置自定义的错误展示页面。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.143.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.143.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.143.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.143.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enable</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">表示是否启用默认错误页。true表示启用，false表示不启用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.143.10.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.143.10.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>       .<span class="hljs-title function_">onControllerAttached</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setErrorPageEnabled</span>(<span class="hljs-literal">true</span>);</li><li>            <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getErrorPageEnabled</span>()) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setErrorPageEnabled</span>(<span class="hljs-literal">true</span>);</li><li>            }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1285px;">     <h2 id="geterrorpageenabled20" device-type="phone,2in1,tablet,wearable,tv">getErrorPageEnabled<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="geterrorpageenabled20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getErrorPageEnabled(): boolean</p>     <p>查询是否启用了默认错误页功能。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.144.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.144.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">          <p>返回是否启用默认错误页功能。</p>          <p>true：已启用；false：未启用。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.144.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.144.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. The WebviewController must be associated with a Web component.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>       .<span class="hljs-title function_">onControllerAttached</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setErrorPageEnabled</span>(<span class="hljs-literal">true</span>);</li><li>            <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getErrorPageEnabled</span>()) {</li><li>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setErrorPageEnabled</span>(<span class="hljs-literal">true</span>);</li><li>            }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1094px;">     <h2 id="enableprivatenetworkaccess20" device-type="phone,2in1,tablet,wearable,tv">enablePrivateNetworkAccess<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="enableprivatenetworkaccess20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static enablePrivateNetworkAccess(enable: boolean): void</p>     <p>设置私有网络访问检查功能（Private Network Access）的启用状态。</p>     <p>启用后，Web组件将对私有网络请求（如访问本地服务器或内网资源）进行CORS预检。它会先发送OPTIONS预检请求，获取目标服务器的显式授权，然后传输实际数据。禁用此功能将跳过安全检查。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.145.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.145.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.145.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.145.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enable</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">是否启用私有网络访问检查功能开关。true表示启用，false表示禁用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onControllerAttached</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 设置为false时ArkWeb将不再检查私有网络请求是否合法</span></li><li>          webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">enablePrivateNetworkAccess</span>(<span class="hljs-literal">false</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1258px;">     <h2 id="isprivatenetworkaccessenabled20" device-type="phone,2in1,tablet,wearable,tv">isPrivateNetworkAccessEnabled<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isprivatenetworkaccessenabled20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static isPrivateNetworkAccessEnabled(): boolean</p>     <p>获取Web组件是否启用了私有网络访问检查功能。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.146.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.146.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回Web组件是否启用了私有网络访问检查功能。true表示已启用；false表示已禁用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'isPrivateNetworkAccessEnabled'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">isEnabled</span>: <span class="hljs-built_in">boolean</span> = webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">isPrivateNetworkAccessEnabled</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"isPrivateNetworkAccessEnabled:"</span>, isEnabled);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>        .<span class="hljs-title function_">onControllerAttached</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-comment">// 设置为false时ArkWeb将不再检查私有网络请求是否合法</span></li><li>          webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">enablePrivateNetworkAccess</span>(<span class="hljs-literal">false</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2288px;">     <h2 id="getblanklessinfowithkey20" device-type="phone,2in1,tablet,wearable,tv">getBlanklessInfoWithKey<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getblanklessinfowithkey20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getBlanklessInfoWithKey(key: string): BlanklessInfo</p>     <p>获取页面首屏加载预测信息（详细说明见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#blanklessinfo20">BlanklessInfo</a>），并开始本次加载过渡帧生成，应用根据此信息确定是否需要启用无白屏加载。必须与<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#setblanklessloadingwithkey20">setBlanklessLoadingWithKey</a>接口配套使用，并且必须在触发加载页面的接口之前或在onLoadIntercept中调用。需在WebViewController与Web组件绑定后才能使用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>持久缓存容量：默认大小为30MB（约30页），可以通过接口<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#setblanklessloadingcachecapacity20">setBlanklessLoadingCacheCapacity</a>设置缓存容量，具体见该接口说明。超过容量时根据LRU（Least Recently Used，淘汰不常用缓存的策略）机制更新缓存。自动清理超过7天的持久缓存数据，缓存清除后第三次加载页面开始有优化效果。</li>        <li>如果发现快照相似度（即<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#blanklessinfo20">BlanklessInfo</a>中的similarity）极低，请确认key值是否传递正确。</li>        <li>调用本接口后，将启用页面加载快照检测及生成过渡帧计算，会产生一定的资源开销。</li>        <li>启用无白屏加载的页面会带来一定的资源开销，开销的大小与Web组件的分辨率相关。假设分辨率的宽度和高度分别为：w, h。页面在打开阶段会增加峰值内存，增加约12wh B，页面打开后内存回收，不影响稳态内存。增加固态应用缓存的大小，每个页面增加的缓存约w*h/10 B，缓存位于应用缓存的位置。</li>        <li>请在module.json5中添加权限: ohos.permission.INTERNET和ohos.permission.GET_NETWORK_INFO，具体权限的添加方法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions#在配置文件中声明权限" target="_blank">在配置文件中声明权限</a>。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>设备行为差异：</strong> 该接口在Phone中可正常调用，在其他设备类型中返回801错误码。</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.147.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.147.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.147.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.147.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>唯一标识本页面的key值。</p>          <p>合法取值范围：非空，长度不超过2048个字符。</p>          <p>设置非法值时不生效。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.147.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.147.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-i#blanklessinfo20">BlanklessInfo</a></td>         <td class="cellrowborder" width="50%">页面首屏加载预测信息，主要包括首屏相似度预测值，首屏加载耗时预测值，应用需根据此信息来决策是否启用无白屏加载插帧。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.147.13.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.147.13.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'https://www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>       .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>       .<span class="hljs-title function_">onLoadIntercept</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-comment">// 当相似度超过50%，加载耗时小于1000ms时启用插帧，否则不启用。</span></li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-keyword">let</span> info = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getBlanklessInfoWithKey</span>(<span class="hljs-string">'https://www.example.com/page1'</span>);</li><li>              <span class="hljs-keyword">if</span> (info.<span class="hljs-property">errCode</span> == webview.<span class="hljs-property">WebBlanklessErrorCode</span>.<span class="hljs-property">SUCCESS</span>) {</li><li>                <span class="hljs-keyword">if</span> (info.<span class="hljs-property">similarity</span> &gt;= <span class="hljs-number">0.5</span> &amp;&amp; info.<span class="hljs-property">loadingTime</span> &lt; <span class="hljs-number">1000</span>) {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setBlanklessLoadingWithKey</span>(<span class="hljs-string">'http://www.example.com/page1'</span>, <span class="hljs-literal">true</span>);</li><li>                } <span class="hljs-keyword">else</span> {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setBlanklessLoadingWithKey</span>(<span class="hljs-string">'http://www.example.com/page1'</span>, <span class="hljs-literal">false</span>);</li><li>                }</li><li>              } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getBlankless info err'</span>);</li><li>              }</li><li>            } <span class="hljs-keyword">catch</span> (error) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>            }</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 2301px;">     <h2 id="setblanklessloadingwithkey20" device-type="phone,2in1,tablet,wearable,tv">setBlanklessLoadingWithKey<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setblanklessloadingwithkey20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setBlanklessLoadingWithKey(key: string, is_start: boolean): WebBlanklessErrorCode</p>     <p>设置无白屏加载是否启用，本接口必须与<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getblanklessinfowithkey20">getBlanklessInfoWithKey</a>接口配套使用。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>需在触发页面加载的接口之后调用，其他约束同<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getblanklessinfowithkey20">getBlanklessInfoWithKey</a>。</li>        <li>页面加载必须在调用本接口的组件中进行。</li>        <li>当相似度较低时，系统将判定为跳变过大，启用插帧会失败。</li>        <li>请在module.json5中添加权限: ohos.permission.INTERNET和ohos.permission.GET_NETWORK_INFO，具体权限的添加方法请参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/declare-permissions#在配置文件中声明权限" target="_blank">在配置文件中声明权限</a>。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.148.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.148.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.148.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.148.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">key</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>唯一标识本页面的key值。必须与getBlanklessInfoWithKey接口的key值相同。</p>          <p>合法取值范围：非空，长度不超过2048个字符。</p>          <p>非法值设置行为：返回错误码WebBlanklessErrorCode，方案不生效。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">is_start</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>是否启用开始插帧。true：启用，false：不启用。</p>          <p>传入undefined或null时为false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.148.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.148.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#webblanklesserrorcode20">WebBlanklessErrorCode</a></td>         <td class="cellrowborder" width="50%">返回接口调用是否成功，具体见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#webblanklesserrorcode20">WebBlanklessErrorCode</a>定义。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.148.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.148.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'https://www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>       .<span class="hljs-title function_">javaScriptAccess</span>(<span class="hljs-literal">true</span>)</li><li>       .<span class="hljs-title function_">onLoadIntercept</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-comment">// 当相似度超过50%，加载耗时小于1000ms时启用插帧，否则不启用。</span></li><li>            <span class="hljs-keyword">try</span> {</li><li>              <span class="hljs-keyword">let</span> info = <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">getBlanklessInfoWithKey</span>(<span class="hljs-string">'https://www.example.com/page1'</span>);</li><li>              <span class="hljs-keyword">if</span> (info.<span class="hljs-property">errCode</span> == webview.<span class="hljs-property">WebBlanklessErrorCode</span>.<span class="hljs-property">SUCCESS</span>) {</li><li>                <span class="hljs-keyword">if</span> (info.<span class="hljs-property">similarity</span> &gt;= <span class="hljs-number">0.5</span> &amp;&amp; info.<span class="hljs-property">loadingTime</span> &lt; <span class="hljs-number">1000</span>) {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setBlanklessLoadingWithKey</span>(<span class="hljs-string">'http://www.example.com/page1'</span>, <span class="hljs-literal">true</span>);</li><li>                } <span class="hljs-keyword">else</span> {</li><li>                  <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>.<span class="hljs-title function_">setBlanklessLoadingWithKey</span>(<span class="hljs-string">'http://www.example.com/page1'</span>, <span class="hljs-literal">false</span>);</li><li>                }</li><li>              } <span class="hljs-keyword">else</span> {</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'getBlankless info err'</span>);</li><li>              }</li><li>            } <span class="hljs-keyword">catch</span> (error) {</li><li>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>            }</li><li>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1845px;">     <h2 id="clearblanklessloadingcache20" device-type="phone,2in1,tablet,wearable,tv">clearBlanklessLoadingCache<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="clearblanklessloadingcache20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static clearBlanklessLoadingCache(keys?: Array&lt;string&gt;): void</p>     <p>清除指定key值页面无白屏优化缓存，本接口只清除缓存。</p>     <p>在小程序或Web应用场景中，当页面加载时内容变化显著，可能会出现一次明显的跳变。若对此跳变有所顾虑，可使用该接口清除页面缓存。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>清除之后的页面，需在第三次加载页面时才会产生优化效果。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.149.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.149.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.149.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.149.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">keys</td>         <td class="cellrowborder" width="25%">Array&lt;string&gt;</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>清除Blankless优化方案页面的key值列表，key值为<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getblanklessinfowithkey20">getBlanklessInfoWithKey</a>中指定过的。</p>          <p>默认值：所有Blankless优化方案缓存的页面key列表。</p>          <p>合法取值范围：长度不超过2048，key列表长度&lt;=100。key和加载页面时输入给ArkWeb的相同。</p>          <p>非法值设置行为：key长度超过2048时该key不生效；长度超过100时，取前100个；当为空时，使用默认值。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.149.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.149.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate"</span>);</li><li>    <span class="hljs-comment">// 假设应用的Web页面在2025/06/10会进行大幅改动，例如商品促销活动等，该提案清除白屏插帧优化缓存</span></li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">initializeWebEngine</span>();</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">pageUpdateTime</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">UTC</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">pageUpdateTime1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">UTC</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">5</span>, <span class="hljs-number">11</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">pageUpdateTimeNow</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();</li><li>    <span class="hljs-keyword">if</span> (pageUpdateTimeNow &gt; pageUpdateTime &amp;&amp; pageUpdateTime &lt; pageUpdateTime1) {</li><li>      <span class="hljs-comment">// 清除指定页面的白屏插帧方案缓存</span></li><li>      <span class="hljs-keyword">try</span> {</li><li>        webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">clearBlanklessLoadingCache</span>([<span class="hljs-string">"https://www.example.com"</span>, <span class="hljs-string">"https://www.example1.com"</span>]);</li><li>      } <span class="hljs-keyword">catch</span> (error) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>      }</li><li>    }</li><li>    <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">"abilityWant"</span>, want);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate done"</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1628px;">     <h2 id="setblanklessloadingcachecapacity20" device-type="phone,2in1,tablet,wearable,tv">setBlanklessLoadingCacheCapacity<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setblanklessloadingcachecapacity20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static setBlanklessLoadingCacheCapacity(capacity: number): number</p>     <p>设置无白屏加载方案的持久化缓存容量，返回实际生效值。当接口没有显式调用时，默认缓存容量为30MB。当实际缓存超过容量时，将采用淘汰不常用的过渡帧的方式清理。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.150.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.150.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.150.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.150.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">capacity</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>设置持久化缓存设置，单位MB，最大设置不超过100MB。</p>          <p>合法取值范围：0~100，当设置为0时，无缓存空间，则功能全局不开启。</p>          <p>非法值设置行为：小于0时生效值为0，大于100时生效值为100。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.150.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.150.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">number</td>         <td class="cellrowborder" width="50%">          <p>返回实际生效的容量值，范围0~100。</p>          <p>小于0时生效值为0，大于100时生效值为100。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.150.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.150.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">801</td>         <td class="cellrowborder" width="50%">Capability not supported.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate"</span>);</li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">initializeWebEngine</span>();</li><li>    <span class="hljs-comment">// 设置缓存容量为10MB</span></li><li>    <span class="hljs-keyword">try</span> {</li><li>      webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setBlanklessLoadingCacheCapacity</span>(<span class="hljs-number">10</span>);</li><li>    } <span class="hljs-keyword">catch</span> (error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>    }</li><li>    <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">"abilityWant"</span>, want);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate done"</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1162px;">     <h2 id="setwebdestroymode20" device-type="phone,2in1,tablet,wearable,tv">setWebDestroyMode<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setwebdestroymode20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setWebDestroyMode(mode: WebDestroyMode): void</p>     <p>设置Web组件的销毁模式。当Web组件销毁时，销毁模式会影响Web内核资源释放的时机，例如JavaScript运行上下文、渲染上下文等。默认值：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#webdestroymode20">WebDestroyMode.NORMAL_MODE</a>（普通模式），由系统决定销毁时机。应用可设置<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#webdestroymode20">WebDestroyMode.FAST_MODE</a>（快速模式），以立即销毁资源，从而提升特定场景的性能。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#webdestroymode20">WebDestroyMode.FAST_MODE</a>（快速模式）会改变Web组件销毁时机，应用需关注依赖Web组件销毁时机的错误实现，例如：Web组件销毁后仍调用WebviewController的未定义行为，与<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#webdestroymode20">WebDestroyMode.NORMAL_MODE</a>（普通模式）相比，销毁时机提前，有更高的几率触发未关联绑定的异常（17100001），建议应用捕捉异常，或者通过<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#getattachstate20">getAttachState</a>方法查询是否绑定状态，来避免稳定性问题。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.151.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.151.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.151.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.151.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">mode</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#webdestroymode20">WebDestroyMode</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>设置Web组件的销毁模式。</p>          <p>默认值：WebDestroyMode.NORMAL_MODE</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate"</span>);</li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">initializeWebEngine</span>();</li><li>    <span class="hljs-comment">// 设置快速销毁模式</span></li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setWebDestroyMode</span>(webview.<span class="hljs-property">WebDestroyMode</span>.<span class="hljs-property">FAST_MODE</span>);</li><li>    <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">"abilityWant"</span>, want);</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate done"</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1202px;">     <h2 id="setactivewebengineversion20" device-type="phone,2in1,tablet,wearable,tv">setActiveWebEngineVersion<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setactivewebengineversion20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static setActiveWebEngineVersion(engineVersion: ArkWebEngineVersion): void</p>     <p>设置ArkWeb内核版本。若系统不支持指定版本，则设置无效。该接口为全局静态API，须在调用initializeWebEngine前执行，若已加载任何Web组件，则该设置无效。</p>     <p><strong>遗留内核适配：</strong></p>     <p>在HarmonyOS 6.0及以后，使用遗留内核时，部分ArkWeb接口不会生效，参考<a href="https://gitcode.com/openharmony-tpc/chromium_src/blob/132_trunk/web/ReleaseNote/CompatibleWithLegacyWebEngine.md" target="_blank">M114内核在HarmonyOS6.0系统上的适配指导</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <ul>        <li>setActiveWebEngineVersion不支持在异步线程中调用。</li>        <li>setActiveWebEngineVersion全局生效，在整个APP生命周期中调用一次即可，不需要重复调用。</li>       </ul>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.152.9.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.152.9.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.152.9.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.152.9.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">engineVersion</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#arkwebengineversion20">ArkWebEngineVersion</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">ArkWeb内核版本。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>本示例以EntryAbility为例，实现了在Ability创建阶段设置ArkWeb内核版本的功能。</p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate"</span>)</li><li>    webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setActiveWebEngineVersion</span>(webview.<span class="hljs-property">ArkWebEngineVersion</span>.<span class="hljs-property">M114</span>)</li><li>    <span class="hljs-keyword">if</span> (webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">getActiveWebEngineVersion</span>() == webview.<span class="hljs-property">ArkWebEngineVersion</span>.<span class="hljs-property">M114</span>) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"Active Web Engine Version set to M114"</span>)</li><li>    }</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"EntryAbility onCreate done"</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 569px;">     <h2 id="getactivewebengineversion20" device-type="phone,2in1,tablet,wearable,tv">getActiveWebEngineVersion<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getactivewebengineversion20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static getActiveWebEngineVersion(): ArkWebEngineVersion</p>     <p>获取当前ArkWeb内核版本。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.153.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.153.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#arkwebengineversion20">ArkWebEngineVersion</a></td>         <td class="cellrowborder" width="50%">返回由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#arkwebengineversion20">ArkWebEngineVersion</a>所定义的当前使用的ArkWeb内核版本。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <p>请参考<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#setactivewebengineversion20">setActiveWebEngineVersion</a>。</p>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 926px;">     <h2 id="setautopreconnect21" device-type="phone,2in1,tablet,wearable,tv">setAutoPreconnect<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setautopreconnect21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static setAutoPreconnect(enabled: boolean): void</p>     <p>设置Web内核的自动预连接状态。若未设置，默认启用自动预连接。</p>     <p>需要在<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#initializewebengine">initializeWebEngine()</a>初始化内核或者创建Web组件之前调用。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.154.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.154.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.154.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.154.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enabled</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">是否启用Web内核自动预连接的开关。true表示启用，false表示禁用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>    <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>        webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setAutoPreconnect</span>(<span class="hljs-literal">false</span>);</li><li>        webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">initializeWebEngine</span>();</li><li>        <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">"abilityWant"</span>, want);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1138px;">     <h2 id="isautopreconnectenabled21" device-type="phone,2in1,tablet,wearable,tv">isAutoPreconnectEnabled<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isautopreconnectenabled21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static isAutoPreconnectEnabled(): boolean</p>     <p>查询Web内核的自动预连接状态。</p>     <p>如果没有使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-webview-webviewcontroller#setautopreconnect21">setAutoPreconnect</a>设置Web内核自动预连接的状态，则默认启用自动预连接，返回true。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.155.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.155.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">返回Web内核是否启用了自动预连接。true表示已启用；false表示已禁用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'isAutoPreconnectEnabled'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            <span class="hljs-keyword">let</span> <span class="hljs-attr">isEnabled</span>: <span class="hljs-built_in">boolean</span> = webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">isAutoPreconnectEnabled</span>();</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"isAutoPreconnectEnabled:"</span>, isEnabled);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1066px;">     <h2 id="getsiteisolationmode21" device-type="phone,2in1,tablet,wearable,tv">getSiteIsolationMode<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="getsiteisolationmode21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static getSiteIsolationMode(): SiteIsolationMode</p>     <p>查询当前生效的站点隔离模式。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.156.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.156.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#siteisolationmode21">SiteIsolationMode</a></td>         <td class="cellrowborder" width="50%">          <p>站点隔离模式类型。</p>          <p>getSiteIsolationMode()查询当前生效的站点隔离模式。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'getSiteIsolationMode'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">let</span> mode = webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">getSiteIsolationMode</span>();</li><li>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"getSiteIsolationMode: "</span> + mode);</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 1813px;">     <h2 id="setsiteisolationmode21" device-type="phone,2in1,tablet,wearable,tv">setSiteIsolationMode<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsiteisolationmode21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>setSiteIsolationMode(mode: SiteIsolationMode): void</p>     <p>设置站点隔离模式。站点隔离机制将不同源的网站隔离在不同的Render进程中，减少跨域攻击面。例如：PC等设备上，在未启用站点隔离模式时，原有进程模型是每一个Tab对应一个Render进程，开启站点隔离后，一个Tab下不同源的Iframe可在独立的Render进程中运行。</p>     <p>对于仅加载可信网页的第三方应用，可以关闭此功能，以提升性能并减少内存占用，同时减少跨域访问的拦截。默认值根据不同的设备而定，PC/Table采用严格站点隔离<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#siteisolationmode21">SiteIsolationMode.STRICT</a>，Phone默认部分站点隔离<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#siteisolationmode21">SiteIsolationMode.PARTIAL</a>。<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-secure-shield-mode" target="_blank">坚盾守护模式</a>下采用严格站点隔离。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>不能在单子进程模式下设置严格站点隔离。</p>       <p>接口只能在初始化时调用一次，不支持反复修改。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.157.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.157.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.157.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.157.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">mode</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-webview-e#siteisolationmode21">SiteIsolationMode</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>设置站点隔离模式。</p>          <p>默认值取决于设备类型和设备模式：PC/Tablet默认严格站点隔离，Phone默认部分站点隔离；坚盾守护模式默认严格站点隔离。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-webview">Webview错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.157.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.157.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">17100001</td>         <td class="cellrowborder" width="50%">Init error. Possible causes: 1. Site Isolation mode is already set by the developer. 2. Site Isolation mode cannot be strict in single-render-process mode. 3. Site Isolation mode cannot be changed while Secure Shield mode is active.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// xxx.ets</span></li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">WebComponent</span> {</li><li>  <span class="hljs-attr">controller</span>: webview.<span class="hljs-property">WebviewController</span> = <span class="hljs-keyword">new</span> webview.<span class="hljs-title class_">WebviewController</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'setSiteIsolationMode'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-keyword">try</span> {</li><li>            webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setSiteIsolationMode</span>(webview.<span class="hljs-property">SiteIsolationMode</span>.<span class="hljs-property">PARTIAL</span>);</li><li>          } <span class="hljs-keyword">catch</span> (error) {</li><li>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ErrorCode: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).code}</span>,  Message: <span class="hljs-subst">${(error <span class="hljs-keyword">as</span> BusinessError).message}</span>`</span>);</li><li>          }</li><li>        })</li><li>      <span class="hljs-title class_">Web</span>({ <span class="hljs-attr">src</span>: <span class="hljs-string">'www.example.com'</span>, <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span> })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection" style="contain-intrinsic-size: auto 998px;">     <h2 id="setsocketidletimeout21" device-type="phone,2in1,tablet,wearable,tv">setSocketIdleTimeout<sup>21+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="setsocketidletimeout21" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>static setSocketIdleTimeout(timeout: number): void</p>     <p>设置ArkWeb中已使用过的空闲socket的超时时间，即已使用过的socket可以处于空闲状态的最大时长。如果设置的值与已存在的空闲socket超时时间不同，则根据新的值对已存在的空闲socket进行清理。</p>     <p>未使用该接口设置空闲socket的超时时间时，ArkWeb的默认值为300s。</p>     <p><strong>系统能力：</strong> SystemCapability.Web.Webview.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.158.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.158.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.158.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.158.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">timeout</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>ArkWeb中已经使用过的空闲socket的超时时间。</p>          <p>取值范围：[30,300]，单位：s。</p>          <p>小于30时生效值为30，大于300时生效值为300。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-afw-c106="" class="highlight-div"><div _ngcontent-afw-c106="" class="highlight-div-header"><div _ngcontent-afw-c106="" class="highlight-div-header-left"><div _ngcontent-afw-c106="" class="handle-button expand-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-afw-c106="" class="highlight-div-header-right"><div _ngcontent-afw-c106="" class="handle-button ai-button"></div><div _ngcontent-afw-c106="" class="handle-button line-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-afw-c106="" class="handle-button theme-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-afw-c106="" class="handle-button copy-button"><div _ngcontent-afw-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-afw-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-comment">// EntryAbility.ets</span></li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">UIAbility</span>, <span class="hljs-title class_">Want</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { webview } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkWeb'</span>;</li><li>
</li><li><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EntryAbility</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UIAbility</span> {</li><li>    <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, launchParam: AbilityConstant.LaunchParam</span>) {</li><li>        webview.<span class="hljs-property">WebviewController</span>.<span class="hljs-title function_">setSocketIdleTimeout</span>(<span class="hljs-number">200</span>);</li><li>        <span class="hljs-title class_">AppStorage</span>.<span class="hljs-title function_">setOrCreate</span>(<span class="hljs-string">"abilityWant"</span>, want);</li><li>    }</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>