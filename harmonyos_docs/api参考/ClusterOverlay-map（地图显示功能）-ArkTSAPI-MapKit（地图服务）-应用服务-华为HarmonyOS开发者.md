<h1 _ngcontent-gdy-c119="" class="doc-title ng-star-inserted" title="ClusterOverlay"> ClusterOverlay </h1>

<div _ngcontent-gdy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><div class="tiledSection"><h2 id="section164051883419" device-type="phone,2in1,tablet,wearable">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section164051883419" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gdy-c106="" class="highlight-div"><div _ngcontent-gdy-c106="" class="highlight-div-header"><div _ngcontent-gdy-c106="" class="highlight-div-header-left"><div _ngcontent-gdy-c106="" class="handle-button expand-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gdy-c106="" class="highlight-div-header-right"><div _ngcontent-gdy-c106="" class="handle-button ai-button"></div><div _ngcontent-gdy-c106="" class="handle-button line-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gdy-c106="" class="handle-button theme-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gdy-c106="" class="handle-button copy-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gdy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { map, mapCommon } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MapKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section11570352175715" device-type="phone,2in1,tablet,wearable">ClusterOverlay<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11570352175715" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>聚合图层类。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Map.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>示例：</strong></p> <div _ngcontent-gdy-c106="" class="highlight-div"><div _ngcontent-gdy-c106="" class="highlight-div-header"><div _ngcontent-gdy-c106="" class="highlight-div-header-left"><div _ngcontent-gdy-c106="" class="handle-button expand-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gdy-c106="" class="highlight-div-header-right"><div _ngcontent-gdy-c106="" class="handle-button ai-button"></div><div _ngcontent-gdy-c106="" class="handle-button line-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gdy-c106="" class="handle-button theme-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gdy-c106="" class="handle-button copy-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gdy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">clusterItem1</span>: mapCommon.<span class="hljs-property">ClusterItem</span> = {</li><li>  <span class="hljs-attr">position</span>: {</li><li>    <span class="hljs-attr">latitude</span>: <span class="hljs-number">31.984</span>,</li><li>    <span class="hljs-attr">longitude</span>: <span class="hljs-number">118.766</span></li><li>  }</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">clusterItem2</span>: mapCommon.<span class="hljs-property">ClusterItem</span> = {</li><li>  <span class="hljs-attr">position</span>: {</li><li>    <span class="hljs-attr">latitude</span>: <span class="hljs-number">31.974</span>,</li><li>    <span class="hljs-attr">longitude</span>:<span class="hljs-number">118.75</span></li><li>  }</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">array</span>: <span class="hljs-title class_">Array</span>&lt;mapCommon.<span class="hljs-property">ClusterItem</span>&gt; = [</li><li>  clusterItem1,</li><li>  clusterItem2</li><li>];</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">clusterOverlayParams</span>: mapCommon.<span class="hljs-property">ClusterOverlayParams</span> = { <span class="hljs-attr">distance</span>: <span class="hljs-number">40</span>, <span class="hljs-attr">clusterItems</span>: array };</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">clusterOverlay</span>: map.<span class="hljs-property">ClusterOverlay</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">mapController</span>.<span class="hljs-title function_">addClusterOverlay</span>(clusterOverlayParams);</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section1871413421510" device-type="phone,2in1,tablet,wearable" class="firsth2">on('clusterClick')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1871413421510" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>on(type: 'clusterClick', callback: Callback&lt;Array&lt;mapCommon.ClusterItem&gt;&gt;): void</p> <p>监听cluster的点击事件。使用callback异步回调。</p> <p>建议使用<a href="/consumer/cn/doc/harmonyos-references/map-map-clusteroverlay#section8306133712135">ClusterOverlay.on(type: 'click')</a>。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Map.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.3.10.1.5.1.1" width="10.530000000000001%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.10.1.5.1.2" width="45.76%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.10.1.5.1.3" width="6.8500000000000005%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.3.10.1.5.1.4" width="36.86%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.530000000000001%"><p>type</p> </td> <td class="cellrowborder" width="45.76%"><p>string</p> </td> <td class="cellrowborder" width="6.8500000000000005%"><p>是</p> </td> <td class="cellrowborder" width="36.86%"><p>'clusterClick'：聚合图层的聚合点点击监听事件。</p> </td> </tr> <tr><td class="cellrowborder" width="10.530000000000001%"><p>callback</p> </td> <td class="cellrowborder" width="45.76%"><p>Callback&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-common#section9436522104316">mapCommon.ClusterItem</a>&gt;&gt;</p> </td> <td class="cellrowborder" width="6.8500000000000005%"><p>是</p> </td> <td class="cellrowborder" width="36.86%"><p>回调函数，返回Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-common#section9436522104316">mapCommon.ClusterItem</a>&gt;。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gdy-c106="" class="highlight-div"><div _ngcontent-gdy-c106="" class="highlight-div-header"><div _ngcontent-gdy-c106="" class="highlight-div-header-left"><div _ngcontent-gdy-c106="" class="handle-button expand-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gdy-c106="" class="highlight-div-header-right"><div _ngcontent-gdy-c106="" class="handle-button ai-button"></div><div _ngcontent-gdy-c106="" class="handle-button line-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gdy-c106="" class="handle-button theme-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gdy-c106="" class="handle-button copy-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gdy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>clusterOverlay.<span class="hljs-title function_">on</span>(<span class="hljs-string">"clusterClick"</span>, <span class="hljs-function">(<span class="hljs-params">clusterItems</span>) =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`callback: <span class="hljs-subst">${clusterItems.length}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section9717124181518" device-type="phone,2in1,tablet,wearable">off('clusterClick')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section9717124181518" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>off(type: 'clusterClick', callback?: Callback&lt;void&gt;): void</p> <p>取消监听cluster的点击事件。使用callback异步回调。</p> <p>建议使用<a href="/consumer/cn/doc/harmonyos-references/map-map-clusteroverlay#section13314133751318">ClusterOverlay.off(type: 'click')</a>。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Map.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.1" width="12.950000000000001%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.2" width="26.889999999999997%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.3" width="7.4399999999999995%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.4.10.1.5.1.4" width="52.72%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="12.950000000000001%"><p>type</p> </td> <td class="cellrowborder" width="26.889999999999997%"><p>string</p> </td> <td class="cellrowborder" width="7.4399999999999995%"><p>是</p> </td> <td class="cellrowborder" width="52.72%"><p>'clusterClick'：聚合图层的聚合点点击监听事件。</p> </td> </tr> <tr><td class="cellrowborder" width="12.950000000000001%"><p>callback</p> </td> <td class="cellrowborder" width="26.889999999999997%"><p>Callback&lt;void&gt;</p> </td> <td class="cellrowborder" width="7.4399999999999995%"><p>否</p> </td> <td class="cellrowborder" width="52.72%"><p>回调函数。无返回结果的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gdy-c106="" class="highlight-div"><div _ngcontent-gdy-c106="" class="highlight-div-header"><div _ngcontent-gdy-c106="" class="highlight-div-header-left"><div _ngcontent-gdy-c106="" class="handle-button expand-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gdy-c106="" class="highlight-div-header-right"><div _ngcontent-gdy-c106="" class="handle-button ai-button"></div><div _ngcontent-gdy-c106="" class="handle-button line-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gdy-c106="" class="handle-button theme-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gdy-c106="" class="handle-button copy-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gdy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>clusterOverlay.<span class="hljs-title function_">off</span>(<span class="hljs-string">"clusterClick"</span>, <span class="hljs-function">() =&gt;</span> {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"callback off"</span>);</li><li>});</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section8306133712135" device-type="phone,2in1,tablet,wearable">on('click')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section8306133712135" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>on(type: 'click', callback: Callback&lt;Array&lt;mapCommon.ClusterItem&gt;&gt;): void</p> <p>监听聚合图层的聚合点点击事件。支持传递多个callback异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Map.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.9.1.5.1.1" width="10.530000000000001%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.5.1.2" width="45.76%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.5.1.3" width="6.8500000000000005%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.9.1.5.1.4" width="36.86%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.530000000000001%"><p>type</p> </td> <td class="cellrowborder" width="45.76%"><p>string</p> </td> <td class="cellrowborder" width="6.8500000000000005%"><p>是</p> </td> <td class="cellrowborder" width="36.86%"><p>'click'：监听聚合图层的聚合点点击事件。</p> </td> </tr> <tr><td class="cellrowborder" width="10.530000000000001%"><p>callback</p> </td> <td class="cellrowborder" width="45.76%"><p>Callback&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-common#section9436522104316">mapCommon.ClusterItem</a>&gt;&gt;</p> </td> <td class="cellrowborder" width="6.8500000000000005%"><p>是</p> </td> <td class="cellrowborder" width="36.86%"><p>回调函数，返回Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-common#section9436522104316">mapCommon.ClusterItem</a>&gt;，监听聚合图层的聚合点点击事件。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gdy-c106="" class="highlight-div"><div _ngcontent-gdy-c106="" class="highlight-div-header"><div _ngcontent-gdy-c106="" class="highlight-div-header-left"><div _ngcontent-gdy-c106="" class="handle-button expand-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gdy-c106="" class="highlight-div-header-right"><div _ngcontent-gdy-c106="" class="handle-button ai-button"></div><div _ngcontent-gdy-c106="" class="handle-button line-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gdy-c106="" class="handle-button theme-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gdy-c106="" class="handle-button copy-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gdy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback1</span> = (<span class="hljs-params">clusterItem: <span class="hljs-built_in">Array</span>&lt;mapCommon.ClusterItem&gt;</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"click"</span>, <span class="hljs-string">`callback1 clusterItem length: <span class="hljs-subst">${clusterItem.length}</span>`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback2</span> = (<span class="hljs-params">clusterItem: <span class="hljs-built_in">Array</span>&lt;mapCommon.ClusterItem&gt;</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"click"</span>, <span class="hljs-string">`callback2 clusterItem length: <span class="hljs-subst">${clusterItem.length}</span>`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback3</span> = (<span class="hljs-params">clusterItem: <span class="hljs-built_in">Array</span>&lt;mapCommon.ClusterItem&gt;</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"click"</span>, <span class="hljs-string">`callback3 clusterItem length: <span class="hljs-subst">${clusterItem.length}</span>`</span>);</li><li>};</li><li>clusterOverlay.<span class="hljs-title function_">on</span>(<span class="hljs-string">"click"</span>, callback1);</li><li>clusterOverlay.<span class="hljs-title function_">on</span>(<span class="hljs-string">"click"</span>, callback2);</li><li>clusterOverlay.<span class="hljs-title function_">on</span>(<span class="hljs-string">"click"</span>, callback3);</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section13314133751318" device-type="phone,2in1,tablet,wearable">off('click')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13314133751318" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>off(type: 'click', callback?: Callback&lt;Array&lt;mapCommon.ClusterItem&gt;&gt;): void</p> <p>取消监听聚合图层的聚合点点击事件。支持传递多个callback异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Map.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.1" width="10.18%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.2" width="45.47%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.3" width="7.8100000000000005%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.4" width="36.54%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.18%"><p>type</p> </td> <td class="cellrowborder" width="45.47%"><p>string</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>是</p> </td> <td class="cellrowborder" width="36.54%"><p>'click'：监听聚合图层的聚合点点击事件。</p> </td> </tr> <tr><td class="cellrowborder" width="10.18%"><p>callback</p> </td> <td class="cellrowborder" width="45.47%"><p>Callback&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-common#section9436522104316">mapCommon.ClusterItem</a>&gt;&gt;</p> </td> <td class="cellrowborder" width="7.8100000000000005%"><p>否</p> </td> <td class="cellrowborder" width="36.54%"><p>回调函数，返回Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-common#section9436522104316">mapCommon.ClusterItem</a>&gt;，取消监听聚合图层的聚合点点击事件。</p> <ul><li>callback为空：取消所有callback回调。</li><li>callback非空：取消指定的callback回调。</li></ul> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gdy-c106="" class="highlight-div"><div _ngcontent-gdy-c106="" class="highlight-div-header"><div _ngcontent-gdy-c106="" class="highlight-div-header-left"><div _ngcontent-gdy-c106="" class="handle-button expand-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gdy-c106="" class="highlight-div-header-right"><div _ngcontent-gdy-c106="" class="handle-button ai-button"></div><div _ngcontent-gdy-c106="" class="handle-button line-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gdy-c106="" class="handle-button theme-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gdy-c106="" class="handle-button copy-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gdy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback1</span> = (<span class="hljs-params">clusterItem: <span class="hljs-built_in">Array</span>&lt;mapCommon.ClusterItem&gt;</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"click"</span>, <span class="hljs-string">`callback1 clusterItem`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback2</span> = (<span class="hljs-params">clusterItem: <span class="hljs-built_in">Array</span>&lt;mapCommon.ClusterItem&gt;</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"click"</span>, <span class="hljs-string">`callback2 clusterItem`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback3</span> = (<span class="hljs-params">clusterItem: <span class="hljs-built_in">Array</span>&lt;mapCommon.ClusterItem&gt;</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"click"</span>, <span class="hljs-string">`callback3 clusterItem`</span>);</li><li>};</li><li>clusterOverlay.<span class="hljs-title function_">on</span>(<span class="hljs-string">"click"</span>, callback1);</li><li>clusterOverlay.<span class="hljs-title function_">on</span>(<span class="hljs-string">"click"</span>, callback2);</li><li>clusterOverlay.<span class="hljs-title function_">on</span>(<span class="hljs-string">"click"</span>, callback3);</li><li>
</li><li><span class="hljs-comment">// 只取消callback1对象的事件响应，当click事件发生时，callback2和callback3会正常被调用</span></li><li>clusterOverlay.<span class="hljs-title function_">off</span>(<span class="hljs-string">'click'</span>, callback1);</li><li><span class="hljs-comment">// 取消全部click事件响应</span></li><li>clusterOverlay.<span class="hljs-title function_">off</span>(<span class="hljs-string">'click'</span>);</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section52049280917" device-type="phone,2in1,tablet,wearable">on('markerClusterClick')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section52049280917" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>on(type: 'markerClusterClick', callback: Callback&lt;MarkerClusterInfo&gt;): void</p> <p>监听聚合图层的标记点击事件。使用callback异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.3(15)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Map.Core</p> <p><strong>起始版本：</strong>5.0.3(15)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.1" width="10.530000000000001%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.2" width="32.18%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.3" width="11.39%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.9.1.5.1.4" width="45.9%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.530000000000001%"><p>type</p> </td> <td class="cellrowborder" width="32.18%"><p>string</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="45.9%"><p>'markerClusterClick'：聚合图层的标记点击监听事件。</p> </td> </tr> <tr><td class="cellrowborder" width="10.530000000000001%"><p>callback</p> </td> <td class="cellrowborder" width="32.18%"><p>Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-map-markerclusterinfo">MarkerClusterInfo</a>&gt;</p> </td> <td class="cellrowborder" width="11.39%"><p>是</p> </td> <td class="cellrowborder" width="45.9%"><p>回调函数，返回Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-map-markerclusterinfo">MarkerClusterInfo</a>&gt;，监听聚合图层的标记点击事件。</p> <p>MarkerClusterInfo包括：</p> <ul><li>marker：聚合图层的标记。</li><li>clusterItems：聚合节点数组。</li></ul> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gdy-c106="" class="highlight-div"><div _ngcontent-gdy-c106="" class="highlight-div-header"><div _ngcontent-gdy-c106="" class="highlight-div-header-left"><div _ngcontent-gdy-c106="" class="handle-button expand-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gdy-c106="" class="highlight-div-header-right"><div _ngcontent-gdy-c106="" class="handle-button ai-button"></div><div _ngcontent-gdy-c106="" class="handle-button line-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gdy-c106="" class="handle-button theme-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gdy-c106="" class="handle-button copy-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gdy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback1</span> = (<span class="hljs-params">markerClusterInfo: map.MarkerClusterInfo</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"markerClusterClick"</span>, <span class="hljs-string">`callback1 markerClusterInfo`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback2</span> = (<span class="hljs-params">markerClusterInfo: map.MarkerClusterInfo</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"markerClusterClick"</span>, <span class="hljs-string">`callback2 markerClusterInfo`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback3</span> = (<span class="hljs-params">markerClusterInfo: map.MarkerClusterInfo</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"markerClusterClick"</span>, <span class="hljs-string">`callback3 markerClusterInfo`</span>);</li><li>};</li><li>clusterOverlay.<span class="hljs-title function_">on</span>(<span class="hljs-string">"markerClusterClick"</span>, callback1);</li><li>clusterOverlay.<span class="hljs-title function_">on</span>(<span class="hljs-string">"markerClusterClick"</span>, callback2);</li><li>clusterOverlay.<span class="hljs-title function_">on</span>(<span class="hljs-string">"markerClusterClick"</span>, callback3);</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section134851422513" device-type="phone,2in1,tablet,wearable">off('markerClusterClick')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section134851422513" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>off(type: 'markerClusterClick', callback?: Callback&lt;MarkerClusterInfo&gt;): void</p> <p>取消监听聚合图层的标记点击事件。使用callback异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.3(15)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Map.Core</p> <p><strong>起始版本：</strong>5.0.3(15)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.1" width="10.18%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.2" width="33.83%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.3" width="9.180000000000001%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.9.1.5.1.4" width="46.81%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.18%"><p>type</p> </td> <td class="cellrowborder" width="33.83%"><p>string</p> </td> <td class="cellrowborder" width="9.180000000000001%"><p>是</p> </td> <td class="cellrowborder" width="46.81%"><p>'markerClusterClick'：聚合图层的标记点击监听事件。</p> </td> </tr> <tr><td class="cellrowborder" width="10.18%"><p>callback</p> </td> <td class="cellrowborder" width="33.83%"><p>Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-map-markerclusterinfo">MarkerClusterInfo</a>&gt;</p> </td> <td class="cellrowborder" width="9.180000000000001%"><p>否</p> </td> <td class="cellrowborder" width="46.81%"><p>回调函数，返回Callback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-map-markerclusterinfo">MarkerClusterInfo</a>&gt;，取消监听聚合图层的标记点击事件。</p> <ul><li>callback为空：取消所有callback回调。</li><li>callback非空：取消指定的callback回调。</li></ul> <p>MarkerClusterInfo包括：</p> <ul><li>marker：聚合图层的标记。</li><li>clusterItems：聚合节点数组。</li></ul> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gdy-c106="" class="highlight-div"><div _ngcontent-gdy-c106="" class="highlight-div-header"><div _ngcontent-gdy-c106="" class="highlight-div-header-left"><div _ngcontent-gdy-c106="" class="handle-button expand-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gdy-c106="" class="highlight-div-header-right"><div _ngcontent-gdy-c106="" class="handle-button ai-button"></div><div _ngcontent-gdy-c106="" class="handle-button line-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gdy-c106="" class="handle-button theme-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gdy-c106="" class="handle-button copy-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gdy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback1</span> = (<span class="hljs-params">markerClusterInfo: map.MarkerClusterInfo</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"markerClusterClick"</span>, <span class="hljs-string">`callback1 markerClusterInfo`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback2</span> = (<span class="hljs-params">markerClusterInfo: map.MarkerClusterInfo</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"markerClusterClick"</span>, <span class="hljs-string">`callback2 markerClusterInfo`</span>);</li><li>};</li><li><span class="hljs-keyword">let</span> <span class="hljs-title function_">callback3</span> = (<span class="hljs-params">markerClusterInfo: map.MarkerClusterInfo</span>) =&gt; {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"markerClusterClick"</span>, <span class="hljs-string">`callback3 markerClusterInfo`</span>);</li><li>};</li><li>clusterOverlay.<span class="hljs-title function_">on</span>(<span class="hljs-string">"markerClusterClick"</span>, callback1);</li><li>clusterOverlay.<span class="hljs-title function_">on</span>(<span class="hljs-string">"markerClusterClick"</span>, callback2);</li><li>clusterOverlay.<span class="hljs-title function_">on</span>(<span class="hljs-string">"markerClusterClick"</span>, callback3);</li><li><span class="hljs-comment">// 只取消callback1对象的事件响应，当markerClusterClick事件发生时，callback2和callback3会正常被调用</span></li><li>clusterOverlay.<span class="hljs-title function_">off</span>(<span class="hljs-string">'markerClusterClick'</span>, callback1);</li><li><span class="hljs-comment">// 取消全部markerClusterClick事件响应</span></li><li>clusterOverlay.<span class="hljs-title function_">off</span>(<span class="hljs-string">'markerClusterClick'</span>);</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section1256042952116" device-type="phone,2in1,tablet,wearable">addItem<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1256042952116" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>addItem(item: mapCommon.ClusterItem): Promise&lt;void&gt;</p> <p>新增聚合节点。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Map.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.1" width="30.000000000000004%"><p><strong>参数名</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.2" width="35%"><p><strong>类型</strong></p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.3" width="10.000000000000002%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.5.1.4" width="25.000000000000007%"><p><strong>说明</strong></p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="30.000000000000004%"><p>item</p> </td> <td class="cellrowborder" width="35%"><p>mapCommon.<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/map-common#section9436522104316">ClusterItem</a></p> </td> <td class="cellrowborder" width="10.000000000000002%"><p>是</p> </td> <td class="cellrowborder" width="25.000000000000007%"><p>待聚合节点。</p> </td> </tr>  </tbody></table></div> </div> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.1" width="32.16%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.11.1.3.1.2" width="67.84%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="32.16%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="67.84%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gdy-c106="" class="highlight-div"><div _ngcontent-gdy-c106="" class="highlight-div-header"><div _ngcontent-gdy-c106="" class="highlight-div-header-left"><div _ngcontent-gdy-c106="" class="handle-button expand-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gdy-c106="" class="highlight-div-header-right"><div _ngcontent-gdy-c106="" class="handle-button ai-button"></div><div _ngcontent-gdy-c106="" class="handle-button line-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gdy-c106="" class="handle-button theme-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gdy-c106="" class="handle-button copy-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gdy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">clusterItem</span>: mapCommon.<span class="hljs-property">ClusterItem</span> = {</li><li>  <span class="hljs-attr">position</span>: {</li><li>    <span class="hljs-attr">latitude</span>: <span class="hljs-number">31.98</span>,</li><li>    <span class="hljs-attr">longitude</span>: <span class="hljs-number">118.766</span></li><li>  }</li><li>};</li><li><span class="hljs-keyword">await</span> clusterOverlay.<span class="hljs-title function_">addItem</span>(clusterItem);</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section1615914396219" device-type="phone,2in1,tablet,wearable">remove<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1615914396219" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">Wearable</span></div><p>remove(): Promise&lt;void&gt;</p> <p>移除聚合图层。使用Promise异步回调。</p> <p><strong>模型约束：</strong>此接口仅可在Stage模型下使用。</p> <p><strong>元服务API：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Map.Core</p> <p><strong>起始版本：</strong>5.0.0(12)</p> <p class="msonormal"><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="32.16%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="67.84%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="32.16%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="67.84%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gdy-c106="" class="highlight-div"><div _ngcontent-gdy-c106="" class="highlight-div-header"><div _ngcontent-gdy-c106="" class="highlight-div-header-left"><div _ngcontent-gdy-c106="" class="handle-button expand-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gdy-c106="" class="highlight-div-header-right"><div _ngcontent-gdy-c106="" class="handle-button ai-button"></div><div _ngcontent-gdy-c106="" class="handle-button line-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gdy-c106="" class="handle-button theme-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gdy-c106="" class="handle-button copy-button"><div _ngcontent-gdy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gdy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">await</span> clusterOverlay.<span class="hljs-title function_">remove</span>();</li></ol></pre></div></div> </div> <p></p> </div> <div></div></div>