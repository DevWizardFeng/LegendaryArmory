<h1 _ngcontent-krv-c119="" class="doc-title ng-star-inserted" title="CollaborationService (跨设备互通组件)"> CollaborationService (跨设备互通组件) </h1>

<div _ngcontent-krv-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>该模块提供了组件<a href="/consumer/cn/doc/harmonyos-references/servicecollaboration-collaborationservice#section1633482912443">createCollaborationServiceMenuItems</a>和<a href="/consumer/cn/doc/harmonyos-references/servicecollaboration-collaborationservice#section12639651397">CollaborationServiceFilter</a>，两者需要配合使用，完成分布式跨端能力，如在2in1端跨端调用手机端拍照。</p>    <p>通过<a href="/consumer/cn/doc/harmonyos-references/servicecollaboration-collaborationservice#section1633482912443">createCollaborationServiceMenuItems</a>组件，可以获取组网内具有对应能力的设备列表。用户选择对应的设备后，拉起应用。调用<a href="/consumer/cn/doc/harmonyos-references/servicecollaboration-collaborationservice#section158671330145417">CollaborationServiceStateDialog</a>，应用将弹出提示框，提示对端应用状态。</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <div class="tiledSection">     <h2 id="section16609101116259" device-type="phone,2in1,tablet,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><div _ngcontent-krv-c106="" class="highlight-div"><div _ngcontent-krv-c106="" class="highlight-div-header"><div _ngcontent-krv-c106="" class="highlight-div-header-left"><div _ngcontent-krv-c106="" class="handle-button expand-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krv-c106="" class="highlight-div-header-right"><div _ngcontent-krv-c106="" class="handle-button ai-button"></div><div _ngcontent-krv-c106="" class="handle-button line-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krv-c106="" class="handle-button theme-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krv-c106="" class="handle-button copy-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krv-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CollaborationServiceStateDialog</span>, createCollaborationServiceMenuItems, <span class="hljs-title class_">CollaborationServiceFilter</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ServiceCollaborationKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1633482912443" device-type="phone,2in1,tablet,tv">createCollaborationServiceMenuItems<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1633482912443" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>createCollaborationServiceMenuItems(businessFilter?: Array&lt;CollaborationServiceFilter&gt;): void</p>     <p>设备列表选择器，需要在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-menu" target="_blank">Menu</a>组件内调用。用于显示组网内具有对应能力的设备列表。</p>     <p>该方法为自定义构建函数，开发者在使用前需要先了解<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-builder" target="_blank">@Builder</a>。</p>     <p><strong>装饰器类型：</strong>@Builder</p>     <p><strong>系统能力：</strong>SystemCapability.Collaboration.Service</p>     <p><strong>设备行为差异：</strong>该接口在PC/2in1、Tablet可正常调用，在其他设备类型上无法展示设备列表，无法使用跨设备互通能力。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.10.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>businessFilter</p></td>         <td class="cellrowborder" width="30.8%">          <p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/servicecollaboration-collaborationservice#section12639651397">CollaborationServiceFilter</a>&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>否</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>传入能力类型。默认值为ALL，匹配跨端拍照、文档扫描和图库选择器。</p>          <p>对于API 6.0.0(20)及之后版本，支持匹配跨端拍照、文档扫描、图库选择器、视频选择器、图片和视频选择器；对于API 6.0.0(20)之前版本，仅支持匹配跨端拍照、文档扫描、图库选择器。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong><strong>：</strong></p>    </div>    <div _ngcontent-krv-c106="" class="highlight-div"><div _ngcontent-krv-c106="" class="highlight-div-header"><div _ngcontent-krv-c106="" class="highlight-div-header-left"><div _ngcontent-krv-c106="" class="handle-button expand-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krv-c106="" class="highlight-div-header-right"><div _ngcontent-krv-c106="" class="handle-button ai-button"></div><div _ngcontent-krv-c106="" class="handle-button line-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krv-c106="" class="handle-button theme-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krv-c106="" class="handle-button copy-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krv-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-title class_">MyTestMenu</span>() {</li><li>  <span class="hljs-title class_">Menu</span>() {</li><li>    <span class="hljs-title function_">createCollaborationServiceMenuItems</span>([<span class="hljs-title class_">CollaborationServiceFilter</span>.<span class="hljs-property">ALL</span>]) </li><li>  }</li><li>}</li></ol></pre></div></div>    <div class="tiledSection">     <h2 id="section149271552154711" device-type="phone,2in1,tablet,tv">createCollaborationServiceMenuItems<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section149271552154711" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>createCollaborationServiceMenuItems(businessFilter: Array&lt;CollaborationServiceFilter&gt;, canReceiveNumber: number): void</p>     <p>设备列表选择器，需要在<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-menu" target="_blank">Menu</a>组件内调用。用于显示组网内具有对应能力的设备列表，此接口支持自定义对端图库能力图片选择的数量。</p>     <p>该方法为自定义构建函数，开发者在使用前需要先了解<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-builder" target="_blank">@Builder</a>。</p>     <p><strong>装饰器类型：</strong>@Builder</p>     <p><strong>系统能力：</strong>SystemCapability.Collaboration.Service</p>     <p><strong>设备行为差异：</strong>该接口在PC/2in1、Tablet可正常调用，在其他设备类型上无法展示设备列表，无法使用跨设备互通能力。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.5.1.2" width="30.8%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.5.1.3" width="9.24%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.5.1.4" width="40.760000000000005%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>businessFilter</p></td>         <td class="cellrowborder" width="30.8%">          <p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/servicecollaboration-collaborationservice#section12639651397">CollaborationServiceFilter</a>&gt;</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>传入能力类型。默认值为ALL，匹配跨端拍照、文档扫描和图库选择器。</p>          <p>对于API 6.0.0(20)及之后版本，支持匹配跨端拍照、文档扫描、图库选择器、视频选择器、图片和视频选择器；对于API 6.0.0(20)之前版本，仅支持匹配跨端拍照、文档扫描、图库选择器。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>canReceiveNumber</p></td>         <td class="cellrowborder" width="30.8%">          <p>number</p></td>         <td class="cellrowborder" width="9.24%">          <p>是</p></td>         <td class="cellrowborder" width="40.760000000000005%">          <p>传入照片最大张数，数量1到50，小于等于0时不会拉起被调用设备的能力，大于50默认为50。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong><strong>：</strong></p>     <div _ngcontent-krv-c106="" class="highlight-div"><div _ngcontent-krv-c106="" class="highlight-div-header"><div _ngcontent-krv-c106="" class="highlight-div-header-left"><div _ngcontent-krv-c106="" class="handle-button expand-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krv-c106="" class="highlight-div-header-right"><div _ngcontent-krv-c106="" class="handle-button ai-button"></div><div _ngcontent-krv-c106="" class="handle-button line-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krv-c106="" class="handle-button theme-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krv-c106="" class="handle-button copy-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krv-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-title class_">MyTestMenu</span>() {</li><li>  <span class="hljs-title class_">Menu</span>() {</li><li>    <span class="hljs-title function_">createCollaborationServiceMenuItems</span>([<span class="hljs-title class_">CollaborationServiceFilter</span>.<span class="hljs-property">ALL</span>], <span class="hljs-number">30</span>) </li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section12639651397" device-type="phone,2in1,tablet,tv">CollaborationServiceFilter<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section12639651397" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>能力类型枚举值。</p>     <p><strong>系统能力：</strong>SystemCapability.Collaboration.Service</p>     <p><strong>设备行为差异：</strong>该接口在PC/2in1、Tablet可正常调用，在其他设备类型上无法展示设备列表，无法使用跨设备互通能力。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.4.1.1" width="27.900000000000002%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.4.1.2" width="12.43%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.4.1.3" width="59.67%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>ALL</p></td>         <td class="cellrowborder" width="12.43%">          <p>0</p></td>         <td class="cellrowborder" width="59.67%">          <p>匹配跨端拍照、文档扫描和图库选择器。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>TAKE_PHOTO</p></td>         <td class="cellrowborder" width="12.43%">          <p>1</p></td>         <td class="cellrowborder" width="59.67%">          <p>匹配跨端拍照。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>SCAN_DOCUMENT</p></td>         <td class="cellrowborder" width="12.43%">          <p>2</p></td>         <td class="cellrowborder" width="59.67%">          <p>匹配文档扫描。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>IMAGE_PICKER</p></td>         <td class="cellrowborder" width="12.43%">          <p>3</p></td>         <td class="cellrowborder" width="59.67%">          <p>匹配图库选择器。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>VIDEO_PICKER</p></td>         <td class="cellrowborder" width="12.43%">          <p>5</p></td>         <td class="cellrowborder" width="59.67%">          <p>匹配视频选择器。</p>          <p><strong>起始版本：</strong>6.0.0(20)</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.900000000000002%">          <p>IMAGE_VIDEO_PICKER</p></td>         <td class="cellrowborder" width="12.43%">          <p>6</p></td>         <td class="cellrowborder" width="59.67%">          <p>匹配图片和视频选择器。</p>          <p><strong>起始版本：</strong>6.0.0(20)</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例</strong><strong>：</strong></p>     <div _ngcontent-krv-c106="" class="highlight-div"><div _ngcontent-krv-c106="" class="highlight-div-header"><div _ngcontent-krv-c106="" class="highlight-div-header-left"><div _ngcontent-krv-c106="" class="handle-button expand-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krv-c106="" class="highlight-div-header-right"><div _ngcontent-krv-c106="" class="handle-button ai-button"></div><div _ngcontent-krv-c106="" class="handle-button line-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krv-c106="" class="handle-button theme-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krv-c106="" class="handle-button copy-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krv-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-title class_">MyTestMenu</span>() {</li><li>  <span class="hljs-title class_">Menu</span>() {</li><li>    <span class="hljs-title function_">createCollaborationServiceMenuItems</span>([<span class="hljs-title class_">CollaborationServiceFilter</span>.<span class="hljs-property">ALL</span>], <span class="hljs-number">30</span>) </li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section158671330145417" device-type="phone,2in1,tablet,tv">CollaborationServiceStateDialog<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section158671330145417" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>弹窗组件，用于提示对端应用状态。</p>     <p>您需要实现<a href="/consumer/cn/doc/harmonyos-references/servicecollaboration-collaborationservice#section33027582114">onState</a>方法，并且在页面中定义这个组件，在业务开始后，此方法将被协同框架调用。</p>     <p>该组件为自定义组件，开发者在使用前需要先了解<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-create-custom-components#component" target="_blank">@Component</a>。</p>     <p><strong>装饰器类型：</strong>@Component</p>     <p><strong>系统能力：</strong>SystemCapability.Collaboration.Service</p>     <p><strong>设备行为差异：</strong>该接口在PC/2in1、Tablet可正常调用，在其他设备类型上无法展示设备列表，无法使用跨设备互通能力。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>    </div>    <div class="tiledSection">     <h3 id="section33027582114" device-type="phone,2in1,tablet,tv" class="firsth2">onState<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section33027582114" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div><p>onState: (stateCode: number, bufferType: string, buffer: ArrayBuffer) =&gt; void</p>     <p>接收数据的回调函数，其中传入的stateCode是完成状态，bufferType是回传的数据类型，buffer是回传的数据内容，开发者可通过状态和数据结合自身的业务逻辑实现onState方法。</p>     <p><strong>系统能力：</strong>SystemCapability.Collaboration.Service</p>     <p><strong>设备行为差异：</strong>该接口在PC/2in1、Tablet可正常调用，在其他设备类型上无法展示设备列表，无法使用跨设备互通能力。</p>     <p><strong>起始版本：</strong>5.0.0(12)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="19.2%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="21.15%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="11.940000000000001%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="47.71%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="19.2%">          <p>stateCode</p></td>         <td class="cellrowborder" width="21.15%">          <p>number</p></td>         <td class="cellrowborder" width="11.940000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="47.71%">          <p>标识业务完成状态，含义详见下面状态码。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>bufferType</p></td>         <td class="cellrowborder" width="21.15%">          <p>string</p></td>         <td class="cellrowborder" width="11.940000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="47.71%">          <p>标识回传数据类型。</p>          <p>"general.image"：图片类型。</p>          <p>"general.fileName"：文件名称。</p>          <p>"general.video"：视频。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="19.2%">          <p>buffer</p></td>         <td class="cellrowborder" width="21.15%">          <p>ArrayBuffer</p></td>         <td class="cellrowborder" width="11.940000000000001%">          <p>是</p></td>         <td class="cellrowborder" width="47.71%">          <p>成功则返回对应数据，失败则返回空。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>状态码：</strong></p>     <p>以下部分错误状态的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/servicecollaboration-error-code">ArkTS 错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.1" width="50%">          <p>状态码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.10.11.1.3.1.2" width="50%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="50%">          <p>0</p></td>         <td class="cellrowborder" width="50%">          <p>成功。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001202001</p></td>         <td class="cellrowborder" width="50%">          <p>对端取消。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001202002</p></td>         <td class="cellrowborder" width="50%">          <p>协同框架内部出现错误。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001202003</p></td>         <td class="cellrowborder" width="50%">          <p>本端取消。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001202004</p></td>         <td class="cellrowborder" width="50%">          <p>跨设备互通能力开始。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001202005</p></td>         <td class="cellrowborder" width="50%">          <p>图片全部回传结束。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001202006</p></td>         <td class="cellrowborder" width="50%">          <p>回传文件名称。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="50%">          <p>1001202007</p></td>         <td class="cellrowborder" width="50%">          <p>当<a href="/consumer/cn/doc/harmonyos-references/servicecollaboration-collaborationservice#section149271552154711">createCollaborationServiceMenuItems</a>传入自定义图片张数canReceiveNumber小于等于0时，不会拉起被调用设备的能力。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="section41032414617" device-type="phone,2in1,tablet,tv">build<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section41032414617" tips="复制节点链接"></i></h3>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span></div></div>    <p>build(): void</p>    <p>struct的默认构造函数，开发者无法直接调用此方法。</p>    <p><strong>系统能力：</strong>SystemCapability.Collaboration.Service</p>    <p><strong>设备行为差异：</strong>该接口在PC/2in1、Tablet可被组件正常调用，在其他设备类型上无法展示设备列表，无法使用跨设备互通能力。</p>    <p><strong>起始版本：</strong>5.0.0(12)</p>    <p><strong>示例</strong></p>    <p>参考以下示例，可以完成一次调用对端应用的操作。</p>    <p>跨设备互通详细介绍可参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/servicecollaboration-service-overview" target="_blank">跨设备互通特性简介</a>。</p>    <div _ngcontent-krv-c106="" class="highlight-div"><div _ngcontent-krv-c106="" class="highlight-div-header"><div _ngcontent-krv-c106="" class="highlight-div-header-left"><div _ngcontent-krv-c106="" class="handle-button expand-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-krv-c106="" class="highlight-div-header-right"><div _ngcontent-krv-c106="" class="handle-button ai-button"></div><div _ngcontent-krv-c106="" class="handle-button line-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-krv-c106="" class="handle-button theme-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-krv-c106="" class="handle-button copy-button"><div _ngcontent-krv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-krv-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> {</li><li>  createCollaborationServiceMenuItems,</li><li>  <span class="hljs-title class_">CollaborationServiceStateDialog</span>,</li><li>  <span class="hljs-title class_">CollaborationServiceFilter</span></li><li>} <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ServiceCollaborationKit'</span>;</li><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.PerformanceAnalysisKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">picture</span>: <span class="hljs-title class_">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">MyTestMenu</span>() {</li><li>    <span class="hljs-title class_">Menu</span>() {</li><li>      <span class="hljs-title function_">createCollaborationServiceMenuItems</span>([<span class="hljs-title class_">CollaborationServiceFilter</span>.<span class="hljs-property">ALL</span>], <span class="hljs-number">30</span>)</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">20</span> }) {</li><li>      <span class="hljs-title class_">CollaborationServiceStateDialog</span>({</li><li>        <span class="hljs-attr">onState</span>: (<span class="hljs-attr">stateCode</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">bufferType</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">buffer</span>: <span class="hljs-title class_">ArrayBuffer</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">doInsertPicture</span>(stateCode, bufferType, buffer)</li><li>      })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'使用远端设备进行拍照'</span>)</li><li>        .<span class="hljs-title function_">type</span>(<span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Normal</span>)</li><li>        .<span class="hljs-title function_">borderRadius</span>(<span class="hljs-number">10</span>)</li><li>        .<span class="hljs-title function_">bindMenu</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">MyTestMenu</span>)</li><li>
</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">picture</span>) {</li><li>        <span class="hljs-title class_">Image</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">picture</span>)</li><li>          .<span class="hljs-title function_">borderStyle</span>(<span class="hljs-title class_">BorderStyle</span>.<span class="hljs-property">Dotted</span>)</li><li>          .<span class="hljs-title function_">borderWidth</span>(<span class="hljs-number">1</span>)</li><li>          .<span class="hljs-title function_">objectFit</span>(<span class="hljs-title class_">ImageFit</span>.<span class="hljs-property">Contain</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-string">'80%'</span>)</li><li>          .<span class="hljs-title function_">onComplete</span>(<span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {</li><li>            <span class="hljs-keyword">if</span> (event != <span class="hljs-literal">undefined</span>) {</li><li>              hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0</span>, <span class="hljs-string">"MEMOMOCK"</span>, <span class="hljs-string">"onComplete "</span> + event.<span class="hljs-property">loadingStatus</span>)</li><li>            }</li><li>          })</li><li>      }</li><li>    }</li><li>    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">20</span>)</li><li>    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>    .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>)</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">doInsertPicture</span>(<span class="hljs-attr">stateCode</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">bufferType</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">buffer</span>: <span class="hljs-title class_">ArrayBuffer</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (stateCode != <span class="hljs-number">0</span>) {</li><li>      <span class="hljs-keyword">return</span></li><li>    }</li><li>    <span class="hljs-keyword">if</span> (bufferType == <span class="hljs-string">"general.image"</span>) {</li><li>      <span class="hljs-keyword">let</span> imageSource = image.<span class="hljs-title function_">createImageSource</span>(buffer)</li><li>      imageSource.<span class="hljs-title function_">createPixelMap</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelMap</span>) =&gt;</span> {</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">picture</span> = pixelMap;</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>   </div>   <div></div></div>