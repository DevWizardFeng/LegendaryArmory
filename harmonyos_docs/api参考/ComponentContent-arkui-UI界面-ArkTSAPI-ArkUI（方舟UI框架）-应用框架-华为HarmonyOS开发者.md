<h1 _ngcontent-ayr-c119="" class="doc-title ng-star-inserted" title="ComponentContent"> ComponentContent </h1>

<div _ngcontent-ayr-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>ComponentContent表示组件内容的实体封装，其对象支持在非UI组件中创建与传递，便于开发者对弹窗类组件进行解耦封装。其底层使用了BuilderNode，具体使用规格参考<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-buildernode">BuilderNode</a>。</p>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块从API version 12开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>      <p>当前不支持在预览器中使用ComponentContent。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-ayr-c106="" class="highlight-div"><div _ngcontent-ayr-c106="" class="highlight-div-header"><div _ngcontent-ayr-c106="" class="highlight-div-header-left"><div _ngcontent-ayr-c106="" class="handle-button expand-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ayr-c106="" class="highlight-div-header-right"><div _ngcontent-ayr-c106="" class="handle-button ai-button"></div><div _ngcontent-ayr-c106="" class="handle-button line-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ayr-c106="" class="handle-button theme-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ayr-c106="" class="handle-button copy-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ayr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentContent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="componentcontent-1" device-type="phone,2in1,tablet,wearable,tv">ComponentContent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="componentcontent-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>继承自<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-content#content-1">Content</a>。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>    </div>    <div class="tiledSection">     <h3 id="constructor" device-type="phone,2in1,tablet,wearable,tv" class="firsth2">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(uiContext: UIContext, builder: WrappedBuilder&lt;[]&gt;)</p>     <p>ComponentContent的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uiContext</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext">UIContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建对应节点时所需要的UI上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">builder</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-wrapbuilder" target="_blank">WrappedBuilder&lt;[]&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">封装不带参builder函数的WrappedBuilder对象。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="constructor-1" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-1" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(uiContext: UIContext, builder: WrappedBuilder&lt;[T]&gt;, args: T)</p>     <p>ComponentContent的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uiContext</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext">UIContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建对应节点时候所需要的UI上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">builder</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-wrapbuilder" target="_blank">WrappedBuilder&lt;[T]&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">封装带参builder函数的WrappedBuilder对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">T</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WrappedBuilder对象封装的builder函数的参数。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="constructor-2" device-type="phone,2in1,tablet,wearable,tv">constructor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="constructor-2" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>constructor(uiContext: UIContext, builder: WrappedBuilder&lt;[T]&gt;, args: T, options: BuildOptions)</p>     <p>ComponentContent的构造函数。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uiContext</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-uicontext-uicontext">UIContext</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建对应节点时候所需要的UI上下文。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">builder</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-wrapbuilder" target="_blank">WrappedBuilder&lt;[T]&gt;</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">封装带参builder函数的WrappedBuilder对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">T</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">WrappedBuilder对象封装的builder函数的参数。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-arkui-buildernode#buildoptions12">BuildOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">build的配置参数，判断是否支持@Builder中嵌套@Builder的行为。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ayr-c106="" class="highlight-div"><div _ngcontent-ayr-c106="" class="highlight-div-header"><div _ngcontent-ayr-c106="" class="highlight-div-header-left"><div _ngcontent-ayr-c106="" class="handle-button expand-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ayr-c106="" class="highlight-div-header-right"><div _ngcontent-ayr-c106="" class="handle-button ai-button"></div><div _ngcontent-ayr-c106="" class="handle-button line-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ayr-c106="" class="handle-button theme-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ayr-c106="" class="handle-button copy-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ayr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentContent</span>, <span class="hljs-title class_">NodeContent</span>, typeNode } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.ArkUI"</span>;</li><li>
</li><li><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ParamsInterface</span> {</li><li>  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>;</li><li>  <span class="hljs-attr">func</span>: <span class="hljs-title class_">Function</span>;</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">buildTextWithFunc</span>(<span class="hljs-params">fun: <span class="hljs-built_in">Function</span></span>) {</li><li>  <span class="hljs-title class_">Text</span>(<span class="hljs-title function_">fun</span>())</li><li>    .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>    .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>    .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">36</span> })</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">buildText</span>(<span class="hljs-params">params: ParamsInterface</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(params.<span class="hljs-property">text</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">36</span> })</li><li>    <span class="hljs-title function_">buildTextWithFunc</span>(params.<span class="hljs-property">func</span>)</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"HELLO"</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">content</span>: <span class="hljs-title class_">NodeContent</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NodeContent</span>();</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'addComponentContent'</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> column = typeNode.<span class="hljs-title function_">createNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>(), <span class="hljs-string">"Column"</span>);</li><li>            column.<span class="hljs-title function_">initialize</span>();</li><li>            column.<span class="hljs-title function_">addComponentContent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>&lt;<span class="hljs-title class_">ParamsInterface</span>&gt;(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>(),</li><li>              wrapBuilder&lt;[<span class="hljs-title class_">ParamsInterface</span>]&gt;(buildText), {</li><li>                <span class="hljs-attr">text</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>, <span class="hljs-attr">func</span>: <span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-keyword">return</span> <span class="hljs-string">"FUNCTION"</span></li><li>                }</li><li>              }, { <span class="hljs-attr">nestingBuilderSupported</span>: <span class="hljs-literal">true</span> }));</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>.<span class="hljs-title function_">addFrameNode</span>(column);</li><li>          })</li><li>        <span class="hljs-title class_">ContentSlot</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">id</span>(<span class="hljs-string">"column"</span>)</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="update" device-type="phone,2in1,tablet,wearable,tv">update<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="update" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>update(args: T): void</p>     <p>用于更新<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-wrapbuilder" target="_blank">WrappedBuilder</a>对象封装的builder函数参数，与constructor传入的参数类型保持一致。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">args</td>         <td class="cellrowborder" width="25%">T</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">用于更新<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-wrapbuilder" target="_blank">WrappedBuilder</a>对象封装的builder函数参数，与constructor传入的参数类型保持一致。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ayr-c106="" class="highlight-div"><div _ngcontent-ayr-c106="" class="highlight-div-header"><div _ngcontent-ayr-c106="" class="highlight-div-header-left"><div _ngcontent-ayr-c106="" class="handle-button expand-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ayr-c106="" class="highlight-div-header-right"><div _ngcontent-ayr-c106="" class="handle-button ai-button"></div><div _ngcontent-ayr-c106="" class="handle-button line-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ayr-c106="" class="handle-button theme-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ayr-c106="" class="handle-button copy-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ayr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentContent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.ArkUI"</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = text;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">buildText</span>(<span class="hljs-params">params: Params</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(params.<span class="hljs-property">text</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      .<span class="hljs-title function_">margin</span>({<span class="hljs-attr">bottom</span>: <span class="hljs-number">36</span>})</li><li>  }.<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFF0F0F0'</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"hello"</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"click me"</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-keyword">let</span> uiContext = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>                <span class="hljs-keyword">let</span> promptAction = uiContext.<span class="hljs-title function_">getPromptAction</span>();</li><li>                <span class="hljs-keyword">let</span> contentNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>(uiContext, <span class="hljs-title function_">wrapBuilder</span>(buildText), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>));</li><li>                promptAction.<span class="hljs-title function_">openCustomDialog</span>(contentNode);</li><li>
</li><li>                <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                  contentNode.<span class="hljs-title function_">update</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-string">"new message"</span>));</li><li>                }, <span class="hljs-number">2000</span>);    <span class="hljs-comment">//2秒后自动更新弹窗内容文本</span></li><li>            })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="reuse" device-type="phone,2in1,tablet,wearable,tv">reuse<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="reuse" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>reuse(param?: Object): void</p>     <p>触发ComponentContent中的自定义组件的复用。组件复用请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-reusable" target="_blank">@Reusable装饰器：组件复用</a>。关于ComponentContent的解绑场景请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-user-defined-arktsnode-buildernode#解除实体节点引用关系" target="_blank">解除实体节点引用关系</a>。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">param</td>         <td class="cellrowborder" width="25%">Object</td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">用于复用ComponentContent的参数。该参数将直接用于ComponentContent中所有顶层自定义组件的复用，应该包含每个自定义组件的构造函数参数所需内容，否则，会导致未定义行为。调用此方法将同步触发内部自定义组件的<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-custom-component-lifecycle#abouttoreuse10">aboutToReuse</a>生命周期回调，并将该参数作为回调的入参。默认值为undefined，此时ComponentContent中的自定义组件将直接使用构造时的数据源。</td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h3 id="recycle" device-type="phone,2in1,tablet,wearable,tv">recycle<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="recycle" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>recycle(): void</p>     <ul>      <li>触发ComponentContent中自定义组件的回收。自定义组件的回收是组件复用机制中的环节，具体信息请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-reusable" target="_blank">@Reusable装饰器：组件复用</a>。</li>      <li>ComponentContent通过reuse和recycle完成其内外自定义组件之间的复用事件传递，具体使用场景请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-user-defined-arktsnode-buildernode#buildernode调用reuse和recycle接口实现节点复用能力" target="_blank">BuilderNode调用reuse和recycle接口实现节点复用能力</a>。</li>     </ul>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div _ngcontent-ayr-c106="" class="highlight-div"><div _ngcontent-ayr-c106="" class="highlight-div-header"><div _ngcontent-ayr-c106="" class="highlight-div-header-left"><div _ngcontent-ayr-c106="" class="handle-button expand-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ayr-c106="" class="highlight-div-header-right"><div _ngcontent-ayr-c106="" class="handle-button ai-button"></div><div _ngcontent-ayr-c106="" class="handle-button line-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ayr-c106="" class="handle-button theme-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ayr-c106="" class="handle-button copy-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ayr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeContent</span>, typeNode, <span class="hljs-title class_">ComponentContent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.ArkUI"</span>;</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">TEST_TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"Reuse+Recycle"</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDataSource</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">dataArray</span>: <span class="hljs-built_in">string</span>[] = [];</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">listener</span>: <span class="hljs-title class_">DataChangeListener</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">totalCount</span>(): <span class="hljs-built_in">number</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataArray</span>.<span class="hljs-property">length</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataArray</span>[index];</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">pushData</span>(<span class="hljs-params">data: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataArray</span>.<span class="hljs-title function_">push</span>(data);</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">reloadListener</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listener</span>?.<span class="hljs-title function_">onDataReloaded</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">registerDataChangeListener</span>(<span class="hljs-attr">listener</span>: <span class="hljs-title class_">DataChangeListener</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listener</span> = listener;</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">unregisterDataChangeListener</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listener</span> = <span class="hljs-literal">null</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>  <span class="hljs-attr">item</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">item</span> = item;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">buildNode</span>(<span class="hljs-params">param: Params = <span class="hljs-keyword">new</span> Params(<span class="hljs-string">"hello"</span>)</span>) {</li><li>  <span class="hljs-title class_">Row</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`C<span class="hljs-subst">${param.item}</span> -- `</span>)</li><li>    <span class="hljs-title class_">ReusableChildComponent2</span>({ <span class="hljs-attr">item</span>: param.<span class="hljs-property">item</span> }) <span class="hljs-comment">//该自定义组件在ComponentContent中无法被正确复用</span></li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-comment">// 被回收复用的自定义组件，其状态变量会更新，而子自定义组件ReusableChildComponent3中的状态变量也会更新，但ComponentContent会阻断这一传递过程</span></li><li><span class="hljs-meta">@Reusable</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ReusableChildComponent</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">item</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">switch</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">content</span>: <span class="hljs-title class_">NodeContent</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NodeContent</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">componentContent</span>: <span class="hljs-title class_">ComponentContent</span>&lt;<span class="hljs-title class_">Params</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>&lt;<span class="hljs-title class_">Params</span>&gt;(</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>(),</li><li>    wrapBuilder&lt;[<span class="hljs-title class_">Params</span>]&gt;(buildNode),</li><li>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">item</span>),</li><li>    { <span class="hljs-attr">nestingBuilderSupported</span>: <span class="hljs-literal">true</span> });</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> column = typeNode.<span class="hljs-title function_">createNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>(), <span class="hljs-string">"Column"</span>);</li><li>    column.<span class="hljs-title function_">initialize</span>();</li><li>    column.<span class="hljs-title function_">addComponentContent</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">componentContent</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>.<span class="hljs-title function_">addFrameNode</span>(column);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToRecycle</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${TEST_TAG}</span> ReusableChildComponent aboutToRecycle <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.item}</span>`</span>);</li><li>
</li><li>    <span class="hljs-comment">// 当开关为open，通过ComponentContent的reuse接口和recycle接口传递给其下的自定义组件，例如ReusableChildComponent2，完成复用</span></li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">switch</span> === <span class="hljs-string">'open'</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentContent</span>.<span class="hljs-title function_">recycle</span>();</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToReuse</span>(<span class="hljs-attr">params</span>: <span class="hljs-built_in">object</span>): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${TEST_TAG}</span> ReusableChildComponent aboutToReuse <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(params)}</span>`</span>);</li><li>
</li><li>    <span class="hljs-comment">// 当开关为open，通过ComponentContent的reuse接口和recycle接口传递给其下的自定义组件，例如ReusableChildComponent2，完成复用</span></li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">switch</span> === <span class="hljs-string">'open'</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">componentContent</span>.<span class="hljs-title function_">reuse</span>(params);</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`A<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.item}</span>--`</span>)</li><li>      <span class="hljs-title class_">ReusableChildComponent3</span>({ <span class="hljs-attr">item</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">item</span> })</li><li>      <span class="hljs-title class_">ContentSlot</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>)</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ReusableChildComponent2</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">item</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"false"</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToReuse</span>(<span class="hljs-params">params: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt;</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${TEST_TAG}</span> ReusableChildComponent2 aboutToReuse <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(params)}</span>`</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToRecycle</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${TEST_TAG}</span> ReusableChildComponent2 aboutToRecycle <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.item}</span>`</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`D<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.item}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Yellow</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">10</span> })</li><li>    }.<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">10</span> })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">ReusableChildComponent3</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-attr">item</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"false"</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToReuse</span>(<span class="hljs-params">params: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">object</span>&gt;</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${TEST_TAG}</span> ReusableChildComponent3 aboutToReuse <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(params)}</span>`</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToRecycle</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`<span class="hljs-subst">${TEST_TAG}</span> ReusableChildComponent3 aboutToRecycle <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.item}</span>`</span>);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`B<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.item}</span>`</span>)</li><li>        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)</li><li>        .<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-title class_">Color</span>.<span class="hljs-property">Yellow</span>)</li><li>        .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">10</span> })</li><li>    }.<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">left</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">right</span>: <span class="hljs-number">10</span> })</li><li>  }</li><li>}</li><li>
</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">MyDataSource</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyDataSource</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-title function_">pushData</span>(i.<span class="hljs-title function_">toString</span>());</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">List</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">3</span> }) {</li><li>        <span class="hljs-title class_">LazyForEach</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> {</li><li>          <span class="hljs-title class_">ListItem</span>() {</li><li>            <span class="hljs-title class_">ReusableChildComponent</span>({</li><li>              <span class="hljs-attr">item</span>: item,</li><li>              <span class="hljs-attr">switch</span>: <span class="hljs-string">'open'</span> <span class="hljs-comment">// 将open改为close可观察到，ComponentContent不通过reuse和recycle接口传递复用时，ComponentContent内部的自定义组件的行为表现</span></li><li>            })</li><li>          }</li><li>        }, <span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">string</span></span>) =&gt;</span> item)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="dispose" device-type="phone,2in1,tablet,wearable,tv">dispose<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dispose" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>dispose(): void</p>     <p>立即释放当前ComponentContent对象对<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-user-defined-node#基本概念" target="_blank">基本概念：实体节点</a>的引用关系。关于ComponentContent的解绑场景请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-user-defined-arktsnode-buildernode#解除实体节点引用关系" target="_blank">解除实体节点引用关系</a>。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当ComponentContent对象调用dispose之后，会与后端实体节点解除引用关系。若前端对象ComponentContent无法释放，容易导致内存泄漏。建议在不再需要操作该ComponentContent对象时，开发者主动调用dispose释放后端节点，以减少引用关系的复杂性，降低内存泄漏的风险。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-ayr-c106="" class="highlight-div"><div _ngcontent-ayr-c106="" class="highlight-div-header"><div _ngcontent-ayr-c106="" class="highlight-div-header-left"><div _ngcontent-ayr-c106="" class="handle-button expand-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ayr-c106="" class="highlight-div-header-right"><div _ngcontent-ayr-c106="" class="handle-button ai-button"></div><div _ngcontent-ayr-c106="" class="handle-button line-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ayr-c106="" class="handle-button theme-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ayr-c106="" class="handle-button copy-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ayr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentContent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = text;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">buildText</span>(<span class="hljs-params">params: Params</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(params.<span class="hljs-property">text</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">36</span> })</li><li>  }.<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFF0F0F0'</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"hello"</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"click me"</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                <span class="hljs-keyword">let</span> uiContext = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>                <span class="hljs-keyword">let</span> promptAction = uiContext.<span class="hljs-title function_">getPromptAction</span>();</li><li>                <span class="hljs-keyword">let</span> contentNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>(uiContext, <span class="hljs-title function_">wrapBuilder</span>(buildText), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>));</li><li>                promptAction.<span class="hljs-title function_">openCustomDialog</span>(contentNode);</li><li>
</li><li>                <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                  promptAction.<span class="hljs-title function_">closeCustomDialog</span>(contentNode)</li><li>                    .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'customDialog closed.'</span>);</li><li>                      <span class="hljs-keyword">if</span> (contentNode !== <span class="hljs-literal">null</span>) {</li><li>                        contentNode.<span class="hljs-title function_">dispose</span>();   <span class="hljs-comment">//释放contentNode</span></li><li>                      }</li><li>                    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>                      <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>                      <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>                      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`closeCustomDialog args error code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>                    })</li><li>                }, <span class="hljs-number">2000</span>);     <span class="hljs-comment">//2秒后自动关闭</span></li><li>            })</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="updateconfiguration" device-type="phone,2in1,tablet,wearable,tv">updateConfiguration<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="updateconfiguration" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>updateConfiguration(): void</p>     <p>传递<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-configuration">系统环境变化</a>事件，触发节点的全量更新。</p>     <p><strong>元服务API：</strong> 从API version 12开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>updateConfiguration接口用于通知对象更新当前的系统环境变化。</p>      </div></div></div>     <p><strong>示例：</strong></p>     <div _ngcontent-ayr-c106="" class="highlight-div"><div _ngcontent-ayr-c106="" class="highlight-div-header"><div _ngcontent-ayr-c106="" class="highlight-div-header-left"><div _ngcontent-ayr-c106="" class="handle-button expand-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ayr-c106="" class="highlight-div-header-right"><div _ngcontent-ayr-c106="" class="handle-button ai-button"></div><div _ngcontent-ayr-c106="" class="handle-button line-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ayr-c106="" class="handle-button theme-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ayr-c106="" class="handle-button copy-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ayr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NodeController</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">ComponentContent</span>, <span class="hljs-title class_">UIContext</span>, <span class="hljs-title class_">FrameCallback</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AbilityConstant</span>, <span class="hljs-title class_">Configuration</span>, <span class="hljs-title class_">EnvironmentCallback</span>, <span class="hljs-title class_">ConfigurationConstant</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">buildText</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello'</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">36</span>)</li><li>      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>  }</li><li>  .<span class="hljs-title function_">backgroundColor</span>($r(<span class="hljs-string">'sys.color.ohos_id_color_background'</span>))</li><li>  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>  .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>)</li><li>  .<span class="hljs-title function_">padding</span>(<span class="hljs-number">16</span>)</li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">componentContentMap</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">ComponentContent</span>&lt;[<span class="hljs-title class_">Object</span>]&gt;&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">uiContext</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> {</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">createNode</span>(<span class="hljs-params">context: UIContext</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(context);</li><li>    <span class="hljs-keyword">let</span> component = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>&lt;<span class="hljs-title class_">Object</span>&gt;(context, <span class="hljs-title function_">wrapBuilder</span>(buildText));</li><li>    componentContentMap.<span class="hljs-title function_">push</span>(component);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">addComponentContent</span>(component);</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">deleteNode</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> node = componentContentMap.<span class="hljs-title function_">pop</span>();</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>?.<span class="hljs-title function_">dispose</span>();</li><li>    node?.<span class="hljs-title function_">dispose</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyFrameCallback</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">FrameCallback</span> {</li><li>  <span class="hljs-title function_">onFrame</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title function_">updateColorMode</span>();</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateColorMode</span>(<span class="hljs-params"></span>) {</li><li>  componentContentMap.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">value, index</span>) =&gt;</span> {</li><li>    value.<span class="hljs-title function_">updateConfiguration</span>();</li><li>  })</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">FrameNodeTypeTest</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">myNodeController</span>: <span class="hljs-title class_">MyNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyNodeController</span>();</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">environmentCallback</span>: <span class="hljs-title class_">EnvironmentCallback</span> = {</li><li>      <span class="hljs-attr">onMemoryLevel</span>: (<span class="hljs-attr">level</span>: <span class="hljs-title class_">AbilityConstant</span>.<span class="hljs-property">MemoryLevel</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onMemoryLevel'</span>);</li><li>      },</li><li>      <span class="hljs-attr">onConfigurationUpdated</span>: (<span class="hljs-attr">config</span>: <span class="hljs-title class_">Configuration</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`onConfigurationUpdated <span class="hljs-subst">${config}</span>`</span>);</li><li>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">postFrameCallback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyFrameCallback</span>());</li><li>      }</li><li>    }</li><li>    <span class="hljs-comment">// 注册监听回调</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-title function_">on</span>(<span class="hljs-string">'environment'</span>, environmentCallback);</li><li>    <span class="hljs-comment">// 设置应用深浅色跟随系统</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()</li><li>      .<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-title function_">setColorMode</span>(<span class="hljs-title class_">ConfigurationConstant</span>.<span class="hljs-property">ColorMode</span>.<span class="hljs-property">COLOR_MODE_NOT_SET</span>);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController</span>.<span class="hljs-title function_">createNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>());</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-comment">//移除map中的引用，并将自定义节点释放</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController</span>.<span class="hljs-title function_">deleteNode</span>();</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">16</span> }) {</li><li>      <span class="hljs-title class_">NodeContainer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myNodeController</span>);</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'切换深色'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()</li><li>            .<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-title function_">setColorMode</span>(<span class="hljs-title class_">ConfigurationConstant</span>.<span class="hljs-property">ColorMode</span>.<span class="hljs-property">COLOR_MODE_DARK</span>);</li><li>        })</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'设置浅色'</span>)</li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()</li><li>            .<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-title function_">getApplicationContext</span>().<span class="hljs-title function_">setColorMode</span>(<span class="hljs-title class_">ConfigurationConstant</span>.<span class="hljs-property">ColorMode</span>.<span class="hljs-property">COLOR_MODE_LIGHT</span>);</li><li>        })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h3 id="isdisposed20" device-type="phone,2in1,tablet,wearable,tv">isDisposed<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="isdisposed20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>isDisposed(): boolean</p>     <p>查询当前ComponentContent对象是否已解除与后端实体节点的引用关系。前端节点均绑定有相应的后端实体节点，当节点调用dispose接口解除绑定后，再次调用接口可能会出现crash、返回默认值的情况。由于业务需求，可能存在节点在dispose后仍被调用接口的情况。为此，提供此接口以供开发者在操作节点前检查其有效性，避免潜在风险。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">boolean</td>         <td class="cellrowborder" width="50%">后端实体节点是否解除引用。true为节点已与后端实体节点解除引用，false为节点未与后端实体节点解除引用。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ayr-c106="" class="highlight-div"><div _ngcontent-ayr-c106="" class="highlight-div-header"><div _ngcontent-ayr-c106="" class="highlight-div-header-left"><div _ngcontent-ayr-c106="" class="handle-button expand-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ayr-c106="" class="highlight-div-header-right"><div _ngcontent-ayr-c106="" class="handle-button ai-button"></div><div _ngcontent-ayr-c106="" class="handle-button line-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ayr-c106="" class="handle-button theme-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ayr-c106="" class="handle-button copy-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ayr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentContent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = text;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">buildText</span>(<span class="hljs-params">params: Params</span>) {</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">Text</span>(params.<span class="hljs-property">text</span>)</li><li>      .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">50</span>)</li><li>      .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>      .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">bottom</span>: <span class="hljs-number">36</span> })</li><li>  }.<span class="hljs-title function_">backgroundColor</span>(<span class="hljs-string">'#FFF0F0F0'</span>)</li><li>}</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">Index</span> {</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"hello"</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">beforeDispose</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span></li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">afterDispose</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span></li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">"click me"</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-keyword">let</span> uiContext = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>();</li><li>            <span class="hljs-keyword">let</span> promptAction = uiContext.<span class="hljs-title function_">getPromptAction</span>();</li><li>            <span class="hljs-keyword">let</span> contentNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>(uiContext, <span class="hljs-title function_">wrapBuilder</span>(buildText), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>));</li><li>            promptAction.<span class="hljs-title function_">openCustomDialog</span>(contentNode);</li><li>
</li><li>            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              promptAction.<span class="hljs-title function_">closeCustomDialog</span>(contentNode)</li><li>                .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>                  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'customDialog closed.'</span>);</li><li>                  <span class="hljs-keyword">if</span> (contentNode !== <span class="hljs-literal">null</span>) {</li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">beforeDispose</span> = contentNode.<span class="hljs-title function_">isDisposed</span>() ? <span class="hljs-string">'before dispose componentContent isDisposed is true'</span> : <span class="hljs-string">'before dispose componentContent isDisposed is false'</span>;</li><li>                    contentNode.<span class="hljs-title function_">dispose</span>();   <span class="hljs-comment">//释放contentNode</span></li><li>                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">afterDispose</span> = contentNode.<span class="hljs-title function_">isDisposed</span>() ? <span class="hljs-string">'after dispose componentContent isDisposed is true'</span> : <span class="hljs-string">'after dispose componentContent isDisposed is false'</span>;</li><li>                  }</li><li>                }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>                <span class="hljs-keyword">let</span> message = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">message</span>;</li><li>                <span class="hljs-keyword">let</span> code = (error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>).<span class="hljs-property">code</span>;</li><li>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`closeCustomDialog args error code is <span class="hljs-subst">${code}</span>, message is <span class="hljs-subst">${message}</span>`</span>);</li><li>              })</li><li>            }, <span class="hljs-number">1000</span>);     <span class="hljs-comment">//1秒后自动关闭</span></li><li>          })</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">beforeDispose</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">25</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">10</span> })</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">afterDispose</span>)</li><li>          .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">25</span>)</li><li>      }</li><li>      .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)</li><li>      .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }</li><li>    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="702" originwidth="505" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115746.59189947217455151819994190172846:50001231000000:2800:F37A805E6CEA34E2F7420D952FE5D664AB9CC31A8799C64A1E4319D1C4465859.gif" width="505" height="702"></span></p>    </div>    <div class="tiledSection">     <h3 id="inheritfreezeoptions20" device-type="phone,2in1,tablet,wearable,tv">inheritFreezeOptions<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="inheritfreezeoptions20" tips="复制节点链接"></i></h3>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>inheritFreezeOptions(enabled: boolean): void</p>     <p>查询当前ComponentContent对象是否设置为继承父组件中自定义组件的冻结策略。如果设置继承状态为false，则ComponentContent对象的冻结策略为false。在这种情况下，节点在不活跃状态下不会被冻结。</p>     <p><strong>元服务API：</strong> 从API version 20开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.ArkUI.ArkUI.Full</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">enabled</td>         <td class="cellrowborder" width="25%">boolean</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">ComponentContent对象是否设置为继承父组件中自定义组件的冻结策略。true为继承父组件中自定义组件的冻结策略，false为不继承父组件中自定义组件的冻结策略。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-ayr-c106="" class="highlight-div"><div _ngcontent-ayr-c106="" class="highlight-div-header"><div _ngcontent-ayr-c106="" class="highlight-div-header-left"><div _ngcontent-ayr-c106="" class="handle-button expand-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-ayr-c106="" class="highlight-div-header-right"><div _ngcontent-ayr-c106="" class="handle-button ai-button"></div><div _ngcontent-ayr-c106="" class="handle-button line-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-ayr-c106="" class="handle-button theme-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-ayr-c106="" class="handle-button copy-button"><div _ngcontent-ayr-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-ayr-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentContent</span>, <span class="hljs-title class_">FrameNode</span>, <span class="hljs-title class_">NodeController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">Params</span> {</li><li>  <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">count: <span class="hljs-built_in">number</span></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = count;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Builder</span> <span class="hljs-comment">// builder组件</span></li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">buildText</span>(<span class="hljs-params">params: Params</span>) {</li><li>
</li><li>  <span class="hljs-title class_">Column</span>() {</li><li>    <span class="hljs-title class_">TextBuilder</span>({ <span class="hljs-attr">message</span>: params.<span class="hljs-property">count</span> })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">TextNodeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">NodeController</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">rootNode</span>: <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">contentNode</span>: <span class="hljs-title class_">ComponentContent</span>&lt;<span class="hljs-title class_">Params</span>&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">makeNode</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">UIContext</span>): <span class="hljs-title class_">FrameNode</span> | <span class="hljs-literal">null</span> {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameNode</span>(context);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComponentContent</span>(context, <span class="hljs-title function_">wrapBuilder</span>(buildText), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>)); <span class="hljs-comment">// 通过buildText创建ComponentContent</span></li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span>.<span class="hljs-title function_">inheritFreezeOptions</span>(<span class="hljs-literal">true</span>); <span class="hljs-comment">// 设置ComponentContent的冻结继承状态为True</span></li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span> !== <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>.<span class="hljs-title function_">addComponentContent</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span>); <span class="hljs-comment">// 将ComponentContent上树</span></li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">rootNode</span>;</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">update</span>(): <span class="hljs-built_in">void</span> {</li><li>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span> !== <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> += <span class="hljs-number">1</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentNode</span>.<span class="hljs-title function_">update</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Params</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>)); <span class="hljs-comment">// 更新ComponentContent中的数据，可以触发Log</span></li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">textNodeController</span>: <span class="hljs-title class_">TextNodeController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextNodeController</span>();</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">MyNavigationTestStack</span> {</li><li>  <span class="hljs-meta">@Provide</span>(<span class="hljs-string">'pageInfo'</span>) <span class="hljs-attr">pageInfo</span>: <span class="hljs-title class_">NavPathStack</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NavPathStack</span>();</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">logNumber</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-meta">@Builder</span></li><li>  <span class="hljs-title class_">PageMap</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>) {</li><li>    <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'pageOne'</span>) {</li><li>      <span class="hljs-title function_">pageOneStack</span>({ <span class="hljs-attr">message</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>, <span class="hljs-attr">logNumber</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">logNumber</span> })</li><li>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'pageTwo'</span>) {</li><li>      <span class="hljs-title function_">pageTwoStack</span>({ <span class="hljs-attr">message</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>, <span class="hljs-attr">logNumber</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">logNumber</span> })</li><li>    }</li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'update ComponentContent'</span>) <span class="hljs-comment">// 点击更新ComponentContent</span></li><li>        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>          textNodeController.<span class="hljs-title function_">update</span>();</li><li>        })</li><li>      <span class="hljs-title class_">Navigation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfo</span>) {</li><li>        <span class="hljs-title class_">Column</span>() {</li><li>          <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Next Page'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> })</li><li>            .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>            .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>            .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>            .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>              <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfo</span>.<span class="hljs-title function_">pushPath</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'pageOne'</span> }); <span class="hljs-comment">// 将name指定的NavDestination页面信息入栈</span></li><li>            })</li><li>        }</li><li>      }.<span class="hljs-title function_">title</span>(<span class="hljs-string">'NavIndex'</span>)</li><li>      .<span class="hljs-title function_">navDestination</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">PageMap</span>)</li><li>      .<span class="hljs-title function_">mode</span>(<span class="hljs-title class_">NavigationMode</span>.<span class="hljs-property">Stack</span>)</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct pageOneStack { <span class="hljs-comment">// 页面一</span></li><li>  <span class="hljs-meta">@Consume</span>(<span class="hljs-string">'pageInfo'</span>) <span class="hljs-attr">pageInfo</span>: <span class="hljs-title class_">NavPathStack</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">number</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">logNumber</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">NavigationContentMsgStack</span>({ <span class="hljs-attr">message</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>, <span class="hljs-attr">index</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span>, <span class="hljs-attr">logNumber</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">logNumber</span> })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Next Page'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> }) <span class="hljs-comment">// 切换至页面二</span></li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfo</span>.<span class="hljs-title function_">pushPathByName</span>(<span class="hljs-string">'pageTwo'</span>, <span class="hljs-literal">null</span>);</li><li>          })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Back Page'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> }) <span class="hljs-comment">// 返回主页面</span></li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfo</span>.<span class="hljs-title function_">pop</span>();</li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }.<span class="hljs-title function_">title</span>(<span class="hljs-string">'pageOne'</span>)</li><li>    .<span class="hljs-title function_">onBackPressed</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfo</span>.<span class="hljs-title function_">pop</span>();</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>    })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span></li><li>struct pageTwoStack { <span class="hljs-comment">// 页面二</span></li><li>  <span class="hljs-meta">@Consume</span>(<span class="hljs-string">'pageInfo'</span>) <span class="hljs-attr">pageInfo</span>: <span class="hljs-title class_">NavPathStack</span>;</li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">2</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">number</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">logNumber</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">NavDestination</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">NavigationContentMsgStack</span>({ <span class="hljs-attr">message</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>, <span class="hljs-attr">index</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span>, <span class="hljs-attr">logNumber</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">logNumber</span> })</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">'BuilderNode处于冻结'</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">48</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">48</span> })</li><li>        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'Back Page'</span>, { <span class="hljs-attr">stateEffect</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">type</span>: <span class="hljs-title class_">ButtonType</span>.<span class="hljs-property">Capsule</span> }) <span class="hljs-comment">// 返回至页面一</span></li><li>          .<span class="hljs-title function_">width</span>(<span class="hljs-string">'80%'</span>)</li><li>          .<span class="hljs-title function_">height</span>(<span class="hljs-number">40</span>)</li><li>          .<span class="hljs-title function_">margin</span>(<span class="hljs-number">20</span>)</li><li>          .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {</li><li>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfo</span>.<span class="hljs-title function_">pop</span>();</li><li>          })</li><li>      }.<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)</li><li>    }.<span class="hljs-title function_">title</span>(<span class="hljs-string">'pageTwo'</span>)</li><li>    .<span class="hljs-title function_">onBackPressed</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageInfo</span>.<span class="hljs-title function_">pop</span>();</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>    })</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span>({ <span class="hljs-attr">freezeWhenInactive</span>: <span class="hljs-literal">true</span> }) <span class="hljs-comment">// 设置冻结策略为不活跃冻结</span></li><li>struct <span class="hljs-title class_">NavigationContentMsgStack</span> {</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">message</span>: <span class="hljs-built_in">number</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">index</span>: <span class="hljs-built_in">number</span>;</li><li>  <span class="hljs-meta">@Link</span> <span class="hljs-attr">logNumber</span>: <span class="hljs-built_in">number</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span> === <span class="hljs-number">1</span>) {</li><li>        <span class="hljs-title class_">NodeContainer</span>(textNodeController)</li><li>      }</li><li>    }</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-meta">@Component</span>({ <span class="hljs-attr">freezeWhenInactive</span>: <span class="hljs-literal">true</span> }) <span class="hljs-comment">// 设置冻结策略为不活跃冻结</span></li><li>struct <span class="hljs-title class_">TextBuilder</span> {</li><li>  <span class="hljs-meta">@Prop</span> <span class="hljs-meta">@Watch</span>(<span class="hljs-string">"info"</span>) <span class="hljs-attr">message</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;</li><li>
</li><li>  <span class="hljs-title function_">info</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`freeze-test TextBuilder message callback <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.message}</span>`</span>); <span class="hljs-comment">// 根据message内容变化来打印日志来判断是否冻结</span></li><li>  }</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Row</span>() {</li><li>      <span class="hljs-title class_">Column</span>() {</li><li>        <span class="hljs-title class_">Text</span>(<span class="hljs-string">`文本更新次数： <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.message}</span>`</span>)</li><li>          .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)</li><li>          .<span class="hljs-title function_">margin</span>({ <span class="hljs-attr">top</span>: <span class="hljs-number">48</span>, <span class="hljs-attr">bottom</span>: <span class="hljs-number">48</span> })</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div>     <p><span><img originheight="131" originwidth="336" src="https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251211115746.27202717838812842889810140073952:50001231000000:2800:0CFE128710577FAC100E03B485AA4399FD5D64C932BBE0838E68B04D7ACEE1F3.gif" width="336" height="131"></span></p>    </div>   </div>   <div></div></div>