<h1 _ngcontent-gie-c119="" class="doc-title ng-star-inserted" title="DataAbilityHelper"> DataAbilityHelper </h1>

<div _ngcontent-gie-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>可以通过<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-ability-featureability#featureabilityacquiredataabilityhelper7">acquireDataAbilityHelper</a>接口获取DataAbilityHelper对象。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"> <p>本模块首批接口从API version 7开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>  </div></div></div>  <div class="tiledSection"><h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="使用说明" device-type="phone,2in1,tablet,wearable,tv">使用说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="使用说明" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>使用前根据具体情况引入如下模块</p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ohos_data_ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.dataAbility'</span>;</li><li><span class="hljs-keyword">import</span> relationalStore <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.relationalStore'</span>;</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperopenfile" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.openFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperopenfile" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>openFile(uri: string, mode: string, callback: AsyncCallback&lt;number&gt;): void</p> <p>打开指定uri对应的文件，返回文件描述符。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.5.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待打开文件的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">mode</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示文件打开模式，可以设置为‘r’表示只读访问，‘w’表示只写访问，‘rw’表示读写访问等。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回文件描述符。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">let</span> mode = <span class="hljs-string">'rw'</span>;</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">openFile</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, mode, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`openFile fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`openFile success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperopenfile-1" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.openFile<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperopenfile-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>openFile(uri: string, mode: string): Promise&lt;number&gt;</p> <p>打开指定uri对应的文件，返回文件描述符。使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.6.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待打开文件的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">mode</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示文件打开模式，可以设置为‘r’表示只读访问，‘w’表示只写访问，‘rw’表示读写访问等。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;number&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回文件说明符。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">let</span> mode = <span class="hljs-string">'rw'</span>;</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">openFile</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, mode).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`openFile data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperondatachange" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.on('dataChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperondatachange" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>on(type: 'dataChange', uri: string, callback: AsyncCallback&lt;void&gt;): void</p> <p>注册观察者以监听uri指定数据的数据变化通知。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.7.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示监听操作类型，'dataChange'表示数据变化操作。</td> </tr> <tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待监听数据变化的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。当注册观察者以监听uri指定数据的数据变化通知成功，err为undefined，否则为错误对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">onChangeNotify</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onChangeNotify call back'</span>);</li><li>};</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">on</span>(</li><li>    <span class="hljs-string">'dataChange'</span>,</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span>,</li><li>    onChangeNotify</li><li>);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperoffdatachange" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.off('dataChange')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperoffdatachange" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>off(type: 'dataChange', uri: string, callback?: AsyncCallback&lt;void&gt;): void</p> <p>注销观察者以停止监听uri指定数据的数据变化通知。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.8.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">type</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示监听操作类型，'dataChange'表示数据变化操作。</td> </tr> <tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待取消监听数据变化的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">回调函数。当注销观察者以停止监听uri指定数据的数据变化通知成功，err为undefined，否则为错误对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">onChangeNotify</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'onChangeNotify call back'</span>);</li><li>};</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">off</span>(</li><li>    <span class="hljs-string">'dataChange'</span>,</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span>,</li><li>    onChangeNotify</li><li>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">off</span>(</li><li>    <span class="hljs-string">'dataChange'</span>,</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span>,</li><li>);</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelpergettype" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.getType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelpergettype" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getType(uri: string, callback: AsyncCallback&lt;string&gt;): void</p> <p>获取给定uri指向数据的媒体资源类型。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待获取数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回与uri指向数据匹配的媒体资源类型。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">getType</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getType fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`getType success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelpergettype-1" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.getType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelpergettype-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getType(uri: string): Promise&lt;string&gt;</p> <p>获取给定uri指向数据的媒体资源类型。使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待获取数据的uri。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;string&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回与uri指向数据匹配的媒体资源类型。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">getType</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getType data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelpergetfiletypes" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.getFileTypes<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelpergetfiletypes" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getFileTypes(uri: string, mimeTypeFilter: string, callback: AsyncCallback&lt;Array&lt;string&gt;&gt;): void</p> <p>获取支持的文件媒体资源类型。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.11.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待获取文件的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">mimeTypeFilter</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待获取文件的媒体资源类型。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;string&gt;&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回匹配的媒体资源类型数组。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">getFileTypes</span>( <span class="hljs-string">'dataability:///com.example.DataAbility'</span>, <span class="hljs-string">'image/*'</span>, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getFileTypes fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`getFileTypes success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelpergetfiletypes-1" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.getFileTypes<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelpergetfiletypes-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getFileTypes(uri: string, mimeTypeFilter: string): Promise&lt;Array&lt;string&gt;&gt;</p> <p>获取支持的文件媒体资源类型。使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.12.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待获取文件的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">mimeTypeFilter</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待获取文件的媒体资源类型。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.12.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;Array&lt;string&gt;&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回匹配的媒体资源类型数组。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">getFileTypes</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, <span class="hljs-string">'image/*'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getFileTypes data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelpernormalizeuri" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.normalizeUri<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelpernormalizeuri" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>normalizeUri(uri: string, callback: AsyncCallback&lt;string&gt;): void</p> <p>将引用数据功能的给定uri转换为规范化uri。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要规范化的uri对象。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，如果数据功能支持uri规范化，则返回规范化uri对象；否则返回null。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">normalizeUri</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`normalizeUri fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`normalizeUri success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelpernormalizeuri-1" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.normalizeUri<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelpernormalizeuri-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>normalizeUri(uri: string): Promise&lt;string&gt;</p> <p>将引用数据功能的给定uri转换为规范化uri。使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要规范化的uri对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.14.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;string&gt;</td> <td class="cellrowborder" width="50%">Promise对象，如果数据功能支持uri规范化，则返回规范化uri对象；否则返回null。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">normalizeUri</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`normalizeUri data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperdenormalizeuri" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.denormalizeUri<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperdenormalizeuri" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>denormalizeUri(uri: string, callback: AsyncCallback&lt;string&gt;): void</p> <p>将由normalizeUri（uri）生成的给定规范化uri转换为非规范化uri。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.15.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要反规范化的uri对象。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;string&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回反规范化uri对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">denormalizeUri</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`denormalizeUri fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`denormalizeUri success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperdenormalizeuri-1" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.denormalizeUri<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperdenormalizeuri-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>denormalizeUri(uri: string): Promise&lt;string&gt;</p> <p>将由normalizeUri（uri）生成的给定规范化uri转换为非规范化uri。使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.16.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要规范化的uri对象。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.16.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;string&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回反规范化uri对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">denormalizeUri</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`denormalizeUri data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelpernotifychange" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.notifyChange<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelpernotifychange" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>notifyChange(uri: string, callback: AsyncCallback&lt;void&gt;): void</p> <p>通知注册的观察者，uri指定数据的数据变化。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.17.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示数据变化的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数。当通知注册的观察者成功，err为undefined，否则为错误对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">notifyChange</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`notifyChange fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'notifyChange success'</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelpernotifychange-1" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.notifyChange<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelpernotifychange-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>notifyChange(uri: string): Promise&lt;void&gt;</p> <p>通知注册的观察者，uri指定数据的数据变化。使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.18.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示数据变化的uri。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.18.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;void&gt;</td> <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">notifyChange</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'================&gt;notifyChangeCallback================&gt;'</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperinsert" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.insert<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperinsert" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>insert(uri: string, valuesBucket: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-rdb#valuesbucket">rdb.ValuesBucket</a>, callback: AsyncCallback&lt;number&gt;): void</p> <p>将单个数据记录插入数据库。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.19.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要插入数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">valuesBucket</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-rdb#valuesbucket">rdb.ValuesBucket</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要插入的数据记录。如果此参数为空，将插入一个空行。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回插入数据记录的索引。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> rdb <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.rdb'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucket</span>: rdb.<span class="hljs-property">ValuesBucket</span> = {</li><li>    <span class="hljs-string">'name'</span>: <span class="hljs-string">'rose'</span>,</li><li>    <span class="hljs-string">'age'</span>: <span class="hljs-number">22</span>,</li><li>    <span class="hljs-string">'salary'</span>: <span class="hljs-number">200.5</span>,</li><li>    <span class="hljs-string">'blobType'</span>: <span class="hljs-string">'u8'</span>,</li><li>};</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">insert</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, valueBucket, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`insert fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`insert success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperinsert-1" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.insert<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperinsert-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>insert(uri: string, valuesBucket: <a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-rdb#valuesbucket">rdb.ValuesBucket</a>): Promise&lt;number&gt;</p> <p>将单个数据记录插入数据库。使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.20.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要插入数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">valuesBucket</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-rdb#valuesbucket">rdb.ValuesBucket</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要插入的数据记录。如果此参数为空，将插入一个空行。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.20.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;number&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回插入数据记录的索引。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> rdb <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.rdb'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">valueBucket</span>: rdb.<span class="hljs-property">ValuesBucket</span> = {</li><li>    <span class="hljs-string">'name'</span>: <span class="hljs-string">'rose1'</span>,</li><li>    <span class="hljs-string">'age'</span>: <span class="hljs-number">221</span>,</li><li>    <span class="hljs-string">'salary'</span>: <span class="hljs-number">20.5</span>,</li><li>    <span class="hljs-string">'blobType'</span>: <span class="hljs-string">'u8'</span>,</li><li>};</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">insert</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, valueBucket).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`insert data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperbatchinsert" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.batchInsert<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperbatchinsert" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>batchInsert(uri: string, valuesBuckets: Array&lt;rdb.ValuesBucket&gt;, callback: AsyncCallback&lt;number&gt;): void</p> <p>将多个数据记录插入数据库。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要插入数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">valuesBuckets</td> <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-rdb#valuesbucket">rdb.ValuesBucket</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要插入的数据记录数组。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回插入的数据记录数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> rdb <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.rdb'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">let</span> cars = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>({<span class="hljs-string">'name'</span>: <span class="hljs-string">'roe11'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">21</span>, <span class="hljs-string">'salary'</span>: <span class="hljs-number">20.5</span>, <span class="hljs-string">'blobType'</span>: <span class="hljs-string">'u8'</span>,} <span class="hljs-keyword">as</span> rdb.<span class="hljs-property">ValuesBucket</span>,</li><li>                     {<span class="hljs-string">'name'</span>: <span class="hljs-string">'roe12'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">21</span>, <span class="hljs-string">'salary'</span>: <span class="hljs-number">20.5</span>, <span class="hljs-string">'blobType'</span>: <span class="hljs-string">'u8'</span>,} <span class="hljs-keyword">as</span> rdb.<span class="hljs-property">ValuesBucket</span>,</li><li>                     {<span class="hljs-string">'name'</span>: <span class="hljs-string">'roe13'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">21</span>, <span class="hljs-string">'salary'</span>: <span class="hljs-number">20.5</span>, <span class="hljs-string">'blobType'</span>: <span class="hljs-string">'u8'</span>,} <span class="hljs-keyword">as</span> rdb.<span class="hljs-property">ValuesBucket</span>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">batchInsert</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, cars, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`batchInsert fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`batchInsert success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperbatchinsert-1" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.batchInsert<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperbatchinsert-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>batchInsert(uri: string, valuesBuckets: Array&lt;rdb.ValuesBucket&gt;): Promise&lt;number&gt;</p> <p>将多个数据记录插入数据库。使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.22.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要插入数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">valuesBuckets</td> <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-rdb#valuesbucket">rdb.ValuesBucket</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要插入的数据记录数组。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;number&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回插入的数据记录数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> rdb <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.rdb'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">let</span> cars = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>({<span class="hljs-string">'name'</span>: <span class="hljs-string">'roe11'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">21</span>, <span class="hljs-string">'salary'</span>: <span class="hljs-number">20.5</span>, <span class="hljs-string">'blobType'</span>: <span class="hljs-string">'u8'</span>,} <span class="hljs-keyword">as</span> rdb.<span class="hljs-property">ValuesBucket</span>,</li><li>                     {<span class="hljs-string">'name'</span>: <span class="hljs-string">'roe12'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">21</span>, <span class="hljs-string">'salary'</span>: <span class="hljs-number">20.5</span>, <span class="hljs-string">'blobType'</span>: <span class="hljs-string">'u8'</span>,} <span class="hljs-keyword">as</span> rdb.<span class="hljs-property">ValuesBucket</span>,</li><li>                     {<span class="hljs-string">'name'</span>: <span class="hljs-string">'roe13'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">21</span>, <span class="hljs-string">'salary'</span>: <span class="hljs-number">20.5</span>, <span class="hljs-string">'blobType'</span>: <span class="hljs-string">'u8'</span>,} <span class="hljs-keyword">as</span> rdb.<span class="hljs-property">ValuesBucket</span>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">batchInsert</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, cars).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`batchInsert data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperdelete" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.delete<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperdelete" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(uri: string, predicates: dataAbility.DataAbilityPredicates, callback: AsyncCallback&lt;number&gt;): void</p> <p>从数据库中删除一个或多个数据记录。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要删除数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">predicates</td> <td class="cellrowborder" width="25%">dataAbility.DataAbilityPredicates</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示筛选条件。当此参数为null时，应定义处理逻辑。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回已删除的数据记录数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> ohos_data_ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.dataAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">let</span> da = <span class="hljs-keyword">new</span> ohos_data_ability.<span class="hljs-title class_">DataAbilityPredicates</span>();</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, da, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`delete fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`delete success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperdelete-1" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.delete<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperdelete-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(uri: string, predicates?: dataAbility.DataAbilityPredicates): Promise&lt;number&gt;</p> <p>从数据库中删除一个或多个数据记录。使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.24.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要删除数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">predicates</td> <td class="cellrowborder" width="25%">dataAbility.DataAbilityPredicates</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">表示筛选条件。当此参数为null时，应定义处理逻辑。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.24.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;number&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回已删除的数据记录数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> ohos_data_ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.dataAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">let</span> da = <span class="hljs-keyword">new</span> ohos_data_ability.<span class="hljs-title class_">DataAbilityPredicates</span>();</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, da).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`delete data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperdelete-2" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.delete<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperdelete-2" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>delete(uri: string, callback: AsyncCallback&lt;number&gt;): void</p> <p>predicates筛选条件为空，自定义数据库删除数据记录的处理逻辑。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.25.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要删除数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回已删除的数据记录数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">delete</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`delete fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`delete success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperupdate" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.update<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperupdate" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>update(uri: string, valuesBucket: rdb.ValuesBucket, predicates: dataAbility.DataAbilityPredicates, callback: AsyncCallback&lt;number&gt;): void</p> <p>更新数据库中的数据记录。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.26.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要更新数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">valuesBucket</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-rdb#valuesbucket">rdb.ValuesBucket</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要更新的数据。</td> </tr> <tr><td class="cellrowborder" width="25%">predicates</td> <td class="cellrowborder" width="25%">dataAbility.DataAbilityPredicates</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示筛选条件。当此参数为null时，应定义处理逻辑。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回更新的数据记录数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> ohos_data_ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.dataAbility'</span>;</li><li><span class="hljs-keyword">import</span> rdb <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.rdb'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">va</span>: rdb.<span class="hljs-property">ValuesBucket</span> = {</li><li>    <span class="hljs-string">'name'</span>: <span class="hljs-string">'roe1'</span>,</li><li>    <span class="hljs-string">'age'</span>: <span class="hljs-number">21</span>,</li><li>    <span class="hljs-string">'salary'</span>: <span class="hljs-number">20.5</span>,</li><li>    <span class="hljs-string">'blobType'</span>: <span class="hljs-string">'u8'</span>,</li><li>};</li><li><span class="hljs-keyword">let</span> da = <span class="hljs-keyword">new</span> ohos_data_ability.<span class="hljs-title class_">DataAbilityPredicates</span>();</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">update</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, va, da, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`update fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`update success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperupdate-1" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.update<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperupdate-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>update(uri: string, valuesBucket: rdb.ValuesBucket, predicates?: dataAbility.DataAbilityPredicates): Promise&lt;number&gt;</p> <p>更新数据库中的数据记录。使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要更新数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">valuesBucket</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-rdb#valuesbucket">rdb.ValuesBucket</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要更新的数据。</td> </tr> <tr><td class="cellrowborder" width="25%">predicates</td> <td class="cellrowborder" width="25%">dataAbility.DataAbilityPredicates</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">表示筛选条件。当此参数为null时，应定义处理逻辑。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;number&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回更新的数据记录数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> ohos_data_ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.dataAbility'</span>;</li><li><span class="hljs-keyword">import</span> rdb <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.rdb'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">va</span>: rdb.<span class="hljs-property">ValuesBucket</span> = {</li><li>    <span class="hljs-string">'name'</span>: <span class="hljs-string">'roe1'</span>,</li><li>    <span class="hljs-string">'age'</span>: <span class="hljs-number">21</span>,</li><li>    <span class="hljs-string">'salary'</span>: <span class="hljs-number">20.5</span>,</li><li>    <span class="hljs-string">'blobType'</span>: <span class="hljs-string">'u8'</span>,</li><li>};</li><li><span class="hljs-keyword">let</span> da = <span class="hljs-keyword">new</span> ohos_data_ability.<span class="hljs-title class_">DataAbilityPredicates</span>();</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">update</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, va, da).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`update data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperupdate-2" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.update<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperupdate-2" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>update(uri: string, valuesBucket: rdb.ValuesBucket, callback: AsyncCallback&lt;number&gt;): void</p> <p>predicates筛选条件为空，自定义更新数据库的处理逻辑。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.28.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要更新数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">valuesBucket</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-data-rdb#valuesbucket">rdb.ValuesBucket</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要更新的数据。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;number&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回更新的数据记录数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> rdb <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.rdb'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">const</span> <span class="hljs-attr">va</span>: rdb.<span class="hljs-property">ValuesBucket</span> = {</li><li>    <span class="hljs-string">'name'</span>: <span class="hljs-string">'roe1'</span>,</li><li>    <span class="hljs-string">'age'</span>: <span class="hljs-number">21</span>,</li><li>    <span class="hljs-string">'salary'</span>: <span class="hljs-number">20.5</span>,</li><li>    <span class="hljs-string">'blobType'</span>: <span class="hljs-string">'u8'</span>,</li><li>};</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">update</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, va, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`update fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`update success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperquery" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.query<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperquery" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>query(uri: string, columns: Array&lt;string&gt;, predicates: dataAbility.DataAbilityPredicates, callback: AsyncCallback&lt;ResultSet&gt;): void</p> <p>查询数据库中的数据。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要查询数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">columns</td> <td class="cellrowborder" width="25%">Array&lt;string&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要查询的列。如果此参数为空，则查询所有列。</td> </tr> <tr><td class="cellrowborder" width="25%">predicates</td> <td class="cellrowborder" width="25%">dataAbility.DataAbilityPredicates</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示筛选条件。当此参数为null时，自定义查询数据库中数据的处理逻辑。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset">ResultSet</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回查询结果。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> ohos_data_ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.dataAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">let</span> cars=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-string">'value1'</span>, <span class="hljs-string">'value2'</span>, <span class="hljs-string">'value3'</span>, <span class="hljs-string">'value4'</span>);</li><li><span class="hljs-keyword">let</span> da = <span class="hljs-keyword">new</span> ohos_data_ability.<span class="hljs-title class_">DataAbilityPredicates</span>();</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">query</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, cars, da, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`query fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`query success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperquery-1" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.query<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperquery-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>query(uri: string, callback: AsyncCallback&lt;ResultSet&gt;): void</p> <p>查询数据库中的数据。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.30.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要查询数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset">ResultSet</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回查询结果。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">query</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`query fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`query success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperquery-2" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.query<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperquery-2" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>query(uri: string, columns: Array&lt;string&gt;, callback: AsyncCallback&lt;ResultSet&gt;): void</p> <p>查询数据库中的数据。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要查询数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">columns</td> <td class="cellrowborder" width="25%">Array&lt;string&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要查询的列。如果此参数为空，则查询所有列。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset">ResultSet</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回查询结果。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">let</span> cars = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-string">'value1'</span>, <span class="hljs-string">'value2'</span>, <span class="hljs-string">'value3'</span>, <span class="hljs-string">'value4'</span>);</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">query</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, cars, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`query fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`query success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperquery-3" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.query<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperquery-3" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>query(uri: string, predicates: dataAbility.DataAbilityPredicates, callback: AsyncCallback&lt;ResultSet&gt;): void</p> <p>查询数据库中的数据。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.32.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要查询数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">predicates</td> <td class="cellrowborder" width="25%">dataAbility.DataAbilityPredicates</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示筛选条件。当此参数为null时，自定义查询数据库中数据的处理逻辑。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset">ResultSet</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回查询结果。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> ohos_data_ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.dataAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">let</span> da = <span class="hljs-keyword">new</span> ohos_data_ability.<span class="hljs-title class_">DataAbilityPredicates</span>();</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">query</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, da, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`query fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`query success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperquery-4" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.query<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperquery-4" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>query(uri: string, columns?: Array&lt;string&gt;, predicates?: dataAbility.DataAbilityPredicates): Promise&lt;ResultSet&gt;</p> <p>查询数据库中的数据。使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.33.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示要查询数据的uri。</td> </tr> <tr><td class="cellrowborder" width="25%">columns</td> <td class="cellrowborder" width="25%">Array&lt;string&gt;</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">表示要查询的列。如果此参数为空，则查询所有列。</td> </tr> <tr><td class="cellrowborder" width="25%">predicates</td> <td class="cellrowborder" width="25%">dataAbility.DataAbilityPredicates</td> <td class="cellrowborder" width="25%">否</td> <td class="cellrowborder" width="25%">表示筛选条件。当此参数为null时，自定义查询数据库中数据的处理逻辑。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.33.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-resultset">ResultSet</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回查询结果。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> ohos_data_ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.data.dataAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-title class_">DAHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.DataAbility'</span></li><li>);</li><li><span class="hljs-keyword">let</span> cars = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-string">'value1'</span>, <span class="hljs-string">'value2'</span>, <span class="hljs-string">'value3'</span>, <span class="hljs-string">'value4'</span>);</li><li><span class="hljs-keyword">let</span> da = <span class="hljs-keyword">new</span> ohos_data_ability.<span class="hljs-title class_">DataAbilityPredicates</span>();</li><li><span class="hljs-title class_">DAHelper</span>.<span class="hljs-title function_">query</span>(<span class="hljs-string">'dataability:///com.example.DataAbility'</span>, cars, da).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`query data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelpercall" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.call<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelpercall" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>call(uri: string, method: string, arg: string, extras: PacMap, callback: AsyncCallback&lt;PacMap&gt;): void</p> <p>调用DataAbility的扩展接口。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.34.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待处理的DataAbility。例：'dataability:///com.example.xxx.xxxx'</td> </tr> <tr><td class="cellrowborder" width="25%">method</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示被调用的方法名。</td> </tr> <tr><td class="cellrowborder" width="25%">arg</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示需传入的参数。</td> </tr> <tr><td class="cellrowborder" width="25%">extras</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-ability-dataabilityhelper#pacmap">PacMap</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示扩展的键值对参数。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-ability-dataabilityhelper#pacmap">PacMap</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，返回扩展的键值对参数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataAbilityHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.jsapidemo.UserDataAbility'</span></li><li>);</li><li>dataAbilityHelper.<span class="hljs-title function_">call</span>(<span class="hljs-string">'dataability:///com.example.jsapidemo.UserDataAbility'</span>,</li><li>    <span class="hljs-string">'method'</span>, <span class="hljs-string">'arg'</span>, {<span class="hljs-string">'key1'</span>:<span class="hljs-string">'value1'</span>}, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`call fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`call success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelpercall-1" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.call<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelpercall-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>call(uri: string, method: string, arg: string, extras: PacMap): Promise&lt;PacMap&gt;</p> <p>调用DataAbility的扩展接口。使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.35.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待处理的DataAbility。例：'dataability:///com.example.xxx.xxxx'</td> </tr> <tr><td class="cellrowborder" width="25%">method</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示被调用的方法名。</td> </tr> <tr><td class="cellrowborder" width="25%">arg</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示需传入的参数。</td> </tr> <tr><td class="cellrowborder" width="25%">extras</td> <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-ability-dataabilityhelper#pacmap">PacMap</a></td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示扩展的键值对参数。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.35.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-ability-dataabilityhelper#pacmap">PacMap</a>&gt;</td> <td class="cellrowborder" width="50%">Promise对象，返回扩展的键值对参数。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataAbilityHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.jsapidemo.UserDataAbility'</span></li><li>);</li><li>dataAbilityHelper.<span class="hljs-title function_">call</span>(<span class="hljs-string">'dataability:///com.example.jsapidemo.UserDataAbility'</span>,</li><li>    <span class="hljs-string">'method'</span>, <span class="hljs-string">'arg'</span>, {<span class="hljs-string">'key1'</span>:<span class="hljs-string">'value1'</span>}).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'call success, data: ${data}'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'call failed, error: ${error}'</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperexecutebatch" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.executeBatch<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperexecutebatch" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>executeBatch(uri: string, operations: Array&lt;DataAbilityOperation&gt;, callback: AsyncCallback&lt;Array&lt;DataAbilityResult&gt;&gt;): void</p> <p>批量操作数据库中的数据。使用callback异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待处理的DataAbility。例：'dataability:///com.example.xxx.xxxx'。</td> </tr> <tr><td class="cellrowborder" width="25%">operations</td> <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-ability-dataabilityoperation">DataAbilityOperation</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示数据操作数组，其中可以包含对数据库的多个不同操作。</td> </tr> <tr><td class="cellrowborder" width="25%">callback</td> <td class="cellrowborder" width="25%">AsyncCallback&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-ability-dataabilityresult">DataAbilityResult</a>&gt;&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">回调函数，在DataAbilityResult数组中返回每个操作的结果。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li>
</li><li><span class="hljs-comment">// 根据DataAbilityOperation列表选择要对数据库做的操作</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">op</span>: <span class="hljs-title class_">Array</span>&lt;ability.<span class="hljs-property">DataAbilityOperation</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataAbilityHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.jsapidemo.UserDataAbility'</span></li><li>);</li><li>dataAbilityHelper.<span class="hljs-title function_">executeBatch</span>(<span class="hljs-string">'dataability:///com.example.jsapidemo.UserDataAbility'</span>, op, <span class="hljs-function">(<span class="hljs-params">error, data</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span> (error &amp;&amp; error.<span class="hljs-property">code</span> !== <span class="hljs-number">0</span>) {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`executeBatch fail, error: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(error)}</span>`</span>);</li><li>    } <span class="hljs-keyword">else</span> {</li><li>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`executeBatch success, data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(data)}</span>`</span>);</li><li>    }</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="dataabilityhelperexecutebatch-1" device-type="phone,2in1,tablet,wearable,tv">DataAbilityHelper.executeBatch<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="dataabilityhelperexecutebatch-1" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>executeBatch(uri: string, operations: Array&lt;DataAbilityOperation&gt;): Promise&lt;Array&lt;DataAbilityResult&gt;&gt;</p> <p>批量操作数据库中的数据。使用Promise异步回调。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p> <p><strong>模型约束</strong>：此接口仅可在FA模型下使用。</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="25%">参数名</th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="25%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="25%">必填</th> <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="25%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%">uri</td> <td class="cellrowborder" width="25%">string</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示待处理的DataAbility。例：'dataability:///com.example.xxx.xxxx'。</td> </tr> <tr><td class="cellrowborder" width="25%">operations</td> <td class="cellrowborder" width="25%">Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-ability-dataabilityoperation">DataAbilityOperation</a>&gt;</td> <td class="cellrowborder" width="25%">是</td> <td class="cellrowborder" width="25%">表示数据操作数组，其中可以包含对数据库的多个不同操作。</td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.1" width="50%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.2" width="50%">说明</th> </tr><tr><td class="cellrowborder" width="50%">Promise&lt;Array&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-ability-dataabilityresult">DataAbilityResult</a>&gt;&gt;</td> <td class="cellrowborder" width="50%">Promise对象，在DataAbilityResult数组中返回每个操作的结果。</td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-gie-c106="" class="highlight-div"><div _ngcontent-gie-c106="" class="highlight-div-header"><div _ngcontent-gie-c106="" class="highlight-div-header-left"><div _ngcontent-gie-c106="" class="handle-button expand-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-gie-c106="" class="highlight-div-header-right"><div _ngcontent-gie-c106="" class="handle-button ai-button"></div><div _ngcontent-gie-c106="" class="handle-button line-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-gie-c106="" class="handle-button theme-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-gie-c106="" class="handle-button copy-button"><div _ngcontent-gie-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-gie-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> ability <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.ability'</span>;</li><li><span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.ability.featureAbility'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.base'</span>;</li><li>
</li><li><span class="hljs-comment">// 根据DataAbilityOperation列表选择要对数据库做的操作</span></li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">op</span>: <span class="hljs-title class_">Array</span>&lt;ability.<span class="hljs-property">DataAbilityOperation</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">dataAbilityHelper</span>: ability.<span class="hljs-property">DataAbilityHelper</span> = featureAbility.<span class="hljs-title function_">acquireDataAbilityHelper</span>(</li><li>    <span class="hljs-string">'dataability:///com.example.jsapidemo.UserDataAbility'</span></li><li>);</li><li>dataAbilityHelper.<span class="hljs-title function_">executeBatch</span>(<span class="hljs-string">'dataability:///com.example.jsapidemo.UserDataAbility'</span>, op).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'executeBatch success, data: ${data}'</span>);</li><li>}).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'executeBatch failed, error: ${error}'</span>);</li><li>});</li></ol></pre></div></div> </div>  <div class="tiledSection"><h2 id="pacmap" device-type="phone,2in1,tablet,wearable,tv">PacMap<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="pacmap" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>用于存储数据的PacMap类型。</p> <p><strong>系统能力</strong>：SystemCapability.Ability.AbilityRuntime.FAModel</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.38.4.1.6.1.1" width="20%">名称</th> <th align="left" class="cellrowborder" id="mcps1.3.38.4.1.6.1.2" width="20%">类型</th> <th align="left" class="cellrowborder" id="mcps1.3.38.4.1.6.1.3" width="20%">只读</th> <th align="left" class="cellrowborder" id="mcps1.3.38.4.1.6.1.4" width="20%">可选</th> <th align="left" class="cellrowborder" id="mcps1.3.38.4.1.6.1.5" width="20%">说明</th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%">[key: string]</td> <td class="cellrowborder" width="20%">number | string | boolean | Array&lt;string | number | boolean&gt; | null</td> <td class="cellrowborder" width="20%">否</td> <td class="cellrowborder" width="20%">是</td> <td class="cellrowborder" width="20%">数据存储在键值对中。</td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>