<h1 _ngcontent-uex-c119="" class="doc-title ng-star-inserted" title="DlpAntiPeep（防窥保护）"> DlpAntiPeep（防窥保护） </h1>

<div _ngcontent-uex-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <p>本模块提供窥视状态相关接口，应用根据窥视状态保护用户隐私，如拉起系统级蒙层遮盖窗口，非机主状态（即有非机主以外的人在注视屏幕）下不进行个性化推荐、隐藏浏览记录、支付记录、收藏记录等敏感信息。</p>    <p><strong>起始版本：</strong>6.0.0(20)</p>    <div class="tiledSection">     <h2 id="section1968955020108">导入模块<i class="anchor-icon anchor-icon-link" anchorid="section1968955020108" tips="复制节点链接"></i></h2>          <div _ngcontent-uex-c106="" class="highlight-div"><div _ngcontent-uex-c106="" class="highlight-div-header"><div _ngcontent-uex-c106="" class="highlight-div-header-left"><div _ngcontent-uex-c106="" class="handle-button expand-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uex-c106="" class="highlight-div-header-right"><div _ngcontent-uex-c106="" class="handle-button ai-button"></div><div _ngcontent-uex-c106="" class="handle-button line-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uex-c106="" class="handle-button theme-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uex-c106="" class="handle-button copy-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uex-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dlpAntiPeep } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section11705111513" device-type="phone">DlpAntiPeepStatus<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11705111513" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>表示窥视状态的枚举。</p>     <p><strong>系统能力</strong>：SystemCapability.Security.DlpAntiPeep</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.1" width="25.252525252525253%">          <p>名称</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.2" width="7.960796079607961%">          <p>值</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.4.5.1.4.1.3" width="66.78667866786678%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25.252525252525253%">          <p>PASS</p></td>         <td class="cellrowborder" width="7.960796079607961%">          <p>0</p></td>         <td class="cellrowborder" width="66.78667866786678%">          <p>表示当前设备屏幕无人在窥视。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25.252525252525253%">          <p>HIDE</p></td>         <td class="cellrowborder" width="7.960796079607961%">          <p>1</p></td>         <td class="cellrowborder" width="66.78667866786678%">          <p>表示有除机主以外的人在窥视设备屏幕。</p></td>        </tr>             </tbody></table></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1817011732511" device-type="phone">isDlpAntiPeepSwitchOn<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1817011732511" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>isDlpAntiPeepSwitchOn(): Promise&lt;boolean&gt;</p>     <p>检查当前应用是否开启防窥保护。使用Promise异步回调。</p>     <p><strong>需要权限：</strong>ohos.permission.DLP_GET_HIDE_STATUS</p>     <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.DlpAntiPeep</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <p class="msonormal"><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.1" width="21.05%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.2" width="78.95%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="21.05%">          <p>Promise&lt;boolean&gt;</p></td>         <td class="cellrowborder" width="78.95%">          <p>Promise对象，返回当前应用是否开启了防窥保护，true代表开启，false代表未开启，默认值为false。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-dlpantipeep">ArkTS API错误码</a><strong>。</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.1" width="21.240000000000002%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.2" width="78.75999999999999%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>201</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>801</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Capability not supported. Function on can not work correctly due to limited device capabilities.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="21.240000000000002%">          <p>1020600001</p></td>         <td class="cellrowborder" width="78.75999999999999%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <div class="p">      <strong>示例：</strong>      <div _ngcontent-uex-c106="" class="highlight-div"><div _ngcontent-uex-c106="" class="highlight-div-header"><div _ngcontent-uex-c106="" class="highlight-div-header-left"><div _ngcontent-uex-c106="" class="handle-button expand-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uex-c106="" class="highlight-div-header-right"><div _ngcontent-uex-c106="" class="handle-button ai-button"></div><div _ngcontent-uex-c106="" class="handle-button line-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uex-c106="" class="handle-button theme-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uex-c106="" class="handle-button copy-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uex-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dlpAntiPeep } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> dlpAntiPeep.<span class="hljs-title function_">isDlpAntiPeepSwitchOn</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`isDlpAntiPeepSwitchOnsuccess.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`isDlpAntiPeepSwitchOnfailed.`</span>);</li><li>}</li></ol></pre></div></div>     </div>    </div>    <div class="tiledSection">     <h2 id="section1794633020274" device-type="phone">on("dlpAntiPeep")<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1794633020274" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>on(type: 'dlpAntiPeep', callback: Callback&lt;DlpAntiPeepStatus&gt;): void</p>     <p>订阅防窥保护通知。使用callback方式异步返回结果。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>请在满足<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/devicesecurity-dlpantipeep#section128161223011" target="_blank">开发前置条件</a>后再调用此接口，避免无法触发防窥回调。</p>      </div></div></div>     <p><strong>需要权限：</strong>ohos.permission.DLP_GET_HIDE_STATUS</p>     <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.DlpAntiPeep</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.1" width="14.64%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.2" width="23.05%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.3" width="11.31%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.9.1.5.1.4" width="51%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="14.64%">          <p>type</p></td>         <td class="cellrowborder" width="23.05%">          <p>'dlpAntiPeep'</p></td>         <td class="cellrowborder" width="11.31%">          <p>是</p></td>         <td class="cellrowborder" width="51%">          <p>表示需要订阅的事件'dlpAntiPeep'，取值为固定字符串'dlpAntiPeep'。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="14.64%">          <p>callback</p></td>         <td class="cellrowborder" width="23.05%">          <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-dlpantipeep-api#section11705111513">DlpAntiPeepStatus</a>&gt;</p></td>         <td class="cellrowborder" width="11.31%">          <p>是</p></td>         <td class="cellrowborder" width="51%">          <p>回调函数，返回调用结果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-dlpantipeep">ArkTS API错误码</a><strong>。</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.1" width="27.439999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.6.12.1.3.1.2" width="72.56%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>201</p></td>         <td class="cellrowborder" width="72.56%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>801</p></td>         <td class="cellrowborder" width="72.56%">          <p>Capability not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>1020600001</p></td>         <td class="cellrowborder" width="72.56%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uex-c106="" class="highlight-div"><div _ngcontent-uex-c106="" class="highlight-div-header"><div _ngcontent-uex-c106="" class="highlight-div-header-left"><div _ngcontent-uex-c106="" class="handle-button expand-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uex-c106="" class="highlight-div-header-right"><div _ngcontent-uex-c106="" class="handle-button ai-button"></div><div _ngcontent-uex-c106="" class="handle-button line-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uex-c106="" class="handle-button theme-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uex-c106="" class="handle-button copy-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uex-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dlpAntiPeep } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  dlpAntiPeep.<span class="hljs-title function_">on</span>(<span class="hljs-string">'dlpAntiPeep'</span>, <span class="hljs-function">(<span class="hljs-params">dlpAntiPeepStatus: dlpAntiPeep.DlpAntiPeepStatus</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`dlpAntiPeep.on success.`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`dlpAntiPeep.on failed.`</span>);</li><li>}</li></ol></pre></div></div>     <p></p>    </div>    <div class="tiledSection">     <h2 id="section142181149107" device-type="phone">off("dlpAntiPeep")<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section142181149107" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>off(type: 'dlpAntiPeep', callback?: Callback&lt;DlpAntiPeepStatus&gt;): void</p>     <p>解订阅防窥保护通知。使用callback方式异步返回结果。</p>     <p><strong>需要权限：</strong>ohos.permission.DLP_GET_HIDE_STATUS</p>     <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.DlpAntiPeep</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="14.64%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="23.05%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="11.379999999999999%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="50.93%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="14.64%">          <p>type</p></td>         <td class="cellrowborder" width="23.05%">          <p>'dlpAntiPeep'</p></td>         <td class="cellrowborder" width="11.379999999999999%">          <p>是</p></td>         <td class="cellrowborder" width="50.93%">          <p>表示需要解订阅的事件'dlpAntiPeep'，取值为固定字符串'dlpAntiPeep'。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="14.64%">          <p>callback</p></td>         <td class="cellrowborder" width="23.05%">          <p>Callback&lt;<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-dlpantipeep-api#section11705111513">DlpAntiPeepStatus</a>&gt;</p></td>         <td class="cellrowborder" width="11.379999999999999%">          <p>否</p></td>         <td class="cellrowborder" width="50.93%">          <p>用于接收防窥保护通知的回调函数。如果传入了callback，则取消callback的订阅，否则取消所有callback的订阅。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-dlpantipeep">ArkTS API错误码</a><strong>。</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.1" width="27.439999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.2" width="72.56%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>201</p></td>         <td class="cellrowborder" width="72.56%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>801</p></td>         <td class="cellrowborder" width="72.56%">          <p>Capability not supported.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>1020600001</p></td>         <td class="cellrowborder" width="72.56%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uex-c106="" class="highlight-div"><div _ngcontent-uex-c106="" class="highlight-div-header"><div _ngcontent-uex-c106="" class="highlight-div-header-left"><div _ngcontent-uex-c106="" class="handle-button expand-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uex-c106="" class="highlight-div-header-right"><div _ngcontent-uex-c106="" class="handle-button ai-button"></div><div _ngcontent-uex-c106="" class="handle-button line-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uex-c106="" class="handle-button theme-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uex-c106="" class="handle-button copy-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uex-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dlpAntiPeep } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  dlpAntiPeep.<span class="hljs-title function_">off</span>(<span class="hljs-string">'dlpAntiPeep'</span>, <span class="hljs-function">(<span class="hljs-params">dlpAntiPeepStatus: dlpAntiPeep.DlpAntiPeepStatus</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`dlpAntiPeep.off success.`</span>);</li><li>  });</li><li>} <span class="hljs-keyword">catch</span> (error) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`dlpAntiPeep.off failed.`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section11694411559" device-type="phone">getDlpAntiPeepInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11694411559" tips="复制节点链接"></i></h2>         <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div></div>    <p>getDlpAntiPeepInfo(): DlpAntiPeepStatus</p>    <p>获取当前应用的窥视状态。</p>    <p><strong>需要权限：</strong>ohos.permission.DLP_GET_HIDE_STATUS</p>    <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.DlpAntiPeep</p>    <p><strong>起始版本：</strong>6.0.0(20)</p>    <p><strong>返回值：</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.15.1.3.1.1" width="28.310000000000002%">         <p>类型</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.15.1.3.1.2" width="71.69%">         <p>说明</p></th>       </tr><tr>        <td class="cellrowborder" width="28.310000000000002%">         <p><a href="/consumer/cn/doc/harmonyos-references/devicesecurity-dlpantipeep-api#section11705111513">DlpAntiPeepStatus</a></p></td>        <td class="cellrowborder" width="71.69%">         <p>表示窥视状态。</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>错误码：</strong></p>    <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-dlpantipeep">ArkTS API错误码</a><strong>。</strong></p>    <div class="tablenoborder">     <div class="tbBox"><table class="tableClass2_t">                   <tbody><tr class="firstRow">        <th align="left" class="cellrowborder" id="mcps1.3.18.1.3.1.1" width="27.439999999999998%">         <p>错误码ID</p></th>        <th align="left" class="cellrowborder" id="mcps1.3.18.1.3.1.2" width="72.56%">         <p>错误信息</p></th>       </tr><tr>        <td class="cellrowborder" width="27.439999999999998%">         <p>201</p></td>        <td class="cellrowborder" width="72.56%">         <p>Permission denied.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.439999999999998%">         <p>801</p></td>        <td class="cellrowborder" width="72.56%">         <p>Capability not supported. Function getDlpHideInfo can not work correctly due to limited device capabilities.</p></td>       </tr>       <tr>        <td class="cellrowborder" width="27.439999999999998%">         <p>1020600001</p></td>        <td class="cellrowborder" width="72.56%">         <p>Internal error.</p></td>       </tr>           </tbody></table></div>    </div>    <p><strong>示例：</strong></p>    <div _ngcontent-uex-c106="" class="highlight-div"><div _ngcontent-uex-c106="" class="highlight-div-header"><div _ngcontent-uex-c106="" class="highlight-div-header-left"><div _ngcontent-uex-c106="" class="handle-button expand-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uex-c106="" class="highlight-div-header-right"><div _ngcontent-uex-c106="" class="handle-button ai-button"></div><div _ngcontent-uex-c106="" class="handle-button line-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uex-c106="" class="handle-button theme-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uex-c106="" class="handle-button copy-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uex-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dlpAntiPeep } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">let</span> dlpAntiPeepStatus = dlpAntiPeep.<span class="hljs-title function_">getDlpAntiPeepInfo</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`getDlpHideInfo success.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`getDlpHideInfo failed.`</span>);</li><li>}</li></ol></pre></div></div>    <div class="tiledSection">     <h2 id="section072510551405" device-type="phone">passDlpAntiPeepInfo<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section072510551405" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>passDlpAntiPeepInfo(): void</p>     <p>设置当前应用窥视状态为非窥视，后续<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-dlpantipeep-api#section1794633020274">on("dlpAntiPeep")</a>接口回调函数返回的窥视状态、<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-dlpantipeep-api#section11694411559">getDlpAntiPeepInfo</a>接口直接获取的窥视状态均为无人窥视屏幕。</p>     <p>若应用在生命周期内不再需要接受窥视状态，可直接调用<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-dlpantipeep-api#section142181149107">off("dlpAntiPeep")</a>接口解注册，若仍想接受放通后的非窥视状态，则可以调用该接口。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>请在满足<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/devicesecurity-dlpantipeep#section128161223011" target="_blank">开发前置条件</a>并调用<a href="/consumer/cn/doc/harmonyos-references/devicesecurity-dlpantipeep-api#section1794633020274">on("dlpAntiPeep")</a>接口注册后再调用该接口，可用于在应用注册的生命周期内将回调状态变更为非防窥状态，直到应用退出或设备锁屏。</p>      </div></div></div>     <p><strong>需要权限：</strong>ohos.permission.DLP_GET_HIDE_STATUS</p>     <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.DlpAntiPeep</p>     <p><strong>起始版本：</strong>6.0.0(20)</p>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-dlpantipeep">ArkTS API错误码</a><strong>。</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.1" width="27.439999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.21.11.1.3.1.2" width="72.56%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>201</p></td>         <td class="cellrowborder" width="72.56%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>801</p></td>         <td class="cellrowborder" width="72.56%">          <p>Capability not supported. Function passDlpHideInfo can not work correctly due to limited device capabilities.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>1020600001</p></td>         <td class="cellrowborder" width="72.56%">          <p>Internal error.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uex-c106="" class="highlight-div"><div _ngcontent-uex-c106="" class="highlight-div-header"><div _ngcontent-uex-c106="" class="highlight-div-header-left"><div _ngcontent-uex-c106="" class="handle-button expand-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uex-c106="" class="highlight-div-header-right"><div _ngcontent-uex-c106="" class="handle-button ai-button"></div><div _ngcontent-uex-c106="" class="handle-button line-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uex-c106="" class="handle-button theme-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uex-c106="" class="handle-button copy-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uex-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-javascript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dlpAntiPeep } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>;</li><li>
</li><li><span class="hljs-keyword">try</span> {</li><li>  dlpAntiPeep.<span class="hljs-title function_">passDlpAntiPeepInfo</span>();</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`passDlpAntiPeepInfo success.`</span>);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`passDlpAntiPeepInfo failed.`</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="section1053820547517" device-type="phone">setAntiPeepMaskLayer<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1053820547517" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span></div><p>setAntiPeepMaskLayer(windowId: number): Promise&lt;void&gt;</p>     <p>对指定窗口设置系统级蒙层，使用Promise异步回调。</p>     <div><div class="hw-editor-tip warn"><div class="title">注意</div><div class="content">       <p>该接口调用后会拉起蒙层，覆盖应用窗口，建议开发者在检测到窥视状态后调用一次即可，频繁调用可能对用户体验造成影响。</p>      </div></div></div>     <p><strong>需要权限：</strong>ohos.permission.DLP_GET_HIDE_STATUS</p>     <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.DlpAntiPeep</p>     <p><strong>起始版本：</strong>6.0.1(21)</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.5.1.1" width="14.64%">          <p>参数名</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.5.1.2" width="23.05%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.5.1.3" width="11.379999999999999%">          <p>必填</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.9.1.5.1.4" width="50.93%">          <p>说明</p></th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="14.64%">          <p>windowId</p></td>         <td class="cellrowborder" width="23.05%">          <p>number</p></td>         <td class="cellrowborder" width="11.379999999999999%">          <p>是</p></td>         <td class="cellrowborder" width="50.93%">          <p>应用需要覆盖保护的窗口ID，该参数取值范围为大于0的整数。</p></td>        </tr>             </tbody></table></div>     </div>     <p class="msonormal"><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.1" width="21.05%">          <p>类型</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.11.1.3.1.2" width="78.95%">          <p>说明</p></th>        </tr><tr>         <td class="cellrowborder" width="21.05%">          <p>Promise&lt;void&gt;</p></td>         <td class="cellrowborder" width="78.95%">          <p>Promise对象，无返回结果。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/devicesecurity-arktsapi-errcode-dlpantipeep">ArkTS API错误码</a><strong>。</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.14.1.3.1.1" width="27.439999999999998%">          <p>错误码ID</p></th>         <th align="left" class="cellrowborder" id="mcps1.3.22.14.1.3.1.2" width="72.56%">          <p>错误信息</p></th>        </tr><tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>201</p></td>         <td class="cellrowborder" width="72.56%">          <p>Permission denied.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>801</p></td>         <td class="cellrowborder" width="72.56%">          <p>Capability not supported.function setAntiPeepMaskLayer can not work correctly due to limited device capabilities.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>1020600001</p></td>         <td class="cellrowborder" width="72.56%">          <p>Internal error.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>1020600002</p></td>         <td class="cellrowborder" width="72.56%">          <p>The antipeep function is not enabled.</p></td>        </tr>        <tr>         <td class="cellrowborder" width="27.439999999999998%">          <p>1020600003</p></td>         <td class="cellrowborder" width="72.56%">          <p>The protected application is not displayed on the screen.</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-uex-c106="" class="highlight-div"><div _ngcontent-uex-c106="" class="highlight-div-header"><div _ngcontent-uex-c106="" class="highlight-div-header-left"><div _ngcontent-uex-c106="" class="handle-button expand-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uex-c106="" class="highlight-div-header-right"><div _ngcontent-uex-c106="" class="handle-button ai-button"></div><div _ngcontent-uex-c106="" class="handle-button line-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uex-c106="" class="handle-button theme-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uex-c106="" class="handle-button copy-button"><div _ngcontent-uex-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uex-c106="" class="highlight-scroll-div"><pre class="screen prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { dlpAntiPeep } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.DeviceSecurityKit'</span>; </li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AbilityKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-variable language_">window</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkUI'</span>;</li><li>
</li><li><span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">windowClass</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">Window</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  windowClass = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getLastWindow</span>(context);</li><li>} <span class="hljs-keyword">catch</span>(err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'error'</span>, err.<span class="hljs-property">code</span>, err.<span class="hljs-property">message</span>);</li><li>  <span class="hljs-keyword">return</span>;</li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">windowId</span>: <span class="hljs-built_in">number</span>;</li><li><span class="hljs-keyword">try</span> {</li><li>  windowId = windowClass.<span class="hljs-title function_">getWindowProperties</span>().<span class="hljs-property">id</span>;</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to get window properties:'</span>, err);</li><li>  <span class="hljs-keyword">return</span>;</li><li>}</li><li><span class="hljs-keyword">try</span> {</li><li>  <span class="hljs-keyword">await</span> dlpAntiPeep.<span class="hljs-title function_">setAntiPeepMaskLayer</span>(windowId);</li><li>} <span class="hljs-keyword">catch</span> (err) {</li><li>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`setAntiPeepMaskLayer failed. error code is <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(err)}</span>`</span>);</li><li>}</li></ol></pre></div></div>    </div>   </div>   <div></div></div>