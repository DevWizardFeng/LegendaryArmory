<h1 _ngcontent-qjy-c119="" class="doc-title ng-star-inserted" title="FIDO"> FIDO </h1>

<div _ngcontent-qjy-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>本模块提供FIDO UAF本地免密认证能力，通过生物特征代替密码，支持免密登录，免密支付等业务场景，包括:</p> <p>1、开通FIDO免密身份认证功能</p> <p>2、使用FIDO免密身份认证功能</p> <p>3、关闭FIDO免密身份认证功能</p> <p>支持的设备类型为：手机, 2in1, 平板</p> <p><strong>起始版本: </strong>4.1.0(11)</p> <div class="tiledSection"><h2 id="section1317192033519" device-type="phone,2in1,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1317192033519" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><div _ngcontent-qjy-c106="" class="highlight-div"><div _ngcontent-qjy-c106="" class="highlight-div-header"><div _ngcontent-qjy-c106="" class="highlight-div-header-left"><div _ngcontent-qjy-c106="" class="handle-button expand-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qjy-c106="" class="highlight-div-header-right"><div _ngcontent-qjy-c106="" class="handle-button ai-button"></div><div _ngcontent-qjy-c106="" class="handle-button line-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qjy-c106="" class="handle-button theme-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qjy-c106="" class="handle-button copy-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qjy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.BasicServicesKit'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class=""><span class="hljs-title class_">UIContext</span> </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@ohos.arkui.UIContext'</span></span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">common </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.AbilityKit'</span></span><span class="">;</span></li><li><span class="hljs-keyword">import</span> <span class="">{ </span><span class="">fido </span><span class="">} </span><span class="hljs-keyword">from</span> <span class=""><span class="hljs-string">'@kit.OnlineAuthenticationKit'</span></span><span class="">;</span></li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section1081123302517" device-type="phone,2in1,tablet">ChannelBinding<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1081123302517" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>传输通道的绑定参数，用于验证通道的安全性。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.1" width="18.37%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.2" width="9.08%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.3" width="8.18%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.4" width="7.6%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.6.1.5" width="56.769999999999996%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="18.37%"><p>serverEndPoint</p> </td> <td class="cellrowborder" width="9.08%"><p>string</p> </td> <td class="cellrowborder" width="8.18%"><p>否</p> </td> <td class="cellrowborder" width="7.6%"><p>是</p> </td> <td class="cellrowborder" width="56.769999999999996%"><p>TLS服务器证书的base64url编码哈希值。长度由不同三方服务器限制，默认值为空。</p> </td> </tr> <tr><td class="cellrowborder" width="18.37%"><p>tlsServerCertificate</p> </td> <td class="cellrowborder" width="9.08%"><p>string</p> </td> <td class="cellrowborder" width="8.18%"><p>否</p> </td> <td class="cellrowborder" width="7.6%"><p>是</p> </td> <td class="cellrowborder" width="56.769999999999996%"><p>如果FIDO UAF客户端使用了TLS服务器证书，则该证书必须设置为base64url、DER编码的格式。若不涉及，不可设置该字段。长度由不同三方服务器限制，默认值为空。</p> </td> </tr> <tr><td class="cellrowborder" width="18.37%"><p>tlsUnique</p> </td> <td class="cellrowborder" width="9.08%"><p>string</p> </td> <td class="cellrowborder" width="8.18%"><p>否</p> </td> <td class="cellrowborder" width="7.6%"><p>是</p> </td> <td class="cellrowborder" width="56.769999999999996%"><p>TLS通道Finished结构的base64url编码。若不涉及，不可设置该字段。长度由不同三方服务器限制，默认值为空。</p> </td> </tr> <tr><td class="cellrowborder" width="18.37%"><p>cidPubkey</p> </td> <td class="cellrowborder" width="9.08%"><p>string</p> </td> <td class="cellrowborder" width="8.18%"><p>否</p> </td> <td class="cellrowborder" width="7.6%"><p>是</p> </td> <td class="cellrowborder" width="56.769999999999996%"><p>base64url编码的序列化使用UTF-8编码的JwkKey结构。如果客户端TLS堆栈不向处理实体提供TLS ChannelID信息，则不可设置该字段。如果客户端TLS堆栈支持TLS ChannelID信息，但TLS (web)服务器尚未发出信号，则必须设置为“未使用”。长度由不同三方服务器限制，默认值为空。</p> </td> </tr> <tr><td class="cellrowborder" width="18.37%"><p>tokenBinding</p> </td> <td class="cellrowborder" width="9.08%"><p>string</p> </td> <td class="cellrowborder" width="8.18%"><p>否</p> </td> <td class="cellrowborder" width="7.6%"><p>是</p> </td> <td class="cellrowborder" width="56.769999999999996%"><p>base64url编码的序列化使用UTF-8编码的TokenBindingID结构。如果客户端TLS堆栈不向处理实体提供令牌绑定ID信息，则不可设置该字段。如果客户端TLS堆栈支持令牌绑定ID信息，但TLS (web)服务器尚未发出信号，则必须设置为“未使用”。长度由不同三方服务器限制，默认值为空。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section2134351143710" device-type="phone,2in1,tablet">UAFMessage<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section2134351143710" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>UAF字典对象，包含原始的UAF协议消息和附加数据。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.1" width="20%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.2" width="19.98%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.3" width="17.05%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.4" width="12.27%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.6.1.6.1.5" width="30.7%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>uafProtocolMessage</p> </td> <td class="cellrowborder" width="19.98%"><p>string</p> </td> <td class="cellrowborder" width="17.05%"><p>否</p> </td> <td class="cellrowborder" width="12.27%"><p>否</p> </td> <td class="cellrowborder" width="30.7%"><p>UAF协议消息。长度由不同三方服务器限制。注意其中若有challenge、transaction等字段，那么含这些字段字段在内的TA请求报文不可超过2048字节。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>additionalData</p> </td> <td class="cellrowborder" width="19.98%"><p>string</p> </td> <td class="cellrowborder" width="17.05%"><p>否</p> </td> <td class="cellrowborder" width="12.27%"><p>是</p> </td> <td class="cellrowborder" width="30.7%"><p>UAF附加数据。长度由不同三方服务器限制，默认值为空。该字段格式为json string，具体格式{"key": value}。</p> <ul><li>当key为isGuideToSetBiometrics，表示用户未设置生物特征的情况下，使用系统跳转能力引导用户去设置生物特征。value取值为true、false。<ul><li>true：使用系统跳转能力</li><li>false：不使用系统跳转能力</li></ul> <p>当不传入isGuideToSetBiometrics，则表示不使用系统跳转能力。</p> <p><strong>起始版本：</strong>6.0.0(20)</p> </li><li>当key为navigationButtonText，表示支持开发者自定义认证方式，在用户生物认证失败并点击切换认证方式按钮时，提示调用者拉起自定义认证界面。<ul><li>当value为任意文本时，表示开启自定义认证功能，此时传入的文本为切换认证方式按钮显示的文本。</li></ul> <p>当不传入navigationButtonText，则表示不使用自定义认证功能。</p> <p><strong>起始版本：</strong>6.0.1(21)</p> </li></ul> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1293122884415" device-type="phone,2in1,tablet">Version<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1293122884415" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>UAF协议版本信息。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.FIDO</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.1" width="19.98%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.2" width="20%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.3" width="20.02%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.4" width="20%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.6.1.6.1.5" width="20%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.98%"><p>major</p> </td> <td class="cellrowborder" width="20%"><p>number</p> </td> <td class="cellrowborder" width="20.02%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>主要版本，默认值为1。</p> </td> </tr> <tr><td class="cellrowborder" width="19.98%"><p>minor</p> </td> <td class="cellrowborder" width="20%"><p>number</p> </td> <td class="cellrowborder" width="20.02%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>次要版本，默认值为0。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section1237320913497" device-type="phone,2in1,tablet">RgbPaletteEntry<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1237320913497" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>RGB三元调色板。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.6.1.6.1.1" width="20%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.6.1.2" width="19.98%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.6.1.3" width="20.02%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.6.1.4" width="20%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.6.1.5" width="20%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>r</p> </td> <td class="cellrowborder" width="19.98%"><p>number</p> </td> <td class="cellrowborder" width="20.02%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>红色样本值，取值为0~255。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>g</p> </td> <td class="cellrowborder" width="19.98%"><p>number</p> </td> <td class="cellrowborder" width="20.02%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>绿色样本值，取值为0~255。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>b</p> </td> <td class="cellrowborder" width="19.98%"><p>number</p> </td> <td class="cellrowborder" width="20.02%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>蓝色样本值，取值为0~255。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section114741413537" device-type="phone,2in1,tablet">DisplayPNGCharacteristicsDescriptor<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section114741413537" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>PNG图片特征对象。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.1" width="20%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.2" width="22.5%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.3" width="17.5%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.4" width="20%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.6.1.5" width="20%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="20%"><p>width</p> </td> <td class="cellrowborder" width="22.5%"><p>number</p> </td> <td class="cellrowborder" width="17.5%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>图片宽度（dpi），长度满足uint32。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>height</p> </td> <td class="cellrowborder" width="22.5%"><p>number</p> </td> <td class="cellrowborder" width="17.5%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>图片高度（dpi），长度满足uint32。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>bitDepth</p> </td> <td class="cellrowborder" width="22.5%"><p>number</p> </td> <td class="cellrowborder" width="17.5%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>位深（bit），长度满足uint8。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>colorType</p> </td> <td class="cellrowborder" width="22.5%"><p>number</p> </td> <td class="cellrowborder" width="17.5%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>颜色类型。0代表灰度，2代表真彩色，3代表索引颜色，4代表使用alpha的灰度，6代表使用alpha的真彩色。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>compression</p> </td> <td class="cellrowborder" width="22.5%"><p>number</p> </td> <td class="cellrowborder" width="17.5%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>仅定义PNG压缩方法0（zlib），压缩方法的其他值保留。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>filter</p> </td> <td class="cellrowborder" width="22.5%"><p>number</p> </td> <td class="cellrowborder" width="17.5%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>过滤方法。0代表None,1代表Sub，2代表Up，3代表Average，4代表Paeth。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>interlace</p> </td> <td class="cellrowborder" width="22.5%"><p>number</p> </td> <td class="cellrowborder" width="17.5%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>交错方法。0代表空行方法，1代表Adam7方式。</p> </td> </tr> <tr><td class="cellrowborder" width="20%"><p>plte</p> </td> <td class="cellrowborder" width="22.5%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-fido-api#section1237320913497">RgbPaletteEntry</a>&gt;</p> </td> <td class="cellrowborder" width="17.5%"><p>否</p> </td> <td class="cellrowborder" width="20%"><p>是</p> </td> <td class="cellrowborder" width="20%"><p>调色板条目。默认值为空。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section14811192415918" device-type="phone,2in1,tablet">Authenticator<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section14811192415918" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>认证器对象，描述了一个可用认证器的相关信息。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.6.1.6.1.1" width="25.72%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.6.1.2" width="30.03%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.6.1.3" width="7.720000000000001%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.6.1.4" width="6.7%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.6.1.5" width="29.830000000000002%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.72%"><p>title</p> </td> <td class="cellrowborder" width="30.03%"><p>string</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>认证器名，长度由不同三方服务器限制。</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>aaid</p> </td> <td class="cellrowborder" width="30.03%"><p>string</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>认证器唯一标识，长度由不同三方服务器限制，CFCA为9个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>description</p> </td> <td class="cellrowborder" width="30.03%"><p>string</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>认证器描述，长度由不同三方服务器限制。</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>supportedUAFVersions</p> </td> <td class="cellrowborder" width="30.03%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-fido-api#section1293122884415">Version</a>&gt;</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>认证器支持的UAF协议版本</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>assertionScheme</p> </td> <td class="cellrowborder" width="30.03%"><p>string</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>认证断言编码方式，长度由不同三方服务器限制，CFCA为8个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>authenticationAlgorithm</p> </td> <td class="cellrowborder" width="30.03%"><p>number</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>支持的鉴别算法</p> <p>目前支持ALG_SIGN_SECP256R1_ECDSA_SHA256_RAW算法（0x0001）</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>attestationTypes</p> </td> <td class="cellrowborder" width="30.03%"><p>Array&lt;number&gt;</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>支持的鉴别类型列表</p> <p>目前支持TAG_ATTESTATION_BASIC_FULL(0x3E07)</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>userVerification</p> </td> <td class="cellrowborder" width="30.03%"><p>number</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>用户认证方式</p> <p>2：指纹</p> <p>16：人脸</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>keyProtection</p> </td> <td class="cellrowborder" width="30.03%"><p>number</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>秘钥保护类型</p> <p>目前支持KEY_PROTECTION_TEE 0x0004</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>matcherProtection</p> </td> <td class="cellrowborder" width="30.03%"><p>number</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>认证设备保护类型</p> <p>目前支持MATCHER_PROTECTION_TEE 0x0002</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>attachmentHint</p> </td> <td class="cellrowborder" width="30.03%"><p>number</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>认证设备连接方式</p> <p>目前支持ATTACHMENT_HINT_INTERNAL 0x0001</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>isSecondFactorOnly</p> </td> <td class="cellrowborder" width="30.03%"><p>boolean</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>认证器是否仅能作为第二因子使用</p> <p>目前不支持，返回值为false</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>tcDisplay</p> </td> <td class="cellrowborder" width="30.03%"><p>number</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>交易确认显示方式</p> <p>目前支持TRANSACTION_CONFIRMATION_DISPLAY_ANY 0x0001</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>tcDisplayContentType</p> </td> <td class="cellrowborder" width="30.03%"><p>string</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>交易确认显示支持的MIME内容类型</p> <p>目前支持text/plain</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>tcDisplayPNGCharacteristics</p> </td> <td class="cellrowborder" width="30.03%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-fido-api#section114741413537">DisplayPNGCharacteristicsDescriptor</a>&gt;</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>交易确认显示支持的PNG集合</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>icon</p> </td> <td class="cellrowborder" width="30.03%"><p>string</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>认证器的PNG图标。长度由不同PNG图片Base64编码长度限制。</p> </td> </tr> <tr><td class="cellrowborder" width="25.72%"><p>supportedExtensionIDs</p> </td> <td class="cellrowborder" width="30.03%"><p>Array&lt;string&gt;</p> </td> <td class="cellrowborder" width="7.720000000000001%"><p>是</p> </td> <td class="cellrowborder" width="6.7%"><p>否</p> </td> <td class="cellrowborder" width="29.830000000000002%"><p>UAF协议扩展标识符的支持列表。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section11682103284015" device-type="phone,2in1,tablet">DiscoveryData<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section11682103284015" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>FIDO UAF客户端软件状态和可用的认证器数据。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力</strong><strong>：</strong>SystemCapability.Security.FIDO</p> <p><strong>起始版本：</strong>4.1.0(11)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.6.1.6.1.1" width="25.019999999999996%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.6.1.2" width="23.630000000000003%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.6.1.3" width="8.43%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.6.1.4" width="8.24%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.6.1.5" width="34.68%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25.019999999999996%"><p>supportedUAFVersions</p> </td> <td class="cellrowborder" width="23.630000000000003%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-fido-api#section1293122884415">Version</a>&gt;</p> </td> <td class="cellrowborder" width="8.43%"><p>否</p> </td> <td class="cellrowborder" width="8.24%"><p>否</p> </td> <td class="cellrowborder" width="34.68%"><p>客户端支持的FIDO UAF协议版本列表</p> </td> </tr> <tr><td class="cellrowborder" width="25.019999999999996%"><p>clientVendor</p> </td> <td class="cellrowborder" width="23.630000000000003%"><p>string</p> </td> <td class="cellrowborder" width="8.43%"><p>否</p> </td> <td class="cellrowborder" width="8.24%"><p>否</p> </td> <td class="cellrowborder" width="34.68%"><p>UAF客户端的供应商，CFCA长度为4个字符。</p> </td> </tr> <tr><td class="cellrowborder" width="25.019999999999996%"><p>clientVersion</p> </td> <td class="cellrowborder" width="23.630000000000003%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-fido-api#section1293122884415">Version</a></p> </td> <td class="cellrowborder" width="8.43%"><p>否</p> </td> <td class="cellrowborder" width="8.24%"><p>否</p> </td> <td class="cellrowborder" width="34.68%"><p>FIDO UAF客户端版本</p> </td> </tr> <tr><td class="cellrowborder" width="25.019999999999996%"><p>availableAuthenticators</p> </td> <td class="cellrowborder" width="23.630000000000003%"><p>Array&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-fido-api#section14811192415918">Authenticator</a>&gt;</p> </td> <td class="cellrowborder" width="8.43%"><p>否</p> </td> <td class="cellrowborder" width="8.24%"><p>否</p> </td> <td class="cellrowborder" width="34.68%"><p>包含描述可使用UAF认证器的认证器结构数</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section144826162913" device-type="phone,2in1,tablet">discover<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section144826162913" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>discover(context: common.Context): Promise&lt;DiscoveryData&gt;</p> <p>发现设备的认证能力，返回当前设备软件支持的认证器数据。使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.FIDO</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.2" width="16.45%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.3" width="23.59%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.5.1.4" width="40.760000000000005%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>context</p> </td> <td class="cellrowborder" width="16.45%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="23.59%"><p>是</p> </td> <td class="cellrowborder" width="40.760000000000005%"><p>ability的context</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-fido-api#section11682103284015">DiscoveryData</a>&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象。返回包含当前设备软件支持的认证器数据的对象</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码:</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-fido">FIDO免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1005900015</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1005900016</p> </td> <td class="cellrowborder" width="50%"><p>Unknown error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>调用示例: </strong><div _ngcontent-qjy-c106="" class="highlight-div"><div _ngcontent-qjy-c106="" class="highlight-div-header"><div _ngcontent-qjy-c106="" class="highlight-div-header-left"><div _ngcontent-qjy-c106="" class="handle-button expand-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qjy-c106="" class="highlight-div-header-right"><div _ngcontent-qjy-c106="" class="handle-button ai-button"></div><div _ngcontent-qjy-c106="" class="handle-button line-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qjy-c106="" class="handle-button theme-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qjy-c106="" class="handle-button copy-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qjy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li>  <span class=""><span class="hljs-comment">// ...</span></span></li><li><span class="">  <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">使用</span></span><span class=""><span class="hljs-comment">uiContext</span></span><span class=""><span class="hljs-comment">需要获取页面</span></span><span class=""><span class="hljs-comment">UIAbility</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">Context</span></span><span class=""><span class="hljs-comment">，一个页面获取一次即可</span></span></li><li>  <span class="hljs-keyword">let</span> <span class="">uiContext </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">UIContext</span></span><span class="">()</span><span class="">;</span></li><li>  <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">context</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Context</span> </span><span class="">= </span><span class="">uiContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getHostContext</span></span><span class="">() </span><span class="hljs-keyword">as</span> <span class="">common</span><span class="">.</span><span class=""><span class="hljs-property">UIAbilityContext</span></span><span class="">;</span></li><li>  <span class="hljs-keyword">try</span> <span class="">{</span></li><li>    <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">discoverData</span></span><span class="">: </span><span class="">fido</span><span class="">.</span><span class=""><span class="hljs-property">DiscoveryData</span> </span><span class="">= </span><span class="hljs-keyword">await</span> <span class="">fido</span><span class="">.</span><span class=""><span class="hljs-title function_">discover</span></span><span class="">(</span><span class="">context</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"Succeeded in doing discover, discoverData:"</span></span><span class="">, </span><span class="">discoverData</span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-comment">// ...</span></span></li><li>  <span class="">} </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) </span><span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">err</span></span><span class="">: </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">= </span><span class="">error </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">BusinessError</span></span><span class="">;</span></li><li>    <span class=""><span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`Failed to call discover. Code is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, message is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>    <span class=""><span class="hljs-comment">// ...</span></span></li><li>  <span class="">}</span></li><li>  <span class=""><span class="hljs-comment">// ...</span></span></li></ol></pre></div></div> </div> </div> <p></p> <div class="tiledSection"><h2 id="section86041155123616" device-type="phone,2in1,tablet">checkPolicy<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section86041155123616" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>checkPolicy(context: common.Context, uafRequest: UAFMessage): Promise&lt;void&gt;</p> <p>检测用户策略的开启状态。使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.FIDO</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.2" width="16.45%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.3" width="23.59%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.8.1.5.1.4" width="40.760000000000005%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>context</p> </td> <td class="cellrowborder" width="16.45%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="23.59%"><p>是</p> </td> <td class="cellrowborder" width="40.760000000000005%"><p>ability的context</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>uafRequest</p> </td> <td class="cellrowborder" width="16.45%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-fido-api#section2134351143710">UAFMessage</a></p> </td> <td class="cellrowborder" width="23.59%"><p>是</p> </td> <td class="cellrowborder" width="40.760000000000005%"><p>需要检测的策略和操作</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-fido">FIDO免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.17.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.17.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1005900005</p> </td> <td class="cellrowborder" width="50%"><p>No authenticator matching the authenticator policy specified is available.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1005900006</p> </td> <td class="cellrowborder" width="50%"><p>A violation of the UAF protocol occurred.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1005900015</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1005900016</p> </td> <td class="cellrowborder" width="50%"><p>Unknown error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>调用示例: </strong><div _ngcontent-qjy-c106="" class="highlight-div"><div _ngcontent-qjy-c106="" class="highlight-div-header"><div _ngcontent-qjy-c106="" class="highlight-div-header-left"><div _ngcontent-qjy-c106="" class="handle-button expand-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qjy-c106="" class="highlight-div-header-right"><div _ngcontent-qjy-c106="" class="handle-button ai-button"></div><div _ngcontent-qjy-c106="" class="handle-button line-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qjy-c106="" class="handle-button theme-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qjy-c106="" class="handle-button copy-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qjy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="">  <span class="hljs-comment">// ...</span></span></li><li><span class="">  <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">使用</span></span><span class=""><span class="hljs-comment">uiContext</span></span><span class=""><span class="hljs-comment">需要获取页面</span></span><span class=""><span class="hljs-comment">UIAbility</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">Context</span></span><span class=""><span class="hljs-comment">，一个页面获取一次即可</span></span></li><li>  <span class="hljs-keyword">let</span> <span class="">uiContext </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">UIContext</span></span><span class="">()</span><span class="">;</span></li><li>  <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">context</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Context</span> </span><span class="">= </span><span class="">uiContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getHostContext</span></span><span class="">() </span><span class="hljs-keyword">as</span> <span class="">common</span><span class="">.</span><span class=""><span class="hljs-property">UIAbilityContext</span></span><span class="">;</span></li><li><span class="">  <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">从</span></span><span class=""><span class="hljs-comment">FIDO</span></span><span class=""><span class="hljs-comment">服务器获取报文</span></span><span class=""><span class="hljs-comment">message</span></span></li><li>  <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">uafMessage</span></span><span class="">: </span><span class="">fido</span><span class="">.</span><span class=""><span class="hljs-property">UAFMessage</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class="">  <span class="hljs-attr">uafProtocolMessage</span></span><span class="">: </span><span class=""><span class="hljs-string">""</span></span><span class="">, </span><span class=""><span class="hljs-comment">// uafProtocolMessage</span></span><span class=""><span class="hljs-comment">为从</span></span><span class=""><span class="hljs-comment">FIDO</span></span><span class=""><span class="hljs-comment">服务器获取的报文</span></span></li><li>  <span class="">  <span class="hljs-attr">additionalData</span></span><span class="">: </span><span class=""><span class="hljs-string">""</span></span></li><li><span class="">  }</span><span class="">;</span></li><li>  <span class="hljs-keyword">try</span> <span class="">{</span></li><li>    <span class="hljs-keyword">await</span> <span class="">fido</span><span class="">.</span><span class=""><span class="hljs-title function_">checkPolicy</span></span><span class="">(</span><span class="">context</span><span class="">, </span><span class="">uafMessage</span><span class="">)</span><span class="">;</span></li><li>  <span class="">  <span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"Succeeded in doing checkPolicy."</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">  <span class="hljs-comment">// ...</span></span></li><li><span class="">  } </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) </span><span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">err</span></span><span class="">: </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">= </span><span class="">error </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">BusinessError</span></span><span class="">;</span></li><li>  <span class="">  <span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`Failed to call checkPolicy. Code is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, message is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">  <span class="hljs-comment">// ...</span></span></li><li><span class="">  }</span></li><li><span class="">  <span class="hljs-comment">// ...</span></span></li></ol></pre></div></div> </div> </div> <p></p> <div class="tiledSection"><h2 id="section7520171415134" device-type="phone,2in1,tablet">processUAFOperation<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section7520171415134" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>processUAFOperation(context: common.Context, uafRequest: UAFMessage, channelBindings?: ChannelBinding): Promise&lt;UAFMessage&gt;</p> <p>用户UAF操作接口，处理UAF协议消息。使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.FIDO</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.2" width="16.45%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.3" width="23.59%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.8.1.5.1.4" width="40.760000000000005%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>context</p> </td> <td class="cellrowborder" width="16.45%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="23.59%"><p>是</p> </td> <td class="cellrowborder" width="40.760000000000005%"><p>ability的context</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>uafRequest</p> </td> <td class="cellrowborder" width="16.45%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-fido-api#section2134351143710">UAFMessage</a></p> </td> <td class="cellrowborder" width="23.59%"><p>是</p> </td> <td class="cellrowborder" width="40.760000000000005%"><p>FIDO客户端软件使用的<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-fido-api#section2134351143710">UAFMessage</a></p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>channelBindings</p> </td> <td class="cellrowborder" width="16.45%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-fido-api#section1081123302517">ChannelBinding</a></p> </td> <td class="cellrowborder" width="23.59%"><p>否</p> </td> <td class="cellrowborder" width="40.760000000000005%"><p>传输通道的绑定参数，用于验证通道安全性，默认为空</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;<a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-fido-api#section2134351143710">UAFMessage</a>&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象。返回包含签名后响应数据的UAFMessage消息对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-fido">FIDO免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.1" width="49.97%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.19.13.1.3.1.2" width="50.029999999999994%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="49.97%"><p>401</p> </td> <td class="cellrowborder" width="50.029999999999994%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.97%"><p>801</p> </td> <td class="cellrowborder" width="50.029999999999994%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.97%"><p>1005900003</p> </td> <td class="cellrowborder" width="50.029999999999994%"><p>User cancels.</p> </td> </tr> <tr><td class="cellrowborder" width="49.97%"><p>1005900005</p> </td> <td class="cellrowborder" width="50.029999999999994%"><p>No authenticator matching the authenticator policy specified is available.</p> </td> </tr> <tr><td class="cellrowborder" width="49.97%"><p>1005900006</p> </td> <td class="cellrowborder" width="50.029999999999994%"><p>A violation of the UAF protocol occurred.</p> </td> </tr> <tr><td class="cellrowborder" width="49.97%"><p>1005900007</p> </td> <td class="cellrowborder" width="50.029999999999994%"><p>No Facet_ID is registered.</p> </td> </tr> <tr><td class="cellrowborder" width="49.97%"><p>1005900009</p> </td> <td class="cellrowborder" width="50.029999999999994%"><p>The authenticator denies access to the generated request.</p> </td> </tr> <tr><td class="cellrowborder" width="49.97%"><p>1005900014</p> </td> <td class="cellrowborder" width="50.029999999999994%"><p>The user does not record biometric features or the authentication module is abnormal.</p> </td> </tr> <tr><td class="cellrowborder" width="49.97%"><p>1005900015</p> </td> <td class="cellrowborder" width="50.029999999999994%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="49.97%"><p>1005900016</p> </td> <td class="cellrowborder" width="50.029999999999994%"><p>Unknown error.</p> </td> </tr> <tr><td class="cellrowborder" width="49.97%"><p>1005900017</p> </td> <td class="cellrowborder" width="50.029999999999994%"><p>Switched to the custom authentication process.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>调用示例: </strong><div _ngcontent-qjy-c106="" class="highlight-div"><div _ngcontent-qjy-c106="" class="highlight-div-header"><div _ngcontent-qjy-c106="" class="highlight-div-header-left"><div _ngcontent-qjy-c106="" class="handle-button expand-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qjy-c106="" class="highlight-div-header-right"><div _ngcontent-qjy-c106="" class="handle-button ai-button"></div><div _ngcontent-qjy-c106="" class="handle-button line-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qjy-c106="" class="handle-button theme-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qjy-c106="" class="handle-button copy-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qjy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="">  <span class="hljs-comment">// ...</span></span></li><li><span class="">  <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">使用</span></span><span class=""><span class="hljs-comment">uiContext</span></span><span class=""><span class="hljs-comment">需要获取页面</span></span><span class=""><span class="hljs-comment">UIAbility</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">Context</span></span><span class=""><span class="hljs-comment">，一个页面获取一次即可</span></span></li><li>  <span class="hljs-keyword">let</span> <span class="">uiContext </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">UIContext</span></span><span class="">()</span><span class="">;</span></li><li>  <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">context</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Context</span> </span><span class="">= </span><span class="">uiContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getHostContext</span></span><span class="">() </span><span class="hljs-keyword">as</span> <span class="">common</span><span class="">.</span><span class=""><span class="hljs-property">UIAbilityContext</span></span><span class="">;</span></li><li><span class="">  <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">从</span></span><span class=""><span class="hljs-comment">FIDO</span></span><span class=""><span class="hljs-comment">服务器获取报文</span></span><span class=""><span class="hljs-comment">message</span></span></li><li>  <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">uafMessage</span></span><span class="">: </span><span class="">fido</span><span class="">.</span><span class=""><span class="hljs-property">UAFMessage</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class="">  <span class="hljs-attr">uafProtocolMessage</span></span><span class="">: </span><span class=""><span class="hljs-string">""</span></span><span class="">, </span><span class=""><span class="hljs-comment">// uafProtocolMessage</span></span><span class=""><span class="hljs-comment">为从</span></span><span class=""><span class="hljs-comment">FIDO</span></span><span class=""><span class="hljs-comment">服务器获取的报文</span></span></li><li>    <span class="hljs-attr">additionalData</span>: <span class="hljs-string">'{"navigationButtonText": "使用其他方式验证"}'</span> <span class="hljs-comment">//这里是可选字段，如果需要开启自定义认证功能，请在此传入文本</span></li><li><span class="">  }</span><span class="">;</span></li><li>  <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">channelBinding</span></span><span class="">: </span><span class="">fido</span><span class="">.</span><span class=""><span class="hljs-property">ChannelBinding</span> </span><span class="">= </span><span class="">{}</span><span class="">;</span></li><li>  <span class="hljs-keyword">try</span> <span class="">{</span></li><li>    <span class="hljs-keyword">let</span> <span class="">messageResp </span><span class="">= </span><span class="hljs-keyword">await</span> <span class="">fido</span><span class="">.</span><span class=""><span class="hljs-title function_">processUAFOperation</span></span><span class="">(</span><span class="">context</span><span class="">, </span><span class="">uafMessage</span><span class="">, </span><span class="">channelBinding</span><span class="">)</span><span class="">;</span></li><li>  <span class="">  <span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"Succeeded in doing processUAFOperation."</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">  <span class="hljs-comment">// ...</span></span></li><li><span class="">  } </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) </span><span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">err</span></span><span class="">: </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">= </span><span class="">error </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">BusinessError</span></span><span class="">;</span></li><li>  <span class="">  <span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`Failed to call processUAFOperation. Code is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, message is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">  <span class="hljs-comment">// ...</span></span></li><li><span class="">  }</span></li><li><span class="">  <span class="hljs-comment">// ...</span></span></li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section4815641306" device-type="phone,2in1,tablet">notifyUAFResult<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section4815641306" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span></div><p>notifyUAFResult(context: common.Context, uafResponse: UAFMessage): Promise&lt;void&gt;</p> <p>通知FIDO认证器FIDO免密身份认证功能的开启结果。使用Promise异步回调。</p> <p><strong>元服务API</strong><strong>：</strong>从版本5.0.0(12)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.Security.FIDO</p> <p><strong>起始版本：</strong>4.1.0(11)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.1" width="19.2%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.2" width="16.71%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.3" width="23.330000000000002%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.5.1.4" width="40.760000000000005%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.2%"><p>context</p> </td> <td class="cellrowborder" width="16.71%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context#context" target="_blank">common.Context</a></p> </td> <td class="cellrowborder" width="23.330000000000002%"><p>是</p> </td> <td class="cellrowborder" width="40.760000000000005%"><p>ability的context</p> </td> </tr> <tr><td class="cellrowborder" width="19.2%"><p>uafResponse</p> </td> <td class="cellrowborder" width="16.71%"><p><a href="/consumer/cn/doc/harmonyos-references/onlineauthentication-fido-api#section2134351143710">UAFMessage</a></p> </td> <td class="cellrowborder" width="23.330000000000002%"><p>是</p> </td> <td class="cellrowborder" width="40.760000000000005%"><p>UAF响应消息</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值:</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;void&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象。无返回结果的Promise对象。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/onlineauthentication-error-code-fido">FIDO免密认证错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.20.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.20.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>401</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>801</p> </td> <td class="cellrowborder" width="50%"><p>Device type error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1005900006</p> </td> <td class="cellrowborder" width="50%"><p>A violation of the UAF protocol occurred.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1005900015</p> </td> <td class="cellrowborder" width="50%"><p>System Interruption.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1005900016</p> </td> <td class="cellrowborder" width="50%"><p>Unknown error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>调用示例: </strong><div _ngcontent-qjy-c106="" class="highlight-div"><div _ngcontent-qjy-c106="" class="highlight-div-header"><div _ngcontent-qjy-c106="" class="highlight-div-header-left"><div _ngcontent-qjy-c106="" class="handle-button expand-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-qjy-c106="" class="highlight-div-header-right"><div _ngcontent-qjy-c106="" class="handle-button ai-button"></div><div _ngcontent-qjy-c106="" class="handle-button line-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-qjy-c106="" class="handle-button theme-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-qjy-c106="" class="handle-button copy-button"><div _ngcontent-qjy-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-qjy-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="">  <span class="hljs-comment">// ...</span></span></li><li><span class="">  <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">使用</span></span><span class=""><span class="hljs-comment">uiContext</span></span><span class=""><span class="hljs-comment">需要获取页面</span></span><span class=""><span class="hljs-comment">UIAbility</span></span><span class=""><span class="hljs-comment">的</span></span><span class=""><span class="hljs-comment">Context</span></span><span class=""><span class="hljs-comment">，一个页面获取一次即可</span></span></li><li>  <span class="hljs-keyword">let</span> <span class="">uiContext </span><span class="">= </span><span class="hljs-keyword">new</span> <span class=""><span class="hljs-title class_">UIContext</span></span><span class="">()</span><span class="">;</span></li><li>  <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">context</span></span><span class="">: </span><span class=""><span class="hljs-title class_">Context</span> </span><span class="">= </span><span class="">uiContext</span><span class="">.</span><span class=""><span class="hljs-title function_">getHostContext</span></span><span class="">() </span><span class="hljs-keyword">as</span> <span class="">common</span><span class="">.</span><span class=""><span class="hljs-property">UIAbilityContext</span></span><span class="">;</span></li><li><span class="">  <span class="hljs-comment">// </span></span><span class=""><span class="hljs-comment">从</span></span><span class=""><span class="hljs-comment">FIDO</span></span><span class=""><span class="hljs-comment">服务器获取报文</span></span><span class=""><span class="hljs-comment">message</span></span></li><li>  <span class="hljs-keyword">let</span> <span class=""><span class="hljs-attr">uafMessage</span></span><span class="">: </span><span class="">fido</span><span class="">.</span><span class=""><span class="hljs-property">UAFMessage</span> </span><span class="">= </span><span class="">{</span></li><li>  <span class="">  <span class="hljs-attr">uafProtocolMessage</span></span><span class="">: </span><span class=""><span class="hljs-string">""</span></span><span class="">, </span><span class=""><span class="hljs-comment">// uafProtocolMessage</span></span><span class=""><span class="hljs-comment">为从</span></span><span class=""><span class="hljs-comment">FIDO</span></span><span class=""><span class="hljs-comment">服务器获取的报文</span></span></li><li>  <span class="">  <span class="hljs-attr">additionalData</span></span><span class="">: </span><span class=""><span class="hljs-string">""</span></span></li><li><span class="">  }</span><span class="">;</span></li><li>  <span class="hljs-keyword">try</span> <span class="">{</span></li><li>    <span class="hljs-keyword">await</span> <span class="">fido</span><span class="">.</span><span class=""><span class="hljs-title function_">notifyUAFResult</span></span><span class="">(</span><span class="">context</span><span class="">, </span><span class="">uafMessage</span><span class="">)</span><span class="">;</span></li><li>  <span class="">  <span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">info</span></span><span class="">(</span><span class=""><span class="hljs-string">"Succeeded in doing notifyUAFResult."</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">  <span class="hljs-comment">// ...</span></span></li><li><span class="">  } </span><span class="hljs-keyword">catch</span> <span class="">(</span><span class="">error</span><span class="">) </span><span class="">{</span></li><li>    <span class="hljs-keyword">const</span> <span class=""><span class="hljs-attr">err</span></span><span class="">: </span><span class=""><span class="hljs-title class_">BusinessError</span> </span><span class="">= </span><span class="">error </span><span class="hljs-keyword">as</span> <span class=""><span class="hljs-title class_">BusinessError</span></span><span class="">;</span></li><li>  <span class="">  <span class="hljs-variable language_">console</span></span><span class="">.</span><span class=""><span class="hljs-title function_">error</span></span><span class="">(</span><span class=""><span class="hljs-string">`Failed to call notifyUAFResult. Code is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">code</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">, message is </span></span><span class=""><span class="hljs-string"><span class="hljs-subst">${</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">err</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">.</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">message</span></span></span><span class=""><span class="hljs-string"><span class="hljs-subst">}</span></span></span><span class=""><span class="hljs-string">`</span></span><span class="">)</span><span class="">;</span></li><li>  <span class="">  <span class="hljs-comment">// ...</span></span></li><li><span class="">  }</span></li><li><span class="">  <span class="hljs-comment">// ...</span></span></li></ol></pre></div></div> </div> </div> </div> <div></div></div>