<h1 _ngcontent-uwm-c119="" class="doc-title ng-star-inserted" title="FunctionComponent（功能组件）"> FunctionComponent（功能组件） </h1>

<div _ngcontent-uwm-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;"> <div><p>Agent Framework Kit（智能体框架服务）提供了拉起指定智能体的能力。</p> <p>应用在<a href="https://developer.huawei.com/consumer/cn/hag/hagindex.html?isInFrame=true&amp;lang=zh_CN#/" target="_blank">小艺开放平台</a>上线智能体后，向用户提供应用+智能体组合的服务，让用户可以在适当的场景下通过Agent Framework Kit的UI控件能力主动拉起智能体。配置智能体请参考<a href="https://developer.huawei.com/consumer/cn/doc/service/quick-start-0000002469548009" target="_blank">快速创建智能体</a>。</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <div class="tiledSection"><h2 id="section16609101116259" device-type="phone,tablet">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16609101116259" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><div _ngcontent-uwm-c106="" class="highlight-div"><div _ngcontent-uwm-c106="" class="highlight-div-header"><div _ngcontent-uwm-c106="" class="highlight-div-header-left"><div _ngcontent-uwm-c106="" class="handle-button expand-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uwm-c106="" class="highlight-div-header-right"><div _ngcontent-uwm-c106="" class="handle-button ai-button"></div><div _ngcontent-uwm-c106="" class="handle-button line-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uwm-c106="" class="handle-button theme-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uwm-c106="" class="handle-button copy-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uwm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AgentController</span>, <span class="hljs-title class_">BaseOptions</span>, <span class="hljs-title class_">FunctionController</span>, <span class="hljs-title class_">FunctionOptions</span>, <span class="hljs-title class_">ButtonType</span>, <span class="hljs-title class_">FunctionComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AgentFrameworkKit'</span>;</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section143611912403" device-type="phone,tablet">FunctionComponent<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section143611912403" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>Agent功能组件，可以实现拉起智能体功能。</p> <p><strong>装饰器类型：</strong>@Component</p> <p><strong>元服务API：</strong> 从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.Agent.AgentKit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.5.8.1.6.1.1" width="19.040000000000003%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.6.1.2" width="32.379999999999995%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.6.1.3" width="8.35%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.6.1.4" width="7.19%"><p>装饰器类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.6.1.5" width="33.040000000000006%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="19.040000000000003%"><p>agentId</p> </td> <td class="cellrowborder" width="32.379999999999995%"><p>string</p> </td> <td class="cellrowborder" width="8.35%"><p>是</p> </td> <td class="cellrowborder" width="7.19%"><p>-</p> </td> <td class="cellrowborder" width="33.040000000000006%"><p>Agent ID，Agent的唯一标识，<a href="https://developer.huawei.com/consumer/cn/doc/service/quick-start-0000002469548009" target="_blank">创建智能体</a>时获取。智能体创建成功后，可在智能体配置页面的网址链接中获取。</p> <p>长度限制1~64位字符。</p> </td> </tr> <tr><td class="cellrowborder" width="19.040000000000003%"><p>onError</p> </td> <td class="cellrowborder" width="32.379999999999995%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-base#errorcallback" target="_blank">ErrorCallback</a></p> </td> <td class="cellrowborder" width="8.35%"><p>是</p> </td> <td class="cellrowborder" width="7.19%"><p>-</p> </td> <td class="cellrowborder" width="33.040000000000006%"><p>错误回调函数。</p> </td> </tr> <tr><td class="cellrowborder" width="19.040000000000003%"><p>options</p> </td> <td class="cellrowborder" width="32.379999999999995%"><p><a href="/consumer/cn/doc/harmonyos-references/hmaf-function-component#section13411955155613">FunctionOptions</a></p> </td> <td class="cellrowborder" width="8.35%"><p>否</p> </td> <td class="cellrowborder" width="7.19%"><p>-</p> </td> <td class="cellrowborder" width="33.040000000000006%"><p>Function组件初始化可选参数。</p> </td> </tr> <tr><td class="cellrowborder" width="19.040000000000003%"><p>controller</p> </td> <td class="cellrowborder" width="32.379999999999995%"><p><a href="/consumer/cn/doc/harmonyos-references/hmaf-function-component#section53411946183318">FunctionController</a></p> </td> <td class="cellrowborder" width="8.35%"><p>否</p> </td> <td class="cellrowborder" width="7.19%">&nbsp;&nbsp;</td> <td class="cellrowborder" width="33.040000000000006%"><p>Function组件控制器。默认为undefined</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/hmaf-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.5.11.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>1022400010</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1022400014</p> </td> <td class="cellrowborder" width="50%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-uwm-c106="" class="highlight-div"><div _ngcontent-uwm-c106="" class="highlight-div-header"><div _ngcontent-uwm-c106="" class="highlight-div-header-left"><div _ngcontent-uwm-c106="" class="handle-button expand-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uwm-c106="" class="highlight-div-header-right"><div _ngcontent-uwm-c106="" class="handle-button ai-button"></div><div _ngcontent-uwm-c106="" class="handle-button line-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uwm-c106="" class="handle-button theme-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uwm-c106="" class="handle-button copy-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uwm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.BasicServicesKit"</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.PerformanceAnalysisKit"</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FunctionComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AgentFrameworkKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">FunctionExample</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">agentId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'agentproxy65481da1fa2293a8482d45'</span>;</li><li>
</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">FunctionComponent</span>({</li><li>        <span class="hljs-attr">agentId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">agentId</span>,</li><li>        <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {</li><li>          hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'FunctionExample'</span>, <span class="hljs-string">`err code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)          </li><li>        },</li><li>        <span class="hljs-attr">options</span>: {</li><li>           <span class="hljs-attr">title</span>: <span class="hljs-string">'智能创建'</span>,</li><li>           <span class="hljs-attr">queryText</span>: <span class="hljs-string">'创建一个新的模式'</span>,</li><li>           <span class="hljs-attr">isShowShadow</span>: <span class="hljs-literal">true</span></li><li>        }</li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h2 id="section37192953318" device-type="phone,tablet">AgentController<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section37192953318" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>Agent Framework Kit控件通用控制器。</p> <p><strong>元服务API：</strong> 从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.Agent.AgentKit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> </div> <div class="tiledSection"><h3 id="section123851974413" device-type="phone,tablet" class="firsth2">isAgentSupport<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section123851974413" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>isAgentSupport(context: common.UIAbilityContext, agentId: string): Promise&lt;boolean&gt;</p> <p>查询Agent是否可用。若可用，返回Agent信息。通过Promise异步回调。</p> <p><strong>元服务API：</strong> 从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.Agent.AgentKit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.1" width="25%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.2" width="25%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.3" width="24.98%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.5.1.4" width="25.019999999999996%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="25%"><p>context</p> </td> <td class="cellrowborder" width="25%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-app-ability-common#uiabilitycontext" target="_blank">common.UIAbilityContext</a></p> </td> <td class="cellrowborder" width="24.98%"><p>是</p> </td> <td class="cellrowborder" width="25.019999999999996%"><p>当前上下文环境。</p> </td> </tr> <tr><td class="cellrowborder" width="25%"><p>agentId</p> </td> <td class="cellrowborder" width="25%"><p>string</p> </td> <td class="cellrowborder" width="24.98%"><p>是</p> </td> <td class="cellrowborder" width="25.019999999999996%"><p>Agent ID，Agent的唯一标识，<a href="https://developer.huawei.com/consumer/cn/doc/service/quick-start-0000002469548009" target="_blank">创建智能体</a>时获取。</p> <p>长度限制1~64位字符。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>返回值：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.1" width="50%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.10.1.3.1.2" width="50%"><p>说明</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>Promise&lt;boolean&gt;</p> </td> <td class="cellrowborder" width="50%"><p>Promise对象，agentId是否有效，Agent功能是否正常。</p> <p>true：agentId有效且Agent功能支持。</p> <p>false：agentId无效或者Agent功能不支持。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>错误码：</strong></p> <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/hmaf-error-code">ArkTS API错误码</a>。</p>  <div class="tablenoborder"><div class="tbBox"><table class="tableClass2_t"> <tbody><tr class="firstRow"><th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.1" width="50%"><p>错误码ID</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.7.13.1.3.1.2" width="50%"><p>错误信息</p> </th> </tr><tr><td class="cellrowborder" width="50%"><p>1022400010</p> </td> <td class="cellrowborder" width="50%"><p>Parameter error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1022400011</p> </td> <td class="cellrowborder" width="50%"><p>Privacy agreement not accepted.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1022400012</p> </td> <td class="cellrowborder" width="50%"><p>HUAWEI ID not signed in.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1022400013</p> </td> <td class="cellrowborder" width="50%"><p>Internet error.</p> </td> </tr> <tr><td class="cellrowborder" width="50%"><p>1022400014</p> </td> <td class="cellrowborder" width="50%"><p>Internal error.</p> </td> </tr>  </tbody></table></div> </div> <div class="p"><strong>示例：</strong><div _ngcontent-uwm-c106="" class="highlight-div"><div _ngcontent-uwm-c106="" class="highlight-div-header"><div _ngcontent-uwm-c106="" class="highlight-div-header-left"><div _ngcontent-uwm-c106="" class="handle-button expand-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uwm-c106="" class="highlight-div-header-right"><div _ngcontent-uwm-c106="" class="handle-button ai-button"></div><div _ngcontent-uwm-c106="" class="handle-button line-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uwm-c106="" class="handle-button theme-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uwm-c106="" class="handle-button copy-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uwm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.BasicServicesKit"</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.PerformanceAnalysisKit"</span>;</li><li><span class="hljs-keyword">import</span> { common } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.AbilityKit"</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FunctionComponent</span>, <span class="hljs-title class_">FunctionController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AgentFrameworkKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">AgentDemo</span> {</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">functionController</span>: <span class="hljs-title class_">FunctionController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FunctionController</span>()</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">agentId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'agentproxy65481da1fa2293a8482d45'</span>;</li><li>  </li><li>  <span class="hljs-meta">@State</span> <span class="hljs-attr">isAgentSupport</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>     <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkAgentSupport</span>()</li><li>  }</li><li>
</li><li>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">checkAgentSupport</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-keyword">let</span> context = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>()?.<span class="hljs-title function_">getHostContext</span>() <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>;</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isAgentSupport</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">functionController</span>.<span class="hljs-title function_">isAgentSupport</span>(context, <span class="hljs-variable language_">this</span>.<span class="hljs-property">agentId</span>)</li><li>    } <span class="hljs-keyword">catch</span> (err) {</li><li>      hilog.<span class="hljs-title function_">error</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'AgentExample'</span>, <span class="hljs-string">`err code: <span class="hljs-subst">${err.code}</span>, message: <span class="hljs-subst">${err.message}</span>`</span>)</li><li>    }</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-comment">// 若使用该方法判断是否加载，请确保agentId可用</span></li><li>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isAgentSupport</span>) {</li><li>        <span class="hljs-title class_">FunctionComponent</span>({</li><li>          <span class="hljs-attr">agentId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">agentId</span>,</li><li>          <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {},</li><li>          <span class="hljs-attr">options</span>: {</li><li>              <span class="hljs-attr">title</span>: <span class="hljs-string">'智能创建'</span>,</li><li>              <span class="hljs-attr">queryText</span>: <span class="hljs-string">'创建一个新的模式'</span>,</li><li>              <span class="hljs-attr">isShowShadow</span>: <span class="hljs-literal">true</span></li><li>          }</li><li>        })</li><li>      }</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div> </div> <div class="tiledSection"><h3 id="section168831155154214" device-type="phone,tablet">on('agentDialogOpened')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section168831155154214" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>on(type: 'agentDialogOpened', callback: Callback&lt;void&gt;): void</p> <p>监听智能体对话框打开事件。</p> <p><strong>元服务API：</strong> 从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.Agent.AgentKit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为'agentDialogOpened'，监听智能体对话框打开事件。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p>Callback&lt;void&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>callback回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-uwm-c106="" class="highlight-div"><div _ngcontent-uwm-c106="" class="highlight-div-header"><div _ngcontent-uwm-c106="" class="highlight-div-header-left"><div _ngcontent-uwm-c106="" class="handle-button expand-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uwm-c106="" class="highlight-div-header-right"><div _ngcontent-uwm-c106="" class="handle-button ai-button"></div><div _ngcontent-uwm-c106="" class="handle-button line-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uwm-c106="" class="handle-button theme-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uwm-c106="" class="handle-button copy-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uwm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.BasicServicesKit"</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.PerformanceAnalysisKit"</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FunctionComponent</span>, <span class="hljs-title class_">FunctionController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AgentFrameworkKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">AgentDemo</span>{</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">FunctionController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FunctionController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">agentId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'agentproxy65481da1fa2293a8482d45'</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'agentDialogOpened'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onAgentOpenedCallback</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'agentDialogClosed'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onAgentClosedCallback</span>)</li><li>  }</li><li>  onAgentOpenedCallback = <span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'AgentExample'</span>, <span class="hljs-string">'agent dialog opened callback'</span>)</li><li>  }</li><li>  onAgentClosedCallback = <span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'AgentExample'</span>, <span class="hljs-string">'agent dialog closed callback'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">off</span>(<span class="hljs-string">'agentDialogOpened'</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">off</span>(<span class="hljs-string">'agentDialogClosed'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">FunctionComponent</span>({</li><li>        <span class="hljs-attr">agentId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">agentId</span>,</li><li>        <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {},</li><li>        <span class="hljs-attr">options</span>: {</li><li>          <span class="hljs-attr">title</span>: <span class="hljs-string">'智能创建'</span>,</li><li>          <span class="hljs-attr">queryText</span>: <span class="hljs-string">'创建一个新的模式'</span>,</li><li>          <span class="hljs-attr">isShowShadow</span>: <span class="hljs-literal">true</span></li><li>        },</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span></li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section18771735164320" device-type="phone,tablet">off('agentDialogOpened')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section18771735164320" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>off(type: 'agentDialogOpened', callback?: Callback&lt;void&gt;): void</p> <p>取消智能体对话框打开事件的监听。</p> <p><strong>元服务API：</strong> 从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.Agent.AgentKit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.9.8.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为 'agentDialogOpened'，取消智能体对话框打开事件的监听。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p>Callback&lt;void&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>否</p> </td> <td class="cellrowborder" width="55.65%"><p>需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若无此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-uwm-c106="" class="highlight-div"><div _ngcontent-uwm-c106="" class="highlight-div-header"><div _ngcontent-uwm-c106="" class="highlight-div-header-left"><div _ngcontent-uwm-c106="" class="handle-button expand-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uwm-c106="" class="highlight-div-header-right"><div _ngcontent-uwm-c106="" class="handle-button ai-button"></div><div _ngcontent-uwm-c106="" class="handle-button line-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uwm-c106="" class="handle-button theme-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uwm-c106="" class="handle-button copy-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uwm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.BasicServicesKit"</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.PerformanceAnalysisKit"</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FunctionComponent</span>, <span class="hljs-title class_">FunctionController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AgentFrameworkKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">AgentDemo</span>{</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">FunctionController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FunctionController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">agentId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'agentproxy65481da1fa2293a8482d45'</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'agentDialogOpened'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onAgentOpenedCallback</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'agentDialogClosed'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onAgentClosedCallback</span>)</li><li>  }</li><li>  onAgentOpenedCallback = <span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'AgentExample'</span>, <span class="hljs-string">'agent dialog opened callback'</span>)</li><li>  }</li><li>  onAgentClosedCallback = <span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'AgentExample'</span>, <span class="hljs-string">'agent dialog closed callback'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">off</span>(<span class="hljs-string">'agentDialogOpened'</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">off</span>(<span class="hljs-string">'agentDialogClosed'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">FunctionComponent</span>({</li><li>        <span class="hljs-attr">agentId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">agentId</span>,</li><li>        <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {},</li><li>        <span class="hljs-attr">options</span>: {</li><li>          <span class="hljs-attr">title</span>: <span class="hljs-string">'智能创建'</span>,</li><li>          <span class="hljs-attr">queryText</span>: <span class="hljs-string">'创建一个新的模式'</span>,</li><li>          <span class="hljs-attr">isShowShadow</span>: <span class="hljs-literal">true</span></li><li>        },</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span></li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section16423813165715" device-type="phone,tablet">on('agentDialogClosed')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section16423813165715" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>on(type: 'agentDialogClosed', callback: Callback&lt;void&gt;): void</p> <p>监听智能体对话框关闭事件。</p> <p><strong>元服务API：</strong> 从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.Agent.AgentKit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.10.8.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为'agentDialogClosed'，监听智能体对话框关闭事件。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p>Callback&lt;void&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>callback回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-uwm-c106="" class="highlight-div"><div _ngcontent-uwm-c106="" class="highlight-div-header"><div _ngcontent-uwm-c106="" class="highlight-div-header-left"><div _ngcontent-uwm-c106="" class="handle-button expand-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uwm-c106="" class="highlight-div-header-right"><div _ngcontent-uwm-c106="" class="handle-button ai-button"></div><div _ngcontent-uwm-c106="" class="handle-button line-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uwm-c106="" class="handle-button theme-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uwm-c106="" class="handle-button copy-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uwm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.BasicServicesKit"</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.PerformanceAnalysisKit"</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FunctionComponent</span>, <span class="hljs-title class_">FunctionController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AgentFrameworkKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">AgentDemo</span>{</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">FunctionController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FunctionController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">agentId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'agentproxy65481da1fa2293a8482d45'</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'agentDialogOpened'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onAgentOpenedCallback</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'agentDialogClosed'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onAgentClosedCallback</span>)</li><li>  }</li><li>  onAgentOpenedCallback = <span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'AgentExample'</span>, <span class="hljs-string">'agent dialog opened callback'</span>)</li><li>  }</li><li>  onAgentClosedCallback = <span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'AgentExample'</span>, <span class="hljs-string">'agent dialog closed callback'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">off</span>(<span class="hljs-string">'agentDialogOpened'</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">off</span>(<span class="hljs-string">'agentDialogClosed'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">FunctionComponent</span>({</li><li>        <span class="hljs-attr">agentId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">agentId</span>,</li><li>        <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {},</li><li>        <span class="hljs-attr">options</span>: {</li><li>          <span class="hljs-attr">title</span>: <span class="hljs-string">'智能创建'</span>,</li><li>          <span class="hljs-attr">queryText</span>: <span class="hljs-string">'创建一个新的模式'</span>,</li><li>          <span class="hljs-attr">isShowShadow</span>: <span class="hljs-literal">true</span></li><li>        },</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span></li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h3 id="section10424191315715" device-type="phone,tablet">off('agentDialogClosed')<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10424191315715" tips="复制节点链接"></i></h3><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>off(type: 'agentDialogClosed', callback?: Callback&lt;void&gt;): void</p> <p>取消智能体对话框关闭事件的监听。</p> <p><strong>元服务API：</strong> 从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.Agent.AgentKit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.1" width="10.47%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.2" width="23.47%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.3" width="10.41%"><p>必填</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.5.1.4" width="55.65%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="10.47%"><p>type</p> </td> <td class="cellrowborder" width="23.47%"><p>string</p> </td> <td class="cellrowborder" width="10.41%"><p>是</p> </td> <td class="cellrowborder" width="55.65%"><p>值为 'agentDialogClosed'，取消智能体对话框关闭事件的监听。</p> </td> </tr> <tr><td class="cellrowborder" width="10.47%"><p>callback</p> </td> <td class="cellrowborder" width="23.47%"><p>Callback&lt;void&gt;</p> </td> <td class="cellrowborder" width="10.41%"><p>否</p> </td> <td class="cellrowborder" width="55.65%"><p>需要取消注册的回调函数，需与订阅时传入的回调函数是同一个。若不传入此参数，则取消注册所有的回调函数。</p> </td> </tr>  </tbody></table></div> </div> <p><strong>示例：</strong></p> <div _ngcontent-uwm-c106="" class="highlight-div"><div _ngcontent-uwm-c106="" class="highlight-div-header"><div _ngcontent-uwm-c106="" class="highlight-div-header-left"><div _ngcontent-uwm-c106="" class="handle-button expand-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-uwm-c106="" class="highlight-div-header-right"><div _ngcontent-uwm-c106="" class="handle-button ai-button"></div><div _ngcontent-uwm-c106="" class="handle-button line-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-uwm-c106="" class="handle-button theme-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-uwm-c106="" class="handle-button copy-button"><div _ngcontent-uwm-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-uwm-c106="" class="highlight-scroll-div"><pre class="typescript prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.BasicServicesKit"</span>;</li><li><span class="hljs-keyword">import</span> { hilog } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.PerformanceAnalysisKit"</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FunctionComponent</span>, <span class="hljs-title class_">FunctionController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.AgentFrameworkKit'</span>;</li><li>
</li><li><span class="hljs-meta">@Entry</span></li><li><span class="hljs-meta">@Component</span></li><li>struct <span class="hljs-title class_">AgentDemo</span>{</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">controller</span>: <span class="hljs-title class_">FunctionController</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FunctionController</span>();</li><li>  <span class="hljs-keyword">private</span> <span class="hljs-attr">agentId</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'agentproxy65481da1fa2293a8482d45'</span>;</li><li>
</li><li>  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'agentDialogOpened'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onAgentOpenedCallback</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">on</span>(<span class="hljs-string">'agentDialogClosed'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onAgentClosedCallback</span>)</li><li>  }</li><li>  onAgentOpenedCallback = <span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'AgentExample'</span>, <span class="hljs-string">'agent dialog opened callback'</span>)</li><li>  }</li><li>  onAgentClosedCallback = <span class="hljs-function">() =&gt;</span> {</li><li>    hilog.<span class="hljs-title function_">info</span>(<span class="hljs-number">0x0001</span>, <span class="hljs-string">'AgentExample'</span>, <span class="hljs-string">'agent dialog closed callback'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">aboutToDisappear</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">off</span>(<span class="hljs-string">'agentDialogOpened'</span>)</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span>?.<span class="hljs-title function_">off</span>(<span class="hljs-string">'agentDialogClosed'</span>)</li><li>  }</li><li>  <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-title class_">Column</span>() {</li><li>      <span class="hljs-title class_">FunctionComponent</span>({</li><li>        <span class="hljs-attr">agentId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">agentId</span>,</li><li>        <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err: BusinessError</span>) =&gt;</span> {},</li><li>        <span class="hljs-attr">options</span>: {</li><li>          <span class="hljs-attr">title</span>: <span class="hljs-string">'智能创建'</span>,</li><li>          <span class="hljs-attr">queryText</span>: <span class="hljs-string">'创建一个新的模式'</span>,</li><li>          <span class="hljs-attr">isShowShadow</span>: <span class="hljs-literal">true</span></li><li>        },</li><li>        <span class="hljs-attr">controller</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">controller</span></li><li>      })</li><li>    }</li><li>  }</li><li>}</li></ol></pre></div></div> </div> <div class="tiledSection"><h2 id="section53411946183318" device-type="phone,tablet">FunctionController<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section53411946183318" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>Function组件控制器，用于与Function组件控制交互。预留接口，当前版本完全继承<a href="/consumer/cn/doc/harmonyos-references/hmaf-function-component#section37192953318">AgentController</a>的方法，无额外的实现。</p> <p><strong>元服务API：</strong> 从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.Agent.AgentKit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> </div> <div class="tiledSection"><h2 id="section1671758531" device-type="phone,tablet">BaseOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section1671758531" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>组件可选参数的基础对象。</p> <p><strong>元服务API：</strong> 从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.Agent.AgentKit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.13.7.1.6.1.1" width="23.119999999999997%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.6.1.2" width="23.119999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.6.1.3" width="7.5200000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.6.1.4" width="17.599999999999998%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.13.7.1.6.1.5" width="28.64%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.119999999999997%"><p>title</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="17.599999999999998%"><p>是</p> </td> <td class="cellrowborder" width="28.64%"><p>表示AgentFramework组件的标题。默认值为空。</p> <p><a href="/consumer/cn/doc/harmonyos-references/hmaf-function-component#section13411955155613">FunctionOptions</a>.buttonType按钮类型为ButtonType.CIRCLE时不体现。</p> <p>当前只显示指定大小，宽度超过8个中文字符会进行省略。</p> <p>字体大于1.75倍时默认最大显示两行。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>titleFontSize</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="17.599999999999998%"><p>是</p> </td> <td class="cellrowborder" width="28.64%"><p>表示AgentFramework组件标题的字体大小。取值范围为[14, 16]，默认值为16。取值在范围外取默认值。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>iconSize</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>number</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="17.599999999999998%"><p>是</p> </td> <td class="cellrowborder" width="28.64%"><p>表示AgentFramework组件图标的大小。取值范围为[16, 24]。</p> <ul><li>按钮类型为CIRCLE时，默认值为24。</li><li>按钮类型为CAPSULE时，默认值为20。</li></ul> <p>取值在范围外取默认值。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>iconColors</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcecolor" target="_blank">ResourceColor[]</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="17.599999999999998%"><p>是</p> </td> <td class="cellrowborder" width="28.64%"><p>表示图标颜色，当前仅支持设置一种颜色，不设置时，为默认渐变色图标。</p> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section13411955155613" device-type="phone,tablet">FunctionOptions<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section13411955155613" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>功能组件选项的定义。继承自<a href="/consumer/cn/doc/harmonyos-references/hmaf-function-component#section1671758531">BaseOptions</a>。</p> <p><strong>元服务API：</strong> 从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.Agent.AgentKit</p> <p><strong>起始版本：</strong>6.0.0(20)</p> <p><strong>参数：</strong></p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.14.7.1.6.1.1" width="23.119999999999997%"><p>参数名</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.6.1.2" width="23.119999999999997%"><p>类型</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.6.1.3" width="7.5200000000000005%"><p>只读</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.6.1.4" width="12.690000000000001%"><p>可选</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.14.7.1.6.1.5" width="33.550000000000004%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="23.119999999999997%"><p>queryText</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>string</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.690000000000001%"><p>是</p> </td> <td class="cellrowborder" width="33.550000000000004%"><p>使用功能组件的初始查询文本，默认值为空。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>controlSize</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-button#controlsize11枚举说明" target="_blank">ControlSize</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.690000000000001%"><p>是</p> </td> <td class="cellrowborder" width="33.550000000000004%"><p>功能组件按钮的大小，默认值为ControlSize.NORMAL。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>buttonType</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p><a href="/consumer/cn/doc/harmonyos-references/hmaf-function-component#section10388117018">ButtonType</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.690000000000001%"><p>是</p> </td> <td class="cellrowborder" width="33.550000000000004%"><p>功能组件的按钮类型。title属性为空或不传时默认值为ButtonType.CIRCLE，title属性不为空时默认值为ButtonType.CAPSULE。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>isShowShadow</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p>boolean</p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.690000000000001%"><p>是</p> </td> <td class="cellrowborder" width="33.550000000000004%"><p>如果显示按钮的阴影，仅在 ButtonType.CAPSULE 胶囊类型时有效。默认值为false。</p> <p>true：显示阴影。</p> <p>false：不显示阴影。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>backgroundColor</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcecolor" target="_blank">ResourceColor</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.690000000000001%"><p>是</p> </td> <td class="cellrowborder" width="33.550000000000004%"><p>显示背景板时，组件的背景颜色。</p> <p>默认值为sys.color.comp_background_tertiary背景色。</p> </td> </tr> <tr><td class="cellrowborder" width="23.119999999999997%"><p>titleColors</p> </td> <td class="cellrowborder" width="23.119999999999997%"><p><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-types#resourcecolor" target="_blank">ResourceColor[]</a></p> </td> <td class="cellrowborder" width="7.5200000000000005%"><p>否</p> </td> <td class="cellrowborder" width="12.690000000000001%"><p>是</p> </td> <td class="cellrowborder" width="33.550000000000004%"><p>功能组件带文本时，文本的颜色，当前最多仅支持设置两种颜色。</p> <ul><li>设置两种颜色时为渐变色。</li><li>设置一种颜色时为设置颜色。</li><li>不设置时为默认渐变色文本。</li></ul> </td> </tr>  </tbody></table></div> </div> </div> <div class="tiledSection"><h2 id="section10388117018" device-type="phone,tablet">ButtonType<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="section10388117018" tips="复制节点链接"></i></h2><div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">Tablet</span></div><p>按钮类型的枚举值。</p> <p><strong>元服务API：</strong> 从版本6.0.1(21)开始，该接口支持在元服务中使用。</p> <p><strong>系统能力：</strong>SystemCapability.AI.Agent.AgentKit</p> <p><strong>起始版本：</strong>6.0.0(20)</p>  <div class="tablenoborder"><div class="tbBox"><table><thead><tr><th align="left" class="cellrowborder" id="mcps1.3.15.6.1.4.1.1" width="33.33333333333333%"><p>名称</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.4.1.2" width="33.3033303330333%"><p>值</p> </th> <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.4.1.3" width="33.36333633363336%"><p>说明</p> </th> </tr> </thead> <tbody><tr><td class="cellrowborder" width="33.33333333333333%"><p>CIRCLE</p> </td> <td class="cellrowborder" width="33.3033303330333%"><p>0</p> </td> <td class="cellrowborder" width="33.36333633363336%"><p>圆形按钮。</p> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>CAPSULE</p> </td> <td class="cellrowborder" width="33.3033303330333%"><p>1</p> </td> <td class="cellrowborder" width="33.36333633363336%"><p>胶囊按钮（圆角默认高度为一半）。</p> <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content"><p>字体倍数小于1.75倍时，显示为胶囊按钮，大于或等于1.75倍时，显示为矩形倒角按钮。</p> </div></div></div> </td> </tr> <tr><td class="cellrowborder" width="33.33333333333333%"><p>ICON_ABOVE_TITLE</p> </td> <td class="cellrowborder" width="33.3033303330333%"><p>2</p> </td> <td class="cellrowborder" width="33.36333633363336%"><p>图标与标题为上下结构的胶囊按钮。</p> <p><strong>起始版本：</strong>6.0.1(21)</p> </td> </tr>  </tbody></table></div> </div> </div> </div> <div></div></div>