<h1 _ngcontent-mlv-c119="" class="doc-title ng-star-inserted" title="Functions"> Functions </h1>

<div _ngcontent-mlv-c106="" auitextselectionexpansion="" class="markdown-body ng-star-inserted" style="position: relative;">   <div>    <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">      <p>本模块首批接口从API version 6开始支持。后续版本的新增接口，采用上角标单独标记接口的起始版本。</p>     </div></div></div>    <div class="tiledSection">     <h2 id="导入模块" device-type="phone,2in1,tablet,wearable,tv">导入模块<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="导入模块" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { image } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ImageKit'</span>;</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepicture13" device-type="phone,2in1,tablet,wearable,tv">image.createPicture<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepicture13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPicture(mainPixelmap : PixelMap): Picture</p>     <p>通过主图的pixelmap创建一个Picture对象。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.3.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">mainPixelmap</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">主图的pixelmap。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.3.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-picture">Picture</a></td>         <td class="cellrowborder" width="50%">返回Picture对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.3.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.3.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.Possible causes:1.Mandatory parameters are left unspecified.2.Incorrect parameter types.3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePicture</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-keyword">const</span> resourceMgr = context.<span class="hljs-property">resourceManager</span>;</li><li>  <span class="hljs-keyword">const</span> rawFile = <span class="hljs-keyword">await</span> resourceMgr.<span class="hljs-title function_">getRawFileContent</span>(<span class="hljs-string">"test.jpg"</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">ops</span>: image.<span class="hljs-property">SourceOptions</span> = {</li><li>    <span class="hljs-attr">sourceDensity</span>: <span class="hljs-number">98</span>,</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">imageSource</span>: image.<span class="hljs-property">ImageSource</span> = image.<span class="hljs-title function_">createImageSource</span>(rawFile.<span class="hljs-property">buffer</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ArrayBuffer</span>, ops);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">commodityPixelMap</span>: image.<span class="hljs-property">PixelMap</span> = <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pictureObj</span>: image.<span class="hljs-property">Picture</span> = image.<span class="hljs-title function_">createPicture</span>(commodityPixelMap);</li><li>  <span class="hljs-keyword">if</span> (pictureObj != <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Create picture succeeded'</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Create picture failed'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepicturefromparcel13" device-type="phone,2in1,tablet,wearable,tv">image.createPictureFromParcel<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepicturefromparcel13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPictureFromParcel(sequence: rpc.MessageSequence): Picture</p>     <p>从MessageSequence中获取Picture。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sequence</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-rpc#messagesequence9">rpc.MessageSequence</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">保存有Picture信息的MessageSequence。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-picture">Picture</a></td>         <td class="cellrowborder" width="50%">返回Picture对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.4.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.Possible causes:1.Mandatory parameters are left unspecified.2.Incorrect parameter types.3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980097</td>         <td class="cellrowborder" width="50%">IPC error. Possible cause: 1.IPC communication failed. 2. Image upload exception. 3. Decode process exception. 4. Insufficient memory.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { rpc } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IPCKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MySequence</span> <span class="hljs-keyword">implements</span> rpc.<span class="hljs-property">Parcelable</span> {</li><li>  <span class="hljs-attr">picture</span>: image.<span class="hljs-property">Picture</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">conPicture: image.Picture</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">picture</span> = conPicture;</li><li>  }</li><li>  <span class="hljs-title function_">marshalling</span>(<span class="hljs-params">messageSequence: rpc.MessageSequence</span>) {</li><li>    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">picture</span> != <span class="hljs-literal">null</span>) {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">picture</span>.<span class="hljs-title function_">marshalling</span>(messageSequence);</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Marshalling success !'</span>);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Marshalling failed !'</span>);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>    }</li><li>  }</li><li>  <span class="hljs-title function_">unmarshalling</span>(<span class="hljs-params">messageSequence : rpc.MessageSequence</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">picture</span> = image.<span class="hljs-title function_">createPictureFromParcel</span>(messageSequence);</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">picture</span>.<span class="hljs-title function_">getMainPixelmap</span>().<span class="hljs-title function_">getImageInfo</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">imageInfo : image.ImageInfo</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Unmarshalling to get mainPixelmap information height:<span class="hljs-subst">${imageInfo.size.height}</span> width:<span class="hljs-subst">${imageInfo.size.width}</span>`</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Unmarshalling failed error.code: <span class="hljs-subst">${error.code}</span> ,error.message: <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    });</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>}</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Marshalling_UnMarshalling</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-keyword">const</span> resourceMgr = context.<span class="hljs-property">resourceManager</span>;</li><li>  <span class="hljs-keyword">const</span> rawFile = <span class="hljs-keyword">await</span> resourceMgr.<span class="hljs-title function_">getRawFileContent</span>(<span class="hljs-string">"test.jpg"</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">ops</span>: image.<span class="hljs-property">SourceOptions</span> = {</li><li>    <span class="hljs-attr">sourceDensity</span>: <span class="hljs-number">98</span>,</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">imageSource</span>: image.<span class="hljs-property">ImageSource</span> = image.<span class="hljs-title function_">createImageSource</span>(rawFile.<span class="hljs-property">buffer</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ArrayBuffer</span>, ops);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">commodityPixelMap</span>: image.<span class="hljs-property">PixelMap</span> = <span class="hljs-keyword">await</span> imageSource.<span class="hljs-title function_">createPixelMap</span>();</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pictureObj</span>: image.<span class="hljs-property">Picture</span> = image.<span class="hljs-title function_">createPicture</span>(commodityPixelMap);</li><li>  <span class="hljs-keyword">if</span> (pictureObj != <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">parcelable</span>: <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pictureObj);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: rpc.<span class="hljs-property">MessageSequence</span> = rpc.<span class="hljs-property">MessageSequence</span>.<span class="hljs-title function_">create</span>();</li><li>    <span class="hljs-comment">// 序列化。</span></li><li>    data.<span class="hljs-title function_">writeParcelable</span>(parcelable);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">ret</span>: <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pictureObj);</li><li>    <span class="hljs-comment">// 反序列化。</span></li><li>    data.<span class="hljs-title function_">readParcelable</span>(ret);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'PictureObj is null'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepixelmap8" device-type="phone,2in1,tablet,wearable,tv">image.createPixelMap<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepixelmap8" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMap(colors: ArrayBuffer, options: InitializationOptions): Promise&lt;PixelMap&gt;</p>     <p>通过属性创建PixelMap，默认采用BGRA_8888格式处理数据。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">colors</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>图像像素数据的缓冲区，用于初始化PixelMap的像素。初始化前，缓冲区中的像素格式需要由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">InitializationOptions</a>.srcPixelFormat指定。</p>          <p><strong>说明：</strong> 图像像素数据的缓冲区长度：length = width * height * 单位像素字节数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">InitializationOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建像素的属性，包括透明度，尺寸，缩略值，像素格式和是否可编辑。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.5.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">          <p>Promise对象，返回PixelMap。</p>          <p>当创建的pixelMap大小超过原图大小时，返回原图pixelMap大小。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMap</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> } }</li><li>  image.<span class="hljs-title function_">createPixelMap</span>(color, opts).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelmap.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create pixelmap. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepixelmap8-1" device-type="phone,2in1,tablet,wearable,tv">image.createPixelMap<sup>8+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepixelmap8-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMap(colors: ArrayBuffer, options: InitializationOptions, callback: AsyncCallback&lt;PixelMap&gt;): void</p>     <p>通过属性创建PixelMap，默认采用BGRA_8888格式处理数据。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.6.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">colors</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>图像像素数据的缓冲区，用于初始化PixelMap的像素。初始化前，缓冲区中的像素格式需要由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">InitializationOptions</a>.srcPixelFormat指定。</p>          <p><strong>说明：</strong> 图像像素数据的缓冲区长度：length = width * height * 单位像素字节数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">InitializationOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建像素的属性，包括透明度、尺寸、缩略值、像素格式和是否可编辑。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当创建PixelMap成功，err为undefined，data为获取到的PixelMap对象；否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMap</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> } }</li><li>  image.<span class="hljs-title function_">createPixelMap</span>(color, opts, <span class="hljs-function">(<span class="hljs-params">error: BusinessError, pixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span>(error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create pixelmap. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelmap.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepixelmapusingallocator20" device-type="phone,2in1,tablet,wearable,tv">image.createPixelMapUsingAllocator<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepixelmapusingallocator20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapUsingAllocator(colors: ArrayBuffer, param: InitializationOptions, allocatorType?: AllocatorType): Promise&lt;PixelMap&gt;</p>     <p>通过属性创建以及指定内存类型创建PixelMap，默认采用BGRA_8888格式处理数据。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">colors</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>图像像素数据的缓冲区，用于初始化PixelMap的像素。初始化前，缓冲区中的像素格式需要由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">InitializationOptions</a>.srcPixelFormat指定。</p>          <p><strong>说明：</strong> 图像像素数据的缓冲区长度：length = width * height * 单位像素字节数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">param</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">InitializationOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建像素的属性，包括透明度、尺寸、缩略值、像素格式和是否可编辑。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">allocatorType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#allocatortype15">AllocatorType</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>指定创建pixelmap的内存类型，默认内存类型是AllocatorType.AUTO。</p>          <p>1. image.AllocatorType.AUTO：不支持该内存类型的格式有UNKNOWN、YCBCR_P010、YCRCB_P010和ASTC_4x4。RGBA_1010102默认申请DMA内存。其他格式（RGB_565、RGBA_8888、BGRA_8888和RGBAF_16）尺寸大于512*512默认申请DMA内存，否则申请共享内存。</p>          <p>2. image.AllocatorType.DMA：RGBA_1010102、RGB_565、RGBA_8888、BGRA_8888和RGBAF_16支持DMA内存类型，其余格式不支持。</p>          <p>3. image.AllocatorType.SHARED：UNKNOWN、RGBA_1010102、YCBCR_P010、YCRCB_P010和ASTC_4x4不支持共享内存，其余格式支持。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回PixelMap。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.7.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">7600201</td>         <td class="cellrowborder" width="50%">Unsupported operation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7600301</td>         <td class="cellrowborder" width="50%">Memory alloc failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7600302</td>         <td class="cellrowborder" width="50%">Memory copy failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapUseAllocator</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">srcPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> } }</li><li>  image.<span class="hljs-title function_">createPixelMapUsingAllocator</span>(color, opts, image.<span class="hljs-property">AllocatorType</span>.<span class="hljs-property">AUTO</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelmap.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to create pixelmap. code is "</span>, error.<span class="hljs-property">code</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepixelmapfromparcel11" device-type="phone,2in1,tablet,wearable,tv">image.createPixelMapFromParcel<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepixelmapfromparcel11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapFromParcel(sequence: rpc.MessageSequence): PixelMap</p>     <p>从MessageSequence中获取PixelMap。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">sequence</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-rpc#messagesequence9">rpc.MessageSequence</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">保存有PixelMap信息的MessageSequence。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.8.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980096</td>         <td class="cellrowborder" width="50%">The operation failed. Possible cause: 1.Image upload exception. 2. Decoding process exception. 3. Insufficient memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980097</td>         <td class="cellrowborder" width="50%">IPC error. Possible cause: 1.IPC communication failed. 2. Image upload exception. 3. Decode process exception. 4. Insufficient memory.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">Invalid input parameter.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980105</td>         <td class="cellrowborder" width="50%">Failed to get the data.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980177</td>         <td class="cellrowborder" width="50%">Abnormal API environment.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980178</td>         <td class="cellrowborder" width="50%">Failed to create the PixelMap.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980179</td>         <td class="cellrowborder" width="50%">Abnormal buffer size.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980180</td>         <td class="cellrowborder" width="50%">FD mapping failed. Possible cause: 1. Size and address does not match. 2. Memory map in memalloc failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980246</td>         <td class="cellrowborder" width="50%">Failed to read the PixelMap.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { rpc } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.IPCKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">class</span> <span class="hljs-title class_">MySequence</span> <span class="hljs-keyword">implements</span> rpc.<span class="hljs-property">Parcelable</span> {</li><li>  <span class="hljs-attr">pixel_map</span>: image.<span class="hljs-property">PixelMap</span>;</li><li>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">conPixelmap: image.PixelMap</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span> = conPixelmap;</li><li>  }</li><li>  <span class="hljs-title function_">marshalling</span>(<span class="hljs-params">messageSequence: rpc.MessageSequence</span>) {</li><li>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span>.<span class="hljs-title function_">marshalling</span>(messageSequence);</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>  <span class="hljs-title function_">unmarshalling</span>(<span class="hljs-params">messageSequence: rpc.MessageSequence</span>) {</li><li>    <span class="hljs-keyword">try</span> {</li><li>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pixel_map</span> = image.<span class="hljs-title function_">createPixelMapFromParcel</span>(messageSequence);</li><li>    } <span class="hljs-keyword">catch</span>(e) {</li><li>      <span class="hljs-keyword">let</span> error = e <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`createPixelMapFromParcel error. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</li><li>    }</li><li>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</li><li>  }</li><li>}</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapFromParcel</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">bufferArr</span>: <span class="hljs-title class_">Uint8Array</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i++) {</li><li>    bufferArr[i] = <span class="hljs-number">0x80</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = {</li><li>    <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>,</li><li>    <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">BGRA_8888</span>,</li><li>    <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> },</li><li>    <span class="hljs-attr">alphaType</span>: image.<span class="hljs-property">AlphaType</span>.<span class="hljs-property">UNPREMUL</span></li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pixelMap</span>: image.<span class="hljs-property">PixelMap</span> | <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;</li><li>  <span class="hljs-keyword">await</span> image.<span class="hljs-title function_">createPixelMap</span>(color, opts).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">srcPixelMap: image.PixelMap</span>) =&gt;</span> {</li><li>    pixelMap = srcPixelMap;</li><li>  })</li><li>  <span class="hljs-keyword">if</span> (pixelMap != <span class="hljs-literal">undefined</span>) {</li><li>    <span class="hljs-comment">// 序列化。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">parcelable</span>: <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pixelMap);</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">data</span>: rpc.<span class="hljs-property">MessageSequence</span> = rpc.<span class="hljs-property">MessageSequence</span>.<span class="hljs-title function_">create</span>();</li><li>    data.<span class="hljs-title function_">writeParcelable</span>(parcelable);</li><li>
</li><li>    <span class="hljs-comment">// 反序列化rpc获取到data。</span></li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">ret</span>: <span class="hljs-title class_">MySequence</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySequence</span>(pixelMap);</li><li>    data.<span class="hljs-title function_">readParcelable</span>(ret);</li><li>
</li><li>    <span class="hljs-comment">// 获取到pixelmap。</span></li><li>    <span class="hljs-keyword">let</span> newPixelmap = ret.<span class="hljs-property">pixel_map</span>;</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepixelmapfromsurface11" device-type="phone,2in1,tablet,wearable,tv">image.createPixelMapFromSurface<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepixelmapfromsurface11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapFromSurface(surfaceId: string, region: Region): Promise&lt;PixelMap&gt;</p>     <p>根据Surface ID和区域信息创建一个PixelMap对象。该区域的大小由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#region8">Region</a>.size指定。使用Promise异步回调。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当设备为折叠屏，且折叠状态切换时，可能因Surface自带旋转角度导致接口创建失败。需将宽高适配旋转角度。推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#imagecreatepixelmapfromsurface15">image.createPixelMapFromSurface</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">surfaceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">对应Surface的ID，可通过预览组件获取，如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent">XComponent</a>组件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">region</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#region8">Region</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">截取的画面区域。仅支持从画面左上角开始截取部分或整个画面，即Region中的x和y必须为0，Region.size中width和height的取值范围分别为[1, 预览流宽度]和[1, 预览流高度]。如需截取任意区域，可先使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#imagecreatepixelmapfromsurface15">image.createPixelMapFromSurface</a>获取整个画面，再使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap#crop9">crop</a>截取所需区域。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回PixelMap。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.9.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">62980115</td>         <td class="cellrowborder" width="50%">If the image parameter invalid.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980105</td>         <td class="cellrowborder" width="50%">Failed to get the data.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980178</td>         <td class="cellrowborder" width="50%">Failed to create the PixelMap.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapFromSurface</span>(<span class="hljs-params">surfaceId: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">region</span>: image.<span class="hljs-property">Region</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> } };</li><li>  image.<span class="hljs-title function_">createPixelMapFromSurface</span>(surfaceId, region).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelmap from Surface'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create pixelmap. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepixelmapfromsurfacesync12" device-type="phone,2in1,tablet,wearable,tv">image.createPixelMapFromSurfaceSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepixelmapfromsurfacesync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapFromSurfaceSync(surfaceId: string, region: Region): PixelMap</p>     <p>以同步方式，根据Surface ID和区域信息创建一个PixelMap对象。该区域的大小由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#region8">Region</a>.size指定。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>当设备为折叠屏，且折叠状态切换时，可能因Surface自带旋转角度导致接口创建失败。需将宽高适配旋转角度。推荐使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#imagecreatepixelmapfromsurfacesync15">image.createPixelMapFromSurfaceSync</a>。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">surfaceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">对应Surface的ID，可通过预览组件获取，如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent">XComponent</a>组件。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">region</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#region8">Region</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">截取的画面区域。仅支持从画面左上角开始截取部分或整个画面，即Region中的x和y必须为0，Region.size中width和height的取值范围分别为[1, 预览流宽度]和[1, 预览流高度]。如需截取任意区域，可先使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#imagecreatepixelmapfromsurfacesync15">image.createPixelMapFromSurfaceSync</a>获取整个画面，再使用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap#cropsync12">cropSync</a>截取所需区域。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.10.12.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980105</td>         <td class="cellrowborder" width="50%">Failed to get the data.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980178</td>         <td class="cellrowborder" width="50%">Failed to create the PixelMap.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params">surfaceId: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">region</span>: image.<span class="hljs-property">Region</span> = { <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> } };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">pixelMap</span>: image.<span class="hljs-property">PixelMap</span> = image.<span class="hljs-title function_">createPixelMapFromSurfaceSync</span>(surfaceId, region);</li><li>  <span class="hljs-keyword">return</span> pixelMap;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepixelmapfromsurface15" device-type="phone,2in1,tablet,wearable,tv">image.createPixelMapFromSurface<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepixelmapfromsurface15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapFromSurface(surfaceId: string): Promise&lt;PixelMap&gt;</p>     <p>从Surface ID创建一个PixelMap对象。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">surfaceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">对应Surface的ID，可通过预览组件获取，如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent">XComponent</a>组件。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a>&gt;</td>         <td class="cellrowborder" width="50%">Promise对象，返回PixelMap。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.11.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980105</td>         <td class="cellrowborder" width="50%">Failed to get the data</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980178</td>         <td class="cellrowborder" width="50%">Failed to create the PixelMap</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapFromSurface</span>(<span class="hljs-params">surfaceId: <span class="hljs-built_in">string</span></span>) {</li><li>  image.<span class="hljs-title function_">createPixelMapFromSurface</span>(surfaceId).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelmap from Surface'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to create pixelmap. code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  });</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepixelmapfromsurfacesync15" device-type="phone,2in1,tablet,wearable,tv">image.createPixelMapFromSurfaceSync<sup>15+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepixelmapfromsurfacesync15" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapFromSurfaceSync(surfaceId: string): PixelMap</p>     <p>从Surface ID创建一个PixelMap对象，同步返回PixelMap结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">surfaceId</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">对应Surface的ID，可通过预览组件获取，如<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-basic-components-xcomponent">XComponent</a>组件。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.12.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980105</td>         <td class="cellrowborder" width="50%">Failed to get the data</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980178</td>         <td class="cellrowborder" width="50%">Failed to create the PixelMap</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapFromSurfaceSync</span>(<span class="hljs-params">surfaceId: <span class="hljs-built_in">string</span></span>) {</li><li>  <span class="hljs-keyword">let</span> pixelMap : image.<span class="hljs-property">PixelMap</span> = image.<span class="hljs-title function_">createPixelMapFromSurfaceSync</span>(surfaceId);</li><li>  <span class="hljs-keyword">return</span> pixelMap;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepixelmapsync12" device-type="phone,2in1,tablet,wearable,tv">image.createPixelMapSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepixelmapsync12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapSync(colors: ArrayBuffer, options: InitializationOptions): PixelMap</p>     <p>通过属性创建PixelMap，默认采用BGRA_8888格式处理数据，同步返回结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">colors</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>图像像素数据的缓冲区，用于初始化PixelMap的像素。初始化前，缓冲区中的像素格式需要由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">InitializationOptions</a>.srcPixelFormat指定。</p>          <p><strong>说明：</strong> 图像像素数据的缓冲区长度：length = width * height * 单位像素字节数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">InitializationOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建像素的属性，包括透明度，尺寸，缩略值，像素格式和是否可编辑。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.13.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapSync</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> } }</li><li>  <span class="hljs-keyword">let</span> pixelMap : image.<span class="hljs-property">PixelMap</span> = image.<span class="hljs-title function_">createPixelMapSync</span>(color, opts);</li><li>  <span class="hljs-keyword">return</span> pixelMap;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepixelmapsync12-1" device-type="phone,2in1,tablet,wearable,tv">image.createPixelMapSync<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepixelmapsync12-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapSync(options: InitializationOptions): PixelMap</p>     <p>通过属性创建PixelMap，同步返回PixelMap结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">InitializationOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建像素的属性，包括透明度，尺寸，缩略值，像素格式和是否可编辑。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.14.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapSync</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> } }</li><li>  <span class="hljs-keyword">let</span> pixelMap : image.<span class="hljs-property">PixelMap</span> = image.<span class="hljs-title function_">createPixelMapSync</span>(opts);</li><li>  <span class="hljs-keyword">return</span> pixelMap;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepixelmapusingallocatorsync20" device-type="phone,2in1,tablet,wearable,tv">image.createPixelMapUsingAllocatorSync<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepixelmapusingallocatorsync20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapUsingAllocatorSync(colors: ArrayBuffer, param: InitializationOptions, allocatorType?: AllocatorType): PixelMap</p>     <p>通过指定属性以及内存类型创建PixelMap，默认采用BGRA_8888格式处理数据，同步返回结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">colors</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>图像像素数据的缓冲区，用于初始化PixelMap的像素。初始化前，缓冲区中的像素格式需要由<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">InitializationOptions</a>.srcPixelFormat指定。</p>          <p><strong>说明：</strong> 图像像素数据的缓冲区长度：length = width * height * 单位像素字节数。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">param</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">InitializationOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建像素的属性，包括透明度、尺寸、缩略值、像素格式和是否可编辑。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">allocatorType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#allocatortype15">AllocatorType</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>指定创建pixelmap的内存类型，默认内存类型是AllocatorType.AUTO。</p>          <p>1. image.AllocatorType.AUTO：不支持该内存类型的格式有UNKNOWN、YCBCR_P010、YCRCB_P010和ASTC_4x4。RGBA_1010102默认申请DMA内存。其他格式（RGB_565、RGBA_8888、BGRA_8888和RGBAF_16）尺寸大于512*512默认申请DMA内存，否则申请共享内存。</p>          <p>2. image.AllocatorType.DMA：RGBA_1010102、RGB_565、RGBA_8888、BGRA_8888和RGBAF_16支持DMA内存类型，其余格式不支持。</p>          <p>3. image.AllocatorType.SHARED：UNKNOWN、RGBA_1010102、YCBCR_P010、YCRCB_P010和ASTC_4x4不支持共享内存，其余格式支持。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.15.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">7600201</td>         <td class="cellrowborder" width="50%">Unsupported operation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7600301</td>         <td class="cellrowborder" width="50%">Memory alloc failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7600302</td>         <td class="cellrowborder" width="50%">Memory copy failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapSync</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">srcPixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> } }</li><li>  <span class="hljs-keyword">let</span> pixelMap : image.<span class="hljs-property">PixelMap</span> = image.<span class="hljs-title function_">createPixelMapUsingAllocatorSync</span>(color, opts, image.<span class="hljs-property">AllocatorType</span>.<span class="hljs-property">AUTO</span>);</li><li>  <span class="hljs-keyword">return</span> pixelMap;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepixelmapusingallocatorsync20-1" device-type="phone,2in1,tablet,wearable,tv">image.createPixelMapUsingAllocatorSync<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepixelmapusingallocatorsync20-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPixelMapUsingAllocatorSync(param: InitializationOptions, allocatorType?: AllocatorType): PixelMap</p>     <p>通过属性创建PixelMap，同步返回PixelMap结果。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">param</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#initializationoptions8">InitializationOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">创建像素的属性，包括透明度、尺寸、缩略值、像素格式和是否可编辑。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">allocatorType</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#allocatortype15">AllocatorType</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">          <p>指定创建pixelmap的内存类型，默认内存类型是AllocatorType.AUTO。</p>          <p>1. image.AllocatorType.AUTO：不支持该内存类型的格式有UNKNOWN和ASTC_4x4。RGBA_1010102、YCBCR_P010、YCRCB_P010格式默认申请DMA内存。其他格式（RGB_565, RGBA_8888, BGRA_8888, RGBAF_16）尺寸大于512*512默认申请DMA内存，否则申请共享内存。</p>          <p>2. image.AllocatorType.DMA：RGB_565、RGBA_8888、BGRA_8888、RGBAF_16、RGBA_1010102、YCBCR_P010和YCRCB_P010支持DMA内存类型，其余格式不支持。</p>          <p>3. image.AllocatorType.SHARED：UNKNOWN、RGBA_1010102、YCBCR_P010、YCRCB_P010和ASTC_4x4不支持共享内存，其余格式支持。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="50%">成功同步返回PixelMap对象，失败抛出异常。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.16.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">7600201</td>         <td class="cellrowborder" width="50%">Unsupported operation.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">7600301</td>         <td class="cellrowborder" width="50%">Memory alloc failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePixelMapSync</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">opts</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">6</span> } }</li><li>  <span class="hljs-keyword">let</span> pixelMap : image.<span class="hljs-property">PixelMap</span> = image.<span class="hljs-title function_">createPixelMapUsingAllocatorSync</span>(opts, image.<span class="hljs-property">AllocatorType</span>.<span class="hljs-property">AUTO</span>);</li><li>  <span class="hljs-keyword">return</span> pixelMap;</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepremultipliedpixelmap12" device-type="phone,2in1,tablet,wearable,tv">image.createPremultipliedPixelMap<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepremultipliedpixelmap12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPremultipliedPixelMap(src: PixelMap, dst: PixelMap, callback: AsyncCallback&lt;void&gt;): void</p>     <p>将PixelMap的透明通道非预乘模式转变为预乘模式，转换后的数据存入目标PixelMap。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">src</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">源PixelMap对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">dst</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标PixelMap对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当创建PixelMap成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.17.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980103</td>         <td class="cellrowborder" width="50%">The image data is not supported</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980246</td>         <td class="cellrowborder" width="50%">Failed to read the pixelMap</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980248</td>         <td class="cellrowborder" width="50%">Pixelmap not allow modify</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePremultipliedPixelMap</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>); <span class="hljs-comment">// 16为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> bufferArr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i += <span class="hljs-number">4</span>) {</li><li>    bufferArr[i] = <span class="hljs-number">255</span>;</li><li>    bufferArr[i+<span class="hljs-number">1</span>] = <span class="hljs-number">255</span>;</li><li>    bufferArr[i+<span class="hljs-number">2</span>] = <span class="hljs-number">122</span>;</li><li>    bufferArr[i+<span class="hljs-number">3</span>] = <span class="hljs-number">122</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">optsForUnpre</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> } , <span class="hljs-attr">alphaType</span>: image.<span class="hljs-property">AlphaType</span>.<span class="hljs-property">UNPREMUL</span>}</li><li>  <span class="hljs-keyword">let</span> srcPixelmap = image.<span class="hljs-title function_">createPixelMapSync</span>(color, optsForUnpre);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">optsForPre</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> } , <span class="hljs-attr">alphaType</span>: image.<span class="hljs-property">AlphaType</span>.<span class="hljs-property">PREMUL</span>}</li><li>  <span class="hljs-keyword">let</span> dstPixelMap = image.<span class="hljs-title function_">createPixelMapSync</span>(optsForPre);</li><li>  image.<span class="hljs-title function_">createPremultipliedPixelMap</span>(srcPixelmap, dstPixelMap, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span>(error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to convert pixelmap, error code is <span class="hljs-subst">${error}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in converting pixelmap.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreatepremultipliedpixelmap12-1" device-type="phone,2in1,tablet,wearable,tv">image.createPremultipliedPixelMap<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreatepremultipliedpixelmap12-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createPremultipliedPixelMap(src: PixelMap, dst: PixelMap): Promise&lt;void&gt;</p>     <p>将PixelMap数据按照透明度非预乘格式转为预乘格式，转换后的数据存入另一个PixelMap。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">src</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">源PixelMap对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">dst</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标PixelMap对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.18.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980103</td>         <td class="cellrowborder" width="50%">The image data is not supported</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980246</td>         <td class="cellrowborder" width="50%">Failed to read the pixelMap</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980248</td>         <td class="cellrowborder" width="50%">Pixelmap not allow modify</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreatePremultipliedPixelMap</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>); <span class="hljs-comment">// 16为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> bufferArr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i += <span class="hljs-number">4</span>) {</li><li>    bufferArr[i] = <span class="hljs-number">255</span>;</li><li>    bufferArr[i+<span class="hljs-number">1</span>] = <span class="hljs-number">255</span>;</li><li>    bufferArr[i+<span class="hljs-number">2</span>] = <span class="hljs-number">122</span>;</li><li>    bufferArr[i+<span class="hljs-number">3</span>] = <span class="hljs-number">122</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">optsForUnpre</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> } , <span class="hljs-attr">alphaType</span>: image.<span class="hljs-property">AlphaType</span>.<span class="hljs-property">UNPREMUL</span>}</li><li>  <span class="hljs-keyword">let</span> srcPixelmap = image.<span class="hljs-title function_">createPixelMapSync</span>(color, optsForUnpre);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">optsForPre</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> } , <span class="hljs-attr">alphaType</span>: image.<span class="hljs-property">AlphaType</span>.<span class="hljs-property">PREMUL</span>}</li><li>  <span class="hljs-keyword">let</span> dstPixelMap = image.<span class="hljs-title function_">createPixelMapSync</span>(optsForPre);</li><li>  image.<span class="hljs-title function_">createPremultipliedPixelMap</span>(srcPixelmap, dstPixelMap).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in converting pixelmap.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to convert pixelmap, error code is <span class="hljs-subst">${error}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateunpremultipliedpixelmap12" device-type="phone,2in1,tablet,wearable,tv">image.createUnpremultipliedPixelMap<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateunpremultipliedpixelmap12" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createUnpremultipliedPixelMap(src: PixelMap, dst: PixelMap, callback: AsyncCallback&lt;void&gt;): void</p>     <p>将PixelMap的透明通道预乘模式转变为非预乘模式，转换后的数据存入目标PixelMap。使用callback异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">src</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">源PixelMap对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">dst</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标PixelMap对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">callback</td>         <td class="cellrowborder" width="25%">AsyncCallback&lt;void&gt;</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">回调函数，当创建PixelMap成功，err为undefined，否则为错误对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.19.9.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980103</td>         <td class="cellrowborder" width="50%">The image data is not supported</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980246</td>         <td class="cellrowborder" width="50%">Failed to read the pixelMap</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980248</td>         <td class="cellrowborder" width="50%">Pixelmap not allow modify</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateUnpremultipliedPixelMap</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>); <span class="hljs-comment">// 16为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> bufferArr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i += <span class="hljs-number">4</span>) {</li><li>    bufferArr[i] = <span class="hljs-number">255</span>;</li><li>    bufferArr[i+<span class="hljs-number">1</span>] = <span class="hljs-number">255</span>;</li><li>    bufferArr[i+<span class="hljs-number">2</span>] = <span class="hljs-number">122</span>;</li><li>    bufferArr[i+<span class="hljs-number">3</span>] = <span class="hljs-number">122</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">optsForPre</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> } , <span class="hljs-attr">alphaType</span>: image.<span class="hljs-property">AlphaType</span>.<span class="hljs-property">PREMUL</span>}</li><li>  <span class="hljs-keyword">let</span> srcPixelmap = image.<span class="hljs-title function_">createPixelMapSync</span>(color, optsForPre);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">optsForUnpre</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> } , <span class="hljs-attr">alphaType</span>: image.<span class="hljs-property">AlphaType</span>.<span class="hljs-property">UNPREMUL</span>}</li><li>  <span class="hljs-keyword">let</span> dstPixelMap = image.<span class="hljs-title function_">createPixelMapSync</span>(optsForUnpre);</li><li>  image.<span class="hljs-title function_">createUnpremultipliedPixelMap</span>(srcPixelmap, dstPixelMap, <span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">if</span>(error) {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to convert pixelmap, error code is <span class="hljs-subst">${error}</span>`</span>);</li><li>      <span class="hljs-keyword">return</span>;</li><li>    } <span class="hljs-keyword">else</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in converting pixelmap.'</span>);</li><li>    }</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateunpremultipliedpixelmap12-1" device-type="phone,2in1,tablet,wearable,tv">image.createUnpremultipliedPixelMap<sup>12+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateunpremultipliedpixelmap12-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createUnpremultipliedPixelMap(src: PixelMap, dst: PixelMap): Promise&lt;void&gt;</p>     <p>将PixelMap的透明通道预乘模式转变为非预乘模式，转换后的数据存入目标PixelMap。使用Promise异步回调。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">src</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">源PixelMap对象。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">dst</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-pixelmap">PixelMap</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">目标PixelMap对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">Promise&lt;void&gt;</td>         <td class="cellrowborder" width="50%">Promise对象。无返回结果的Promise对象。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-image">Image错误码</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.20.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error. Possible causes: 1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980103</td>         <td class="cellrowborder" width="50%">The image data is not supported.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980246</td>         <td class="cellrowborder" width="50%">Failed to read the pixelMap.</td>        </tr>        <tr>         <td class="cellrowborder" width="50%">62980248</td>         <td class="cellrowborder" width="50%">Pixelmap not allow modify.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateUnpremultipliedPixelMap</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">color</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">16</span>); <span class="hljs-comment">// 16为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">let</span> bufferArr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(color);</li><li>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bufferArr.<span class="hljs-property">length</span>; i += <span class="hljs-number">4</span>) {</li><li>    bufferArr[i] = <span class="hljs-number">255</span>;</li><li>    bufferArr[i+<span class="hljs-number">1</span>] = <span class="hljs-number">255</span>;</li><li>    bufferArr[i+<span class="hljs-number">2</span>] = <span class="hljs-number">122</span>;</li><li>    bufferArr[i+<span class="hljs-number">3</span>] = <span class="hljs-number">122</span>;</li><li>  }</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">optsForPre</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> } , <span class="hljs-attr">alphaType</span>: image.<span class="hljs-property">AlphaType</span>.<span class="hljs-property">PREMUL</span>}</li><li>  <span class="hljs-keyword">let</span> srcPixelmap = image.<span class="hljs-title function_">createPixelMapSync</span>(color, optsForPre);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">optsForUnpre</span>: image.<span class="hljs-property">InitializationOptions</span> = { <span class="hljs-attr">editable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pixelFormat</span>: image.<span class="hljs-property">PixelMapFormat</span>.<span class="hljs-property">RGBA_8888</span>, <span class="hljs-attr">size</span>: { <span class="hljs-attr">height</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">2</span> } , <span class="hljs-attr">alphaType</span>: image.<span class="hljs-property">AlphaType</span>.<span class="hljs-property">UNPREMUL</span>}</li><li>  <span class="hljs-keyword">let</span> dstPixelMap = image.<span class="hljs-title function_">createPixelMapSync</span>(optsForUnpre);</li><li>  image.<span class="hljs-title function_">createUnpremultipliedPixelMap</span>(srcPixelmap, dstPixelMap).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in converting pixelmap.'</span>);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to convert pixelmap, error code is <span class="hljs-subst">${error}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateimagesource" device-type="phone,2in1,tablet,wearable,tv">image.createImageSource<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateimagesource" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageSource(uri: string): ImageSource</p>     <p>通过传入的uri创建ImageSource实例。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>图片路径，当前仅支持应用沙箱路径。</p>          <p>当前支持格式有：.jpg .png .gif .bmp .webp .dng .heic<sup>12+</sup>（不同硬件设备支持情况不同） <a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#svg标签说明">.svg<sup>10+</sup></a> .ico<sup>11+</sup>。</p></td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.21.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource">ImageSource</a></td>         <td class="cellrowborder" width="50%">返回ImageSource类实例，失败时返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateImageSource</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-comment">// 此处'test.jpg'仅作示例，请开发者自行替换。否则imageSource会创建失败，导致后续无法正常执行。</span></li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">filesDir</span> + <span class="hljs-string">"/test.jpg"</span>;</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">imageSourceObj</span>: image.<span class="hljs-property">ImageSource</span> = image.<span class="hljs-title function_">createImageSource</span>(path);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateimagesource9" device-type="phone,2in1,tablet,wearable,tv">image.createImageSource<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateimagesource9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageSource(uri: string, options: SourceOptions): ImageSource</p>     <p>通过传入的uri创建ImageSource实例。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">uri</td>         <td class="cellrowborder" width="25%">string</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">          <p>图片路径，当前仅支持应用沙箱路径。</p>          <p>当前支持格式有：.jpg .png .gif .bmp .webp .dng .heic<sup>12+</sup>（不同硬件设备支持情况不同）<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#svg标签说明">.svg<sup>10+</sup></a> .ico<sup>11+</sup>。</p></td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#sourceoptions9">SourceOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片属性，包括图片像素密度、像素格式和图片尺寸。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.22.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource">ImageSource</a></td>         <td class="cellrowborder" width="50%">返回ImageSource类实例，失败时返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateImageSource</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">sourceOptions</span>: image.<span class="hljs-property">SourceOptions</span> = { <span class="hljs-attr">sourceDensity</span>: <span class="hljs-number">120</span> };</li><li>  <span class="hljs-comment">// 此处'test.png'仅作示例，请开发者自行替换。否则imageSource会创建失败，导致后续无法正常执行。</span></li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">filesDir</span> + <span class="hljs-string">"/test.png"</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">imageSourceObj</span>: image.<span class="hljs-property">ImageSource</span> = image.<span class="hljs-title function_">createImageSource</span>(path, sourceOptions);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateimagesource7" device-type="phone,2in1,tablet,wearable,tv">image.createImageSource<sup>7+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateimagesource7" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageSource(fd: number): ImageSource</p>     <p>通过传入文件描述符来创建ImageSource实例。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">fd</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文件描述符fd。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.23.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource">ImageSource</a></td>         <td class="cellrowborder" width="50%">返回ImageSource类实例，失败时返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateImageSource</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-comment">// 此处'test.jpg'仅作示例，请开发者自行替换，否则imageSource会创建失败导致后续无法正常执行。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">filePath</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">filesDir</span> + <span class="hljs-string">"/test.jpg"</span>;</li><li>  <span class="hljs-keyword">let</span> file = fs.<span class="hljs-title function_">openSync</span>(filePath, fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span> | fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">imageSourceObj</span>: image.<span class="hljs-property">ImageSource</span> = image.<span class="hljs-title function_">createImageSource</span>(file.<span class="hljs-property">fd</span>);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateimagesource9-1" device-type="phone,2in1,tablet,wearable,tv">image.createImageSource<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateimagesource9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageSource(fd: number, options: SourceOptions): ImageSource</p>     <p>通过传入文件描述符来创建ImageSource实例。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">fd</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">文件描述符fd。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#sourceoptions9">SourceOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片属性，包括图片像素密度、像素格式和图片尺寸。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.24.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource">ImageSource</a></td>         <td class="cellrowborder" width="50%">返回ImageSource类实例，失败时返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { fileIo <span class="hljs-keyword">as</span> fs } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.CoreFileKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateImageSource</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">sourceOptions</span>: image.<span class="hljs-property">SourceOptions</span> = { <span class="hljs-attr">sourceDensity</span>: <span class="hljs-number">120</span> };</li><li>  <span class="hljs-comment">// 此处'test.jpg'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">filePath</span>: <span class="hljs-built_in">string</span> = context.<span class="hljs-property">filesDir</span> + <span class="hljs-string">"/test.jpg"</span>;</li><li>  <span class="hljs-keyword">let</span> file = fs.<span class="hljs-title function_">openSync</span>(filePath, fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">CREATE</span> | fs.<span class="hljs-property">OpenMode</span>.<span class="hljs-property">READ_WRITE</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">imageSourceObj</span>: image.<span class="hljs-property">ImageSource</span> = image.<span class="hljs-title function_">createImageSource</span>(file.<span class="hljs-property">fd</span>, sourceOptions);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateimagesource9-2" device-type="phone,2in1,tablet,wearable,tv">image.createImageSource<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateimagesource9-2" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageSource(buf: ArrayBuffer): ImageSource</p>     <p>通过缓冲区创建ImageSource实例。buf数据应该是未解码的数据，不要传入类似于RBGA，YUV的像素buffer数据，如果想通过像素buffer数据创建pixelMap，可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#createpixelmapsync12">image.createPixelMapSync</a>这一类接口。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像缓冲区数组。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.25.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource">ImageSource</a></td>         <td class="cellrowborder" width="50%">返回ImageSource类实例，失败时返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateImageSource</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">buf</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">96</span>); <span class="hljs-comment">// 96为需要创建的像素buffer大小，取值为：height * width *4。</span></li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">imageSourceObj</span>: image.<span class="hljs-property">ImageSource</span> = image.<span class="hljs-title function_">createImageSource</span>(buf);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateimagesource9-3" device-type="phone,2in1,tablet,wearable,tv">image.createImageSource<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateimagesource9-3" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageSource(buf: ArrayBuffer, options: SourceOptions): ImageSource</p>     <p>通过缓冲区创建ImageSource实例。buf数据应该是未解码的数据，不要传入类似于RBGA，YUV的像素buffer数据，如果想通过像素buffer数据创建pixelMap，可以调用<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#createpixelmapsync12">image.createPixelMapSync</a>这一类接口。</p>     <p><strong>卡片能力：</strong> 从API version 12开始，该接口支持在ArkTS卡片中使用。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像缓冲区数组。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#sourceoptions9">SourceOptions</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图片属性，包括图片像素密度、像素格式和图片尺寸。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.26.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource">ImageSource</a></td>         <td class="cellrowborder" width="50%">返回ImageSource类实例，失败时返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateImageSource</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">ArrayBuffer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">112</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">sourceOptions</span>: image.<span class="hljs-property">SourceOptions</span> = { <span class="hljs-attr">sourceDensity</span>: <span class="hljs-number">120</span> };</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">imageSourceObj</span>: image.<span class="hljs-property">ImageSource</span> = image.<span class="hljs-title function_">createImageSource</span>(data, sourceOptions);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateimagesource11" device-type="phone,2in1,tablet,wearable,tv">image.createImageSource<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateimagesource11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageSource(rawfile: resourceManager.RawFileDescriptor, options?: SourceOptions): ImageSource</p>     <p>通过图像资源文件的RawFileDescriptor创建ImageSource实例。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">rawfile</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-resource-manager#rawfiledescriptor9">resourceManager.RawFileDescriptor</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像资源文件的RawFileDescriptor。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#sourceoptions9">SourceOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">图片属性，包括图片像素密度、像素格式和图片尺寸。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.27.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource">ImageSource</a></td>         <td class="cellrowborder" width="50%">返回ImageSource类实例，失败时返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { resourceManager } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.LocalizationKit'</span>;</li><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>  </li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateImageSource</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-comment">// 获取resourceManager资源管理器。</span></li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">resourceMgr</span>: resourceManager.<span class="hljs-property">ResourceManager</span> = context.<span class="hljs-property">resourceManager</span>;</li><li>  <span class="hljs-comment">// 此处'test.jpg'仅作示例，请开发者自行替换，否则imageSource创建失败会导致后续无法正常执行。</span></li><li>  resourceMgr.<span class="hljs-title function_">getRawFd</span>(<span class="hljs-string">'test.jpg'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">rawFileDescriptor: resourceManager.RawFileDescriptor</span>) =&gt;</span> {</li><li>    <span class="hljs-keyword">const</span> <span class="hljs-attr">imageSourceObj</span>: image.<span class="hljs-property">ImageSource</span> = image.<span class="hljs-title function_">createImageSource</span>(rawFileDescriptor);</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to get RawFileDescriptor.code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateincrementalsource9" device-type="phone,2in1,tablet,wearable,tv">image.CreateIncrementalSource<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateincrementalsource9" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>CreateIncrementalSource(buf: ArrayBuffer): ImageSource</p>     <p>通过缓冲区以增量的方式创建ImageSource实例，IncrementalSource不支持读写Exif信息。</p>     <p>以增量方式创建的ImageSource实例，仅支持使用以下功能，同步、异步callback、异步Promise均支持。</p>     <ul>      <li>获取图片信息：指定序号-<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#getimageinfo">getImageInfo</a>、直接获取-<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#getimageinfo-1">getImageInfo</a></li>      <li>获取图片中给定索引处图像的指定属性键的值：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#getimageproperty11">getImageProperty</a></li>      <li>批量获取图片中的指定属性键的值：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#getimageproperties12">getImageProperties</a></li>      <li>更新增量数据：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#updatedata9">updateData</a></li>      <li>创建PixelMap对象：通过图片解码参数创建-<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#createpixelmap7">createPixelMap</a>、通过默认参数创建-<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#createpixelmap7-1">createPixelMap</a> 、通过图片解码参数-<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#createpixelmap7-2">createPixelMap</a></li>      <li>释放ImageSource实例：<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#release">release</a></li>     </ul>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.8.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">增量数据。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.28.10.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource">ImageSource</a></td>         <td class="cellrowborder" width="50%">返回ImageSource，失败时返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateIncrementalImageSource</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-keyword">let</span> imageArray = context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getMediaContentSync</span>($r(<span class="hljs-string">'app.media.startIcon'</span>).<span class="hljs-property">id</span>); <span class="hljs-comment">// 获取图像资源。</span></li><li>  <span class="hljs-comment">// 此处'app.media.startIcon'仅作示例，请开发者自行替换，否则imageArray创建失败会导致后续无法正常执行。</span></li><li>  <span class="hljs-keyword">let</span> splitBuff1 = imageArray.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, imageArray.<span class="hljs-property">byteLength</span> / <span class="hljs-number">2</span>);  <span class="hljs-comment">// 分片。</span></li><li>  <span class="hljs-keyword">let</span> splitBuff2 = imageArray.<span class="hljs-title function_">slice</span>(imageArray.<span class="hljs-property">byteLength</span> / <span class="hljs-number">2</span>);</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">imageSourceIncrementalSApi</span>: image.<span class="hljs-property">ImageSource</span> = image.<span class="hljs-title class_">CreateIncrementalSource</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(imageArray.<span class="hljs-property">byteLength</span>));</li><li>  imageSourceIncrementalSApi.<span class="hljs-title function_">updateData</span>(splitBuff1, <span class="hljs-literal">false</span>, <span class="hljs-number">0</span>, splitBuff1.<span class="hljs-property">byteLength</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    imageSourceIncrementalSApi.<span class="hljs-title function_">updateData</span>(splitBuff2, <span class="hljs-literal">true</span>, <span class="hljs-number">0</span>, splitBuff2.<span class="hljs-property">byteLength</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-keyword">let</span> pixelMap = imageSourceIncrementalSApi.<span class="hljs-title function_">createPixelMapSync</span>();</li><li>      <span class="hljs-keyword">let</span> imageInfo = pixelMap.<span class="hljs-title function_">getImageInfoSync</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMap'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to updateData error code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to updateData error code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateincrementalsource9-1" device-type="phone,2in1,tablet,wearable,tv">image.CreateIncrementalSource<sup>9+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateincrementalsource9-1" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>CreateIncrementalSource(buf: ArrayBuffer, options?: SourceOptions): ImageSource</p>     <p>通过缓冲区以增量的方式创建ImageSource实例，IncrementalSource不支持读写Exif信息。</p>     <p>此接口支持的功能与<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#imagecreateincrementalsource9">CreateIncrementalSource(buf: ArrayBuffer): ImageSource</a>所生成的实例支持的功能相同。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">buf</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">增量数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">options</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#sourceoptions9">SourceOptions</a></td>         <td class="cellrowborder" width="25%">否</td>         <td class="cellrowborder" width="25%">图片属性，包括图片像素密度、像素格式和图片尺寸。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.29.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource">ImageSource</a></td>         <td class="cellrowborder" width="50%">返回ImageSource，失败时返回undefined。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;</li><li>
</li><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateIncrementalImageSource</span>(<span class="hljs-params">context : Context</span>) {</li><li>  <span class="hljs-keyword">let</span> imageArray = context.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getMediaContentSync</span>($r(<span class="hljs-string">'app.media.startIcon'</span>).<span class="hljs-property">id</span>); <span class="hljs-comment">// 获取图像资源。</span></li><li>  <span class="hljs-comment">// 此处'app.media.startIcon'仅作示例，请开发者自行替换，否则imageArray创建失败会导致后续无法正常执行。</span></li><li>  <span class="hljs-keyword">let</span> splitBuff1 = imageArray.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, imageArray.<span class="hljs-property">byteLength</span> / <span class="hljs-number">2</span>);  <span class="hljs-comment">// 分片。</span></li><li>  <span class="hljs-keyword">let</span> splitBuff2 = imageArray.<span class="hljs-title function_">slice</span>(imageArray.<span class="hljs-property">byteLength</span> / <span class="hljs-number">2</span>);</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">sourceOptions</span>: image.<span class="hljs-property">SourceOptions</span> = { <span class="hljs-attr">sourceDensity</span>: <span class="hljs-number">120</span>};</li><li>
</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">imageSourceIncrementalSApi</span>: image.<span class="hljs-property">ImageSource</span> = image.<span class="hljs-title class_">CreateIncrementalSource</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(imageArray.<span class="hljs-property">byteLength</span>), sourceOptions);</li><li>  imageSourceIncrementalSApi.<span class="hljs-title function_">updateData</span>(splitBuff1, <span class="hljs-literal">false</span>, <span class="hljs-number">0</span>, splitBuff1.<span class="hljs-property">byteLength</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>    imageSourceIncrementalSApi.<span class="hljs-title function_">updateData</span>(splitBuff2, <span class="hljs-literal">true</span>, <span class="hljs-number">0</span>, splitBuff2.<span class="hljs-property">byteLength</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {</li><li>      <span class="hljs-keyword">let</span> pixelMap = imageSourceIncrementalSApi.<span class="hljs-title function_">createPixelMapSync</span>();</li><li>      <span class="hljs-keyword">let</span> imageInfo = pixelMap.<span class="hljs-title function_">getImageInfoSync</span>();</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Succeeded in creating pixelMap'</span>);</li><li>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>) =&gt;</span> {</li><li>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to updateData error code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>    })</li><li>  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error : BusinessError</span>) =&gt;</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed to updateData error code is <span class="hljs-subst">${error.code}</span>, message is <span class="hljs-subst">${error.message}</span>`</span>);</li><li>  })</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagegetimagesourcesupportedformats20" device-type="phone,2in1,tablet,wearable,tv">image.getImageSourceSupportedFormats<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagegetimagesourcesupportedformats20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImageSourceSupportedFormats(): string[]</p>     <p>获取支持解码的图片格式，图片格式以mime type表示。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageSource</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.30.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string[]</td>         <td class="cellrowborder" width="50%">支持解码的图片格式（mime type）列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImageSourceSupportedFormats</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> formats = image.<span class="hljs-title function_">getImageSourceSupportedFormats</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'formats:'</span>, formats);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateimagepacker" device-type="phone,2in1,tablet,wearable,tv">image.createImagePacker<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateimagepacker" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImagePacker(): ImagePacker</p>     <p>创建ImagePacker实例。</p>     <p><strong>元服务API：</strong> 从API version 11开始，该接口支持在元服务中使用。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImagePacker</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.31.7.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagepacker">ImagePacker</a></td>         <td class="cellrowborder" width="50%">返回ImagePacker实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateImagePacker</span>(<span class="hljs-params"></span>) {</li><li>  <span class="hljs-keyword">const</span> <span class="hljs-attr">imagePackerObj</span>: image.<span class="hljs-property">ImagePacker</span> = image.<span class="hljs-title function_">createImagePacker</span>();</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagegetimagepackersupportedformats20" device-type="phone,2in1,tablet,wearable,tv">image.getImagePackerSupportedFormats<sup>20+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagegetimagepackersupportedformats20" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>getImagePackerSupportedFormats(): string[]</p>     <p>获取支持编码的图片格式，图片格式以mime type表示。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImagePacker</p>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.32.6.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%">string[]</td>         <td class="cellrowborder" width="50%">支持编码的图片格式（mime type）列表。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetImagePackerSupportedFormats</span>(<span class="hljs-params"></span>) {</li><li>    <span class="hljs-keyword">let</span> formats = image.<span class="hljs-title function_">getImagePackerSupportedFormats</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'formats:'</span>, formats);</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateauxiliarypicture13" device-type="phone,2in1,tablet,wearable,tv">image.createAuxiliaryPicture<sup>13+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateauxiliarypicture13" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createAuxiliaryPicture(buffer: ArrayBuffer, size: Size, type: AuxiliaryPictureType): AuxiliaryPicture</p>     <p>通过ArrayBuffer图片数据、辅助图尺寸、辅助图类型创建AuxiliaryPicture实例。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.Core</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">buffer</td>         <td class="cellrowborder" width="25%">ArrayBuffer</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">以buffer形式存放的图像数据。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">size</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#size">Size</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">辅助图的尺寸。单位：像素。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">type</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#auxiliarypicturetype13">AuxiliaryPictureType</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">辅助图类型。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-auxiliarypicture">AuxiliaryPicture</a></td>         <td class="cellrowborder" width="50%">如果操作成功，则返回AuxiliaryPicture实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.33.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.Possible causes:1.Mandatory parameters are left unspecified. 2.Incorrect parameter types. 3.Parameter verification failed.</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateAuxiliaryPicture</span>(<span class="hljs-params">context: Context</span>) {</li><li>  <span class="hljs-keyword">let</span> funcName = <span class="hljs-string">"CreateAuxiliaryPicture"</span>;</li><li>  <span class="hljs-keyword">const</span> resourceMgr = context.<span class="hljs-property">resourceManager</span>;</li><li>  <span class="hljs-keyword">const</span> rawFile = <span class="hljs-keyword">await</span> resourceMgr.<span class="hljs-title function_">getRawFileContent</span>(<span class="hljs-string">"hdr.jpg"</span>); <span class="hljs-comment">// 需要支持hdr的图片。</span></li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">auxBuffer</span>: <span class="hljs-title class_">ArrayBuffer</span> = rawFile.<span class="hljs-property">buffer</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ArrayBuffer</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">auxSize</span>: <span class="hljs-title class_">Size</span> = {</li><li>    <span class="hljs-attr">height</span>: <span class="hljs-number">180</span>,</li><li>    <span class="hljs-attr">width</span>: <span class="hljs-number">240</span></li><li>  };</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">auxType</span>: image.<span class="hljs-property">AuxiliaryPictureType</span> = image.<span class="hljs-property">AuxiliaryPictureType</span>.<span class="hljs-property">GAINMAP</span>;</li><li>  <span class="hljs-keyword">let</span> <span class="hljs-attr">auxPictureObj</span>: image.<span class="hljs-property">AuxiliaryPicture</span> | <span class="hljs-literal">null</span> = image.<span class="hljs-title function_">createAuxiliaryPicture</span>(auxBuffer, auxSize, auxType);</li><li>  <span class="hljs-keyword">if</span>(auxPictureObj != <span class="hljs-literal">null</span>) {</li><li>    <span class="hljs-keyword">let</span> <span class="hljs-attr">type</span>: image.<span class="hljs-property">AuxiliaryPictureType</span> = auxPictureObj.<span class="hljs-title function_">getType</span>();</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(funcName, <span class="hljs-string">`CreateAuxiliaryPicture succeeded this.Aux_picture.type <span class="hljs-subst">${<span class="hljs-keyword">type</span>}</span>`</span>);</li><li>  } <span class="hljs-keyword">else</span> {</li><li>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(funcName, <span class="hljs-string">'CreateAuxiliaryPicture failed'</span>);</li><li>  }</li><li>}</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateimagereceiver11" device-type="phone,2in1,tablet,wearable,tv">image.createImageReceiver<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateimagereceiver11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageReceiver(size: Size, format: ImageFormat, capacity: number): ImageReceiver</p>     <p>通过图片大小、图片格式、容量创建ImageReceiver实例。ImageReceiver做为图片的接收方、消费者，它的参数属性实际上不会对接收到的图片产生影响。图片属性的配置应在发送方、生产者进行，如相机预览流<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-camera-cameramanager#createpreviewoutput">createPreviewOutput</a>。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageReceiver</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">size</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#size">Size</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像的默认大小。该参数不会影响接收到的图片大小，实际返回大小由生产者决定，如相机。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">format</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#imageformat9">ImageFormat</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像格式，取值为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#imageformat9">ImageFormat</a>常量（目前仅支持 ImageFormat:JPEG，实际返回格式由生产者决定，如相机）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">capacity</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">同时访问的最大图像数。该参数仅作为期望值，实际capacity由设备硬件决定。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagereceiver">ImageReceiver</a></td>         <td class="cellrowborder" width="50%">如果操作成功，则返回ImageReceiver实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.34.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.Possible causes:1.Mandatory parameters are left unspecified;2.Incorrect parameter types;</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">size</span>: image.<span class="hljs-property">Size</span> = {</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">8192</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">8192</span></li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">receiver</span>: image.<span class="hljs-property">ImageReceiver</span> = image.<span class="hljs-title function_">createImageReceiver</span>(size, image.<span class="hljs-property">ImageFormat</span>.<span class="hljs-property">JPEG</span>, <span class="hljs-number">8</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateimagecreator11" device-type="phone,2in1,tablet,wearable,tv">image.createImageCreator<sup>11+</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateimagecreator11" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageCreator(size: Size, format: ImageFormat, capacity: number): ImageCreator</p>     <p>通过图片大小、图片格式、容量创建ImageCreator实例。</p>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageCreator</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.6.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">size</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-i#size">Size</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像的默认大小。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">format</td>         <td class="cellrowborder" width="25%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#imageformat9">ImageFormat</a></td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像格式，如YCBCR_422_SP，JPEG。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">capacity</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">同时访问的最大图像数。该参数仅作为期望值，实际capacity由设备硬件决定。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.8.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagecreator">ImageCreator</a></td>         <td class="cellrowborder" width="50%">如果操作成功，则返回ImageCreator实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>错误码：</strong></p>     <p>以下错误码的详细介绍请参见<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/errorcode-universal">通用错误码说明文档</a>和。</p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.1" width="50%">错误码ID</th>         <th align="left" class="cellrowborder" id="mcps1.3.35.11.1.3.1.2" width="50%">错误信息</th>        </tr><tr>         <td class="cellrowborder" width="50%">401</td>         <td class="cellrowborder" width="50%">Parameter error.Possible causes:1.Mandatory parameters are left unspecified;2.Incorrect parameter types;</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">size</span>: image.<span class="hljs-property">Size</span> = {</li><li>  <span class="hljs-attr">height</span>: <span class="hljs-number">8192</span>,</li><li>  <span class="hljs-attr">width</span>: <span class="hljs-number">8192</span></li><li>}</li><li><span class="hljs-keyword">let</span> <span class="hljs-attr">creator</span>: image.<span class="hljs-property">ImageCreator</span> = image.<span class="hljs-title function_">createImageCreator</span>(size, image.<span class="hljs-property">ImageFormat</span>.<span class="hljs-property">JPEG</span>, <span class="hljs-number">8</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateimagereceiverdeprecated" device-type="phone,2in1,tablet,wearable,tv">image.createImageReceiver<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateimagereceiverdeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageReceiver(width: number, height: number, format: number, capacity: number): ImageReceiver</p>     <p>通过宽、高、图片格式、容量创建ImageReceiver实例。ImageReceiver做为图片的接收方、消费者，它的参数属性实际上不会对接收到的图片产生影响。图片属性的配置应在发送方、生产者进行，如相机预览流<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-camera-cameramanager#createpreviewoutput">createPreviewOutput</a>。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 9开始支持，从API version 11废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#imagecreateimagereceiver11">createImageReceiver</a>代替。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageReceiver</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">width</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像的默认宽度。单位：像素。该参数不会影响接收到的图片宽度，实际宽度由生产者决定，如相机。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">height</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像的默认高度。单位：像素。该参数不会影响接收到的图片高度，实际高度由生产者决定，如相机。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">format</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像格式，取值为<a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-e#imageformat9">ImageFormat</a>常量（目前仅支持 ImageFormat:JPEG，实际返回格式由生产者决定，如相机）。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">capacity</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">同时访问的最大图像数。该参数仅作为期望值，实际capacity由设备硬件决定。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.36.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagereceiver">ImageReceiver</a></td>         <td class="cellrowborder" width="50%">如果操作成功，则返回ImageReceiver实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">receiver</span>: image.<span class="hljs-property">ImageReceiver</span> = image.<span class="hljs-title function_">createImageReceiver</span>(<span class="hljs-number">8192</span>, <span class="hljs-number">8192</span>, image.<span class="hljs-property">ImageFormat</span>.<span class="hljs-property">JPEG</span>, <span class="hljs-number">8</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="imagecreateimagecreatordeprecated" device-type="phone,2in1,tablet,wearable,tv">image.createImageCreator<sup>(deprecated)</sup><i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="imagecreateimagecreatordeprecated" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>createImageCreator(width: number, height: number, format: number, capacity: number): ImageCreator</p>     <p>通过宽、高、图片格式、容量创建ImageCreator实例。</p>     <div><div class="hw-editor-tip info"><div class="title">说明</div><div class="content">       <p>从API version 9开始支持，从API version 11废弃，建议使用<a href="/consumer/cn/doc/harmonyos-references/arkts-apis-image-f#imagecreateimagecreator11">createImageCreator</a>代替。</p>      </div></div></div>     <p><strong>系统能力：</strong> SystemCapability.Multimedia.Image.ImageCreator</p>     <p><strong>参数：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table>       <thead>        <tr>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.1" width="25%">参数名</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.2" width="25%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.3" width="25%">必填</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.7.1.5.1.4" width="25%">说明</th>        </tr>       </thead>               <tbody><tr>         <td class="cellrowborder" width="25%">width</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像的默认宽度。单位：像素。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">height</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像的默认高度。单位：像素。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">format</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">图像格式，如YCBCR_422_SP，JPEG。</td>        </tr>        <tr>         <td class="cellrowborder" width="25%">capacity</td>         <td class="cellrowborder" width="25%">number</td>         <td class="cellrowborder" width="25%">是</td>         <td class="cellrowborder" width="25%">同时访问的最大图像数。该参数仅作为期望值，实际capacity由设备硬件决定。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>返回值：</strong></p>     <div class="tablenoborder">      <div class="tbBox"><table class="tableClass2_t">                      <tbody><tr class="firstRow">         <th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.1" width="50%">类型</th>         <th align="left" class="cellrowborder" id="mcps1.3.37.9.1.3.1.2" width="50%">说明</th>        </tr><tr>         <td class="cellrowborder" width="50%"><a href="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagecreator">ImageCreator</a></td>         <td class="cellrowborder" width="50%">如果操作成功，则返回ImageCreator实例。</td>        </tr>             </tbody></table></div>     </div>     <p><strong>示例：</strong></p>     <div _ngcontent-mlv-c106="" class="highlight-div"><div _ngcontent-mlv-c106="" class="highlight-div-header"><div _ngcontent-mlv-c106="" class="highlight-div-header-left"><div _ngcontent-mlv-c106="" class="handle-button expand-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">收起</div></div></div><div _ngcontent-mlv-c106="" class="highlight-div-header-right"><div _ngcontent-mlv-c106="" class="handle-button ai-button"></div><div _ngcontent-mlv-c106="" class="handle-button line-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">自动换行</div></div><div _ngcontent-mlv-c106="" class="handle-button theme-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">深色代码主题</div></div><div _ngcontent-mlv-c106="" class="handle-button copy-button"><div _ngcontent-mlv-c106="" class="handle-hover-tips">复制</div></div></div></div><div _ngcontent-mlv-c106="" class="highlight-scroll-div"><pre class="ts prettyprint linenums hljs language-typescript" data-highlighted="yes"><ol class="linenums"><li><span class="hljs-keyword">let</span> <span class="hljs-attr">creator</span>: image.<span class="hljs-property">ImageCreator</span> = image.<span class="hljs-title function_">createImageCreator</span>(<span class="hljs-number">8192</span>, <span class="hljs-number">8192</span>, image.<span class="hljs-property">ImageFormat</span>.<span class="hljs-property">JPEG</span>, <span class="hljs-number">8</span>);</li></ol></pre></div></div>    </div>    <div class="tiledSection">     <h2 id="svg标签说明" device-type="phone,2in1,tablet,wearable,tv">SVG标签说明<i class="anchor-icon anchor-icon-device active" active-tips="隐藏支持设备" tips="显示支持设备"></i><i class="anchor-icon anchor-icon-link" anchorid="svg标签说明" tips="复制节点链接"></i></h2>          <div class="device-list active"><span class="support-device-pre">支持设备</span><span class="support-device-item">Phone</span><span class="support-device-item">PC/2in1</span><span class="support-device-item">Tablet</span><span class="support-device-item">TV</span><span class="support-device-item">Wearable</span></div><p>从API version 10开始支持SVG标签，使用版本为(SVG) 1.1，SVG标签需设置width，height。SVG文件可添加xml声明，应以“&lt;?xml”开头，当前支持的标签列表有：</p>     <ul>      <li>a</li>      <li>circle</li>      <li>clipPath</li>      <li>defs</li>      <li>ellipse</li>      <li>feBlend</li>      <li>feColorMatrix</li>      <li>feComposite</li>      <li>feDiffuseLighting</li>      <li>feDisplacementMap</li>      <li>feDistantLight</li>      <li>feFlood</li>      <li>feGaussianBlur</li>      <li>feImage</li>      <li>feMorphology</li>      <li>feOffset</li>      <li>fePointLight</li>      <li>feSpecularLighting</li>      <li>feSpotLight</li>      <li>feTurbulence</li>      <li>filter</li>      <li>g</li>      <li>image</li>      <li>line</li>      <li>linearGradient</li>      <li>mask</li>      <li>path</li>      <li>pattern</li>      <li>polygon</li>      <li>polyline</li>      <li>radialGradient</li>      <li>rect</li>      <li>stop</li>      <li>svg</li>      <li>text</li>      <li>textPath</li>      <li>tspan</li>      <li>use</li>     </ul>    </div>   </div>   <div></div></div>